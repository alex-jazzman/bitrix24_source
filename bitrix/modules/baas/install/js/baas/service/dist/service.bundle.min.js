this.BX=this.BX||{};(function(e,s,a){"use strict";var i=babelHelpers.classPrivateFieldLooseKey("code");var t=babelHelpers.classPrivateFieldLooseKey("available");var l=babelHelpers.classPrivateFieldLooseKey("active");class r extends a.EventEmitter{constructor(e){super();Object.defineProperty(this,i,{writable:true,value:void 0});Object.defineProperty(this,t,{writable:true,value:false});Object.defineProperty(this,l,{writable:true,value:false});this.setEventNamespace("BX.Baas");babelHelpers.classPrivateFieldLooseBase(this,i)[i]=e;const r=s.Extension.getSettings("baas.service").services[babelHelpers.classPrivateFieldLooseBase(this,i)[i]];if(s.Type.isPlainObject(r)){babelHelpers.classPrivateFieldLooseBase(this,t)[t]=r.isAvailable;babelHelpers.classPrivateFieldLooseBase(this,l)[l]=r.isActive}if(BX.PULL&&s.Extension.getSettings("baas.service").pull){BX.PULL.extendWatch(s.Extension.getSettings("baas.service").pull.channelName);a.EventEmitter.subscribe("onPullEvent-baas",(e=>{const[s,r]=e.getData();if(s==="updateService"&&babelHelpers.classPrivateFieldLooseBase(this,i)[i]===r.service.code){if(babelHelpers.classPrivateFieldLooseBase(this,l)[l]!==r.service.isActive){babelHelpers.classPrivateFieldLooseBase(this,l)[l]=r.service.isActive;this.emit("onServiceActivityChanged",new a.BaseEvent({data:{code:babelHelpers.classPrivateFieldLooseBase(this,i)[i],activity:babelHelpers.classPrivateFieldLooseBase(this,l)[l]}}))}if(babelHelpers.classPrivateFieldLooseBase(this,t)[t]!==r.service.isAvailable){babelHelpers.classPrivateFieldLooseBase(this,t)[t]=r.service.isAvailable;this.emit("onServiceAvailabilityChanged",new a.BaseEvent({data:{code:babelHelpers.classPrivateFieldLooseBase(this,i)[i],availability:babelHelpers.classPrivateFieldLooseBase(this,t)[t]}}))}}}))}}isAvailable(){return babelHelpers.classPrivateFieldLooseBase(this,t)[t]}isActive(){return babelHelpers.classPrivateFieldLooseBase(this,l)[l]}}var v=babelHelpers.classPrivateFieldLooseKey("services");class b{static getByCode(e){if(!babelHelpers.classPrivateFieldLooseBase(this,v)[v][e]){babelHelpers.classPrivateFieldLooseBase(this,v)[v][e]=new r(e)}return babelHelpers.classPrivateFieldLooseBase(this,v)[v][e]}}Object.defineProperty(b,v,{writable:true,value:[]});e.Service=r;e.ServiceManager=b})(this.BX.Baas=this.BX.Baas||{},BX,BX.Event);
//# sourceMappingURL=service.bundle.map.js