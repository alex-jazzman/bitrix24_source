jn.define("intranet/department-info",((t,e,s)=>{const{Loc:n}=t("loc");const{BottomSheet:o}=t("bottom-sheet");const{Color:r}=t("tokens");const{Box:a}=t("ui-system/layout/box");const{BoxFooter:i}=t("ui-system/layout/dialog-footer");const{createTestIdGenerator:d}=t("utils/test");const{Button:u,ButtonDesign:c,ButtonSize:l}=t("ui-system/form/buttons/button");const{ReduxDepartmentStructure:p}=t("intranet/department-structure");const{Area:h}=t("ui-system/layout/area");const{AreaList:g}=t("ui-system/layout/area-list");const{dispatch:m}=t("statemanager/redux/store");const{fetchParentDepartmentsThunk:y}=t("intranet/statemanager/redux/slices/department");const I=600;class S extends LayoutComponent{constructor(t){super(t);this.getTestId=d({context:this});this.#t(t)}#t(t){this.state={pending:t.pending??true,departmentIds:[]}}async componentDidMount(){const{departmentId:t}=this.props;const{payload:{isSuccess:e,hierarchy:s}}=await m(y({departmentId:t}));if(e){this.setState({pending:false,departmentIds:this.#e(s)})}}static open({departmentId:t,title:e,parentWidget:s=PageManager,height:a=I,onClose:i,onSelectButtonClick:d}){const u=new S({departmentId:t,onClose:i,onSelectButtonClick:d});const c=new o({component:u,titleParams:{type:"dialog",text:e??n.getMessage("DEPARTMENT_INFO_BOX_TITLE"),largeMode:true}});c.setParentWidget(s).setBackgroundColor(r.bgSecondary.toHex()).setNavigationBarColor(r.bgSecondary.toHex()).disableShowOnTop().disableOnlyMediumPosition().setMediumPositionHeight(a).disableContentSwipe().enableBounce().enableSwipe().disableHorizontalSwipe().enableResizeContent().enableAdoptHeightByKeyboard().open().then((t=>{u.setLayout(t)})).catch((()=>{}));return u}render(){return a({footer:this.#s(),withScroll:true},g({testId:this.getTestId("area-list"),withScroll:false},h({isFirst:true,testId:this.getTestId("area")},this.#n())))}close(){this.layout?.close()}#n(){const{departmentIds:t,pending:e}=this.state;return p({testId:this.getTestId(`structure-${t?.[0]}`),departmentIds:t,onLayout:this.onStructureLayout,pending:e})}#e(t){if(t.length<4){return[t[0],...t]}return t}#s(){const{showSelectButton:t=true,selectButtonText:e,onSelectButtonClick:s,departmentId:o}=this.props;return i({safeArea:true,testId:this.getTestId("buttons"),style:{borderTopWidth:1,borderTopColor:r.bgSeparatorPrimary.toHex()}},t&&u({testId:this.getTestId("select-button"),text:e??n.getMessage("DEPARTMENT_INFO_BOX_SELECT_BUTTON_TEXT"),size:l.L,design:c.PRIMARY,stretched:true,onClick:()=>{s?.(o)}}))}setLayout(t){this.layout=t;this.layout.on("onViewHidden",(()=>{this.props.onClose?.(this)}))}}s.exports={DepartmentInfo:S}}));
//# sourceMappingURL=extension.map.js