jn.define("intranet/department-info",((t,e,s)=>{const{Loc:o}=t("loc");const{BottomSheet:n}=t("bottom-sheet");const{Color:r,Indent:a}=t("tokens");const{Box:i}=t("ui-system/layout/box");const{BoxFooter:d}=t("ui-system/layout/dialog-footer");const{createTestIdGenerator:u}=t("utils/test");const{Button:l,ButtonDesign:c,ButtonSize:p}=t("ui-system/form/buttons/button");const{getParentDepartments:m}=t("intranet/department-info/src/api");const{CompanyStructure:h}=t("intranet/department-info/src/company-structure");const{Area:g}=t("ui-system/layout/area");const{AreaList:y}=t("ui-system/layout/area-list");const S=600;class C extends LayoutComponent{constructor(t){super(t);this.getTestId=u({context:this});this.#t(t)}#t(t){this.state={pending:t.pending??true,departments:[],heads:[],employeeCounts:[]}}async componentDidMount(){const t=await m(this.props.departmentId);if(t.status==="success"){const{departments:e=[],heads:s=[],employeeCounts:o=[]}=t.data;this.setState({pending:false,departments:e,heads:s,employeeCounts:o})}}static open({departmentId:t,title:e,parentWidget:s=PageManager,height:a=S,onClose:i,onSelectButtonClick:d}){const u=new C({departmentId:t,onClose:i,onSelectButtonClick:d});const l=new n({component:u,titleParams:{type:"dialog",text:e??o.getMessage("DEPARTMENT_INFO_BOX_TITLE"),largeMode:true}});l.setParentWidget(s).setBackgroundColor(r.bgSecondary.toHex()).setNavigationBarColor(r.bgSecondary.toHex()).disableShowOnTop().disableOnlyMediumPosition().setMediumPositionHeight(a).disableContentSwipe().enableBounce().enableSwipe().disableHorizontalSwipe().enableResizeContent().enableAdoptHeightByKeyboard().open().then((t=>{u.setLayout(t)})).catch((()=>{}));return u}render(){return i({footer:this.#e(),withScroll:true},y({testId:this.getTestId("area-list"),withScroll:false},g({isFirst:true,testId:this.getTestId("area")},this.#s())))}close(){this.layout?.close()}#s(){const{departments:t,heads:e,employeeCounts:s,pending:o}=this.state;return h({testId:this.getTestId("structure"),departments:this.#o(t),heads:e,employeeCounts:s,pending:o,displayEmployeesCount:false,containerStyle:{marginBottom:a.XL.toNumber()}})}#o(t){if(t.length<4){return[t[0],...t]}return t}#e(){const{showSelectButton:t=true,selectButtonText:e,onSelectButtonClick:s,departmentId:n}=this.props;return d({safeArea:true,testId:this.getTestId("buttons"),style:{borderTopWidth:1,borderTopColor:r.bgSeparatorPrimary.toHex()}},t&&l({testId:this.getTestId("select-button"),text:e??o.getMessage("DEPARTMENT_INFO_BOX_SELECT_BUTTON_TEXT"),size:p.L,design:c.PRIMARY,stretched:true,onClick:()=>{s?.(n)}}))}setLayout(t){this.layout=t;this.layout.on("onViewHidden",(()=>{this.props.onClose?.(this)}))}}s.exports={DepartmentInfo:C}}));
//# sourceMappingURL=extension.map.js