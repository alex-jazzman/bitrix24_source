jn.define("intranet/invite-new",((t,e,n)=>{const{PureComponent:i}=t("layout/pure-component");const{Loc:s}=t("loc");const{Box:a}=t("ui-system/layout/box");const{BoxFooter:r}=t("ui-system/layout/dialog-footer");const{IntranetInviteAnalytics:o}=t("intranet/invite-new/src/analytics");const{Indent:l}=t("tokens");const{Button:c,ButtonDesign:u,ButtonSize:d}=t("ui-system/form/buttons/button");const{UIMenu:I}=t("layout/ui/menu");const{ContentStatusBlock:v}=t("intranet/invite-new/src/content-status-block");const{InviterFactory:h}=t("intranet/invite-new/src/inviter/factory");const{InviteCases:m}=t("intranet/invite-new/src/inviter/type");const{getSmartphoneContacts:p}=t("layout/ui/smartphone-contact-selector");const{createTestIdGenerator:g}=t("utils/test");class y extends i{constructor(t){super(t);this.smartphoneContacts=null;this.getTestId=g({prefix:"invite"});this.#t(t)}async componentDidMount(){const{department:t=null}=this.state;this.updateDepartmentInInviters(t);this.smartphoneContacts=await p()}#t(t){const{department:e=null}=t;this.state={department:e};this.inviters=Object.values(m).map((t=>h.createInviterByCase(t,this.#e()))).sort(((t,e)=>t.getSortOrder()-e.getSortOrder()))}updateDepartmentInInviters(t){this.inviters.forEach((e=>e.updateDepartment(t)))}#e=()=>{const{canInviteByLink:t,canInviteByEmail:e,canInviteBySMS:n,adminConfirm:i,analytics:s,layout:a,isBitrix24Included:r,isInviteWithLocalEmailAppEnabled:o,creatorEmailConfirmed:l=false,multipleInvite:c=true,onInviteSentHandler:u=null,onInviteError:d=null}=this.props;return{canInviteByLink:t,canInviteByEmail:e,canInviteBySMS:n,adminConfirm:i,analytics:s,layout:a,isBitrix24Included:r,isInviteWithLocalEmailAppEnabled:o,creatorEmailConfirmed:l,multipleInvite:c,onInviteSentHandler:u,onInviteError:d,selectedDepartmentChanged:this.#n,initialContacts:this.smartphoneContacts,onUIMenuItemSelected:this.onUIMenuItemSelected,getDepartment:this.getDepartment,onInviteLinkChanged:this.onInviteLinkChanged}};onUIMenuItemSelected=()=>{this.menu.hide()};onInviteLinkChanged=t=>{this.inviters.filter((t=>t.shouldUpdateInviteLink())).forEach((e=>{e.setInviteLink?.(t)}))};getDepartment=()=>this.state.department;render(){const{analytics:t,layout:e}=this.props;const{department:n}=this.state;return a({footer:this.#i(),style:{paddingVertical:l.XL3.toNumber()}},v({testId:this.getTestId("status-block"),analytics:t,layout:e,department:n,selectedDepartmentChanged:this.#n,graphicsUri:this.#s().getGraphicsUri()}))}#n=t=>{const{analytics:e}=this.props;e.setDepartmentParam(t!==null);this.setState({department:t},(()=>{this.updateDepartmentInInviters(t)}))};#i(){const t=this.#a();return r({safeArea:true,testId:this.getTestId("buttons")},this.#s().renderMainButton(),t>2&&c({testId:this.getTestId("by-other-button"),forwardRef:this.#r,text:s.getMessage("INTRANET_INVITE_BY_OTHER_BUTTON_TEXT"),size:d.M,design:u.PLAN_ACCENT,stretched:true,onClick:()=>{this.#o()}}),t===2&&this.#l().renderSecondaryButton())}#c(){return this.inviters.filter((t=>t.isAvailableInviteMethod()))}#u(){return this.#c().filter((t=>!t.isDisabledInviteMethod()))}#a(){return this.#u().length}#s(){const t=this.#u();if(t.length>0){return t[0]}return this.inviters[0]}#l(){const t=this.#u();if(t.length>1){return t[1]}return null}#r=t=>{this.inviteCasesButtonRef=t};#o=()=>{this.menu=new I(this.#d());this.menu.show({target:this.inviteCasesButtonRef})};#d=()=>{const t=this.#s().getInviteCase();return this.#c().filter((e=>e.getInviteCase()!==t)).map((t=>t.getItemForUIMenu()))}}n.exports={Invite:y,IntranetInviteAnalytics:o,InviterFactory:h,InviteCases:m}}));
//# sourceMappingURL=extension.map.js