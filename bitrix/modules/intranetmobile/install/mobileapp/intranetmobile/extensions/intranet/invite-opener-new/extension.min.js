jn.define("intranet/invite-opener-new",((e,n,t)=>{const{Notify:i}=e("notify");const{Invite:a,IntranetInviteAnalytics:o,AnalyticsEvent:r}=e("intranet/invite-new");const{Alert:s}=e("alert");const{Loc:l}=e("loc");const{StatusBox:c}=e("layout/ui/status-box");const{Tourist:I}=e("tourist");const{makeLibraryImagePath:d}=e("asset-manager");const E={POSSIBILITIES_RESTRICTED:"Invite possibilities restricted",PERMISSIONS_RESTRICTED:"Invite permissions restricted"};const v=e=>{if(env.isCollaber||env.extranet){return}i.showIndicatorLoading();y().then((n=>m(n,e)),(n=>u(n,e))).catch((e=>console.error(e))).finally((()=>i.hideCurrentIndicator()))};const u=(e,n)=>{const t=e.errors&&e.errors.length>0;if(t){g(e.errors,n.onInviteError)}};const m=(e,n)=>{f();const{errors:t,data:i}=e;if(t&&t.length>0){g(t,n.onInviteError);return}const{canCurrentUserInvite:a}=i;if(!a){p(n.onInviteError,n.parentLayout);return}S({...T(i),...n})};const f=()=>{I.ready().then((()=>{if(I.firstTime("visit_invitations")){return I.remember("visit_invitations").then((()=>{BX.postComponentEvent("onSetUserCounters",[{[String(env.siteId)]:{menu_invite:0}}])})).catch(console.error)}return Promise.resolve()})).catch(console.error)};const p=(e,n=PageManager)=>{c.open({backdropTitle:l.getMessage("INTRANET_INVITE_OPENER_TITLE_MSGVER_1"),testId:"status-box-no-invitation",imageUri:d("no-invitation.svg","invite-status-box","intranet"),parentWidget:n,description:l.getMessage("INTRANET_INVITE_DISABLED_BOX_TEXT"),buttonText:l.getMessage("INTRANET_INVITE_DISABLED_BOX_BUTTON_TEXT")});if(e){e([new Error(E.PERMISSIONS_RESTRICTED)])}};const g=(e,n)=>{s.alert("",a.getAjaxErrorText(e));if(n){n(e)}};const y=()=>BX.ajax.runAction("intranetmobile.invite.getInviteSettings");const T=e=>{const{adminConfirm:n=false,creatorEmailConfirmed:t=false,canInviteBySMS:i=false,canInviteByLink:a=false,canInviteByEmail:o=false,isBitrix24Included:r=false,isInviteWithLocalEmailAppEnabled:s=true}=e;return{adminConfirm:n,creatorEmailConfirmed:t,canInviteBySMS:i,canInviteByLink:a,canInviteByEmail:o,isBitrix24Included:r,isInviteWithLocalEmailAppEnabled:s}};const S=({parentLayout:e=null,openWidgetConfig:n={},analytics:t={},onInviteSentHandler:i=null,onInviteError:r=null,onViewHiddenWithoutInvitingHandler:s=null,canInviteBySMS:c=false,canInviteByLink:I=false,canInviteByEmail:d=false,creatorEmailConfirmed:E=false,multipleInvite:v=true,adminConfirm:u=false,isBitrix24Included:m=false,isInviteWithLocalEmailAppEnabled:f=true})=>{const p=new o({analytics:t});p.sendDrawerOpenEvent();p.setDepartmentParam(false);const g={enableNavigationBarBorder:false,titleParams:{text:l.getMessage("INTRANET_INVITE_OPENER_TITLE_MSGVER_1"),type:"dialog"},modal:true,backdrop:{showOnTop:false,onlyMediumPosition:false,mediumPositionHeight:530,bounceEnable:true,swipeAllowed:true,swipeContentAllowed:false,horizontalSwipeAllowed:false,shouldResizeContent:true,adoptHeightByKeyboard:true},...n,onReady:t=>{let o=false;let l=false;t.showComponent(new a({layout:t,parentLayout:e,openWidgetConfig:n,analytics:p,onInviteSentHandler:e=>{o=true;if(i){i(e)}},onInviteError:e=>{l=true;if(r){r(e)}},canInviteBySMS:c,canInviteByLink:I,canInviteByEmail:d,creatorEmailConfirmed:E,multipleInvite:v,adminConfirm:u,isBitrix24Included:m,isInviteWithLocalEmailAppEnabled:f}));t.on("onViewRemoved",(()=>{if(!o&&!l&&s){s()}}))}};if(e){e.openWidget("layout",g);return}PageManager.openWidget("layout",g)};t.exports={openIntranetInviteWidget:v,AnalyticsEvent:r,ErrorCode:E}}));
//# sourceMappingURL=extension.map.js