jn.define("intranet/invite-opener-new",((e,n,t)=>{const{Notify:i}=e("notify");const{Invite:o,IntranetInviteAnalytics:r,AnalyticsEvent:a}=e("intranet/invite-new");const{Alert:s}=e("alert");const{Loc:l}=e("loc");const{InviteStatusBox:c}=e("intranet/invite-status-box");const{Tourist:I}=e("tourist");const d={POSSIBILITIES_RESTRICTED:"Invite possibilities restricted",PERMISSIONS_RESTRICTED:"Invite permissions restricted"};const E=e=>{if(env.isCollaber||env.extranet){return}i.showIndicatorLoading();T().then((n=>u(n,e)),(n=>v(n,e))).catch((e=>console.error(e))).finally((()=>i.hideCurrentIndicator()))};const v=(e,n)=>{const t=e.errors&&e.errors.length>0;if(t){p(e.errors,n.onInviteError)}};const u=(e,n)=>{f();const{errors:t,data:i}=e;if(t&&t.length>0){p(t,n.onInviteError);return}const{canCurrentUserInvite:o}=i;if(!o){m(n.onInviteError,n.parentLayout);return}y({...g(i),...n})};const f=()=>{I.ready().then((()=>{if(I.firstTime("visit_invitations")){return I.remember("visit_invitations").then((()=>{BX.postComponentEvent("onSetUserCounters",[{[String(env.siteId)]:{menu_invite:0}}])})).catch(console.error)}return Promise.resolve()})).catch(console.error)};const m=(e,n=PageManager)=>{c.open({backdropTitle:l.getMessage("INTRANET_INVITE_OPENER_TITLE_MSGVER_1"),testId:"status-box-no-invitation",imageName:"no-invitation.svg",parentWidget:n,description:l.getMessage("INTRANET_INVITE_DISABLED_BOX_TEXT"),buttonText:l.getMessage("INTRANET_INVITE_DISABLED_BOX_BUTTON_TEXT")});if(e){e([new Error(d.PERMISSIONS_RESTRICTED)])}};const p=(e,n)=>{s.alert("",o.getAjaxErrorText(e));if(n){n(e)}};const T=()=>BX.ajax.runAction("intranetmobile.invite.getInviteSettings");const g=e=>{const{adminConfirm:n=false,creatorEmailConfirmed:t=false,canInviteBySMS:i=false,canInviteByLink:o=false,canInviteByEmail:r=false,isBitrix24Included:a=false,isInviteWithLocalEmailAppEnabled:s=true}=e;return{adminConfirm:n,creatorEmailConfirmed:t,canInviteBySMS:i,canInviteByLink:o,canInviteByEmail:r,isBitrix24Included:a,isInviteWithLocalEmailAppEnabled:s}};const y=({parentLayout:e=null,openWidgetConfig:n={},analytics:t={},onInviteSentHandler:i=null,onInviteError:a=null,onViewHiddenWithoutInvitingHandler:s=null,canInviteBySMS:c=false,canInviteByLink:I=false,canInviteByEmail:d=false,creatorEmailConfirmed:E=false,multipleInvite:v=true,adminConfirm:u=false,isBitrix24Included:f=false,isInviteWithLocalEmailAppEnabled:m=true})=>{const p=new r({analytics:t});p.sendDrawerOpenEvent();p.setDepartmentParam(false);const T={enableNavigationBarBorder:false,titleParams:{text:l.getMessage("INTRANET_INVITE_OPENER_TITLE_MSGVER_1"),type:"dialog"},modal:true,backdrop:{showOnTop:false,onlyMediumPosition:false,mediumPositionHeight:530,bounceEnable:true,swipeAllowed:true,swipeContentAllowed:false,horizontalSwipeAllowed:false,shouldResizeContent:true,adoptHeightByKeyboard:true},...n,onReady:t=>{let r=false;let l=false;t.showComponent(new o({layout:t,parentLayout:e,openWidgetConfig:n,analytics:p,onInviteSentHandler:e=>{r=true;if(i){i(e)}},onInviteError:e=>{l=true;if(a){a(e)}},canInviteBySMS:c,canInviteByLink:I,canInviteByEmail:d,creatorEmailConfirmed:E,multipleInvite:v,adminConfirm:u,isBitrix24Included:f,isInviteWithLocalEmailAppEnabled:m}));t.on("onViewRemoved",(()=>{if(!r&&!l&&s){s()}}))}};if(e){e.openWidget("layout",T);return}PageManager.openWidget("layout",T)};t.exports={openIntranetInviteWidget:E,AnalyticsEvent:a,ErrorCode:d}}));
//# sourceMappingURL=extension.map.js