(function(e,t,s,n,i,a){"use strict";function o(e,t){c(e,t);t.add(e)}function c(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function r(e,t,s){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return s}var h=t.Reflection.namespace("BX.Humanresources");var u=new WeakSet;var l=new WeakSet;var d=new WeakSet;var m=new WeakSet;var f=new WeakSet;var g=function(){function e(t){babelHelpers.classCallCheck(this,e);o(this,f);o(this,m);o(this,d);o(this,l);o(this,u);this.accessRightsOption=t.accessRightsOption;this.accessRights=t.accessRights;this.menuId=t.menuId}babelHelpers.createClass(e,[{key:"init",value:function e(){this.accessRights.draw();this.isRendered=true;r(this,u,p).call(this);r(this,l,R).call(this)}},{key:"openPermission",value:function e(t){if(t.menuId===this.menuId){return}if(this.isRendered&&this.accessRights.hasUnsavedChanges()){event.stopImmediatePropagation();r(this,d,v).call(this,t.menuId)}else{this.redrawAccessRight(t)}}},{key:"redrawAccessRight",value:function e(i){var a=this;if(this.isRendered){this.accessRights.destroy()}this.menuId=i.menuId;this.isRendered=false;var o=new n.Loader({target:document.getElementById("bx-hr-permission-config-role-main-container")});o.show();r(this,f,S).call(this,i).then((function(e){if(e.userGroups&&e.accessRights){a.accessRightsOption.userGroups=e.userGroups;a.accessRightsOption.accessRights=e.accessRights;a.accessRightsOption.additionalSaveParams={category:i.category};a.accessRightsOption.loadParams={category:i.category};a.accessRights=new s.App(a.accessRightsOption);scrollTo({top:0})}a.accessRights.draw();a.isRendered=true}))["catch"]((function(){BX.UI.Notification.Center.notify({content:t.Loc.getMessage("HUMANRESOURCES_CONFIG_PERMISSIONS_ERROR"),position:"top-right",autoHideDelay:3e3})}))["finally"]((function(){o.destroy()}))}}]);return e}();function p(){var e=document.getElementById("ui-page-slider-content");if(e){var s=t.Dom.create("div",{props:{className:"hr-permission-config-role-main-content"}});s.className="hr-permission-config-role-main-content";t.Dom.insertBefore(s,e);t.Dom.append(e,s)}}function R(){var e=document.getElementById("left-panel");if(e){var s=t.Dom.create("div",{props:{className:"hr-permission-config-role-main-left-menu"}});t.Dom.insertBefore(s,e);t.Dom.append(e,s)}}function v(e){var s=this;var n=a.MessageBox.create({message:t.Loc.getMessage("HUMANRESOURCES_CONFIG_PERMISSIONS_SAVE_MESSAGEBOX_TEXT"),modal:true,buttons:[new i.SaveButton({size:i.ButtonSize.SMALL,color:i.ButtonColor.PRIMARY,onclick:function t(i){r(s,m,w).call(s,i,e,n)}}),new i.CancelButton({size:i.ButtonSize.SMALL,onclick:function e(){n.close()}})]});n.show()}function w(e,t,s){e.setWaiting(true);this.accessRights.sendActionRequest().then((function(){document.querySelector('[data-menu-id="'.concat(t,'"]')).click()}))["catch"]((function(){}))["finally"]((function(){s.close()}))}function S(e){return new Promise((function(s,n){t.ajax.runComponentAction("bitrix:humanresources.config.permissions","getData",{mode:"class",data:{parameters:e}}).then((function(e){s(e.data)}))["catch"](n)}))}h.ConfigPermsComponent=g})(this.window=this.window||{},BX,BX.UI.AccessRights.V2,BX,BX.UI,BX.UI.Dialogs);
//# sourceMappingURL=script.map.js