{"version":3,"file":"structure-components.bundle.js","sources":["../src/components/popup/base-popup.js","../src/components/menu/base-action-menu.js","../src/components/menu/items/route-action-menu-item.js","../src/components/menu/route-action-menu.js","../src/components/menu/items/action-menu-item.js","../src/components/menu/action-menu.js","../src/components/menu/items/user-action-menu-item.js","../src/components/menu/user-list-action-menu.js","../src/components/popup/layout/default-popup-layout.js","../src/components/popup/confirmation-popup.js","../src/components/popup/dnd-confirmation-popup.js","../src/directives/hint.js","../src/components/management-dialog/core/header.js","../src/components/management-dialog/core/footer.js","../src/components/management-dialog/management-dialog.js","../src/options/selectors.js","../src/components/responsive-hint/responsive-hint.js","../src/components/responsive-hint/default-hint.js","../src/components/move-user-popup/api.js","../src/components/move-user-popup/move-user-popup.js"],"sourcesContent":["import { Popup, PopupManager } from 'main.popup';\nimport { Type } from 'main.core';\nimport type { PopupOptions } from 'main.popup';\n\nconst POPUP_CONTAINER_PREFIX = '#popup-window-content-';\n\nexport const BasePopup = {\n\tname: 'BasePopup',\n\temits: ['close'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: {},\n\t\t},\n\t},\n\tcomputed: {\n\t\tpopupContainer(): string\n\t\t{\n\t\t\treturn `${POPUP_CONTAINER_PREFIX}${this.id}`;\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tthis.instance = this.getPopupInstance();\n\t\tthis.instance.show();\n\t},\n\tmounted(): void\n\t{\n\t\tthis.instance.adjustPosition({\n\t\t\tforceBindPosition: true,\n\t\t\tposition: this.getPopupConfig().bindOptions.position,\n\t\t});\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tif (!this.instance)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.closePopup();\n\t},\n\tmethods: {\n\t\tgetPopupInstance(): Popup\n\t\t{\n\t\t\tif (!this.instance)\n\t\t\t{\n\t\t\t\tPopupManager.getPopupById(this.id)?.destroy();\n\t\t\t\tconst config = this.getPopupConfig();\n\t\t\t\tthis.instance = new Popup(config);\n\n\t\t\t\tif (this.config.angleOffset)\n\t\t\t\t{\n\t\t\t\t\tthis.instance.setAngle({ offset: this.config.angleOffset });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this.instance;\n\t\t},\n\t\tgetDefaultConfig(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: this.id,\n\t\t\t\tclassName: 'hr-structure-components-base-popup',\n\t\t\t\tautoHide: true,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tbindOptions: {\n\t\t\t\t\tposition: 'bottom',\n\t\t\t\t},\n\t\t\t\tcacheable: false,\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => this.closePopup(),\n\t\t\t\t\tonPopupShow: async () => {\n\t\t\t\t\t\tconst container = this.instance.getPopupContainer();\n\t\t\t\t\t\tawait Promise.resolve();\n\t\t\t\t\t\tconst { top } = container.getBoundingClientRect();\n\t\t\t\t\t\tconst offset = top + container.offsetHeight - document.body.offsetHeight;\n\t\t\t\t\t\tif (offset > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst margin = 5;\n\t\t\t\t\t\t\tthis.instance.setMaxHeight(container.offsetHeight - offset - margin);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tgetPopupConfig(): PopupOptions\n\t\t{\n\t\t\tconst defaultConfig = this.getDefaultConfig();\n\t\t\tconst modifiedOptions = {};\n\n\t\t\tconst defaultClassName = defaultConfig.className;\n\t\t\tif (this.config.className)\n\t\t\t{\n\t\t\t\tmodifiedOptions.className = `${defaultClassName} ${this.config.className}`;\n\t\t\t}\n\n\t\t\tconst offsetTop = this.config.offsetTop ?? defaultConfig.offsetTop;\n\t\t\tif (this.config.bindOptions?.position === 'top' && Type.isNumber(this.config.offsetTop))\n\t\t\t{\n\t\t\t\tmodifiedOptions.offsetTop = offsetTop - 10;\n\t\t\t}\n\n\t\t\treturn { ...defaultConfig, ...this.config, ...modifiedOptions };\n\t\t},\n\t\tclosePopup(): void\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t\tthis.instance.destroy();\n\t\t\tthis.instance = null;\n\t\t},\n\t\tenableAutoHide(): void\n\t\t{\n\t\t\tthis.getPopupInstance().setAutoHide(true);\n\t\t},\n\t\tdisableAutoHide(): void\n\t\t{\n\t\t\tthis.getPopupInstance().setAutoHide(false);\n\t\t},\n\t\tadjustPosition(): void\n\t\t{\n\t\t\tthis.getPopupInstance().adjustPosition({\n\t\t\t\tforceBindPosition: true,\n\t\t\t\tposition: this.getPopupConfig().bindOptions.position,\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Teleport :to=\"popupContainer\">\n\t\t\t<slot\n\t\t\t\t:adjustPosition=\"adjustPosition\"\n\t\t\t\t:enableAutoHide=\"enableAutoHide\"\n\t\t\t\t:disableAutoHide=\"disableAutoHide\"\n\t\t\t\t:closePopup=\"closePopup\"\n\t\t\t></slot>\n\t\t</Teleport>\n\t`,\n};\n","import { BasePopup } from '../popup/base-popup';\nimport type { PopupOptions } from 'main.popup';\n\nimport './styles/base-action-menu.css';\n\nexport const BaseActionMenuPropsMixin = {\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tbindElement: {\n\t\t\ttype: HTMLElement,\n\t\t\trequired: true,\n\t\t},\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t\tdefault: [],\n\t\t},\n\t\ttitleBar: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\tcontainerDataTestId: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t},\n};\n\nexport const BaseActionMenu = {\n\tname: 'BaseActionMenu',\n\n\tmixins: [BaseActionMenuPropsMixin],\n\n\tprops: {\n\t\twidth: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: 260,\n\t\t},\n\t\tdelimiter: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t\tangleOffset: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: 0,\n\t\t},\n\t\ttitleBar: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\tclassName: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t},\n\n\temits: ['action', 'close'],\n\tcomponents: {\n\t\tBasePopup,\n\t},\n\n\tcomputed: {\n\t\tpopupConfig(): PopupOptions\n\t\t{\n\t\t\tconst options = {\n\t\t\t\twidth: this.width,\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\tborderRadius: 12,\n\t\t\t\tcontentNoPaddings: true,\n\t\t\t\tcontentPadding: 0,\n\t\t\t\tpadding: 0,\n\t\t\t\toffsetTop: 4,\n\t\t\t};\n\n\t\t\tif (this.angleOffset >= 0)\n\t\t\t{\n\t\t\t\toptions.angleOffset = this.angleOffset;\n\t\t\t}\n\n\t\t\tif (this.titleBar)\n\t\t\t{\n\t\t\t\toptions.titleBar = this.titleBar;\n\t\t\t}\n\n\t\t\tif (this.className)\n\t\t\t{\n\t\t\t\toptions.className = this.className;\n\t\t\t}\n\n\t\t\treturn options;\n\t\t},\n\t},\n\n\tmethods: {\n\t\tonItemClick(event, item: Object, closePopup: function): void\n\t\t{\n\t\t\tevent.stopPropagation();\n\n\t\t\tif (item.disabled ?? false)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('action', item.id);\n\t\t\tclosePopup();\n\t\t},\n\n\t\tclose(): void\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<BasePopup\n\t\t\t:config=\"popupConfig\"\n\t\t\tv-slot=\"{closePopup}\"\n\t\t\t:id=\"id\"\n\t\t\t@close=\"close\"\n\t\t>\n\t\t\t<div\n\t\t\t\tclass=\"hr-structure-components-action-menu-container\"\n\t\t\t\t:data-test-id=\"containerDataTestId\"\n\t\t\t>\n\t\t\t<template v-for=\"(item, index) in items\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"hr-structure-components-action-menu-item-wrapper\"\n\t\t\t\t\t:class=\"{ '--disabled': item.disabled ?? false }\"\n\t\t\t\t\t@click=\"onItemClick($event, item, closePopup)\"\n\t\t\t\t>\n\t\t\t\t\t<slot :item=\"item\"></slot>\n\t\t\t\t</div>\n\t\t\t\t<span v-if=\"delimiter && index < items.length - 1\"\n\t\t\t\t\tclass=\"hr-structure-action-popup-menu-item-delimiter\"\n\t\t\t\t></span>\n\t\t\t</template>\n\t\t\t</div>\n\t\t</BasePopup>\n\t`,\n};\n","import './styles/route-action-menu-item.css';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { getColorCode } from 'humanresources.company-structure.utils';\n\nexport const RouteActionMenuItem = {\n\tname: 'RouteActionMenuItem',\n\tcomponents: { BIcon },\n\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\timageClass: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\titemClass: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tbIcon: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\tdataTestId: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t},\n\n\tmethods: {\n\t\tgetColor(bIcon: Object): string\n\t\t{\n\t\t\tif (bIcon.colorTokenName)\n\t\t\t{\n\t\t\t\treturn getColorCode(bIcon.colorTokenName);\n\t\t\t}\n\n\t\t\treturn bIcon.color ?? 'black';\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"hr-structure-route-action-popup-menu-item\"\n\t\t\t:class=\"itemClass\"\n\t\t\t:data-test-id=\"dataTestId\"\n\t\t>\n\t\t\t<div class=\"hr-structure-route-action-popup-menu-item__content\">\n\t\t\t\t<BIcon\n\t\t\t\t\tv-if=\"bIcon\"\n\t\t\t\t\t:name=\"bIcon.name\"\n\t\t\t\t\t:size=\"bIcon.size || 20\"\n\t\t\t\t\t:color=\"getColor(bIcon)\"\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"!bIcon && imageClass\"\n\t\t\t\t\tclass=\"hr-structure-route-action-popup-menu-item__content-icon-container\"\n\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"hr-structure-route-action-popup-menu-item__content-icon\"\n\t\t\t\t\t\t:class=\"imageClass\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"hr-structure-route-action-popup-menu-item__content-text-container\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"hr-structure-route-action-popup-menu-item__content-title\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ this.title }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"hr-structure-route-action-popup-menu-item__content-description\">{{ this.description }}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BaseActionMenu, BaseActionMenuPropsMixin } from './base-action-menu';\nimport { RouteActionMenuItem } from './items/route-action-menu-item';\n\nexport const RouteActionMenu = {\n\tname: 'RouteActionMenu',\n\tmixins: [BaseActionMenuPropsMixin],\n\tcomponents: {\n\t\tBaseActionMenu,\n\t\tRouteActionMenuItem,\n\t},\n\n\ttemplate: `\n\t\t<BaseActionMenu\n\t\t\t:id=\"id\"\n\t\t\t:items=\"items\"\n\t\t\t:bindElement=\"bindElement\"\n\t\t\t:containerDataTestId=\"containerDataTestId\"\n\t\t\t:width=\"260\"\n\t\t\tv-slot=\"{item}\"\n\t\t\t@close=\"this.$emit('close')\"\n\t\t>\n\t\t\t<RouteActionMenuItem\n\t\t\t\t:id=\"item.id\"\n\t\t\t\t:title=\"item.title\"\n\t\t\t\t:description=\"item.description\"\n\t\t\t\t:itemClass=\"item.itemClass\"\n\t\t\t\t:imageClass=\"item.imageClass\"\n\t\t\t\t:dataTestId=\"item.dataTestId\"\n\t\t\t\t:bIcon=\"item.bIcon\"\n\t\t\t/>\n\t\t</BaseActionMenu>\n\t`,\n};\n","import './styles/action-menu-item.css';\n\nconst SupportedColors = new Set(['red']);\n\nexport const ActionMenuItem = {\n\tname: 'ActionMenuItem',\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\timageClass: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tdataTestId: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tcolorClass(): string\n\t\t{\n\t\t\tif (SupportedColors.has(this.color))\n\t\t\t{\n\t\t\t\treturn `--${this.color}`;\n\t\t\t}\n\n\t\t\treturn '';\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"hr-structure-action-popup-menu-item\"\n\t\t\t:data-test-id=\"dataTestId\"\n\t\t>\n\t\t\t<div class=\"hr-structure-action-popup-menu-item__content\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"hr-structure-action-popup-menu-item__content-title\"\n\t\t\t\t\t:class=\"[imageClass, colorClass]\"\n\t\t\t\t>\n\t\t\t\t\t{{ title }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BaseActionMenu, BaseActionMenuPropsMixin } from './base-action-menu';\nimport { ActionMenuItem } from './items/action-menu-item';\n\nexport const ActionMenu = {\n\tname: 'ActionMenu',\n\tmixins: [BaseActionMenuPropsMixin],\n\tcomponents: {\n\t\tBaseActionMenu,\n\t\tActionMenuItem,\n\t},\n\n\ttemplate: `\n\t\t<BaseActionMenu\n\t\t\t:id=\"id\"\n\t\t\t:items=\"items\"\n\t\t\t:bindElement=\"bindElement\"\n\t\t\t:containerDataTestId=\"containerDataTestId\"\n\t\t\t:width=\"260\"\n\t\t\t:delimiter=\"false\"\n\t\t\tv-slot=\"{item}\"\n\t\t\t@close=\"this.$emit('close')\"\n\t\t>\n\t\t\t<ActionMenuItem\n\t\t\t\t:id=\"item.id\"\n\t\t\t\t:title=\"item.title\"\n\t\t\t\t:imageClass=\"item.imageClass\"\n\t\t\t\t:color=\"item.color\"\n\t\t\t\t:dataTestId=\"item.dataTestId\"\n\t\t\t\t@click=\"this.$emit('action', item.id)\"\n\t\t\t/>\n\t\t</BaseActionMenu>\n\t`,\n};\n","import './styles/route-action-menu-item.css';\nimport { BIcon } from 'ui.icon-set.api.vue';\n\nexport const UserActionMenuItem = {\n\tname: 'UserActionMenuItem',\n\tcomponents: { BIcon },\n\n\tprops: {\n\t\tid: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tavatar: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\tworkPosition: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\tdataTestId: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t},\n\tmethods: {\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"hr-structure-route-action-popup-menu-item\"\n\t\t\t:data-test-id=\"dataTestId\"\n\t\t>\n\t\t\t<div class=\"hr-structure-route-action-popup-menu-item__content\">\n\t\t\t\t<img\n\t\t\t\t\t:src=\"!this.avatar ? '/bitrix/js/humanresources/company-structure/org-chart/src/images/default-user.svg' : encodeURI(this.avatar)\"\n\t\t\t\t\tclass=\"humanresources-tree__node_avatar --head\"\n\t\t\t\t \talt=\"\"\n\t\t\t\t/>\n\t\t\t\t<div class=\"hr-structure-route-action-popup-menu-item__content-text-container\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"humanresources-tree__node_head-name\"\n\t\t\t\t\t\t:title=\"this.name\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ this.name }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"humanresources-tree__node_head-position\">{{ this.workPosition }}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BaseActionMenu, BaseActionMenuPropsMixin } from './base-action-menu';\nimport { UserActionMenuItem } from './items/user-action-menu-item';\n\nexport const UserListActionMenu = {\n\tname: 'UserListActionMenu',\n\tmixins: [BaseActionMenuPropsMixin],\n\tcomponents: {\n\t\tBaseActionMenu,\n\t\tUserActionMenuItem,\n\t},\n\n\tmethods: {\n\t\topenUserUrl(url): void\n\t\t{\n\t\t\tif (!url)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tBX.SidePanel.Instance.open(url, {\n\t\t\t\tcacheable: false,\n\t\t\t});\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<BaseActionMenu \n\t\t\t:id=\"id\"\n\t\t\tclassName=\"hr-user-list-action-menu\"\n\t\t\t:items=\"items\" \n\t\t\t:bindElement=\"bindElement\"\n\t\t\t:width=\"260\"\n\t\t\t:delimiter=\"false\"\n\t\t\t:titleBar=\"titleBar\"\n\t\t\t:containerDataTestId=\"containerDataTestId\"\n\t\t\t:angleOffset=\"35\"\n\t\t\tv-slot=\"{item}\"\n\t\t\t@close=\"this.$emit('close')\"\n\t\t>\n\t\t\t<UserActionMenuItem\n\t\t\t\t:id=\"item.id\" \n\t\t\t\t:name=\"item.name\"\n\t\t\t\t:avatar=\"item.avatar\"\n\t\t\t\t:workPosition=\"item.workPosition\"\n\t\t\t\t:color=\"item.color\"\n\t\t\t\t:dataTestId=\"item.dataTestId\"\n\t\t\t\t@click=\"this.openUserUrl(item.url)\"\n\t\t\t/>\n\t\t</BaseActionMenu>\n\t`,\n};\n","import './style.css';\n\nexport const DefaultPopupLayout = {\n\tname: 'DefaultPopupLayout',\n\n\ttemplate: `\n\t\t<div\n\t\t\tv-if=\"$slots.content\"\n\t\t\tclass=\"hr-default-popup-layout__content\"\n\t\t>\n\t\t\t<slot name=\"content\"></slot>\n\t\t</div>\n\t`,\n};\n","import { BasePopup } from './base-popup';\nimport { DefaultPopupLayout } from './layout/default-popup-layout';\nimport { Tag, Event } from 'main.core';\nimport type { PopupOptions } from 'main.popup';\nimport './styles/confirmation-popup.css';\n\nexport const ConfirmationPopup = {\n\tname: 'ConfirmationPopup',\n\temits: ['close', 'action'],\n\n\tcomponents: {\n\t\tBasePopup,\n\t\tDefaultLayoutPopup: DefaultPopupLayout,\n\t},\n\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\twithoutTitleBar: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\tonlyConfirmButtonMode: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t\tconfirmBtnText: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\tshowActionButtonLoader: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t\tlockActionButton: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t\tcancelBtnText: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\tbindElement: {\n\t\t\ttype: HTMLElement,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\twidth: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: 300,\n\t\t},\n\t\tconfirmButtonClass: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: 'ui-btn-primary',\n\t\t},\n\t},\n\n\tmethods: {\n\t\tloc(phraseCode: string, replacements: { [p: string]: string } = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t\tcloseAction(): void\n\t\t{\n\t\t\tif (this.showActionButtonLoader)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('close');\n\t\t},\n\t\tperformAction(): Promise<void>\n\t\t{\n\t\t\tif (this.lockActionButton || this.showActionButtonLoader)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('action');\n\t\t},\n\t\tgetTitleBar(): Object\n\t\t{\n\t\t\tconst { root, closeButton } = Tag.render`\n\t\t\t\t<div class=\"hr-confirmation-popup__title-bar\">\n\t\t\t\t\t<span class=\"hr-confirmation-popup__title-bar-text\">\n\t\t\t\t\t\t${this.title ?? ''}\n\t\t\t\t\t</span>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"ui-icon-set --cross-25 hr-confirmation-popup__title-bar-close-button\"\n\t\t\t\t\t\tref=\"closeButton\"\n\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tEvent.bind(closeButton, 'click', () => {\n\t\t\t\tthis.closeAction();\n\t\t\t});\n\n\t\t\treturn { content: root };\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tpopupConfig(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\twidth: this.width,\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\tborderRadius: 12,\n\t\t\t\toverlay: this.bindElement === null ? { opacity: 40 } : false,\n\t\t\t\tcontentNoPaddings: true,\n\t\t\t\tcontentPadding: 0,\n\t\t\t\tpadding: 0,\n\t\t\t\tclassName: 'hr_structure_confirmation_popup',\n\t\t\t\tautoHide: false,\n\t\t\t\tdraggable: true,\n\t\t\t\ttitleBar: this.withoutTitleBar ? null : this.getTitleBar(),\n\t\t\t};\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<BasePopup\n\t\t\t:id=\"'id'\"\n\t\t\t:config=\"popupConfig\"\n\t\t>\n\t\t\t<template v-slot=\"{ closePopup }\">\n\t\t\t\t<DefaultLayoutPopup>\n\t\t\t\t\t<template v-slot:content>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"hr-confirmation-popup__content-container\"\n\t\t\t\t\t\t\t:class=\"{ '--without-title-bar': withoutTitleBar }\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div v-if=\"$slots.content\">\n\t\t\t\t\t\t\t\t<slot name=\"content\"></slot>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-else class=\"hr-confirmation-popup__content-text\">\n\t\t\t\t\t\t\t\t{{ description }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"hr-confirmation-popup__buttons-container\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-round\"\n\t\t\t\t\t\t\t\t:class=\"{ \n\t\t\t\t\t\t\t\t\t'ui-btn-wait': showActionButtonLoader, \n\t\t\t\t\t\t\t\t\t'ui-btn-disabled': lockActionButton, \n\t\t\t\t\t\t\t\t\t[confirmButtonClass]: true\n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t@click=\"performAction\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ confirmBtnText ?? '' }}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tv-if=\"!onlyConfirmButtonMode\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-light-border ui-btn-round\"\n\t\t\t\t\t\t\t\t@click=\"closeAction\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ cancelBtnText ?? loc('HUMANRESOURCES_COMPANY_STRUCTURE_STRUCTURE_COMPONENTS_POPUP_CONFIRMATION_POPUP_CANCEL_BUTTON') }}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</DefaultLayoutPopup>\n\t\t\t</template>\n\t\t</BasePopup>\n\t`,\n};\n","import { Loc, type JsonObject } from 'main.core';\nimport { Menu, PopupManager } from 'main.popup';\nimport { getMemberRoles } from 'humanresources.company-structure.api';\nimport { EntityTypes } from 'humanresources.company-structure.utils';\nimport { ConfirmationPopup } from '../popup/confirmation-popup';\n\nimport type { MemberRolesType } from 'humanresources.company-structure.api';\n\nimport './styles/dnd-confirmation-popup.css';\n\n// @vue/component\nexport const MoveEmployeeConfirmationPopup = {\n\tname: 'MoveEmployeeConfirmationPopup',\n\tcomponents: { ConfirmationPopup },\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tconfirmButtonText: {\n\t\t\ttype: String,\n\t\t\tdefault: Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_DND_USER_CONFIRM_POPUP_CONFIRM_BTN'),\n\t\t},\n\t\ttargetType: {\n\t\t\ttype: String,\n\t\t\tdefault: 'department',\n\t\t},\n\t\tsourceType: {\n\t\t\ttype: String,\n\t\t\tdefault: 'department',\n\t\t},\n\t\tshowRoleSelect: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tshowCombineCheckbox: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisCombineOnly: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\texcludeEmployeeRole: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['confirm', 'close'],\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tselectedRole: null,\n\t\t\tcombinePosition: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tmemberRoles(): ?MemberRolesType\n\t\t{\n\t\t\treturn getMemberRoles(this.targetType);\n\t\t},\n\t\tselectedRoleLabel(): string\n\t\t{\n\t\t\tswitch (this.selectedRole)\n\t\t\t{\n\t\t\t\tcase this.memberRoles.head:\n\t\t\t\t\treturn this.isTeamTarget\n\t\t\t\t\t\t? this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DND_USER_CONFIRM_POPUP_BADGE_TEAM_HEAD')\n\t\t\t\t\t\t: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DND_USER_CONFIRM_POPUP_BADGE_HEAD');\n\t\t\t\tcase this.memberRoles.deputyHead:\n\t\t\t\t\treturn this.isTeamTarget\n\t\t\t\t\t\t? this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DND_USER_CONFIRM_POPUP_BADGE_TEAM_DEPUTY')\n\t\t\t\t\t\t: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DND_USER_CONFIRM_POPUP_BADGE_DEPUTY');\n\t\t\t\tcase this.memberRoles.employee:\n\t\t\t\t\treturn this.isTeamTarget\n\t\t\t\t\t\t? this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DND_USER_CONFIRM_POPUP_BADGE_MEMBER')\n\t\t\t\t\t\t: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DND_USER_CONFIRM_POPUP_BADGE_EMPLOYEE');\n\t\t\t\tdefault:\n\t\t\t\t\treturn '';\n\t\t\t}\n\t\t},\n\t\tisCombineCheckboxEnabled(): boolean\n\t\t{\n\t\t\treturn this.isCombineOnly\n\t\t\t\t|| (this.sourceType === EntityTypes.team && this.isTeamTarget);\n\t\t},\n\t\tisTeamTarget(): boolean\n\t\t{\n\t\t\treturn this.targetType === EntityTypes.team;\n\t\t},\n\t\tpopupTitle(): string\n\t\t{\n\t\t\tif (this.title)\n\t\t\t{\n\t\t\t\treturn this.title;\n\t\t\t}\n\n\t\t\treturn this.isTeamTarget\n\t\t\t\t? this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DND_USER_CONFIRM_POPUP_TITLE_TEAM')\n\t\t\t\t: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DND_USER_CONFIRM_POPUP_TITLE_DEPT');\n\t\t},\n\t\tpopupCheckboxText(): string\n\t\t{\n\t\t\treturn this.isTeamTarget\n\t\t\t\t? this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DND_USER_CONFIRM_POPUP_CHECKBOX_TEAM')\n\t\t\t\t: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DND_USER_CONFIRM_POPUP_CHECKBOX_DEPT');\n\t\t},\n\t\tshowCombineNotice(): boolean\n\t\t{\n\t\t\tconst isDeptToTeam = this.sourceType === EntityTypes.department && this.isTeamTarget;\n\n\t\t\treturn this.isCombineOnly && isDeptToTeam;\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tif (this.showRoleSelect)\n\t\t{\n\t\t\tthis.selectedRole = this.excludeEmployeeRole ? this.memberRoles.head : this.memberRoles.employee;\n\t\t}\n\t\tthis.combinePosition = this.isCombineCheckboxEnabled;\n\t},\n\tmethods: {\n\t\tloc(phrase: string): string\n\t\t{\n\t\t\treturn Loc.getMessage(phrase);\n\t\t},\n\t\thandleConfirm(): void\n\t\t{\n\t\t\tconst payload = {\n\t\t\t\trole: this.selectedRole,\n\t\t\t\troleLabel: this.selectedRoleLabel,\n\t\t\t\tisCombineMode: this.combinePosition,\n\t\t\t};\n\n\t\t\tif (this.selectedRole !== this.memberRoles.employee)\n\t\t\t{\n\t\t\t\tpayload.badgeText = this.selectedRoleLabel;\n\t\t\t}\n\n\t\t\tthis.$emit('confirm', payload);\n\t\t},\n\t\ttoggleRoleMenu(): void\n\t\t{\n\t\t\tconst menuId = 'dnd-confirmation-role-menu';\n\t\t\tconst bindElement = this.$refs.roleSelect;\n\n\t\t\tif (PopupManager.getPopupById(menuId))\n\t\t\t{\n\t\t\t\tPopupManager.getPopupById(menuId).destroy();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst menu = new Menu({\n\t\t\t\tid: menuId,\n\t\t\t\tbindElement,\n\t\t\t\twidth: 334,\n\t\t\t\titems: this.roleMenuItems(),\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\tmenu.destroy();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t\tmenu.show();\n\t\t},\n\t\troleMenuItems(): array\n\t\t{\n\t\t\tconst items = [\n\t\t\t\t{\n\t\t\t\t\tid: this.memberRoles.head,\n\t\t\t\t\ttext: this.isTeamTarget\n\t\t\t\t\t\t? this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DND_USER_CONFIRM_POPUP_BADGE_TEAM_HEAD')\n\t\t\t\t\t\t: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DND_USER_CONFIRM_POPUP_BADGE_HEAD'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: this.memberRoles.deputyHead,\n\t\t\t\t\ttext: this.isTeamTarget\n\t\t\t\t\t\t? this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DND_USER_CONFIRM_POPUP_BADGE_TEAM_DEPUTY')\n\t\t\t\t\t\t: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DND_USER_CONFIRM_POPUP_BADGE_DEPUTY'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tif (!this.excludeEmployeeRole)\n\t\t\t{\n\t\t\t\tconst employeeRoleText = this.isTeamTarget\n\t\t\t\t\t? this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DND_USER_CONFIRM_POPUP_BADGE_MEMBER')\n\t\t\t\t\t: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DND_USER_CONFIRM_POPUP_BADGE_EMPLOYEE');\n\n\t\t\t\titems.push({\n\t\t\t\t\tid: this.memberRoles.employee,\n\t\t\t\t\ttext: employeeRoleText,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn items.map((item) => ({\n\t\t\t\t...item,\n\t\t\t\tonclick: (event, menuItem) => {\n\t\t\t\t\tthis.selectedRole = menuItem.id;\n\t\t\t\t\tmenuItem.getMenuWindow().close();\n\t\t\t\t},\n\t\t\t}));\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ConfirmationPopup\n\t\t\t:title=\"popupTitle\"\n\t\t\t:width=\"364\"\n\t\t\t:confirmBtnText=\"confirmButtonText\"\n\t\t\t@action=\"handleConfirm\"\n\t\t\t@close=\"$emit('close')\"\n\t\t>\n\t\t\t<template v-slot:content>\n\t\t\t\t<div class=\"hr-dnd-confirmation_block\">\n\t\t\t\t\t<div v-html=\"description\" class=\"hr-dnd-confirmation_description\"></div>\n\t\t\t\t\t<div v-if=\"showRoleSelect\"\n\t\t\t\t\t\t class=\"ui-ctl ui-ctl-w100 ui-ctl-sm ui-ctl-after-icon ui-ctl-dropdown hr-dnd-confirmation_select\"\n\t\t\t\t\t\t @click=\"toggleRoleMenu\"\n\t\t\t\t\t\t ref=\"roleSelect\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t<div class=\"ui-ctl-element\">{{ selectedRoleLabel }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"showCombineCheckbox\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"showCombineNotice\"\n\t\t\t\t\t\t\tclass=\"hr-dnd-confirmation_notice\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_DND_USER_CONFIRM_POPUP_NOTICE') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-checkbox hr-dnd-confirmation_checkbox\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\tv-model=\"combinePosition\"\n\t\t\t\t\t\t\t\t:disabled=\"isCombineOnly\"\n\t\t\t\t\t\t\t\tid=\"dnd-confirmation-combine-checkbox\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<label for=\"dnd-confirmation-combine-checkbox\" class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t{{ popupCheckboxText }}\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</ConfirmationPopup>\n\t`,\n};\n","import { Reflection, Event, Text, Type } from 'main.core';\nimport 'ui.hint';\n\nexport const Hint = {\n\tmounted(el: HTMLElement, binding): void\n\t{\n\t\tconst value = Type.isString(binding?.value) ? binding.value.trim() : '';\n\t\tlet hint = null;\n\n\t\tconst shouldShow = () => (value ? true : el.scrollWidth !== el.offsetWidth);\n\t\tconst getText = () => Text.encode(value || el.textContent);\n\n\t\tconst onMouseEnter = () => {\n\t\t\tif (!shouldShow())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\thint = Reflection.getClass('BX.UI.Hint').createInstance({\n\t\t\t\tpopupParameters: {\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tangle: { offset: 0 },\n\t\t\t\t\toffsetLeft: el.getBoundingClientRect().width / 2,\n\t\t\t\t},\n\t\t\t});\n\t\t\thint.show(el, getText());\n\t\t};\n\n\t\tconst onMouseLeave = () => {\n\t\t\thint?.hide();\n\t\t};\n\n\t\tEvent.bind(el, 'mouseenter', onMouseEnter);\n\t\tEvent.bind(el, 'mouseleave', onMouseLeave);\n\t},\n};\n","import { Tag } from 'main.core';\nimport { BaseHeader } from 'ui.entity-selector';\n\nexport class BaseManagementDialogHeader extends BaseHeader\n{\n\trender(): HTMLElement\n\t{\n\t\treturn Tag.render``;\n\t}\n}\n","import { Tag } from 'main.core';\nimport { BaseFooter } from 'ui.entity-selector';\n\nexport class BaseManagementDialogFooter extends BaseFooter\n{\n\trender(): HTMLElement\n\t{\n\t\treturn Tag.render``;\n\t}\n}\n","// eslint-disable-next-line no-unused-vars\nimport { Dialog, type DialogOptions, type TabOptions } from 'ui.entity-selector';\nimport { BaseManagementDialogHeader } from './core/header';\nimport { BaseManagementDialogFooter } from './core/footer';\n// eslint-disable-next-line no-unused-vars\nimport type { ManagementDialogDataTestIds } from './types';\nimport { Dom } from 'main.core';\nimport './management-dialog.css';\nimport 'ui.icon-set.actions';\n\nexport const ManagementDialog = {\n\tname: 'ManagementDialog',\n\temits: ['managementDialogAction', 'close'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\tentities: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tisActive: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t\thiddenItemsIds: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: [],\n\t\t},\n\t\tconfirmButtonText: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\t/** @var { ManagementDialogDataTestIds } dataTestIds */\n\t\tdataTestIds: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: {},\n\t\t},\n\t\t/** @var TabOptions */\n\t\trecentTabOptions: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: {},\n\t\t},\n\t},\n\n\tdata(): Object {\n\t\treturn {\n\t\t\theaderContainer: HTMLElement | null,\n\t\t\tfooterContainer: HTMLElement | null,\n\t\t\tselectedItemsCount: 0,\n\t\t};\n\t},\n\n\tcreated(): void\n\t{\n\t\tthis.instance = this.getDialogInstance();\n\t\tthis.instance.show();\n\t},\n\n\tbeforeUnmount(): void\n\t{\n\t\tif (!this.instance || !this.instance.isOpen())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.instance.destroy();\n\t},\n\n\tmethods: {\n\t\tgetDialogInstance(): Dialog\n\t\t{\n\t\t\tif (this.instance)\n\t\t\t{\n\t\t\t\treturn this.instance;\n\t\t\t}\n\n\t\t\tDialog.getById(this.id)?.destroy();\n\t\t\tconst config = this.getDialogConfig();\n\t\t\tthis.instance = new Dialog(config);\n\t\t\tthis.headerContainer = this.instance.getHeader().getContainer();\n\t\t\tthis.footerContainer = this.instance.getFooter().getContainer();\n\t\t\tif (this.dataTestIds.containerDataTestId)\n\t\t\t{\n\t\t\t\tDom.attr(this.instance.getContainer(), 'data-test-id', this.dataTestIds.containerDataTestId);\n\t\t\t}\n\n\t\t\treturn this.instance;\n\t\t},\n\t\tgetDialogConfig(): DialogOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: this.id,\n\t\t\t\twidth: 400,\n\t\t\t\theight: 511,\n\t\t\t\tmultiple: true,\n\t\t\t\tcacheable: false,\n\t\t\t\tdropdownMode: true,\n\t\t\t\tcompactView: false,\n\t\t\t\tenableSearch: true,\n\t\t\t\tshowAvatars: true,\n\t\t\t\tautoHide: false,\n\t\t\t\tpopupOptions: {\n\t\t\t\t\toverlay: { opacity: 40 },\n\t\t\t\t},\n\t\t\t\theader: BaseManagementDialogHeader,\n\t\t\t\tfooter: BaseManagementDialogFooter,\n\t\t\t\trecentTabOptions: this.recentTabOptions,\n\t\t\t\tentities: this.entities,\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': (): void => {\n\t\t\t\t\t\tthis.selectedItemsCount++;\n\t\t\t\t\t},\n\t\t\t\t\t'Item:onDeselect': () => {\n\t\t\t\t\t\tthis.selectedItemsCount--;\n\t\t\t\t\t},\n\t\t\t\t\tonLoad: (event) => {\n\t\t\t\t\t\tconst dialog: Dialog = event.getTarget();\n\t\t\t\t\t\tthis.toggleItems(dialog);\n\n\t\t\t\t\t\tconst tabs = dialog.getTabs();\n\t\t\t\t\t\tfor (const tab of tabs)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (tab.id === 'recents')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttab.select();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!['recents', 'search'].includes(tab.id))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttab.deselect();\n\t\t\t\t\t\t\t\ttab.setVisible(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t'SearchTab:onLoad': (event) => {\n\t\t\t\t\t\tconst dialog: Dialog = event.getTarget();\n\t\t\t\t\t\tthis.toggleItems(dialog);\n\t\t\t\t\t},\n\t\t\t\t\tonDestroy: () => {\n\t\t\t\t\t\tthis.instance = null;\n\t\t\t\t\t\tthis.$emit('close');\n\t\t\t\t\t},\n\t\t\t\t\tonHide: () => {\n\t\t\t\t\t\tthis.$emit('close');\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tonActionItemClick(): void\n\t\t{\n\t\t\tif (this.isActive || !this.selectedItemsCount)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst selectedItems = this.instance.getSelectedItems() ?? [];\n\t\t\tthis.$emit('managementDialogAction', selectedItems);\n\t\t},\n\t\tcloseDialog(): void\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t\ttoggleItems(dialog: Dialog): void\n\t\t{\n\t\t\tif (this.hiddenItemsIds.length === 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst items = dialog.getItems();\n\t\t\titems.forEach((item) => {\n\t\t\t\tconst hidden = this.hiddenItemsIds.includes(item.id);\n\t\t\t\titem.setHidden(hidden);\n\t\t\t});\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div>\n\t\t\t<teleport :to=\"headerContainer\">\n\t\t\t\t<div class=\"hr-management-dialog__header_container\">\n\t\t\t\t\t<div class=\"hr-management-dialog__header_content-container\">\n\t\t\t\t\t\t<div class=\"hr-management-dialog__header_title\">{{title}}</div>\n\t\t\t\t\t\t<div v-if=\"description\" class=\"hr-management-dialog__header_subtitle\">{{description}}</div>\n\t\t\t\t\t\t<slot name=\"extra-subtitle\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"ui-icon-set --cross-40 hr-management-dialog__header_close-button\"\n\t\t\t\t\t\t@click=\"closeDialog\"\n\t\t\t\t\t\t:data-test-id=\"dataTestIds.closeButtonDataTestId\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</teleport>\n\t\t\t<teleport :to=\"footerContainer\">\n\t\t\t\t<div class=\"hr-management-dialog__footer_container\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"ui-btn ui-btn ui-btn-sm ui-btn-primary ui-btn-round\"\n\t\t\t\t\t\t:class=\"{ 'ui-btn-wait': isActive, 'ui-btn-disabled': !selectedItemsCount, }\"\n\t\t\t\t\t\t@click=\"onActionItemClick\"\n\t\t\t\t\t\t:data-test-id=\"dataTestIds.confirmButtonDataTestId\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ confirmButtonText ?? loc('HUMANRESOURCES_STRUCTURE_COMPONENTS_MANAGEMENT_DIALOG_CONFIRM_BUTTON') }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"ui-btn ui-btn ui-btn-sm ui-btn-light-border ui-btn-round\"\n\t\t\t\t\t\t@click=\"closeDialog\"\n\t\t\t\t\t\t:data-test-id=\"dataTestIds.cancelButtonDataTestId\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ loc('HUMANRESOURCES_STRUCTURE_COMPONENTS_MANAGEMENT_DIALOG_CANCEL_BUTTON') }}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</teleport>\n\t\t</div>\n\t`,\n};\n","import { EntityTypes } from 'humanresources.company-structure.utils';\nimport { Loc } from 'main.core';\nimport type { TabOptions } from 'ui.entity-selector';\n\nexport const getChatDialogEntity = function(): Object {\n\treturn {\n\t\tid: 'im-chat-only',\n\t\tdynamicLoad: true,\n\t\tdynamicSearch: true,\n\t\tfilters: [\n\t\t\t{\n\t\t\t\tid: 'im.chatOnlyDataFilter',\n\t\t\t\toptions: {\n\t\t\t\t\tincludeSubtitle: true,\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\ttagOptions: {\n\t\t\tdefault: {\n\t\t\t\ttextColor: '#11A9D9',\n\t\t\t\tbgColor: '#D3F4FF',\n\t\t\t\tavatar: '/bitrix/js/humanresources/company-structure/structure-components/src/images/selectors/bind-chat-chat-tag.svg',\n\t\t\t},\n\t\t},\n\t\titemOptions: {\n\t\t\tdefault: {\n\t\t\t\tavatar: '/bitrix/js/humanresources/company-structure/structure-components/src/images/selectors/bind-chat-chat-item.svg',\n\t\t\t},\n\t\t},\n\t\toptions: {\n\t\t\tsearchChatTypes: ['O', 'C'],\n\t\t},\n\t};\n};\n\nexport const getChannelDialogEntity = function(): Object {\n\treturn {\n\t\tid: 'im-chat-only',\n\t\tfilters: [\n\t\t\t{\n\t\t\t\tid: 'im.chatOnlyDataFilter',\n\t\t\t\toptions: {\n\t\t\t\t\tincludeSubtitle: true,\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tdynamicLoad: true,\n\t\tdynamicSearch: true,\n\t\ttagOptions: {\n\t\t\tdefault: {\n\t\t\t\ttextColor: '#8DBB00',\n\t\t\t\tbgColor: '#EAF6C3',\n\t\t\t\tavatar: '/bitrix/js/humanresources/company-structure/structure-components/src/images/selectors/bind-chat-channel-tag.svg',\n\t\t\t\tavatarOptions: {\n\t\t\t\t\tborderRadius: '50%',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\titemOptions: {\n\t\t\tdefault: {\n\t\t\t\tavatar: '/bitrix/js/humanresources/company-structure/structure-components/src/images/selectors/bind-chat-channel-item.svg',\n\t\t\t\tavatarOptions: {\n\t\t\t\t\tborderRadius: '6px',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\toptions: {\n\t\t\tsearchChatTypes: ['N', 'J'],\n\t\t},\n\t};\n};\n\nexport const getCollabDialogEntity = function(): Object {\n\treturn {\n\t\tid: 'project',\n\t\tdynamicLoad: true,\n\t\tdynamicSearch: true,\n\t\toptions: {\n\t\t\ttype: ['collab'],\n\t\t\tcreateProjectLink: false,\n\t\t\tcheckCollabInviteOption: true,\n\t\t},\n\t\titemOptions: {\n\t\t\tcollab: {\n\t\t\t\tsupertitle: null,\n\t\t\t\tsubtitle: Loc.getMessage('HUMANRESOURCES_STRUCTURE_COMPONENTS_COLLAB_SUPERTITLE'),\n\t\t\t\ttextColor: '#535c69',\n\t\t\t},\n\t\t},\n\t\ttagOptions: {\n\t\t\tdefault: {\n\t\t\t\ttextColor: '#207976',\n\t\t\t\tbgColor: '#ade7e4',\n\t\t\t\tavatar: '/bitrix/js/socialnetwork/entity-selector/src/images/collab-project.svg',\n\t\t\t},\n\t\t},\n\t};\n};\n\nexport const CommunicationsTypeDict: Record<string, string> = Object.freeze({\n\tchat: 'chat',\n\tchannel: 'channel',\n\tcollab: 'collab',\n});\n\nexport const getCommunicationsRecentTabOptions = function(\n\tentityType: string,\n\tchatType: CommunicationsTypeDict.chat | CommunicationsTypeDict.channel | CommunicationsTypeDict.collab,\n): TabOptions {\n\tlet title = '';\n\tlet subtitle = '';\n\n\tif (chatType === CommunicationsTypeDict.chat)\n\t{\n\t\ttitle = Loc.getMessage('HUMANRESOURCES_STRUCTURE_COMPONENTS_CHAT_STUB_TITLE');\n\t\tsubtitle = entityType === EntityTypes.team\n\t\t\t? Loc.getMessage('HUMANRESOURCES_STRUCTURE_COMPONENTS_CHAT_TEAM_STUB_SUBTITLE')\n\t\t\t: Loc.getMessage('HUMANRESOURCES_STRUCTURE_COMPONENTS_CHAT_DEPARTMENT_STUB_SUBTITLE')\n\t\t;\n\t}\n\telse if (chatType === CommunicationsTypeDict.channel)\n\t{\n\t\ttitle = Loc.getMessage('HUMANRESOURCES_STRUCTURE_COMPONENTS_CHANNEL_STUB_TITLE');\n\t\tsubtitle = entityType === EntityTypes.team\n\t\t\t? Loc.getMessage('HUMANRESOURCES_STRUCTURE_COMPONENTS_CHANNEL_TEAM_STUB_SUBTITLE')\n\t\t\t: Loc.getMessage('HUMANRESOURCES_STRUCTURE_COMPONENTS_CHANNEL_DEPARTMENT_STUB_SUBTITLE')\n\t\t;\n\t}\n\telse\n\t{\n\t\ttitle = Loc.getMessage('HUMANRESOURCES_STRUCTURE_COMPONENTS_COLLAB_STUB_TITLE');\n\t\tsubtitle = entityType === EntityTypes.team\n\t\t\t? Loc.getMessage('HUMANRESOURCES_STRUCTURE_COMPONENTS_COLLAB_TEAM_STUB_SUBTITLE')\n\t\t\t: Loc.getMessage('HUMANRESOURCES_STRUCTURE_COMPONENTS_COLLAB_DEPARTMENT_STUB_SUBTITLE')\n\t\t;\n\t}\n\n\treturn {\n\t\tvisible: false,\n\t\tstub: true,\n\t\tstubOptions: {\n\t\t\ttitle,\n\t\t\tsubtitle,\n\t\t},\n\t};\n};\n","import { Reflection, Event } from 'main.core';\nimport 'ui.hint';\n\n/**\n * ui.hint with reactive content\n */\nexport const ResponsiveHint = {\n\tname: 'ResponsiveHint',\n\n\tprops: {\n\t\tcontent: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\twidth: {\n\t\t\ttype: [Number, null],\n\t\t\tdefault: 300,\n\t\t},\n\t\textraClasses: {\n\t\t\ttype: Object,\n\t\t},\n\t\tdefaultClass: {\n\t\t\ttype: String,\n\t\t\tdefault: 'ui-hint',\n\t\t},\n\t\ttop: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\talignCenter: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tcheckScrollWidth: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\n\tcreated(): void\n\t{\n\t\tthis.hint = null;\n\t},\n\n\tmounted(): void\n\t{\n\t\tconst container = this.$refs['hint-container'];\n\t\tconst parameters = {\n\t\t\twidth: this.width,\n\t\t};\n\n\t\tif (this.top)\n\t\t{\n\t\t\tparameters.bindOptions = { position: 'top' };\n\t\t}\n\n\t\tif (this.alignCenter)\n\t\t{\n\t\t\tparameters.offsetLeft = (container.offsetWidth / 2) - this.width / 2 + 39;\n\t\t\tparameters.angle = { offset: this.width / 2 - 33 / 2 };\n\t\t}\n\n\t\tEvent.bind(this.$refs['hint-container'], 'mouseenter', () => {\n\t\t\tif (this.checkScrollWidth && this.$refs['hint-container'].scrollWidth === this.$refs['hint-container'].offsetWidth)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.hint = Reflection.getClass('BX.UI.Hint').createInstance({\n\t\t\t\tpopupParameters: { ...parameters }, // destruct parameters to recreate hint\n\t\t\t});\n\t\t\tthis.hint.show(this.$refs['hint-container'], this.content);\n\t\t});\n\n\t\tEvent.bind(this.$refs['hint-container'], 'mouseleave', () => {\n\t\t\tthis.hint?.hide(); // hide() function also destroys popup\n\t\t});\n\t},\n\n\tunmounted(): void\n\t{\n\t\tthis.hint?.hide();\n\t},\n\n\ttemplate: `\n\t\t<span :class=\"[defaultClass, extraClasses]\" ref=\"hint-container\">\n\t\t\t<slot/>\n\t\t</span>\n\t`,\n};\n","import 'ui.hint';\nimport { ResponsiveHint } from './responsive-hint';\n\n// @vue/component\nexport const DefaultHint = {\n\tname: 'DefaultHint',\n\n\tcomponents: { ResponsiveHint },\n\n\tprops: {\n\t\tcontent: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\twidth: {\n\t\t\ttype: Number,\n\t\t\tdefault: 300,\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<ResponsiveHint :content=content>\n\t\t\t<span class=\"ui-hint-icon\"/>\n\t\t</ResponsiveHint>\n\t`,\n};\n","import { postData } from 'humanresources.company-structure.api';\n\nexport const MoveAPI = {\n\tmoveUserToDepartment: (nodeId: number, userId: number, targetNodeId: number, role: string): Promise<void> => {\n\t\treturn postData('humanresources.api.Structure.Node.Member.moveUser', {\n\t\t\tnodeId,\n\t\t\tuserId,\n\t\t\ttargetNodeId,\n\t\t\troleXmlId: role,\n\t\t});\n\t},\n};\n","import { Text, Type } from 'main.core';\nimport { type BaseEvent } from 'main.core.events';\nimport { TagSelector } from 'ui.entity-selector';\nimport { UI } from 'ui.notification';\nimport { mapState } from 'ui.vue3.pinia';\nimport { Set as IconSet } from 'ui.icon-set.api.core';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { getMemberRoles, type MemberRolesType } from 'humanresources.company-structure.api';\nimport { useChartStore, UserService } from 'humanresources.company-structure.chart-store';\nimport { PermissionActions, PermissionChecker } from 'humanresources.company-structure.permission-checker';\nimport { EntityTypes } from 'humanresources.company-structure.utils';\nimport { ConfirmationPopup } from '../popup/confirmation-popup';\nimport { MoveAPI } from './api';\n\nimport './styles/move-user-popup.css';\n\n// @vue/component\nexport const MoveUserPopup = {\n\tname: 'MoveUserPopup',\n\n\tcomponents: {\n\t\tConfirmationPopup,\n\t\tBIcon,\n\t},\n\n\tprops: {\n\t\toriginalNodeId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tuser: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tentityType: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\texecuteAction: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tonlyMove: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\n\temits: ['close', 'action', 'remove'],\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tshowMoveUserActionLoader: false,\n\t\t\thasPermission: true,\n\t\t\tshowUserAlreadyBelongsToDepartmentPopup: false,\n\t\t\taccessDenied: false,\n\t\t\tselectedParentDepartment: null,\n\t\t};\n\t},\n\n\tcomputed:\n\t{\n\t\t...mapState(useChartStore, ['departments', 'focusedNode']),\n\t\tincludedNodeEntityTypesInDialog(): string[]\n\t\t{\n\t\t\treturn this.isTeamEntity ? ['team'] : ['department'];\n\t\t},\n\t\tgetMoveUserActionPhrase(): ?string\n\t\t{\n\t\t\tlet phraseCode = '';\n\n\t\t\tif (this.isTeamEntity)\n\t\t\t{\n\t\t\t\tphraseCode = 'HUMANRESOURCES_COMPANY_STRUCTURE_MOVE_TO_ANOTHER_TEAM_REMOVE_USER_DESCRIPTION';\n\t\t\t}\n\t\t\telse if (this.onlyMove)\n\t\t\t{\n\t\t\t\tphraseCode = 'HUMANRESOURCES_COMPANY_STRUCTURE_MOVE_TO_ANOTHER_DEPARTMENT_POPUP_DESCRIPTION_ONLY_MOVE';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tphraseCode += this.user.gender === 'F' ? '_F' : '_M';\n\n\t\t\treturn this.getStandardPhrase(phraseCode, this.originalNodeId);\n\t\t},\n\t\tgetMoveUserActionPhraseWarning(): ?string\n\t\t{\n\t\t\tif (this.isTeamEntity)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst departmentName = Text.encode(this.departments.get(this.selectedParentDepartment ?? 0).name ?? '');\n\t\t\tconst userName = Text.encode(this.user.name ?? '');\n\n\t\t\treturn this.loc(\n\t\t\t\t'HUMANRESOURCES_COMPANY_STRUCTURE_MOVE_TO_ANOTHER_DEPARTMENT_ALREADY_BELONGS_TO',\n\t\t\t\t{\n\t\t\t\t\t'#USER_NAME#': userName,\n\t\t\t\t\t'#DEPARTMENT_NAME#': departmentName,\n\t\t\t\t},\n\t\t\t)\n\t\t\t\t.replace(\n\t\t\t\t\t'[link]',\n\t\t\t\t\t'',\n\t\t\t\t)\n\t\t\t\t.replace('[/link]', '')\n\t\t\t;\n\t\t},\n\t\tgetUserAlreadyBelongsToDepartmentPopupPhrase(): string\n\t\t{\n\t\t\tlet phraseCode = '';\n\t\t\tif (this.isTeamEntity)\n\t\t\t{\n\t\t\t\tphraseCode = 'HUMANRESOURCES_COMPANY_STRUCTURE_MOVE_TO_ANOTHER_DEPARTMENT_ALREADY_BELONGS_TO_TEAM_DESCRIPTION';\n\t\t\t\tphraseCode += this.user.gender === 'F' ? '_F' : '_M';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tphraseCode = 'HUMANRESOURCES_COMPANY_STRUCTURE_MOVE_TO_ANOTHER_DEPARTMENT_ALREADY_BELONGS_TO_DEPARTMENT_DESCRIPTION';\n\t\t\t}\n\n\t\t\treturn this.getStandardPhrase(phraseCode, this.selectedParentDepartment);\n\t\t},\n\t\tmemberRoles(): MemberRolesType\n\t\t{\n\t\t\treturn getMemberRoles(this.entityType);\n\t\t},\n\t\tisTeamEntity(): boolean\n\t\t{\n\t\t\treturn this.entityType === EntityTypes.team;\n\t\t},\n\t\tconfirmTitle(): string\n\t\t{\n\t\t\tif (this.isTeamEntity)\n\t\t\t{\n\t\t\t\treturn this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_MOVE_TO_ANOTHER_TEAM_POPUP_CONFIRM_TITLE');\n\t\t\t}\n\n\t\t\tif (this.onlyMove)\n\t\t\t{\n\t\t\t\treturn this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_MOVE_TO_ANOTHER_DEPARTMENT_TITLE_ONLY_MOVE');\n\t\t\t}\n\n\t\t\treturn this.userHasOtherDepartments\n\t\t\t\t? this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_MOVE_TO_ANOTHER_DEPARTMENT_MULTIROLE_TITLE')\n\t\t\t\t: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_MOVE_TO_ANOTHER_DEPARTMENT_TITLE')\n\t\t\t;\n\t\t},\n\t\tconfirmDescription(): string\n\t\t{\n\t\t\tif (this.isTeamEntity)\n\t\t\t{\n\t\t\t\treturn this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_MOVE_TO_ANOTHER_TEAM_POPUP_ACTION_SELECT_TEAM_DESCRIPTION');\n\t\t\t}\n\n\t\t\tif (this.onlyMove)\n\t\t\t{\n\t\t\t\treturn this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_MOVE_TO_ANOTHER_DEPARTMENT_SELECT_DEPARTMENT_DESCRIPTION');\n\t\t\t}\n\n\t\t\treturn this.userHasOtherDepartments\n\t\t\t\t? this.getStandardPhrase('HUMANRESOURCES_COMPANY_STRUCTURE_MOVE_TO_ANOTHER_DEPARTMENT_POPUP_MULTIROLE_DESCRIPTION', this.originalNodeId)\n\t\t\t\t: this.getStandardPhrase('HUMANRESOURCES_COMPANY_STRUCTURE_MOVE_TO_ANOTHER_DEPARTMENT_POPUP_DESCRIPTION', this.originalNodeId)\n\t\t\t;\n\t\t},\n\t\tisInSelectedNode(): boolean\n\t\t{\n\t\t\tconst store = useChartStore();\n\t\t\tconst nodeIds = store.multipleUsers[this.user.id];\n\n\t\t\treturn this.selectedParentDepartment && Type.isArray(nodeIds) && nodeIds.includes(this.selectedParentDepartment);\n\t\t},\n\t\tparentNodeId(): ?number\n\t\t{\n\t\t\tconst originalNode = this.departments.get(this.originalNodeId);\n\t\t\tconst parentId = originalNode.parentId;\n\n\t\t\tif (!parentId)\n\t\t\t{\n\t\t\t\treturn this.originalNodeId;\n\t\t\t}\n\t\t\tconst parentNode = this.departments.get(parentId);\n\n\t\t\treturn (parentNode && parentNode.entityType === originalNode.entityType) ? parentId : this.originalNodeId;\n\t\t},\n\t\ticonSet(): IconSet\n\t\t{\n\t\t\treturn IconSet;\n\t\t},\n\t\tuserHasOtherDepartments(): boolean\n\t\t{\n\t\t\tconst store = useChartStore();\n\t\t\tconst nodeIds = store.multipleUsers[this.user.id];\n\n\t\t\treturn Type.isArray(nodeIds) && nodeIds.length > 1;\n\t\t},\n\t\tconfirmButtonText(): string\n\t\t{\n\t\t\tif (this.onlyMove)\n\t\t\t{\n\t\t\t\treturn this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_MOVE_TO_ANOTHER_DEPARTMENT_MOVE_BUTTON_ONLY_MOVE');\n\t\t\t}\n\n\t\t\treturn this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_MOVE_TO_ANOTHER_DEPARTMENT_MOVE_BUTTON');\n\t\t},\n\t\tlockMoveUserActionButton(): boolean\n\t\t{\n\t\t\treturn !this.hasPermission\n\t\t\t\t|| (!this.userHasOtherDepartments && !this.selectedParentDepartment)\n\t\t\t\t|| (this.onlyMove && !this.selectedParentDepartment)\n\t\t\t;\n\t\t},\n\t\tisWarningVisible(): boolean\n\t\t{\n\t\t\treturn this.isInSelectedNode && this.getMoveUserActionPhraseWarning;\n\t\t},\n\t},\n\n\tcreated(): void\n\t{\n\t\tthis.permissionChecker = PermissionChecker.getInstance();\n\n\t\tif (!this.permissionChecker)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.action = this.isTeamEntity\n\t\t\t? PermissionActions.teamAddMember\n\t\t\t: PermissionActions.employeeAddToDepartment\n\t\t;\n\t\tthis.selectedDepartmentId = 0;\n\t},\n\n\tmounted(): void\n\t{\n\t\tconst departmentContainer = this.$refs['department-selector'];\n\t\tthis.departmentSelector = this.createTagSelector();\n\t\tthis.departmentSelector.renderTo(departmentContainer);\n\t},\n\n\tmethods:\n\t{\n\t\tcreateTagSelector(): TagSelector\n\t\t{\n\t\t\treturn new TagSelector({\n\t\t\t\tevents: {\n\t\t\t\t\tonTagAdd: (event: BaseEvent) => {\n\t\t\t\t\t\tthis.accessDenied = false;\n\t\t\t\t\t\tconst { tag } = event.data;\n\t\t\t\t\t\tthis.selectedParentDepartment = tag.id;\n\t\t\t\t\t\tif (PermissionChecker.hasPermission(this.action, tag.id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.hasPermission = true;\n\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.accessDenied = true;\n\t\t\t\t\t\tthis.hasPermission = false;\n\t\t\t\t\t},\n\t\t\t\t\tonTagRemove: () => {\n\t\t\t\t\t\tthis.selectedParentDepartment = null;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tmultiple: false,\n\t\t\t\tdialogOptions: {\n\t\t\t\t\twidth: 425,\n\t\t\t\t\theight: 350,\n\t\t\t\t\tdropdownMode: true,\n\t\t\t\t\thideOnDeselect: true,\n\t\t\t\t\tentities: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'structure-node',\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tselectMode: 'departmentsOnly',\n\t\t\t\t\t\t\t\trestricted: 'addMember',\n\t\t\t\t\t\t\t\tincludedNodeEntityTypes: this.includedNodeEntityTypesInDialog,\n\t\t\t\t\t\t\t\tuseMultipleTabs: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t\tasync confirmMoveUser(): Promise<void>\n\t\t{\n\t\t\tconst departmentId = this.focusedNode;\n\t\t\tconst userId = this.user.id;\n\t\t\tconst targetNodeId = this.selectedParentDepartment;\n\n\t\t\tif (!targetNodeId)\n\t\t\t{\n\t\t\t\tthis.$emit('remove');\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.executeAction)\n\t\t\t{\n\t\t\t\tthis.$emit('action', targetNodeId);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.showMoveUserActionLoader = true;\n\t\t\ttry\n\t\t\t{\n\t\t\t\tawait MoveAPI.moveUserToDepartment(\n\t\t\t\t\tdepartmentId,\n\t\t\t\t\tuserId,\n\t\t\t\t\ttargetNodeId,\n\t\t\t\t);\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tthis.showMoveUserActionLoader = false;\n\n\t\t\t\tconst code = error.code ?? 0;\n\n\t\t\t\tif (code === 'MEMBER_ALREADY_BELONGS_TO_NODE')\n\t\t\t\t{\n\t\t\t\t\tthis.showUserAlreadyBelongsToDepartmentPopup = true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst phraseCode = this.isTeamEntity\n\t\t\t\t\t\t? this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_MOVE_TO_ANOTHER_TEAM_ERROR')\n\t\t\t\t\t\t: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_MOVE_TO_ANOTHER_DEPARTMENT_ERROR')\n\t\t\t\t\t;\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: phraseCode,\n\t\t\t\t\t\tautoHideDelay: 2000,\n\t\t\t\t\t});\n\t\t\t\t\tthis.$emit('close');\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst departmentName = Text.encode(this.departments.get(targetNodeId)?.name ?? '');\n\t\t\tconst phraseCode = this.isTeamEntity\n\t\t\t\t? 'HUMANRESOURCES_COMPANY_STRUCTURE_MOVE_TO_ANOTHER_TEAM_SUCCESS_MESSAGE'\n\t\t\t\t: 'HUMANRESOURCES_COMPANY_STRUCTURE_MOVE_TO_ANOTHER_DEPARTMENT_SUCCESS_MESSAGE'\n\t\t\t;\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: this.loc(\n\t\t\t\t\tphraseCode,\n\t\t\t\t\t{\n\t\t\t\t\t\t'#DEPARTMENT_NAME#': departmentName,\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t\tautoHideDelay: 2000,\n\t\t\t});\n\n\t\t\tUserService.moveUserToEntity(\n\t\t\t\tdepartmentId,\n\t\t\t\tuserId,\n\t\t\t\ttargetNodeId,\n\t\t\t\tthis.user.role ?? this.memberRoles.employee,\n\t\t\t);\n\n\t\t\tthis.$emit('action', targetNodeId);\n\t\t\tthis.showMoveUserActionLoader = false;\n\t\t},\n\t\tcloseAction(): void\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t},\n\t\tcloseUserAlreadyBelongsToDepartmentPopup(): void\n\t\t{\n\t\t\tthis.showUserAlreadyBelongsToDepartmentPopup = false;\n\t\t\tthis.closeAction();\n\t\t},\n\t\tgetStandardPhrase(phrase: string, departmentId: ?number): string\n\t\t{\n\t\t\tconst departmentName = Text.encode(this.departments.get(departmentId ?? 0)?.name ?? '');\n\t\t\tconst userName = Text.encode(this.user.name ?? '');\n\n\t\t\treturn this.loc(\n\t\t\t\tphrase,\n\t\t\t\t{\n\t\t\t\t\t'#USER_NAME#': userName,\n\t\t\t\t\t'#DEPARTMENT_NAME#': departmentName,\n\t\t\t\t},\n\t\t\t)\n\t\t\t\t.replace(\n\t\t\t\t\t'[link]',\n\t\t\t\t\t`<a class=\"hr-department-detail-content__move-user-department-user-link\" href=\"${this.user.url}\">`,\n\t\t\t\t)\n\t\t\t\t.replace('[/link]', '</a>')\n\t\t\t;\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<ConfirmationPopup\n\t\t\t@action=\"confirmMoveUser\"\n\t\t\t@close=\"closeAction\"\n\t\t\t:showActionButtonLoader=\"showMoveUserActionLoader\"\n\t\t\t:lockActionButton=\"lockMoveUserActionButton\"\n\t\t\t:title=\"confirmTitle\"\n\t\t\t:confirmBtnText = \"confirmButtonText\"\n\t\t\t:width=\"364\"\n\t\t>\n\t\t\t<template v-slot:content>\n\t\t\t\t<div class=\"hr-department-detail-content__user-action-text-container\">\n\t\t\t\t\t<div v-if=\"getMoveUserActionPhrase\" v-html=\"getMoveUserActionPhrase\"/>\n\t\t\t\t\t<span v-html=\"confirmDescription\"/>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"hr-department-detail-content__move-user-department-selector\"\n\t\t\t\t\tref=\"department-selector\"\n\t\t\t\t\t:class=\"{ 'ui-ctl-warning': accessDenied }\"\n\t\t\t\t/>\n\t\t\t\t<div v-if=\"isWarningVisible\" class=\"hr-department-detail-content__move-user-department_item-warning\">\n\t\t\t\t\t<BIcon\n\t\t\t\t\t\t:name=\"iconSet.WARNING\"\n\t\t\t\t\t\tcolor=\"#FFA900\"\n\t\t\t\t\t\t:size=\"20\"\n\t\t\t\t\t></BIcon>\n\t\t\t\t\t<span v-html=\"getMoveUserActionPhraseWarning\"/>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"accessDenied\"\n\t\t\t\t\tclass=\"hr-department-detail-content__move-user-department_item-error\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"ui-icon-set --warning\"></div>\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"hr-department-detail-content__move-user-department_item-error-message\"\n\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_MOVE_TO_ANOTHER_DEPARTMENT_PERMISSION_ERROR') }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</ConfirmationPopup>\n\t\t<ConfirmationPopup\n\t\t\t@action=\"closeUserAlreadyBelongsToDepartmentPopup\"\n\t\t\t@close=\"closeUserAlreadyBelongsToDepartmentPopup\"\n\t\t\tv-if=\"showUserAlreadyBelongsToDepartmentPopup\"\n\t\t\t:withoutTitleBar = true\n\t\t\t:onlyConfirmButtonMode = true\n\t\t\t:confirmBtnText = \"loc('HUMANRESOURCES_COMPANY_STRUCTURE_MOVE_TO_ANOTHER_DEPARTMENT_ALREADY_BELONGS_CLOSE_BUTTON')\"\n\t\t\t:width=\"300\"\n\t\t>\n\t\t\t<template v-slot:content>\n\t\t\t\t<div class=\"hr-department-detail-content__user-action-text-container\">\n\t\t\t\t\t<div \n\t\t\t\t\t\tclass=\"hr-department-detail-content__user-belongs-to-department-text-container\"\n\t\t\t\t\t\tv-html=\"getUserAlreadyBelongsToDepartmentPopupPhrase\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"hr-department-detail-content__move-user-department-selector\" ref=\"department-selector\"></div>\n\t\t\t</template>\n\t\t</ConfirmationPopup>\n\t`,\n};\n"],"names":["POPUP_CONTAINER_PREFIX","BasePopup","name","emits","props","id","type","String","required","config","Object","default","computed","popupContainer","created","instance","getPopupInstance","show","mounted","adjustPosition","forceBindPosition","position","getPopupConfig","bindOptions","beforeUnmount","closePopup","methods","PopupManager","getPopupById","destroy","Popup","angleOffset","setAngle","offset","getDefaultConfig","className","autoHide","animation","cacheable","events","onPopupClose","onPopupShow","container","getPopupContainer","Promise","resolve","top","getBoundingClientRect","offsetHeight","document","body","margin","setMaxHeight","defaultConfig","modifiedOptions","defaultClassName","offsetTop","Type","isNumber","$emit","enableAutoHide","setAutoHide","disableAutoHide","template","BaseActionMenuPropsMixin","bindElement","HTMLElement","items","Array","titleBar","containerDataTestId","BaseActionMenu","mixins","width","Number","delimiter","Boolean","components","popupConfig","options","borderRadius","contentNoPaddings","contentPadding","padding","onItemClick","event","item","stopPropagation","disabled","close","RouteActionMenuItem","BIcon","title","description","imageClass","itemClass","bIcon","dataTestId","getColor","colorTokenName","getColorCode","color","RouteActionMenu","SupportedColors","Set","ActionMenuItem","colorClass","has","ActionMenu","UserActionMenuItem","avatar","workPosition","loc","phraseCode","replacements","$Bitrix","Loc","getMessage","UserListActionMenu","openUserUrl","url","BX","SidePanel","Instance","open","DefaultPopupLayout","ConfirmationPopup","DefaultLayoutPopup","withoutTitleBar","onlyConfirmButtonMode","confirmBtnText","showActionButtonLoader","lockActionButton","cancelBtnText","confirmButtonClass","closeAction","performAction","getTitleBar","root","closeButton","Tag","render","Event","bind","content","overlay","opacity","draggable","MoveEmployeeConfirmationPopup","confirmButtonText","targetType","sourceType","showRoleSelect","showCombineCheckbox","isCombineOnly","excludeEmployeeRole","data","selectedRole","combinePosition","memberRoles","getMemberRoles","selectedRoleLabel","head","isTeamTarget","deputyHead","employee","isCombineCheckboxEnabled","EntityTypes","team","popupTitle","popupCheckboxText","showCombineNotice","isDeptToTeam","department","phrase","handleConfirm","payload","role","roleLabel","isCombineMode","badgeText","toggleRoleMenu","menuId","$refs","roleSelect","menu","Menu","roleMenuItems","text","employeeRoleText","push","map","onclick","menuItem","getMenuWindow","Hint","el","binding","value","isString","trim","hint","shouldShow","scrollWidth","offsetWidth","getText","Text","encode","textContent","onMouseEnter","Reflection","getClass","createInstance","popupParameters","angle","offsetLeft","onMouseLeave","hide","BaseManagementDialogHeader","BaseHeader","BaseManagementDialogFooter","BaseFooter","ManagementDialog","entities","isActive","hiddenItemsIds","dataTestIds","recentTabOptions","headerContainer","footerContainer","selectedItemsCount","getDialogInstance","isOpen","Dialog","getById","getDialogConfig","getHeader","getContainer","getFooter","Dom","attr","height","multiple","dropdownMode","compactView","enableSearch","showAvatars","popupOptions","header","footer","onLoad","dialog","getTarget","toggleItems","tabs","getTabs","tab","select","includes","deselect","setVisible","onDestroy","onHide","onActionItemClick","selectedItems","getSelectedItems","closeDialog","length","getItems","forEach","hidden","setHidden","getChatDialogEntity","dynamicLoad","dynamicSearch","filters","includeSubtitle","tagOptions","textColor","bgColor","itemOptions","searchChatTypes","getChannelDialogEntity","avatarOptions","getCollabDialogEntity","createProjectLink","checkCollabInviteOption","collab","supertitle","subtitle","CommunicationsTypeDict","freeze","chat","channel","getCommunicationsRecentTabOptions","entityType","chatType","visible","stub","stubOptions","ResponsiveHint","extraClasses","defaultClass","alignCenter","checkScrollWidth","parameters","unmounted","DefaultHint","MoveAPI","moveUserToDepartment","nodeId","userId","targetNodeId","postData","roleXmlId","MoveUserPopup","originalNodeId","user","executeAction","onlyMove","showMoveUserActionLoader","hasPermission","showUserAlreadyBelongsToDepartmentPopup","accessDenied","selectedParentDepartment","mapState","useChartStore","includedNodeEntityTypesInDialog","isTeamEntity","getMoveUserActionPhrase","gender","getStandardPhrase","getMoveUserActionPhraseWarning","departmentName","departments","get","userName","replace","getUserAlreadyBelongsToDepartmentPopupPhrase","confirmTitle","userHasOtherDepartments","confirmDescription","isInSelectedNode","store","nodeIds","multipleUsers","isArray","parentNodeId","originalNode","parentId","parentNode","iconSet","IconSet","lockMoveUserActionButton","isWarningVisible","permissionChecker","PermissionChecker","getInstance","action","PermissionActions","teamAddMember","employeeAddToDepartment","selectedDepartmentId","departmentContainer","departmentSelector","createTagSelector","renderTo","TagSelector","onTagAdd","tag","onTagRemove","dialogOptions","hideOnDeselect","selectMode","restricted","includedNodeEntityTypes","useMultipleTabs","confirmMoveUser","departmentId","focusedNode","error","code","UI","Notification","Center","notify","autoHideDelay","UserService","moveUserToEntity","closeUserAlreadyBelongsToDepartmentPopup"],"mappings":"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"}