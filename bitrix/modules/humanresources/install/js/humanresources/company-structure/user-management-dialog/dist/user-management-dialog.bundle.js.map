{"version":3,"file":"user-management-dialog.bundle.js","sources":["../src/actions.js","../src/api.js","../src/consts.js","../src/footer.js","../src/header.js","../src/dialog.js"],"sourcesContent":["import { useChartStore } from 'humanresources.company-structure.chart-store';\n\nexport const UserManagementDialogActions = {\n\tgetDepartmentName: (nodeId: number): string => {\n\t\tconst { departments } = useChartStore();\n\t\tconst targetDepartment = departments.get(nodeId);\n\t\tif (!targetDepartment)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn targetDepartment.name;\n\t},\n};\n","import { postData } from 'humanresources.company-structure.api';\n\nexport const UserManagementDialogAPI = {\n\tmoveUsersToDepartment: (nodeId: number, userIds: number[]): Promise<void> => {\n\t\treturn postData('humanresources.api.Structure.Node.Member.moveUserListToDepartment', {\n\t\t\tnodeId,\n\t\t\tuserIds,\n\t\t});\n\t},\n\taddUsersToDepartment: (nodeId: number, userIds: number[], role: string): Promise<void> => {\n\t\treturn postData('humanresources.api.Structure.Node.Member.addUserMember', {\n\t\t\tnodeId,\n\t\t\tuserIds,\n\t\t\troleXmlId: role,\n\t\t});\n\t},\n};\n","export const allowedDialogTypes = [\n\t'add',\n\t'move',\n];\n","import { Dom, Event, Tag, Loc, Type, Text } from 'main.core';\nimport { BaseFooter, type FooterOptions, type ItemOptions, type Tab } from 'ui.entity-selector';\nimport { UserService } from 'humanresources.company-structure.chart-store';\nimport { EntityTypes, getUserDataBySelectorItem } from 'humanresources.company-structure.utils';\nimport { getMemberRoles, type MemberRolesType } from 'humanresources.company-structure.api';\nimport type { BaseEvent } from 'main.core.events';\nimport { UI } from 'ui.notification';\nimport { UserManagementDialogActions } from './actions';\nimport { UserManagementDialogAPI } from './api';\nimport { allowedDialogTypes } from './consts';\n\nconst disabledButtonClass = 'ui-btn-disabled';\n\nexport class BaseUserManagementDialogFooter extends BaseFooter\n{\n\tnodeId: number;\n\tconfirmButtonText: ?string;\n\ttype: string;\n\trole: string;\n\tmemberRoles: MemberRolesType;\n\n\tconstructor(tab: Tab, options: FooterOptions)\n\t{\n\t\tsuper(tab, options);\n\n\t\tthis.nodeId = this.getOption('nodeId');\n\t\tif (!Type.isInteger(this.nodeId))\n\t\t{\n\t\t\tthrow new TypeError(\"Invalid argument 'nodeId'. An integer value was expected.\");\n\t\t}\n\t\tthis.entityType = this.getOption('entityType') ?? EntityTypes.team;\n\t\tthis.memberRoles = getMemberRoles(this.entityType);\n\n\t\tthis.role = this.getOption('role') ?? this.memberRoles.employee;\n\t\tconst type = this.getOption('type') ?? '';\n\t\tif (Type.isString(type) && allowedDialogTypes.includes(type))\n\t\t{\n\t\t\tthis.type = type;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new TypeError(`Invalid argument 'type'. Expected one of: ${allowedDialogTypes.join(', ')}`);\n\t\t}\n\n\t\tthis.#setConfirmButtonText();\n\n\t\tconst selectedItems = this.getDialog().getSelectedItems();\n\t\tthis.userCount = selectedItems.length;\n\t\tthis.users = [];\n\t\tselectedItems.forEach((item) => {\n\t\t\tthis.#onUserToggle(item);\n\t\t});\n\n\t\tthis.getDialog().subscribe('Item:onSelect', this.#handleOnTagAdd.bind(this));\n\t\tthis.getDialog().subscribe('Item:onDeselect', this.#handleOnTagRemove.bind(this));\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst { footer, footerAddButton, footerCloseButton } = Tag.render`\n\t\t\t<div ref=\"footer\" class=\"hr-user-management-dialog__footer\">\n\t\t\t\t<button ref=\"footerAddButton\" class=\"ui-btn ui-btn ui-btn-sm ui-btn-primary ${this.users.length === 0 ? disabledButtonClass : ''} ui-btn-round hr-user-management-dialog__footer-btn-width\">\n\t\t\t\t\t${this.confirmButtonText ?? ''}\n\t\t\t\t</button>\n\t\t\t\t<button ref=\"footerCloseButton\" class=\"ui-btn ui-btn ui-btn-sm ui-btn-light-border ui-btn-round hr-user-management-dialog__footer-btn-width\">\n\t\t\t\t\t${Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_CANCEL_BUTTON')}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.footerAddButton = footerAddButton;\n\t\tEvent.bind(footerCloseButton, 'click', (event) => {\n\t\t\tthis.dialog.hide();\n\t\t});\n\n\t\tEvent.bind(footerAddButton, 'click', (event) => {\n\t\t\tconst users = this.dialog.getSelectedItems();\n\t\t\tconst userIds = users.map((item: Item): void => item.getId());\n\n\t\t\tif (userIds.length > 0)\n\t\t\t{\n\t\t\t\tDom.addClass(footerAddButton, 'ui-btn-wait');\n\t\t\t\tthis.action(userIds);\n\t\t\t}\n\t\t});\n\n\t\treturn footer;\n\t}\n\n\tdestroyDialog(): void\n\t{\n\t\tthis.isInProcess = false;\n\t\tthis.getDialog().destroy();\n\t}\n\n\t#handleOnTagAdd(event: BaseEvent): void\n\t{\n\t\tconst { item } = event.getData();\n\t\tthis.#onUserToggle(item);\n\t}\n\n\t#handleOnTagRemove(event: BaseEvent): void\n\t{\n\t\tconst { item } = event.getData();\n\t\tthis.#onUserToggle(item, false);\n\t}\n\n\t#onUserToggle(item: ItemOptions, isSelected: boolean = true): void\n\t{\n\t\tif (!isSelected)\n\t\t{\n\t\t\tthis.users = this.users.filter((user) => user.id !== item.id);\n\t\t\tthis.userCount -= 1;\n\t\t\tthis.#toggleAddButton();\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst userData = getUserDataBySelectorItem(item, this.role);\n\t\tthis.users = [...this.users, userData];\n\t\tthis.userCount += 1;\n\t\tthis.#toggleAddButton();\n\t}\n\n\t#toggleAddButton(): void\n\t{\n\t\tif (this.userCount === 0)\n\t\t{\n\t\t\tDom.addClass(this.footerAddButton, disabledButtonClass);\n\n\t\t\treturn;\n\t\t}\n\n\t\tDom.removeClass(this.footerAddButton, disabledButtonClass);\n\t}\n\n\t#setConfirmButtonText(): void\n\t{\n\t\tif (this.type === 'move')\n\t\t{\n\t\t\tthis.confirmButtonText = Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_MOVE_USER_FROM_CONFIRM_BUTTON');\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.type === 'add')\n\t\t{\n\t\t\tthis.confirmButtonText = Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_ADD_USER_CONFIRM_BUTTON');\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.confirmButtonText = '';\n\t}\n\n\tasync action(userIds: number[]): void\n\t{\n\t\tif (!this.userCount || this.isInProcess)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isInProcess = true;\n\t\tconst departmentUserIds = this.type === 'move' ? { [this.memberRoles.employee]: userIds } : userIds;\n\n\t\tconst data = await this.#saveUsers(departmentUserIds).catch(() => {});\n\t\tif (!data)\n\t\t{\n\t\t\tthis.destroyDialog();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.type === 'add')\n\t\t{\n\t\t\tUserService.addUsersToEntity(\n\t\t\t\tthis.nodeId,\n\t\t\t\tthis.users,\n\t\t\t\tdata.userCount ?? 0,\n\t\t\t\tthis.role ?? this.memberRoles.employee,\n\t\t\t);\n\t\t}\n\n\t\tif (this.type === 'move')\n\t\t{\n\t\t\tUserService.moveUsersToEntity(\n\t\t\t\tthis.nodeId,\n\t\t\t\tthis.users,\n\t\t\t\tdata.userCount ?? 0,\n\t\t\t\tdata.updatedDepartmentIds ?? [],\n\t\t\t);\n\t\t}\n\n\t\tconst notificationCode = this.getNotificationMessageCode();\n\t\tif (notificationCode)\n\t\t{\n\t\t\tthis.showNotification(notificationCode);\n\t\t}\n\t\tthis.destroyDialog();\n\t}\n\n\t#saveUsers(departmentUserIds: Array): Promise<void>\n\t{\n\t\tif (this.type === 'move')\n\t\t{\n\t\t\treturn UserManagementDialogAPI.moveUsersToDepartment(this.nodeId, departmentUserIds);\n\t\t}\n\n\t\treturn UserManagementDialogAPI.addUsersToDepartment(this.nodeId, departmentUserIds, this.role);\n\t}\n\n\tshowNotification(messageCode: string): void\n\t{\n\t\tconst departmentName = UserManagementDialogActions.getDepartmentName(this.nodeId);\n\n\t\tUI.Notification.Center.notify({\n\t\t\tcontent: Text.encode(Loc.getMessage(\n\t\t\t\tmessageCode,\n\t\t\t\t{\n\t\t\t\t\t'#DEPARTMENT#': departmentName,\n\t\t\t\t},\n\t\t\t)),\n\t\t\tautoHideDelay: 2000,\n\t\t});\n\t}\n\n\t// eslint-disable-next-line sonarjs/cognitive-complexity\n\tgetNotificationMessageCode(): ?string\n\t{\n\t\tif (this.type === 'add')\n\t\t{\n\t\t\tif (this.users.length > 1)\n\t\t\t{\n\t\t\t\tif (this.entityType === EntityTypes.team)\n\t\t\t\t{\n\t\t\t\t\tthis.showNotification('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_ADD_TEAM_USER_ADD_EMPLOYEES_MESSAGE');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.showNotification('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_ADD_USER_ADD_EMPLOYEES_MESSAGE');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.users.length === 1)\n\t\t\t{\n\t\t\t\tif (this.entityType === EntityTypes.team)\n\t\t\t\t{\n\t\t\t\t\tthis.showNotification('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_ADD_TEAM_USER_ADD_EMPLOYEE_MESSAGE');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.showNotification('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_ADD_USER_ADD_EMPLOYEE_MESSAGE');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.type === 'move')\n\t\t{\n\t\t\tif (this.users.length > 1)\n\t\t\t{\n\t\t\t\tthis.showNotification('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_MOVE_USER_FROM_MOVE_EMPLOYEES_MESSAGE');\n\t\t\t}\n\n\t\t\tif (this.users.length === 1)\n\t\t\t{\n\t\t\t\tthis.showNotification('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_MOVE_USER_FROM_MOVE_EMPLOYEE_MESSAGE');\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\n","import { EntityTypes } from 'humanresources.company-structure.utils';\nimport { Dom, Event, Tag, Loc, Text } from 'main.core';\nimport { BaseHeader, type Dialog, type Tab, type HeadOptions } from 'ui.entity-selector';\nimport { Menu, PopupManager } from 'main.popup';\nimport { BaseUserManagementDialogFooter } from './footer';\nimport { memberRoles, type MemberRolesType } from 'humanresources.company-structure.api';\n\nexport class BaseUserManagementDialogHeader extends BaseHeader\n{\n\ttitle: string;\n\tdescription: string;\n\trole: string;\n\tmemberRoles: MemberRolesType;\n\tentityType: string;\n\n\tconstructor(context: Dialog | Tab, options: HeadOptions)\n\t{\n\t\tsuper(context, options);\n\n\t\tthis.tiltle = Text.encode(this.getOption('title') ?? '');\n\t\tthis.description = Text.encode(this.getOption('description') ?? '');\n\t\tthis.memberRoles = this.getOption('memberRoles') ?? memberRoles;\n\t\tthis.role = this.getOption('role') ?? this.memberRoles.employee;\n\t\tthis.entityType = this.getOption('entityType') ?? EntityTypes.department;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst { header, headerCloseButton } = Tag.render`\n\t\t\t<div ref=\"header\" class=\"hr-user-management-dialog__header\">\n\t\t\t\t<div ref=\"headerCloseButton\" class=\"hr-user-management-dialog__header-close_button\"></div>\n\t\t\t\t<span class=\"hr-user-management-dialog__header-title\">\n\t\t\t\t\t${this.tiltle}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(headerCloseButton, 'click', () => {\n\t\t\tthis.getDialog().hide();\n\t\t});\n\n\t\tthis.header = header;\n\t\tif (this.role === this.memberRoles.employee)\n\t\t{\n\t\t\tconst employeeAddSubtitle = Tag.render`\n\t\t\t\t<span class=\"hr-user-management-dialog__header-description\">\n\t\t\t\t\t${this.description}\n\t\t\t\t</span>\n\t\t\t`;\n\t\t\tDom.append(employeeAddSubtitle, this.header);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#addRoleSwitcher();\n\t\t}\n\n\t\treturn header;\n\t}\n\n\t#addRoleSwitcher(): void\n\t{\n\t\tconst { roleSwitcherContainer, roleSwitcher } = Tag.render`\n\t\t\t<div ref=\"roleSwitcherContainer\" class=\"hr-user-management-dialog__role_switcher-container\">\n\t\t\t\t<span class=\"hr-user-management-dialog__role_switcher_title\">\n\t\t\t\t\t${Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_ROLE_PICKER_TEXT')}\n\t\t\t\t\t</span>\n\t\t\t\t<div ref=\"roleSwitcher\" class=\"hr-user-management-dialog__role_switcher\">\n\t\t\t\t\t${this.#getHeadRoleText()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\tDom.append(roleSwitcherContainer, this.header);\n\t\tthis.roleSwitcher = roleSwitcher;\n\n\t\tEvent.bind(this.roleSwitcher, 'click', () => {\n\t\t\tthis.#toggleRoleSwitcherMenu();\n\t\t});\n\t}\n\n\t#toggleRoleSwitcherMenu(): void\n\t{\n\t\tconst roleSwitcherId = `${this.getDialog().id}-role-switcher`;\n\t\tconst oldRoleSwitcherMenu = PopupManager.getPopupById(roleSwitcherId);\n\t\tif (oldRoleSwitcherMenu)\n\t\t{\n\t\t\toldRoleSwitcherMenu.destroy();\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst roleSwitcherMenu = new Menu({\n\t\t\tid: roleSwitcherId,\n\t\t\tbindElement: this.roleSwitcher,\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc: true,\n\t\t\tmaxWidth: 263,\n\t\t\tevents: {\n\t\t\t\tonPopupDestroy: () => {\n\t\t\t\t\tDom.removeClass(this.roleSwitcher, '--focused');\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tconst menuItems = [\n\t\t\t{\n\t\t\t\thtml: Tag.render`\n\t\t\t\t\t<div \n\t\t\t\t\t\tdata-test-id=\"hr-company-structure_user-management-dialog__role-switcher-head\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${this.#getHeadRoleText()}\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.roleSwitcher.innerText = this.#getHeadRoleText();\n\t\t\t\t\tthis.#changeRole(this.memberRoles.head);\n\t\t\t\t\troleSwitcherMenu.destroy();\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\thtml: Tag.render`\n\t\t\t\t\t<div \n\t\t\t\t\t\tdata-test-id=\"hr-company-structure_user-management-dialog__role-switcher-deputy\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${this.#getDeputyRoleText()}\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.roleSwitcher.innerText = this.#getDeputyRoleText();\n\t\t\t\t\tthis.#changeRole(this.memberRoles.deputyHead);\n\t\t\t\t\troleSwitcherMenu.destroy();\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t\tmenuItems.forEach((menuItem) => roleSwitcherMenu.addMenuItem(menuItem));\n\n\t\tif (roleSwitcherMenu.isShown)\n\t\t{\n\t\t\troleSwitcherMenu.destroy();\n\n\t\t\treturn;\n\t\t}\n\n\t\troleSwitcherMenu.show();\n\t\tDom.addClass(this.roleSwitcher, '--focused');\n\t}\n\n\t#changeRole(role: string): void\n\t{\n\t\tconst currentFooterOptions = this.getDialog().getFooter().getOptions();\n\t\tcurrentFooterOptions.role = role;\n\t\tthis.getDialog().setFooter(BaseUserManagementDialogFooter, currentFooterOptions);\n\t}\n\n\t#getHeadRoleText(): string\n\t{\n\t\treturn this.entityType === EntityTypes.team\n\t\t\t? Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_TEAM_HEAD_ROLE_TITLE')\n\t\t\t: Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_HEAD_ROLE_TITLE')\n\t\t;\n\t}\n\n\t#getDeputyRoleText(): string\n\t{\n\t\treturn this.entityType === EntityTypes.team\n\t\t\t? Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_TEAM_DEPUTY_ROLE_TITLE')\n\t\t\t: Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_DEPUTY_ROLE_TITLE')\n\t\t;\n\t}\n}\n","import { EntityTypes } from 'humanresources.company-structure.utils';\nimport { Type, Loc } from 'main.core';\nimport { Dialog } from 'ui.entity-selector';\nimport type { UserManagementDialogConfiguration } from './types';\nimport { BaseUserManagementDialogHeader } from './header';\nimport { BaseUserManagementDialogFooter } from './footer';\nimport { getMemberRoles, type MemberRolesType } from 'humanresources.company-structure.api';\nimport { allowedDialogTypes } from './consts';\nimport './style.css';\n\nconst dialogId = 'hr-user-management-dialog';\n\nexport { UserManagementDialogAPI } from './api';\n\nexport class UserManagementDialog\n{\n\t#dialog: Dialog;\n\t#nodeId: number;\n\t#type: string;\n\t#role: string;\n\t#entityType: string;\n\t#memberRoles: MemberRolesType;\n\n\tconstructor(options: UserManagementDialogConfiguration)\n\t{\n\t\tif (Type.isInteger(options.nodeId))\n\t\t{\n\t\t\tthis.#nodeId = options.nodeId;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new TypeError(\"Invalid argument 'nodeId'. An integer value was expected.\");\n\t\t}\n\n\t\tif (Type.isString(options.type) && allowedDialogTypes.includes(options.type))\n\t\t{\n\t\t\tthis.#type = options.type;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new TypeError(`Invalid argument 'type'. Expected one of: ${allowedDialogTypes.join(', ')}`);\n\t\t}\n\n\t\tif (Type.isString(options.entityType) && Object.values(EntityTypes).includes(options.entityType))\n\t\t{\n\t\t\tthis.#entityType = options.entityType;\n\t\t\tif (this.#entityType === EntityTypes.team)\n\t\t\t{\n\t\t\t\tthis.#type = 'add';\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#entityType = EntityTypes.department;\n\t\t}\n\t\tthis.#memberRoles = getMemberRoles(this.#entityType);\n\n\t\tif (Object.values(this.#memberRoles).includes(options.role))\n\t\t{\n\t\t\tthis.#role = options.role;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#role = this.#memberRoles.employee;\n\t\t}\n\n\t\tthis.id = `${dialogId}-${this.#type}`;\n\t\tthis.title = this.#getTitleByTypeAndRoleAndEntity(this.#type, this.#role, this.#entityType);\n\t\tthis.description = this.#getDescriptionByTypeRoleAndEntity(this.#type, this.#role, this.#entityType);\n\t\tthis.#createDialog();\n\t}\n\n\tstatic openDialog(options: UserManagementDialogConfiguration): void\n\t{\n\t\tconst instance = new UserManagementDialog(options);\n\t\tinstance.show();\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#dialog.show();\n\t}\n\n\t#createDialog(): void\n\t{\n\t\tthis.#dialog = new Dialog({\n\t\t\tid: this.id,\n\t\t\twidth: 400,\n\t\t\theight: 511,\n\t\t\tmultiple: true,\n\t\t\tcacheable: false,\n\t\t\tdropdownMode: true,\n\t\t\tcompactView: false,\n\t\t\tenableSearch: true,\n\t\t\tshowAvatars: true,\n\t\t\tautoHide: false,\n\t\t\theader: BaseUserManagementDialogHeader,\n\t\t\theaderOptions: {\n\t\t\t\ttitle: this.title,\n\t\t\t\trole: this.#role,\n\t\t\t\tdescription: this.description,\n\t\t\t\tmemberRoles: this.#memberRoles,\n\t\t\t\tentityType: this.#entityType,\n\t\t\t},\n\t\t\tfooter: BaseUserManagementDialogFooter,\n\t\t\tfooterOptions: {\n\t\t\t\tnodeId: this.#nodeId,\n\t\t\t\trole: this.#role,\n\t\t\t\ttype: this.#type,\n\t\t\t\tentityType: this.#entityType,\n\t\t\t},\n\t\t\tpopupOptions: {\n\t\t\t\toverlay: { opacity: 40 },\n\t\t\t},\n\t\t\tentities: [\n\t\t\t\t{\n\t\t\t\t\tid: 'user',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tintranetUsersOnly: true,\n\t\t\t\t\t\tinviteEmployeeLink: false,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\n\t#getTitleByTypeAndRoleAndEntity(type: string, role: string, entityType: string): string\n\t{\n\t\tif (type === 'add' && role === this.#memberRoles.employee && entityType === EntityTypes.team)\n\t\t{\n\t\t\treturn Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_ADD_TEAM_EMPLOYEE_TITLE');\n\t\t}\n\n\t\tif (type === 'move' && role === this.#memberRoles.employee)\n\t\t{\n\t\t\treturn Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_MOVE_USER_FROM_TITLE');\n\t\t}\n\n\t\tif (type === 'add' && role === this.#memberRoles.employee)\n\t\t{\n\t\t\treturn Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_ADD_EMPLOYEE_TITLE');\n\t\t}\n\n\t\tif (type === 'add' && role === this.#memberRoles.head && entityType === EntityTypes.team)\n\t\t{\n\t\t\treturn Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_ADD_TEAM_HEAD_TITLE');\n\t\t}\n\n\t\tif (type === 'add' && role === this.#memberRoles.head)\n\t\t{\n\t\t\treturn Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_ADD_HEAD_TITLE');\n\t\t}\n\n\t\treturn '';\n\t}\n\n\t#getDescriptionByTypeRoleAndEntity(type: string, role: string, entityType: string): string\n\t{\n\t\tif (type === 'add' && entityType === EntityTypes.team)\n\t\t{\n\t\t\treturn Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_ADD_TEAM_EMPLOYEE_DESCRIPTION');\n\t\t}\n\n\t\tif (type === 'move' && role === this.#memberRoles.employee)\n\t\t{\n\t\t\treturn Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_MOVE_USER_FROM_DESCRIPTION');\n\t\t}\n\n\t\tif (type === 'add' && role === this.#memberRoles.employee)\n\t\t{\n\t\t\treturn Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_ADD_EMPLOYEE_DESCRIPTION');\n\t\t}\n\n\t\treturn '';\n\t}\n}\n"],"names":["UserManagementDialogActions","getDepartmentName","nodeId","departments","useChartStore","targetDepartment","get","name","UserManagementDialogAPI","moveUsersToDepartment","userIds","postData","addUsersToDepartment","role","roleXmlId","allowedDialogTypes","disabledButtonClass","BaseUserManagementDialogFooter","BaseFooter","constructor","tab","options","getOption","Type","isInteger","TypeError","entityType","EntityTypes","team","memberRoles","getMemberRoles","employee","type","isString","includes","join","selectedItems","getDialog","getSelectedItems","userCount","length","users","forEach","item","subscribe","bind","render","footer","footerAddButton","footerCloseButton","Tag","confirmButtonText","Loc","getMessage","Event","event","dialog","hide","map","getId","Dom","addClass","action","destroyDialog","isInProcess","destroy","departmentUserIds","data","catch","UserService","addUsersToEntity","moveUsersToEntity","updatedDepartmentIds","notificationCode","getNotificationMessageCode","showNotification","messageCode","departmentName","UI","Notification","Center","notify","content","Text","encode","autoHideDelay","getData","isSelected","filter","user","id","userData","getUserDataBySelectorItem","removeClass","BaseUserManagementDialogHeader","BaseHeader","context","tiltle","description","department","header","headerCloseButton","employeeAddSubtitle","append","roleSwitcherContainer","roleSwitcher","roleSwitcherId","oldRoleSwitcherMenu","PopupManager","getPopupById","roleSwitcherMenu","Menu","bindElement","autoHide","closeByEsc","maxWidth","events","onPopupDestroy","menuItems","html","onclick","innerText","head","deputyHead","menuItem","addMenuItem","isShown","show","currentFooterOptions","getFooter","getOptions","setFooter","dialogId","UserManagementDialog","Object","values","title","openDialog","instance","Dialog","width","height","multiple","cacheable","dropdownMode","compactView","enableSearch","showAvatars","headerOptions","footerOptions","popupOptions","overlay","opacity","entities","intranetUsersOnly","inviteEmployeeLink"],"mappings":"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"}