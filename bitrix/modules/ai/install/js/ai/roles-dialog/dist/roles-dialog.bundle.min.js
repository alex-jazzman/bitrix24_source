this.BX=this.BX||{};(function(e,t,s,a,i,l,o,r,n,c,d,b){"use strict";let p=e=>e,v,u;var h=babelHelpers.classPrivateFieldLooseKey("popup");var L=babelHelpers.classPrivateFieldLooseKey("initPopup");var _=babelHelpers.classPrivateFieldLooseKey("renderContent");var P=babelHelpers.classPrivateFieldLooseKey("renderPopupTitleBar");class g{constructor(){Object.defineProperty(this,P,{value:H});Object.defineProperty(this,_,{value:F});Object.defineProperty(this,L,{value:m});Object.defineProperty(this,h,{writable:true,value:void 0})}show(){if(!babelHelpers.classPrivateFieldLooseBase(this,h)[h]){babelHelpers.classPrivateFieldLooseBase(this,L)[L]()}babelHelpers.classPrivateFieldLooseBase(this,h)[h].show()}hide(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,h)[h])==null?void 0:e.close()}}function m(){babelHelpers.classPrivateFieldLooseBase(this,h)[h]=new s.Popup({content:babelHelpers.classPrivateFieldLooseBase(this,_)[_](),resizable:true,width:881,height:621,padding:0,contentPadding:0,borderRadius:"10px 10px 4px 4px",className:"ai_roles-dialog_popup",animation:true,cacheable:false})}function F(){return b.Tag.render(v||(v=p`
			<div class="ai__roles-dialog_loader-popup-inner">
				${0}
				<div class="ai__roles-dialog_loader-popup-content">
					<div class="ai__roles-dialog_loader-popup-content-left">
						<div style="width: 145px; height: 10px; margin-bottom: 22px; margin-left: 12px;">
							<div class="rec --color-ai"></div>
						</div>
						<div style="width: 100%; height: 119px; margin-bottom: 14px;">
							<div class="rec --color-ai"></div>
						</div>
						<div style="width: 100%; height: 54px;">
							<div class="rec --color-ai"></div>
						</div>
					</div>
					<div class="ai__roles-dialog_loader-popup-content-right">
					<div style="width: 101px; height: 10px; margin-bottom: 22px;">
							<div class="rec"></div>
						</div>
						<div style="width: 100%; height: 75px; margin-bottom: 8px;">
							<div class="rec"></div>
						</div>
						<div style="width: 100%; height: 75px;">
							<div class="rec"></div>
						</div>
					</div>
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,P)[P]())}function H(){return b.Tag.render(u||(u=p`
			<div class="ai__roles-dialog_loader-popup-title-bar">
				<div
					style="width: 152px; height: 16px;"
					class="ai__roles-dialog_loader-popup-title-bar-left"
				>
					<div class="rec"></div>
				</div>
				<div
					style="width: 98px; height: 16px;"
					class="ai__roles-dialog_loader-popup-title-bar-left"
				>
					<div class="rec"></div>
				</div>
			</div>
		`))}let O=e=>e,f;function I(){const e=new s.Popup({content:R(),resizable:false,width:881,height:621,padding:0,contentPadding:0,borderRadius:"10px 10px 4px 4px",className:"ai_roles-dialog_popup",animation:true,cacheable:false,autoHide:true,closeByEsc:true,closeIcon:true,closeIconSize:s.CloseIconSize.LARGE});e.show()}function R(){return b.Tag.render(f||(f=O`
		<div class="ai__roles-dialog_error-popup-inner">
			<div class="ai__roles-dialog_error-popup-content">
				<div class="ai__roles-dialog_error-popup-content-warning-icon">
					${0}
				</div>
				<p class="ai__roles-dialog_error-popup-content-error-text">
					${0}
				</p>
			</div>
		</div>
	`),y(),b.Loc.getMessage("AI_COPILOT_ROLES_ERROR_TEXT"))}function y(){const e="rgba(176, 149, 220, 0.4)";const t=new d.Icon({icon:d.Main.WARNING,size:56,color:e});return t.render()}const B=Object.freeze({OPEN:"open",CLOSE:"close",SAVE:"save",SEARCH:"search",FEEDBACK:"feedback",SELECT:"save"});const E=Object.freeze({SUCCESS:"success",ERROR:"error"});var S=babelHelpers.classPrivateFieldLooseKey("cSection");var T=babelHelpers.classPrivateFieldLooseKey("sendLabel");var C=babelHelpers.classPrivateFieldLooseKey("getCommonParameters");var D=babelHelpers.classPrivateFieldLooseKey("getFormattedExtraParams");var A=babelHelpers.classPrivateFieldLooseKey("formatCSectionParam");class w{constructor(e){Object.defineProperty(this,A,{value:K});Object.defineProperty(this,D,{value:M});Object.defineProperty(this,C,{value:x});Object.defineProperty(this,T,{value:N});Object.defineProperty(this,S,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,S)[S]=babelHelpers.classPrivateFieldLooseBase(this,A)[A](e.cSection)}sendOpenLabel(e,t){const s=e?E.SUCCESS:E.ERROR;const a=t?{p1:{name:"role",value:t}}:{};babelHelpers.classPrivateFieldLooseBase(this,T)[T]({status:s,extraParams:a,event:B.OPEN})}sendCloseLabel(e){const t=e?{p1:{name:"role",value:e}}:{};babelHelpers.classPrivateFieldLooseBase(this,T)[T]({extraParams:t,event:B.CLOSE})}sendSelectLabel(e){const t=e?{p1:{name:"role",value:e}}:{};babelHelpers.classPrivateFieldLooseBase(this,T)[T]({extraParams:t,event:B.SELECT})}sendSearchLabel(e){const t=e?{p1:{name:"search",value:e}}:{};babelHelpers.classPrivateFieldLooseBase(this,T)[T]({extraParams:t,event:B.SEARCH})}sendFeedBackLabel(){babelHelpers.classPrivateFieldLooseBase(this,T)[T]({event:B.FEEDBACK})}}async function N(e){const t=e.status||E.SUCCESS;const s=e.event;const a=e.extraParams||{};try{const{sendData:e}=await b.Runtime.loadExtension("ui.analytics");const i={event:s,status:t,...babelHelpers.classPrivateFieldLooseBase(this,C)[C](),...babelHelpers.classPrivateFieldLooseBase(this,D)[D](a)};e(i)}catch(e){console.error("AI: RolesDialog: Can't send analytics",e)}}function x(){return{tool:"ai",category:"roles_picker",c_section:babelHelpers.classPrivateFieldLooseBase(this,S)[S]}}function M(e){const t={};Object.entries(e).forEach((([e,s])=>{t[e]=`${b.Text.toCamelCase(s.name)}_${b.Text.toCamelCase(s.value)}`}));return t}function K(e){return e.replaceAll("-","_").split("_").map((e=>{if(Number.isNaN(parseInt(e,10))){return e}return""})).filter((e=>e)).join("_")}const j={CHOOSE_STANDARD_ROLE:"AI.RolesDialog.GroupListFooter:ChooseStandardRole"};const U={methods:{handleClick(){o.EventEmitter.emit(document,j.CHOOSE_STANDARD_ROLE)}},template:`\n\t\t<button @click="handleClick" class="ai__roles-dialog_standard-group-btn">\n\t\t\t<span class="ai__roles-dialog_standard-group-btn-text">\n\t\t\t\t{{ $Bitrix.Loc.getMessage('AI_COPILOT_ROLES_USE_STANDARD_ROLE') }}\n\t\t\t</span>\n\t\t</button>\n\t`};const G={components:{Hint:a.Hint},props:{header:{type:String,required:false,default:""},hint:{type:String,required:false,default:""}},template:`\n\t\t<div class="ai__roles-dialog_header-with-hint">\n\t\t\t<span class="ai__roles-dialog_header-with-hint-text">\n\t\t\t\t{{ header }}\n\t\t\t</span>\n\t\t\t<span\n\t\t\t\tv-if="hint"\n\t\t\t\tclass="ai__roles-dialog_header-with-hint-text-hint"\n\t\t\t>\n\t\t\t\t<Hint :text="hint" />\n\t\t\t</span>\n\t\t</div>\n\t`};const k={components:{RolesDialogHeaderWithHint:G},computed:{text(){return this.$Bitrix.Loc.getMessage("AI_COPILOT_ROLES_GROUP_LIST_HEADER_2")},hint(){return""}},template:`\n\t\t<div class="ai__roles-dialog_group-list-header">\n\t\t\t<RolesDialogHeaderWithHint\n\t\t\t\t:header="text"\n\t\t\t\t:hint="hint"\n\t\t\t/>\n\t\t</div>\n\t`};function z(e,t){const s=e=>{t.sendSearchLabel(e)};const a=b.Runtime.debounce(s,800);return{components:{RolesDialogHeaderWithHint:G},computed:{...r.mapWritableState(e.useGlobalState,{searchQuery:"searchQuery",searching:"searchApplied"}),header(){return this.$Bitrix.Loc.getMessage("AI_COPILOT_ROLES_MAIN_CONTENT_HEADER")},hint(){return this.$Bitrix.Loc.getMessage("AI_COPILOT_ROLES_MAIN_CONTENT_HEADER_HINT")}},watch:{searchQuery(){if(this.searching){a(this.searchQuery)}}},template:`\n\t\t\t<div class="ai__roles-dialog_main-content-header">\n\t\t\t\t<RolesDialogHeaderWithHint\n\t\t\t\t\t:header="header"\n\t\t\t\t\t:hint="hint"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t`}}const V={name:"RolesDialogRoleItemAvatar",components:{BIcon:c.BIcon},data(){return{isAvatarLoaded:null}},props:{avatar:{type:String,required:false,default:null},avatarAlt:{type:String,required:false,default:""},icon:{type:String,required:false,default:null}},computed:{iconSize(){return 24},iconColor(){return getComputedStyle(document.body).getPropertyValue("--ui-color-background-primary")||"#fff"},fallbackIcon(){return d.Main.COPILOT_AI}},methods:{onImageLoad(){this.isAvatarLoaded=true},onImageLoadError(){this.isAvatarLoaded=false}},template:`\n\t\t<div\n\t\t\tclass="ai__roles-dialog_role-image-wrapper"\n\t\t>\n\t\t\t<div\n\t\t\t\tv-if="icon"\n\t\t\t\tclass="ai__roles-dialog_role-image-icon"\n\t\t\t>\n\t\t\t\t<BIcon\n\t\t\t\t\t:name="icon"\n\t\t\t\t\t:size="iconSize"\n\t\t\t\t\t:color="iconColor"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-else\n\t\t\t>\n\t\t\t\t<transition name="ai-roles-dialog-icon-fade">\n\t\t\t\t\t<img\n\t\t\t\t\t\tv-show="isAvatarLoaded"\n\t\t\t\t\t\tclass="ai__roles-dialog_role-image"\n\t\t\t\t\t\t:src="avatar"\n\t\t\t\t\t\t:alt="avatarAlt"\n\t\t\t\t\t\t@error="onImageLoadError"\n\t\t\t\t\t\t@load="onImageLoad"\n\t\t\t\t\t/>\n\t\t\t\t</transition>\n\t\t\t\t<div\n\t\t\t\t\tv-if="isAvatarLoaded === null || isAvatarLoaded === false"\n\t\t\t\t\t:class="{'ai__roles-dialog_role-image-icon': true, '--loading': isAvatarLoaded === null}"\n\t\t\t\t>\n\t\t\t\t\t<BIcon\n\t\t\t\t\t\t:name="fallbackIcon"\n\t\t\t\t\t\t:size="iconSize"\n\t\t\t\t\t\t:color="iconColor"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`};const $={props:{inverted:{type:Boolean,required:false,default:false}},computed:{labelHTML(){const e=this.inverted?i.LabelColor.COPILOT_LIGHT_REVERSE:i.LabelColor.COPILOT_LIGHT;const t=new i.Label({color:e,size:i.LabelSize.SM,text:"NEW",fill:true});return t.render().outerHTML}},template:`\n\t\t<div ref="label" class="ai__roles-dialog_label" v-html="labelHTML"></div>\n\t`};function X(e){return{name:"RolesDialogRoleItem",components:{BIcon:c.BIcon,RolesDialogRoleItemAvatar:V,RolesDialogLabelNew:$},data(){return{isFavourite:this.itemData.itemData.customData.isFavourite,isProcessingRoleFavourite:false}},props:["itemData"],computed:{...r.mapWritableState(e.useGlobalState,{searching:"searchApplied",searchQuery:"searchQuery"}),item(){return this.itemData.itemData},subtitle(){const e=b.Text.encode(this.item.subtitle);if(this.searching&&this.searchQuery!==""){return e.replaceAll(new RegExp(this.searchQuery,"gi"),(e=>`<mark>${e}</mark>`))}return e},title(){const e=b.Text.encode(this.item.title);if(this.searching&&this.searchQuery!==""){return e.replaceAll(new RegExp(this.searchQuery,"gi"),(e=>`<mark>${e}</mark>`))}return e},isSelected(){var e;return Boolean((e=this.item.customData)==null?void 0:e.selected)},isNew(){var e;return Boolean((e=this.item.customData)==null?void 0:e.isNew)},isInfoItem(){var e;return Boolean((e=this.item.customData)==null?void 0:e.isInfoItem)},className(){return{"ai__roles-dialog_role-item":true,"--selected":this.isSelected}},isRoleCanBeFavourite(){return this.item.customData.canBeFavourite===true},favouriteLabelIconData(){const e=this.isProcessingRoleFavourite?d.Animated.LOADER_WAIT:d.Main.BOOKMARK_1;return{name:e,size:24}},favouriteLabelTitle(){return this.isFavourite?this.$Bitrix.Loc.getMessage("AI_COPILOT_ROLES_REMOVE_FROM_FAVOURITE"):this.$Bitrix.Loc.getMessage("AI_COPILOT_ROLES_ADD_TO_FAVOURITE")},favouriteLabelClassname(){return{"ai__roles-dialog_role-item-favourite-label":true,"--active":this.isFavourite,"--loading":this.isProcessingRoleFavourite}},infoIcon(){return d.Main.INFO}},methods:{selectRole(){if(b.Type.isFunction(this.item.button.action)){this.item.button.action()}},toggleFavourite(){if(this.isProcessingRoleFavourite){return}let e=false;setTimeout((()=>{if(e===false){this.isProcessingRoleFavourite=true}}),300);this.item.customData.actions.toggleFavourite(!this.isFavourite).then((()=>{this.isFavourite=!this.isFavourite})).finally((()=>{this.isProcessingRoleFavourite=false;e=true}))}},template:`\n\t\t\t<article @click="selectRole" :class="className">\n\t\t\t\t<RolesDialogRoleItemAvatar\n\t\t\t\t\t:avatar="item.customData.avatar"\n\t\t\t\t\t:avatar-alt="item.title"\n\t\t\t\t\t:icon="isInfoItem ? infoIcon : null"\n\t\t\t\t/>\n\t\t\t\t<div class="ai__roles-dialog_role-item-info">\n\t\t\t\t\t<div class="ai__roles-dialog_role-item-title-wrapper">\n\t\t\t\t\t\t<div class="ai__roles-dialog_role-item-title" v-html="title"></div>\n\t\t\t\t\t\t<div class="ai__roles-dialog_role-item-label">\n\t\t\t\t\t\t\t<RolesDialogLabelNew v-if="isNew" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p class="ai__roles-dialog_role-item-description" v-html="subtitle"></p>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tv-if="isRoleCanBeFavourite"\n\t\t\t\t\t:class="favouriteLabelClassname"\n\t\t\t\t\t:title="favouriteLabelTitle"\n\t\t\t\t\t@click.stop.prevent="toggleFavourite"\n\t\t\t\t\t@mousedown.stop\n\t\t\t\t>\n\t\t\t\t\t<BIcon\n\t\t\t\t\t\t:name="favouriteLabelIconData.name"\n\t\t\t\t\t\t:size="favouriteLabelIconData.size"\n\t\t\t\t\t/>\n\t\t\t\t</button>\n\t\t\t</article>\n\t\t`}}const W={components:{BIcon:c.BIcon,RolesDialogLabelNew:$},props:["groupData"],computed:{group(){return this.groupData.groupData},isNew(){return this.group.customData.isNew},isSelected(){return this.group.selected},handleClick(){if(this.group.selected){return undefined}return this.groupData.handleClick},groupItemClassname(){return{"ai__roles-dialog_group-item":true,"--selected":this.isSelected}},chevronRightIconName(){return d.Actions.CHEVRON_RIGHT}},created(){if(this.groupData.groupData.id==="recents"){o.EventEmitter.subscribe("update-complete",this.onUpdate)}},beforeDestroy(){if(this.groupData.groupData.id==="recents"){o.EventEmitter.unsubscribe("update-complete",this.onUpdate)}},methods:{onUpdate(){this.groupData.handleClick()}},template:`\n\t\t<div @click="handleClick" class="ai__roles-dialog_group-item-wrapper">\n\t\t\t<div :class="groupItemClassname">\n\t\t\t\t<div class="ai__roles-dialog_group-item-inner">\n\t\t\t\t<div class="ai__roles-dialog_group-item-title-wrapper">\n\t\t\t\t\t<span class="ai__roles-dialog_group-item-title">\n\t\t\t\t\t\t{{ group.name }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<div class="ai__roles-dialog_group-item-label-new">\n\t\t\t\t\t\t<RolesDialogLabelNew\n\t\t\t\t\t\t\tv-if="isNew"\n\t\t\t\t\t\t\t:inverted="isSelected"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\t<b-icon :size="16" :name="chevronRightIconName"></b-icon>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`};const q={CHOOSE_STANDARD_ROLE:"AI.RolesDialog.RolesDialogSearchStub:ChooseStandardRole"};const Q=b.Loc.getMessage("AI_COPILOT_ROLES_SEARCH_NO_RESULT_3",{"#LINK#":'<span @click.prevent="selectUniversalRole">',"#/LINK#":"</span>"});const Y={methods:{selectUniversalRole(){o.EventEmitter.emit(document,q.CHOOSE_STANDARD_ROLE)}},template:`\n\t\t<div class="ai__roles-dialog_search-stub">\n\t\t\t<div class="ai__roles-dialog_search-stub-content">\n\t\t\t\t<div class="ai__roles-dialog_search-stub-image"></div>\n\t\t\t\t<h3 class="ai__roles-dialog_search-stub-title">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('AI_COPILOT_ROLES_SEARCH_NO_RESULT_TITLE') }}\n\t\t\t\t</h3>\n\t\t\t\t<div class="ai__roles-dialog_search-stub-text">\n\t\t\t\t\t${Q}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`};const J=b.Loc.getMessage("AI_COPILOT_ROLES_EMPTY_CUSTOM_GROUP",{"#LINK#":'<a @click.prevent="openRolesLibrary" href="#">',"#/LINK#":"</a>"});const Z=e=>({computed:{...r.mapWritableState(e.useGlobalState,{currentGroup:"currentGroup"}),emptyStubData(){return this.currentGroup.customData.emptyStubData},groupCode(){return this.currentGroup.id},title(){return this.emptyStubData.title},description(){return this.emptyStubData.description}},methods:{async sendAnalytics(){try{const{sendData:e}=await b.Runtime.loadExtension("ui.analytics");const t={event:"open_list",status:"success",tool:"ai",category:"roles_saving",c_section:"roles_picker"};e(t)}catch(e){console.error("AI: RolesDialog: Can't send analytics",e)}},openRolesLibrary(){if(!b.Extension.getSettings("ai.roles-dialog").get("isLibraryVisible")){n.UI.Notification.Center.notify({content:b.Loc.getMessage("AI_COPILOT_ROLES_LIBRARY_COLLABER_ACCESS_DENIED")});return}if(BX.SidePanel){this.sendAnalytics();BX.SidePanel.Instance.open("/bitrix/components/bitrix/ai.role.library.grid/slider.php",{cacheable:false,events:{onCloseStart:()=>{b.Event.EventEmitter.emit("update")}}})}else{window.location.href="/bitrix/components/bitrix/ai.prompt.library.grid/slider.php"}}},template:`\n\t\t\t<div class="ai__roles-dialog_empty-group-stub">\n\t\t\t\t<div class="ai__roles-dialog_empty-group-stub-content">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ai__roles-dialog_empty-group-stub-image"\n\t\t\t\t\t\t:class="'--' + groupCode"\n\t\t\t\t\t></div>\n\t\t\t\t\t<h3 class="ai__roles-dialog_empty-group-stub-title">\n\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t</h3>\n\t\t\t\t\t<div v-if="groupCode !== 'customs'" class="ai__roles-dialog_empty-group-stub-text">\n\t\t\t\t\t\t{{ description }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-else class="ai__roles-dialog_empty-group-stub-text">\n\t\t\t\t\t\t${J}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`});const ee={components:{BIcon:c.BIcon},computed:{chevronRightIconName(){return d.Actions.CHEVRON_RIGHT},rolesLibraryIconName(){return d.Main.ROLES_LIBRARY}},methods:{async sendAnalytics(){try{const{sendData:e}=await b.Runtime.loadExtension("ui.analytics");const t={event:"open_list",status:"success",tool:"ai",category:"roles_saving",c_section:"roles_picker"};e(t)}catch(e){console.error("AI: RolesDialog: Can't send analytics",e)}},handleClick(){if(BX.SidePanel){this.sendAnalytics();BX.SidePanel.Instance.open("/bitrix/components/bitrix/ai.role.library.grid/slider.php",{cacheable:false,events:{onCloseStart:()=>{b.Event.EventEmitter.emit("update")}}})}else{window.location.href="/bitrix/components/bitrix/ai.prompt.library.grid/slider.php"}}},template:`\n\t\t<div @click="handleClick" class="ai__roles-dialog_roles-library-wrapper">\n\t\t\t<div class="ai__roles-dialog_roles-library">\n\t\t\t\t<div class="ai__roles-dialog_roles-library-inner">\n\t\t\t\t<div class="ai__roles-dialog_roles-library-title-wrapper">\n\t\t\t\t\t<b-icon :size="32" :name="rolesLibraryIconName"></b-icon>\n\t\t\t\t\t<span class="ai__roles-dialog_roles-library-title">\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('AI_COPILOT_ROLES_LIBRARY_TITLE') }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<div class="ai__roles-dialog_roles-library-label-new">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\t<b-icon :size="16" :name="chevronRightIconName"></b-icon>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`};const te={HIDE:"hide",SELECT_ROLE:"select-role"};const se="recommended";const ae="recents";const ie="favorites";const le="customs";var oe=babelHelpers.classPrivateFieldLooseKey("entityCatalog");var re=babelHelpers.classPrivateFieldLooseKey("engine");var ne=babelHelpers.classPrivateFieldLooseKey("analytic");var ce=babelHelpers.classPrivateFieldLooseKey("roles");var de=babelHelpers.classPrivateFieldLooseKey("recentRoles");var be=babelHelpers.classPrivateFieldLooseKey("favouriteRoles");var pe=babelHelpers.classPrivateFieldLooseKey("customRoles");var ve=babelHelpers.classPrivateFieldLooseKey("defaultRoleCode");var ue=babelHelpers.classPrivateFieldLooseKey("industries");var he=babelHelpers.classPrivateFieldLooseKey("selectedDefaultRoleHandler");var Le=babelHelpers.classPrivateFieldLooseKey("reloadDialogHandler");var _e=babelHelpers.classPrivateFieldLooseKey("selectedRoleCode");var Pe=babelHelpers.classPrivateFieldLooseKey("universalRole");var ge=babelHelpers.classPrivateFieldLooseKey("title");var me=babelHelpers.classPrivateFieldLooseKey("moduleId");var Fe=babelHelpers.classPrivateFieldLooseKey("contextId");var He=babelHelpers.classPrivateFieldLooseKey("rolesLibraryAvailable");var Oe=babelHelpers.classPrivateFieldLooseKey("validateOptions");var fe=babelHelpers.classPrivateFieldLooseKey("showAfterInit");var Ie=babelHelpers.classPrivateFieldLooseKey("subscribeEvents");var Re=babelHelpers.classPrivateFieldLooseKey("reloadDialog");var ye=babelHelpers.classPrivateFieldLooseKey("unsubscribeEvents");var Be=babelHelpers.classPrivateFieldLooseKey("selectRole");var Ee=babelHelpers.classPrivateFieldLooseKey("selectDefaultRole");var Se=babelHelpers.classPrivateFieldLooseKey("init");var Te=babelHelpers.classPrivateFieldLooseKey("initEntityCatalog");var Ce=babelHelpers.classPrivateFieldLooseKey("getSlots");var De=babelHelpers.classPrivateFieldLooseKey("getInfoItemData");var Ae=babelHelpers.classPrivateFieldLooseKey("getAllIndustryCodesWithExcludes");var we=babelHelpers.classPrivateFieldLooseKey("loadData");var Ne=babelHelpers.classPrivateFieldLooseKey("getRecommendedRoleIndustry");var xe=babelHelpers.classPrivateFieldLooseKey("getRecentRoleIndustry");var Me=babelHelpers.classPrivateFieldLooseKey("getFavouriteRoleIndustry");var Ke=babelHelpers.classPrivateFieldLooseKey("getCustomRoleIndustry");var je=babelHelpers.classPrivateFieldLooseKey("getItemsData");var Ue=babelHelpers.classPrivateFieldLooseKey("getUniversalRoleItemData");var Ge=babelHelpers.classPrivateFieldLooseKey("getItemGroupsFromIndustries");var ke=babelHelpers.classPrivateFieldLooseKey("getItemGroupDataFromIndustry");var ze=babelHelpers.classPrivateFieldLooseKey("getRecentItemGroupData");var Ve=babelHelpers.classPrivateFieldLooseKey("compareRecentItems");var $e=babelHelpers.classPrivateFieldLooseKey("getFavouriteItemGroupData");var Xe=babelHelpers.classPrivateFieldLooseKey("getCustomItemGroupData");var We=babelHelpers.classPrivateFieldLooseKey("compareFavouriteItems");var qe=babelHelpers.classPrivateFieldLooseKey("getItemDataFromRole");var Qe=babelHelpers.classPrivateFieldLooseKey("getSelectedGroupIndex");var Ye=babelHelpers.classPrivateFieldLooseKey("isSelectedIndustry");var Je=babelHelpers.classPrivateFieldLooseKey("isRoleInFavouriteList");var Ze=babelHelpers.classPrivateFieldLooseKey("toggleRoleFavourite");var et=babelHelpers.classPrivateFieldLooseKey("addRoleToFavouriteList");var tt=babelHelpers.classPrivateFieldLooseKey("removeRoleFromFavouriteList");class st extends o.EventEmitter{constructor(e){super(e);Object.defineProperty(this,tt,{value:wt});Object.defineProperty(this,et,{value:At});Object.defineProperty(this,Ze,{value:Dt});Object.defineProperty(this,Je,{value:Ct});Object.defineProperty(this,Ye,{value:Tt});Object.defineProperty(this,Qe,{value:St});Object.defineProperty(this,qe,{value:Et});Object.defineProperty(this,We,{value:Bt});Object.defineProperty(this,Xe,{value:yt});Object.defineProperty(this,$e,{value:Rt});Object.defineProperty(this,Ve,{value:It});Object.defineProperty(this,ze,{value:ft});Object.defineProperty(this,ke,{value:Ot});Object.defineProperty(this,Ge,{value:Ht});Object.defineProperty(this,Ue,{value:Ft});Object.defineProperty(this,je,{value:mt});Object.defineProperty(this,Ke,{value:gt});Object.defineProperty(this,Me,{value:Pt});Object.defineProperty(this,xe,{value:_t});Object.defineProperty(this,Ne,{value:Lt});Object.defineProperty(this,we,{value:ht});Object.defineProperty(this,Ae,{value:ut});Object.defineProperty(this,De,{value:vt});Object.defineProperty(this,Ce,{value:pt});Object.defineProperty(this,Te,{value:bt});Object.defineProperty(this,Se,{value:dt});Object.defineProperty(this,Ee,{value:ct});Object.defineProperty(this,Be,{value:nt});Object.defineProperty(this,ye,{value:rt});Object.defineProperty(this,Re,{value:ot});Object.defineProperty(this,Ie,{value:lt});Object.defineProperty(this,fe,{value:it});Object.defineProperty(this,Oe,{value:at});Object.defineProperty(this,oe,{writable:true,value:void 0});Object.defineProperty(this,re,{writable:true,value:void 0});Object.defineProperty(this,ne,{writable:true,value:void 0});Object.defineProperty(this,ce,{writable:true,value:void 0});Object.defineProperty(this,de,{writable:true,value:void 0});Object.defineProperty(this,be,{writable:true,value:void 0});Object.defineProperty(this,pe,{writable:true,value:void 0});Object.defineProperty(this,ve,{writable:true,value:void 0});Object.defineProperty(this,ue,{writable:true,value:void 0});Object.defineProperty(this,he,{writable:true,value:void 0});Object.defineProperty(this,Le,{writable:true,value:void 0});Object.defineProperty(this,_e,{writable:true,value:void 0});Object.defineProperty(this,Pe,{writable:true,value:void 0});Object.defineProperty(this,ge,{writable:true,value:void 0});Object.defineProperty(this,me,{writable:true,value:void 0});Object.defineProperty(this,Fe,{writable:true,value:void 0});Object.defineProperty(this,He,{writable:true,value:void 0});this.setEventNamespace("AI.RolesDialog");babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe](e);babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]=e.title||"";if(e.engine){babelHelpers.classPrivateFieldLooseBase(this,re)[re]=e.engine}else{babelHelpers.classPrivateFieldLooseBase(this,re)[re]=new t.Engine({})}babelHelpers.classPrivateFieldLooseBase(this,me)[me]=e.moduleId;babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe]=e.contextId;babelHelpers.classPrivateFieldLooseBase(this,re)[re].setModuleId(e.moduleId);babelHelpers.classPrivateFieldLooseBase(this,re)[re].setContextId(e.contextId);babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]=b.Type.isString(e.selectedRoleCode)?e.selectedRoleCode:"";babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]=new w({cSection:`${babelHelpers.classPrivateFieldLooseBase(this,me)[me]}_${babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe]}`});babelHelpers.classPrivateFieldLooseBase(this,He)[He]=b.Extension.getSettings("ai.roles-dialog").get("isLibraryVisible")}setSelectedRoleCode(e){babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]=e;if(babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]){babelHelpers.classPrivateFieldLooseBase(this,oe)[oe].setGroups(babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge]());babelHelpers.classPrivateFieldLooseBase(this,oe)[oe].setItems(babelHelpers.classPrivateFieldLooseBase(this,je)[je]())}}async show(){if(babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]){babelHelpers.classPrivateFieldLooseBase(this,oe)[oe].show();babelHelpers.classPrivateFieldLooseBase(this,ne)[ne].sendOpenLabel(true,babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]);return}await babelHelpers.classPrivateFieldLooseBase(this,fe)[fe]()}hide(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,oe)[oe])==null?void 0:e.close()}}function at(e){if(b.Type.isStringFilled(e.moduleId)===false){throw new b.BaseError("AI.RolesDialog: moduleId is required option and must be string")}if(b.Type.isStringFilled(e.contextId)===false){throw new b.BaseError("AI.RolesDialog: contextId is required option and must be string")}if(e.selectedRoleCode!==undefined&&b.Type.isString(e.selectedRoleCode)===false){throw new b.BaseError("AI.RolesDialog: selectedRoleCode must be string")}if(e.title&&b.Type.isString(e.title)===false){throw new b.BaseError("AI.RolesDialog: title must be string")}if(e.engine&&!(e.engine instanceof t.Engine)){throw new b.BaseError("AI.RolesDialog: engine option must be instance of Engine")}}async function it(){const e=new g;let t=true;setTimeout((()=>{if(t){e.show()}}),300);try{await babelHelpers.classPrivateFieldLooseBase(this,Se)[Se]();babelHelpers.classPrivateFieldLooseBase(this,ne)[ne].sendOpenLabel(true,babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]);babelHelpers.classPrivateFieldLooseBase(this,oe)[oe].show()}catch(e){I();babelHelpers.classPrivateFieldLooseBase(this,ne)[ne].sendOpenLabel(false,babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]);console.error(e)}finally{t=false;e.hide()}}function lt(){babelHelpers.classPrivateFieldLooseBase(this,he)[he]=babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee].bind(this);o.EventEmitter.subscribe(document,j.CHOOSE_STANDARD_ROLE,babelHelpers.classPrivateFieldLooseBase(this,he)[he]);o.EventEmitter.subscribe(document,q.CHOOSE_STANDARD_ROLE,babelHelpers.classPrivateFieldLooseBase(this,he)[he]);babelHelpers.classPrivateFieldLooseBase(this,Le)[Le]=babelHelpers.classPrivateFieldLooseBase(this,Re)[Re].bind(this);o.EventEmitter.subscribe("update",babelHelpers.classPrivateFieldLooseBase(this,Le)[Le])}async function ot(){const e=new g;let t=true;setTimeout((()=>{if(t){e.show()}}),300);try{babelHelpers.classPrivateFieldLooseBase(this,oe)[oe].setItems([]);babelHelpers.classPrivateFieldLooseBase(this,oe)[oe].setGroups([]);await babelHelpers.classPrivateFieldLooseBase(this,we)[we]()}catch(e){I();console.error(e)}finally{t=false;e.hide();babelHelpers.classPrivateFieldLooseBase(this,oe)[oe].setItems(babelHelpers.classPrivateFieldLooseBase(this,je)[je]());babelHelpers.classPrivateFieldLooseBase(this,oe)[oe].setGroups(babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge]());o.EventEmitter.emit("update-complete")}}function rt(){o.EventEmitter.unsubscribe(document,j.CHOOSE_STANDARD_ROLE,babelHelpers.classPrivateFieldLooseBase(this,he)[he]);o.EventEmitter.unsubscribe(document,q.CHOOSE_STANDARD_ROLE,babelHelpers.classPrivateFieldLooseBase(this,he)[he]);o.EventEmitter.unsubscribe("update",babelHelpers.classPrivateFieldLooseBase(this,Le)[Le])}function nt(e){const t=new o.BaseEvent({data:{role:e}});this.setSelectedRoleCode(e.code);babelHelpers.classPrivateFieldLooseBase(this,ne)[ne].sendSelectLabel(babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]);this.emit(te.SELECT_ROLE,t)}function ct(){this.setSelectedRoleCode(babelHelpers.classPrivateFieldLooseBase(this,ve)[ve]);const e=new o.BaseEvent({data:{role:babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe]}});this.emit(te.SELECT_ROLE,e);babelHelpers.classPrivateFieldLooseBase(this,oe)[oe].close()}async function dt(){await babelHelpers.classPrivateFieldLooseBase(this,we)[we]();await babelHelpers.classPrivateFieldLooseBase(this,Te)[Te]()}async function bt(){const{EntityCatalog:e,States:t}=await b.Runtime.loadExtension("ui.entity-catalog");babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]=new e({title:babelHelpers.classPrivateFieldLooseBase(this,ge)[ge],showSearch:true,showEmptyGroups:true,customComponents:{RolesDialogContentHeader:z(t,babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]),RolesDialogRoleItem:X(t),RolesDialogGroupListHeader:k,RolesDialogGroupItem:W,RolesDialogGroupListFooter:U,RolesDialogSearchStub:Y,RolesDialogEmptyGroupStub:Z(t),RolesDialogRolesLibrary:ee},popupOptions:{className:"ai_roles-dialog_popup ui-entity-catalog__scope",resizable:false,width:852,height:510,animation:true,events:{onPopupShow:()=>{babelHelpers.classPrivateFieldLooseBase(this,Ie)[Ie]()},onPopupClose:()=>{this.emit(te.HIDE);babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]();babelHelpers.classPrivateFieldLooseBase(this,ne)[ne].sendCloseLabel(babelHelpers.classPrivateFieldLooseBase(this,_e)[_e])}}},slots:babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce](e),groups:babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge](),items:babelHelpers.classPrivateFieldLooseBase(this,je)[je]()})}function pt(e){const t={[e.SLOT_MAIN_CONTENT_HEADER]:"<RolesDialogContentHeader />",[e.SLOT_MAIN_CONTENT_ITEM]:'<RolesDialogRoleItem :itemData="itemSlotProps" />',[e.SLOT_GROUP]:'<RolesDialogGroupItem :groupData="groupSlotProps" />',[e.SLOT_GROUP_LIST_HEADER]:"<RolesDialogGroupListHeader />",[e.SLOT_MAIN_CONTENT_EMPTY_GROUP_STUB]:"<RolesDialogEmptyGroupStub />"};if(e.SLOT_MAIN_CONTENT_SEARCH_STUB){t[e.SLOT_MAIN_CONTENT_NO_SELECTED_GROUP_STUB]="<RolesDialogSearchStub />";t[e.SLOT_MAIN_CONTENT_SEARCH_STUB]="<RolesDialogSearchStub />"}if(babelHelpers.classPrivateFieldLooseBase(this,He)[He]){t[e.SLOT_GROUP_LIST_FOOTER]="<RolesDialogRolesLibrary />"}return t}function vt(){return{id:"info-item-data",title:b.Loc.getMessage("AI_COPILOT_ROLES_HELP_ITEM_TITLE"),subtitle:b.Loc.getMessage("AI_COPILOT_ROLES_HELP_ITEM_DESCRIPTION"),groupIds:babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae]([ie,le]),customData:{isInfoItem:true},button:{action:async()=>{await b.Runtime.loadExtension("ui.feedback.form");const e=Math.round(Math.random()*1e3);BX.UI.Feedback.Form.open({id:`ai.roles-dialog.feedback-form_${e}`,presets:{sender_page:`${babelHelpers.classPrivateFieldLooseBase(this,me)[me]}_${babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe]}`},forms:[{zones:["es"],id:738,lang:"es",sec:"77ui4p"},{zones:["en"],id:740,lang:"en",sec:"obza3e"},{zones:["de"],id:742,lang:"de",sec:"vqqxgr"},{zones:["com.br"],id:744,lang:"com.br",sec:"nz3zig"},{zones:["ru","by","kz"],id:746,lang:"ru",sec:"we50kv"}]});babelHelpers.classPrivateFieldLooseBase(this,ne)[ne].sendFeedBackLabel()}}}}function ut(e){const t=new Set(e);return babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].map((e=>e.code)).filter((e=>t.has(e)===false))}async function ht(){const e=await babelHelpers.classPrivateFieldLooseBase(this,re)[re].getRolesDialogData();babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe]=e.data.universalRole;babelHelpers.classPrivateFieldLooseBase(this,ve)[ve]=babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe].code;babelHelpers.classPrivateFieldLooseBase(this,ue)[ue]=e.data.items.map((e=>{const{code:t,name:s,isNew:a}=e;return{code:t,name:s,isNew:a}}));babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].unshift(babelHelpers.classPrivateFieldLooseBase(this,xe)[xe](),babelHelpers.classPrivateFieldLooseBase(this,Me)[Me](),babelHelpers.classPrivateFieldLooseBase(this,Ke)[Ke](),babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne]());babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]=e.data.items.reduce(((e,t)=>{const s=t.roles;return[...e,...s]}),[]);babelHelpers.classPrivateFieldLooseBase(this,de)[de]=e.data.recents;babelHelpers.classPrivateFieldLooseBase(this,be)[be]=e.data.favorites;babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]=e.data.customs;babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]=[...babelHelpers.classPrivateFieldLooseBase(this,ce)[ce],...babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]];babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]=babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]||null}function Lt(){return{code:se,name:b.Loc.getMessage("AI_COPILOT_ROLES_RECOMMENDED_GROUP")}}function _t(){return{code:ae,name:b.Loc.getMessage("AI_COPILOT_ROLES_RECENT_GROUP")}}function Pt(){return{code:ie,name:b.Loc.getMessage("AI_COPILOT_ROLES_FAVOURITE_GROUP")}}function gt(){return{code:le,name:b.Loc.getMessage("AI_COPILOT_ROLES_CUSTOM_GROUP")}}function mt(){let e=null;const t=babelHelpers.classPrivateFieldLooseBase(this,ce)[ce].map((t=>{const s=[t.industryCode];if(t.isRecommended){s.push(se)}if(babelHelpers.classPrivateFieldLooseBase(this,de)[de].findIndex((e=>e.code===t.code))>-1){s.push(ae)}if(babelHelpers.classPrivateFieldLooseBase(this,be)[be].findIndex((e=>e.code===t.code))>-1){s.push(ie)}if(babelHelpers.classPrivateFieldLooseBase(this,pe)[pe].findIndex((e=>e.code===t.code))>-1){s.push(le)}if(t.code===babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]){e=babelHelpers.classPrivateFieldLooseBase(this,qe)[qe](t,s);return null}return babelHelpers.classPrivateFieldLooseBase(this,qe)[qe](t,s)})).filter((e=>e));const s=t.sort((e=>e.customData.isNew?-1:1));const a=babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue]();return[a,e,...s,babelHelpers.classPrivateFieldLooseBase(this,De)[De]()].filter((e=>e))}function Ft(){const e=babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe];const t=[...babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae]([ie,le])];return babelHelpers.classPrivateFieldLooseBase(this,qe)[qe](e,t)}function Ht(){const e=babelHelpers.classPrivateFieldLooseBase(this,Qe)[Qe]();const t=babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].map(((t,s)=>{const a=s===e;if(t.code===ae){return babelHelpers.classPrivateFieldLooseBase(this,ze)[ze](a)}if(t.code===ie){return babelHelpers.classPrivateFieldLooseBase(this,$e)[$e](a)}if(t.code===le){return babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe](a)}return babelHelpers.classPrivateFieldLooseBase(this,ke)[ke](t,a)}));return[[...t]]}function Ot(e,t=false){return{id:e.code,name:e.name,selected:t,customData:{isNew:e.isNew}}}function ft(e=false){return{...babelHelpers.classPrivateFieldLooseBase(this,ke)[ke](babelHelpers.classPrivateFieldLooseBase(this,xe)[xe](),e),compare:(e,t)=>babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve](e,t)}}function It(e,t){const s=babelHelpers.classPrivateFieldLooseBase(this,de)[de].findIndex((t=>e.id===t.code))+1;const a=babelHelpers.classPrivateFieldLooseBase(this,de)[de].findIndex((e=>t.id===e.code))+1;if(e.id===babelHelpers.classPrivateFieldLooseBase(this,De)[De]().id){return 1}return s-a}function Rt(e=false){return{...babelHelpers.classPrivateFieldLooseBase(this,ke)[ke](babelHelpers.classPrivateFieldLooseBase(this,Me)[Me](),e),compare:(e,t)=>babelHelpers.classPrivateFieldLooseBase(this,We)[We](e,t),customData:{emptyStubData:{title:b.Loc.getMessage("AI_COPILOT_ROLES_EMPTY_FAVOURITE_GROUP_TITLE"),description:b.Loc.getMessage("AI_COPILOT_ROLES_EMPTY_FAVOURITE_GROUP")}}}}function yt(e=false){return{...babelHelpers.classPrivateFieldLooseBase(this,ke)[ke](babelHelpers.classPrivateFieldLooseBase(this,Ke)[Ke](),e),customData:{emptyStubData:{title:b.Loc.getMessage("AI_COPILOT_ROLES_EMPTY_CUSTOM_GROUP_TITLE")}}}}function Bt(e,t){const s=babelHelpers.classPrivateFieldLooseBase(this,be)[be].findIndex((t=>e.id===t.code))+1;const a=babelHelpers.classPrivateFieldLooseBase(this,be)[be].findIndex((e=>t.id===e.code))+1;return s-a}function Et(e,t=[]){const s=babelHelpers.classPrivateFieldLooseBase(this,Je)[Je](e.code);return{groupIds:t,id:e.code,name:e.name,title:e.name,subtitle:e.description,description:e.description,button:{text:b.Loc.getMessage("AI_COPILOT_ROLES_USE_ROLE_BTN"),action:()=>{babelHelpers.classPrivateFieldLooseBase(this,Be)[Be](e);babelHelpers.classPrivateFieldLooseBase(this,oe)[oe].close()}},customData:{selected:e.code===babelHelpers.classPrivateFieldLooseBase(this,_e)[_e],avatar:e.avatar.medium,isNew:e.isNew,isFavourite:s,canBeFavourite:e.code!==babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe].code,actions:{toggleFavourite:t=>{const s=e.code;return babelHelpers.classPrivateFieldLooseBase(this,Ze)[Ze](s,t)}}}}}function St(){const e=babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].findIndex((e=>babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye](e)));return e>-1?e:0}function Tt(e){const t=babelHelpers.classPrivateFieldLooseBase(this,je)[je]();const s=t.find((e=>e.id===babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]));return(s==null?void 0:s.groupIds.includes(e.code))||false}function Ct(e){return babelHelpers.classPrivateFieldLooseBase(this,be)[be].some((t=>t.code===e))}async function Dt(e,t){const s=e===babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe].code?babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe]:babelHelpers.classPrivateFieldLooseBase(this,ce)[ce].find((t=>t.code===e));if(!s&&e!==babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe].code){const e=t?b.Loc.getMessage("AI_COPILOT_ROLES_ADD_TO_FAVOURITE_ACTION_FAILED"):b.Loc.getMessage("AI_COPILOT_ROLES_REMOVE_FROM_FAVOURITE_ACTION_FAILED");n.UI.Notification.Center.notify({content:e});return Promise.reject()}if(t){return babelHelpers.classPrivateFieldLooseBase(this,et)[et](s.code,s.name)}return babelHelpers.classPrivateFieldLooseBase(this,tt)[tt](s.code,s.name)}async function At(e,t){return babelHelpers.classPrivateFieldLooseBase(this,re)[re].addRoleToFavouriteList(e).then((e=>{babelHelpers.classPrivateFieldLooseBase(this,be)[be]=e.data.items;babelHelpers.classPrivateFieldLooseBase(this,oe)[oe].setItems(babelHelpers.classPrivateFieldLooseBase(this,je)[je]());babelHelpers.classPrivateFieldLooseBase(this,oe)[oe].setGroups(babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge]());n.UI.Notification.Center.notify({content:b.Loc.getMessage("AI_COPILOT_ROLES_ADD_TO_FAVOURITE_NOTIFICATION_SUCCESS",{"#ROLE#":b.Text.encode(t)})})})).catch((e=>{console.error(e);n.UI.Notification.Center.notify({content:b.Loc.getMessage("AI_COPILOT_ROLES_ADD_TO_FAVOURITE_ACTION_FAILED")})}))}async function wt(e,t){return babelHelpers.classPrivateFieldLooseBase(this,re)[re].removeRoleFromFavouriteList(e).then((e=>{babelHelpers.classPrivateFieldLooseBase(this,be)[be]=e.data.items;babelHelpers.classPrivateFieldLooseBase(this,oe)[oe].setItems(babelHelpers.classPrivateFieldLooseBase(this,je)[je]());babelHelpers.classPrivateFieldLooseBase(this,oe)[oe].setGroups(babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge]());n.UI.Notification.Center.notify({content:b.Loc.getMessage("AI_COPILOT_ROLES_REMOVE_FROM_FAVOURITE_NOTIFICATION_SUCCESS",{"#ROLE#":b.Text.encode(t)})})})).catch((e=>{console.error(e);n.UI.Notification.Center.notify({content:b.Loc.getMessage("AI_COPILOT_ROLES_REMOVE_FROM_FAVOURITE_ACTION_FAILED")})}))}e.RolesDialogEvents=te;e.RolesDialog=st})(this.BX.AI=this.BX.AI||{},BX.AI,BX.Main,BX.Vue3.Components,BX.UI,BX,BX.Event,BX.Vue3.Pinia,BX,BX.UI.IconSet,BX.UI.IconSet,BX);
//# sourceMappingURL=roles-dialog.bundle.map.js