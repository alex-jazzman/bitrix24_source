(function(e,t,n,r){"use strict";function a(e,t){var n=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&typeof e.length==="number"){if(n)e=n;var r=0;var a=function e(){};return{s:a,n:function t(){if(r>=e.length)return{done:true};return{done:false,value:e[r++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=true,l=false,s;return{s:function t(){n=n.call(e)},n:function e(){var t=n.next();o=t.done;return t},e:function e(t){l=true;s=t},f:function e(){try{if(!o&&n["return"]!=null)n["return"]()}finally{if(l)throw s}}}}function i(e,t){if(!e)return;if(typeof e==="string")return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}function o(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){c(e,t);t.add(e)}function s(e,t,n){c(e,t);t.set(e,n)}function c(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function u(e,t,n){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return n}var f=new WeakMap;var E=new WeakSet;var d=new WeakSet;var v=new WeakSet;var h=function(){function e(t){var n;babelHelpers.classCallCheck(this,e);l(this,v);l(this,d);l(this,E);s(this,f,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,f,(n=BX.Main.gridManager.getById(t.gridId))===null||n===void 0?void 0:n.instance);u(this,E,b).call(this);u(this,d,g).call(this)}babelHelpers.createClass(e,[{key:"deleteElement",value:function e(n){var a=this;var i=t.Loc.getMessage("BI_UNUSED_ELEMENTS_POPUP_DELETE_TITLE_SINGLE");var o=t.Loc.getMessage("BI_UNUSED_ELEMENTS_POPUP_DELETE_TEXT_SINGLE");if(n.length>1){i=t.Loc.getMessage("BI_UNUSED_ELEMENTS_POPUP_DELETE_TITLE");o=t.Loc.getMessage("BI_UNUSED_ELEMENTS_POPUP_DELETE_TEXT")}var l=new r.MessageBox({title:i,message:o,maxWidth:300,minWidth:300,buttons:[new BX.UI.Button({color:BX.UI.Button.Color.DANGER,text:t.Loc.getMessage("BI_UNUSED_ELEMENTS_POPUP_DELETE_BUTTON_YES"),onclick:function e(r){r.setWaiting();t.ajax.runComponentAction("bitrix:biconnector.unusedelements","delete",{mode:"class",data:{elements:n}}).then((function(){babelHelpers.classPrivateFieldGet(a,f).reload();l.close()}))["catch"]((function(e){l.close();if(e.errors){u(a,v,p).call(a,e.errors)}}))}}),new BX.UI.CancelButton({text:t.Loc.getMessage("BI_UNUSED_ELEMENTS_POPUP_DELETE_BUTTON_NO"),onclick:function e(){return l.close()}})]});l.show()}},{key:"openElement",value:function e(n){var r=this;babelHelpers.classPrivateFieldGet(this,f).tableFade();t.ajax.runComponentAction("bitrix:biconnector.unusedelements","getOpenUrl",{mode:"class",data:{openUrl:n}}).then((function(e){var t=e.data;if(t){window.open(t,"_blank").focus()}babelHelpers.classPrivateFieldGet(r,f).tableUnfade()}))["catch"]((function(e){if(e.errors){u(r,v,p).call(r,e.errors)}babelHelpers.classPrivateFieldGet(r,f).tableUnfade()}))}},{key:"deleteSelectedElements",value:function e(){var t=babelHelpers.classPrivateFieldGet(this,f).getRows().getSelected();var n=[];var r=a(t),i;try{for(r.s();!(i=r.n()).done;){var o=i.value;var l=o.getEditData();n.push({elementId:l.EXTERNAL_ID,elementType:l.TYPE})}}catch(e){r.e(e)}finally{r.f()}this.deleteElement(n)}}]);return e}();function b(){var e=BX.UI.Hint.createInstance({popupParameters:{autoHide:true}});e.init(babelHelpers.classPrivateFieldGet(this,f).getContainer())}function g(){var e=this;n.EventEmitter.subscribe("Grid::updated",(function(){u(e,E,b).call(e)}))}function p(e){if(e[0]&&e[0].message){BX.UI.Notification.Center.notify({content:t.Text.encode(e[0].message)})}}t.Reflection.namespace("BX.BIConnector").UnusedElementsGridManager=h})(this.window=this.window||{},BX,BX.Event,BX.UI.Dialogs);
//# sourceMappingURL=script.map.js