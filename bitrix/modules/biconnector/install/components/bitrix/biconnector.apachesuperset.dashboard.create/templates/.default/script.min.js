(function(e,t,a,s,r,i){"use strict";var l,n;function o(e,t){d(e,t);t.add(e)}function c(e,t,a){d(e,t);t.set(e,a)}function d(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function b(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var p=new WeakMap;var v=new WeakMap;var h=new WeakMap;var u=new WeakMap;var m=new WeakSet;var H=new WeakSet;var P=new WeakSet;var w=new WeakSet;var g=function(){function e(t){babelHelpers.classCallCheck(this,e);o(this,w);o(this,P);o(this,H);o(this,m);c(this,p,{writable:true,value:void 0});c(this,v,{writable:true,value:void 0});c(this,h,{writable:true,value:void 0});c(this,u,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,p,t);babelHelpers.classPrivateFieldSet(this,v,document.querySelector("#".concat(babelHelpers.classPrivateFieldGet(this,p).nodeId)));b(this,m,f).call(this);babelHelpers.classPrivateFieldSet(this,u,i.ButtonManager.createFromNode(document.querySelector("#dashboard-button-save")));if(babelHelpers.classPrivateFieldGet(this,p).canManageGroups){babelHelpers.classPrivateFieldGet(this,u).setDisabled(true)}a.EventEmitter.subscribe("BIConnector.DashboardParamsSelector:initCompleted",b(this,w,S).bind(this))}babelHelpers.createClass(e,[{key:"onClickSave",value:function e(){var a=this;var s=document.querySelector("#dashboard-title-field");var i={title:s.value};if(babelHelpers.classPrivateFieldGet(this,p).canManageGroups){var l=babelHelpers.classPrivateFieldGet(this,h).getValues();i.groups=babelHelpers.toConsumableArray(l.groups);i.scopes=babelHelpers.toConsumableArray(l.scopes);i.params=babelHelpers.toConsumableArray(l.params)}babelHelpers.classPrivateFieldGet(this,u).setWaiting(true);t.ajax.runComponentAction(babelHelpers.classPrivateFieldGet(this,p).componentName,"save",{mode:"class",signedParameters:babelHelpers.classPrivateFieldGet(this,p).signedParameters,data:{data:i}}).then((function(e){r.ApacheSupersetAnalytics.sendAnalytics("new","report_new",{type:"custom",c_element:"new_button"});parent.BX.Event.EventEmitter.emit("BIConnector.CreateForm:onDashboardCreated",{dashboard:e.data.dashboard});BX.SidePanel.Instance.getTopSlider().close()}))["catch"]((function(e){BX.UI.Notification.Center.notify({content:e.errors[0].message});babelHelpers.classPrivateFieldGet(a,u).setWaiting(false)}))}}]);return e}();function f(){t.Dom.append(b(this,P,G).call(this),babelHelpers.classPrivateFieldGet(this,v));t.Dom.append(b(this,H,F).call(this),babelHelpers.classPrivateFieldGet(this,v));if(babelHelpers.classPrivateFieldGet(this,p).canManageGroups){babelHelpers.classPrivateFieldSet(this,h,new s.DashboardParametersSelector({groups:new Set,scopes:new Set,params:new Set,scopeParamsMap:babelHelpers.classPrivateFieldGet(this,p).scopeParamsMap}));t.Dom.append(babelHelpers.classPrivateFieldGet(this,h).getLayout(),babelHelpers.classPrivateFieldGet(this,v))}}function F(){return t.Tag.render(l||(l=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div>\n\t\t\t\t<div class="dashboard-params-title-container">\n\t\t\t\t\t<div class="dashboard-params-title">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="ui-ctl ui-ctl-textbox ui-ctl-w100 dashboard-title-wrapper">\n\t\t\t\t\t<input type="text" class="ui-ctl-element" id="dashboard-title-field" value="','">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'])),t.Loc.getMessage("DASHBOARD_CREATE_NAME"),babelHelpers.classPrivateFieldGet(this,p).defaultValues.title)}function G(){return t.Tag.render(n||(n=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="dashboard-create-top-block">\n\t\t\t\t<div class="dashboard-create-top-block-image"></div>\n\t\t\t\t<div class="dashboard-create-top-block-text">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),t.Loc.getMessage("DASHBOARD_CREATE_TOP_BLOCK"))}function S(){babelHelpers.classPrivateFieldGet(this,h).selectGroups(babelHelpers.classPrivateFieldGet(this,p).groupIds);babelHelpers.classPrivateFieldGet(this,u).setDisabled(false)}t.Reflection.namespace("BX.BIConnector").SupersetDashboardCreateManager=g})(this.window=this.window||{},BX,BX.Event,BX.BIConnector,BX.BIConnector,BX.UI);
//# sourceMappingURL=script.map.js