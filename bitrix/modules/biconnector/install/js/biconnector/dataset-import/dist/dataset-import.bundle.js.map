{"version":3,"file":"dataset-import.bundle.js","sources":["../src/layout/app-layout.js","../src/layout/import-config.js","../src/layout/popup.js","../src/popups/file-checking/file-errors-popup.js","../src/popups/file-checking/checking-progress-popup.js","../src/popups/file-checking/checking-success-popup.js","../src/popups/file-checking/checking-failed-popup.js","../src/popups/generic-popup.js","../src/popups/saving/saving-popup.js","../src/popups/saving/import-failure-popup.js","../src/popups/saving/import-progress-popup.js","../src/popups/saving/import-success-popup.js","../src/layout/step-hint.js","../src/layout/step-block.js","../src/steps/base-step.js","../src/layout/error-popup.js","../src/fields/type/base-field.js","../src/fields/type/string-field.js","../src/fields/type/text-field.js","../src/fields/dataset-properties.js","../src/steps/dataset-properties.js","../src/steps/data-type/table-header.js","../src/types/data-types.js","../src/steps/data-type/data-type-menu.js","../src/steps/data-type/data-type-selector.js","../src/steps/data-type/table-row.js","../src/steps/data-type/format-table.js","../src/steps/data-type/sync-fields-button.js","../src/steps/fields-settings.js","../src/steps/data-type/format-selector.js","../src/steps/data-type/slider-button.js","../src/fields/type/switcher-field.js","../src/fields/type/custom-field.js","../src/fields/type/dropdown-field.js","../src/fields/file/file-uploader.js","../src/steps/file.js","../src/layout/app-section.js","../src/steps/import-preview/table-header.js","../src/steps/import-preview/table-row.js","../src/steps/import-preview/preview-table.js","../src/steps/import-preview.js","../src/app/base-app.js","../src/app/csv-app.js","../src/popups/sync/sync-fields-popup.js","../src/fields/type/connection-selector-field.js","../src/fields/type/table-selector-field.js","../src/steps/connection.js","../src/app/external-connection-app.js","../src/app/store.js","../src/app/app-factory.js","../src/app/slider.js"],"sourcesContent":["import 'ui.pinner';\n\nimport '../css/app-layout.css';\nimport { Dom } from 'main.core';\n\nexport const AppLayout = {\n\tprops: {\n\t\tsaveLocked: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t\tisEditMode: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tsaveButtonClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-btn-base-light': this.saveLocked,\n\t\t\t\t'app-root__button--blocked': this.saveLocked,\n\t\t\t\t'ui-btn-success': !this.saveLocked,\n\t\t\t};\n\t\t},\n\t\tsaveButtonText()\n\t\t{\n\t\t\treturn this.isEditMode\n\t\t\t\t? this.$Bitrix.Loc.getMessage('DATASET_IMPORT_SAVE')\n\t\t\t\t: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_CREATE');\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tDom.addClass(document.querySelector('body'), 'app-body');\n\n\t\tconst buttonsPanel = this.$refs.buttonsPanel;\n\t\tif (buttonsPanel)\n\t\t{\n\t\t\tthis.$root.$el.parentNode.appendChild(buttonsPanel);\n\t\t\tnew BX.UI.Pinner(\n\t\t\t\tbuttonsPanel,\n\t\t\t\t{\n\t\t\t\t\tfixBottom: true,\n\t\t\t\t\tfullWidth: true,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t},\n\tmethods: {\n\t\tonCreateButtonClick()\n\t\t{\n\t\t\tthis.$Bitrix.eventEmitter.emit('biconnector:dataset-import:createButtonClick', {});\n\t\t},\n\t\tonCancelButtonClick()\n\t\t{\n\t\t\tthis.$Bitrix.eventEmitter.emit('biconnector:dataset-import:cancelButtonClick', {});\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"app\">\n\t\t\t<div class=\"app__block app__block--narrow\">\n\t\t\t\t<slot name=\"left-panel\"></slot>\n\t\t\t</div>\n\t\t\t<div class=\"app__block\">\n\t\t\t\t<slot name=\"right-panel\"></slot>\n\t\t\t</div>\n\t\n\t\t\t<div class=\"ui-button-panel-wrapper\" ref=\"buttonsPanel\">\n\t\t\t\t<div class=\"ui-button-panel\">\n\t\t\t\t\t<div class=\"app-root__button-wrapper\" :class=\"saveLocked ? 'app-root__button-wrapper--blocked' : ''\">\n\t\t\t\t\t\t<button class=\"ui-btn ui-btn-md app-root__button\" :class=\"saveButtonClass\" @click=\"onCreateButtonClick\" ref=\"saveButton\">\n\t\t\t\t\t\t\t{{ saveButtonText }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-link app-root__button\" @click=\"onCancelButtonClick\">\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_CANCEL') }}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import '../css/import-config.css';\n\nexport const ImportConfig = {\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"import-config\">\n\t\t\t<slot></slot>\n\t\t</div>\n\t`,\n};\n","import { Popup as MainPopup, PopupManager } from 'main.popup';\nimport '../css/popup.css';\n\nexport const Popup = {\n\temits: ['close'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\toptions: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: {},\n\t\t},\n\t\twrapperClass: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tpopupInstance: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\tpopupOptions()\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: this.id,\n\t\t\t\tcontent: this.$refs.content,\n\t\t\t\tautoHide: true,\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: this.closePopup,\n\t\t\t\t\tonPopupDestroy: this.closePopup,\n\t\t\t\t},\n\t\t\t\tfixed: true,\n\t\t\t\t...this.options,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\tclosePopup()\n\t\t{\n\t\t\tPopupManager.getPopupById(this.id)?.destroy();\n\t\t\tthis.popupInstance = null;\n\t\t\tthis.$emit('close');\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tif (!this.popupInstance)\n\t\t{\n\t\t\tthis.popupInstance = new MainPopup(this.popupOptions);\n\t\t}\n\n\t\tthis.popupInstance.show();\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tthis.closePopup();\n\t},\n\ttemplate: `\n\t\t<div ref=\"content\" :class=\"wrapperClass\">\n\t\t\t<slot></slot>\n\t\t</div>\n\t`,\n};\n","import { ajax as Ajax, Dom } from 'main.core';\nimport type { PopupOptions } from 'main.popup';\nimport { Popup } from '../../layout/popup';\nimport { Button, ButtonState, ButtonSize, ButtonColor } from 'ui.buttons';\nimport '../../css/csv-errors-popup.css';\n\n// noinspection JSUnusedGlobalSymbols\nexport const FileErrorsPopup = {\n\temits: ['close', 'saveIgnoringErrors'],\n\tprops: {\n\t\terrors: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tisEditMode: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tisSavingMode: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\treportDownloadLink: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\tpopupOptions(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\twidth: 830,\n\t\t\t\tcloseIcon: false,\n\t\t\t\tnoAllPaddings: true,\n\t\t\t\toverlay: true,\n\t\t\t};\n\t\t},\n\t\ttitle(): string\n\t\t{\n\t\t\tif (!this.isSavingMode)\n\t\t\t{\n\t\t\t\tif (this.errors.length >= 200)\n\t\t\t\t{\n\t\t\t\t\treturn this.$Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_TITLE_MANY');\n\t\t\t\t}\n\n\t\t\t\treturn this.$Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_TITLE');\n\t\t\t}\n\n\t\t\tif (this.errors.length <= 200)\n\t\t\t{\n\t\t\t\treturn this.$Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_TITLE');\n\t\t\t}\n\n\t\t\treturn this.isEditMode\n\t\t\t\t? this.$Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_TITLE_STOPPED_UPDATING')\n\t\t\t\t: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_TITLE_STOPPED_CREATING')\n\t\t\t;\n\t\t},\n\t\thintContent(): string\n\t\t{\n\t\t\tif (this.errors.length > 200)\n\t\t\t{\n\t\t\t\tif (this.isEditMode)\n\t\t\t\t{\n\t\t\t\t\treturn this.prepareHintContent('DATASET_IMPORT_CSV_ERROR_POPUP_HINT_UPDATING_MANY_ERRORS');\n\t\t\t\t}\n\n\t\t\t\treturn this.prepareHintContent('DATASET_IMPORT_CSV_ERROR_POPUP_HINT_CREATION_MANY_ERRORS');\n\t\t\t}\n\n\t\t\tif (this.isSavingMode)\n\t\t\t{\n\t\t\t\tif (this.isEditMode)\n\t\t\t\t{\n\t\t\t\t\treturn this.prepareHintContent('DATASET_IMPORT_CSV_ERROR_POPUP_HINT_UPDATING');\n\t\t\t\t}\n\n\t\t\t\treturn this.prepareHintContent('DATASET_IMPORT_CSV_ERROR_POPUP_HINT_CREATION');\n\t\t\t}\n\n\t\t\treturn this.prepareHintContent('DATASET_IMPORT_CSV_ERROR_POPUP_HINT_CHECKING');\n\t\t},\n\t\terrorsCountText(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_SUMMARY')\n\t\t\t\t.replace('[wrapper]', '<span class=\"errors-counter\">')\n\t\t\t\t.replace('#COUNT#', this.errors.length > 200 ? '200+' : this.errors.length)\n\t\t\t\t.replace('[/wrapper]', '</span>')\n\t\t\t;\n\t\t},\n\t},\n\tmethods: {\n\t\tonClose()\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t},\n\t\tonIgnoreErrorsClick()\n\t\t{\n\t\t\tthis.$emit('saveIgnoringErrors');\n\t\t},\n\t\tonDownloadLogButtonClick()\n\t\t{\n\t\t\tthis.downloadLogButton.setState(ButtonState.WAITING);\n\n\t\t\tif (this.reportDownloadLink)\n\t\t\t{\n\t\t\t\tthis.downloadLogButton.setState(null);\n\t\t\t\tthis.downloadLog();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tAjax.runAction(\n\t\t\t\t'biconnector.externalsource.dataset.logErrorsIntoFile',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tfields: this.$store.state.config,\n\t\t\t\t\t\ttype: 'csv',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.downloadLogButton.setState(null);\n\t\t\t\t\tconst blob = new Blob([response.data], { type: 'text/html' });\n\t\t\t\t\tthis.reportDownloadLink = window.URL.createObjectURL(blob);\n\t\t\t\t\tthis.downloadLog();\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tthis.downloadLogButton.setState(null);\n\t\t\t\t})\n\t\t\t;\n\t\t},\n\t\tdownloadLog()\n\t\t{\n\t\t\tconst link = document.createElement('a');\n\t\t\tlink.href = this.reportDownloadLink;\n\t\t\tlink.download = 'import_errors.html';\n\t\t\tDom.append(link, document.body);\n\t\t\tlink.click();\n\t\t\tDom.remove(link);\n\t\t},\n\t\tprepareHintContent(phraseCode: string): string\n\t\t{\n\t\t\tconst message = this.$Bitrix.Loc.getMessage(phraseCode);\n\n\t\t\treturn message\n\t\t\t\t.replace('[link]', '<a onclick=\"top.BX.Helper.show(`redirect=detail&code=23779844`)\">')\n\t\t\t\t.replace('[/link]', '</a>')\n\t\t\t;\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tthis.downloadLogButton = new Button({\n\t\t\tsize: ButtonSize.EXTRA_SMALL,\n\t\t\tcolor: ButtonColor.LIGHT,\n\t\t\tnoCaps: true,\n\t\t\tonclick: this.onDownloadLogButtonClick,\n\t\t\ttext: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_DOWNLOAD_LOG'),\n\t\t\tclassName: 'popup-errors-log-button',\n\t\t});\n\t\tthis.downloadLogButton.renderTo(this.$refs.summaryBlock);\n\t},\n\tbeforeUnmount()\n\t{\n\t\twindow.URL.revokeObjectURL(this.reportDownloadLink);\n\t\tthis.reportDownloadLink = null;\n\t},\n\tcomponents: {\n\t\tPopup,\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<Popup id=\"generic\" @close=\"this.onClose\" :options=\"popupOptions\" wrapper-class=\"errors-popup\">\n\t\t\t<h3 class=\"popup-header\">{{ title }}</h3>\n\t\t\t<div class=\"ui-alert ui-alert-primary popup-hint\">\n\t\t\t\t<span v-html=\"hintContent\"></span>\n\t\t\t</div>\n\n\t\t\t<div class=\"popup-errors-summary\" ref=\"summaryBlock\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"popup-errors-count\"\n\t\t\t\t\tv-html=\"errorsCountText\"\n\t\t\t\t></div>\n\t\t\t</div>\n\n\t\t\t<div \n\t\t\t\tclass=\"popup-error-header-wrapper\"\n\t\t\t\t:style=\"errors.length >= 6 ? {'padding-right': '13px'} : {}\"\n\t\t\t>\n\t\t\t\t<table class=\"popup-error-header\">\n\t\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t<td class=\"popup-error-header-cell cell-error-number\">\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_TABLE_HEADER_ERROR_NUMBER') }}\n\t\t\t\t\t</td>\n\t\t\t\t\t<td class=\"popup-error-header-cell cell-error-message\">\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_TABLE_HEADER_ERROR_MESSAGE') }}\n\t\t\t\t\t</td>\n\t\t\t\t\t<td class=\"popup-error-header-cell cell-error-line\">\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_TABLE_HEADER_LINE') }}\n\t\t\t\t\t</td>\n\t\t\t\t\t<td class=\"popup-error-header-cell cell-error-column-name\">\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_TABLE_HEADER_COL_NAME') }}\n\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\n\t\t\t<div \n\t\t\t\tclass=\"popup-error-table-wrapper\"\n\t\t\t\t:style=\"errors.length >= 6 ? {'padding-right': '3px'} : {}\"\n\t\t\t>\n\t\t\t\t<div class=\"popup-error-table-scroll\">\n\t\t\t\t\t<table class=\"popup-error-table\">\n\t\t\t\t\t\t<tr v-for=\"(error, index) in errors\">\n\t\t\t\t\t\t\t<template v-if=\"index < 200\">\n\t\t\t\t\t\t\t\t<td class=\"popup-error-table-row-cell cell-error-number\">{{ index + 1 }}</td>\n\t\t\t\t\t\t\t\t<td class=\"popup-error-table-row-cell cell-error-message\">{{ error.errorMessage }}</td>\n\t\t\t\t\t\t\t\t<td class=\"popup-error-table-row-cell cell-error-line\">{{ error.lineNumber }}</td>\n\t\t\t\t\t\t\t\t<td class=\"popup-error-table-row-cell cell-error-column-name\" :title=\"error.columnName\">{{ error.columnName }}</td>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"popup-buttons-wrapper\">\n\t\t\t\t<template v-if=\"isSavingMode\">\n\t\t\t\t\t<template v-if=\"errors.length > 200\">\n\t\t\t\t\t\t<button @click=\"this.onClose\" class=\"ui-btn ui-btn-md ui-btn-primary\">\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_BUTTON_CLOSE') }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<button v-if=\"isEditMode\" @click=\"this.onClose\" class=\"ui-btn ui-btn-md ui-btn-primary\">\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_BUTTON_STOP_UPDATE') }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button v-else @click=\"this.onClose\" class=\"ui-btn ui-btn-md ui-btn-primary\">\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_BUTTON_STOP') }}\n\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t<button @click=\"this.onIgnoreErrorsClick\" class=\"ui-btn ui-btn-md ui-btn-light-border\">\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_BUTTON_IGNORE') }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</template>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<button @click=\"this.onClose\" class=\"ui-btn ui-btn-md ui-btn-primary\">\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_BUTTON_CLOSE') }}\n\t\t\t\t\t</button>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n","import { Loader } from 'main.loader';\nimport type { PopupOptions } from 'main.popup';\nimport { Popup } from '../../layout/popup';\nimport '../../css/file-checking-popup.css';\n\nexport const CheckingProgressPopup = {\n\temits: ['close'],\n\tprops: {},\n\tcomputed: {\n\t\tpopupOptions(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\twidth: 440,\n\t\t\t\tcloseIcon: false,\n\t\t\t\tnoAllPaddings: true,\n\t\t\t\toverlay: true,\n\t\t\t\tbackground: 'transparent',\n\t\t\t};\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tconst loader = new Loader({\n\t\t\ttarget: this.$refs.loader,\n\t\t\tsize: 65,\n\t\t\tcolor: 'var(--ui-color-primary)',\n\t\t\tstrokeWidth: 4,\n\t\t\tmode: 'inline',\n\t\t});\n\t\tloader.show();\n\t},\n\tmethods: {\n\t\tonClose()\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t},\n\t},\n\tcomponents: {\n\t\tPopup,\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<Popup\n\t\t\tid=\"file-check-progress\"\n\t\t\t@close=\"this.onClose\"\n\t\t\t:options=\"popupOptions\"\n\t\t>\n\t\t\t<div class=\"file-check file-check-progress\">\n\t\t\t\t<div ref=\"loader\" class=\"file-check-loader\"></div>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n","import type { PopupOptions } from 'main.popup';\nimport { Popup } from '../../layout/popup';\nimport '../../css/file-checking-popup.css';\n\nexport const CheckingSuccessPopup = {\n\temits: ['close'],\n\tprops: {},\n\tcomputed: {\n\t\tpopupOptions(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\twidth: 440,\n\t\t\t\tcloseIcon: true,\n\t\t\t\tnoAllPaddings: true,\n\t\t\t\toverlay: true,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\tonClose()\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t},\n\t},\n\tcomponents: {\n\t\tPopup,\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<Popup \n\t\t\tid=\"file-check-success\"\n\t\t\t@close=\"this.onClose\" \n\t\t\t:options=\"popupOptions\" \n\t\t>\n\t\t\t<div class=\"file-check file-check-success\">\n\t\t\t\t<div class=\"file-check-icon-success\"></div>\n\t\t\t\t<div class=\"file-check-title\">{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_CHECK_OK_TITLE') }}</div>\n\t\t\t\t<div class=\"file-check-subtitle\">{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_CHECK_OK_SUBTITLE') }}</div>\n\t\t\t\t<button @click=\"this.onClose\" class=\"ui-btn ui-btn-md ui-btn-primary file-check-button\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_CHECK_OK_BUTTON') }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n","import type { PopupOptions } from 'main.popup';\nimport { Popup } from '../../layout/popup';\nimport '../../css/file-checking-popup.css';\n\nexport const CheckingFailedPopup = {\n\temits: ['close'],\n\tprops: {},\n\tcomputed: {\n\t\tpopupOptions(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\twidth: 440,\n\t\t\t\tcloseIcon: true,\n\t\t\t\tnoAllPaddings: true,\n\t\t\t\toverlay: true,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\tonClose()\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t},\n\t},\n\tcomponents: {\n\t\tPopup,\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<Popup \n\t\t\tid=\"file-check-failed\"\n\t\t\t@close=\"this.onClose\" \n\t\t\t:options=\"popupOptions\" \n\t\t>\n\t\t\t<div class=\"file-check file-check-failed\">\n\t\t\t\t<div class=\"file-check-icon-failed\"></div>\n\t\t\t\t<div class=\"file-check-title\">{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_CHECK_FAILED_TITLE') }}</div>\n\t\t\t\t<div class=\"file-check-subtitle\">{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_CHECK_FAILED_SUBTITLE') }}</div>\n\t\t\t\t<button @click=\"this.onClose\" class=\"ui-btn ui-btn-md ui-btn-primary file-check-button\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_CSV_ERROR_POPUP_CHECK_FAILED_BUTTON') }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n","import type { PopupOptions } from 'main.popup';\nimport { Popup } from '../layout/popup';\nimport '../css/generic-popup.css';\n\nexport const GenericPopup = {\n\temits: ['close'],\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tpopupOptions(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\twidth: 440,\n\t\t\t\tcloseIcon: true,\n\t\t\t\tnoAllPaddings: true,\n\t\t\t\toverlay: true,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\tonClose()\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t},\n\t},\n\tcomponents: {\n\t\tPopup,\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<Popup id=\"generic\" @close=\"this.onClose\" :options=\"popupOptions\" wrapper-class=\"generic-popup\">\n\t\t\t<h3 class=\"generic-popup__header\">{{ title }}</h3>\n\t\t\t<div class=\"generic-popup__content\">\n\t\t\t\t<slot name=\"content\"></slot>\n\t\t\t</div>\n\t\t\t<div class=\"generic-popup__buttons-wrapper\">\n\t\t\t\t<slot name=\"buttons\"></slot>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n","import type { PopupOptions } from 'main.popup';\nimport { Popup } from '../../layout/popup';\nimport '../../css/save-progress-popup.css';\n\nexport const SavingPopup = {\n\temits: ['close'],\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\toptions: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: {},\n\t\t},\n\t},\n\tcomputed: {\n\t\tpopupOptions(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\twidth: 500,\n\t\t\t\tminHeight: 299,\n\t\t\t\tcloseIcon: true,\n\t\t\t\tnoAllPaddings: true,\n\t\t\t\toverlay: true,\n\t\t\t\t...this.options,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\tonClose()\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t},\n\t},\n\tcomponents: {\n\t\tPopup,\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<Popup id=\"saveProgress\" @close=\"this.onClose\" :options=\"popupOptions\" wrapper-class=\"dataset-import-popup--full-height\">\n\t\t\t<div class=\"dataset-save-progress-popup\">\n\t\t\t\t<div class=\"dataset-save-progress-popup__content\">\n\t\t\t\t\t<slot name=\"icon\"></slot>\n\t\t\t\t\t<div class=\"dataset-save-progress-popup__texts\">\n\t\t\t\t\t\t<h3 class=\"dataset-save-progress-popup__header\">{{ title }}</h3>\n\t\t\t\t\t\t<p class=\"dataset-save-progress-popup__description\" v-if=\"description\">{{ description }}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"dataset-save-progress-popup__buttons\"><slot name=\"buttons\"></slot></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n","import { SavingPopup } from './saving-popup';\nimport '../../css/save-progress-popup.css';\n\nexport const ImportFailurePopup = {\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['click'],\n\tcomputed: {},\n\tmethods:\n\t{\n\t\tonClick()\n\t\t{\n\t\t\tthis.$emit('click');\n\t\t},\n\t},\n\tcomponents: {\n\t\tSaveProgressPopup: SavingPopup,\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<SaveProgressPopup\n\t\t\t:title=\"title\"\n\t\t\t:description=\"description\"\n\t\t>\n\t\t\t<template v-slot:icon>\n\t\t\t\t<div class=\"dataset-save-progress-popup__failure-logo\"></div>\n\t\t\t</template>\n\t\t\t<template v-slot:buttons>\n\t\t\t\t<button @click=\"onClick\" class=\"ui-btn ui-btn-md ui-btn-primary\">{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_FAILURE_POPUP_BUTTON') }}</button>\n\t\t\t</template>\n\t\t</SaveProgressPopup>\n\t`,\n};\n","import { SavingPopup } from './saving-popup';\nimport { Loader } from 'main.loader';\nimport '../../css/save-progress-popup.css';\n\nexport const ImportProgressPopup = {\n\tprops: {\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tconst loader = new Loader({\n\t\t\ttarget: this.$refs.loader,\n\t\t\tsize: 65,\n\t\t\tcolor: 'var(--ui-color-primary)',\n\t\t\tstrokeWidth: 4,\n\t\t\tmode: 'inline',\n\t\t});\n\t\tloader.show();\n\t},\n\tcomputed: {\n\t\tpopupOptions()\n\t\t{\n\t\t\treturn {\n\t\t\t\tautoHide: false,\n\t\t\t\tcloseIcon: false,\n\t\t\t};\n\t\t},\n\t},\n\tcomponents: {\n\t\tSaveProgressPopup: SavingPopup,\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<SaveProgressPopup\n\t\t\t:title=\"$Bitrix.Loc.getMessage('DATASET_IMPORT_PROGRESS_POPUP_HEADER')\"\n\t\t\t:description=\"description\"\n\t\t\t:options=\"popupOptions\"\n\t\t>\n\t\t\t<template v-slot:icon>\n\t\t\t\t<div ref=\"loader\" class=\"dataset-save-progress-loader\"></div>\n\t\t\t</template>\n\t\t</SaveProgressPopup>\n\t`,\n};\n","import { ajax as Ajax, Dom } from 'main.core';\nimport { SavingPopup } from './saving-popup';\nimport '../../css/save-progress-popup.css';\n\nexport const ImportSuccessPopup = {\n\temits: ['click', 'oneMoreClick'],\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tdatasetId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tshowMoreButton: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t}\n\t},\n\tcomputed: {},\n\tmethods: {\n\t\tonButtonClick()\n\t\t{\n\t\t\tDom.addClass(this.$refs.openDatasetButton, 'ui-btn-wait');\n\t\t\tAjax.runAction(\n\t\t\t\t'biconnector.externalsource.dataset.getEditUrl',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tid: this.datasetId,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tconst link = response.data;\n\t\t\t\t\tif (link)\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.open(link, '_blank').focus();\n\t\t\t\t\t\tDom.removeClass(this.$refs.openDatasetButton, 'ui-btn-wait');\n\t\t\t\t\t\tthis.$emit('click');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((response) => {\n\t\t\t\t\tDom.removeClass(this.$refs.openDatasetButton, 'ui-btn-wait');\n\t\t\t\t\tthis.$emit('click');\n\t\t\t\t});\n\t\t},\n\t\tonOneMoreButtonClick()\n\t\t{\n\t\t\tDom.addClass(this.$refs.oneMoreButton, 'ui-btn-wait');\n\t\t\tthis.$emit('oneMoreClick');\n\t\t},\n\t},\n\tcomponents: {\n\t\tSaveProgressPopup: SavingPopup,\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<SaveProgressPopup\n\t\t\t:title=\"title\"\n\t\t\t:description=\"description\"\n\t\t>\n\t\t\t<template v-slot:icon>\n\t\t\t\t<div class=\"dataset-save-progress-popup__success-logo\"></div>\n\t\t\t</template>\n\t\t\t<template v-slot:buttons>\n\t\t\t\t<a class=\"ui-btn ui-btn-md ui-btn-primary\" @click=\"onButtonClick\" ref=\"openDatasetButton\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_SUCCESS_POPUP_BUTTON') }}\n\t\t\t\t</a>\n\t\t\t\t<a class=\"ui-btn ui-btn-md ui-btn-light-border\" @click=\"onOneMoreButtonClick\" ref=\"oneMoreButton\" v-if=\"showMoreButton\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_SUCCESS_POPUP_ONE_MORE_BUTTON') }}\n\t\t\t\t</a>\n\t\t\t</template>\n\t\t</SaveProgressPopup>\n\t`,\n};\n","import 'ui.alerts';\nimport '../css/step-hint.css';\n\nexport const StepHint = {\n\tprops: {\n\t\thintClass: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: 'ui-alert-primary',\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-alert dataset-import-step__hint\" :class=\"hintClass\">\n\t\t\t<span class=\"ui-alert-message\">\n\t\t\t\t<slot></slot>\n\t\t\t</span>\n\t\t</div>\n\t`,\n};\n","import { Text } from 'main.core';\nimport { Section } from 'ui.section';\nimport { StepHint } from './step-hint';\nimport '../css/step.css';\n\nexport const StepBlock = {\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tsection: null,\n\t\t};\n\t},\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thint: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tisOpenInitially: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t\tcanCollapse: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t\tcustomClasses: {\n\t\t\ttype: Array,\n\t\t\tdefault: [],\n\t\t},\n\t\thintClass: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tadditionalClasses()\n\t\t{\n\t\t\tconst custom = this.customClasses.reduce((acc, key) => {\n\t\t\t\tacc[key] = true;\n\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\n\t\t\treturn {\n\t\t\t\t'dataset-import-step__disabled': this.disabled,\n\t\t\t\t...custom,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\ttoggleCollapse(open: ?boolean)\n\t\t{\n\t\t\tthis.section.toggle(open);\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tconst contentContainer = this.$refs.contentContainer;\n\n\t\tconst section = new Section({\n\t\t\ttitle: this.title,\n\t\t\tisOpen: this.isOpenInitially,\n\t\t\tcanCollapse: this.canCollapse,\n\t\t});\n\n\t\tsection.append(this.$refs.content);\n\t\tsection.renderTo(contentContainer);\n\t\tthis.section = section;\n\t},\n\twatch: {\n\t\ttitle(newValue)\n\t\t{\n\t\t\tif (!this.section)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.section.getContent().querySelector('.ui-section__title').innerHTML = Text.encode(newValue);\n\t\t},\n\t},\n\tcomponents: {\n\t\tStepHint,\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"dataset-import-step\" :class=\"additionalClasses\" ref=\"contentContainer\">\n\t\t</div>\n\t\t<div ref=\"content\" class=\"dataset-import-step__content\">\n\t\t\t<StepHint v-if=\"hint\" :hint-class=\"hintClass\">\n\t\t\t\t<span v-html=\"hint\"></span>\n\t\t\t</StepHint>\n\t\t\t<slot></slot>\n\t\t</div>\n\t`,\n};\n","import { StepBlock } from '../layout/step-block';\n\nexport const BaseStep = {\n\temits: ['validation'],\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\thint: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\tisOpenInitially: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tdisplayedTitle()\n\t\t{\n\t\t\treturn this.title ?? this.defaultTitle;\n\t\t},\n\t\tdisplayedHint()\n\t\t{\n\t\t\treturn this.hint ?? this.defaultHint;\n\t\t},\n\t\tdefaultTitle()\n\t\t{\n\t\t\treturn '';\n\t\t},\n\t\tdefaultHint()\n\t\t{\n\t\t\treturn '';\n\t\t},\n\t},\n\tmethods: {\n\t\topen()\n\t\t{\n\t\t\tif (this.$refs.stepBlock)\n\t\t\t{\n\t\t\t\tthis.$refs.stepBlock.toggleCollapse(true);\n\t\t\t}\n\t\t},\n\t\tclose()\n\t\t{\n\t\t\tif (this.$refs.stepBlock)\n\t\t\t{\n\t\t\t\tthis.$refs.stepBlock.toggleCollapse(false);\n\t\t\t}\n\t\t},\n\t\tvalidate()\n\t\t{\n\t\t\treturn true;\n\t\t},\n\t\tshowValidationErrors()\n\t\t{},\n\t},\n\tcomponents: {\n\t\tStep: StepBlock,\n\t},\n};\n","import { Tag } from 'main.core';\nimport { Popup, PopupOptions } from 'main.popup';\n\nexport class ErrorPopup\n{\n\tstatic create(message: string, element: HTMLElement): Popup\n\t{\n\t\tconst content = Tag.render`<span class='ui-hint-content'></span>`;\n\t\tcontent.innerHTML = message;\n\n\t\tconst popupOptions: PopupOptions = {\n\t\t\tbindElement: element,\n\t\t\tdarkMode: true,\n\t\t\tcontent,\n\t\t\tautoHide: false,\n\t\t\tbindOptions: {\n\t\t\t\tposition: 'top',\n\t\t\t},\n\t\t\tangle: {\n\t\t\t\tposition: 'bottom',\n\t\t\t},\n\t\t\tcacheable: false,\n\t\t};\n\n\t\tPopup.setOptions({\n\t\t\tangleMinBottom: 43,\n\t\t});\n\n\t\treturn new Popup(popupOptions);\n\t}\n}\n","import '../../css/dataset-import-field.css';\n\nexport const BaseField = {\n\tprops: {\n\t\tdefaultValue: {\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tplaceholder: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tisValid: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t\terrorMessage: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tisDisabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t\thintText: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t},\n\temits: [\n\t\t'valueChange',\n\t],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tvalue: this.defaultValue,\n\t\t\tareValidationErrorsShown: false,\n\t\t};\n\t},\n\tmethods: {\n\t\tshowValidationErrors()\n\t\t{\n\t\t\tthis.areValidationErrorsShown = true;\n\t\t},\n\t\tonInputChange(newValue)\n\t\t{\n\t\t\tthis.$emit('valueChange', {\n\t\t\t\tnewValue,\n\t\t\t\tfieldName: this.name,\n\t\t\t});\n\t\t},\n\t},\n\twatch: {\n\t\tdefaultValue(newValue)\n\t\t{\n\t\t\tthis.value = newValue;\n\t\t},\n\t},\n};\n","import { Dom, Tag } from 'main.core';\nimport { Popup, PopupOptions } from 'main.popup';\nimport { ErrorPopup } from '../../layout/error-popup';\nimport { BaseField } from './base-field';\nimport '../../css/dataset-import-field.css';\nimport 'ui.hint';\n\nexport const StringField = {\n\textends: BaseField,\n\tdata()\n\t{\n\t\treturn {\n\t\t\terrorPopup: null,\n\t\t\terrorPopupTimeout: null,\n\t\t};\n\t},\n\tmethods: {\n\t\tonInput(event)\n\t\t{\n\t\t\tthis.areValidationErrorsShown = false;\n\t\t\tthis.onInputChange(event.target.value);\n\t\t},\n\t\tonBlur()\n\t\t{\n\t\t\tthis.areValidationErrorsShown = true;\n\t\t\tif (!this.isValid)\n\t\t\t{\n\t\t\t\tthis.showErrorHint();\n\t\t\t\tthis.errorPopupTimeout = setTimeout(() => {\n\t\t\t\t\tthis.hideErrorHint();\n\t\t\t\t\tthis.errorPopupTimeout = null;\n\t\t\t\t}, 3000);\n\t\t\t}\n\t\t},\n\t\tshowErrorHint()\n\t\t{\n\t\t\tif (this.errorPopupTimeout)\n\t\t\t{\n\t\t\t\tclearTimeout(this.errorPopupTimeout);\n\t\t\t\tthis.errorPopupTimeout = null;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.errorPopup = this.createErrorPopup();\n\t\t\t\tthis.errorPopup.show();\n\t\t\t}\n\t\t},\n\t\thideErrorHint()\n\t\t{\n\t\t\tif (this.errorPopup)\n\t\t\t{\n\t\t\t\tthis.errorPopup.close();\n\t\t\t}\n\t\t},\n\t\tcreateErrorPopup()\n\t\t{\n\t\t\treturn ErrorPopup.create(this.errorMessage, this.$refs.errorIconWrapper);\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tif (this.hintText)\n\t\t{\n\t\t\tDom.append(BX.UI.Hint.createNode(this.hintText), this.$refs.title);\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-form-row\">\n\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t<div class=\"ui-ctl-label-text\" ref=\"title\">\n\t\t\t\t\t{{ title }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-textbox ui-ctl-w100 dataset-import-control\">\n\t\t\t\t<input\n\t\t\t\t\tclass=\"ui-ctl-element dataset-import-field\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t:class=\"{ 'data-import-field--invalid': !isValid && areValidationErrorsShown }\"\n\t\t\t\t\t:disabled=\"isDisabled\"\n\t\t\t\t\t:placeholder=\"placeholder\"\n\t\t\t\t\tv-model=\"value\"\n\t\t\t\t\t@input=\"onInput\"\n\t\t\t\t\t@blur=\"onBlur\"\n\t\t\t\t>\n\t\t\t\t<div class=\"ui-ctl-after\" ref=\"errorIconWrapper\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"ui-icon-set --warning format-table__error-icon\"\n\t\t\t\t\t\t@mouseenter=\"showErrorHint\"\n\t\t\t\t\t\t@mouseleave=\"hideErrorHint\"\n\t\t\t\t\t\tv-if=\"!isValid && areValidationErrorsShown\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BaseField } from './base-field';\n\nexport const TextField = {\n\textends: BaseField,\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-form-row\">\n\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t<div class=\"ui-ctl-label-text\">{{ title }}</div>\n\t\t\t</div>\n\t\t\t<div class=\"ui-ctl ui-ctl-textarea dataset-import-textarea ui-ctl-w100 ui-ctl-no-resize\">\n\t\t\t\t<textarea \n\t\t\t\t\tclass=\"ui-ctl-element dataset-import-textarea-element\" \n\t\t\t\t\t:placeholder=\"placeholder\" \n\t\t\t\t\t@input=\"onInputChange($event.target.value)\"\n\t\t\t\t\tv-model=\"value\"\n\t\t\t\t></textarea>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import type { FieldValueChangeEvent } from '../types/field-value-change-event';\nimport { StringField } from './type/string-field';\nimport { TextField } from './type/text-field';\nimport '../css/dataset-properties.css';\n\nexport const DatasetProperties = {\n\tprops: {\n\t\tdefaultName: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tdefaultDescription: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tunvalidatedFields: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: {},\n\t\t},\n\t\tdisabledFields: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: {},\n\t\t},\n\t\tdatasetSourceCode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: [\n\t\t'valueChange',\n\t\t'validationNeeded',\n\t],\n\tmethods: {\n\t\tonValueChange(event: FieldValueChangeEvent)\n\t\t{\n\t\t\tthis.$emit('valueChange', event);\n\t\t},\n\t\tshowValidationErrors()\n\t\t{\n\t\t\tthis.$refs.nameField.showValidationErrors();\n\t\t},\n\t},\n\tcomponents: {\n\t\tStringField,\n\t\tTextField,\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-form dataset-properties\">\n\t\t\t<StringField\n\t\t\t\tref=\"nameField\"\n\t\t\t\tname=\"name\"\n\t\t\t\t:defaultValue=\"defaultName\"\n\t\t\t\t@value-change=\"onValueChange\"\n\t\t\t\t:title=\"this.$Bitrix.Loc.getMessage('DATASET_IMPORT_DATASET_PROPERTIES_CODE')\"\n\t\t\t\t:placeholder=\"this.$Bitrix.Loc.getMessage('DATASET_IMPORT_DATASET_PROPERTIES_CODE_PLACEHOLDER', { '#CODE#': this.datasetSourceCode })\"\n\t\t\t\t:is-valid=\"unvalidatedFields.name?.result ?? true\"\n\t\t\t\t:is-disabled=\"disabledFields.name ?? false\"\n\t\t\t\t:error-message=\"unvalidatedFields.name?.message ?? ''\"\n\t\t\t/>\n\t\t\t<TextField\n\t\t\t\tname=\"description\"\n\t\t\t\t:defaultValue=\"defaultDescription\"\n\t\t\t\t@value-change=\"onValueChange\"\n\t\t\t\t:title=\"this.$Bitrix.Loc.getMessage('DATASET_IMPORT_DATASET_PROPERTIES_DESCRIPTION')\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { StepBlock } from '../layout/step-block';\nimport { BaseStep } from './base-step';\nimport { DatasetProperties } from '../fields/dataset-properties';\nimport type { FieldValueChangeEvent } from '../types/field-value-change-event';\n\nexport const DatasetPropertiesStep = {\n\textends: BaseStep,\n\tprops: {\n\t\tdatasetSourceCode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\treservedNames: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: [],\n\t\t},\n\t},\n\temits: ['propertiesChanged'],\n\tcomputed: {\n\t\tdatasetProperties()\n\t\t{\n\t\t\treturn this.$store.state.config.datasetProperties;\n\t\t},\n\t\tdefaultTitle()\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('DATASET_IMPORT_PROPERTIES_HEADER');\n\t\t},\n\t\tdefaultHint()\n\t\t{\n\t\t\tif (this.isEditMode)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn this.$Bitrix.Loc.getMessage('DATASET_IMPORT_PROPERTIES_HINT');\n\t\t},\n\t\tdisabledFields()\n\t\t{\n\t\t\treturn {\n\t\t\t\tname: this.$store.getters.isEditMode,\n\t\t\t};\n\t\t},\n\t\tunvalidatedFields()\n\t\t{\n\t\t\tconst result = {};\n\t\t\tconst nameValidationResult = this.validateName();\n\t\t\tif (!nameValidationResult.result)\n\t\t\t{\n\t\t\t\tresult.name = nameValidationResult;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\tisEditMode()\n\t\t{\n\t\t\treturn this.$store.getters.isEditMode;\n\t\t},\n\t},\n\tcomponents: {\n\t\tStep: StepBlock,\n\t\tDatasetProperties,\n\t},\n\tmethods: {\n\t\tonDatasetPropertiesFieldsChange(event: FieldValueChangeEvent)\n\t\t{\n\t\t\tconst datasetProperties = this.datasetProperties;\n\t\t\tdatasetProperties[event.fieldName] = event.newValue;\n\t\t\tthis.$store.commit('setDatasetProperties', datasetProperties);\n\t\t\tthis.validate();\n\n\t\t\tthis.$emit('propertiesChanged');\n\t\t},\n\t\tvalidate()\n\t\t{\n\t\t\tlet result = true;\n\t\t\tif (!this.isEditMode)\n\t\t\t{\n\t\t\t\tresult = Object.keys(this.unvalidatedFields).length === 0;\n\t\t\t}\n\n\t\t\tthis.$emit('validation', result);\n\n\t\t\treturn result;\n\t\t},\n\t\tvalidateName()\n\t\t{\n\t\t\tconst name = this.$store.state.config.datasetProperties.name;\n\t\t\tif (!name)\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tresult: true,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst isReserved = this.reservedNames.includes(name);\n\t\t\tif (isReserved)\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tresult: false,\n\t\t\t\t\tmessage: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FIELD_VALIDATION_DATASET_EXISTS'),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (name.length > 30)\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tresult: false,\n\t\t\t\t\tmessage: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FIELD_VALIDATION_DATASET_TOO_LONG'),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (!/^[a-z][\\d_a-z]*$/.test(name))\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tresult: false,\n\t\t\t\t\tmessage: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FIELD_VALIDATION_DATASET_INVALID_CHARS'),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tresult: true,\n\t\t\t};\n\t\t},\n\t\tshowValidationErrors()\n\t\t{\n\t\t\tthis.$refs.datasetProperties.showValidationErrors();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Step\n\t\t\t:title=\"displayedTitle\"\n\t\t\t:hint=\"displayedHint\"\n\t\t\t:is-open-initially=\"isOpenInitially\"\n\t\t\t:disabled=\"disabled\"\n\t\t\tref=\"stepBlock\"\n\t\t>\n\t\t\t<slot name=\"additional-properties\"></slot>\n\t\t\t<DatasetProperties\n\t\t\t\t@value-change=\"onDatasetPropertiesFieldsChange\"\n\t\t\t\t:default-name=\"datasetProperties.name\"\n\t\t\t\t:default-description=\"datasetProperties.description\"\n\t\t\t\tref=\"datasetProperties\"\n\t\t\t\t:disabled-fields=\"disabledFields\"\n\t\t\t\t:unvalidated-fields=\"unvalidatedFields\"\n\t\t\t\t:dataset-source-code=\"datasetSourceCode\"\n\t\t\t/>\n\t\t</Step>\n\t`,\n};\n","import '../../css/format-table.css';\nimport 'ui.hint';\n\nexport const TableHeader = {\n\tprops: {\n\t\tenabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t\tindeterminate: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: [\n\t\t'checkboxClick',\n\t],\n\tcomputed: {\n\t\tisNeedShowOriginalNameHint(): boolean\n\t\t{\n\t\t\treturn this.$store.state.config.fileProperties?.firstLineHeader ?? true;\n\t\t},\n\t},\n\tmethods: {\n\t\tonCheckboxClick(event)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tthis.$emit('checkboxClick');\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<tr>\n\t\t\t<th class=\"format-table__header format-table__checkbox-header\">\n\t\t\t\t<input class=\"format-table__checkbox\" type=\"checkbox\" @change=\"onCheckboxClick\" :checked=\"enabled\" :indeterminate.prop=\"indeterminate\">\n\t\t\t</th>\n\t\t\t<th class=\"format-table__header format-table__type-header format-table__type-subfield-header\">{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_FIELD_SETTINGS_TYPE_HEADER') }}</th>\n\t\t\t<th class=\"format-table__header format-table__header format-table__title-header\">{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_FIELD_SETTINGS_CODE_HEADER') }}</th>\n\t\t\t<th class=\"format-table__header format-table__header format-table__title-header\" v-if=\"isNeedShowOriginalNameHint\"></th>\n\t\t</tr>\n\t`,\n};\n","import { Loc } from 'main.core';\n\ntype DataTypeDescription = {\n\ttitle: string,\n\ticon: string,\n}\n\nconst DataType = {\n\tstring: 'string',\n\tmoney: 'money',\n\tint: 'int',\n\tdouble: 'double',\n\tdate: 'date',\n\tdatetime: 'datetime',\n};\n\nconst DataTypeDescriptions: Record<string, DataTypeDescription> = {\n\t[DataType.string]: {\n\t\ttitle: Loc.getMessage('DATASET_IMPORT_FIELD_SETTINGS_TYPE_TEXT'),\n\t\ticon: '--formatting',\n\t},\n\t[DataType.money]: {\n\t\ttitle: Loc.getMessage('DATASET_IMPORT_FIELD_SETTINGS_TYPE_MONEY'),\n\t\ticon: '--money',\n\t},\n\t[DataType.int]: {\n\t\ttitle: Loc.getMessage('DATASET_IMPORT_FIELD_SETTINGS_TYPE_NUMBER'),\n\t\ticon: '--numbers-123',\n\t},\n\t[DataType.double]: {\n\t\ttitle: Loc.getMessage('DATASET_IMPORT_FIELD_SETTINGS_TYPE_DECIMAL'),\n\t\ticon: '--numbers-05',\n\t},\n\t[DataType.date]: {\n\t\ttitle: Loc.getMessage('DATASET_IMPORT_FIELD_SETTINGS_TYPE_DATE'),\n\t\ticon: '--calendar-1',\n\t},\n\t[DataType.datetime]: {\n\t\ttitle: Loc.getMessage('DATASET_IMPORT_FIELD_SETTINGS_TYPE_DATETIME'),\n\t\ticon: '--planning-2',\n\t},\n};\n\ntype DataFormatTemplate = {\n\t[DataType.money]: string[],\n\t[DataType.double]: string[],\n\t[DataType.date]: string[],\n\t[DataType.datetime]: string[],\n};\n\nexport {\n\tDataType,\n\tDataTypeDescriptions,\n\tDataFormatTemplate,\n};\n","import { Menu } from 'main.popup';\nimport { DataTypeDescriptions } from '../../types/data-types';\n\ntype DataTypeMenuOptions = {\n\tselectedType: string,\n\tbindElement: HTMLElement,\n\tonSelect: Function,\n\tonClose: Function,\n};\n\nexport class DataTypeMenu\n{\n\t#selectedType: string;\n\t#bindElement: HTMLElement;\n\t#onSelect: Function;\n\t#onClose: Function;\n\n\tconstructor(options: DataTypeMenuOptions)\n\t{\n\t\tthis.#selectedType = options.selectedType;\n\t\tthis.#bindElement = options.bindElement;\n\t\tthis.#onSelect = options.onSelect;\n\t\tthis.#onClose = options.onClose;\n\t}\n\n\tgetMenu(): Menu\n\t{\n\t\tconst items = [];\n\t\tObject.entries(DataTypeDescriptions).forEach(([key, value]) => {\n\t\t\titems.push({\n\t\t\t\thtml: `\n\t\t\t\t\t<div class=\"ui-icon-set ${value.icon}\"></div>\n\t\t\t\t\t<span class=\"format-table__dropdown-item-text\">${value.title}</span>\n\t\t\t\t\t${key === this.#selectedType ? '<div class=\"format-table__dropdown-item-selected ui-icon-set --check\"></div>' : ''}\n\t\t\t\t`,\n\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\tthis.#onSelect(key);\n\t\t\t\t\titem.getMenuWindow().close();\n\t\t\t\t},\n\t\t\t\tclassName: `format-table__dropdown-item${key === this.#selectedType ? ' format-table__dropdown-item--active' : ''}`,\n\t\t\t});\n\t\t});\n\n\t\treturn new Menu({\n\t\t\tclassName: 'format-table__dropdown-popup',\n\t\t\tbindElement: this.#bindElement,\n\t\t\titems,\n\t\t\tevents: {\n\t\t\t\tonClose: this.#onClose,\n\t\t\t},\n\t\t});\n\t}\n}\n","import { DataTypeMenu } from './data-type-menu';\nimport { DataTypeDescriptions } from '../../types/data-types';\n\nexport const DataTypeSelector = {\n\tprops: {\n\t\tselectedType: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: 'text',\n\t\t},\n\t\tcanEdit: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: [\n\t\t'valueChange',\n\t],\n\tdata()\n\t{\n\t\treturn {\n\t\t\ttypeMenu: null,\n\t\t\tisFocused: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\ticonClass()\n\t\t{\n\t\t\treturn DataTypeDescriptions[this.selectedType].icon;\n\t\t},\n\t\ttypeTitle()\n\t\t{\n\t\t\treturn DataTypeDescriptions[this.selectedType].title;\n\t\t},\n\t\tisEditable()\n\t\t{\n\t\t\treturn this.canEdit;\n\t\t},\n\t},\n\tmethods: {\n\t\tonClick(event)\n\t\t{\n\t\t\tif (!this.isEditable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isFocused = true;\n\n\t\t\tif (!this.typeMenu)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.typeMenu.getPopupWindow().setWidth(this.$refs.formatButton.offsetWidth);\n\t\t\tthis.typeMenu.show();\n\t\t},\n\t\tcreateMenu()\n\t\t{\n\t\t\tif (this.isEditable)\n\t\t\t{\n\t\t\t\tthis.typeMenu = (new DataTypeMenu({\n\t\t\t\t\tselectedType: this.selectedType,\n\t\t\t\t\tbindElement: this.$refs.formatButton,\n\t\t\t\t\tonSelect: (selectedType) => {\n\t\t\t\t\t\tthis.$emit('valueChange', selectedType);\n\t\t\t\t\t},\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tthis.isFocused = false;\n\t\t\t\t\t},\n\t\t\t\t})).getMenu();\n\t\t\t}\n\t\t},\n\t\tdestroyMenu()\n\t\t{\n\t\t\tthis.typeMenu?.destroy();\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tthis.createMenu();\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.destroyMenu();\n\t},\n\twatch: {\n\t\tselectedType(newValue)\n\t\t{\n\t\t\tthis.destroyMenu();\n\t\t\tthis.createMenu();\n\t\t},\n\t\tisEditable(newValue)\n\t\t{\n\t\t\tif (newValue && !this.typeMenu)\n\t\t\t{\n\t\t\t\tthis.createMenu();\n\t\t\t}\n\n\t\t\tif (!newValue)\n\t\t\t{\n\t\t\t\tthis.destroyMenu();\n\t\t\t}\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"ui-ctl ui-ctl-before-icon ui-ctl-after-icon ui-ctl-w100 format-table__type-control ui-ctl-dropdown\"\n\t\t\tref=\"formatButton\"\n\t\t\t@click=\"onClick\"\n\t\t\t:class=\"{\n\t\t\t\t'format-table__type-control--disabled': !isEditable,\n\t\t\t\t'ui-ctl-hover': isFocused,\n\t\t\t}\"\n\t\t>\n\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\" v-if=\"isEditable\"></div>\n\t\t\t<div class=\"ui-ctl-before\">\n\t\t\t\t<div class=\"format-table__type-button\" :class=\"{ 'format-table__type-button--disabled': !isEditable }\">\n\t\t\t\t\t<div class=\"ui-icon-set\" :class=\"iconClass\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"ui-ctl-element format-table__text-input\">\n\t\t\t\t<span>{{ typeTitle }}</span>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import '../../css/format-table.css';\nimport { ErrorPopup } from '../../layout/error-popup';\nimport { DataTypeDescriptions } from '../../types/data-types';\nimport { DataTypeSelector } from './data-type-selector';\nimport { BIcon, Set } from 'ui.icon-set.api.vue';\nimport { hint } from 'ui.vue3.directives.hint';\n\nexport const TableRow = {\n\tdirectives: {\n\t\thint,\n\t},\n\tprops: {\n\t\tenabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t\tindex: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tfieldSettings: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\tinvalidFields: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: {},\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tdisplayedValidationErrors: {\n\t\t\t\tname: true,\n\t\t\t},\n\t\t\terrorPopup: {\n\t\t\t\tname: null,\n\t\t\t},\n\t\t\terrorPopupTimeout: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\tisNameValid(): boolean\n\t\t{\n\t\t\treturn !('name' in this.invalidFields);\n\t\t},\n\t\tdisplayedErrorForName(): string\n\t\t{\n\t\t\treturn this.invalidFields.name.message;\n\t\t},\n\t\tset(): Set\n\t\t{\n\t\t\treturn Set;\n\t\t},\n\t\toriginalsHintText(): string\n\t\t{\n\t\t\tconst originalType = this.fieldSettings.originalType;\n\t\t\tconst originalName = this.fieldSettings.originalName;\n\n\t\t\tlet typeText = '';\n\t\t\tif (originalType)\n\t\t\t{\n\t\t\t\ttypeText = this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FIELD_SETTINGS_ORIG_TYPE', {\n\t\t\t\t\t'#CLASS#': '<span class=\"format-table__orig_info_title\">',\n\t\t\t\t\t'#/CLASS#': '</span>',\n\t\t\t\t\t'#TYPENAME#': DataTypeDescriptions[originalType].title,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst nameText = this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FIELD_SETTINGS_ORIG_NAME', {\n\t\t\t\t'#CLASS#': '<span class=\"format-table__orig_info_title\">',\n\t\t\t\t'#/CLASS#': '</span>',\n\t\t\t\t'#FIELDNAME#': originalName,\n\t\t\t});\n\n\t\t\tif (!originalType)\n\t\t\t{\n\t\t\t\treturn nameText;\n\t\t\t}\n\n\t\t\treturn `${typeText}<br>${nameText}`;\n\t\t},\n\t\tisNeedShowOriginalNameHint(): boolean\n\t\t{\n\t\t\treturn (this.$store.state.config.fileProperties?.firstLineHeader ?? true)\n\t\t\t\t&& this.$store.state.config.connectionProperties?.connectionType\n\t\t\t;\n\t\t},\n\t\thintOptions(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\thtml: this.originalsHintText,\n\t\t\t\tpopupOptions: {\n\t\t\t\t\tangle: {\n\t\t\t\t\t\tposition: 'left',\n\t\t\t\t\t},\n\t\t\t\t\toffsetLeft: 30,\n\t\t\t\t\toffsetTop: -46,\n\t\t\t\t\tautoHide: false,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tcanEdit(): boolean\n\t\t{\n\t\t\treturn !Boolean(this.fieldSettings?.id > 0);\n\t\t},\n\t},\n\temits: [\n\t\t'checkboxClick',\n\t\t'fieldChange',\n\t],\n\tmethods: {\n\t\tonCheckboxClick(event)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tthis.$emit('checkboxClick', {\n\t\t\t\tindex: this.index,\n\t\t\t});\n\t\t},\n\t\tonTypeSelected(type)\n\t\t{\n\t\t\tthis.$emit('fieldChange', {\n\t\t\t\tfieldName: 'type',\n\t\t\t\tvalue: type,\n\t\t\t\tindex: this.index,\n\t\t\t});\n\t\t},\n\t\tonFieldInput(event)\n\t\t{\n\t\t\tthis.displayedValidationErrors[event.target.name] = false;\n\t\t\tthis.$emit('fieldChange', {\n\t\t\t\tfieldName: event.target.name,\n\t\t\t\tvalue: event.target.value,\n\t\t\t\tindex: this.index,\n\t\t\t});\n\t\t},\n\t\tonFieldBlur(event)\n\t\t{\n\t\t\tthis.displayedValidationErrors[event.target.name] = true;\n\n\t\t\tif ('name' in this.invalidFields)\n\t\t\t{\n\t\t\t\tthis.showErrorHint();\n\t\t\t\tthis.errorPopupTimeout = setTimeout(() => {\n\t\t\t\t\tthis.hideErrorHint();\n\t\t\t\t\tthis.errorPopupTimeout = null;\n\t\t\t\t}, 3000);\n\t\t\t}\n\t\t},\n\t\tshowValidationErrors()\n\t\t{\n\t\t\tObject.keys(this.displayedValidationErrors).forEach((field) => {\n\t\t\t\tthis.displayedValidationErrors[field] = true;\n\t\t\t});\n\t\t},\n\t\tshowErrorHint()\n\t\t{\n\t\t\tif (this.errorPopupTimeout)\n\t\t\t{\n\t\t\t\tclearTimeout(this.errorPopupTimeout);\n\t\t\t\tthis.errorPopupTimeout = null;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.errorPopup.name = this.createErrorPopup();\n\t\t\t\tthis.errorPopup.name.show();\n\t\t\t}\n\t\t},\n\t\thideErrorHint()\n\t\t{\n\t\t\tif (this.errorPopup.name)\n\t\t\t{\n\t\t\t\tthis.errorPopup.name.close();\n\t\t\t}\n\t\t},\n\t\tcreateErrorPopup()\n\t\t{\n\t\t\treturn ErrorPopup.create(this.displayedErrorForName, this.$refs.errorIconWrapper);\n\t\t},\n\t},\n\twatch: {\n\t\tisNeedShowOriginalNameHint()\n\t\t{\n\t\t\tif (this.$refs.originalsHint)\n\t\t\t{\n\t\t\t\tthis.$refs.originalsHint.remove();\n\t\t\t}\n\t\t},\n\t},\n\tcomponents: {\n\t\tDataTypeButton: DataTypeSelector,\n\t\tBIcon,\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<tr class=\"format-table__row\">\n\t\t\t<td class=\"format-table__checkbox-cell\">\n\t\t\t\t<input class=\"format-table__checkbox\" ref=\"visibilityCheckbox\" type=\"checkbox\" @change=\"onCheckboxClick\" :checked=\"enabled\">\n\t\t\t</td>\n\t\t\t<td class=\"format-table__cell\">\n\t\t\t\t<DataTypeButton :selected-type=\"fieldSettings.type\" @value-change=\"onTypeSelected\" :can-edit=\"canEdit\" />\n\t\t\t</td>\n\t\t\t<td class=\"format-table__cell\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"ui-ctl ui-ctl-textbox ui-ctl-w100 format-table__name-control\"\n\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t'format-table__text-input--invalid': displayedValidationErrors.name && !isNameValid,\n\t\t\t\t\t\t'format-table__text-input--disabled': !canEdit,\n\t\t\t\t\t\t'ui-ctl-after-icon': canEdit && !isNameValid,\n\t\t\t\t\t}\"\n\t\t\t\t>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass=\"ui-ctl-element format-table__text-input format-table__name-input\"\n\t\t\t\t\t\t:disabled=\"!canEdit\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t:placeholder=\"$Bitrix.Loc.getMessage('DATASET_IMPORT_FIELD_SETTINGS_PLACEHOLDER')\"\n\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t@input=\"onFieldInput\"\n\t\t\t\t\t\t@blur=\"onFieldBlur\"\n\t\t\t\t\t\t:value=\"fieldSettings.name\"\n\t\t\t\t\t>\n\t\t\t\t\t<div class=\"ui-ctl-after\" ref=\"errorIconWrapper\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"ui-icon-set --warning format-table__error-icon\"\n\t\t\t\t\t\t\t@mouseenter=\"showErrorHint\"\n\t\t\t\t\t\t\t@mouseleave=\"hideErrorHint\"\n\t\t\t\t\t\t\tv-if=\"displayedValidationErrors.name && !isNameValid\"\n\t\t\t\t\t\t></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t\t<td class=\"format-table__cell\" v-if=\"isNeedShowOriginalNameHint\">\n\t\t\t\t<div class=\"format-table__orig-type-hint-wrapper\" v-hint=\"hintOptions\" ref=\"originalsHint\">\n\t\t\t\t\t<div class=\"format-table__orig-type-hint\">\n\t\t\t\t\t\t<BIcon\n\t\t\t\t\t\t\t:name=\"set.INFO_1\"\n\t\t\t\t\t\t\t:size=\"20\"\n\t\t\t\t\t\t\tcolor=\"#B5BABE\"\n\t\t\t\t\t\t></BIcon>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t`,\n};\n","import { TableHeader } from './table-header';\nimport { TableRow } from './table-row';\nimport '../../css/format-table.css';\n\nexport const FormatTable = {\n\tprops: {\n\t\tfieldsSettings: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t},\n\t\tunvalidatedRows: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t},\n\t},\n\temits: [\n\t\t'rowToggle',\n\t\t'headerToggle',\n\t\t'rowFieldChanged',\n\t],\n\tcomputed: {\n\t\tareAllRowsVisible()\n\t\t{\n\t\t\treturn this.$store.getters.areAllRowsVisible;\n\t\t},\n\t\tareNoRowsVisible()\n\t\t{\n\t\t\treturn this.$store.getters.areNoRowsVisible;\n\t\t},\n\t\tareSomeRowsVisible()\n\t\t{\n\t\t\treturn this.$store.getters.areSomeRowsVisible;\n\t\t},\n\t},\n\tmethods: {\n\t\tonRowCheckboxClicked(event)\n\t\t{\n\t\t\tthis.$emit('rowToggle', event);\n\t\t},\n\t\tonHeaderCheckboxClicked()\n\t\t{\n\t\t\tthis.$emit('headerToggle');\n\t\t},\n\t\tonRowFieldChanged(event)\n\t\t{\n\t\t\tthis.$emit('rowFieldChanged', event);\n\t\t},\n\t\tshowValidationErrors()\n\t\t{\n\t\t\tconst rowIndices = Object.keys(this.unvalidatedRows);\n\t\t\trowIndices.forEach((index) => {\n\t\t\t\tif (this.$refs.row[index])\n\t\t\t\t{\n\t\t\t\t\tthis.$refs.row[index].showValidationErrors();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t},\n\tcomponents: {\n\t\tTableHeader,\n\t\tTableRow,\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<table class=\"format-table\">\n\t\t\t<thead>\n\t\t\t\t<TableHeader :enabled=\"areAllRowsVisible\" :indeterminate=\"areSomeRowsVisible\" @checkbox-click=\"onHeaderCheckboxClicked\" />\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<template v-for=\"(field, index) in fieldsSettings\" :key=\"index\">\n\t\t\t\t\t<TableRow\n\t\t\t\t\t\tref=\"row\"\n\t\t\t\t\t\t:index=\"index\"\n\t\t\t\t\t\t:enabled=\"field.visible\"\n\t\t\t\t\t\t:field-settings=\"field\"\n\t\t\t\t\t\t@checkbox-click=\"onRowCheckboxClicked\"\n\t\t\t\t\t\t@field-change=\"onRowFieldChanged\"\n\t\t\t\t\t\t:invalid-fields=\"unvalidatedRows[index] ?? []\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t</tbody>\n\t\t</table>\n\t`,\n};\n","import '../../css/fields-settings.css';\n\nexport const SyncFieldsButton = {\n\temits: ['buttonClick'],\n\tprops: {\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tisDisabled(): boolean\n\t\t{\n\t\t\treturn this.disabled;\n\t\t},\n\t},\n\tmethods: {\n\t\tonButtonClick()\n\t\t{\n\t\t\tthis.$emit('buttonClick');\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-form-row\">\n\t\t\t<button :disabled=\"isDisabled\" class=\"ui-btn ui-btn-sm ui-btn-primary ui-btn-no-caps\" @click=\"onButtonClick\">\n\t\t\t\t{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_SYNC_FIELDS_BUTTON') }}\n\t\t\t</button>\n\t\t</div>\n\t`,\n};\n","import { StepBlock } from '../layout/step-block';\nimport { BaseStep } from './base-step';\nimport { FormatTable } from './data-type/format-table';\nimport { SyncFieldsButton } from './data-type/sync-fields-button';\nimport '../css/fields-settings.css';\n\nexport const FieldsSettingsStep = {\n\temits: ['parsingOptionsChanged', 'settingsChanged', 'syncFields'],\n\textends: BaseStep,\n\tprops: {\n\t\tsyncFieldsProps: {\n\t\t\ttype: Object,\n\t\t\tdefault: {\n\t\t\t\tsupported: false,\n\t\t\t\tdisabled: true,\n\t\t\t},\n\t\t},\n\t},\n\tcomputed: {\n\t\tfieldsSettings()\n\t\t{\n\t\t\treturn this.$store.state.config.fieldsSettings;\n\t\t},\n\t\tdefaultTitle()\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FIELDS_SETTINGS_HEADER');\n\t\t},\n\t\tdefaultHint()\n\t\t{\n\t\t\tif (this.isEditMode)\n\t\t\t{\n\t\t\t\treturn this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FIELDS_SETTINGS_HINT_EDIT')\n\t\t\t\t\t.replace('[link]', '<a onclick=\"top.BX.Helper.show(`redirect=detail&code=23378698`)\">')\n\t\t\t\t\t.replace('[/link]', '</a>')\n\t\t\t\t;\n\t\t\t}\n\n\t\t\treturn this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FIELDS_SETTINGS_HINT')\n\t\t\t\t.replace('[link]', '<a onclick=\"top.BX.Helper.show(`redirect=detail&code=23378698`)\">')\n\t\t\t\t.replace('[/link]', '</a>')\n\t\t\t;\n\t\t},\n\t\tunvalidatedRows()\n\t\t{\n\t\t\tconst rows = {};\n\n\t\t\tthis.$store.state.config.fieldsSettings.forEach((field, index) => {\n\t\t\t\tconst invalidFields = {};\n\n\t\t\t\tif (!field.id)\n\t\t\t\t{\n\t\t\t\t\tconst nameValidationResult = this.validateName(field.name);\n\t\t\t\t\tif (!nameValidationResult.result)\n\t\t\t\t\t{\n\t\t\t\t\t\tinvalidFields.name = nameValidationResult;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (Object.keys(invalidFields).length > 0)\n\t\t\t\t{\n\t\t\t\t\trows[index] = invalidFields;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn rows;\n\t\t},\n\t\tisEditMode()\n\t\t{\n\t\t\treturn this.$store.getters.isEditMode;\n\t\t},\n\t\tisSyncSupported(): boolean\n\t\t{\n\t\t\treturn this.syncFieldsProps.supported;\n\t\t},\n\t\tisSyncDisabled(): boolean\n\t\t{\n\t\t\treturn this.syncFieldsProps.disabled;\n\t\t},\n\t},\n\tmethods: {\n\t\tvalidateName(name)\n\t\t{\n\t\t\tconst isNotEmpty = name.length > 0;\n\t\t\tif (!isNotEmpty)\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tresult: false,\n\t\t\t\t\tmessage: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FIELD_VALIDATION_EMPTY_ERROR'),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst isTooLong = name.length > 32;\n\t\t\tif (isTooLong)\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tresult: false,\n\t\t\t\t\tmessage: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FIELD_VALIDATION_FIELD_TOO_LONG'),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// only numbers, uppercase letters and underscores; starts with a letter\n\t\t\tconst areCharactersValid = /^[A-Z](?=.*[A-Z_])[A-Z0-9_]*$/.test(name);\n\t\t\tif (!areCharactersValid)\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tresult: false,\n\t\t\t\t\tmessage: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FIELD_VALIDATION_FIELD_INVALID_CHARS'),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst isAlreadyUsed = this.$store.getters.previewHeaders.reduce((\n\t\t\t\tcount,\n\t\t\t\tvalue,\n\t\t\t) => (name === value ? count + 1 : count), 0) > 1;\n\t\t\tif (isAlreadyUsed)\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tresult: false,\n\t\t\t\t\tmessage: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FIELD_VALIDATION_FIELD_ALREADY_USED'),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tresult: true,\n\t\t\t};\n\t\t},\n\t\tonRowToggled(event)\n\t\t{\n\t\t\tthis.$store.commit('toggleRowVisibility', event.index);\n\t\t\tthis.$emit('settingsChanged');\n\t\t},\n\t\tonHeaderToggled(event)\n\t\t{\n\t\t\tif (this.$store.getters.areAllRowsVisible)\n\t\t\t{\n\t\t\t\tthis.$store.commit('setAllRowsInvisible');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$store.commit('setAllRowsVisible');\n\t\t\t}\n\n\t\t\tthis.$emit('settingsChanged');\n\t\t},\n\t\tonRowFieldChanged(event)\n\t\t{\n\t\t\tthis.fieldsSettings[event.index][event.fieldName] = event.value;\n\t\t\tthis.$store.commit('setFieldRowSettings', {\n\t\t\t\tindex: event.index,\n\t\t\t\tsettings: this.fieldsSettings[event.index],\n\t\t\t});\n\n\t\t\tif (event.fieldName === 'type')\n\t\t\t{\n\t\t\t\tthis.$emit('parsingOptionsChanged');\n\t\t\t}\n\n\t\t\tthis.$emit('settingsChanged');\n\n\t\t\tthis.validate();\n\t\t},\n\t\tvalidate()\n\t\t{\n\t\t\tconst result = Object.keys(this.unvalidatedRows).length === 0;\n\n\t\t\tthis.$emit('validation', result);\n\n\t\t\treturn result;\n\t\t},\n\t\tshowValidationErrors()\n\t\t{\n\t\t\tthis.$refs.formatTable.showValidationErrors();\n\t\t},\n\t},\n\tcomponents: {\n\t\tStep: StepBlock,\n\t\tFormatTable,\n\t\tSyncFieldsButton,\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<Step\n\t\t\t:title=\"displayedTitle\"\n\t\t\t:hint=\"displayedHint\"\n\t\t\t:is-open-initially=\"isOpenInitially\"\n\t\t\t:disabled=\"disabled\"\n\t\t\tref=\"stepBlock\"\n\t\t>\n\t\t\t<SyncFieldsButton v-if=\"isSyncSupported\" :disabled=\"isSyncDisabled\" @button-click=\"this.$emit('syncFields')\"/>\n\t\t\t<div class=\"ui-form-row fields-settings\">\n\t\t\t\t<FormatTable\n\t\t\t\t\t:fields-settings=\"fieldsSettings\"\n\t\t\t\t\t@row-toggle=\"onRowToggled\"\n\t\t\t\t\t@header-toggle=\"onHeaderToggled\"\n\t\t\t\t\t@row-field-changed=\"onRowFieldChanged\"\n\t\t\t\t\t:unvalidated-rows=\"unvalidatedRows\"\n\t\t\t\t\tref=\"formatTable\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Step>\n\t`,\n};\n","import { Dom, Event, Loc, Tag } from 'main.core';\nimport { Layout } from 'ui.sidepanel.layout';\nimport '../../css/format-selector.css';\nimport { DataType } from '../../types/data-types';\nimport type { DataFormatTemplate } from '../../types/data-types';\n\ntype DropdownControlOptions = {\n\ttitle: string,\n\tsubtitle: string,\n\toptions: Option[],\n\tfieldType: string,\n\tselected: string,\n};\n\nconst OptionType = {\n\tCUSTOM: 'custom',\n\tVALUE: 'value',\n};\n\ntype Option = {\n\ttitle: string,\n\ttype: OptionType.CUSTOM | OptionType.VALUE,\n\tvalue: string,\n};\n\nexport class FormatSelector\n{\n\tstatic openSlider(selected: Object, dataFormatTemplates: DataFormatTemplate, onClose: function)\n\t{\n\t\tBX.SidePanel.Instance.open('biconnector:import-field-formats', {\n\t\t\twidth: 584,\n\t\t\tcontentCallback: () => {\n\t\t\t\treturn Layout.createContent({\n\t\t\t\t\textensions: ['ui.forms', 'ui.layout-form', 'ui.alerts', 'biconnector.dataset-import'],\n\t\t\t\t\ttitle: Loc.getMessage('DATASET_IMPORT_FIELD_FORMAT_SELECTOR_TITLE'),\n\t\t\t\t\tcontent()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn FormatSelector.#getContent(selected, dataFormatTemplates);\n\t\t\t\t\t},\n\t\t\t\t\tbuttons({ cancelButton, SaveButton })\n\t\t\t\t\t{\n\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\tnew SaveButton({\n\t\t\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\t\t\t// hack: using a singleton instance to store the form didn't work\n\t\t\t\t\t\t\t\t\tconst form = BX.SidePanel.Instance.getTopSlider().getContainer().querySelector('#formatSelectorForm');\n\t\t\t\t\t\t\t\t\tonClose(FormatSelector.#extractValues(form));\n\t\t\t\t\t\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tcancelButton,\n\t\t\t\t\t\t];\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t},\n\t\t\tcacheable: false,\n\t\t});\n\t}\n\n\tstatic #extractValues(form): Object\n\t{\n\t\tconst formData = new FormData(form);\n\n\t\tconst result = Object.fromEntries(formData);\n\n\t\tconst customFieldsToExtract = ['date', 'datetime'];\n\n\t\tcustomFieldsToExtract.forEach((field) => {\n\t\t\tif (result[field] === 'custom')\n\t\t\t{\n\t\t\t\tresult[field] = result[`${field}CustomValue`];\n\t\t\t}\n\n\t\t\tdelete result[`${field}CustomValue`];\n\t\t});\n\n\t\treturn result;\n\t}\n\n\tstatic #getContent(selected: Object, dataFormatTemplates: DataFormatTemplate): HTMLElement\n\t{\n\t\tconst formRoot = Tag.render`\n\t\t\t<form class=\"ui-form\" id=\"formatSelectorForm\">\n\t\t\t</form>\n\t\t`;\n\n\t\tDom.append(FormatSelector.#getDropdownControl({\n\t\t\ttitle: Loc.getMessage('DATASET_IMPORT_FIELD_FORMAT_SELECTOR_DATE'),\n\t\t\tsubtitle: Loc.getMessage('DATASET_IMPORT_FIELD_FORMAT_SELECTOR_DATE_HINT'),\n\t\t\toptions: dataFormatTemplates[DataType.date],\n\t\t\tfieldType: DataType.date,\n\t\t\tselected: selected[DataType.date],\n\t\t}), formRoot);\n\n\t\tDom.append(FormatSelector.#getDropdownControl({\n\t\t\ttitle: Loc.getMessage('DATASET_IMPORT_FIELD_FORMAT_SELECTOR_DATETIME'),\n\t\t\tsubtitle: Loc.getMessage('DATASET_IMPORT_FIELD_FORMAT_SELECTOR_DATETIME_HINT'),\n\t\t\toptions: dataFormatTemplates[DataType.datetime],\n\t\t\tfieldType: DataType.datetime,\n\t\t\tselected: selected[DataType.datetime],\n\t\t}), formRoot);\n\n\t\tDom.append(FormatSelector.#getDropdownControl({\n\t\t\ttitle: Loc.getMessage('DATASET_IMPORT_FIELD_FORMAT_SELECTOR_MONEY'),\n\t\t\tsubtitle: Loc.getMessage('DATASET_IMPORT_FIELD_FORMAT_SELECTOR_MONEY_HINT'),\n\t\t\toptions: dataFormatTemplates[DataType.money],\n\t\t\tfieldType: DataType.money,\n\t\t\tselected: selected[DataType.money],\n\t\t}), formRoot);\n\n\t\tDom.append(FormatSelector.#getDropdownControl({\n\t\t\ttitle: Loc.getMessage('DATASET_IMPORT_FIELD_FORMAT_SELECTOR_DOUBLE'),\n\t\t\tsubtitle: Loc.getMessage('DATASET_IMPORT_FIELD_FORMAT_SELECTOR_DOUBLE_HINT'),\n\t\t\toptions: dataFormatTemplates[DataType.double],\n\t\t\tfieldType: DataType.double,\n\t\t\tselected: selected[DataType.double],\n\t\t}), formRoot);\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"format-selector\">\n\t\t\t\t<div class=\"ui-alert ui-alert-primary format-selector__hint\">\n\t\t\t\t\t<span class=\"ui-alert-message\">\n\t\t\t\t\t\t${Loc.getMessage('DATASET_IMPORT_FIELD_FORMAT_SELECTOR_HINT', {\n\t\t\t\t\t\t\t'[link]': '<a onclick=\"top.BX.Helper.show(`redirect=detail&code=23378698`)\">',\n\t\t\t\t\t\t\t'[/link]': '</a>',\n\t\t\t\t\t\t})}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t${formRoot}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tstatic #getDropdownControl(options: DropdownControlOptions): HTMLElement\n\t{\n\t\tconst selectRoot = Tag.render`\n\t\t\t<select class=\"ui-ctl-element\" name=\"${options.fieldType}\">\n\t\t\t</select>\n\t\t`;\n\n\t\tlet isCustomSelected = true;\n\t\tlet customElement = null;\n\t\tlet customOptionInput = null;\n\n\t\toptions.options.forEach((option) => {\n\t\t\tlet optionElement = '';\n\n\t\t\tconst isSelected = option.value === options.selected;\n\t\t\tif (isSelected)\n\t\t\t{\n\t\t\t\tisCustomSelected = false;\n\t\t\t}\n\n\t\t\tif (option.type === OptionType.VALUE)\n\t\t\t{\n\t\t\t\toptionElement = Tag.render`\n\t\t\t\t\t<option ${option.value === options.selected ? 'selected' : ''} value=\"${option.value}\">${option.title}</option>\n\t\t\t\t`;\n\t\t\t}\n\t\t\telse if (option.type === OptionType.CUSTOM)\n\t\t\t{\n\t\t\t\tcustomElement = Tag.render`\n\t\t\t\t\t<option value=\"custom\">${Loc.getMessage('DATASET_IMPORT_FIELD_FORMAT_SELECTOR_CUSTOM_FORMAT')}</option>\n\t\t\t\t`;\n\t\t\t\toptionElement = customElement;\n\n\t\t\t\tcustomOptionInput = Tag.render`\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100 format-selector__custom-value-input format-selector__custom-value-input--hidden\">\n\t\t\t\t\t\t<input class=\"ui-ctl-element\" name=\"${options.fieldType}CustomValue\" type=\"text\" placeholder=\"...\" value=\"${option.value ?? ''}\">\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\t\tEvent.bind(selectRoot, 'change', (event) => {\n\t\t\t\t\tconst value = event.target.value;\n\t\t\t\t\tif (value === 'custom')\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(customOptionInput, 'format-selector__custom-value-input--hidden');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(customOptionInput, 'format-selector__custom-value-input--hidden');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tDom.append(optionElement, selectRoot);\n\t\t});\n\n\t\tif (isCustomSelected)\n\t\t{\n\t\t\tif (customElement)\n\t\t\t{\n\t\t\t\tcustomElement.setAttribute('selected', true);\n\t\t\t}\n\n\t\t\tif (customOptionInput)\n\t\t\t{\n\t\t\t\tcustomOptionInput.querySelector('input').value = options.selected;\n\t\t\t\tDom.removeClass(customOptionInput, 'format-selector__custom-value-input--hidden');\n\t\t\t}\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t${options.title}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"format-selector__type-subtitle\">\n\t\t\t\t\t\t${options.subtitle}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100\">\n\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t${selectRoot}\n\t\t\t\t</div>\n\t\t\t\t${customOptionInput}\n\t\t\t</div>\n\t\t`;\n\t}\n}\n","import '../../css/fields-settings.css';\nimport 'ui.icon-set.crm';\n\nexport const SliderButton = {\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-form-row\">\n\t\t\t<div class=\"ui-ctl ui-ctl-before-icon ui-ctl-after-icon ui-ctl-w100 fields-settings__slider-button\">\n\t\t\t\t<div class=\"ui-ctl-before\">\n\t\t\t\t\t<div class=\"ui-icon-set --form-settings fields-settings__slider-icon\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle fields-settings__slider-chevron\">\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-ctl-element\">\n\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FIELD_SETTINGS_FORMAT_BUTTON') }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BaseField } from './base-field';\nimport { Switcher, SwitcherSize } from 'ui.switcher';\nimport '../../css/switcher-field.css';\n\nexport const SwitcherField = {\n\textends: BaseField,\n\tmounted()\n\t{\n\t\tnew Switcher({\n\t\t\tnode: this.$refs.switcher,\n\t\t\tsize: SwitcherSize.small,\n\t\t\tchecked: this.defaultValue,\n\t\t\thandlers: {\n\t\t\t\ttoggled: () => {\n\t\t\t\t\tthis.value = !this.value;\n\t\t\t\t\tthis.onInputChange(this.value);\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-form-row\">\n\t\t\t<div class=\"switcher-field\">\n\t\t\t\t<div ref=\"switcher\"></div>\n\t\t\t\t<div class=\"switcher-field__label\">\n\t\t\t\t\t<span>{{ title }}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BaseField } from './base-field';\n\nexport const CustomField = {\n\textends: BaseField,\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-form-row\">\n\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t<div class=\"ui-ctl-label-text\">{{ title }}</div>\n\t\t\t</div>\n\t\t\t<div class=\"ui-ctl ui-ctl-w100\">\n\t\t\t\t<slot name=\"field-content\"></slot>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BaseField } from './base-field';\n\nexport const DropdownField = {\n\textends: BaseField,\n\tprops: {\n\t\toptions: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-form-row\">\n\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t<div class=\"ui-ctl-label-text\">{{ title }}</div>\n\t\t\t</div>\n\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100\">\n\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t<select class=\"ui-ctl-element\" v-model=\"value\" @change=\"onInputChange($event.target.value)\">\n\t\t\t\t\t<option v-for=\"option in options\" :value=\"option.value\" :selected=\"option.value === defaultValue\">{{ option.title }}</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { FormatSelector } from '../../steps/data-type/format-selector';\nimport { SliderButton } from '../../steps/data-type/slider-button';\nimport type { FieldValueChangeEvent } from '../../types/field-value-change-event';\nimport { SwitcherField } from '../type/switcher-field';\nimport { StackWidgetComponent as FileUploadWidget } from 'ui.uploader.stack-widget';\nimport { CustomField } from '../type/custom-field';\nimport { DropdownField } from '../type/dropdown-field';\nimport '../../css/dataset-file-upload.css';\n\nexport const FileUploader = {\n\tcomponents: {\n\t\tFileUploadWidget,\n\t\tCustomField,\n\t\tDropdownField,\n\t\tSwitcherField,\n\t\tSliderButton,\n\t},\n\tprops: {\n\t\tdefaultEncoding: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tdefaultSeparator: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tdefaultFirstLineHeader: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t\tencodings: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tseparators: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tisEditMode: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t\tunvalidatedFields: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: {},\n\t\t},\n\t\tdataFormatTemplates: {\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tinputElement: null,\n\t\t\tareValidationErrorsShown: false,\n\t\t};\n\t},\n\temits: [\n\t\t'valueChange',\n\t\t'uploadError',\n\t\t'parsingOptionsChanged',\n\t],\n\tcomputed: {\n\t\tuploaderOptions()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcontroller: 'biconnector.integration.ui.fileUploaderController.datasetUploaderController',\n\t\t\t\tcontrollerOptions: {},\n\t\t\t\tmultiple: false,\n\t\t\t\tacceptOnlyImages: false,\n\t\t\t\tmaxFileSize: 1024 * 1024 * 60,\n\t\t\t\tautoUpload: true,\n\t\t\t\tacceptedFileTypes: ['.csv'],\n\t\t\t\tevents: {\n\t\t\t\t\tonUploadComplete: () => {\n\t\t\t\t\t\tthis.onUploadComplete();\n\t\t\t\t\t},\n\t\t\t\t\t'File:onRemove': () => {\n\t\t\t\t\t\tthis.onFileRemoved();\n\t\t\t\t\t},\n\t\t\t\t\tonError: () => {\n\t\t\t\t\t\tthis.onUploadError();\n\t\t\t\t\t},\n\t\t\t\t\t'File:onError': () => {\n\t\t\t\t\t\tthis.onUploadError();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\twidgetOptions()\n\t\t{\n\t\t\treturn {\n\t\t\t\tsize: 'large',\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\tonValueChange(event: FieldValueChangeEvent)\n\t\t{\n\t\t\tthis.$emit('valueChange', event);\n\t\t},\n\t\tonUploadComplete()\n\t\t{\n\t\t\tconst file = this.$refs.uploader.uploader.getFiles()[0];\n\t\t\tif (file && file.isComplete())\n\t\t\t{\n\t\t\t\tthis.areValidationErrorsShown = false;\n\t\t\t\tthis.$emit('valueChange', {\n\t\t\t\t\tnewValue: file.getServerFileId(),\n\t\t\t\t\tfieldName: 'fileToken',\n\t\t\t\t});\n\t\t\t\tthis.$emit('valueChange', {\n\t\t\t\t\tnewValue: file.getName(),\n\t\t\t\t\tfieldName: 'fileName',\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tonFileRemoved()\n\t\t{\n\t\t\tthis.$emit('valueChange', {\n\t\t\t\tnewValue: null,\n\t\t\t\tfieldName: 'fileToken',\n\t\t\t});\n\t\t},\n\t\tonUploadError()\n\t\t{\n\t\t\tthis.$emit('uploadError');\n\t\t},\n\t\tshowValidationErrors()\n\t\t{\n\t\t\tthis.areValidationErrorsShown = true;\n\t\t},\n\t\topenDataFormatSlider()\n\t\t{\n\t\t\tFormatSelector.openSlider(this.$store.state.config.dataFormats, this.dataFormatTemplates, (selectedFormats) => {\n\t\t\t\tthis.$store.commit('setDataFormats', selectedFormats);\n\t\t\t\tthis.$emit('parsingOptionsChanged');\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form\">\n\t\t\t<CustomField :title=\"$Bitrix.Loc.getMessage('DATASET_IMPORT_FILE_FIELD')\" name=\"file\">\n\t\t\t\t<template #field-content>\n\t\t\t\t\t<div class=\"dataset-file-upload\">\n\t\t\t\t\t\t<FileUploadWidget\n\t\t\t\t\t\t\t:uploaderOptions=\"uploaderOptions\"\n\t\t\t\t\t\t\t:widgetOptions=\"widgetOptions\"\n\t\t\t\t\t\t\tref=\"uploader\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<p class=\"dataset-import-field__error-text\" v-if=\"areValidationErrorsShown && !unvalidatedFields.file?.result\">\n\t\t\t\t\t\t\t{{ unvalidatedFields.file?.message }}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</CustomField>\n\t\t\t<div class=\"ui-form-row-inline\">\n\t\t\t\t<DropdownField\n\t\t\t\t\t:title=\"$Bitrix.Loc.getMessage('DATASET_IMPORT_FILE_ENCODING')\"\n\t\t\t\t\tname=\"encoding\"\n\t\t\t\t\t:options=\"encodings\"\n\t\t\t\t\t:default-value=\"defaultEncoding\"\n\t\t\t\t\t@value-change=\"onValueChange\"\n\t\t\t\t/>\n\t\t\t\t<DropdownField\n\t\t\t\t\t:title=\"$Bitrix.Loc.getMessage('DATASET_IMPORT_FILE_SEPARATOR')\"\n\t\t\t\t\tname=\"separator\"\n\t\t\t\t\t:options=\"separators\"\n\t\t\t\t\t:default-value=\"defaultSeparator\"\n\t\t\t\t\t@value-change=\"onValueChange\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<SliderButton @click=\"openDataFormatSlider\" />\n\t\t\t<SwitcherField\n\t\t\t\t:title=\"$Bitrix.Loc.getMessage('DATASET_IMPORT_FILE_FIRST_ROW_HEADER')\"\n\t\t\t\tname=\"firstLineHeader\"\n\t\t\t\t:default-value=\"defaultFirstLineHeader\"\n\t\t\t\t@value-change=\"onValueChange\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { FileUploader } from '../fields/file/file-uploader';\nimport type { FieldValueChangeEvent } from '../types/field-value-change-event';\nimport { BaseStep } from './base-step';\nimport { StepBlock } from '../layout/step-block';\n\nexport const FileStep = {\n\textends: BaseStep,\n\tprops: {\n\t\tencodings: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tseparators: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tdataFormatTemplates: {\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tfileProperties: this.$store.state.config.fileProperties,\n\t\t\tisErrorDisplayed: false,\n\t\t};\n\t},\n\temits: [\n\t\t'filePropertiesChange',\n\t\t'parsingOptionsChanged',\n\t],\n\tcomputed: {\n\t\tdefaultTitle()\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FILE_HEADER');\n\t\t},\n\t\tdefaultHint()\n\t\t{\n\t\t\tif (this.isErrorDisplayed)\n\t\t\t{\n\t\t\t\treturn this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FILE_HINT_ERROR');\n\t\t\t}\n\n\t\t\tif (this.isEditMode)\n\t\t\t{\n\t\t\t\treturn this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FILE_HINT_EDIT')\n\t\t\t\t\t.replace('[link]', '<a onclick=\"top.BX.Helper.show(`redirect=detail&code=23378680`)\">')\n\t\t\t\t\t.replace('[/link]', '</a>')\n\t\t\t\t;\n\t\t\t}\n\n\t\t\treturn this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FILE_HINT')\n\t\t\t\t.replace('[link]', '<a onclick=\"top.BX.Helper.show(`redirect=detail&code=23378680`)\">')\n\t\t\t\t.replace('[/link]', '</a>')\n\t\t\t;\n\t\t},\n\t\thintClass()\n\t\t{\n\t\t\treturn this.isErrorDisplayed ? 'ui-alert-danger' : 'ui-alert-primary';\n\t\t},\n\t\tisEditMode()\n\t\t{\n\t\t\treturn this.$store.getters.isEditMode;\n\t\t},\n\t\tunvalidatedFields()\n\t\t{\n\t\t\tconst result = {};\n\n\t\t\tconst fileValidationResult = this.validateFile();\n\t\t\tif (!fileValidationResult.result)\n\t\t\t{\n\t\t\t\tresult.file = fileValidationResult;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t},\n\tmethods: {\n\t\tonFilePropertiesChange(event: FieldValueChangeEvent)\n\t\t{\n\t\t\tif (event.fieldName === 'fileToken')\n\t\t\t{\n\t\t\t\tthis.isErrorDisplayed = false;\n\t\t\t}\n\n\t\t\tthis.fileProperties[event.fieldName] = event.newValue;\n\t\t\tthis.$store.commit('setFileProperties', this.fileProperties);\n\t\t\tif (event.fieldName !== 'fileName')\n\t\t\t{\n\t\t\t\tthis.$emit('filePropertiesChange');\n\t\t\t}\n\t\t\tthis.validate();\n\t\t},\n\t\tonUploadError()\n\t\t{\n\t\t\tthis.isErrorDisplayed = true;\n\t\t},\n\t\tonParsingOptionsChanged()\n\t\t{\n\t\t\tthis.$emit('parsingOptionsChanged');\n\t\t},\n\t\tvalidate()\n\t\t{\n\t\t\tlet result = true;\n\t\t\tif (!this.isEditMode)\n\t\t\t{\n\t\t\t\tresult = Object.keys(this.unvalidatedFields).length === 0;\n\t\t\t}\n\n\t\t\tthis.$emit('validation', result);\n\n\t\t\treturn result;\n\t\t},\n\t\tvalidateFile()\n\t\t{\n\t\t\tif (!this.isEditMode && !this.$store.state.config.fileProperties.fileToken)\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tresult: false,\n\t\t\t\t\tmessage: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FILE_NOT_SELECTED'),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tresult: true,\n\t\t\t};\n\t\t},\n\t\tshowValidationErrors()\n\t\t{\n\t\t\tthis.$refs.fileUploader.showValidationErrors();\n\t\t},\n\t},\n\tcomponents: {\n\t\tStep: StepBlock,\n\t\tFileUploader,\n\t},\n\ttemplate: `\n\t\t<Step\n\t\t\t:title=\"displayedTitle\"\n\t\t\t:hint=\"displayedHint\"\n\t\t\t:is-open-initially=\"isOpenInitially\"\n\t\t\t:disabled=\"disabled\"\n\t\t\t:hint-class=\"hintClass\"\n\t\t\tref=\"stepBlock\"\n\t\t>\n\t\t\t<FileUploader\n\t\t\t\t@value-change=\"onFilePropertiesChange\"\n\t\t\t\t@upload-error=\"onUploadError\"\n\t\t\t\t@parsing-options-changed=\"onParsingOptionsChanged\"\n\t\t\t\tref=\"fileUploader\"\n\t\t\t\t:encodings=\"encodings\"\n\t\t\t\t:separators=\"separators\"\n\t\t\t\t:default-encoding=\"fileProperties.encoding\"\n\t\t\t\t:default-first-line-header=\"fileProperties.firstLineHeader\"\n\t\t\t\t:default-separator=\"fileProperties.separator\"\n\t\t\t\t:is-edit-mode=\"isEditMode\"\n\t\t\t\t:unvalidated-fields=\"unvalidatedFields\"\n\t\t\t\t:data-format-templates=\"dataFormatTemplates\"\n\t\t\t/>\n\t\t</Step>\n\t`,\n};\n","import { StepBlock } from './step-block';\n\nexport const AppSection = {\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\tcustomClasses: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t},\n\t},\n\tcomponents: {\n\t\tStep: StepBlock,\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<Step\n\t\t\t:title=\"title\"\n\t\t\t:can-collapse=\"false\"\n\t\t\t:custom-classes=\"customClasses\"\n\t\t>\n\t\t\t<slot></slot>\n\t\t</Step>\n\t`,\n};\n","import '../../css/dataset-preview-table.css';\n\nexport const TableHeader = {\n\tprops: {\n\t\theaders: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: [],\n\t\t},\n\t\tcolumnVisibility: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: [],\n\t\t},\n\t},\n\tcomputed: {\n\t\tvisibleHeaders()\n\t\t{\n\t\t\treturn this.headers.filter((_, index) => this.columnVisibility[index]);\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<thead>\n\t\t\t<tr class=\"dataset-preview-table__header-row\">\n\t\t\t\t<th class=\"dataset-preview-table__header\" v-for=\"header in visibleHeaders\" :title=\"header\">{{ header }}</th>\n\t\t\t</tr>\n\t\t</thead>\n\t`,\n};\n","import '../../css/dataset-preview-table.css';\n\nexport const TableRow = {\n\tprops: {\n\t\trow: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tcolumnVisibility: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: [],\n\t\t},\n\t},\n\tcomputed: {\n\t\tvisibleValues()\n\t\t{\n\t\t\treturn this.row.filter((_, index) => this.columnVisibility[index]);\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<tr>\n\t\t\t<td class=\"dataset-preview-table__cell\" v-for=\"value in visibleValues\" :title=\"value\">{{ value }}</td>\n\t\t</tr>\n\t`,\n};\n","import '../../css/dataset-preview-table.css';\nimport { Ears } from 'ui.ears';\nimport { TableHeader } from './table-header';\nimport { TableRow } from './table-row';\nimport { Dom, debounce } from 'main.core';\n\nexport const PreviewTable = {\n\tprops: {\n\t\theaders: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: [],\n\t\t},\n\t\trows: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: [],\n\t\t},\n\t\tcolumnVisibility: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: [],\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tdisplayedColumnVisibility: this.columnVisibility,\n\t\t\tdebouncedRefresh: debounce(this.refreshColumns, 1000),\n\t\t};\n\t},\n\tmounted()\n\t{\n\t\tconst ears = new Ears({\n\t\t\tcontainer: document.querySelector('.dataset-preview-table'),\n\t\t\tsmallSize: true,\n\t\t\tnoScrollbar: false,\n\t\t});\n\n\t\tears.init();\n\t},\n\tmethods: {\n\t\trefreshColumns(newVisibility)\n\t\t{\n\t\t\tthis.displayedColumnVisibility = newVisibility;\n\t\t\tDom.removeClass(this.$refs.table, 'dataset-preview-table--fade');\n\t\t},\n\t},\n\twatch: {\n\t\tcolumnVisibility(newValue, oldValue)\n\t\t{\n\t\t\tDom.addClass(this.$refs.table, 'dataset-preview-table--fade');\n\t\t\tthis.debouncedRefresh(newValue);\n\t\t},\n\t},\n\tcomponents: {\n\t\tTableHeader,\n\t\tTableRow,\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"dataset-preview-table\" ref=\"table\">\n\t\t\t<table class=\"dataset-preview-table__table\">\n\t\t\t\t<TableHeader v-if=\"headers.length > 0\" :headers=\"headers\" :column-visibility=\"displayedColumnVisibility\" />\n\t\t\t\t<tbody>\n\t\t\t\t\t<TableRow v-for=\"row in rows\" :row=\"row\" :column-visibility=\"displayedColumnVisibility\" />\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t`,\n};\n","import { Loader } from 'main.loader';\nimport { AppSection } from '../layout/app-section';\nimport '../css/import-preview.css';\nimport { PreviewTable } from './import-preview/preview-table';\n\nexport const ImportPreview = {\n\tcomponents: {\n\t\tAppSection,\n\t\tPreviewTable,\n\t},\n\tprops: {\n\t\temptyStateText: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\terror: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tisLoading: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t\tneedShowHeadersWithEmptyRows: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tisEditMode(): boolean\n\t\t{\n\t\t\treturn this.$store.getters.isEditMode;\n\t\t},\n\t\theaders()\n\t\t{\n\t\t\treturn this.$store.getters.previewHeaders;\n\t\t},\n\t\trows()\n\t\t{\n\t\t\treturn this.$store.state.previewData.rows;\n\t\t},\n\t\tisEverythingHidden()\n\t\t{\n\t\t\treturn this.headers.length > 0 && this.$store.getters.areNoRowsVisible;\n\t\t},\n\t\thasData()\n\t\t{\n\t\t\treturn this.$store.getters.hasData;\n\t\t},\n\t\thasHeaders(): boolean\n\t\t{\n\t\t\treturn this.headers.length > 0;\n\t\t},\n\t\tdisplayedEmptyStateText()\n\t\t{\n\t\t\treturn this.emptyStateText ?? this.$Bitrix.Loc.getMessage('DATASET_IMPORT_PREVIEW_EMPTY_STATE');\n\t\t},\n\t\tdisplayedEverythingHiddenText()\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('DATASET_IMPORT_PREVIEW_EVERYTHING_HIDDEN');\n\t\t},\n\t\tcolumnVisibility()\n\t\t{\n\t\t\treturn this.$store.getters.columnVisibilityMap;\n\t\t},\n\t\tisErrorInEditMode()\n\t\t{\n\t\t\treturn this.hasData && this.error && this.isEditMode;\n\t\t},\n\t\tisEditModeInitialDataDisplayed()\n\t\t{\n\t\t\treturn this.isEditMode && !this.$store.state.config.fileProperties.fileToken;\n\t\t},\n\t\tdisplayedTitle()\n\t\t{\n\t\t\treturn this.isEditModeInitialDataDisplayed\n\t\t\t\t? this.$Bitrix.Loc.getMessage('DATASET_IMPORT_INITIAL_DATA_PREVIEW_TITLE')\n\t\t\t\t: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_PREVIEW_TITLE')\n\t\t\t;\n\t\t},\n\t\thasDataDisplayedHint()\n\t\t{\n\t\t\treturn this.isEditModeInitialDataDisplayed\n\t\t\t\t? this.$Bitrix.Loc.getMessage('DATASET_IMPORT_INITIAL_DATA_PREVIEW_HINT')\n\t\t\t\t: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_PREVIEW_HINT')\n\t\t\t;\n\t\t},\n\t},\n\twatch: {\n\t\tisLoading(newValue)\n\t\t{\n\t\t\tif (this.loader)\n\t\t\t{\n\t\t\t\tthis.loader.destroy();\n\t\t\t}\n\n\t\t\tif (newValue)\n\t\t\t{\n\t\t\t\tthis.loader = new Loader({\n\t\t\t\t\ttarget: this.$refs.loadingAnchor,\n\t\t\t\t\tsize: 77,\n\t\t\t\t\tcolor: 'var(--ui-color-primary)',\n\t\t\t\t\tstrokeWidth: 4,\n\t\t\t\t});\n\t\t\t\tthis.loader.show();\n\t\t\t}\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<AppSection\n\t\t\t:title=\"displayedTitle\"\n\t\t\t:custom-classes=\"['dataset-import-step--full-height', 'dataset-import-step--sticky', 'import-preview']\"\n\t\t>\n\t\t\t<div class=\"import-preview__loading\" ref=\"loadingAnchor\"></div>\n\t\t\t<template v-if=\"!isLoading\">\n\t\t\t\t<template v-if=\"error\">\n\t\t\t\t\t<div class=\"import-preview__no-data\" v-if=\"isEverythingHidden\">\n\t\t\t\t\t\t<div class=\"import-preview__no-data-logo\"></div>\n\t\t\t\t\t\t<p class=\"import-preview__no-data-text\">{{ displayedEverythingHiddenText }}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<div class=\"import-preview__has-data import-preview__has-data--edit-mode-error\" v-if=\"isEditMode\">\n\t\t\t\t\t\t\t<span class=\"import-preview__hint\">{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_PREVIEW_HINT') }}</span>\n\t\t\t\t\t\t\t<PreviewTable\n\t\t\t\t\t\t\t\t:headers=\"headers\"\n\t\t\t\t\t\t\t\t:column-visibility=\"columnVisibility\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div class=\"import-preview__edit-mode-error\">\n\t\t\t\t\t\t\t\t<div class=\"import-preview__error-logo\"></div>\n\t\t\t\t\t\t\t\t<p class=\"import-preview__no-data-text\">{{ error }}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"import-preview__has-data\" v-else>\n\t\t\t\t\t\t\t<span class=\"import-preview__hint\">{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_PREVIEW_HINT') }}</span>\n\t\t\t\t\t\t\t<PreviewTable\n\t\t\t\t\t\t\t\t:headers=\"headers\"\n\t\t\t\t\t\t\t\t:column-visibility=\"columnVisibility\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div class=\"import-preview__edit-mode-error\">\n\t\t\t\t\t\t\t\t<div class=\"import-preview__error-logo\"></div>\n\t\t\t\t\t\t\t\t<p class=\"import-preview__no-data-text\">{{ error }}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div class=\"import-preview__no-data\" v-if=\"isEverythingHidden\">\n\t\t\t\t\t\t<div class=\"import-preview__no-data-logo\"></div>\n\t\t\t\t\t\t<p class=\"import-preview__no-data-text\">{{ displayedEverythingHiddenText }}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"import-preview__has-data\" v-else-if=\"hasData\">\n\t\t\t\t\t\t<span class=\"import-preview__hint\">{{ hasDataDisplayedHint }}</span>\n\t\t\t\t\t\t<PreviewTable\n\t\t\t\t\t\t\t:headers=\"headers\"\n\t\t\t\t\t\t\t:rows=\"rows\"\n\t\t\t\t\t\t\t:column-visibility=\"columnVisibility\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"import-preview__has-data\" v-else-if=\"hasHeaders && needShowHeadersWithEmptyRows\">\n\t\t\t\t\t\t<PreviewTable\n\t\t\t\t\t\t\t:headers=\"headers\"\n\t\t\t\t\t\t\t:column-visibility=\"columnVisibility\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class=\"import-preview__edit-mode-error\">\n\t\t\t\t\t\t\t<div class=\"import-preview__no-data-logo\"></div>\n\t\t\t\t\t\t\t<p class=\"import-preview__no-data-text\">{{ displayedEmptyStateText }}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"import-preview__no-data\" v-else>\n\t\t\t\t\t\t<div class=\"import-preview__no-data-logo\"></div>\n\t\t\t\t\t\t<p class=\"import-preview__no-data-text\">{{ displayedEmptyStateText }}</p>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t</AppSection>\n\t`,\n};\n","import { ajax as Ajax, Tag, Type } from 'main.core';\nimport { Popup as MainPopup, PopupManager } from 'main.popup';\nimport type { AnalyticsOptions } from 'ui.analytics';\nimport { sendData } from 'ui.analytics';\nimport { SidePanel } from 'ui.sidepanel';\nimport { Button, ButtonColor } from 'ui.buttons';\n\n// language=Vue\nexport const BaseApp = {\n\tprops: {\n\t\tappParams: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: {},\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tsteps: {},\n\t\t\tshownPopups: {},\n\t\t\tisChanged: false,\n\t\t\tisSaveComplete: false,\n\t\t\tlastChangedStep: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\tsourceCode()\n\t\t{\n\t\t\treturn '';\n\t\t},\n\t\tloadParams()\n\t\t{\n\t\t\treturn {};\n\t\t},\n\t\tsaveParams()\n\t\t{\n\t\t\treturn {};\n\t\t},\n\t\tisEditMode()\n\t\t{\n\t\t\treturn false;\n\t\t},\n\t\tdatasetId()\n\t\t{\n\t\t\treturn this.$store.state.config.datasetProperties.id;\n\t\t},\n\t\tisSaveEnabled(): boolean\n\t\t{\n\t\t\treturn !(this.$store.getters.areNoRowsVisible) && this.isValidatedForSave && !this.previewError;\n\t\t},\n\t\tisValidatedForSave(): boolean\n\t\t{\n\t\t\treturn true;\n\t\t},\n\t\tunsavedChangesPopupTitle(): string\n\t\t{\n\t\t\treturn this.isEditMode\n\t\t\t\t? this.$Bitrix.Loc.getMessage('DATASET_IMPORT_UNSAVED_CHANGES_TITLE_EDIT')\n\t\t\t\t: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_UNSAVED_CHANGES_TITLE')\n\t\t\t;\n\t\t},\n\t\tunsavedChangesPopupText(): string\n\t\t{\n\t\t\treturn this.isEditMode\n\t\t\t\t? this.$Bitrix.Loc.getMessage('DATASET_IMPORT_UNSAVED_CHANGES_TEXT_EDIT')\n\t\t\t\t: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_UNSAVED_CHANGES_TEXT')\n\t\t\t;\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tthis.$Bitrix.eventEmitter.subscribe('biconnector:dataset-import:createButtonClick', this.onSaveButtonClick);\n\t\tthis.$Bitrix.eventEmitter.subscribe('biconnector:dataset-import:cancelButtonClick', this.onCancelButtonClick);\n\n\t\tconst slider = SidePanel.Instance.getTopSlider();\n\t\tif (slider)\n\t\t{\n\t\t\ttop.BX.addCustomEvent(slider, 'SidePanel.Slider:onClose', this.onSliderClose);\n\n\t\t\taddEventListener('beforeunload', (event) => {\n\t\t\t\ttop.BX.removeCustomEvent(slider, 'SidePanel.Slider:onClose', this.onSliderClose);\n\t\t\t});\n\t\t}\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.$Bitrix.eventEmitter.unsubscribe('biconnector:dataset-import:createButtonClick', this.onSaveButtonClick);\n\t\tthis.$Bitrix.eventEmitter.unsubscribe('biconnector:dataset-import:cancelButtonClick', this.onCancelButtonClick);\n\t},\n\tmethods: {\n\t\tmarkAsChanged()\n\t\t{\n\t\t\tthis.isChanged = true;\n\t\t},\n\t\tonSliderClose(event)\n\t\t{\n\t\t\tif (!this.isChanged)\n\t\t\t{\n\t\t\t\tif (!this.isSaveComplete)\n\t\t\t\t{\n\t\t\t\t\tthis.sendAnalytics({\n\t\t\t\t\t\tevent: this.isEditMode ? 'edit_end' : 'creation_end',\n\t\t\t\t\t\tstatus: 'error',\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.denyAction();\n\n\t\t\tif (PopupManager.getPopupById('unsaved'))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst continueButton = new Button({\n\t\t\t\tcolor: ButtonColor.PRIMARY,\n\t\t\t\ttext: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_CONTINUE_IMPORT'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick() {\n\t\t\t\t\t\tpopup.destroy();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tconst closeButton = new Button({\n\t\t\t\tcolor: ButtonColor.LINK,\n\t\t\t\ttext: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_CONFIRM_CANCEL_IMPORT'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tthis.isChanged = false;\n\t\t\t\t\t\tthis.closeApp();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tconst popupHeader = this.unsavedChangesPopupTitle;\n\t\t\tconst popupText = this.unsavedChangesPopupText;\n\n\t\t\tconst popup = new MainPopup({\n\t\t\t\tid: 'unsaved',\n\t\t\t\tcontent: Tag.render`\n\t\t\t\t\t<div class=\"generic-popup\">\n\t\t\t\t\t\t<h3 class=\"generic-popup__header\">${popupHeader}</h3>\n\t\t\t\t\t\t<div class=\"generic-popup__content\">\n\t\t\t\t\t\t\t${popupText}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"generic-popup__buttons-wrapper\">\n\t\t\t\t\t\t\t${continueButton.render()}\n\t\t\t\t\t\t\t${closeButton.render()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t\twidth: 440,\n\t\t\t\tnoAllPaddings: true,\n\t\t\t\tautoHide: false,\n\t\t\t\tfixed: true,\n\t\t\t\toverlay: true,\n\t\t\t});\n\n\t\t\tpopup.show();\n\t\t},\n\t\tcloseApp()\n\t\t{\n\t\t\tSidePanel.Instance.getTopSlider().close();\n\t\t},\n\t\ttoggleStepState(step: string, disabled: ?boolean = null)\n\t\t{\n\t\t\tif (!this.steps[step])\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (Type.isNull(disabled))\n\t\t\t{\n\t\t\t\tthis.steps[step].disabled = !Boolean(this.steps[step].disabled);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.steps[step].disabled = disabled;\n\t\t\t}\n\t\t},\n\t\ttogglePopup(step: string, shown: ?boolean = null)\n\t\t{\n\t\t\tif (Type.isNull(shown))\n\t\t\t{\n\t\t\t\tthis.shownPopups[step] = !Boolean(this.shownPopups[step]);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.shownPopups[step] = shown;\n\t\t\t}\n\t\t},\n\t\tloadDataset()\n\t\t{\n\t\t\tAjax.runAction('biconnector.externalsource.dataset.view', {\n\t\t\t\tdata: {\n\t\t\t\t\ttype: this.sourceCode,\n\t\t\t\t\tfields: this.loadParams,\n\t\t\t\t},\n\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.onLoadSuccess(response);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tthis.onLoadError(error);\n\t\t\t\t});\n\t\t},\n\t\tonStepValidation(step, validationResult)\n\t\t{\n\t\t\tif (!this.steps[step])\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.steps[step].valid = validationResult;\n\t\t},\n\t\tonSaveButtonClick()\n\t\t{\n\t\t\tthis.onSaveStart()\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.handleSaveAction();\n\t\t\t\t})\n\t\t\t\t.catch(() => {})\n\t\t\t;\n\t\t},\n\t\tonCancelButtonClick()\n\t\t{\n\t\t\tthis.closeApp();\n\t\t},\n\t\thandleSaveAction()\n\t\t{\n\t\t\tif (this.isEditMode)\n\t\t\t{\n\t\t\t\tthis.updateDataset();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.saveDataset();\n\t\t\t}\n\t\t},\n\t\tsaveDataset()\n\t\t{\n\t\t\tAjax.runAction('biconnector.externalsource.dataset.add', {\n\t\t\t\tdata: {\n\t\t\t\t\ttype: this.sourceCode,\n\t\t\t\t\tfields: this.saveParams,\n\t\t\t\t},\n\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.onSaveEnd(response);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tthis.onSaveError();\n\t\t\t\t});\n\t\t},\n\t\tupdateDataset()\n\t\t{\n\t\t\tAjax.runAction('biconnector.externalsource.dataset.update', {\n\t\t\t\tdata: {\n\t\t\t\t\tid: this.datasetId,\n\t\t\t\t\ttype: this.sourceCode,\n\t\t\t\t\tfields: this.saveParams,\n\t\t\t\t},\n\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.onSaveEnd(response);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tthis.onSaveError();\n\t\t\t\t});\n\t\t},\n\t\tonSaveStart(): Promise\n\t\t{\n\t\t\treturn Promise.resolve();\n\t\t},\n\t\tonSaveEnd()\n\t\t{\n\t\t},\n\t\tonSaveError()\n\t\t{\n\t\t},\n\t\tonLoadStart()\n\t\t{\n\t\t},\n\t\tonLoadSuccess(response)\n\t\t{\n\t\t},\n\t\tonLoadError(response)\n\t\t{\n\t\t},\n\t\treload()\n\t\t{\n\t\t\twindow.location.reload();\n\t\t},\n\t\tsendAnalytics(params: AnalyticsOptions)\n\t\t{\n\t\t\tif (this.sourceCode)\n\t\t\t{\n\t\t\t\tsendData({\n\t\t\t\t\t...this.getBaseAnalyticsParams(),\n\t\t\t\t\t...params,\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tgetBaseAnalyticsParams()\n\t\t{\n\t\t\treturn {\n\t\t\t\ttool: 'BI_Builder',\n\t\t\t\tc_section: 'BI_Builder',\n\t\t\t\tcategory: this.sourceCode.toUpperCase(),\n\t\t\t};\n\t\t},\n\t},\n};\n","import { AppLayout } from '../layout/app-layout';\nimport { ImportConfig } from '../layout/import-config';\nimport { FileErrorsPopup } from '../popups/file-checking/file-errors-popup';\nimport { CheckingProgressPopup } from '../popups/file-checking/checking-progress-popup';\nimport { CheckingSuccessPopup } from '../popups/file-checking/checking-success-popup';\nimport { CheckingFailedPopup } from '../popups/file-checking/checking-failed-popup';\nimport { GenericPopup } from '../popups/generic-popup';\nimport { ImportFailurePopup } from '../popups/saving/import-failure-popup';\nimport { ImportProgressPopup } from '../popups/saving/import-progress-popup';\nimport { ImportSuccessPopup } from '../popups/saving/import-success-popup';\nimport { DatasetPropertiesStep } from '../steps/dataset-properties';\nimport { FieldsSettingsStep } from '../steps/fields-settings';\nimport { FileStep } from '../steps/file';\nimport { ImportPreview } from '../steps/import-preview';\nimport { BaseApp } from './base-app';\nimport { ajax as Ajax, Dom } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nexport const CsvApp = {\n\textends: BaseApp,\n\tdata()\n\t{\n\t\treturn {\n\t\t\tsteps: {\n\t\t\t\tfile: {\n\t\t\t\t\tdisabled: false,\n\t\t\t\t\tvalid: this.$store.getters.isEditMode,\n\t\t\t\t},\n\t\t\t\tproperties: {\n\t\t\t\t\tdisabled: !this.$store.getters.isEditMode,\n\t\t\t\t\tvalid: true,\n\t\t\t\t},\n\t\t\t\tfields: {\n\t\t\t\t\tdisabled: !this.$store.getters.isEditMode,\n\t\t\t\t\tvalid: true,\n\t\t\t\t},\n\t\t\t},\n\t\t\tshownPopups: {\n\t\t\t\tsavingProgress: false,\n\t\t\t\tsavingSuccess: false,\n\t\t\t\tsavingFailure: false,\n\t\t\t\teditModeFileReplacement: false,\n\t\t\t\tcheckFileProgress: false,\n\t\t\t\tcheckFileSuccess: false,\n\t\t\t\tcheckFileFailure: false,\n\t\t\t\tfileErrors: false,\n\t\t\t},\n\t\t\tisValidationComplete: true,\n\t\t\tpopupParams: {\n\t\t\t\tsavingSuccess: {},\n\t\t\t\tfileErrors: {\n\t\t\t\t\tisSavingMode: false,\n\t\t\t\t},\n\t\t\t},\n\t\t\tlastReloadSource: null,\n\t\t\tinitialPreviewData: {},\n\t\t\tinitialFieldsSettings: [],\n\t\t\tpreviewError: '',\n\t\t\tisEditModeSaveConfirmed: false,\n\t\t\tisDataLoadingAnimationDisplayed: false,\n\t\t\thasMinimalLoadingAnimationTimePassed: true,\n\t\t\tcheckFileErrors: [],\n\t\t\tisErrorsChecked: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tsourceCode()\n\t\t{\n\t\t\treturn 'csv';\n\t\t},\n\t\tisEditMode()\n\t\t{\n\t\t\treturn this.$store.getters.isEditMode;\n\t\t},\n\t\tloadParams()\n\t\t{\n\t\t\treturn {\n\t\t\t\tfileProperties: this.$store.state.config.fileProperties,\n\t\t\t\tdatasetProperties: this.$store.state.config.datasetProperties,\n\t\t\t\tfieldsSettings: this.$store.state.config.fieldsSettings,\n\t\t\t\tdataFormats: this.$store.state.config.dataFormats,\n\t\t\t};\n\t\t},\n\t\tsaveParams()\n\t\t{\n\t\t\treturn {\n\t\t\t\tfileProperties: this.$store.state.config.fileProperties,\n\t\t\t\tdatasetProperties: this.$store.state.config.datasetProperties,\n\t\t\t\tfieldsSettings: this.$store.state.config.fieldsSettings,\n\t\t\t\tdataFormats: this.$store.state.config.dataFormats,\n\t\t\t};\n\t\t},\n\t\tdatasetId()\n\t\t{\n\t\t\treturn this.$store.state.config.datasetProperties.id;\n\t\t},\n\t\tisValidatedForSave()\n\t\t{\n\t\t\treturn this.steps.fields.valid && this.steps.properties.valid && this.steps.file.valid;\n\t\t},\n\t\timportFailurePopupTitle()\n\t\t{\n\t\t\treturn this.isEditMode ? this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FAILURE_POPUP_HEADER_EDIT') : this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FAILURE_POPUP_HEADER');\n\t\t},\n\t\timportSuccessPopupTitle()\n\t\t{\n\t\t\treturn this.isEditMode\n\t\t\t\t? this.$Bitrix.Loc.getMessage('DATASET_IMPORT_SUCCESS_POPUP_HEADER_EDIT').replace('#DATASET_TITLE#', this.popupParams.savingSuccess.title)\n\t\t\t\t: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_SUCCESS_POPUP_HEADER').replace('#DATASET_TITLE#', this.popupParams.savingSuccess.title);\n\t\t},\n\t\timportSuccessPopupDescription()\n\t\t{\n\t\t\treturn this.$store.state.config.fileProperties.fileName\n\t\t\t\t? this.$Bitrix.Loc.getMessage('DATASET_IMPORT_SUCCESS_POPUP_DESCRIPTION').replace('#FILE_NAME#', this.popupParams.savingSuccess.fileName)\n\t\t\t\t: '';\n\t\t},\n\t\timportProgressPopupDescription()\n\t\t{\n\t\t\treturn this.isEditMode\n\t\t\t\t? this.$Bitrix.Loc.getMessage('DATASET_IMPORT_PROGRESS_POPUP_DESCRIPTION_EDIT')\n\t\t\t\t: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_PROGRESS_POPUP_DESCRIPTION');\n\t\t},\n\t},\n\tmethods: {\n\t\tmarkAsChanged()\n\t\t{\n\t\t\tthis.isChanged = true;\n\t\t},\n\t\tonDatasetPropertiesChanged()\n\t\t{\n\t\t\tthis.markAsChanged();\n\t\t\tif (this.lastChangedStep !== 'properties')\n\t\t\t{\n\t\t\t\tthis.sendAnalytics({\n\t\t\t\t\tevent: this.isEditMode ? 'edit_start' : 'creation_start',\n\t\t\t\t\tc_element: 'step_2',\n\t\t\t\t\t...(this.isEditMode && { p1: `datasetName_${this.$store.state.config.datasetProperties.name.replaceAll('_', '')}`}),\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.lastChangedStep = 'properties';\n\t\t},\n\t\tonFieldsSettingsChanged()\n\t\t{\n\t\t\tthis.markAsChanged();\n\t\t\tif (this.lastChangedStep !== 'fields')\n\t\t\t{\n\t\t\t\tthis.sendAnalytics({\n\t\t\t\t\tevent: this.isEditMode ? 'edit_start' : 'creation_start',\n\t\t\t\t\tc_element: 'step_3',\n\t\t\t\t\t...(this.isEditMode && { p1: `datasetName_${this.$store.state.config.datasetProperties.name.replaceAll('_', '')}`}),\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.lastChangedStep = 'fields';\n\t\t\tthis.isErrorsChecked = false;\n\t\t},\n\t\tonDatasetReloadNeeded(reloadSource)\n\t\t{\n\t\t\tthis.markAsChanged();\n\t\t\tthis.previewError = '';\n\t\t\tthis.lastReloadSource = reloadSource;\n\t\t\tthis.isErrorsChecked = false;\n\n\t\t\tif (this.$store.state.config.fileProperties.fileToken)\n\t\t\t{\n\t\t\t\tif (reloadSource === 'file')\n\t\t\t\t{\n\t\t\t\t\tthis.lastChangedStep = 'file';\n\n\t\t\t\t\tthis.sendAnalytics({\n\t\t\t\t\t\tevent: this.isEditMode ? 'edit_start' : 'creation_start',\n\t\t\t\t\t\tc_element: 'step_1',\n\t\t\t\t\t\t...(this.isEditMode && { p1: `datasetName_${this.$store.state.config.datasetProperties.name.replaceAll('_', '')}` }),\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.startPreviewLoadingAnimation();\n\t\t\t\t}\n\n\t\t\t\tthis.loadDataset();\n\t\t\t}\n\t\t\telse if (this.isEditMode)\n\t\t\t{\n\t\t\t\tthis.$store.commit('setPreviewData', this.initialPreviewData);\n\t\t\t\tthis.$store.commit('setFieldsSettings', this.initialFieldsSettings);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$store.commit('setPreviewData', []);\n\t\t\t\tthis.$refs.propertiesStep.close();\n\t\t\t\tthis.$refs.fieldsStep.close();\n\t\t\t\tthis.toggleStepState('properties', true);\n\t\t\t\tthis.toggleStepState('fields', true);\n\t\t\t\tthis.toggleCheckFileButton(true);\n\t\t\t}\n\t\t},\n\t\tprocessLoadResponse(response)\n\t\t{\n\t\t\tconst responseData = response.data;\n\n\t\t\tif (!responseData || responseData.data.length === 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.lastReloadSource === 'file' && !this.isEditMode)\n\t\t\t{\n\t\t\t\tconst headers = [];\n\t\t\t\tresponseData.headers.forEach((header, index) => {\n\t\t\t\t\theaders.push(this.prepareHeader(header, index));\n\t\t\t\t});\n\n\t\t\t\tthis.$store.commit('setFieldsSettings', headers);\n\t\t\t}\n\t\t\tthis.$store.commit('setPreviewData', responseData.data);\n\t\t},\n\t\tprepareHeader(header, index)\n\t\t{\n\t\t\treturn {\n\t\t\t\tvisible: true,\n\t\t\t\ttype: header.type,\n\t\t\t\tname: header.name && header.name.length > 0 ? header.name : `field_${index}`,\n\t\t\t\toriginalType: null,\n\t\t\t\toriginalName: header.externalCode,\n\t\t\t\texternalCode: header.externalCode,\n\t\t\t};\n\t\t},\n\t\tonLoadSuccess(response)\n\t\t{\n\t\t\tthis.stopPreviewLoadingAnimation();\n\t\t\tthis.processLoadResponse(response);\n\n\t\t\tthis.$refs.propertiesStep.open();\n\t\t\tthis.$refs.fieldsStep.open();\n\t\t\tthis.toggleStepState('properties', false);\n\t\t\tthis.toggleStepState('fields', false);\n\t\t\tthis.$refs.fieldsStep.validate();\n\t\t\tthis.toggleCheckFileButton(false);\n\t\t},\n\t\tonLoadError(response)\n\t\t{\n\t\t\tthis.stopPreviewLoadingAnimation();\n\t\t\tthis.previewError = response.errors[0]?.message ?? this.$Bitrix.Loc.getMessage('DATASET_IMPORT_PREVIEW_ERROR_FILE');\n\t\t},\n\t\tonSaveStart(): Promise\n\t\t{\n\t\t\tif (!this.isValidatedForSave)\n\t\t\t{\n\t\t\t\tthis.$refs.fileStep.showValidationErrors();\n\t\t\t\tthis.$refs.fieldsStep.showValidationErrors();\n\t\t\t\tthis.$refs.propertiesStep.showValidationErrors();\n\n\t\t\t\treturn Promise.reject();\n\t\t\t}\n\n\t\t\tif (this.isEditMode && !this.isEditModeSaveConfirmed && this.$store.state.config.fileProperties.fileToken)\n\t\t\t{\n\t\t\t\tthis.togglePopup('editModeFileReplacement', true);\n\n\t\t\t\treturn Promise.reject();\n\t\t\t}\n\n\t\t\tthis.togglePopup('savingProgress', true);\n\t\t\tif (this.isEditMode && !this.$store.state.config.fileProperties.fileToken)\n\t\t\t{\n\t\t\t\treturn Promise.resolve();\n\t\t\t}\n\n\t\t\tthis.popupParams.fileErrors.isSavingMode = true;\n\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.checkFile()\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\tthis.togglePopup('savingProgress', false);\n\t\t\t\t\t\tthis.togglePopup('fileErrors', true);\n\t\t\t\t\t\treject();\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tonSaveEnd(response)\n\t\t{\n\t\t\tconst datasetName = response.data.name ?? this.$store.state.config.datasetProperties.name;\n\t\t\tconst datasetId = response.data.id ?? this.$store.state.config.datasetProperties.id;\n\t\t\tthis.popupParams.savingSuccess = {\n\t\t\t\ttitle: datasetName,\n\t\t\t\tdatasetId,\n\t\t\t\tfileName: this.$store.state.config.fileProperties.fileName,\n\t\t\t};\n\n\t\t\tthis.togglePopup('savingProgress', false);\n\t\t\tthis.togglePopup('savingSuccess', true);\n\t\t\tthis.isChanged = false;\n\t\t\tthis.isSaveComplete = true;\n\t\t\tBX.SidePanel.Instance.postMessage(window, 'BIConnector.dataset-import:onDatasetCreated', {});\n\t\t\tthis.sendAnalytics({\n\t\t\t\tevent: this.isEditMode ? 'edit_end' : 'creation_end',\n\t\t\t\tstatus: 'success',\n\t\t\t\tp1: `datasetName_${datasetName.replaceAll('_', '')}`,\n\t\t\t});\n\t\t},\n\t\tonSaveError()\n\t\t{\n\t\t\tthis.togglePopup('savingProgress', false);\n\t\t\tthis.togglePopup('savingFailure', true);\n\t\t\tBX.SidePanel.Instance.postMessage(window, 'BIConnector.dataset-import:onDatasetCreated', {});\n\n\t\t\tthis.sendAnalytics({\n\t\t\t\tevent: this.isEditMode ? 'edit_end' : 'creation_end',\n\t\t\t\tstatus: 'error',\n\t\t\t});\n\t\t},\n\t\tonSuccessPopupClose()\n\t\t{\n\t\t\tthis.togglePopup('savingSuccess', false);\n\t\t\tthis.closeApp();\n\t\t},\n\t\tcloseFailurePopup()\n\t\t{\n\t\t\tthis.togglePopup('savingFailure', false);\n\t\t},\n\t\tonReplacementButtonClick()\n\t\t{\n\t\t\tthis.isEditModeSaveConfirmed = true;\n\t\t\tthis.togglePopup('editModeFileReplacement', false);\n\t\t\tthis.onSaveButtonClick();\n\t\t},\n\t\tstartPreviewLoadingAnimation()\n\t\t{\n\t\t\tthis.isDataLoadingAnimationDisplayed = true;\n\t\t\tthis.hasMinimalLoadingAnimationTimePassed = false;\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.hasMinimalLoadingAnimationTimePassed = true;\n\t\t\t}, 1500);\n\t\t},\n\t\tstopPreviewLoadingAnimation()\n\t\t{\n\t\t\tthis.isDataLoadingAnimationDisplayed = false;\n\t\t},\n\t\tonCheckFileClick()\n\t\t{\n\t\t\tthis.popupParams.fileErrors.isSavingMode = false;\n\t\t\tif (this.previewError)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.togglePopup('checkFileProgress', true);\n\t\t\tthis.checkFile()\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.togglePopup('checkFileProgress', false);\n\t\t\t\t\tthis.togglePopup('checkFileSuccess', true);\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tthis.togglePopup('checkFileProgress', false);\n\t\t\t\t\tthis.togglePopup('fileErrors', true);\n\t\t\t\t})\n\t\t\t;\n\t\t},\n\t\tsaveIgnoringErrors()\n\t\t{\n\t\t\tthis.togglePopup('fileErrors', false);\n\t\t\tthis.togglePopup('savingProgress', true);\n\t\t\tthis.handleSaveAction();\n\t\t},\n\t\tcheckFile(): Promise\n\t\t{\n\t\t\tif (this.isErrorsChecked)\n\t\t\t{\n\t\t\t\tif (this.checkFileErrors.length > 0)\n\t\t\t\t{\n\t\t\t\t\treturn Promise.reject();\n\t\t\t\t}\n\n\t\t\t\treturn Promise.resolve();\n\t\t\t}\n\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tAjax.runAction('biconnector.externalsource.dataset.checkFile', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: this.sourceCode,\n\t\t\t\t\t\tfields: this.loadParams,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\tthis.checkFileErrors = this.prepareCheckFileErrors(response.data.checkFileErrors);\n\t\t\t\t\t\tthis.isErrorsChecked = true;\n\t\t\t\t\t\tif (this.checkFileErrors.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((response) => {\n\t\t\t\t\t\tconsole.error(response);\n\t\t\t\t\t\tthis.togglePopup('checkFileProgress', false);\n\t\t\t\t\t\tthis.togglePopup('savingProgress', false);\n\t\t\t\t\t\tthis.togglePopup('checkFileFailure', true);\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t});\n\t\t},\n\t\tprepareCheckFileErrors(errors: Object): Array\n\t\t{\n\t\t\tconst result = [];\n\t\t\tObject.keys(errors).forEach((lineNumber) => {\n\t\t\t\terrors[lineNumber].forEach((error) => {\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\tlineNumber,\n\t\t\t\t\t\terrorMessage: error.message,\n\t\t\t\t\t\tcolumnName: this.$store.state.config.fieldsSettings[error.customData.field].name,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\ttoggleCheckFileButton(disabled: boolean): void\n\t\t{\n\t\t\tconst button = document.querySelector('.biconnector-check-file-button');\n\t\t\tif (button)\n\t\t\t{\n\t\t\t\tif (disabled)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(button, 'ui-btn-disabled');\n\t\t\t\t\tDom.attr(button, 'disabled', true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(button, 'ui-btn-disabled');\n\t\t\t\t\tDom.attr(button, 'disabled', null);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tif (this.isEditMode)\n\t\t{\n\t\t\tthis.initialPreviewData = this.$store.state.previewData.rows;\n\t\t\tthis.initialFieldsSettings = this.$store.state.config.fieldsSettings;\n\t\t}\n\n\t\tEventEmitter.subscribe('biconnector:dataset-import:onCheckFileClick', this.onCheckFileClick);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tEventEmitter.unsubscribe('biconnector:dataset-import:onCheckFileClick', this.onCheckFileClick);\n\t},\n\tcomponents: {\n\t\tAppLayout,\n\t\tImportConfig,\n\t\tImportPreview,\n\t\tFileStep,\n\t\tDatasetPropertiesStep,\n\t\tFieldsSettingsStep,\n\t\tImportProgressPopup,\n\t\tImportSuccessPopup,\n\t\tImportFailurePopup,\n\t\tGenericPopup,\n\t\tFileErrorsPopup,\n\t\tCheckingProgressPopup,\n\t\tCheckingSuccessPopup,\n\t\tCheckingFailedPopup,\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<AppLayout :save-locked=\"!isSaveEnabled\" ref=\"appLayout\" :is-edit-mode=\"isEditMode\">\n\t\t\t<template v-slot:left-panel>\n\t\t\t\t<ImportConfig>\n\t\t\t\t\t<FileStep\n\t\t\t\t\t\t:separators=\"appParams.separators\"\n\t\t\t\t\t\t:encodings=\"appParams.encodings\"\n\t\t\t\t\t\t:disabled=\"steps.file.disabled\"\n\t\t\t\t\t\t:data-format-templates=\"appParams.dataFormatTemplates\"\n\t\t\t\t\t\tref=\"fileStep\"\n\t\t\t\t\t\t@validation=\"onStepValidation('file', $event)\"\n\t\t\t\t\t\t@file-properties-change=\"onDatasetReloadNeeded('file')\"\n\t\t\t\t\t\t@parsing-options-changed=\"onDatasetReloadNeeded('fields')\"\n\t\t\t\t\t/>\n\t\t\t\t\t<DatasetPropertiesStep\n\t\t\t\t\t\t:is-open-initially=\"isEditMode\"\n\t\t\t\t\t\t:disabled=\"steps.properties.disabled\"\n\t\t\t\t\t\t:reserved-names=\"appParams.reservedNames\"\n\t\t\t\t\t\tref=\"propertiesStep\"\n\t\t\t\t\t\t@validation=\"onStepValidation('properties', $event)\"\n\t\t\t\t\t\t@properties-changed=\"onDatasetPropertiesChanged\"\n\t\t\t\t\t\t:dataset-source-code=\"sourceCode\"\n\t\t\t\t\t/>\n\t\t\t\t\t<FieldsSettingsStep\n\t\t\t\t\t\t:is-open-initially=\"isEditMode\"\n\t\t\t\t\t\t:disabled=\"steps.fields.disabled\"\n\t\t\t\t\t\tref=\"fieldsStep\"\n\t\t\t\t\t\t@validation=\"onStepValidation('fields', $event)\"\n\t\t\t\t\t\t@parsing-options-changed=\"onDatasetReloadNeeded('fields')\"\n\t\t\t\t\t\t@settings-changed=\"onFieldsSettingsChanged\"\n\t\t\t\t\t/>\n\t\t\t\t</ImportConfig>\n\t\t\t</template>\n\t\t\t<template v-slot:right-panel>\n\t\t\t\t<ImportPreview \n\t\t\t\t\t:error=\"previewError\"\n\t\t\t\t\t:is-loading=\"isDataLoadingAnimationDisplayed || !hasMinimalLoadingAnimationTimePassed\"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t</AppLayout>\n\n\t\t<ImportProgressPopup\n\t\t\tv-if=\"shownPopups.savingProgress\"\n\t\t\t:description=\"importProgressPopupDescription\"\n\t\t/>\n\n\t\t<ImportSuccessPopup\n\t\t\tv-if=\"shownPopups.savingSuccess\"\n\t\t\t@close=\"onSuccessPopupClose\"\n\t\t\t@click=\"closeApp\"\n\t\t\t@one-more-click=\"reload\"\n\t\t\t:title=\"importSuccessPopupTitle\"\n\t\t\t:description=\"importSuccessPopupDescription\"\n\t\t\t:dataset-id=\"popupParams.savingSuccess.datasetId\"\n\t\t\t:show-more-button=\"!isEditMode\"\n\t\t/>\n\n\t\t<ImportFailurePopup\n\t\t\tv-if=\"shownPopups.savingFailure\"\n\t\t\t@close=\"closeFailurePopup\"\n\t\t\t@click=\"closeFailurePopup\"\n\t\t\t:title=\"importFailurePopupTitle\"\n\t\t\t:description=\"$Bitrix.Loc.getMessage('DATASET_IMPORT_FAILURE_POPUP_DESCRIPTION').replace('[link]', '<a>').replace('[/link]', '</a>')\"\n\t\t/>\n\n\t\t<GenericPopup\n\t\t\tv-if=\"shownPopups.editModeFileReplacement\"\n\t\t\t:title=\"$Bitrix.Loc.getMessage('DATASET_IMPORT_FILE_REPLACEMENT_TITLE')\"\n\t\t\t@close=\"togglePopup('editModeFileReplacement', false)\"\n\t\t>\n\t\t\t<template v-slot:content>\n\t\t\t\t{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_FILE_REPLACEMENT_TEXT') }}\n\t\t\t</template>\n\t\t\t<template v-slot:buttons>\n\t\t\t\t<button @click=\"onReplacementButtonClick\" class=\"ui-btn ui-btn-md ui-btn-primary\">{{\n\t\t\t\t\t$Bitrix.Loc.getMessage('DATASET_IMPORT_FILE_REPLACEMENT_LOAD') }}\n\t\t\t\t</button>\n\t\t\t\t<button @click=\"togglePopup('editModeFileReplacement', false)\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-light-border\">{{\n\t\t\t\t\t$Bitrix.Loc.getMessage('DATASET_IMPORT_FILE_REPLACEMENT_CANCEL') }}\n\t\t\t\t</button>\n\t\t\t</template>\n\t\t</GenericPopup>\n\n\t\t<FileErrorsPopup\n\t\t\tv-if=\"shownPopups.fileErrors\"\n\t\t\t@close=\"togglePopup('fileErrors', false);\"\n\t\t\t@save-ignoring-errors=\"saveIgnoringErrors()\"\n\t\t\t:errors=\"checkFileErrors\"\n\t\t\t:is-edit-mode=\"this.isEditMode\"\n\t\t\t:is-saving-mode=\"popupParams.fileErrors.isSavingMode\"\n\t\t/>\n\t\t<CheckingProgressPopup\n\t\t\tv-if=\"shownPopups.checkFileProgress\"\n\t\t\t@close=\"togglePopup('checkFileProgress', false)\"\n\t\t/>\n\t\t<CheckingSuccessPopup\n\t\t\tv-if=\"shownPopups.checkFileSuccess\"\n\t\t\t@close=\"togglePopup('checkFileSuccess', false)\"\n\t\t/>\n\t\t<CheckingFailedPopup\n\t\t\tv-if=\"shownPopups.checkFileFailure\"\n\t\t\t@close=\"togglePopup('checkFileFailure', false)\"\n\t\t/>\n\t`,\n};\n","import type { PopupOptions } from 'main.popup';\nimport { Popup } from '../../layout/popup';\nimport '../../css/save-progress-popup.css';\n\nexport const SyncFieldsPopup = {\n\temits: ['close'],\n\tprops: {\n\t\tisChange: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tpopupOptions(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\twidth: 440,\n\t\t\t\tcloseIcon: true,\n\t\t\t\tnoAllPaddings: true,\n\t\t\t\toverlay: true,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\tgetDescription(): string\n\t\t{\n\t\t\treturn this.isChange\n\t\t\t\t? this.$Bitrix.Loc.getMessage('DATASET_IMPORT_SYNC_FIELDS_POPUP_DESCRIPTION_CHANGED')\n\t\t\t\t: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_SYNC_FIELDS_POPUP_DESCRIPTION_NOT_CHANGED');\n\t\t},\n\t\tonClose()\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t},\n\t},\n\tcomponents: {\n\t\tPopup,\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<Popup id=\"syncFields\" @close=\"this.onClose\" :options=\"popupOptions\" wrapper-class=\"generic-popup\">\n\t\t\t<h3 class=\"generic-popup__header\">{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_SYNC_FIELDS_POPUP_HEADER') }}</h3>\n\t\t\t<div class=\"generic-popup__content\">\n\t\t\t\t{{ getDescription() }}\n\t\t\t</div>\n\t\t\t<div class=\"generic-popup__buttons-wrapper\">\n\t\t\t\t<button @click=\"onClose\" class=\"ui-btn ui-btn-md ui-btn-primary\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_SYNC_FIELDS_POPUP_BUTTON') }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n","import { Dom, Event, Tag } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { BaseField } from './base-field';\nimport { TagSelector } from 'ui.entity-selector';\nimport '../../css/entity-selector-field.css';\n\nexport const ConnectionSelectorField = {\n\textends: BaseField,\n\tprops: {\n\t\toptions: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tconnectionId: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tconst node = this.$refs['entity-selector'];\n\t\tconst selector = new TagSelector({\n\t\t\tid: this.options.selectorId,\n\t\t\tmultiple: false,\n\t\t\taddButtonCaption: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_CONNECTIONS_SELECT'),\n\t\t\taddButtonCaptionMore: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_CONNECTIONS_CHANGE'),\n\t\t\tdialogOptions: {\n\t\t\t\tid: this.options.selectorId,\n\t\t\t\titems: this.prepareItems(this.items),\n\t\t\t\tenableSearch: true,\n\t\t\t\tdropdownMode: true,\n\t\t\t\tshowAvatars: true,\n\t\t\t\tcompactView: false,\n\t\t\t\tmultiple: false,\n\t\t\t\twidth: 460,\n\t\t\t\theight: 420,\n\t\t\t\ttabs: [{\n\t\t\t\t\tid: 'connections',\n\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_NO_CONNECTIONS_TITLE'),\n\t\t\t\t\t\tsubtitle: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_NO_CONNECTIONS_SUBTITLE'),\n\t\t\t\t\t\tarrow: true,\n\t\t\t\t\t\ticon: '/bitrix/images/biconnector/database-connections/connections-empty-state.png',\n\t\t\t\t\t\ticonOpacity: 100,\n\t\t\t\t\t},\n\t\t\t\t}],\n\t\t\t\tentities: [{\n\t\t\t\t\tid: 'biconnector-external-connection',\n\t\t\t\t}],\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonTagAdd: (event: BaseEvent) => {\n\t\t\t\t\tthis.$emit('valueChange', event);\n\t\t\t\t},\n\t\t\t\tonTagRemove: (event: BaseEvent) => {\n\t\t\t\t\tthis.$emit('valueClear', event);\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tDom.addClass(selector.getDialog().getContainer(), 'biconnector-dataset-entity-selector');\n\t\tselector.renderTo(node);\n\n\t\tconst footer = Tag.render`\n\t\t\t<span class=\"ui-selector-footer-link ui-selector-footer-link-add\">\n\t\t\t\t${this.$Bitrix.Loc.getMessage('DATASET_IMPORT_NO_CONNECTIONS_FOOTER')}\n\t\t\t</span>\n\t\t`;\n\t\tEvent.bind(footer, 'click', () => {\n\t\t\tconst link = '/bitrix/components/bitrix/biconnector.externalconnection/slider.php';\n\t\t\tBX.SidePanel.Instance.open(link, {\n\t\t\t\twidth: 564,\n\t\t\t\tallowChangeHistory: false,\n\t\t\t\tcacheable: false,\n\t\t\t});\n\t\t});\n\t\tselector.getDialog().getTab(this.name).setFooter(footer);\n\n\t\tthis.selector = selector;\n\n\t\tEventEmitter.subscribe('SidePanel.Slider:onMessage', (event) => {\n\t\t\tconst [messageEvent] = event.getData();\n\t\t\tif (messageEvent.getEventId() === 'BIConnector:ExternalConnection:onConnectionCreated')\n\t\t\t{\n\t\t\t\tthis.addSelectedItem(messageEvent);\n\t\t\t}\n\t\t});\n\t},\n\tmethods: {\n\t\tprepareItems(items: Array): Array\n\t\t{\n\t\t\tconst selectorItems = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tconst itemOptions = {\n\t\t\t\t\tid: item.ID,\n\t\t\t\t\ttitle: item.TITLE,\n\t\t\t\t\tentityId: this.options.selectorId,\n\t\t\t\t\ttabs: this.name,\n\t\t\t\t\tlink: `/bitrix/components/bitrix/biconnector.externalconnection/slider.php?sourceId=${item.ID}`,\n\t\t\t\t\tlinkTitle: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_CONNECTIONS_ABOUT'),\n\t\t\t\t\tcustomData: {\n\t\t\t\t\t\tconnectionType: item.TYPE,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t\tif (item.TYPE)\n\t\t\t\t{\n\t\t\t\t\titemOptions.avatar = `/bitrix/images/biconnector/database-connections/${item.TYPE}.svg`;\n\t\t\t\t}\n\n\t\t\t\tif (this.connectionId)\n\t\t\t\t{\n\t\t\t\t\titemOptions.selected = item.ID === this.connectionId.toString();\n\t\t\t\t}\n\n\t\t\t\tselectorItems.push(itemOptions);\n\t\t\t});\n\n\t\t\treturn selectorItems;\n\t\t},\n\t\taddSelectedItem(event)\n\t\t{\n\t\t\tconst itemOptions: {id: number, name: string, type: string} = event.getData().connection;\n\t\t\tconst item = this.selector.getDialog().addItem({\n\t\t\t\tid: itemOptions.id,\n\t\t\t\ttitle: itemOptions.name,\n\t\t\t\tentityId: this.options.selectorId,\n\t\t\t\ttabs: this.name,\n\t\t\t\tlink: `/bitrix/components/bitrix/biconnector.externalconnection/slider.php?sourceId=${itemOptions.id}`,\n\t\t\t\tlinkTitle: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_CONNECTIONS_ABOUT'),\n\t\t\t\tavatar: `/bitrix/images/biconnector/database-connections/${itemOptions.type}.svg`,\n\t\t\t\tcustomData: {\n\t\t\t\t\tconnectionType: itemOptions.type,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tif (item)\n\t\t\t{\n\t\t\t\titem.select();\n\t\t\t}\n\t\t\tthis.selector.getDialog().hide();\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<div class=\"ui-ctl-title\">\n\t\t\t\t<div class=\"ui-ctl-label-text\">{{ this.title }}</div>\n\t\t\t</div>\n\t\t\t<div ref=\"entity-selector\"></div>\n\t\t\t<div \n\t\t\t\tv-if=\"!isValid\"\n\t\t\t\tclass=\"connection-error\"\n\t\t\t>\n\t\t\t\t{{ this.errorMessage }}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Dom } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { BaseField } from './base-field';\nimport { TagSelector } from 'ui.entity-selector';\nimport { BIcon, Set } from 'ui.icon-set.api.vue';\nimport { hint } from 'ui.vue3.directives.hint';\nimport '../../css/entity-selector-field.css';\n\nexport const TableSelectorField = {\n\textends: BaseField,\n\tdirectives: {\n\t\thint,\n\t},\n\tprops: {\n\t\toptions: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tconnectionId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tconst node = this.$refs['entity-selector'];\n\t\tconst selector = new TagSelector({\n\t\t\tid: this.options.selectorId,\n\t\t\tmultiple: false,\n\t\t\taddButtonCaption: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_CONNECTIONS_SELECT'),\n\t\t\taddButtonCaptionMore: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_CONNECTIONS_CHANGE'),\n\t\t\tdialogOptions: {\n\t\t\t\tid: this.options.selectorId,\n\t\t\t\tenableSearch: true,\n\t\t\t\tdropdownMode: true,\n\t\t\t\tshowAvatars: false,\n\t\t\t\tcompactView: true,\n\t\t\t\tmultiple: false,\n\t\t\t\tdynamicLoad: true,\n\t\t\t\twidth: 460,\n\t\t\t\theight: 420,\n\t\t\t\ttabs: [{\n\t\t\t\t\tid: 'tables',\n\t\t\t\t\tstub: true,\n\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_TABLES_STUB_TITLE'),\n\t\t\t\t\t\tsubtitle: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_TABLES_STUB_SUBTITLE'),\n\t\t\t\t\t},\n\t\t\t\t}],\n\t\t\t\tentities: [{\n\t\t\t\t\tid: 'biconnector-external-table',\n\t\t\t\t\tdynamicLoad: false,\n\t\t\t\t\tdynamicSearch: true,\n\t\t\t\t}],\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonTagAdd: (event: BaseEvent) => {\n\t\t\t\t\tthis.$emit('valueChange', event);\n\t\t\t\t},\n\t\t\t\tonTagRemove: (event: BaseEvent) => {\n\t\t\t\t\tthis.$emit('valueClear', event);\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tDom.addClass(selector.getDialog().getContainer(), 'biconnector-dataset-entity-selector');\n\t\tselector.setLocked(!this.isDisabled);\n\t\tselector.renderTo(node);\n\n\t\tthis.selector = selector;\n\t},\n\tcomputed: {\n\t\tset(): Set\n\t\t{\n\t\t\treturn Set;\n\t\t},\n\t\thintOptions(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\thtml: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_TABLES_HINT'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\tbindOptions: {\n\t\t\t\t\t\tposition: 'top',\n\t\t\t\t\t},\n\t\t\t\t\toffsetTop: -10,\n\t\t\t\t\tangle: {\n\t\t\t\t\t\tposition: 'top',\n\t\t\t\t\t\toffset: 34,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\twatch: {\n\t\tconnectionId(newConnectionId)\n\t\t{\n\t\t\tconst selector: TagSelector = this.selector;\n\t\t\tselector.removeTags();\n\t\t\tselector.getDialog().removeItems();\n\n\t\t\tif (!newConnectionId)\n\t\t\t{\n\t\t\t\tselector.setLocked(true);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tselector.getDialog().getEntity('biconnector-external-table').options.connectionId = newConnectionId;\n\t\t\tselector.setLocked(this.isDisabled);\n\t\t},\n\t},\n\tmethods: {},\n\tcomponents: {\n\t\tBIcon,\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<div class=\"ui-ctl-title\">\n\t\t\t\t<div class=\"ui-ctl-label-text table-title\">\n\t\t\t\t\t<span>{{ this.title }}</span>\n\t\t\t\t\t<div class=\"table-hint\" v-hint=\"hintOptions\">\n\t\t\t\t\t\t<BIcon\n\t\t\t\t\t\t\t:name=\"set.HELP\"\n\t\t\t\t\t\t\t:size=\"20\"\n\t\t\t\t\t\t\tcolor=\"#D5D7DB\"\n\t\t\t\t\t\t></BIcon>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div ref=\"entity-selector\"></div>\n\t\t</div>\n\t`,\n};\n","import { ajax as Ajax } from 'main.core';\nimport { BaseStep } from './base-step';\nimport { ConnectionSelectorField } from '../fields/type/connection-selector-field';\nimport { CustomField } from '../fields/type/custom-field';\nimport { TableSelectorField } from '../fields/type/table-selector-field';\nimport { StringField } from '../fields/type/string-field';\nimport '../css/connection.css';\n\nexport const ConnectionStep = {\n\textends: BaseStep,\n\tprops: {\n\t\tconnections: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tconnectionId: this.$store.state.config.connection,\n\t\t\ttableId: this.$store.state.config.table,\n\t\t\tconnectionSelectorId: 'biconnector-external-connection',\n\t\t\ttableSelectorId: 'biconnector-external-table',\n\t\t\tunvalidatedFields: {},\n\t\t};\n\t},\n\tcomponents: {\n\t\tConnectionSelectorField,\n\t\tCustomField,\n\t\tTableSelectorField,\n\t\tStringField,\n\t},\n\tcomputed: {\n\t\tdefaultTitle(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('DATASET_IMPORT_CONNECTIONS_HEADER');\n\t\t},\n\t\tconnectionSelectorOptions(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tselectorId: this.connectionSelectorId,\n\t\t\t};\n\t\t},\n\t\ttableSelectorOptions(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tselectorId: this.tableSelectorId,\n\t\t\t};\n\t\t},\n\t\tselectedConnectionType(): string\n\t\t{\n\t\t\treturn this.$store.getters.connectionProperties?.connectionType;\n\t\t},\n\t\tselectedConnectionId(): number\n\t\t{\n\t\t\treturn this.$store.getters.connectionProperties?.connectionId ?? 0;\n\t\t},\n\t\tselectedConnectionName(): number\n\t\t{\n\t\t\treturn this.$store.getters.connectionProperties?.connectionName;\n\t\t},\n\t\tselectedTableName(): string\n\t\t{\n\t\t\treturn this.$store.getters.connectionProperties?.tableName;\n\t\t},\n\t\tisEditMode(): boolean\n\t\t{\n\t\t\treturn this.$store.getters.isEditMode;\n\t\t},\n\t},\n\tmethods: {\n\t\tonConnectionSelected(event)\n\t\t{\n\t\t\tconst tag = event.data.tag;\n\t\t\tconst dialogItems = event.target.getDialog().getItems();\n\t\t\tdialogItems.forEach((item) => {\n\t\t\t\tif (item.getId() === tag.getId())\n\t\t\t\t{\n\t\t\t\t\ttag.customData = item.getCustomData();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst sourceId = parseInt(event.data.tag.getId(), 10);\n\n\t\t\tthis.$store.commit('setConnectionProperties', {\n\t\t\t\tconnectionType: event.data.tag.getCustomData().get('connectionType'),\n\t\t\t\tconnectionId: sourceId,\n\t\t\t\ttableName: null,\n\t\t\t});\n\n\t\t\tAjax.runAction('biconnector.externalsource.source.checkExistingConnection', {\n\t\t\t\tdata: {\n\t\t\t\t\tsourceId,\n\t\t\t\t},\n\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.unvalidatedFields = {};\n\t\t\t\t})\n\t\t\t\t.catch((response) => {\n\t\t\t\t\tthis.unvalidatedFields = {\n\t\t\t\t\t\tconnection: {\n\t\t\t\t\t\t\tresult: false,\n\t\t\t\t\t\t\tmessage: response.errors[0].message,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t;\n\t\t\tthis.$emit('validation', false);\n\t\t},\n\t\tonConnectionDeselected()\n\t\t{\n\t\t\tthis.$store.commit('setConnectionProperties', {\n\t\t\t\tconnectionType: null,\n\t\t\t\tconnectionId: null,\n\t\t\t\ttableName: null,\n\t\t\t});\n\t\t\tthis.$emit('validation', false);\n\t\t\tthis.unvalidatedFields = {};\n\t\t},\n\t\tonTableSelected(event)\n\t\t{\n\t\t\tthis.$store.commit('setConnectionProperties', {\n\t\t\t\tconnectionType: this.selectedConnectionType,\n\t\t\t\tconnectionId: this.selectedConnectionId,\n\t\t\t\ttableName: event.data.tag.getTitle(),\n\t\t\t});\n\n\t\t\tconst tag = event.data.tag;\n\t\t\tconst dialogItems = event.target.getDialog().getItems();\n\t\t\tdialogItems.forEach((item) => {\n\t\t\t\tif (item.getId() === tag.getId())\n\t\t\t\t{\n\t\t\t\t\ttag.customData = item.getCustomData();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.$store.commit('setDatasetProperties', {\n\t\t\t\tid: event.data.tag.getId(),\n\t\t\t\tname: event.data.tag.getCustomData().get('datasetName'),\n\t\t\t\tcode: event.data.tag.getCustomData().get('description'),\n\t\t\t\tdescription: event.data.tag.getTitle(),\n\t\t\t\texternalCode: event.data.tag.getCustomData().get('description'),\n\t\t\t\texternalName: event.data.tag.getTitle(),\n\t\t\t});\n\t\t\tthis.$emit('tableSelected', event);\n\t\t\tthis.$emit('validation', true);\n\t\t},\n\t\tonTableDeselected(event)\n\t\t{\n\t\t\tthis.$store.commit('setConnectionProperties', {\n\t\t\t\tconnectionType: this.selectedConnectionType,\n\t\t\t\tconnectionId: this.selectedConnectionId,\n\t\t\t\ttableName: null,\n\t\t\t});\n\t\t\tthis.$store.commit('setDatasetProperties', {\n\t\t\t\tid: null,\n\t\t\t\tname: null,\n\t\t\t\tcode: null,\n\t\t\t\tdescription: null,\n\t\t\t\texternalCode: null,\n\t\t\t\texternalName: null,\n\t\t\t});\n\t\t\tthis.$emit('tableDeselected', event);\n\t\t\tthis.$emit('validation', false);\n\t\t},\n\t\topenConnectionSlider()\n\t\t{\n\t\t\tconst link = `/bitrix/components/bitrix/biconnector.externalconnection/slider.php?sourceId=${this.selectedConnectionId}`;\n\t\t\tBX.SidePanel.Instance.open(link, {\n\t\t\t\twidth: 564,\n\t\t\t\tallowChangeHistory: false,\n\t\t\t\tcacheable: false,\n\t\t\t});\n\t\t},\n\t},\n\temits: [\n\t\t'tableSelected',\n\t\t'tableDeselected',\n\t],\n\ttemplate: `\n\t\t<Step\n\t\t\t:title=\"displayedTitle\"\n\t\t\t:hint=\"displayedHint\"\n\t\t\t:is-open-initially=\"isOpenInitially\"\n\t\t\t:disabled=\"disabled\"\n\t\t\tref=\"stepBlock\"\n\t\t>\n\t\t\t<ConnectionSelectorField\n\t\t\t\tv-if=\"!this.isEditMode\"\n\t\t\t\t:options=\"this.connectionSelectorOptions\"\n\t\t\t\tname=\"connections\"\n\t\t\t\t:title=\"this.$Bitrix.Loc.getMessage('DATASET_IMPORT_CONNECTIONS_FIELD_TITLE')\"\n\t\t\t\t:items=\"this.connections\"\n\t\t\t\t:is-disabled=\"disabled\"\n\t\t\t\t:connection-id=\"this.selectedConnectionId\"\n\t\t\t\t@value-change=\"onConnectionSelected\"\n\t\t\t\t@value-clear=\"onConnectionDeselected\"\n\t\t\t\tref=\"connectionField\"\n\t\t\t\t:is-valid=\"unvalidatedFields.connection?.result ?? true\"\n\t\t\t\t:error-message=\"unvalidatedFields.connection?.message ?? ''\"\n\t\t\t/>\n\t\t\t<TableSelectorField\n\t\t\t\tv-if=\"!this.isEditMode\"\n\t\t\t\t:options=\"this.tableSelectorOptions\"\n\t\t\t\tname=\"tables\"\n\t\t\t\t:title=\"this.$Bitrix.Loc.getMessage('DATASET_IMPORT_TABLES_FIELD_TITLE')\"\n\t\t\t\t:connection-id=\"this.selectedConnectionId\"\n\t\t\t\t:is-disabled=\"disabled\"\n\t\t\t\t@value-change=\"onTableSelected\"\n\t\t\t\t@value-clear=\"onTableDeselected\"\n\t\t\t\tref=\"tableField\"\n\t\t\t/>\n\n\t\t\t<div\n\t\t\t\tv-if=\"this.isEditMode\"\n\t\t\t>\n\t\t\t\t<CustomField\n\t\t\t\t\tname=\"connections\"\n\t\t\t\t\t:title=\"this.$Bitrix.Loc.getMessage('DATASET_IMPORT_CONNECTIONS_FIELD_TITLE')\"\n\t\t\t\t>\n\t\t\t\t\t<template #field-content>\n\t\t\t\t\t\t<div class=\"connection-preview\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"connection-icon\"\n\t\t\t\t\t\t\t\t:style=\"'background-image: url(\\\\'' + '/bitrix/images/biconnector/database-connections/' + selectedConnectionType + '.svg\\\\');'\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div class=\"connection-name\" @click=\"openConnectionSlider\">\n\t\t\t\t\t\t\t\t{{ this.selectedConnectionName }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</CustomField>\n\n\t\t\t\t<StringField\n\t\t\t\t\tname=\"tables\"\n\t\t\t\t\t:title=\"this.$Bitrix.Loc.getMessage('DATASET_IMPORT_TABLES_FIELD_TITLE')\"\n\t\t\t\t\t:is-disabled=\"true\"\n\t\t\t\t\t:defaultValue=\"this.selectedTableName\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Step>\n\t`,\n};\n","import { ajax as Ajax } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { AppLayout } from '../layout/app-layout';\nimport { ImportConfig } from '../layout/import-config';\nimport { GenericPopup } from '../popups/generic-popup';\nimport { ImportFailurePopup } from '../popups/saving/import-failure-popup';\nimport { ImportProgressPopup } from '../popups/saving/import-progress-popup';\nimport { ImportSuccessPopup } from '../popups/saving/import-success-popup';\nimport { SyncFieldsPopup } from '../popups/sync/sync-fields-popup';\nimport { ConnectionStep } from '../steps/connection';\nimport { DatasetPropertiesStep } from '../steps/dataset-properties';\nimport { FieldsSettingsStep } from '../steps/fields-settings';\nimport { ImportPreview } from '../steps/import-preview';\nimport { BaseApp } from './base-app';\n\nexport const ExternalConnectionApp = {\n\textends: BaseApp,\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tsteps: {\n\t\t\t\tconnection: {\n\t\t\t\t\tdisabled: false,\n\t\t\t\t\tvalid: this.$store.getters.isEditMode,\n\t\t\t\t},\n\t\t\t\tproperties: {\n\t\t\t\t\tdisabled: !this.$store.getters.isEditMode,\n\t\t\t\t\tvalid: true,\n\t\t\t\t},\n\t\t\t\tfields: {\n\t\t\t\t\tdisabled: !this.$store.getters.isEditMode,\n\t\t\t\t\tvalid: true,\n\t\t\t\t},\n\t\t\t},\n\t\t\tshownPopups: {\n\t\t\t\tsavingProgress: false,\n\t\t\t\tsavingSuccess: false,\n\t\t\t\tsavingFailure: false,\n\t\t\t\tloadFailure: false,\n\t\t\t\tsyncFields: false,\n\t\t\t},\n\t\t\tisValidationComplete: true,\n\t\t\tpopupParams: {\n\t\t\t\tsavingSuccess: {},\n\t\t\t\tloadFailure: {\n\t\t\t\t\tmessages: [],\n\t\t\t\t},\n\t\t\t\tsyncFields: {\n\t\t\t\t\tisChange: false,\n\t\t\t\t},\n\t\t\t},\n\t\t\tisLoading: false,\n\t\t\tpreviewError: '',\n\t\t\tpreviewDataLoaded: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tsourceCode(): string\n\t\t{\n\t\t\treturn this.$store.state.config.connectionProperties?.connectionType ?? '';\n\t\t},\n\t\tisEditMode(): boolean\n\t\t{\n\t\t\treturn this.$store.getters.isEditMode;\n\t\t},\n\t\tloadParams(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tdatasetProperties: this.$store.state.config.datasetProperties,\n\t\t\t\tfieldsSettings: this.$store.state.config.fieldsSettings,\n\t\t\t\tdataFormats: this.$store.state.config.dataFormats,\n\t\t\t\ttableName: this.$store.state.config.connectionProperties.tableName,\n\t\t\t\tconnectionType: this.$store.state.config.connectionProperties.connectionType,\n\t\t\t};\n\t\t},\n\t\tsaveParams(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tdatasetProperties: this.$store.state.config.datasetProperties,\n\t\t\t\tfieldsSettings: this.$store.state.config.fieldsSettings,\n\t\t\t\tdataFormats: this.$store.state.config.dataFormats,\n\t\t\t\tconnectionSettings: this.$store.state.config.connectionProperties,\n\t\t\t};\n\t\t},\n\t\tisValidatedForSave(): boolean\n\t\t{\n\t\t\treturn this.steps.fields.valid && this.steps.properties.valid && this.steps.connection.valid;\n\t\t},\n\t\timportSuccessPopupTitle(): string\n\t\t{\n\t\t\treturn this.isEditMode\n\t\t\t\t? this.$Bitrix.Loc.getMessage('DATASET_IMPORT_SUCCESS_POPUP_HEADER_EDIT').replace('#DATASET_TITLE#', this.popupParams.savingSuccess.title)\n\t\t\t\t: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_SUCCESS_POPUP_HEADER').replace('#DATASET_TITLE#', this.popupParams.savingSuccess.title)\n\t\t\t;\n\t\t},\n\t\tloadFailurePopupTitle(): string\n\t\t{\n\t\t\treturn this.isEditMode\n\t\t\t\t? this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FILE_ERROR_EDIT_TITLE')\n\t\t\t\t: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FILE_ERROR_TITLE')\n\t\t\t;\n\t\t},\n\t\tfieldsSettingsStepHint(): string\n\t\t{\n\t\t\treturn this.isEditMode\n\t\t\t\t? this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FIELDS_SETTINGS_HINT_EDIT')\n\t\t\t\t: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_FIELDS_SETTINGS_HINT_EXTERNAL')\n\t\t\t\t\t.replace('[link]', '<a onclick=\"top.BX.Helper.show(`redirect=detail&code=23508958`)\">')\n\t\t\t\t\t.replace('[/link]', '</a>')\n\t\t\t;\n\t\t},\n\t\tunsavedChangesPopupTitle(): string\n\t\t{\n\t\t\treturn this.isEditMode\n\t\t\t\t? this.$Bitrix.Loc.getMessage('DATASET_IMPORT_UNSAVED_CHANGES_TITLE_EDIT')\n\t\t\t\t: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_UNSAVED_CHANGES_TITLE_EXTERNAL')\n\t\t\t;\n\t\t},\n\t\tunsavedChangesPopupText(): string\n\t\t{\n\t\t\treturn this.isEditMode\n\t\t\t\t? this.$Bitrix.Loc.getMessage('DATASET_IMPORT_UNSAVED_CHANGES_TEXT_EDIT')\n\t\t\t\t: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_UNSAVED_CHANGES_TEXT_EXTERNAL')\n\t\t\t;\n\t\t},\n\t\temptyStateText(): string\n\t\t{\n\t\t\treturn this.previewDataLoaded\n\t\t\t\t? this.$Bitrix.Loc.getMessage('DATASET_IMPORT_PREVIEW_ERROR_EMPTY_TABLE')\n\t\t\t\t: this.$Bitrix.Loc.getMessage('DATASET_IMPORT_PREVIEW_EMPTY_STATE_EXTERNAL')\n\t\t\t;\n\t\t},\n\t\tsyncFieldsProps(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tsupported: this.isEditMode,\n\t\t\t\tdisabled: this.isLoading,\n\t\t\t};\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tif (\n\t\t\t!this.$store.getters.hasData\n\t\t\t&& this.$store.state.config.connectionProperties?.connectionId\n\t\t)\n\t\t{\n\t\t\tthis.loadDataset();\n\t\t}\n\n\t\tEventEmitter.subscribe('SidePanel.Slider:onMessage', this.onSliderEvent);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tEventEmitter.subscribe('SidePanel.Slider:onMessage', this.onSliderEvent);\n\t},\n\tmethods: {\n\t\tonSliderEvent(event)\n\t\t{\n\t\t\tconst [messageEvent] = event.getData();\n\t\t\tif (messageEvent.getEventId() === 'BIConnector:ExternalConnection:onConnectionCreated')\n\t\t\t{\n\t\t\t\tthis.onConnectionCreated();\n\t\t\t}\n\t\t\telse if (messageEvent.getEventId() === 'BIConnector:ExternalConnection:onConnectionCreationError')\n\t\t\t{\n\t\t\t\tthis.onConnectionCreationError();\n\t\t\t}\n\t\t},\n\t\tonConnectionCreated()\n\t\t{\n\t\t\tthis.sendAnalytics({\n\t\t\t\tevent: 'connection',\n\t\t\t\tstatus: 'success',\n\t\t\t});\n\t\t},\n\t\tonConnectionCreationError()\n\t\t{\n\t\t\tthis.sendAnalytics({\n\t\t\t\tevent: 'connection',\n\t\t\t\tstatus: 'error',\n\t\t\t});\n\t\t},\n\t\tonTableSelected()\n\t\t{\n\t\t\tthis.sendConnectionSelectorAnalytics();\n\t\t\tthis.markAsChanged();\n\t\t\tthis.loadDataset();\n\t\t\tthis.$refs.propertiesStep.showValidationErrors();\n\t\t},\n\t\tonTableDeselected()\n\t\t{\n\t\t\tthis.sendConnectionSelectorAnalytics();\n\t\t\tthis.$refs.propertiesStep.close();\n\t\t\tthis.$refs.fieldsStep.close();\n\t\t\tthis.toggleStepState('properties', true);\n\t\t\tthis.toggleStepState('fields', true);\n\t\t\tthis.$store.commit('setPreviewData', []);\n\t\t\tthis.$store.commit('setFieldsSettings', []);\n\t\t\tthis.$refs.propertiesStep.validate();\n\t\t\tthis.previewError = '';\n\t\t\tthis.previewDataLoaded = false;\n\t\t},\n\t\tsendConnectionSelectorAnalytics()\n\t\t{\n\t\t\tif (this.lastChangedStep !== 'connection' && !this.isEditMode)\n\t\t\t{\n\t\t\t\tthis.sendAnalytics({\n\t\t\t\t\tevent: 'creation_start',\n\t\t\t\t\tc_element: 'step_1',\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.lastChangedStep = 'connection';\n\t\t},\n\t\tonDatasetPropertiesChanged()\n\t\t{\n\t\t\tthis.markAsChanged();\n\t\t\tif (this.lastChangedStep !== 'properties' && !this.isEditMode)\n\t\t\t{\n\t\t\t\tthis.sendAnalytics({\n\t\t\t\t\tevent: 'creation_start',\n\t\t\t\t\tc_element: 'step_2',\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.lastChangedStep = 'properties';\n\t\t},\n\t\tonParsingOptionsChanged()\n\t\t{\n\t\t\tthis.markAsChanged();\n\t\t\tthis.loadDataset();\n\t\t},\n\t\tonFieldsChanged()\n\t\t{\n\t\t\tthis.markAsChanged();\n\t\t\tif (this.lastChangedStep !== 'fields' && !this.isEditMode)\n\t\t\t{\n\t\t\t\tthis.sendAnalytics({\n\t\t\t\t\tevent: 'creation_start',\n\t\t\t\t\tc_element: 'step_3',\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.lastChangedStep = 'fields';\n\t\t},\n\t\tloadDataset()\n\t\t{\n\t\t\tthis.isLoading = true;\n\t\t\tAjax.runAction('biconnector.externalsource.dataset.view', {\n\t\t\t\tdata: {\n\t\t\t\t\ttype: this.sourceCode,\n\t\t\t\t\tfields: this.loadParams,\n\t\t\t\t\tsourceId: this.$store.state.config.connectionProperties.connectionId,\n\t\t\t\t},\n\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.isLoading = false;\n\t\t\t\t\tthis.onLoadSuccess(response);\n\t\t\t\t})\n\t\t\t\t.catch((response) => {\n\t\t\t\t\tthis.processLoadResponse(response);\n\t\t\t\t\tthis.isLoading = false;\n\t\t\t\t\tthis.previewError = response.errors[0]?.message ?? this.$Bitrix.Loc.getMessage('DATASET_IMPORT_PREVIEW_ERROR_EXTERNAL');\n\t\t\t\t});\n\t\t},\n\t\tonLoadSuccess(response)\n\t\t{\n\t\t\tthis.processLoadResponse(response);\n\n\t\t\tthis.$refs.propertiesStep.open();\n\t\t\tthis.$refs.fieldsStep.open();\n\t\t\tthis.toggleStepState('properties', false);\n\t\t\tthis.toggleStepState('fields', false);\n\t\t\tthis.$refs.propertiesStep.validate();\n\t\t\tthis.$refs.fieldsStep.validate();\n\t\t},\n\t\tprocessLoadResponse(response)\n\t\t{\n\t\t\tconst responseData = response.data;\n\n\t\t\tif (!responseData)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.previewDataLoaded = true;\n\t\t\tif (this.lastChangedStep === 'connection')\n\t\t\t{\n\t\t\t\tconst headers = [];\n\t\t\t\tresponseData.headers.forEach((header, index) => {\n\t\t\t\t\theaders.push(this.prepareHeader(header, index));\n\t\t\t\t});\n\n\t\t\t\tthis.$store.commit('setFieldsSettings', headers);\n\t\t\t}\n\n\t\t\tthis.$store.commit('setPreviewData', responseData.data);\n\t\t},\n\t\tonSyncSuccess(response)\n\t\t{\n\t\t\tthis.processSyncResponse(response);\n\n\t\t\tthis.$refs.propertiesStep.open();\n\t\t\tthis.$refs.fieldsStep.open();\n\t\t\tthis.toggleStepState('properties', false);\n\t\t\tthis.toggleStepState('fields', false);\n\t\t\tthis.$refs.propertiesStep.validate();\n\t\t\tthis.$refs.fieldsStep.validate();\n\t\t},\n\t\tprocessSyncResponse(response)\n\t\t{\n\t\t\tconst responseData = response.data;\n\t\t\tif (responseData)\n\t\t\t{\n\t\t\t\tthis.previewDataLoaded = true;\n\t\t\t\tconst headers = [];\n\t\t\t\tresponseData.headers.forEach((header, index) => {\n\t\t\t\t\theaders.push(this.prepareHeader(header, index));\n\t\t\t\t});\n\n\t\t\t\tthis.$store.commit('setFieldsSettings', headers);\n\t\t\t\tthis.$store.commit('setPreviewData', responseData.data);\n\t\t\t}\n\n\t\t\tthis.sendAnalytics({\n\t\t\t\tevent: 'sync_fields',\n\t\t\t\tstatus: response.status,\n\t\t\t});\n\t\t},\n\t\tprepareHeader(header, index)\n\t\t{\n\t\t\tconst result = {\n\t\t\t\tvisible: header.visible,\n\t\t\t\ttype: header.type,\n\t\t\t\tname: header.name && header.name.length > 0 ? header.name : `FIELD_${index}`,\n\t\t\t\toriginalType: header.type,\n\t\t\t\toriginalName: header.externalCode,\n\t\t\t\texternalCode: header.externalCode,\n\t\t\t};\n\n\t\t\tif (header.id)\n\t\t\t{\n\t\t\t\tresult.id = header.id;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\tonSaveStart(): Promise\n\t\t{\n\t\t\tif (!this.isValidatedForSave)\n\t\t\t{\n\t\t\t\tthis.$refs.fieldsStep.showValidationErrors();\n\t\t\t\tthis.$refs.propertiesStep.showValidationErrors();\n\n\t\t\t\treturn Promise.reject();\n\t\t\t}\n\n\t\t\tthis.togglePopup('savingProgress', true);\n\n\t\t\treturn Promise.resolve();\n\t\t},\n\t\tonSaveEnd(response)\n\t\t{\n\t\t\tconst datasetName = response.data.name ?? this.$store.state.config.datasetProperties.name;\n\t\t\tconst datasetId = response.data.id ?? this.$store.state.config.datasetProperties.id;\n\t\t\tthis.popupParams.savingSuccess = {\n\t\t\t\ttitle: datasetName,\n\t\t\t\tdatasetId,\n\t\t\t\tlink: response.data.url,\n\t\t\t};\n\n\t\t\tthis.togglePopup('savingProgress', false);\n\t\t\tthis.togglePopup('savingSuccess', true);\n\t\t\tthis.isChanged = false;\n\t\t\tthis.sendAnalytics({\n\t\t\t\tevent: this.isEditMode ? 'dataset_editing' : 'creation_end',\n\t\t\t\tstatus: 'success',\n\t\t\t\tp1: `datasetName_${datasetName.replaceAll('_', '')}`,\n\t\t\t});\n\t\t\tBX.SidePanel.Instance.postMessage(window, 'BIConnector.dataset-import:onDatasetCreated', {});\n\t\t},\n\t\tonSaveError()\n\t\t{\n\t\t\tthis.togglePopup('savingProgress', false);\n\t\t\tthis.togglePopup('savingFailure', true);\n\t\t\tthis.sendAnalytics({\n\t\t\t\tevent: this.isEditMode ? 'dataset_editing' : 'creation_end',\n\t\t\t\tstatus: 'error',\n\t\t\t});\n\t\t\tBX.SidePanel.Instance.postMessage(window, 'BIConnector.dataset-import:onDatasetCreated', {});\n\t\t},\n\t\tonSuccessPopupClose()\n\t\t{\n\t\t\tthis.togglePopup('savingSuccess', false);\n\t\t\tthis.closeApp();\n\t\t},\n\t\tcloseFailurePopup()\n\t\t{\n\t\t\tthis.togglePopup('savingFailure', false);\n\t\t},\n\t\tonSyncFields()\n\t\t{\n\t\t\tthis.isLoading = true;\n\t\t\tAjax.runAction('biconnector.externalsource.dataset.syncField', {\n\t\t\t\tdata: {\n\t\t\t\t\tid: this.datasetId,\n\t\t\t\t},\n\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.isLoading = false;\n\t\t\t\t\tthis.onSyncSuccess(response);\n\t\t\t\t\tthis.popupParams.syncFields.isChange = response.data.isChanged;\n\t\t\t\t\tthis.togglePopup('syncFields', true);\n\t\t\t\t})\n\t\t\t\t.catch((response) => {\n\t\t\t\t\tthis.isLoading = false;\n\t\t\t\t\tthis.processSyncResponse(response);\n\t\t\t\t\tthis.previewError = response.errors[0]?.message ?? this.$Bitrix.Loc.getMessage('DATASET_IMPORT_PREVIEW_ERROR_EXTERNAL');\n\t\t\t\t});\n\t\t},\n\t},\n\tcomponents: {\n\t\tAppLayout,\n\t\tImportConfig,\n\t\tImportPreview,\n\t\tConnectionStep,\n\t\tDatasetPropertiesStep,\n\t\tFieldsSettingsStep,\n\t\tImportProgressPopup,\n\t\tImportSuccessPopup,\n\t\tImportFailurePopup,\n\t\tSyncFieldsPopup,\n\t\tGenericPopup,\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<AppLayout\n\t\t\tref=\"appLayout\"\n\t\t\t:save-locked=\"!isSaveEnabled\"\n\t\t\t:is-edit-mode=\"isEditMode\"\n\t\t>\n\t\t\t<template v-slot:left-panel>\n\t\t\t\t<ImportConfig>\n\t\t\t\t\t<ConnectionStep\n\t\t\t\t\t\t:disabled=\"steps.connection.disabled\"\n\t\t\t\t\t\t:connections=\"appParams.connections\"\n\t\t\t\t\t\tref=\"connectionsStep\"\n\t\t\t\t\t\t@table-selected=\"onTableSelected\"\n\t\t\t\t\t\t@table-deselected=\"onTableDeselected\"\n\t\t\t\t\t\t@validation=\"onStepValidation('connection', $event)\"\n\t\t\t\t\t/>\n\t\t\t\t\t<DatasetPropertiesStep\n\t\t\t\t\t\t:is-open-initially=\"isEditMode\"\n\t\t\t\t\t\t:disabled=\"steps.properties.disabled\"\n\t\t\t\t\t\t:reserved-names=\"appParams.reservedNames\"\n\t\t\t\t\t\tref=\"propertiesStep\"\n\t\t\t\t\t\t@validation=\"onStepValidation('properties', $event)\"\n\t\t\t\t\t\t@properties-changed=\"onDatasetPropertiesChanged\"\n\t\t\t\t\t\t:dataset-source-code=\"'external_' + sourceCode\"\n\t\t\t\t\t/>\n\t\t\t\t\t<FieldsSettingsStep\n\t\t\t\t\t\t:is-open-initially=\"isEditMode\"\n\t\t\t\t\t\t:disabled=\"steps.fields.disabled\"\n\t\t\t\t\t\tref=\"fieldsStep\"\n\t\t\t\t\t\t@validation=\"onStepValidation('fields', $event)\"\n\t\t\t\t\t\t@parsing-options-changed=\"onParsingOptionsChanged\"\n\t\t\t\t\t\t@settings-changed=\"onFieldsChanged\"\n\t\t\t\t\t\t:hint=\"fieldsSettingsStepHint\"\n\t\t\t\t\t\t:sync-fields-props=\"syncFieldsProps\"\n\t\t\t\t\t\t@sync-fields=\"onSyncFields\"\n\t\t\t\t\t/>\n\t\t\t\t</ImportConfig>\n\t\t\t</template>\n\t\t\t<template v-slot:right-panel>\n\t\t\t\t<ImportPreview \n\t\t\t\t\t:empty-state-text=\"emptyStateText\"\n\t\t\t\t\t:is-loading=\"isLoading\"\n\t\t\t\t\t:error=\"previewError\"\n\t\t\t\t\t:needShowHeadersWithEmptyRows=\"true\"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t</AppLayout>\n\n\t\t<ImportProgressPopup\n\t\t\tv-if=\"shownPopups.savingProgress\"\n\t\t\t:description=\"$Bitrix.Loc.getMessage('DATASET_IMPORT_PROGRESS_POPUP_DESCRIPTION')\"\n\t\t/>\n\n\t\t<ImportSuccessPopup\n\t\t\tv-if=\"shownPopups.savingSuccess\"\n\t\t\t@close=\"onSuccessPopupClose\"\n\t\t\t@click=\"closeApp\"\n\t\t\t:title=\"importSuccessPopupTitle\"\n\t\t\t:description=\"''\"\n\t\t\t:dataset-id=\"popupParams.savingSuccess.datasetId\"\n\t\t\t:dataset-link=\"popupParams.savingSuccess.link\"\n\t\t\t:show-more-button=\"!isEditMode\"\n\t\t\t@one-more-click=\"reload\"\n\t\t/>\n\n\t\t<ImportFailurePopup\n\t\t\tv-if=\"shownPopups.savingFailure\"\n\t\t\t@close=\"closeFailurePopup\"\n\t\t\t@click=\"closeFailurePopup\"\n\t\t\t:title=\"$Bitrix.Loc.getMessage('DATASET_IMPORT_FAILURE_POPUP_HEADER')\"\n\t\t\t:description=\"$Bitrix.Loc.getMessage('DATASET_IMPORT_EXTERNAL_FAILURE_POPUP_DESCRIPTION').replace('[link]', '<a>').replace('[/link]', '</a>')\"\n\t\t/>\n\n\t\t<GenericPopup\n\t\t\tv-if=\"shownPopups.loadFailure\"\n\t\t\t:title=\"loadFailurePopupTitle\"\n\t\t\t@close=\"togglePopup('loadFailure')\"\n\t\t>\n\t\t\t<template v-slot:content>\n\t\t\t\t<p v-for=\"message in popupParams.loadFailure.messages\">\n\t\t\t\t\t{{ message }}\n\t\t\t\t</p>\n\t\t\t</template>\n\t\t\t<template v-slot:buttons>\n\t\t\t\t<button @click=\"togglePopup('loadFailure')\" class=\"ui-btn ui-btn-md ui-btn-primary\">{{ $Bitrix.Loc.getMessage('DATASET_IMPORT_FILE_ERROR_POPUP_CLOSE') }}</button>\n\t\t\t</template>\n\t\t</GenericPopup>\n\n\t\t<SyncFieldsPopup\n\t\t\tv-if=\"shownPopups.syncFields\"\n\t\t\t:is-change=\"popupParams.syncFields.isChange\"\n\t\t\t@close=\"togglePopup('syncFields', false)\"\n\t\t>\n\t\t</SyncFieldsPopup>\n\t`,\n};\n","/* eslint-disable no-param-reassign */\nimport { createStore } from 'ui.vue3.vuex';\nimport type { AppStateOptions, ConnectionProperties } from '../types/app-state-options';\n\nexport class Store\n{\n\tstatic buildStore(defaultValues: AppStateOptions)\n\t{\n\t\treturn createStore({\n\t\t\tstate()\n\t\t\t{\n\t\t\t\treturn defaultValues;\n\t\t\t},\n\t\t\tmutations: {\n\t\t\t\tsetFileProperties(state, fileProperties)\n\t\t\t\t{\n\t\t\t\t\tstate.config.fileProperties = fileProperties;\n\t\t\t\t},\n\t\t\t\tsetConnectionProperties(state, connectionProperties)\n\t\t\t\t{\n\t\t\t\t\tstate.config.connectionProperties = connectionProperties;\n\t\t\t\t},\n\t\t\t\tsetDatasetProperties(state, datasetProperties)\n\t\t\t\t{\n\t\t\t\t\tstate.config.datasetProperties = datasetProperties;\n\t\t\t\t},\n\t\t\t\ttoggleRowVisibility(state, rowIndex)\n\t\t\t\t{\n\t\t\t\t\tstate.config.fieldsSettings[rowIndex].visible = !state.config.fieldsSettings[rowIndex].visible;\n\t\t\t\t},\n\t\t\t\tsetAllRowsVisible(state)\n\t\t\t\t{\n\t\t\t\t\tstate.config.fieldsSettings = state.config.fieldsSettings.map((field) => {\n\t\t\t\t\t\tfield.visible = true;\n\n\t\t\t\t\t\treturn field;\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tsetAllRowsInvisible(state)\n\t\t\t\t{\n\t\t\t\t\tstate.config.fieldsSettings = state.config.fieldsSettings.map((field) => {\n\t\t\t\t\t\tfield.visible = false;\n\n\t\t\t\t\t\treturn field;\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tsetFieldRowSettings(state, payload)\n\t\t\t\t{\n\t\t\t\t\tstate.config.fieldsSettings[payload.index] = payload.settings;\n\t\t\t\t},\n\t\t\t\tsetDataFormats(state, formats)\n\t\t\t\t{\n\t\t\t\t\tstate.config.dataFormats = formats;\n\t\t\t\t},\n\t\t\t\tsetPreviewData(state, data)\n\t\t\t\t{\n\t\t\t\t\tstate.previewData.rows = data;\n\t\t\t\t},\n\t\t\t\tsetFieldsSettings(state, settings)\n\t\t\t\t{\n\t\t\t\t\tstate.config.fieldsSettings = settings;\n\t\t\t\t},\n\t\t\t},\n\t\t\tgetters: {\n\t\t\t\tisEditMode(state)\n\t\t\t\t{\n\t\t\t\t\treturn state.config.datasetProperties.id > 0;\n\t\t\t\t},\n\t\t\t\tareAllRowsVisible(state)\n\t\t\t\t{\n\t\t\t\t\treturn state.config.fieldsSettings.filter((field) => !(field.visible)).length === 0;\n\t\t\t\t},\n\t\t\t\tareNoRowsVisible(state)\n\t\t\t\t{\n\t\t\t\t\treturn state.config.fieldsSettings.filter((field) => (field.visible)).length === 0;\n\t\t\t\t},\n\t\t\t\tareSomeRowsVisible(state, getters)\n\t\t\t\t{\n\t\t\t\t\treturn !getters.areAllRowsVisible && !getters.areNoRowsVisible;\n\t\t\t\t},\n\t\t\t\tcolumnVisibilityMap(state)\n\t\t\t\t{\n\t\t\t\t\tconst map = [];\n\t\t\t\t\tstate.config.fieldsSettings.forEach((field) => {\n\t\t\t\t\t\tmap.push(Boolean(field.visible));\n\t\t\t\t\t});\n\n\t\t\t\t\treturn map;\n\t\t\t\t},\n\t\t\t\tpreviewHeaders(state)\n\t\t\t\t{\n\t\t\t\t\treturn state.config.fieldsSettings.map((item) => item.name);\n\t\t\t\t},\n\t\t\t\thasData(state)\n\t\t\t\t{\n\t\t\t\t\treturn state.previewData?.rows?.length > 0;\n\t\t\t\t},\n\t\t\t\tconnectionProperties(state): ConnectionProperties\n\t\t\t\t{\n\t\t\t\t\treturn state.config?.connectionProperties;\n\t\t\t\t},\n\t\t\t\tdatasetProperties(state)\n\t\t\t\t{\n\t\t\t\t\treturn state.config?.datasetProperties;\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n}\n","import { BitrixVue } from 'ui.vue3';\nimport type { AppStateOptions } from '../types/app-state-options';\nimport type { DataFormatTemplate } from '../types/data-types';\nimport { CsvApp } from './csv-app';\nimport { ExternalConnectionApp } from './external-connection-app';\nimport { Store } from './store';\n\nconst codeMap = {\n\tcsv: CsvApp,\n\t'1c': ExternalConnectionApp,\n};\n\ntype AppParams = {\n\tdataFormatTemplates: DataFormatTemplate,\n\tencodings: Array,\n\tseparator: Array,\n};\n\nexport class AppFactory\n{\n\tstatic getApp(code: string, stateOptions: AppStateOptions = {}, appParams: AppParams = {})\n\t{\n\t\tconst defaultStructure = {\n\t\t\tpreviewData: {},\n\t\t\tconfig: {\n\t\t\t\tfileProperties: {},\n\t\t\t\tdataFormats: {},\n\t\t\t\tdatasetProperties: {},\n\t\t\t\tfieldsSettings: [],\n\t\t\t},\n\t\t};\n\n\t\tconst state = BX.util.objectMerge(defaultStructure, stateOptions);\n\n\t\tlet app = null;\n\n\t\tconst appComponent = codeMap[code];\n\n\t\tif (appComponent)\n\t\t{\n\t\t\tapp = BitrixVue.createApp({\n\t\t\t\tname: 'DatasetImport',\n\t\t\t\tdata()\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\tappParams,\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tcomponents: {\n\t\t\t\t\tappComponent,\n\t\t\t\t},\n\t\t\t\tcomputed: {\n\t\t\t\t\tcomponentName()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn appComponent;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t// language=Vue\n\t\t\t\ttemplate: `\n\t\t\t\t\t<component :is=\"componentName\" :app-params=\"appParams\" />\n\t\t\t\t`,\n\t\t\t});\n\t\t}\n\n\t\tif (app)\n\t\t{\n\t\t\tconst store = Store.buildStore(state);\n\n\t\t\tapp.use(store);\n\t\t}\n\n\t\treturn app;\n\t}\n}\n","import { Uri } from 'main.core';\nimport { SidePanel } from 'ui.sidepanel';\n\nexport class Slider\n{\n\tstatic open(sourceId: string, datasetId: ?number = 0): void\n\t{\n\t\tconst componentLink = '/bitrix/components/bitrix/biconnector.dataset.import/slider.php';\n\n\t\tconst sliderLink = new Uri(componentLink);\n\t\tsliderLink.setQueryParam('sourceId', sourceId);\n\t\tif (datasetId)\n\t\t{\n\t\t\tsliderLink.setQueryParam('datasetId', datasetId);\n\t\t}\n\n\t\tconst options = {\n\t\t\tallowChangeHistory: false,\n\t\t\tcacheable: false,\n\t\t\tcustomLeftBoundary: 0,\n\t\t};\n\n\t\tSidePanel.Instance.open(\n\t\t\tsliderLink.toString(),\n\t\t\toptions,\n\t\t);\n\t}\n}\n"],"names":["AppLayout","props","saveLocked","type","Boolean","required","default","isEditMode","computed","saveButtonClass","saveButtonText","$Bitrix","Loc","getMessage","mounted","Dom","addClass","document","querySelector","buttonsPanel","$refs","$root","$el","parentNode","appendChild","BX","UI","Pinner","fixBottom","fullWidth","methods","onCreateButtonClick","eventEmitter","emit","onCancelButtonClick","template","ImportConfig","Popup","emits","id","String","options","Object","wrapperClass","data","popupInstance","popupOptions","content","autoHide","events","onPopupClose","closePopup","onPopupDestroy","fixed","PopupManager","getPopupById","destroy","$emit","MainPopup","show","beforeUnmount","FileErrorsPopup","errors","Array","isSavingMode","reportDownloadLink","width","closeIcon","noAllPaddings","overlay","title","length","hintContent","prepareHintContent","errorsCountText","replace","onClose","onIgnoreErrorsClick","onDownloadLogButtonClick","downloadLogButton","setState","ButtonState","WAITING","downloadLog","Ajax","runAction","fields","$store","state","config","then","response","blob","Blob","window","URL","createObjectURL","catch","link","createElement","href","download","append","body","click","remove","phraseCode","message","Button","size","ButtonSize","EXTRA_SMALL","color","ButtonColor","LIGHT","noCaps","onclick","text","className","renderTo","summaryBlock","revokeObjectURL","components","CheckingProgressPopup","background","loader","Loader","target","strokeWidth","mode","CheckingSuccessPopup","CheckingFailedPopup","GenericPopup","SavingPopup","description","minHeight","ImportFailurePopup","onClick","SaveProgressPopup","ImportProgressPopup","ImportSuccessPopup","datasetId","Number","showMoreButton","onButtonClick","openDatasetButton","open","focus","removeClass","onOneMoreButtonClick","oneMoreButton","StepHint","hintClass","StepBlock","section","hint","isOpenInitially","canCollapse","disabled","customClasses","additionalClasses","custom","reduce","acc","key","toggleCollapse","toggle","contentContainer","Section","isOpen","watch","newValue","getContent","innerHTML","Text","encode","BaseStep","displayedTitle","defaultTitle","displayedHint","defaultHint","stepBlock","close","validate","showValidationErrors","Step","ErrorPopup","create","element","Tag","render","bindElement","darkMode","bindOptions","position","angle","cacheable","setOptions","angleMinBottom","BaseField","defaultValue","name","placeholder","isValid","errorMessage","isDisabled","hintText","value","areValidationErrorsShown","onInputChange","fieldName","StringField","extends","errorPopup","errorPopupTimeout","onInput","event","onBlur","showErrorHint","setTimeout","hideErrorHint","clearTimeout","createErrorPopup","errorIconWrapper","Hint","createNode","TextField","DatasetProperties","defaultName","defaultDescription","unvalidatedFields","disabledFields","datasetSourceCode","onValueChange","nameField","DatasetPropertiesStep","reservedNames","datasetProperties","getters","result","nameValidationResult","validateName","onDatasetPropertiesFieldsChange","commit","keys","isReserved","includes","test","TableHeader","enabled","indeterminate","isNeedShowOriginalNameHint","fileProperties","firstLineHeader","onCheckboxClick","preventDefault","DataType","string","money","int","double","date","datetime","DataTypeDescriptions","icon","DataTypeMenu","constructor","selectedType","onSelect","getMenu","items","entries","forEach","push","html","item","getMenuWindow","Menu","DataTypeSelector","canEdit","typeMenu","isFocused","iconClass","typeTitle","isEditable","getPopupWindow","setWidth","formatButton","offsetWidth","createMenu","destroyMenu","TableRow","directives","index","fieldSettings","invalidFields","displayedValidationErrors","isNameValid","displayedErrorForName","set","Set","originalsHintText","originalType","originalName","typeText","nameText","connectionProperties","connectionType","hintOptions","offsetLeft","offsetTop","onTypeSelected","onFieldInput","onFieldBlur","field","originalsHint","DataTypeButton","BIcon","FormatTable","fieldsSettings","unvalidatedRows","areAllRowsVisible","areNoRowsVisible","areSomeRowsVisible","onRowCheckboxClicked","onHeaderCheckboxClicked","onRowFieldChanged","rowIndices","row","SyncFieldsButton","FieldsSettingsStep","syncFieldsProps","supported","rows","isSyncSupported","isSyncDisabled","isNotEmpty","isTooLong","areCharactersValid","isAlreadyUsed","previewHeaders","count","onRowToggled","onHeaderToggled","settings","formatTable","OptionType","CUSTOM","VALUE","FormatSelector","openSlider","selected","dataFormatTemplates","SidePanel","Instance","contentCallback","Layout","createContent","extensions","buttons","cancelButton","SaveButton","form","getTopSlider","getContainer","formData","FormData","fromEntries","customFieldsToExtract","formRoot","subtitle","fieldType","selectRoot","isCustomSelected","customElement","customOptionInput","option","optionElement","isSelected","Event","bind","setAttribute","SliderButton","SwitcherField","Switcher","node","switcher","SwitcherSize","small","checked","handlers","toggled","CustomField","DropdownField","FileUploader","FileUploadWidget","defaultEncoding","defaultSeparator","defaultFirstLineHeader","encodings","separators","inputElement","uploaderOptions","controller","controllerOptions","multiple","acceptOnlyImages","maxFileSize","autoUpload","acceptedFileTypes","onUploadComplete","onFileRemoved","onError","onUploadError","widgetOptions","file","uploader","getFiles","isComplete","getServerFileId","getName","openDataFormatSlider","dataFormats","selectedFormats","FileStep","isErrorDisplayed","fileValidationResult","validateFile","onFilePropertiesChange","onParsingOptionsChanged","fileToken","fileUploader","AppSection","headers","columnVisibility","visibleHeaders","filter","_","visibleValues","PreviewTable","displayedColumnVisibility","debouncedRefresh","debounce","refreshColumns","ears","Ears","container","smallSize","noScrollbar","init","newVisibility","table","oldValue","ImportPreview","emptyStateText","error","isLoading","needShowHeadersWithEmptyRows","previewData","isEverythingHidden","hasData","hasHeaders","displayedEmptyStateText","displayedEverythingHiddenText","columnVisibilityMap","isErrorInEditMode","isEditModeInitialDataDisplayed","hasDataDisplayedHint","loadingAnchor","BaseApp","appParams","steps","shownPopups","isChanged","isSaveComplete","lastChangedStep","sourceCode","loadParams","saveParams","isSaveEnabled","isValidatedForSave","previewError","unsavedChangesPopupTitle","unsavedChangesPopupText","subscribe","onSaveButtonClick","slider","top","addCustomEvent","onSliderClose","addEventListener","removeCustomEvent","unsubscribe","markAsChanged","sendAnalytics","status","denyAction","continueButton","PRIMARY","popup","closeButton","LINK","closeApp","popupHeader","popupText","toggleStepState","step","Type","isNull","togglePopup","shown","loadDataset","onLoadSuccess","onLoadError","onStepValidation","validationResult","valid","onSaveStart","handleSaveAction","updateDataset","saveDataset","onSaveEnd","onSaveError","Promise","resolve","onLoadStart","reload","location","params","sendData","getBaseAnalyticsParams","tool","c_section","category","toUpperCase","CsvApp","properties","savingProgress","savingSuccess","savingFailure","editModeFileReplacement","checkFileProgress","checkFileSuccess","checkFileFailure","fileErrors","isValidationComplete","popupParams","lastReloadSource","initialPreviewData","initialFieldsSettings","isEditModeSaveConfirmed","isDataLoadingAnimationDisplayed","hasMinimalLoadingAnimationTimePassed","checkFileErrors","isErrorsChecked","importFailurePopupTitle","importSuccessPopupTitle","importSuccessPopupDescription","fileName","importProgressPopupDescription","onDatasetPropertiesChanged","c_element","p1","replaceAll","onFieldsSettingsChanged","onDatasetReloadNeeded","reloadSource","startPreviewLoadingAnimation","propertiesStep","fieldsStep","toggleCheckFileButton","processLoadResponse","responseData","header","prepareHeader","visible","externalCode","stopPreviewLoadingAnimation","fileStep","reject","checkFile","datasetName","postMessage","onSuccessPopupClose","closeFailurePopup","onReplacementButtonClick","onCheckFileClick","saveIgnoringErrors","prepareCheckFileErrors","console","lineNumber","columnName","customData","button","attr","EventEmitter","SyncFieldsPopup","isChange","getDescription","ConnectionSelectorField","connectionId","selector","TagSelector","selectorId","addButtonCaption","addButtonCaptionMore","dialogOptions","prepareItems","enableSearch","dropdownMode","showAvatars","compactView","height","tabs","stubOptions","arrow","iconOpacity","entities","onTagAdd","onTagRemove","getDialog","footer","allowChangeHistory","getTab","setFooter","messageEvent","getData","getEventId","addSelectedItem","selectorItems","itemOptions","ID","TITLE","entityId","linkTitle","TYPE","avatar","toString","connection","addItem","select","hide","TableSelectorField","dynamicLoad","stub","dynamicSearch","setLocked","offset","newConnectionId","removeTags","removeItems","getEntity","ConnectionStep","connections","tableId","connectionSelectorId","tableSelectorId","connectionSelectorOptions","tableSelectorOptions","selectedConnectionType","selectedConnectionId","selectedConnectionName","connectionName","selectedTableName","tableName","onConnectionSelected","tag","dialogItems","getItems","getId","getCustomData","sourceId","parseInt","get","onConnectionDeselected","onTableSelected","getTitle","code","externalName","onTableDeselected","openConnectionSlider","ExternalConnectionApp","loadFailure","syncFields","messages","previewDataLoaded","connectionSettings","loadFailurePopupTitle","fieldsSettingsStepHint","onSliderEvent","onConnectionCreated","onConnectionCreationError","sendConnectionSelectorAnalytics","onFieldsChanged","onSyncSuccess","processSyncResponse","url","onSyncFields","Store","buildStore","defaultValues","createStore","mutations","setFileProperties","setConnectionProperties","setDatasetProperties","toggleRowVisibility","rowIndex","setAllRowsVisible","map","setAllRowsInvisible","setFieldRowSettings","payload","setDataFormats","formats","setPreviewData","setFieldsSettings","codeMap","csv","AppFactory","getApp","stateOptions","defaultStructure","util","objectMerge","app","appComponent","BitrixVue","createApp","componentName","store","use","Slider","componentLink","sliderLink","Uri","setQueryParam","customLeftBoundary"],"mappings":"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"}