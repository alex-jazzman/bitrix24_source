this.BX=this.BX||{};this.BX.BIConnector=this.BX.BIConnector||{};(function(e,s){"use strict";var t=babelHelpers.classPrivateFieldLooseKey("instance");var a=babelHelpers.classPrivateFieldLooseKey("exportDownloadLinks");var o=babelHelpers.classPrivateFieldLooseKey("getDownloadLink");var l=babelHelpers.classPrivateFieldLooseKey("downloadDatasetFromLink");class r{constructor(){Object.defineProperty(this,l,{value:c});Object.defineProperty(this,o,{value:i});Object.defineProperty(this,a,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,a)[a]=new Map}static getInstance(){if(!babelHelpers.classPrivateFieldLooseBase(r,t)[t]){babelHelpers.classPrivateFieldLooseBase(r,t)[t]=new r}return babelHelpers.classPrivateFieldLooseBase(r,t)[t]}downloadOnce(e){return new Promise(((s,t)=>{babelHelpers.classPrivateFieldLooseBase(this,o)[o](e.id).then((t=>{babelHelpers.classPrivateFieldLooseBase(this,l)[l](t,e);URL.revokeObjectURL(t);babelHelpers.classPrivateFieldLooseBase(this,a)[a].delete(e.id);s()})).catch((e=>{t(e)}))}))}download(e){return new Promise(((s,t)=>{babelHelpers.classPrivateFieldLooseBase(this,o)[o](e.id).then((t=>{babelHelpers.classPrivateFieldLooseBase(this,l)[l](t,e);s()})).catch((e=>{t(e)}))}))}}function i(e){return new Promise(((t,o)=>{if(babelHelpers.classPrivateFieldLooseBase(this,a)[a].has(e)){t(babelHelpers.classPrivateFieldLooseBase(this,a)[a].get(e))}s.ajax.runAction("biconnector.externalsource.dataset.export",{data:{id:e,exportFormat:"csv"}}).then((s=>{const o=new Blob([s.data],{type:"text/csv"});const l=URL.createObjectURL(o);babelHelpers.classPrivateFieldLooseBase(this,a)[a].set(e,l);t(l)})).catch((e=>{o(e)}))}))}function c(e,t){var a;const o=document.createElement("a");o.href=e;o.download=`${(a=t.title)!=null?a:"csv_dataset"}.csv`;s.Dom.append(o,document.body);o.click();s.Dom.remove(o)}Object.defineProperty(r,t,{writable:true,value:void 0});e.FileExport=r})(this.BX.BIConnector.DatasetImport=this.BX.BIConnector.DatasetImport||{},BX);
//# sourceMappingURL=file-export.bundle.map.js