this.BX=this.BX||{};this.BX.Call=this.BX.Call||{};(function(e,a,l,t,c){"use strict";const o=Object.freeze({clickScreenshare:"click_screenshare",startScreenshare:"start_screenshare",finishScreenshare:"finish_screenshare",connect:"connect",startCall:"start_call",reconnect:"reconnect",addUser:"add_user",disconnect:"disconnect",finishCall:"finish_call",clickRecord:"click_record",recordStart:"record_start",recordStop:"record_stop",clickAnswer:"click_answer",clickDeny:"click_deny",cameraOn:"camera_on",cameraOff:"camera_off",micOn:"mic_on",micOff:"mic_off",clickUserFrame:"click_user_frame",handOn:"hand_on",clickChat:"click_chat",click:"click",create:"create",edit:"edit",save:"save",upload:"upload",openResume:"open_resume",clickCallButton:"click_call_button",clickStartConf:"click_start_conf",aiRecordStart:"ai_record_start",aiOn:"ai_on",aiOff:"ai_off",openTab:"open_tab",clickCreateEvent:"click_create_event",clickCreateTask:"click_create_task",viewPopup:"view_popup",viewNotification:"view_notification",clickTimeCode:"click_timecode",playRecord:"play_record",clickAiOff:"click_ai_off",delete:"delete",openSettings:"open_settings",restrictCamera:"restrict_camera",restrictMic:"restrict_mic",restrictScreenshare:"restrict_screenshare",allCamerasOff:"all_cameras_off",allMicOff:"all_mic_off",allScreenshareOff:"all_screenshare_off",userCameraOff:"user_camera_off",userMicOff:"user_mic_off",userScreenshareOff:"user_screenshare_off",deleteUser:"delete_user",denyRequest:"deny_request",approveRequest:"approve_request"});const n=Object.freeze({im:"im",ai:"ai"});const s=Object.freeze({call:"call",callDocs:"call_docs",messenger:"messenger",callsOperations:"calls_operations",callFollowup:"call_followup"});const i=Object.freeze({private:"private",group:"group",videoconf:"videoconf",resume:"resume",doc:"doc",presentation:"presentation",sheet:"sheet",privateCall:"private",groupCall:"group",aiOn:"ai_on",turnOnAi:"turn_on_ai"});const r=Object.freeze({callWindow:"call_window",callPopup:"call_popup",chatList:"chat_list",chatWindow:"chat_window",callMessage:"call_message",callFollowup:"call_followup",call:"call"});const d=Object.freeze({finishButton:"finish_button",contextMenu:"context_menu",window:"window"});const p=Object.freeze({answerButton:"answer_button",joinButton:"join_button",videocall:"videocall",audiocall:"audiocall",recordButton:"record_button",disconnectButton:"disconnect_button",finishForAllButton:"finish_for_all_button",videoButton:"video_button",audioButton:"audio_button",startButton:"start_button",initialBanner:"initial_banner",startMessage:"start_message",finishMessage:"finish_message"});const _=Object.freeze({success:"success",decline:"decline",busy:"busy",noAnswer:"no_answer",quit:"quit",lastUserLeft:"last_user_left",finishedForAll:"finished_for_all",privateToGroup:"private_to_group",errorAgreement:"error_agreement",errorLimitBaas:"error_limit_baas",errorB24:"error_b24"});const y=Object.freeze({videoOn:"video_on",videoOff:"video_off",micOn:"mic_on",micOff:"mic_off"});const u=Object.freeze({aiOn:"ai_on",aiOff:"ai_off"});var f=babelHelpers.classPrivateFieldLooseKey("callAutoStartRecordSent");class m{constructor(){Object.defineProperty(this,f,{writable:true,value:[]})}onAIRecordStart(e){if(e!=null&&e.isAutostart&&babelHelpers.classPrivateFieldLooseBase(this,f)[f].includes(e.callId)){return}babelHelpers.classPrivateFieldLooseBase(this,f)[f].push(e.callId);const a={AI_UNAVAILABLE_ERROR:_.errorB24,AI_SETTINGS_ERROR:_.errorB24,AI_AGREEMENT_ERROR:_.errorAgreement,AI_NOT_ENOUGH_BAAS_ERROR:_.errorLimitBaas};const l={tool:n.ai,category:s.callsOperations,event:o.aiRecordStart,type:e.callType,c_section:r.callFollowup,p5:`callId_${e.callId}`};if(e!=null&&e.userCount){l.p3=`userCount_${e.userCount}`}l.status=e!=null&&e.errorCode?a[e.errorCode]:_.success;t.sendData(l)}onAIRecordStatusChanged(e){t.sendData({tool:n.im,category:s.call,event:e.isAIOn?o.aiOn:o.aiOff,type:e.callType,status:e!=null&&e.error?`error_${e.error}`:_.success,p5:`callId_${e.callId}`})}onOpenFollowUpTab(e){t.sendData({tool:n.im,category:s.callFollowup,event:o.openTab,type:e.tabName,p5:`callId_${e.callId}`})}onFollowUpCreateEventClick(e){t.sendData({tool:n.im,category:s.callFollowup,event:o.clickCreateEvent,p5:`callId_${e.callId}`})}onFollowUpCreateTaskClick(e){t.sendData({tool:n.im,category:s.callFollowup,event:o.clickCreateTask,p5:`callId_${e.callId}`})}onAIRestrictionsPopupShow(e){t.sendData({tool:n.im,category:s.call,event:o.viewPopup,type:e.popupType,p5:`callId_${e.callId}`})}onCopilotNotifyShow(e){t.sendData({tool:n.im,category:s.call,event:o.viewNotification,type:e.isCopilotActive?i.aiOn:i.turnOnAi,p5:`callId_${e.callId}`})}onAIRecordTimeCodeClick(e){t.sendData({tool:n.im,category:s.callFollowup,event:o.clickTimeCode,p5:`callId_${e.callId}`})}onAIPlayRecord(e){t.sendData({tool:n.im,category:s.callFollowup,event:o.playRecord,p5:`callId_${e.callId}`})}onClickAIOff(e){t.sendData({tool:n.im,category:s.call,event:o.clickAiOff,type:e.callType,p5:`callId_${e.callId}`})}onSelectAIOff(e){t.sendData({tool:n.im,category:s.call,event:o.aiOff,type:e.callType,p5:`callId_${e.callId}`})}onSelectAIDelete(e){t.sendData({tool:n.im,category:s.call,event:o.delete,type:e.callType,c_section:r.call,p5:`callId_${e.callId}`})}}var v=babelHelpers.classPrivateFieldLooseKey("instance");var h=babelHelpers.classPrivateFieldLooseKey("screenShareStarted");var I=babelHelpers.classPrivateFieldLooseKey("recordStarted");var g=babelHelpers.classPrivateFieldLooseKey("getCallElementParam");var C=babelHelpers.classPrivateFieldLooseKey("getCallTypeParam");class b{constructor(){Object.defineProperty(this,C,{value:T});Object.defineProperty(this,g,{value:O});this.copilot=new m;Object.defineProperty(this,h,{writable:true,value:false});Object.defineProperty(this,I,{writable:true,value:false})}static getInstance(){if(!babelHelpers.classPrivateFieldLooseBase(this,v)[v]){babelHelpers.classPrivateFieldLooseBase(this,v)[v]=new this}return babelHelpers.classPrivateFieldLooseBase(this,v)[v]}onScreenShareBtnClick({callId:e,callType:a}){if(babelHelpers.classPrivateFieldLooseBase(this,h)[h]){return}t.sendData({tool:n.im,category:s.call,event:o.clickScreenshare,type:a,c_section:r.callWindow,p5:`callId_${e}`})}onScreenShareStarted({callId:e,callType:a}){babelHelpers.classPrivateFieldLooseBase(this,h)[h]=true;t.sendData({tool:n.im,category:s.call,event:o.startScreenshare,type:a,c_section:r.callWindow,p5:`callId_${e}`})}onScreenShareStopped({callId:e,callType:a,status:l,screenShareLength:c}){if(!babelHelpers.classPrivateFieldLooseBase(this,h)[h]){return}babelHelpers.classPrivateFieldLooseBase(this,h)[h]=false;t.sendData({tool:n.im,category:s.call,event:o.finishScreenshare,type:a,c_section:r.callWindow,status:l,p1:`shareLength_${c}`,p5:`callId_${e}`})}onAnswerConference(e){t.sendData({tool:n.im,category:s.call,event:o.clickAnswer,type:i.videoconf,c_section:r.callPopup,p5:`callId_${e.callId}`})}onDeclineConference(e){t.sendData({tool:n.im,category:s.call,event:o.clickDeny,type:i.videoconf,c_section:r.callPopup,p5:`callId_${e.callId}`})}onStartVideoconf(e){t.sendData({tool:n.im,category:s.call,event:o.startCall,type:i.videoconf,c_element:e.withVideo?p.videoButton:p.audioButton,status:e.status,p1:e.mediaParams.video?y.videoOn:y.videoOff,p2:e.mediaParams.audio?y.micOn:y.micOff,p3:e.isCopilotActive?u.aiOn:u.aiOff,p5:`callId_${e.callId}`})}onJoinVideoconf(e){t.sendData({tool:n.im,category:s.call,event:o.connect,type:i.videoconf,c_element:e.withVideo?p.videoButton:p.audioButton,status:e.status,p1:e.mediaParams.video?y.videoOn:y.videoOff,p2:e.mediaParams.audio?y.micOn:y.micOff,p5:`callId_${e.callId}`})}onStartCall(e){const c={tool:n.im,category:s.call,event:o.startCall,type:e.callType,status:e.status,p1:e.mediaParams.video?y.videoOn:y.videoOff,p2:e.mediaParams.audio?y.micOn:y.micOff,p3:e.isCopilotActive?u.aiOn:u.aiOff,p5:`callId_${e.callId}`};if(e.associatedEntity.advanced.chatType===a.ChatType.collab){c.p4=l.getCollabId(this.normalizeChatId(e.associatedEntity.id))}t.sendData(c)}onStartCallError(e){const a={tool:n.im,category:s.call,event:o.startCall,type:e.callType,status:`error_${e.errorCode}`,p5:"callId_0"};t.sendData(a)}onJoinCall(e){const c={tool:n.im,category:s.call,event:o.connect,type:e.callType,status:e.status,p3:l.getUserType(),p5:`callId_${e.callId}`};if(e.section){c.c_section=e.section}if(e.element){c.c_element=e.element}if(e.mediaParams){c.p1=e.mediaParams.video?y.videoOn:y.videoOff;c.p2=e.mediaParams.audio?y.micOn:y.micOff}if(e.associatedEntity.advanced.chatType===a.ChatType.collab){const a=e.associatedEntity.advanced.entityId;c.p4=`collabId_${a}`}t.sendData(c)}onJoinCallError(e){const a={tool:n.im,category:s.call,event:o.connect,type:e.callType,status:`error_${e.errorCode}`,p5:`callId_${e.callId}`};t.sendData(a)}onReconnect(e){t.sendData({tool:n.im,category:s.call,event:o.reconnect,type:e.callType,c_section:r.callWindow,status:e.status,p4:`attemptNumber_${e.reconnectionEventCount}`,p5:`callId_${e.callId}`})}onReconnectError(e){t.sendData({tool:n.im,category:s.call,event:o.reconnect,type:e.callType,status:`error_${e.errorCode}`,p5:`callId_${e.callId}`})}onInviteUser(e){t.sendData({tool:n.im,category:s.call,event:o.addUser,type:e.callType,c_section:r.callWindow,p4:`chatId_${this.normalizeChatId(e.chatId)}`,p5:`callId_${e.callId}`})}onDisconnectCall(e){t.sendData({tool:n.im,category:s.call,event:o.disconnect,type:e.callType,c_section:r.callWindow,c_sub_section:e.subSection,status:_.quit,p1:e.mediaParams.video?y.videoOn:y.videoOff,p2:e.mediaParams.audio?y.micOn:y.micOff,p5:`callId_${e.callId}`})}onFinishCall(e){t.sendData({tool:n.im,category:s.call,event:o.finishCall,type:e.callType,c_section:r.callWindow,status:e.status,p1:`callLength_${e.callLength}`,p3:`maxUserCount_${e.callUsersCount}`,p4:`chatId_${this.normalizeChatId(e.chatId)}`,p5:`callId_${e.callId}`})}onRecordBtnClick(e){if(babelHelpers.classPrivateFieldLooseBase(this,I)[I]){return}t.sendData({tool:n.im,category:s.call,event:o.clickRecord,type:e.callType,c_section:r.callWindow,c_element:p.recordButton,p5:`callId_${e.callId}`})}onRecordStart(e){if(babelHelpers.classPrivateFieldLooseBase(this,I)[I]){return}babelHelpers.classPrivateFieldLooseBase(this,I)[I]=true;t.sendData({tool:n.im,category:s.call,event:o.recordStart,type:e.callType,c_section:r.callWindow,status:_.success,p5:`callId_${e.callId}`})}onRecordStop(e){if(!babelHelpers.classPrivateFieldLooseBase(this,I)[I]){return}babelHelpers.classPrivateFieldLooseBase(this,I)[I]=false;t.sendData({tool:n.im,category:s.call,event:o.recordStop,type:e.callType,c_section:r.callWindow,c_sub_section:e.subSection,c_element:e.element,p1:`recordLength_${e==null?void 0:e.recordTime}`,p5:`callId_${e.callId}`})}onToggleCamera(e){t.sendData({tool:n.im,category:s.call,event:e.video?o.cameraOn:o.cameraOff,type:e.callType,c_section:r.callWindow,p5:`callId_${e.callId}`})}onToggleMicrophone(e){t.sendData({tool:n.im,category:s.call,event:e.muted?o.micOff:o.micOn,type:e.callType,c_section:r.callWindow,p5:`callId_${e.callId}`})}onClickUser(e){t.sendData({tool:n.im,category:s.call,event:o.clickUserFrame,type:e.callType,c_section:r.callWindow,c_sub_section:e.layout.toLowerCase(),p5:`callId_${e.callId}`})}onFloorRequest(e){t.sendData({tool:n.im,category:s.call,event:o.handOn,type:e.callType,c_section:r.callWindow,p5:`callId_${e.callId}`})}onShowChat(e){t.sendData({tool:n.im,category:s.call,event:o.clickChat,type:e.callType,c_section:r.callWindow,p5:`callId_${e.callId}`})}onDocumentBtnClick(e){t.sendData({tool:n.im,category:s.callDocs,event:o.click,p4:`callType_${e.callType}`,p5:`callId_${e.callId}`})}onDocumentCreate(e){t.sendData({tool:n.im,category:s.callDocs,event:o.create,type:e.type,p4:`callType_${e.callType}`,p5:`callId_${e.callId}`})}onDocumentClose(e){t.sendData({tool:n.im,category:s.callDocs,event:o.save,type:e.type,p4:`callType_${e.callType}`,p5:`callId_${e.callId}`})}onDocumentUpload(e){t.sendData({tool:n.im,category:s.callDocs,event:o.upload,type:e.type,p4:`callType_${e.callType}`,p5:`callId_${e.callId}`})}onLastResumeOpen(e){t.sendData({tool:n.im,category:s.callDocs,event:o.openResume,p4:`callType_${e.callType}`,p5:`callId_${e.callId}`})}normalizeChatId(e){if(!e){return 0}if(e.includes("chat")){e=e.replace("chat","")}return e}onChatHeaderStartCallClick(e){const c={tool:n.im,category:s.messenger,event:o.clickCallButton,c_section:r.chatWindow,c_sub_section:d.window,p5:`chatId_${e.dialog.chatId}`};c.type=babelHelpers.classPrivateFieldLooseBase(this,C)[C](e.dialog.type);c.c_element=babelHelpers.classPrivateFieldLooseBase(this,g)[g](e.callType);if(e.dialog.type===a.ChatType.collab){c.p4=l.getCollabId(e.dialog.chatId)}t.sendData(c)}onContextMenuStartCallClick(e){const c={tool:n.im,category:s.messenger,event:o.clickCallButton,c_section:r.chatWindow,c_sub_section:d.contextMenu,p5:`chatId_${e.context.chatId}`};c.type=babelHelpers.classPrivateFieldLooseBase(this,C)[C](e.context.type);c.c_element=babelHelpers.classPrivateFieldLooseBase(this,g)[g](e.callType);if(e.context.type===a.ChatType.collab){c.p4=l.getCollabId(e.context.chatId)}t.sendData(c)}onStartConferenceClick(e){t.sendData({tool:n.im,category:s.call,event:o.clickStartConf,type:i.videoconf,c_section:r.chatWindow,c_element:p.startButton,p5:`chatId_${e.chatId}`})}onChatCreationMessageStartCallClick(e){t.sendData({tool:n.im,category:s.messenger,event:o.clickCallButton,type:i.groupCall,c_section:r.chatWindow,c_sub_section:d.window,c_element:p.initialBanner,p5:`chatId_${e.chatId}`})}onRecentStartCallClick(e){t.sendData({tool:n.im,category:s.messenger,event:o.clickCallButton,type:e.isGroupChat?i.groupCall:i.privateCall,c_section:r.chatList,c_sub_section:d.contextMenu,c_element:p.videocall,p5:`chatId_${e.chatId}`})}onChatStartConferenceClick(e){t.sendData({tool:n.im,category:s.call,event:o.clickStartConf,type:i.videoconf,c_section:r.chatWindow,c_element:p.initialBanner,p5:`chatId_${e.chatId}`})}onJoinConferenceClick(e){t.sendData({tool:n.im,category:s.call,event:o.clickJoin,type:i.videoconf,c_section:r.chatList,p5:`callId_${e.callId}`})}onStartCallMessageClick(e){const c={tool:n.im,category:s.messenger,event:o.clickCallButton,c_section:r.callMessage,c_element:p.startMessage,p5:`chatId_${e.dialog.chatId}`};c.type=babelHelpers.classPrivateFieldLooseBase(this,C)[C](e.dialog.type);if(e.dialog.type===a.ChatType.collab){c.p4=l.getCollabId(e.dialog.chatId)}t.sendData(c)}onFinishCallMessageClick(e){const c={tool:n.im,category:s.messenger,event:o.clickCallButton,c_section:r.callMessage,c_element:p.finishMessage,p5:`chatId_${e.dialog.chatId}`};c.type=babelHelpers.classPrivateFieldLooseBase(this,C)[C](e.dialog.type);if(e.dialog.type===a.ChatType.collab){c.p4=l.getCollabId(e.dialog.chatId)}t.sendData(c)}onOpenCallSettings(e){t.sendData({tool:n.im,category:s.call,event:o.openSettings,type:e.callType,p5:`callId_${e.callId}`})}onDeleteUser(e){t.sendData({tool:n.im,category:s.call,event:o.deleteUser,type:e.callType,p5:`callId_${e.callId}`})}onCallSettingsChanged(e){let a="";switch(e.typeOfSetting){case"mic":a=o.restrictMic;break;case"cam":a=o.restrictCamera;break;case"screenshare":a=o.restrictScreenshare;break}if(a){t.sendData({tool:n.im,category:s.call,event:a,type:e.callType,p5:`callId_${e.callId}`})}}onTurnOffAllParticipansStream(e){let a="";switch(e.typeOfStream){case"mic":a=o.allMicOff;break;case"cam":a=o.allCamerasOff;break;case"screenshare":a=o.allScreenshareOff;break}if(a){t.sendData({tool:n.im,category:s.call,event:a,type:e.callType,p5:`callId_${e.callId}`})}}onTurnOffParticipantStream(e){let a="";switch(e.typeOfSetting){case"mic":a=o.userMicOff;break;case"cam":a=o.userCameraOff;break;case"screenshare":a=o.userScreenshareOff;break}if(a){t.sendData({tool:n.im,category:s.call,event:a,type:e.callType,p5:`callId_${e.callId}`})}}onAllowPermissionToSpeakResponse(e){t.sendData({tool:n.im,category:s.call,event:o.approveRequest,type:e.callType,p5:`callId_${e.callId}`})}onDisallowPermissionToSpeakResponse(e){t.sendData({tool:n.im,category:s.call,event:o.denyRequest,type:e.callType,p5:`callId_${e.callId}`})}}function O(e){return e===c.CallTypes.video.id?p.videocall:p.audiocall}function T(e){return e===a.ChatType.user?i.private:i.group}Object.defineProperty(b,v,{writable:true,value:void 0});b.AnalyticsType=i;b.AnalyticsStatus=_;b.AnalyticsSection=r;b.AnalyticsElement=p;b.AnalyticsSubSection=d;e.Analytics=b})(this.BX.Call.Lib=this.BX.Call.Lib||{},BX.Messenger.v2.Const,BX.Messenger.v2.Lib,BX.UI.Analytics,BX.Call.Const);
//# sourceMappingURL=analytics.bundle.map.js