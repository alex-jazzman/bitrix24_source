{"version":3,"file":"hardware.bundle.map.js","names":["this","BX","Call","exports","main_core_events","im_v2_lib_desktopApi","lsKey","defaultMicrophone","defaultCamera","defaultSpeaker","Events","initialized","deviceChanged","HardwareManager","EventEmitter","constructor","super","setEventNamespace","_currentDeviceList","updating","init","Promise","resolve","initPromise","_checkPermissions","reject","enumerateDevices","then","deviceList","filterDeviceList","navigator","mediaDevices","addEventListener","debounce","onNavigatorDeviceChanged","bind","emit","catch","e","cameraPermission","permissions","query","name","microphonePermission","onchange","status","getCurrentDeviceList","getUserMedia","constraints","error","Error","code","stream","err","devices","cameraList","_getDeviceMap","microphoneList","audioOutputList","microphoneId","localStorage","getItem","Object","keys","length","includes","getDefaultDeviceIdByGroupId","getDeviceGroupIdByDeviceId","setItem","cameraId","speakerId","hasCamera","hasMicrophone","getMicrophoneList","values","filter","deviceInfo","kind","deviceId","getCameraList","getSpeakerList","canSelectSpeaker","HTMLMediaElement","prototype","updateDeviceList","removedDevices","addedDevices","shouldSkipDeviceChangedEvent","every","label","forEach","index","findIndex","dev","groupId","splice","push","added","removed","browserDeviceList","device","isDeviceInBlackList","deviceBlackList","result","item","toLowerCase","deviceKind","i","removeDevicesByDefaultGroup","resultDeviceList","getRemovedUsedDevices","currentDevices","Lib","Event","Messenger","v2"],"sources":["hardware.bundle.js"],"mappings":"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","ignoreList":[]}