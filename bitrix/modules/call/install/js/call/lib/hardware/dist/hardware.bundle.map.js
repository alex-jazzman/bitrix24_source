{"version":3,"file":"hardware.bundle.map.js","names":["this","BX","Call","exports","main_core_events","im_v2_lib_desktopApi","lsKey","defaultMicrophone","defaultCamera","defaultSpeaker","Events","initialized","deviceChanged","HardwareManager","EventEmitter","constructor","super","setEventNamespace","_currentDeviceList","updating","init","Promise","resolve","initPromise","_checkPermissions","reject","enumerateDevices","then","deviceList","console","warn","filterDeviceList","navigator","mediaDevices","addEventListener","debounce","onNavigatorDeviceChanged","bind","emit","catch","e","cameraPermission","permissions","query","name","microphonePermission","onchange","status","getCurrentDeviceList","getUserMedia","constraints","error","Error","code","stream","err","devices","cameraList","_getDeviceMap","microphoneList","audioOutputList","microphoneId","localStorage","getItem","Object","keys","length","includes","getDefaultDeviceIdByGroupId","getDeviceGroupIdByDeviceId","setItem","cameraId","speakerId","hasCamera","hasMicrophone","getMicrophoneList","values","filter","deviceInfo","kind","deviceId","getCameraList","getSpeakerList","canSelectSpeaker","HTMLMediaElement","prototype","updateDeviceList","removedDevices","addedDevices","shouldSkipDeviceChangedEvent","every","label","forEach","index","findIndex","dev","groupId","splice","push","added","removed","browserDeviceList","device","isDeviceInBlackList","deviceBlackList","result","item","toLowerCase","deviceKind","i","removeDevicesByDefaultGroup","resultDeviceList","getRemovedUsedDevices","currentDevices","Lib","Event","Messenger","v2"],"sources":["hardware.bundle.js"],"mappings":"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","ignoreList":[]}