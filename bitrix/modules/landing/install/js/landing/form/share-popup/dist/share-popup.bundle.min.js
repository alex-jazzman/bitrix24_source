this.BX=this.BX||{};this.BX.Landing=this.BX.Landing||{};(function(e,i,s,t,o,n,a,r,l,c){"use strict";const _="crm_webform";var d=babelHelpers.classPrivateFieldLooseKey("cache");var L=babelHelpers.classPrivateFieldLooseKey("getFeaturesPopup");var p=babelHelpers.classPrivateFieldLooseKey("showPhoneVerifySlider");class g extends s.EventEmitter{constructor(e={}){super();Object.defineProperty(this,p,{value:E});Object.defineProperty(this,L,{value:N});Object.defineProperty(this,d,{writable:true,value:new i.Cache.MemoryCache});this.setEventNamespace("BX.Landing.Form.SharePopup");this.subscribeFromOptions(e.events);this.setOptions(e)}setOptions(e){babelHelpers.classPrivateFieldLooseBase(this,d)[d].set("options",{...e})}getOptions(){return babelHelpers.classPrivateFieldLooseBase(this,d)[d].get("options",{})}show(){babelHelpers.classPrivateFieldLooseBase(this,L)[L]().show()}hide(){babelHelpers.classPrivateFieldLooseBase(this,L)[L]().hide()}}function N(){return babelHelpers.classPrivateFieldLooseBase(this,d)[d].remember("featuresPopup",(()=>new t.FeaturesPopup({bindElement:this.getOptions().bindElement,items:[{id:"share",title:o.Loc.getMessage("LANDING_FORM_SHARE__SHARE_TITLE"),theme:t.FeaturesPopup.Themes.Highlight,icon:{className:"landing-form-features-share-icon"},link:{label:o.Loc.getMessage("LANDING_FORM_SHARE__SHARE_LINK_LABEL"),onClick:()=>{if(!i.Type.isNil(BX.Helper)){BX.Helper.show("redirect=detail&code=13003062")}}},actionButton:{label:o.Loc.getMessage("LANDING_FORM_SHARE__SHARE_ACTION_LABEL"),onClick:()=>{const e=n.PageObject.getEditorWindow();const{formEditorData:s}=e.BX.Landing.Env.getInstance().getOptions();if(i.Type.isPlainObject(s)&&i.Type.isPlainObject(s.formOptions)){var t;if((t=this.getOptions())!=null&&t.phoneVerified){r.Embed.openSlider(s.formOptions.id)}else{babelHelpers.classPrivateFieldLooseBase(this,p)[p](s.formOptions.id).then((e=>{if(e){r.Embed.openSlider(s.formOptions.id)}}))}}}}},{id:"communication",title:o.Loc.getMessage("LANDING_FORM_SHARE__COMMUNICATION_TITLE"),icon:{className:"landing-form-features-communication-icon"},link:{label:o.Loc.getMessage("LANDING_FORM_SHARE__COMMUNICATION_LINK_LABEL"),onClick:()=>{if(!i.Type.isNil(BX.Helper)){BX.Helper.show("redirect=detail&code=6986667")}}},actionButton:{label:o.Loc.getMessage("LANDING_FORM_SHARE__COMMUNICATION_ACTION_LABEL"),onClick:()=>{const{landingParams:e}=n.PageObject.getRootWindow();if(!i.Type.isNil(e)&&i.Type.isStringFilled(e.PAGE_URL_LANDING_SETTINGS)){const s=i.Reflection.getClass("BX.SidePanel");if(!i.Type.isNil(s)){s.Instance.open(`${e["PAGE_URL_LANDING_SETTINGS"]}#b24widget`)}}}}},[{id:"help",title:o.Loc.getMessage("LANDING_FORM_SHARE__HELP_TITLE_MSGVER_1"),icon:{className:"landing-form-features-help-icon"},link:{label:o.Loc.getMessage("LANDING_FORM_SHARE__HELP_LINK_LABEL_MSGVER_1"),onClick:()=>{}},onClick:()=>{BX.UI.Feedback.Form.open({id:"form-editor-feedback-form",portalUri:this.getOptions().portalUri,forms:this.getOptions().forms,presets:{source:"landing"}})}},{id:"settings",icon:{className:"landing-form-features-settings-icon"},onClick:()=>{const{landingParams:e}=n.PageObject.getRootWindow();if(!i.Type.isNil(e)&&i.Type.isStringFilled(e.PAGE_URL_LANDING_SETTINGS)){const s=i.Reflection.getClass("BX.SidePanel");if(!i.Type.isNil(s)){s.Instance.open(e["PAGE_URL_LANDING_SETTINGS"])}}}}]]})))}function E(e){if(typeof c.PhoneVerify!=="undefined"){return c.PhoneVerify.getInstance().setEntityType(_).setEntityId(e).startVerify({sliderTitle:o.Loc.getMessage("LANDING_FORM_PHONE_VERIFY_CUSTOM_SLIDER_TITLE"),title:o.Loc.getMessage("LANDING_FORM_PHONE_VERIFY_CUSTOM_TITLE"),description:o.Loc.getMessage("LANDING_FORM_PHONE_VERIFY_CUSTOM_DESCRIPTION")})}return Promise.resolve(true)}e.SharePopup=g})(this.BX.Landing.Form=this.BX.Landing.Form||{},BX,BX.Event,BX.Landing,BX.Landing,BX.Landing,BX.Landing,BX.Crm.Form,BX.UI.Feedback,BX.Bitrix24);
//# sourceMappingURL=share-popup.bundle.map.js