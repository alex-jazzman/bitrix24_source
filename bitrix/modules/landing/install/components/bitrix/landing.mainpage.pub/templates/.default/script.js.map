{"version":3,"file":"script.js","sources":["src/js/landing.pub.disk.file.js","src/js/landing.pub.analytics.js","src/js/landing.pub.pseudolinks.js","src/js/landing.pub.processing.js"],"sourcesContent":["\n\nexport class DiskFile\n{\n\t/**\n\t * Constructor.\n\t */\n\tconstructor()\n\t{\n\t\tdocument.addEventListener('click', this.onClick.bind(this));\n\t}\n\n\t/**\n\t * Click callback.\n\t *\n\t * @return {void}\n\t */\n\tonClick(event)\n\t{\n\t\tlet target = event.target;\n\t\tlet href = target.getAttribute('href') || (target.getAttribute('data-pseudo-url') && JSON.parse(target.getAttribute('data-pseudo-url')).href);\n\t\tif (!href)\n\t\t{\n\t\t\tconst parentNode = target.parentNode;\n\t\t\tif (parentNode.nodeName === 'A')\n\t\t\t{\n\t\t\t\thref = parentNode.getAttribute('href');\n\t\t\t\ttarget = parentNode;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst grandParentNode = parentNode.parentNode;\n\t\t\t\tif (grandParentNode.nodeName === 'A')\n\t\t\t\t{\n\t\t\t\t\thref = grandParentNode.getAttribute('href');\n\t\t\t\t\ttarget = grandParentNode;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (target.getAttribute('data-viewer-type')) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (href && href.indexOf('/bitrix/services/main/ajax.php?action=landing.api.diskFile.download') === 0)\n\t\t{\n\t\t\tBX.ajax.get(href.replace('landing.api.diskFile.download', 'landing.api.diskFile.view'), function(data)\n\t\t\t{\n\t\t\t\tif (typeof data === 'string')\n\t\t\t\t{\n\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t}\n\n\t\t\t\tif (!data.data)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tObject.keys(data.data).map(key => {\n\t\t\t\t\ttarget.setAttribute(key, data.data[key]);\n\t\t\t\t});\n\n\t\t\t\ttarget.click();\n\t\t\t});\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\treturn false;\n\t\t}\n\t}\n}","import { Event } from 'main.core';\nimport { Metrika } from 'landing.metrika';\n\nexport class Analytics\n{\n\t/**\n\t * Constructor.\n\t */\n\tconstructor(options)\n\t{\n\t\tthis.isPublished = options.isPublished;\n\t\tthis.templateCode = options.templateCode;\n\t\tthis.metrika = new Metrika(true);\n\t\tthis.initEventListeners();\n\t}\n\n\tinitEventListeners(): void\n\t{\n\t\tconst blocks = [...document.getElementsByClassName('block-wrapper')];\n\t\tblocks.forEach((block) => {\n\t\t\tEvent.bind(block, 'click', this.onClick.bind(this));\n\t\t});\n\t}\n\n\t/**\n\t * Click callback.\n\t *\n\t * @param {MouseEvent} event\n\t * @return {void}\n\t */\n\tonClick(event: MouseEvent)\n\t{\n\t\tconst target = event.target;\n\n\t\tif (!this.isClickableElement(target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst analyticsData = this.getAnalyticsData(event);\n\t\tthis.metrika.sendData(analyticsData);\n\t}\n\n\tisClickableElement(element: HTMLElement): boolean\n\t{\n\t\tconst tag = element.tagName.toLowerCase();\n\n\t\treturn (\n\t\t\ttag === 'a'\n\t\t\t|| tag === 'button'\n\t\t\t|| element.hasAttribute('data-pseudo-url')\n\t\t\t|| (element.parentElement && element.parentElement.tagName.toLowerCase() === 'a')\n\t\t\t|| (element.firstElementChild && element.firstElementChild.tagName.toLowerCase() === 'a')\n\t\t);\n\t}\n\n\tgetTrackingParameter(target: HTMLElement): string\n\t{\n\t\tconst href = this.extractHrefFromPseudoUrl(target) || this.extractHrefFromElement(target);\n\n\t\tif (!href)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tconst sliderMatch = href.match(/BX\\.Helper\\.show\\([\"'].*?code=(\\d+)[\"']\\)/);\n\t\tif (sliderMatch)\n\t\t{\n\t\t\treturn ['slider', sliderMatch[1]];\n\t\t}\n\n\t\tif (href.startsWith('/') || href.includes(window.location.origin))\n\t\t{\n\t\t\treturn ['b24url', href];\n\t\t}\n\n\t\treturn ['otherurl', href];\n\t}\n\n\textractHrefFromPseudoUrl(target: HTMLElement): string | null\n\t{\n\t\tif (!target.hasAttribute('data-pseudo-url'))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst raw = target.getAttribute('data-pseudo-url');\n\t\tif (!raw)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\tconst data = JSON.parse(raw.replaceAll('&quot;', '\"'));\n\t\t\tif (data && data.href && data.enabled)\n\t\t\t{\n\t\t\t\tif (!/^\\/|^https?:\\/\\/|^#/.test(data.href))\n\t\t\t\t{\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\n\t\t\t\treturn data.href;\n\t\t\t}\n\t\t}\n\t\tcatch\n\t\t{\n\t\t\tconsole.warn('Invalid pseudo-url JSON:', raw);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\textractHrefFromElement(target: HTMLElement): string | null\n\t{\n\t\tconst linkElement = target.closest('a');\n\n\t\treturn linkElement ? linkElement.getAttribute('href') || null : null;\n\t}\n\n\tgetAnalyticsData(event: MouseEvent): Object\n\t{\n\t\tlet code = '';\n\t\tconst blockWrapper = event.currentTarget;\n\t\tblockWrapper.classList.forEach((className) => {\n\t\t\tif (className !== 'block-wrapper')\n\t\t\t{\n\t\t\t\tcode += className;\n\t\t\t}\n\t\t});\n\t\tcode = code.replace('block-', '');\n\t\tcode = code.replaceAll('-', '.');\n\n\t\tconst isTrialButton = event.target.id === 'trialButton';\n\t\tconst eventName = isTrialButton ? 'demo_activated' : 'click_on_button';\n\n\t\treturn {\n\t\t\tcategory: 'vibe',\n\t\t\tevent: eventName,\n\t\t\tc_section: this.isPublished ? 'active_page' : 'preview_page',\n\t\t\tp1: ['templateCode', this.templateCode],\n\t\t\tp2: ['widgetId', code],\n\t\t\tp4: this.getTrackingParameter(event.target),\n\t\t};\n\t}\n}\n","export class Pseudolinks\n{\n\t/**\n\t * Constructor.\n\t */\n\tconstructor()\n\t{\n\t\tconst checkPageLoaded = setInterval(() => {\n\t\t\tif (document.readyState === 'complete')\n\t\t\t{\n\t\t\t\tthis.initPseudoLinks();\n\t\t\t\tclearInterval(checkPageLoaded);\n\t\t\t}\n\t\t}, 500);\n\t}\n\n\t/**\n\t * Click callback.\n\t *\n\t * @return {void}\n\t */\n\tinitPseudoLinks()\n\t{\n\t\tconst pseudoLinks = [].slice.call(document.querySelectorAll('[data-pseudo-url*=\"{\"]'));\n\t\tif (pseudoLinks.length > 0)\n\t\t{\n\t\t\tpseudoLinks.forEach((link) => {\n\t\t\t\tconst linkOptionsJson = link.getAttribute('data-pseudo-url');\n\t\t\t\tconst linkOptions = JSON.parse(linkOptionsJson);\n\t\t\t\tif (\n\t\t\t\t\tlinkOptions.href\n\t\t\t\t\t&& linkOptions.enabled\n\t\t\t\t\t&& linkOptions.href.indexOf('/bitrix/services/main/ajax.php?action=landing.api.diskFile.download') !== 0\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tif (linkOptions.target === '_self' || linkOptions.target === '_blank')\n\t\t\t\t\t{\n\t\t\t\t\t\tlink.addEventListener('click', (event) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tlet url = null;\n\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\turl = new URL(linkOptions.href);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcatch (error)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (url)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst isSameHost = url.hostname === window.location.hostname;\n\t\t\t\t\t\t\t\tconst isIframe = url.searchParams.get('IFRAME') === 'Y';\n\n\t\t\t\t\t\t\t\tif (isSameHost && !isIframe)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tconst isDifferentPath = url.pathname !== window.location.pathname;\n\t\t\t\t\t\t\t\t\tif (isDifferentPath)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tBX.addClass(document.body, 'landing-page-transition');\n\t\t\t\t\t\t\t\t\t\tlinkOptions.href = url.href;\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\tthis.openPseudoLinks(linkOptions, event);\n\t\t\t\t\t\t\t\t\t\t}, 400);\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\tBX.removeClass(document.body, 'landing-page-transition');\n\t\t\t\t\t\t\t\t\t\t}, 3000);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.openPseudoLinks(linkOptions, event);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\topenPseudoLinks(linkOptions, event)\n\t{\n\t\tif (linkOptions.href.indexOf('/bitrix/services/main/ajax.php?action=landing.api.diskFile.download') === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (linkOptions.query)\n\t\t{\n\t\t\tlinkOptions.href += (linkOptions.href.indexOf('?') === -1) ? '?' : '&';\n\t\t\tlinkOptions.href += linkOptions.query;\n\t\t}\n\n\t\tif (this.isValidURL(linkOptions.href))\n\t\t{\n\t\t\ttop.open(linkOptions.href, linkOptions.target);\n\t\t}\n\t}\n\n\tisValidURL(url)\n\t{\n\t\ttry\n\t\t{\n\t\t\tnew URL(url);\n\n\t\t\treturn true;\n\t\t}\n\t\tcatch\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t}\n}\n","import { Lottie } from 'ui.lottie';\nimport blockAnimation from '../../lottie/animation.json';\n\nexport const renderLottieAnimation = (target) => {\n\tif (!target)\n\t{\n\t\tconsole.error('Target container is not specified for Lottie animation.');\n\n\t\treturn;\n\t}\n\n\tconst animation = Lottie.loadAnimation({\n\t\tcontainer: target,\n\t\trenderer: 'svg',\n\t\tloop: false,\n\t\tautoplay: true,\n\t\tanimationData: blockAnimation,\n\t});\n\n\tsetInterval(() => {\n\t\tanimation.stop();\n\t\tanimation.play();\n\t}, 15000);\n};\n"],"names":["DiskFile","document","addEventListener","onClick","bind","event","target","href","getAttribute","JSON","parse","parentNode","nodeName","grandParentNode","indexOf","BX","ajax","get","replace","data","Object","keys","map","key","setAttribute","click","preventDefault","stopPropagation","Analytics","options","isPublished","templateCode","metrika","Metrika","initEventListeners","blocks","getElementsByClassName","forEach","block","Event","isClickableElement","analyticsData","getAnalyticsData","sendData","element","tag","tagName","toLowerCase","hasAttribute","parentElement","firstElementChild","extractHrefFromPseudoUrl","extractHrefFromElement","sliderMatch","match","startsWith","includes","window","location","origin","raw","replaceAll","enabled","test","console","warn","linkElement","closest","code","blockWrapper","currentTarget","classList","className","isTrialButton","id","eventName","category","c_section","p1","p2","p4","getTrackingParameter","Pseudolinks","checkPageLoaded","setInterval","readyState","initPseudoLinks","clearInterval","pseudoLinks","slice","call","querySelectorAll","length","link","linkOptionsJson","linkOptions","url","URL","error","isSameHost","hostname","isIframe","searchParams","isDifferentPath","pathname","addClass","body","setTimeout","openPseudoLinks","removeClass","query","isValidURL","top","open","renderLottieAnimation","animation","Lottie","loadAnimation","container","renderer","loop","autoplay","animationData","blockAnimation","stop","play"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KC5GWkB,qBAAqB,GAAG,SAAxBA,qBAAqB,CAAI5G,MAAM,EAAK;GAChD,IAAI,CAACA,MAAM,EACX;KACC0D,OAAO,CAACkC,KAAK,CAAC,yDAAyD,CAAC;KAExE;;GAGD,IAAMiB,SAAS,GAAGC,gBAAM,CAACC,aAAa,CAAC;KACtCC,SAAS,EAAEhH,MAAM;KACjBiH,QAAQ,EAAE,KAAK;KACfC,IAAI,EAAE,KAAK;KACXC,QAAQ,EAAE,IAAI;KACdC,aAAa,EAAEC;IACf,CAAC;GAEFvC,WAAW,CAAC,YAAM;KACjB+B,SAAS,CAACS,IAAI,EAAE;KAChBT,SAAS,CAACU,IAAI,EAAE;IAChB,EAAE,KAAK,CAAC;CACV,CAAC;;;;;;;;;;;"}