{"version":3,"file":"work-time-button.bundle.js","sources":["../src/work-time-button.js"],"sourcesContent":["import { Tag, Extension, Loc } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { AirButtonStyle, Button, ButtonIcon } from 'ui.buttons';\n\nimport 'timeman';\nimport 'CJSTask';\nimport 'planner';\nimport 'tasks_planner_handler';\nimport 'calendar_planner_handler';\nimport 'ajax';\nimport 'timer';\nimport 'popup';\nimport 'ls';\nimport 'ui.fonts.opensans';\nimport 'ui.layout-form';\nimport 'ui.analytics';\n\nimport './work-time-button.css';\n\ntype Data = {\n\tworkReport: Object,\n\tinfo: Object & {\n\t\tSTATE: string,\n\t\tCAN_OPEN?: string,\n\t\tINFO: Object & {\n\t\t\tDATE_START: number,\n\t\t\tTIME_LEAKS: number,\n\t\t},\n\t},\n\tsiteId: string,\n};\n\nconst State = Object.freeze({\n\tClosed: 'CLOSED',\n\tOpened: 'OPENED',\n\tPaused: 'PAUSED',\n\tExpired: 'EXPIRED',\n});\nconst Action = Object.freeze({\n\tOpen: 'OPEN',\n\tReopen: 'REOPEN',\n});\n\nexport class WorkTimeButton\n{\n\t#data: Data = {};\n\t#timemanWidgetOpener: Button;\n\t#taskStatusStart: Button;\n\t#taskStatusFinish: Button;\n\t#timemanWidgetOpenerNode: HTMLElement;\n\t#taskStatusActionsNode: HTMLElement;\n\t#timemanInstantContainerNode: HTMLElement;\n\t#timerInterval: number;\n\n\tconstructor()\n\t{\n\t\tconst settings = Extension.getSettings('timeman.work-time-button');\n\n\t\tthis.#data.workReport = settings.get('workReport');\n\t\tthis.#data.info = settings.get('info');\n\t\tthis.#data.siteId = settings.get('siteId');\n\n\t\tthis.#timemanWidgetOpener = new Button({\n\t\t\tsize: Button.Size.MEDIUM,\n\t\t\ttext: 'видгет опенер',\n\t\t\ticon: this.#getButtonIcon(),\n\t\t\tuseAirDesign: true,\n\t\t\tstyle: AirButtonStyle.PLAIN,\n\t\t\tnoCaps: true,\n\t\t\twide: true,\n\t\t\tevents: {\n\t\t\t\tclick: this.#handleClickTimemanOpener.bind(this),\n\t\t\t},\n\t\t\tclassName: 'timeman-widget-opener',\n\t\t});\n\t\t// this.#taskStatusStart = new Button({\n\t\t// \tsize: Button.Size.MEDIUM,\n\t\t// \ttext: this.#getButtonText(),\n\t\t// \ticon: this.#getButtonIcon(),\n\t\t// \tuseAirDesign: true,\n\t\t// \tstyle: this.#getButtonStyle(),\n\t\t// \tnoCaps: true,\n\t\t// \twide: true,\n\t\t// \tevents: {\n\t\t// \t\tclick: this.#handleClickTaskStatusAction.bind(this),\n\t\t// \t},\n\t\t// \tclassName: 'timeman-work-time-button',\n\t\t// });\n\t\tthis.#taskStatusStart = new Button({\n\t\t\tsize: Button.Size.MEDIUM,\n\t\t\ttext: Loc.getMessage('TIMEMAN_WORK_TIME_BUTTON_TEXT_START'),\n\t\t\ticon: ButtonIcon.START,\n\t\t\tuseAirDesign: true,\n\t\t\tstyle: AirButtonStyle.FILLED,\n\t\t\tnoCaps: true,\n\t\t\twide: true,\n\t\t\tevents: {\n\t\t\t\tclick: this.#handleClickTaskStatusAction.bind(this),\n\t\t\t},\n\t\t\tclassName: 'task-status-action task-status-action_start',\n\t\t});\n\t\tthis.#taskStatusFinish = new Button({\n\t\t\tsize: Button.Size.MEDIUM,\n\t\t\ttext: Loc.getMessage('TIMEMAN_WORK_TIME_BUTTON_TEXT_EXPIRED'),\n\t\t\ticon: ButtonIcon.ALERT,\n\t\t\tuseAirDesign: true,\n\t\t\tstyle: AirButtonStyle.TINTED_ALERT,\n\t\t\tnoCaps: true,\n\t\t\twide: true,\n\t\t\tevents: {\n\t\t\t\tclick: this.#handleClickTaskStatusAction.bind(this),\n\t\t\t},\n\t\t\tclassName: 'task-status-action task-status-action_finish',\n\t\t});\n\n\t\tthis.#timemanWidgetOpenerNode = this.#timemanWidgetOpener.render();\n\t\t// this.#taskStatusActionsNode = Tag.render`\n\t\t// \t<ul class=\"eksheny\">\n\t\t// \t\t<li v-for=\"taskStatusAction in this.#taskStatusActions\" class=\"ekshen\">\n\t\t// \t\t\t${taskStatusAction.render()}\n\t\t// \t\t</li>\n\t\t// \t</ul>\n\t\t// `;\n\n\n\n\t\tthis.#timemanInstantContainerNode = Tag.render`\n\t\t\t<div class=\"timeman-instant-container\">\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#taskStatusActionsNode = Tag.render`\n\t\t\t<ul class=\"task-status__actions\">\n\t\t\t\t${this.#getTaskStatusActions().map(taskStatusAction => Tag.render`\n\t\t\t\t\t<li class=\"task-status__action\">\n\t\t\t\t\t\t${taskStatusAction.render()}\n\t\t\t\t\t</li>\n\t\t\t\t`)}\n\t\t\t\t${this.#timemanInstantContainerNode}\n\t\t\t</ul>\n\t\t`;\n\n\t\tEventEmitter.subscribe('onTimemanInit', this.#init.bind(this));\n\t\tEventEmitter.subscribe('onTimeManDataRecieved', this.#updateState.bind(this));\n\n\t\twindow.BX.timeman('bx_tm', this.#data.info, this.#data.siteId);\n\t}\n\n\t#getState(): string\n\t{\n\t\treturn this.#data.info.STATE;\n\t}\n\n\t#getAvailableAction(): ?string\n\t{\n\t\treturn this.#data.info?.CAN_OPEN ?? null;\n\t}\n\n\t#getDateStart(): number\n\t{\n\t\treturn this.#data.info.INFO.DATE_START;\n\t}\n\n\t#getTimeLeaks(): number\n\t{\n\t\treturn this.#data.info.INFO.TIME_LEAKS;\n\t}\n\n\t#init(): void\n\t{\n\t\tthis.#initWorkingButtonTimer();\n\n\t\twindow.BXTIMEMAN.initFormWeekly(this.#data.workReport);\n\t}\n\n\t#updateState(baseEvent: BaseEvent): void\n\t{\n\t\tconst [data] = baseEvent.getCompatData();\n\n\t\tthis.#data.info = data;\n\n\t\tthis.#taskStatusStart.setText(this.#getButtonText());\n\t\tthis.#taskStatusStart.setIcon(this.#getButtonIcon());\n\t\tthis.#taskStatusStart.setStyle(this.#getButtonStyle());\n\n\t\tthis.#initWorkingButtonTimer();\n\t}\n\n\t#getTaskStatusActions(): string\n\t{\n\t\tconst taskStatusActions = [];\n\n\t\ttaskStatusActions.push(this.#taskStatusStart);\n\t\ttaskStatusActions.push(this.#taskStatusFinish);\n\n\t\t// if (\n\t\t// \tthis.#getState() === State.Closed\n\t\t// \t&& this.#getAvailableAction() === Action.Open\n\t\t// )\n\t\t// {\n\t\t// \ttaskStatusActions.push(this.#taskStatusStart);\n\t\t// }\n\t\t//\n\t\t// if (this.#getState() === State.Opened)\n\t\t// {\n\t\t// \ttaskStatusActions.push(this.#taskStatusStart);\n\t\t// }\n\t\t//\n\t\t// if (this.#getState() === State.Paused)\n\t\t// {\n\t\t// \ttaskStatusActions.push(this.#taskStatusStart);\n\t\t// }\n\t\t//\n\t\t// if (\n\t\t// \tthis.#getState() === State.Closed\n\t\t// \t&& this.#getAvailableAction() === Action.Reopen\n\t\t// )\n\t\t// {\n\t\t// \ttaskStatusActions.push(this.#taskStatusStart);\n\t\t// \ttaskStatusActions.push(this.#taskStatusFinish);\n\t\t// }\n\t\t//\n\t\t// if (this.#getState() === State.Expired)\n\t\t// {\n\t\t// \ttaskStatusActions.push(this.#taskStatusStart);\n\t\t// \ttaskStatusActions.push(this.#taskStatusFinish);\n\t\t// }\n\n\t\treturn taskStatusActions;\n\t}\n\n\t#getButtonText(): string\n\t{\n\t\tif (\n\t\t\tthis.#getState() === State.Closed\n\t\t\t&& this.#getAvailableAction() === Action.Open\n\t\t)\n\t\t{\n\t\t\treturn Loc.getMessage('TIMEMAN_WORK_TIME_BUTTON_TEXT_START');\n\t\t}\n\n\t\tif (this.#getState() === State.Opened)\n\t\t{\n\t\t\treturn this.#getWorkingButtonText();\n\t\t}\n\n\t\tif (this.#getState() === State.Paused)\n\t\t{\n\t\t\treturn Loc.getMessage('TIMEMAN_WORK_TIME_BUTTON_TEXT_CONTINUE');\n\t\t}\n\n\t\tif (\n\t\t\tthis.#getState() === State.Closed\n\t\t\t&& this.#getAvailableAction() === Action.Reopen\n\t\t)\n\t\t{\n\t\t\treturn Loc.getMessage('TIMEMAN_WORK_TIME_BUTTON_TEXT_CONTINUE');\n\t\t}\n\n\t\tif (this.#getState() === State.Expired)\n\t\t{\n\t\t\treturn Loc.getMessage('TIMEMAN_WORK_TIME_BUTTON_TEXT_EXPIRED');\n\t\t}\n\n\t\treturn '';\n\t}\n\n\t#getButtonIcon(): ?string\n\t{\n\t\tif (\n\t\t\tthis.#getState() === State.Closed\n\t\t\t&& this.#getAvailableAction() === Action.Open\n\t\t)\n\t\t{\n\t\t\treturn ButtonIcon.START;\n\t\t}\n\n\t\tif (this.#getState() === State.Opened)\n\t\t{\n\t\t\treturn ButtonIcon.START;\n\t\t}\n\n\t\tif (this.#getState() === State.Paused)\n\t\t{\n\t\t\treturn ButtonIcon.START;\n\t\t}\n\n\t\tif (\n\t\t\tthis.#getState() === State.Closed\n\t\t\t&& this.#getAvailableAction() === Action.Reopen\n\t\t)\n\t\t{\n\t\t\treturn ButtonIcon.REFRESH;\n\t\t}\n\n\t\tif (this.#getState() === State.Expired)\n\t\t{\n\t\t\treturn ButtonIcon.ALERT;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t#getButtonStyle(): string\n\t{\n\t\tif (this.#getState() === State.Opened)\n\t\t{\n\t\t\treturn AirButtonStyle.TINTED;\n\t\t}\n\n\t\tif (this.#getState() === State.Paused)\n\t\t{\n\t\t\treturn AirButtonStyle.FILLED;\n\t\t}\n\n\t\tif (\n\t\t\tthis.#getState() === State.Closed\n\t\t\t&& this.#getAvailableAction() === Action.Reopen\n\t\t)\n\t\t{\n\t\t\treturn AirButtonStyle.TINTED;\n\t\t}\n\n\t\tif (this.#getState() === State.Expired)\n\t\t{\n\t\t\treturn AirButtonStyle.TINTED_ALERT;\n\t\t}\n\n\t\treturn AirButtonStyle.FILLED;\n\t}\n\n\t#initWorkingButtonTimer(): void\n\t{\n\t\tthis.#stopWorkingButtonTimer();\n\n\t\tif (this.#getState() === State.Opened)\n\t\t{\n\t\t\tthis.#startWorkingButtonTimer();\n\t\t}\n\t}\n\n\t#startWorkingButtonTimer(): void\n\t{\n\t\tthis.#timerInterval = setInterval(() => {\n\t\t\tthis.#taskStatusStart.setText(this.#getWorkingButtonText());\n\t\t}, 1000);\n\t}\n\n\t#stopWorkingButtonTimer(): void\n\t{\n\t\tclearInterval(this.#timerInterval);\n\t}\n\n\t#getWorkingButtonText(): string\n\t{\n\t\tconst nowSeconds = Math.floor(Date.now() / 1000);\n\n\t\tconst workingSeconds = (nowSeconds - this.#getDateStart()) - (this.#getTimeLeaks() || 0);\n\t\tif (workingSeconds < 0)\n\t\t{\n\t\t\treturn this.#formatTime(0, 0, 0);\n\t\t}\n\n\t\tconst hours = Math.floor(workingSeconds / 3600);\n\t\tconst minutes = Math.floor((workingSeconds % 3600) / 60);\n\t\tconst seconds = workingSeconds % 60;\n\n\t\treturn this.#formatTime(hours, minutes, seconds);\n\t}\n\n\t#formatTime(hours, minutes, seconds): string\n\t{\n\t\tconst format = (value) => (value ?? 0).toString().padStart(2, '0');\n\n\t\treturn Loc.getMessage('TIMEMAN_WORK_TIME_BUTTON_TEXT_WORKING')\n\t\t\t.replace('#time#', `${format(hours)}:${format(minutes)}:${format(seconds)}`);\n\t}\n\n\t#handleClickTimemanOpener(button: Button, event: PointerEvent): void\n\t{\n\t\tevent.stopPropagation();\n\n\t\twindow.BXTIMEMAN.setBindOptions({\n\t\t\tnode: this.#timemanWidgetOpenerNode,\n\t\t\tmode: 'popup',\n\t\t\tpopupOptions: {\n\t\t\t\tautoHide: true,\n\t\t\t\tangle: false,\n\t\t\t\toffsetTop: -40,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceBindPosition: true,\n\t\t\t\t\tforceTop: true,\n\t\t\t\t\tforceLeft: false,\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: () => {},\n\t\t\t\t\tonDestroy: () => {},\n\t\t\t\t},\n\t\t\t\tfixed: true,\n\t\t\t},\n\t\t});\n\n\t\twindow.BXTIMEMAN.Open();\n\t}\n\n\t#handleClickTaskStatusAction(button: Button, event: PointerEvent): void\n\t{\n\t\tevent.stopPropagation();\n\n\t\tconsole.log('HOBANA START WORKING');\n\t\tconsole.log('HOBANA START WORKING window.BXTIMEMAN', window.BXTIMEMAN);\n\n\t\t// window.BXTIMEMAN.MainButtonClick(event);\n\n\t\tconst WND = window.BXTIMEMAN.getWnd();\n\n\t\t// WND.MainButtonClick(event);\n\n\n\n\t\t// this.#timemanInstantContainerNode.appendChild(WND.CreateMainRow(DATA));\n\t\tthis.#timemanInstantContainerNode.appendChild(WND.CreateMainRow(window.BXTIMEMAN));\n\t}\n\n\trenderTaskStatusActions(): HTMLElement\n\t{\n\t\treturn this.#taskStatusActionsNode;\n\t}\n\n\trenderTimemanWidgetOpenerNode(): HTMLElement\n\t{\n\t\treturn this.#timemanWidgetOpenerNode;\n\t}\n}\n"],"names":["State","Object","freeze","Closed","Opened","Paused","Expired","Action","Open","Reopen","WorkTimeButton","settings","Extension","getSettings","workReport","get","info","siteId","Button","size","Size","MEDIUM","text","icon","useAirDesign","style","AirButtonStyle","PLAIN","noCaps","wide","events","click","bind","className","Loc","getMessage","ButtonIcon","START","FILLED","ALERT","TINTED_ALERT","render","Tag","map","taskStatusAction","EventEmitter","subscribe","window","BX","timeman","STATE","CAN_OPEN","INFO","DATE_START","TIME_LEAKS","BXTIMEMAN","initFormWeekly","baseEvent","getCompatData","data","setText","setIcon","setStyle","taskStatusActions","push","REFRESH","TINTED","setInterval","clearInterval","nowSeconds","Math","floor","Date","now","workingSeconds","hours","minutes","seconds","format","value","toString","padStart","replace","button","event","stopPropagation","setBindOptions","node","mode","popupOptions","autoHide","angle","offsetTop","closeByEsc","bindOptions","forceBindPosition","forceTop","forceLeft","onClose","onDestroy","fixed","console","log","WND","getWnd","appendChild","CreateMainRow"],"mappings":"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"}