{"version":3,"file":"crm-form-service.bundle.js","sources":["../src/crm-form-service.js","../src/mapper.js"],"sourcesContent":["import { ajax } from 'main.core';\n\nimport { ApiClient } from 'booking.lib.api-client';\nimport type { CrmFormResourceModel } from 'booking.model.crm-form';\n\nimport { mapDtoToModel } from './mapper';\nimport { ResourceDto } from './types';\n\nclass CrmFormService\n{\n\t#getResourcesRequest: ?Promise<ResourceDto[]>;\n\n\tasync getResources(ids: number[]): Promise<CrmFormResourceModel[]>\n\t{\n\t\ttry\n\t\t{\n\t\t\tthis.#getResourcesRequest ??= this.#fetchGetResources;\n\t\t\tconst { data } = await this.#getResourcesRequest(ids);\n\n\t\t\treturn data.map((resourceDto) => mapDtoToModel(resourceDto));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error('CrmFormService: get resources error', error);\n\n\t\t\treturn [];\n\t\t}\n\t}\n\n\t#fetchGetResources(ids: number[]): Promise<ResourceDto[]>\n\t{\n\t\tconst action: string = new ApiClient().buildUrl('CrmForm.getResources');\n\n\t\treturn ajax.runAction(action, {\n\t\t\tdata: {\n\t\t\t\tids,\n\t\t\t},\n\t\t});\n\t}\n}\n\nexport const crmFormService = new CrmFormService();\n","import { CrmFormResourceModel } from 'booking.model.crm-form';\nimport type { ResourceDto } from './types';\n\nexport function mapDtoToModel(resourceDto: ResourceDto): CrmFormResourceModel\n{\n\treturn { ...resourceDto };\n}\n"],"names":["ids","action","ApiClient","buildUrl","ajax","runAction","data","crmFormService","[object Object]","Object","value","writable","this","map","resourceDto","mapDtoToModel","error","console"],"mappings":"+QAuCC,WAVmBA,GAElB,MAAMC,GAAiB,IAAIC,aAAYC,SAAS,wBAEhD,OAAOC,OAAKC,UAAUJ,EAAQ,CAC7BK,KAAM,CACLN,IAAAA,WAMSO,EAAiB,IAjC9B,MACAC,cAAAC,8BAAAC,UAAAD,8BAAAE,YAAAD,eAGCF,mBAAmBR,GAElB,IACA,kHAC+BY,YAC9B,MAAMN,KAAEA,iDAAeM,WAA0BZ,GAEjD,OAAOM,EAAKO,IAAKC,GChBb,SAAuBA,GAE7B,MAAO,IAAKA,GDcuBC,CAAcD,IAEhD,MAAOE,GAIN,OAFAC,QAAQD,MAAM,sCAAuCA,GAE9C"}