{"version":3,"file":"crm-form-service.bundle.js","sources":["../src/crm-form-service.js","../src/mapper.js"],"sourcesContent":["import { Type } from 'main.core';\n\nimport { ApiClient } from 'booking.lib.api-client';\nimport type { CrmFormResourceModel } from 'booking.model.crm-form';\n\nimport { mapDtoToModel } from './mapper';\nimport { ResourceDto } from './types';\n\nclass CrmFormService\n{\n\t#getResourcesRequest: ?Promise<ResourceDto[]>;\n\n\tasync getResources(): Promise<CrmFormResourceModel[]>\n\t{\n\t\ttry\n\t\t{\n\t\t\tthis.#getResourcesRequest ??= this.#fetchGetResources;\n\t\t\tconst data = await this.#getResourcesRequest();\n\n\t\t\treturn data.map((resourceDto) => mapDtoToModel(resourceDto));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error('CrmFormService: get resources error', error);\n\n\t\t\treturn [];\n\t\t}\n\t}\n\n\t#fetchGetResources(): Promise<ResourceDto[]>\n\t{\n\t\treturn new ApiClient().post('CrmForm.getResources');\n\t}\n}\n\nexport const crmFormService = new CrmFormService();\n","import { CrmFormResourceModel } from 'booking.model.crm-form';\nimport type { ResourceDto } from './types';\n\nexport function mapDtoToModel(resourceDto: ResourceDto): CrmFormResourceModel\n{\n\treturn { ...resourceDto };\n}\n"],"names":["ApiClient","post","crmFormService","[object Object]","Object","value","writable","this","map","resourceDto","mapDtoToModel","error","console"],"mappings":"+QAiCC,aAFC,OAAO,IAAIA,aAAYC,KAAK,8BAIjBC,EAAiB,IA3B9B,MACAC,cAAAC,8BAAAC,UAAAD,8BAAAE,YAAAD,eAGCF,qBAEC,IACA,kHAC+BI,YAG9B,qDAFmBA,cAEPC,IAAKC,GChBb,SAAuBA,GAE7B,MAAO,IAAKA,GDcuBC,CAAcD,IAEhD,MAAOE,GAIN,OAFAC,QAAQD,MAAM,sCAAuCA,GAE9C"}