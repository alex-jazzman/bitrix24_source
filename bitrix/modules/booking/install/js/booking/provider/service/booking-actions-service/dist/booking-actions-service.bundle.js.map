{"version":3,"file":"booking-actions-service.bundle.js","sources":["../src/booking-actions-service.js"],"sourcesContent":["import type { Store } from 'ui.vue3.vuex';\n\nimport { Model } from 'booking.const';\nimport { Core } from 'booking.core';\nimport { apiClient } from 'booking.lib.api-client';\nimport type { MessageModel } from 'booking.model.bookings';\n\nclass BookingActionsService\n{\n\tasync getDocData(bookingId: string): Promise<void>\n\t{\n\t\treturn Promise.resolve();\n\t}\n\n\tasync getMessageData(bookingId: number): Promise<void>\n\t{\n\t\tconst status = await apiClient.post('MessageStatus.get', { bookingId });\n\n\t\tawait Promise.all([\n\t\t\tthis.$store.dispatch(`${Model.MessageStatus}/upsert`, { bookingId, status }),\n\t\t]);\n\t}\n\n\tasync sendMessage(bookingId: number, notificationType: string): Promise<void>\n\t{\n\t\tconst message: MessageModel = await apiClient.post('Message.send', { bookingId, notificationType });\n\n\t\tconst booking = this.$store.getters[`${Model.Bookings}/getById`](bookingId);\n\n\t\tvoid this.$store.dispatch(`${Model.Bookings}/update`, {\n\t\t\tid: booking.id,\n\t\t\tbooking: {\n\t\t\t\t...booking,\n\t\t\t\tmessages: [...(booking.messages ?? []), message],\n\t\t\t},\n\t\t});\n\t}\n\n\tget $store(): Store\n\t{\n\t\treturn Core.getStore();\n\t}\n}\n\nexport const bookingActionsService = new BookingActionsService();\n"],"names":["BookingActionsService","getDocData","bookingId","Promise","resolve","getMessageData","status","apiClient","post","all","$store","dispatch","Model","MessageStatus","sendMessage","notificationType","message","booking","getters","Bookings","id","messages","Core","getStore","bookingActionsService"],"mappings":";;;;;;;CAOA,MAAMA,qBAAqB,CAC3B;GACC,MAAMC,UAAU,CAACC,SAAiB,EAClC;KACC,OAAOC,OAAO,CAACC,OAAO,EAAE;;GAGzB,MAAMC,cAAc,CAACH,SAAiB,EACtC;KACC,MAAMI,MAAM,GAAG,MAAMC,+BAAS,CAACC,IAAI,CAAC,mBAAmB,EAAE;OAAEN;MAAW,CAAC;KAEvE,MAAMC,OAAO,CAACM,GAAG,CAAC,CACjB,IAAI,CAACC,MAAM,CAACC,QAAQ,CAAE,GAAEC,mBAAK,CAACC,aAAc,SAAQ,EAAE;OAAEX,SAAS;OAAEI;MAAQ,CAAC,CAC5E,CAAC;;GAGH,MAAMQ,WAAW,CAACZ,SAAiB,EAAEa,gBAAwB,EAC7D;KAAA;KACC,MAAMC,OAAqB,GAAG,MAAMT,+BAAS,CAACC,IAAI,CAAC,cAAc,EAAE;OAAEN,SAAS;OAAEa;MAAkB,CAAC;KAEnG,MAAME,OAAO,GAAG,IAAI,CAACP,MAAM,CAACQ,OAAO,CAAE,GAAEN,mBAAK,CAACO,QAAS,UAAS,CAAC,CAACjB,SAAS,CAAC;KAE3E,KAAK,IAAI,CAACQ,MAAM,CAACC,QAAQ,CAAE,GAAEC,mBAAK,CAACO,QAAS,SAAQ,EAAE;OACrDC,EAAE,EAAEH,OAAO,CAACG,EAAE;OACdH,OAAO,EAAE;SACR,GAAGA,OAAO;SACVI,QAAQ,EAAE,CAAC,yBAAIJ,OAAO,CAACI,QAAQ,gCAAI,EAAE,CAAC,EAAEL,OAAO;;MAEhD,CAAC;;GAGH,IAAIN,MAAM,GACV;KACC,OAAOY,iBAAI,CAACC,QAAQ,EAAE;;CAExB;AAEA,OAAaC,qBAAqB,GAAG,IAAIxB,qBAAqB,EAAE;;;;;;;;"}