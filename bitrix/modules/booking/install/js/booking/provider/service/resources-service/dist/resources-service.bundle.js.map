{"version":3,"file":"resources-service.bundle.js","sources":["../src/mappers.js","../src/resources-service.js","../src/index.js"],"sourcesContent":["import { ResourceEntityType } from 'booking.const';\nimport type { IntegrationCalendarType, ResourceModel } from 'booking.model.resources';\nimport type { ResourceDto } from './types';\n\nexport function mapDtoToModel(resourceDto: ResourceDto): ResourceModel\n{\n\treturn {\n\t\tid: resourceDto.id,\n\t\ttypeId: resourceDto.type.id,\n\t\tname: resourceDto.name,\n\t\tdescription: resourceDto.description,\n\t\tslotRanges: resourceDto.slotRanges.map((slotRange) => ({\n\t\t\t...slotRange,\n\t\t\tweekDays: Object.values(slotRange.weekDays),\n\t\t})),\n\t\tcounter: resourceDto.counter,\n\t\tisMain: resourceDto.isMain,\n\t\tisDeleted: resourceDto.isDeleted,\n\t\tcreatedBy: resourceDto.createdBy,\n\t\tcreatedAt: resourceDto.createdAt,\n\t\tupdatedAt: resourceDto.updatedAt,\n\t\tdeletedAt: resourceDto.deletedAt,\n\n\t\t// info\n\t\tisInfoNotificationOn: resourceDto.isInfoNotificationOn,\n\t\ttemplateTypeInfo: resourceDto.templateTypeInfo,\n\t\tinfoNotificationDelay: resourceDto.infoNotificationDelay,\n\n\t\t// confirmation\n\t\tisConfirmationNotificationOn: resourceDto.isConfirmationNotificationOn,\n\t\ttemplateTypeConfirmation: resourceDto.templateTypeConfirmation,\n\t\tconfirmationNotificationDelay: resourceDto.confirmationNotificationDelay,\n\t\tconfirmationNotificationRepetitions: resourceDto.confirmationNotificationRepetitions,\n\t\tconfirmationNotificationRepetitionsInterval: resourceDto.confirmationNotificationRepetitionsInterval,\n\t\tconfirmationCounterDelay: resourceDto.confirmationCounterDelay,\n\n\t\t// reminder\n\t\tisReminderNotificationOn: resourceDto.isReminderNotificationOn,\n\t\ttemplateTypeReminder: resourceDto.templateTypeReminder,\n\t\treminderNotificationDelay: resourceDto.reminderNotificationDelay,\n\n\t\t// delayed\n\t\tisDelayedNotificationOn: resourceDto.isDelayedNotificationOn,\n\t\ttemplateTypeDelayed: resourceDto.templateTypeDelayed,\n\t\tdelayedNotificationDelay: resourceDto.delayedNotificationDelay,\n\t\tdelayedCounterDelay: resourceDto.delayedCounterDelay,\n\n\t\t// feedback\n\t\tisFeedbackNotificationOn: resourceDto.isFeedbackNotificationOn,\n\t\ttemplateTypeFeedback: resourceDto.templateTypeFeedback,\n\n\t\t// integrationCalendar\n\t\tentities: resourceDto.entities || [],\n\t};\n}\n\nexport function mapModelToDto(resource: ResourceModel): ResourceDto\n{\n\treturn {\n\t\tid: resource.id,\n\t\ttype: {\n\t\t\tid: resource.typeId,\n\t\t},\n\t\tname: resource.name,\n\t\tdescription: resource.description,\n\t\tslotRanges: resource.slotRanges,\n\t\tcounter: null,\n\t\tisMain: resource.isMain,\n\t\tisDeleted: resource.isDeleted,\n\t\tcreatedBy: null,\n\t\tcreatedAt: null,\n\t\tupdatedAt: null,\n\n\t\t// info\n\t\tisInfoNotificationOn: resource.isInfoNotificationOn,\n\t\ttemplateTypeInfo: resource.templateTypeInfo,\n\t\tinfoNotificationDelay: resource.infoNotificationDelay,\n\n\t\t// confirmation\n\t\tisConfirmationNotificationOn: resource.isConfirmationNotificationOn,\n\t\ttemplateTypeConfirmation: resource.templateTypeConfirmation,\n\t\tconfirmationNotificationDelay: resource.confirmationNotificationDelay,\n\t\tconfirmationNotificationRepetitions: resource.confirmationNotificationRepetitions,\n\t\tconfirmationNotificationRepetitionsInterval: resource.confirmationNotificationRepetitionsInterval,\n\t\tconfirmationCounterDelay: resource.confirmationCounterDelay,\n\n\t\t// reminder\n\t\tisReminderNotificationOn: resource.isReminderNotificationOn,\n\t\ttemplateTypeReminder: resource.templateTypeReminder,\n\t\treminderNotificationDelay: resource.reminderNotificationDelay,\n\n\t\t// delayed\n\t\tisDelayedNotificationOn: resource.isDelayedNotificationOn,\n\t\ttemplateTypeDelayed: resource.templateTypeDelayed,\n\t\tdelayedNotificationDelay: resource.delayedNotificationDelay,\n\t\tdelayedCounterDelay: resource.delayedCounterDelay,\n\n\t\t// feedback\n\t\tisFeedbackNotificationOn: resource.isFeedbackNotificationOn,\n\t\ttemplateTypeFeedback: resource.templateTypeFeedback,\n\n\t\t// integrationCalendar\n\t\tentities: entitiesToDto(resource.entities),\n\t};\n}\n\nfunction entitiesToDto(entities: IntegrationCalendarType): Array\n{\n\treturn checkEntityCalendar(entities);\n}\n\nfunction checkEntityCalendar(entities: IntegrationCalendarType): Array\n{\n\t// eslint-disable-next-line max-len\n\treturn entities.filter((entity) => !(entity.entityType === ResourceEntityType.Calendar && entity.data?.userIds.length === 0));\n}\n","import type { AjaxResponse } from 'main.core';\n\nimport { Core } from 'booking.core';\nimport { Model } from 'booking.const';\nimport { ApiClient } from 'booking.lib.api-client';\nimport type { ResourceModel } from 'booking.model.resources';\n\nimport { mapModelToDto, mapDtoToModel } from './mappers';\n\nclass ResourceService\n{\n\tasync add(resource: ResourceModel): Promise<AjaxResponse>\n\t{\n\t\ttry\n\t\t{\n\t\t\tconst resourceDto = mapModelToDto(resource);\n\t\t\tconst data = await (new ApiClient()).post('Resource.add', { resource: resourceDto });\n\t\t\tconst createdResource = mapDtoToModel(data);\n\n\t\t\tCore.getStore().commit('resources/upsert', createdResource);\n\n\t\t\tif (createdResource.isMain)\n\t\t\t{\n\t\t\t\tawait Core.getStore().dispatch(`${Model.Favorites}/add`, createdResource.id);\n\t\t\t}\n\n\t\t\tif (Core.getStore().getters[`${Model.Interface}/canTurnOnTrial`])\n\t\t\t{\n\t\t\t\tvoid this.#turnOnTrial();\n\t\t\t}\n\n\t\t\tthis.#updateResourcesFromFavorites();\n\n\t\t\treturn data;\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error('ResourceService: add error', error);\n\n\t\t\treturn error;\n\t\t}\n\t}\n\n\tasync update(resource: ResourceModel): Promise<AjaxResponse>\n\t{\n\t\tconst id = resource.id;\n\t\tconst resourceBeforeUpdate = { ...Core.getStore().getters['resources/getById'](id) };\n\n\t\ttry\n\t\t{\n\t\t\tconst resourceDto = mapModelToDto(resource);\n\t\t\tconst data = await (new ApiClient()).post('Resource.update', { resource: resourceDto });\n\t\t\tconst updatedResource = mapDtoToModel(data);\n\n\t\t\tCore.getStore().commit('resources/upsert', updatedResource);\n\n\t\t\tif (resourceBeforeUpdate.isMain && !updatedResource.isMain)\n\t\t\t{\n\t\t\t\tawait Core.getStore().dispatch(`${Model.Favorites}/delete`, id);\n\t\t\t}\n\n\t\t\tthis.#updateResourcesFromFavorites();\n\n\t\t\treturn data;\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error('ResourceService: update error', error);\n\n\t\t\treturn error;\n\t\t}\n\t}\n\n\t#updateResourcesFromFavorites(): void\n\t{\n\t\tconst isFilterMode = Core.getStore().getters[`${Model.Filter}/isFilterMode`];\n\t\tif (isFilterMode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst favorites = Core.getStore().getters[`${Model.Favorites}/get`];\n\n\t\tvoid Core.getStore().dispatch(`${Model.Interface}/setResourcesIds`, favorites);\n\t}\n\n\tasync delete(resourceId: number, withFutureBookings: boolean = false): Promise<void>\n\t{\n\t\ttry\n\t\t{\n\t\t\tconst action = withFutureBookings ? 'Resource.forceDelete' : 'Resource.delete';\n\t\t\tconst { removedBookingIds } = await (new ApiClient()).post(action, { id: resourceId });\n\n\t\t\tconst $store = Core.getStore();\n\t\t\tconst updateStoreActions = [\n\t\t\t\t$store.dispatch(`${Model.Resources}/delete`, resourceId),\n\t\t\t\t$store.dispatch(`${Model.Favorites}/delete`, resourceId),\n\t\t\t\t$store.dispatch(`${Model.Interface}/deleteResourceId`, resourceId),\n\t\t\t\t$store.dispatch(`${Model.Interface}/removeDeletingResource`, resourceId),\n\t\t\t];\n\n\t\t\tif (removedBookingIds)\n\t\t\t{\n\t\t\t\tupdateStoreActions.push(\n\t\t\t\t\t$store.dispatch(`${Model.Bookings}/deleteMany`, removedBookingIds),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tawait Promise.all(updateStoreActions);\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error('ResourceService: delete error', error);\n\t\t}\n\t}\n\n\tasync hasFutureBookings(resourceId: number): Promise<?boolean>\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn (new ApiClient()).post('Resource.hasFutureBookings', { resourceId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error('ResourceService: hasFutureBookings error', error);\n\t\t}\n\n\t\treturn Promise.resolve();\n\t}\n\n\tasync #turnOnTrial(): Promise<void>\n\t{\n\t\tawait Promise.all([\n\t\t\tCore.getStore().dispatch(`${Model.Interface}/setCanTurnOnTrial`, false),\n\t\t\tCore.getStore().dispatch(`${Model.Interface}/setIsFeatureEnabled`, true),\n\t\t]);\n\n\t\tawait new Promise((resolve) => setTimeout(resolve, 2000));\n\n\t\tawait Core.getStore().dispatch(`${Model.Interface}/setIsShownTrialPopup`, true);\n\t}\n}\n\nexport const resourceService = new ResourceService();\n","import { mapModelToDto, mapDtoToModel } from './mappers';\n\nexport { resourceService } from './resources-service';\nexport const ResourceMappers = { mapModelToDto, mapDtoToModel };\nexport type { ResourceDto } from './types';\n"],"names":["mapDtoToModel","resourceDto","id","typeId","type","name","description","slotRanges","map","slotRange","weekDays","Object","values","counter","isMain","isDeleted","createdBy","createdAt","updatedAt","deletedAt","isInfoNotificationOn","templateTypeInfo","infoNotificationDelay","isConfirmationNotificationOn","templateTypeConfirmation","confirmationNotificationDelay","confirmationNotificationRepetitions","confirmationNotificationRepetitionsInterval","confirmationCounterDelay","isReminderNotificationOn","templateTypeReminder","reminderNotificationDelay","isDelayedNotificationOn","templateTypeDelayed","delayedNotificationDelay","delayedCounterDelay","isFeedbackNotificationOn","templateTypeFeedback","entities","mapModelToDto","resource","entitiesToDto","checkEntityCalendar","filter","entity","entityType","ResourceEntityType","Calendar","data","userIds","length","ResourceService","add","ApiClient","post","createdResource","Core","getStore","commit","dispatch","Model","Favorites","getters","Interface","error","console","update","resourceBeforeUpdate","updatedResource","delete","resourceId","withFutureBookings","action","removedBookingIds","$store","updateStoreActions","Resources","push","Bookings","Promise","all","hasFutureBookings","resolve","isFilterMode","Filter","favorites","setTimeout","resourceService","ResourceMappers"],"mappings":"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"}