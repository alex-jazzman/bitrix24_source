{"version":3,"file":"booking-event-popup.bundle.js","sources":["../src/components/client/client.js","../src/components/note/note.js","../src/components/entities-list/entities-list.js","../src/components/app.js","../src/components/entities-list/resource-entities-list.js","../src/components/entities-list/services-entities-list.js","../src/booking-event-popup.js"],"sourcesContent":["import { mapGetters } from 'ui.vue3.vuex';\nimport { hint } from 'ui.vue3.directives.hint';\nimport { BIcon as UiIcon, Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { Model } from 'booking.const';\nimport { Avatar as UiAvatar } from 'booking.component.avatar';\nimport { Button as UiButton, AirButtonStyle, ButtonSize, ButtonStyle } from 'booking.component.button';\nimport { SidePanelInstance } from 'booking.lib.side-panel-instance';\n\nimport './client.css';\n\n// @vue/component\nexport const BookingEventPopupClient = {\n\tname: 'BookingEventPopupClient',\n\tdirectives: {\n\t\thint,\n\t},\n\tcomponents: {\n\t\tUiAvatar,\n\t\tUiButton,\n\t\tUiIcon,\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tAirButtonStyle,\n\t\t\tButtonSize,\n\t\t\tButtonStyle,\n\t\t\tOutline,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tclient: `${Model.BookingInfo}/client`,\n\t\t}),\n\t\tisPermitted(): boolean\n\t\t{\n\t\t\treturn Boolean(this.client?.permissions?.read);\n\t\t},\n\t\tclientName(): string\n\t\t{\n\t\t\tif (!this.client)\n\t\t\t{\n\t\t\t\treturn this.loc('BOOKING_EVENT_POPUP_CLIENT_IS_UNAVAILABLE');\n\t\t\t}\n\n\t\t\tif (!this.isPermitted)\n\t\t\t{\n\t\t\t\treturn this.loc('BOOKING_EVENT_POPUP_NO_ACCESS');\n\t\t\t}\n\n\t\t\treturn this.client.name;\n\t\t},\n\t\tclientImageLink(): string\n\t\t{\n\t\t\treturn this.isPermitted ? this.client.image : '';\n\t\t},\n\t},\n\tmethods: {\n\t\tsoonHint(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('BOOKING_EVENT_POPUP_SOON_HINT'),\n\t\t\t\tpopupOptions: {},\n\t\t\t};\n\t\t},\n\t\topenClient(): void\n\t\t{\n\t\t\tif (!this.isPermitted || !this.client)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst entity = this.client.type.toLowerCase();\n\n\t\t\tSidePanelInstance.open(`/crm/${entity}/details/${this.client.id}/`);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"booking-event-popup__person-block\">\n\t\t\t<div class=\"booking-event-popup__person\">\n\t\t\t\t<div class=\"booking-event-popup__person_avatar\">\n\t\t\t\t\t<UiAvatar\n\t\t\t\t\t\t:userName=\"isPermitted ? clientName : null\"\n\t\t\t\t\t\t:userpicPath=\"clientImageLink\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-event-popup__person_data\">\n\t\t\t\t\t<div v-if=\"client !== null\" class=\"booking-event-popup__person_status\">\n\t\t\t\t\t\t{{ loc('BOOKING_EVENT_POPUP_CLIENT') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t\t'booking-event-popup__person_name',\n\t\t\t\t\t\t\t{ '--no-access': !isPermitted }\n\t\t\t\t\t\t]\"\n\t\t\t\t\t\t@click=\"openClient\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ clientName }}\n\t\t\t\t\t\t<template v-if=\"client && !isPermitted\">\n\t\t\t\t\t\t\t<UiIcon :name=\"Outline.LOCK_S\" :size=\"20\" color=\"rgb(var(--ui-color-palette-gray-50-rgb))\"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<UiButton\n\t\t\t\tv-hint=\"soonHint\"\n\t\t\t\t:buttonClass=\"['--air', ButtonStyle.NO_CAPS, AirButtonStyle.OUTLINE_NO_ACCENT]\"\n\t\t\t\t:text=\"loc('BOOKING_EVENT_POPUP_CALL_LABEL')\"\n\t\t\t\t:icon=\"Outline.PHONE_UP\"\n\t\t\t\ticonPosition=\"right\"\n\t\t\t\t:size=\"ButtonSize.SMALL\"\n\t\t\t\tdisabled\n\t\t\t\tuseAirDesign\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { mapGetters } from 'ui.vue3.vuex';\nimport { BIcon as UiIcon, Outline } from 'ui.icon-set.api.vue';\n\nimport { Model } from 'booking.const';\n\nimport './note.css';\n\n// @vue/component\nexport const BookingEventPopupNote = {\n\tname: 'BookingEventPopupNote',\n\tcomponents: {\n\t\tUiIcon,\n\t},\n\tsetup(): { iconName: string }\n\t{\n\t\tconst iconName = Outline.NOTE;\n\n\t\treturn {\n\t\t\ticonName,\n\t\t};\n\t},\n\tdata(): { showedMore: boolean }\n\t{\n\t\treturn {\n\t\t\tshowedMore: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tnote: `${Model.BookingInfo}/note`,\n\t\t}),\n\t\tmore(): string\n\t\t{\n\t\t\treturn this.loc('BOOKING_EVENT_POPUP_NOTE_MORE');\n\t\t},\n\t\tshortNote(): string\n\t\t{\n\t\t\treturn this.showedMore ? this.note : this.note.slice(0, 100 - this.more.length).trimEnd();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"booking-event-popup__person-info\">\n\t\t\t<div class=\"booking-event-popup__person-info_icon\">\n\t\t\t\t<UiIcon :name=\"iconName\" :size=\"22\" color=\"rgba(250, 167, 44, 1)\"/>\n\t\t\t</div>\n\t\t\t<div class=\"booking-event-popup__person-info_text\">\n\t\t\t\t<text>{{ shortNote }}</text>\n\t\t\t\t<span\n\t\t\t\t\tv-if=\"shortNote.length < note.length\"\n\t\t\t\t\tclass=\"booking-event-popup__person-info_text-more\"\n\t\t\t\t\t@click=\"showedMore = true\"\n\t\t\t\t>\n\t\t\t\t\t{{ more }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { CounterSize, CounterStyle } from 'ui.cnt';\nimport { Counter } from 'ui.vue3.components.counter';\nimport { BIcon as UiIcon, Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport './entity-list.css';\n\n// @vue/component\nexport const EntitiesList = {\n\tname: 'EntitiesList',\n\tcomponents: {\n\t\tUiCounter: Counter,\n\t\tUiIcon,\n\t},\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ticonName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tentities: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\thasNoAccess: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\t// eslint-disable-next-line flowtype/require-return-type\n\tsetup()\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t\tCounterSize,\n\t\t\tCounterStyle,\n\t\t};\n\t},\n\tdata(): { limit: number }\n\t{\n\t\treturn {\n\t\t\tlimit: 90,\n\t\t};\n\t},\n\tcomputed: {\n\t\tentitiesCount(): number\n\t\t{\n\t\t\treturn this.entities.length;\n\t\t},\n\t\thasMore(): boolean\n\t\t{\n\t\t\treturn !this.hasNoAccess && this.entities.length > this.names.length;\n\t\t},\n\t\tmore(): string\n\t\t{\n\t\t\treturn this.loc('BOOKING_EVENT_POPUP_ENTITIES_MORE', {\n\t\t\t\t'#COUNT#': (this.entities.length - this.names.length) || '',\n\t\t\t});\n\t\t},\n\t\tcount(): number\n\t\t{\n\t\t\treturn this.entitiesCount ?? this.entities.length;\n\t\t},\n\t\tnames(): string[]\n\t\t{\n\t\t\tif (this.hasNoAccess)\n\t\t\t{\n\t\t\t\treturn [this.loc('BOOKING_EVENT_POPUP_NO_ACCESS')];\n\t\t\t}\n\n\t\t\tif (this.limit === Infinity)\n\t\t\t{\n\t\t\t\treturn this.entities.map(({ name }) => name);\n\t\t\t}\n\n\t\t\tlet textLength: number = 0;\n\t\t\tconst names: string[] = [];\n\n\t\t\tif (this.entities.length === 1)\n\t\t\t{\n\t\t\t\treturn this.entities.map(({ name }) => name);\n\t\t\t}\n\n\t\t\tfor (const entity of this.entities)\n\t\t\t{\n\t\t\t\tif (textLength + entity.name.length > this.limit)\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\ttextLength += entity.name.length;\n\t\t\t\tnames.push(entity.name);\n\t\t\t}\n\n\t\t\treturn names;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"booking-event-popup__resources-item\">\n\t\t\t<div class=\"booking-event-popup__resources-item_icon\">\n\t\t\t\t<UiIcon :name=\"iconName\" :size=\"20\"/>\n\t\t\t</div>\n\t\t\t<div class=\"booking-event-popup__resources-item_info\">\n\t\t\t\t<div class=\"booking-event-popup__resources-item_title\">\n\t\t\t\t\t{{ title }}\n\t\t\t\t\t<UiCounter\n\t\t\t\t\t\tv-if=\"!hasNoAccess\"\n\t\t\t\t\t\t:value=\"count\"\n\t\t\t\t\t\t:maxValue=\"999\"\n\t\t\t\t\t\t:size=\"CounterSize.SMALL\"\n\t\t\t\t\t\t:style=\"CounterStyle.FILLED\"\n\t\t\t\t\t/>\n\t\t\t\t\t<template v-if=\"hasNoAccess\">\n\t\t\t\t\t\t<UiIcon :name=\"Outline.LOCK_S\" :size=\"20\" color=\"rgb(var(--ui-color-palette-gray-50-rgb))\"/>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t'booking-event-popup__resources-item_text',\n\t\t\t\t\t\t{ '--no-access': hasNoAccess }\n\t\t\t\t\t]\"\n\t\t\t\t>\n\t\t\t\t\t{{ names.join(', ') }}{{ hasMore ? ', ' : '' }}\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-if=\"hasMore\"\n\t\t\t\t\t\tclass=\"booking-event-popup__resources-item_text-more\"\n\t\t\t\t\t\t@click=\"limit = Infinity\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ more }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Loader } from 'main.loader';\nimport { mapGetters } from 'ui.vue3.vuex';\n\nimport { Model } from 'booking.const';\nimport { calendarDataService } from 'booking.provider.service.calendar-data-service';\n\nimport { BookingEventPopupClient } from './client/client';\nimport { BookingEventPopupNote } from './note/note';\nimport { ResourceEntitiesList } from './entities-list/resource-entities-list';\nimport { ServicesEntitiesList } from './entities-list/services-entities-list';\n\n// @vue/component\nexport const App = {\n\tname: 'BookingEventPopupApp',\n\tcomponents: {\n\t\tBookingEventPopupClient,\n\t\tBookingEventPopupNote,\n\t\tResourceEntitiesList,\n\t\tServicesEntitiesList,\n\t},\n\tprops: {\n\t\tbookingId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): { fetching: boolean }\n\t{\n\t\treturn {\n\t\t\tfetching: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tnote: `${Model.BookingInfo}/note`,\n\t\t}),\n\t},\n\twatch: {\n\t\tfetching: {\n\t\t\thandler(fetching): void\n\t\t\t{\n\t\t\t\tif (fetching)\n\t\t\t\t{\n\t\t\t\t\tthis.showLoader();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.hideLoader();\n\t\t\t\t}\n\t\t\t},\n\t\t\timmediate: true,\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tthis.loader = new Loader();\n\t},\n\tmounted()\n\t{\n\t\tvoid this.fetchBookingInfo();\n\t},\n\tmethods: {\n\t\tasync fetchBookingInfo(): Promise<void>\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis.fetching = true;\n\t\t\t\tawait calendarDataService.loadBookingInfo(this.bookingId);\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tconsole.error('BookingEventPopup. Get data error', error);\n\t\t\t}\n\t\t\tfinally\n\t\t\t{\n\t\t\t\tthis.fetching = false;\n\t\t\t}\n\t\t},\n\t\tshowLoader(): void\n\t\t{\n\t\t\tvoid this.loader?.show(this.$refs.app);\n\t\t},\n\t\thideLoader(): void\n\t\t{\n\t\t\tvoid this.loader?.hide(this.$refs.app);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div ref=\"app\" class=\"booking-event-popup__content\">\n\t\t\t<div class=\"booking-event-popup__title\">{{ loc('BOOKING_EVENT_POPUP_TITLE') }}</div>\n\t\t\t<BookingEventPopupClient v-if=\"!fetching\"/>\n\t\t\t<BookingEventPopupNote v-if=\"note\"/>\n\t\t\t<div class=\"booking-event-popup__resources\">\n\t\t\t\t<ResourceEntitiesList/>\n\t\t\t\t<ServicesEntitiesList/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { h } from 'ui.vue3';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { Model } from 'booking.const';\n\nimport { EntitiesList } from './entities-list';\n\n// @vue/component\nexport const ResourceEntitiesList = {\n\tname: 'ResourceEntitiesList',\n\tcomponents: {\n\t\tEntitiesList,\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tresources: `${Model.BookingInfo}/resources`,\n\t\t}),\n\t},\n\trender(): ?Object\n\t{\n\t\tif (this.resources.length === 0)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst hasNoAccess = this.resources.some(({ permissions }) => !permissions.read);\n\n\t\treturn h(EntitiesList, {\n\t\t\ttitle: this.loc('BOOKING_EVENT_POPUP_RESOURCES_TITLE'),\n\t\t\ticonName: Outline.PRODUCT,\n\t\t\tentities: hasNoAccess ? [] : this.resources,\n\t\t\thasNoAccess,\n\t\t});\n\t},\n};\n","import { h } from 'ui.vue3';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { Model } from 'booking.const';\n\nimport { EntitiesList } from './entities-list';\n\n// @vue/component\nexport const ServicesEntitiesList = {\n\tname: 'ServicesEntitiesList',\n\tcomponents: {\n\t\tEntitiesList,\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tservices: `${Model.BookingInfo}/services`,\n\t\t}),\n\t},\n\trender(): ?Object\n\t{\n\t\tif (this.services.length === 0)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst hasNoAccess = this.services.some(({ permissions }) => !permissions.read);\n\n\t\treturn h(EntitiesList, {\n\t\t\ttitle: this.loc('BOOKING_EVENT_POPUP_SERVICES_TITLE'),\n\t\t\ticonName: Outline.THREE_PERSONS,\n\t\t\tentities: hasNoAccess ? [] : this.services,\n\t\t\thasNoAccess,\n\t\t});\n\t},\n};\n","import { Popup } from 'main.popup';\n\nimport { BitrixVue } from 'ui.vue3';\nimport type { VueCreateAppResult } from 'ui.vue3';\n\nimport { Core } from 'booking.core';\nimport { Model } from 'booking.const';\nimport { locMixin } from 'booking.component.mixin.loc-mixin';\nimport { BookingInfo } from 'booking.model.booking-info';\n\nimport { App } from './components/app';\nimport './booking-event-popup.css';\n\nexport type BookingEventPopupParams = {\n\tcontainer: HTMLElement;\n\tbookingId: number;\n};\n\nlet popup: Popup | null = null;\n\nexport class BookingEventPopup\n{\n\t#bookingId: number;\n\t#app: VueCreateAppResult;\n\n\tconstructor(params: BookingEventPopupParams)\n\t{\n\t\tthis.#bookingId = params.bookingId;\n\t}\n\n\tasync show(): void\n\t{\n\t\tif (popup)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!popup)\n\t\t{\n\t\t\tthis.#initPopup();\n\t\t}\n\n\t\tawait Core.init({\n\t\t\tskipBookingCore: true,\n\t\t\tskipPull: true,\n\t\t});\n\t\tawait Core.addDynamicModule(\n\t\t\tBookingInfo\n\t\t\t\t.create()\n\t\t\t\t.setVariables({ bookingId: this.#bookingId }),\n\t\t);\n\n\t\tpopup.show();\n\n\t\tthis.#mountApplication(popup.getContentContainer());\n\t}\n\n\t#initPopup(): void\n\t{\n\t\tif (popup)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tpopup = new Popup({\n\t\t\tid: `calendar-entity-booking-event-popup-${this.#bookingId}`,\n\t\t\tbindElement: null,\n\t\t\tcontent: '',\n\t\t\twidth: 490,\n\t\t\tminHeight: 100,\n\t\t\tmaxHeight: 330,\n\t\t\tcloseByEsc: true,\n\t\t\tcloseIcon: true,\n\t\t\tclassName: 'booking-event-popup',\n\t\t\tautoHide: true,\n\t\t\tevents: {\n\t\t\t\tonPopupAfterClose: async (): Promise<void> => {\n\t\t\t\t\tawait this.#close();\n\t\t\t\t},\n\t\t\t},\n\t\t\tpadding: 13,\n\t\t});\n\t}\n\n\t#mountApplication(container: HTMLElement): void\n\t{\n\t\tconst app = BitrixVue.createApp(App, {\n\t\t\t...Core.getParams(),\n\t\t\tbookingId: this.#bookingId,\n\t\t});\n\t\tapp.mixin(locMixin);\n\t\tapp.use(Core.getStore());\n\t\tapp.mount(container);\n\n\t\tthis.#app = app;\n\t}\n\n\tasync #close(): void\n\t{\n\t\tthis.#app.unmount();\n\t\tthis.#app = null;\n\n\t\tawait Core.removeDynamicModule(Model.BookingInfo);\n\n\t\tpopup?.destroy();\n\t\tpopup = null;\n\t}\n}\n"],"names":["BookingEventPopupClient","name","directives","hint","components","UiAvatar","UiButton","UiIcon","setup","AirButtonStyle","ButtonSize","ButtonStyle","Outline","computed","mapGetters","client","Model","BookingInfo","isPermitted","Boolean","this","_this$client","permissions","_this$client$permissi","read","clientName","loc","clientImageLink","image","methods","soonHint","text","popupOptions","openClient","entity","type","toLowerCase","SidePanelInstance","open","id","template","BookingEventPopupNote","iconName","NOTE","data","showedMore","note","more","shortNote","slice","length","trimEnd","EntitiesList","UiCounter","Counter","props","title","String","required","entities","Array","default","hasNoAccess","CounterSize","CounterStyle","limit","entitiesCount","hasMore","names","#COUNT#","count","Infinity","map","textLength","push","App","ResourceEntitiesList","resources","render","some","h","PRODUCT","ServicesEntitiesList","services","THREE_PERSONS","bookingId","Number","fetching","watch","handler","showLoader","hideLoader","immediate","created","loader","Loader","mounted","fetchBookingInfo","[object Object]","calendarDataService","loadBookingInfo","error","console","_this$loader","show","$refs","app","_this$loader2","hide","popup","Popup","babelHelpers","bindElement","content","width","minHeight","maxHeight","closeByEsc","closeIcon","className","autoHide","events","onPopupAfterClose","async","padding","container","BitrixVue","createApp","Core","getParams","mixin","locMixin","use","getStore","mount","unmount","removeDynamicModule","_popup","destroy","constructor","params","Object","value","writable","init","skipBookingCore","skipPull","addDynamicModule","create","setVariables","getContentContainer"],"mappings":"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"}