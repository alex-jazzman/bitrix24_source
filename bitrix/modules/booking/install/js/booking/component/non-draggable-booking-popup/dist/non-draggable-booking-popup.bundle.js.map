{"version":3,"file":"non-draggable-booking-popup.bundle.js","sources":["../src/non-draggable-booking-popup.js"],"sourcesContent":["import { Event, Loc, Tag } from 'main.core';\nimport { Popup } from 'main.popup';\n\nimport './non-draggable-booking-popup.css';\n\nlet popup = null;\n\nexport class NonDraggableBookingPopup\n{\n\tpopupId: string;\n\t#bindElement: HTMLElement;\n\n\tconstructor(options: NonDraggableBookingPopupOptions)\n\t{\n\t\tthis.popupId = options.id;\n\t\tthis.#bindElement = options.bindElement;\n\t}\n\n\tshow(): void\n\t{\n\t\tif (!popup)\n\t\t{\n\t\t\tthis.#initPopup();\n\t\t}\n\n\t\tpopup.show();\n\n\t\tthis.setBindElement(this.#bindElement);\n\t\tthis.adjustPosition();\n\t\tEvent.bind(document, 'scroll', this.adjustPosition, true);\n\t}\n\n\tdestroy(popupId: ?string): void\n\t{\n\t\tif (popupId && popupId !== popup?.getId())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tpopup?.destroy();\n\t\tpopup = null;\n\n\t\tEvent.unbind(document, 'scroll', this.adjustPosition, true);\n\t}\n\n\thasPopup(): boolean\n\t{\n\t\treturn popup !== null;\n\t}\n\n\tsetBindElement(bindElement): void\n\t{\n\t\tpopup?.setBindElement(bindElement);\n\t}\n\n\tadjustPosition(): void\n\t{\n\t\tpopup?.adjustPosition();\n\t}\n\n\t#initPopup(): void\n\t{\n\t\tif (popup)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tpopup = new Popup({\n\t\t\tid: this.popupId,\n\t\t\tbindElement: this.#bindElement,\n\t\t\tcontent: this.#getPopupContent(),\n\t\t\toffsetLeft: this.#bindElement.offsetWidth / 2,\n\t\t\tmaxWidth: 250,\n\t\t\tminWidth: 200,\n\t\t\tminHeight: 42,\n\t\t\tbackground: '#2878ca',\n\t\t\tangle: {\n\t\t\t\toffset: 20,\n\t\t\t\tposition: 'top',\n\t\t\t},\n\t\t\tangleBorderRadius: '4px 0',\n\t\t\tonPopupClose: () => {\n\t\t\t\tpopup?.destroy();\n\t\t\t},\n\t\t});\n\t}\n\n\t#getPopupContent(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"booking--booking--non-draggable-booking-popup-content\">\n\t\t\t\t<div class=\"booking--booking--non-draggable-booking-popup-content__text\">\n\t\t\t\t\t${this.message}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tget message(): string\n\t{\n\t\treturn Loc.getMessage('BOOKING_NON_DRAGGING_BOOKING_FROM_DELETED_RESOURCE');\n\t}\n}\n\ntype NonDraggableBookingPopupOptions = {\n\tid: string,\n\tbindElement: HTMLElement,\n}\n"],"names":["popup","NonDraggableBookingPopup","constructor","options","popupId","id","bindElement","show","setBindElement","adjustPosition","Event","bind","document","destroy","getId","unbind","hasPopup","message","Loc","getMessage","Popup","content","offsetLeft","offsetWidth","maxWidth","minWidth","minHeight","background","angle","offset","position","angleBorderRadius","onPopupClose","Tag","render"],"mappings":";;;;;;;;AAAA,CAKA,IAAIA,KAAK,GAAG,IAAI;CAAC;CAAA;CAAA;AAEjB,CAAO,MAAMC,wBAAwB,CACrC;GAICC,WAAW,CAACC,OAAwC,EACpD;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA;;KACC,IAAI,CAACC,OAAO,GAAGD,OAAO,CAACE,EAAE;KACzB,4CAAI,gCAAgBF,OAAO,CAACG,WAAW;;GAGxCC,IAAI,GACJ;KACC,IAAI,CAACP,KAAK,EACV;OACC,4CAAI;;KAGLA,KAAK,CAACO,IAAI,EAAE;KAEZ,IAAI,CAACC,cAAc,yCAAC,IAAI,8BAAc;KACtC,IAAI,CAACC,cAAc,EAAE;KACrBC,eAAK,CAACC,IAAI,CAACC,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAACH,cAAc,EAAE,IAAI,CAAC;;GAG1DI,OAAO,CAACT,OAAgB,EACxB;KAAA;KACC,IAAIA,OAAO,IAAIA,OAAO,gBAAKJ,KAAK,qBAAL,OAAOc,KAAK,EAAE,GACzC;OACC;;KAGD,WAAAd,KAAK,qBAAL,QAAOa,OAAO,EAAE;KAChBb,KAAK,GAAG,IAAI;KAEZU,eAAK,CAACK,MAAM,CAACH,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAACH,cAAc,EAAE,IAAI,CAAC;;GAG5DO,QAAQ,GACR;KACC,OAAOhB,KAAK,KAAK,IAAI;;GAGtBQ,cAAc,CAACF,WAAW,EAC1B;KAAA;KACC,WAAAN,KAAK,qBAAL,QAAOQ,cAAc,CAACF,WAAW,CAAC;;GAGnCG,cAAc,GACd;KAAA;KACC,WAAAT,KAAK,qBAAL,QAAOS,cAAc,EAAE;;GAyCxB,IAAIQ,OAAO,GACX;KACC,OAAOC,aAAG,CAACC,UAAU,CAAC,oDAAoD,CAAC;;CAE7E;CAAC,uBAzCA;GACC,IAAInB,KAAK,EACT;KACC;;GAGDA,KAAK,GAAG,IAAIoB,gBAAK,CAAC;KACjBf,EAAE,EAAE,IAAI,CAACD,OAAO;KAChBE,WAAW,0CAAE,IAAI,6BAAa;KAC9Be,OAAO,0CAAE,IAAI,uCAAmB;KAChCC,UAAU,EAAE,4CAAI,8BAAcC,WAAW,GAAG,CAAC;KAC7CC,QAAQ,EAAE,GAAG;KACbC,QAAQ,EAAE,GAAG;KACbC,SAAS,EAAE,EAAE;KACbC,UAAU,EAAE,SAAS;KACrBC,KAAK,EAAE;OACNC,MAAM,EAAE,EAAE;OACVC,QAAQ,EAAE;MACV;KACDC,iBAAiB,EAAE,OAAO;KAC1BC,YAAY,EAAE,MAAM;OAAA;OACnB,WAAAhC,KAAK,qBAAL,QAAOa,OAAO,EAAE;;IAEjB,CAAC;CACH;CAAC,6BAGD;GACC,OAAOoB,aAAG,CAACC,MAAM,cAAC;;;OAGf,CAAe;;;GAGlB,GAHK,IAAI,CAACjB,OAAO;CAIlB;;;;;;;;"}