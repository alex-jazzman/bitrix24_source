this.BX=this.BX||{};this.BX.Booking=this.BX.Booking||{};(function(t,e,n,o,i,s,a,p,d,l,u,r,c,b){"use strict";const m={name:"BookingBase",emits:["click"],props:{bookingStyle:{type:[String,Object,Array],default:""},bookingClass:{type:[String,Object,Array],default:""},disabled:{type:Boolean,default:false},visible:{type:Boolean,default:true},dataAttributes:{type:Object,default:()=>({})}},methods:{onClick(t){if(this.disabled){this.$emit("click");t.stopPropagation()}}},template:`\n\t\t<div\n\t\t\tclass="booking--booking-base"\n\t\t\t:style="bookingStyle"\n\t\t\t:class="bookingClass"\n\t\t\tv-bind="dataAttributes"\n\t\t\t@click.capture="onClick"\n\t\t>\n\t\t\t<div v-if="visible" class="booking--booking-base-padding booking-booking-booking-padding">\n\t\t\t\t<div class="booking--booking-base-inner booking-booking-booking-inner">\n\t\t\t\t\t<div class="booking--booking-base-content">\n\t\t\t\t\t\t<div class="booking--booking-base-content-row">\n\t\t\t\t\t\t\t<slot name="upper-content-row"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="booking--booking-base-content-row --lower">\n\t\t\t\t\t\t\t<slot name="lower-content-row"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<slot name="actions"></slot>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<slot name="end"/>\n\t\t</div>\n\t`};const f={name:"Name",props:{name:{type:String,default:""},className:{type:[String,Object,Array],default:""},dataAttributes:{type:Object,default:()=>({})}},template:`\n\t\t<div\n\t\t\tclass="booking--booking-base-name"\n\t\t\t:title="name"\n\t\t\t:class="className"\n\t\t\tv-bind="$props.dataAttributes"\n\t\t>\n\t\t\t{{ name }}\n\t\t</div>\n\t`};const h={name:"BaseNote",components:{NotePopup:e.NotePopup},expose:["showViewPopup","closeViewPopup"],props:{id:{type:[Number,String],required:true},bindElement:{type:Function,required:true},note:{type:String,default:""},dataId:{type:[String,Number],default:""},dataElementPrefix:{type:String,default:""},className:{type:[String,Object,Array],default:""},dataAttributes:{type:Object,default:null}},emits:["save"],data(){return{isPopupShown:false,isEditMode:false}},computed:{...n.mapGetters({isFeatureEnabled:`${d.Model.Interface}/isFeatureEnabled`}),hasNote(){return Boolean(this.note)}},methods:{showViewPopup(){if(this.isPopupShown||!this.hasNote){return}this.isEditMode=false;this.isPopupShown=true},closeViewPopup(){if(this.isEditMode){return}this.isPopupShown=false},showEditPopup(){this.isEditMode=true;this.isPopupShown=true},closeEditPopup(){if(!this.isEditMode){return}this.isPopupShown=false}},template:`\n\t\t<div class="booking--booking-base-note">\n\t\t\t<div\n\t\t\t\tclass="booking--booking-base-note-button"\n\t\t\t\t:class="[className, {'--has-note': hasNote}].flat(1)"\n\t\t\t\tv-bind="$props.dataAttributes"\n\t\t\t\t@click="showEditPopup"\n\t\t\t>\n\t\t\t\t<div class="ui-icon-set --note"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<NotePopup\n\t\t\tv-if="isPopupShown"\n\t\t\t:isEditMode="isEditMode && isFeatureEnabled"\n\t\t\t:id="id"\n\t\t\t:text="note"\n\t\t\t:bindElement\n\t\t\t:dataId\n\t\t\t:dataElementPrefix\n\t\t\t@close="closeEditPopup"\n\t\t\t@save="$emit('save', $event)"\n\t\t/>\n\t`};const g={name:"Profit",props:{deal:{type:Object,default:null},className:{type:[Object,String,Array],default:""},dataAttributes:{type:Object,default:null}},template:`\n\t\t<div\n\t\t\tv-if="deal"\n\t\t\tclass="booking--booking-base-profit"\n\t\t\t:class="className"\n\t\t\t:data-profit="deal.data.opportunity"\n\t\t\tv-bind="$props.dataAttributes"\n\t\t\tv-html="deal.data.formattedOpportunity"\n\t\t></div>\n\t`};const k={name:"AddClient",components:{ClientPopup:o.ClientPopup},props:{expired:{type:Boolean,default:false},dataAttributes:{type:Object,default:()=>({})},buttonClass:{type:String,default:""},popupOffsetLeft:{type:Number,default:null}},emits:["add"],data(){return{showPopup:false}},computed:{...n.mapGetters({providerModuleId:`${d.Model.Clients}/providerModuleId`,isFeatureEnabled:`${d.Model.Interface}/isFeatureEnabled`}),offsetLeft(){if(this.popupOffsetLeft===null){return this.$refs.button.offsetWidth+10}return this.popupOffsetLeft}},methods:{clickHandler(){var t;if(!this.isFeatureEnabled){l.limit.show();return}(t=c.PopupManager.getPopupById(o.CLIENT_POPUP_ID))==null?void 0:t.destroy();this.showPopup=true}},template:`\n\t\t<div\n\t\t\tv-if="providerModuleId"\n\t\t\tclass="booking--booking-base--add-client-button"\n\t\t\t:class="[buttonClass, { '--expired': expired }]"\n\t\t\tv-bind="$props.dataAttributes"\n\t\t\tref="button"\n\t\t\t@click="clickHandler"\n\t\t>\n\t\t\t{{ loc('BOOKING_BOOKING_PLUS_CLIENT') }}\n\t\t</div>\n\t\t<ClientPopup\n\t\t\tv-if="showPopup"\n\t\t\t:bindElement="this.$refs.button"\n\t\t\t:offset-top="-100"\n\t\t\t:offset-left="offsetLeft"\n\t\t\t@create="$emit('add', $event)"\n\t\t\t@close="showPopup = false"\n\t\t/>\n\t`};const v={name:"Communication",directives:{hint:i.hint},components:{Icon:a.BIcon},setup(){return{IconSet:a.Set}},computed:{soonHint(){return{text:this.loc("BOOKING_BOOKING_SOON_HINT"),popupOptions:{offsetLeft:-60}}}},template:`\n\t\t<div v-hint="soonHint" class="booking--booking-base-communication">\n\t\t\t<Icon :name="IconSet.TELEPHONY_HANDSET_1"/>\n\t\t\t<Icon :name="IconSet.CHATS_2"/>\n\t\t</div>\n\t`};const P={name:"CrmButton",components:{Icon:a.BIcon},props:{dealHelper:{type:u.DealHelper,required:true},dataAttributes:{type:Object,default:()=>({})}},setup(){return{IconSet:a.Set}},computed:{isFeatureEnabled(){return this.$store.getters[`${d.Model.Interface}/isFeatureEnabled`]},hasDeal(){return this.dealHelper.hasDeal()}},methods:{onClick(){if(!this.isFeatureEnabled){void l.limit.show();return}if(this.hasDeal){this.dealHelper.openDeal()}else{this.dealHelper.createDeal()}}},template:`\n\t\t<Icon\n\t\t\t:name="IconSet.CRM_LETTERS"\n\t\t\tclass="booking--booking-base-crm-button"\n\t\t\t:class="{'--no-deal': !hasDeal}"\n\t\t\tv-bind="$props.dataAttributes"\n\t\t\t@click="onClick"\n\t\t/>\n\t`};const B={name:"DisabledPopup",components:{Popup:b.Popup},emits:["close"],props:{popupId:{type:String,required:true},bindElement:{type:Function,required:true},contentClass:{type:[String,Object],default:"booking-booking-disabled-popup-content"}},mounted(){this.adjustPosition();setTimeout((()=>this.closePopup()),3e3);r.Event.bind(document,"scroll",this.adjustPosition,true)},beforeUnmount(){r.Event.unbind(document,"scroll",this.adjustPosition,true)},computed:{config(){return{className:"booking-booking-disabled-popup",bindElement:this.bindElement(),width:this.bindElement().offsetWidth,offsetTop:-10,bindOptions:{forceBindPosition:true,position:"top"},autoHide:true,darkMode:true}}},methods:{adjustPosition(){this.$refs.popup.adjustPosition()},closePopup(){this.$emit("close")}},template:`\n\t\t<Popup\n\t\t\t:id="popupId"\n\t\t\t:config="config"\n\t\t\tref="popup"\n\t\t\t@close="closePopup"\n\t\t>\n\t\t\t<div :class="contentClass">\n\t\t\t\t{{ loc('BOOKING_BOOKING_YOU_CANNOT_EDIT_THIS_BOOKING') }}\n\t\t\t</div>\n\t\t</Popup>\n\t`};t.BookingBase=m;t.Name=f;t.Note=h;t.Profit=g;t.AddClient=k;t.Communication=v;t.CrmButton=P;t.DisabledPopup=B})(this.BX.Booking.Component=this.BX.Booking.Component||{},BX.Booking.Component,BX.Vue3.Vuex,BX.Booking.Component,BX.Vue3.Directives,BX,BX.UI.IconSet,BX,BX.Booking.Const,BX.Booking.Lib,BX.Booking.Lib,BX,BX.Main,BX.Booking.Component);
//# sourceMappingURL=booking.bundle.map.js