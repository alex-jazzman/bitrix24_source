{"version":3,"file":"help-desk-loc.bundle.js","sources":["../src/base-rich-loc.js","../src/rules/helpdesk-rule.js","../src/rules/nowrap-rule.js","../src/rules/rule-registry.js","../src/empty-rich-loc.js","../src/help-desk-loc.js"],"sourcesContent":["import { RichLoc } from 'ui.vue3.components.rich-loc';\n\n// @vue/component\nexport const BaseRichLoc = {\n\tname: 'BaseRichLoc',\n\tcomponents: {\n\t\tRichLoc,\n\t},\n\tprops: {\n\t\tmessage: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tenabledRules: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t},\n\tcomputed: {\n\t\tactivePlaceholders(): Array<string>\n\t\t{\n\t\t\treturn this.enabledRules.flatMap((rule) => `[${rule.name}]`);\n\t\t},\n\t\trulePropsMap(): Object\n\t\t{\n\t\t\tconst result = {};\n\n\t\t\tthis.enabledRules.forEach((rule) => {\n\t\t\t\tconst ruleComponent = rule.component;\n\t\t\t\tresult[rule.name] = {};\n\n\t\t\t\tif (ruleComponent.props)\n\t\t\t\t{\n\t\t\t\t\tObject.keys(ruleComponent.props).forEach((propName) => {\n\t\t\t\t\t\tif (propName in this.$attrs)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresult[rule.name][propName] = this.$attrs[propName];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<RichLoc :text=\"message\" :placeholder=\"activePlaceholders\">\n\t\t\t<template v-for=\"rule in enabledRules\" #[rule.name]=\"{ text }\">\n\t\t\t\t<component\n\t\t\t\t\t:is=\"rule.component\"\n\t\t\t\t\t:text=\"text\"\n\t\t\t\t\tv-bind=\"rulePropsMap[rule.name]\"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t</RichLoc>\n\t`,\n};\n","import './helpdesk-rule.css';\n\n// @vue/component\nexport const HelpDeskRule = {\n\tname: 'HelpDeskRule',\n\tprops: {\n\t\t// default property for every rule\n\t\ttext: String,\n\t\t// current rule properties\n\t\tcode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tanchor: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t\tredirect: {\n\t\t\ttype: String,\n\t\t\tdefault: 'detail',\n\t\t},\n\t\tlinkClass: {\n\t\t\ttype: [String, Object, Array],\n\t\t\tdefault: 'booking--help-desk-link',\n\t\t},\n\t},\n\tmethods: {\n\t\tshowHelpDesk(): void\n\t\t{\n\t\t\tif (top.BX.Helper)\n\t\t\t{\n\t\t\t\tconst anchor = this.anchor;\n\t\t\t\tconst params = {\n\t\t\t\t\tredirect: this.redirect,\n\t\t\t\t\tcode: this.code,\n\t\t\t\t\t...(anchor !== null && { anchor }),\n\t\t\t\t};\n\n\t\t\t\tconst queryString = Object.entries(params)\n\t\t\t\t\t.map(([key, value]) => `${key}=${value}`)\n\t\t\t\t\t.join('&');\n\n\t\t\t\ttop.BX.Helper.show(queryString);\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<span\n\t\t\t:class=\"linkClass\"\n\t\t\trole=\"button\"\n\t\t\ttabindex=\"0\"\n\t\t\t@click=\"showHelpDesk\"\n\t\t>\n\t\t  {{ text }}\n\t\t</span>\n\t`,\n};\n","// @vue/component\nexport const NoWrapRule = {\n\tname: 'NoWrapRule',\n\tprops: {\n\t\t// default property for every rule\n\t\ttext: String,\n\t},\n\ttemplate: `\n\t\t{{ text }}\n\t`,\n};\n","import { HelpDeskRule } from './helpdesk-rule';\nimport { NoWrapRule } from './nowrap-rule';\n\nexport const ruleRegistry = {\n\thelpdesk: {\n\t\tname: 'helpdesk',\n\t\tcomponent: HelpDeskRule,\n\t},\n\tnowrap: {\n\t\tname: 'nowrap',\n\t\tcomponent: NoWrapRule,\n\t},\n};\n","import { BaseRichLoc } from './base-rich-loc';\nimport { ruleRegistry } from './rules/rule-registry';\n\n// @vue/component\nexport const EmptyRichLoc = {\n\tname: 'EmptyRichLoc',\n\tcomponents: {\n\t\tBaseRichLoc,\n\t},\n\tprops: {\n\t\tmessage: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\trules: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t},\n\tcomputed: {\n\t\tenabledRules(): Array<string>\n\t\t{\n\t\t\treturn [...this.rules]\n\t\t\t\t.map((ruleName) => ruleRegistry[ruleName])\n\t\t\t\t.filter(Boolean);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseRichLoc\n\t\t\t:message=\"message\"\n\t\t\t:enabled-rules=\"enabledRules\"\n\t\t\tv-bind=\"$attrs\"\n\t\t/>\n\t`,\n};\n","import { EmptyRichLoc } from './empty-rich-loc';\n\nconst DEFAULT_RULES = ['helpdesk'];\n\n// @vue/component\nexport const HelpDeskLoc = {\n\tname: 'HelpDeskLoc',\n\tcomponents: {\n\t\tEmptyRichLoc,\n\t},\n\tprops: {\n\t\tmessage: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\trules: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t},\n\tcomputed: {\n\t\tenabledRules(): Array<string>\n\t\t{\n\t\t\treturn [...DEFAULT_RULES, ...this.rules];\n\t\t},\n\t},\n\ttemplate: `\n\t\t<EmptyRichLoc\n\t\t\t:message=\"message\"\n\t\t\t:rules=\"enabledRules\"\n\t\t\tv-bind=\"$attrs\"\n\t\t/>\n\t`,\n};\n"],"names":["BaseRichLoc","name","components","RichLoc","props","message","type","String","required","enabledRules","Array","default","computed","activePlaceholders","flatMap","rule","rulePropsMap","result","forEach","ruleComponent","component","Object","keys","propName","$attrs","template","HelpDeskRule","text","code","anchor","redirect","linkClass","methods","showHelpDesk","top","BX","Helper","params","queryString","entries","map","key","value","join","show","NoWrapRule","ruleRegistry","helpdesk","nowrap","EmptyRichLoc","rules","ruleName","filter","Boolean","DEFAULT_RULES","HelpDeskLoc"],"mappings":"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"}