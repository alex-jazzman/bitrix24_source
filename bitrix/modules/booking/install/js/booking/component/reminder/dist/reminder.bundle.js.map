{"version":3,"file":"reminder.bundle.js","sources":["../src/reminder-values.js","../src/reminder-menu.js","../src/reminder.js","../src/reminder-add.js","../src/reminder-item.js"],"sourcesContent":["import { Loc } from 'main.core';\n\nexport const reminderValues = [\n\t{\n\t\tvalue: 0,\n\t\tlabel: Loc.getMessage('BOOKING_REMINDER_0'),\n\t\tshortLabel: Loc.getMessage('BOOKING_REMINDER_SHORT_0'),\n\t},\n\t{\n\t\tvalue: 5,\n\t\tlabel: Loc.getMessage('BOOKING_REMINDER_5'),\n\t\tshortLabel: Loc.getMessage('BOOKING_REMINDER_SHORT_5'),\n\t},\n\t{\n\t\tvalue: 10,\n\t\tlabel: Loc.getMessage('BOOKING_REMINDER_10'),\n\t\tshortLabel: Loc.getMessage('BOOKING_REMINDER_SHORT_10'),\n\t},\n\t{\n\t\tvalue: 15,\n\t\tlabel: Loc.getMessage('BOOKING_REMINDER_15'),\n\t\tshortLabel: Loc.getMessage('BOOKING_REMINDER_SHORT_15'),\n\t},\n\t{\n\t\tvalue: 20,\n\t\tlabel: Loc.getMessage('BOOKING_REMINDER_20'),\n\t\tshortLabel: Loc.getMessage('BOOKING_REMINDER_SHORT_20'),\n\t},\n\t{\n\t\tvalue: 30,\n\t\tlabel: Loc.getMessage('BOOKING_REMINDER_30'),\n\t\tshortLabel: Loc.getMessage('BOOKING_REMINDER_SHORT_30'),\n\t},\n\t{\n\t\tvalue: 60,\n\t\tlabel: Loc.getMessage('BOOKING_REMINDER_60'),\n\t\tshortLabel: Loc.getMessage('BOOKING_REMINDER_SHORT_60'),\n\t},\n\t{\n\t\tvalue: 120,\n\t\tlabel: Loc.getMessage('BOOKING_REMINDER_120'),\n\t\tshortLabel: Loc.getMessage('BOOKING_REMINDER_SHORT_120'),\n\t},\n];\n","import { MenuManager } from 'main.popup';\nimport type { MenuItem } from 'main.popup';\n\nimport { reminderValues } from './reminder-values';\nimport type { ReminderMenuItem } from './types';\n\nexport const ReminderMenu = {\n\tname: 'ReminderManu',\n\tprops: {\n\t\tbindElement: {\n\t\t\ttype: HTMLElement,\n\t\t\trequired: true,\n\t\t},\n\t\tshown: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['select'],\n\tcomputed: {\n\t\tid(): string\n\t\t{\n\t\t\treturn `booking-reminder-${Math.round(Math.random() * 1_000_000)}`;\n\t\t},\n\t\tmenuItems(): ReminderMenuItem[]\n\t\t{\n\t\t\treturn reminderValues;\n\t\t},\n\t},\n\twatch: {\n\t\tshown: {\n\t\t\thandler(shown: boolean): void\n\t\t\t{\n\t\t\t\tif (shown)\n\t\t\t\t{\n\t\t\t\t\tthis.reminderMenu.show();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.reminderMenu.close();\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tthis.reminderMenu = MenuManager.create({\n\t\t\tid: this.id,\n\t\t\tbindElement: this.bindElement,\n\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\tcloseByEsc: true,\n\t\t\tautoHide: true,\n\t\t\tzIndex: 3200,\n\t\t\toffsetTop: 0,\n\t\t\toffsetLeft: 9,\n\t\t\tangle: true,\n\t\t\tcacheable: false,\n\t\t});\n\n\t\tthis.menuItems.forEach((menuItem) => {\n\t\t\tthis.reminderMenu.addMenuItem({\n\t\t\t\ttext: menuItem.label,\n\t\t\t\tdataset: { ...menuItem },\n\t\t\t\tonclick: (event: PointerEvent, item: MenuItem): void => {\n\t\t\t\t\tthis.$emit('select', item.dataset);\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\n\t\tthis.reminderMenu.show();\n\t},\n\tunmounted(): void\n\t{\n\t\tMenuManager.destroy(this.id);\n\t},\n\ttemplate: `\n\t\t<div></div>\n\t`,\n};\n","import { ReminderAdd } from './reminder-add';\nimport { ReminderItem } from './reminder-item';\nimport './reminder.css';\n\n// @vue/component\nexport const Reminder = {\n\tname: 'UiReminder',\n\tcomponents: {\n\t\tReminderAdd,\n\t\tReminderItem,\n\t},\n\tprops: {\n\t\t/**\n\t\t * @type {Array<number>}\n\t\t */\n\t\tmodelValue: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['update:modelValue'],\n\tmethods: {\n\t\taddRemind(remind: number): void\n\t\t{\n\t\t\tif (this.disabled)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst reminds = new Set(this.modelValue);\n\t\t\treminds.add(remind);\n\n\t\t\tthis.$emit('update:modelValue', [...reminds]);\n\t\t},\n\t\tremoveRemind(remind: number): void\n\t\t{\n\t\t\tif (this.disabled)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('update:modelValue', this.modelValue.filter((value) => value !== remind));\n\t\t},\n\t\tupdateRemind({ remind, selected }): void\n\t\t{\n\t\t\tif (this.disabled)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst index = this.modelValue.indexOf(remind);\n\t\t\tif (index >= 0 && !this.modelValue.includes(selected))\n\t\t\t{\n\t\t\t\tconst items = [...this.modelValue];\n\t\t\t\titems[index] = selected;\n\t\t\t\tthis.$emit('update:modelValue', items);\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"booking--reminder-row\">\n\t\t\t<ReminderItem\n\t\t\t\tv-for=\"remind of modelValue\"\n\t\t\t\t:key=\"remind\"\n\t\t\t\t:remind\n\t\t\t\t:disabled\n\t\t\t\t@update=\"updateRemind\"\n\t\t\t\t@remove=\"removeRemind\"\n\t\t\t/>\n\t\t\t<ReminderAdd :disabled @add=\"addRemind\"/>\n\t\t</div>\n\t`,\n};\n","import { BIcon as Icon, Set as SetIcon } from 'ui.icon-set.api.vue';\nimport { ref, type VueRefValue } from 'ui.vue3';\n\nimport { ReminderMenu } from './reminder-menu';\nimport type { ReminderMenuItem } from './types';\n\n// @vue/component\nexport const ReminderAdd = {\n\tname: 'ReminderAdd',\n\tcomponents: {\n\t\tIcon,\n\t\tReminderMenu,\n\t},\n\tprops: {\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['add'],\n\tsetup(): ReminderAddData\n\t{\n\t\tconst iconName = SetIcon.PLUS_30;\n\t\tconst shown = ref(false);\n\n\t\treturn {\n\t\t\ticonName,\n\t\t\tshown,\n\t\t};\n\t},\n\tmethods: {\n\t\tselect(reminderItem: ReminderMenuItem): void\n\t\t{\n\t\t\tthis.$emit('add', reminderItem.value);\n\t\t\tthis.shown = false;\n\t\t},\n\t\ttoggleMenu(): void\n\t\t{\n\t\t\tif (this.disabled)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.shown = !this.shown;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"booking--reminder booking--reminder-add\" :class=\"{ '--disabled': disabled }\" @click=\"toggleMenu\">\n\t\t\t<span ref=\"add\" class=\"booking--reminder-add__label\">{{ loc('BOOKING_REMINDER_CREATE') }}</span>\n\t\t\t<Icon :name=\"iconName\" :size=\"18\" />\n\t\t</div>\n\t\t<ReminderMenu v-if=\"shown\" :bindElement=\"$refs['add']\" :shown @select=\"select\" />\n\t`,\n};\n\ntype ReminderAddData = {\n\ticonName: string,\n\tshown: VueRefValue<boolean>,\n}\n","import { BIcon as Icon, Set as SetIcon } from 'ui.icon-set.api.vue';\nimport { ref, type VueRefValue } from 'ui.vue3';\n\nimport { ReminderMenu } from './reminder-menu';\nimport { reminderValues } from './reminder-values';\nimport type { ReminderMenuItem } from './types';\n\n// @vue/component\nexport const ReminderItem = {\n\tname: 'ReminderItem',\n\tcomponents: {\n\t\tIcon,\n\t\tReminderMenu,\n\t},\n\tprops: {\n\t\tremind: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['update', 'remove'],\n\tsetup(): ReminderItemData\n\t{\n\t\tconst iconName = SetIcon.CROSS_30;\n\t\tconst shown = ref(false);\n\n\t\treturn {\n\t\t\ticonName,\n\t\t\tshown,\n\t\t};\n\t},\n\tcomputed: {\n\t\tremindItem(): ReminderMenuItem\n\t\t{\n\t\t\treturn reminderValues.find(({ value }) => value === this.remind);\n\t\t},\n\t},\n\tmethods: {\n\t\tselect(item: ReminderMenuItem): void\n\t\t{\n\t\t\tif (item.value !== this.remind)\n\t\t\t{\n\t\t\t\tthis.$emit('update', { remind: this.remind, selected: item.value });\n\t\t\t}\n\t\t},\n\t\ttoggleMenu(): void\n\t\t{\n\t\t\tif (this.disabled)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.shown = !this.shown;\n\t\t},\n\t\tremoveItem(): void\n\t\t{\n\t\t\tif (this.disabled)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('remove', this.remind);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"[\n\t\t\t\t'booking--reminder',\n\t\t\t\t'booking--reminder-item',\n\t\t\t\t{ '--disabled': disabled },\n\t\t\t]\"\n\t\t>\n\t\t\t<span ref=\"item\" class=\"booking--reminder-item__title\" @click=\"toggleMenu\">\n\t\t\t\t{{ remindItem.shortLabel }}\n\t\t\t</span>\n\t\t\t<Icon :name=\"iconName\" :size=\"18\" @click=\"removeItem\"/>\n\t\t\t<ReminderMenu v-if=\"shown\" :bindElement=\"$refs['item']\" :shown @select=\"select\"/>\n\t\t</div>\n\t`,\n};\n\ntype ReminderItemData = {\n\ticonName: string;\n\tshown: VueRefValue<boolean>;\n}\n"],"names":["reminderValues","value","label","Loc","getMessage","shortLabel","ReminderMenu","name","props","bindElement","type","HTMLElement","required","shown","Boolean","default","emits","computed","id","Math","round","random","menuItems","watch","handler","this","reminderMenu","show","close","created","MenuManager","create","targetContainer","$root","$el","querySelector","closeByEsc","autoHide","zIndex","offsetTop","offsetLeft","angle","cacheable","forEach","menuItem","addMenuItem","text","dataset","onclick","event","item","$emit","unmounted","destroy","template","Reminder","components","ReminderAdd","Icon","disabled","setup","iconName","SetIcon","PLUS_30","ref","methods","select","reminderItem","toggleMenu","ReminderItem","remind","Number","CROSS_30","remindItem","find","selected","removeItem","modelValue","Array","addRemind","reminds","Set","add","removeRemind","filter","updateRemind","index","indexOf","includes","items"],"mappings":"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"}