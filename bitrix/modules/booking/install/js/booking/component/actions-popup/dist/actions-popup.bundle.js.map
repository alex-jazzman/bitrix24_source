{"version":3,"file":"actions-popup.bundle.js","sources":["../src/actions-popup.js","../src/client/note/note.js","../src/client/empty/empty.js","../src/client/edit-client-button/edit-client-button.js","../src/client/client.js","../src/confirmation/confirmation-menu/confirmation-menu.js","../src/confirmation/confirmation.js","../src/deal/deal.js","../src/document/document.js","../src/extra-resources-info/extra-resources-dialog.js","../src/extra-resources-info/extra-resources-info-popup-item.js","../src/extra-resources-info/extra-resources-info-popup.js","../src/extra-resources-info/extra-resources-info.js","../src/full-form/full-form.js","../src/info/info.js","../src/message/message.js","../src/remove-button/remove-button.js","../src/visit/visit-menu/visit-menu.js","../src/visit/visit.js"],"sourcesContent":["import { Popup, PopupManager } from 'main.popup';\nimport type { PopupOptions } from 'main.popup';\n\nimport { PopupMaker } from 'booking.component.popup-maker';\nimport { StickyPopup } from 'booking.component.popup';\nimport type { PopupMakerItem } from 'booking.component.popup-maker';\n\nimport './actions-popup.css';\n\nexport type { PopupOptions, PopupMakerItem };\n\nexport const ActionsPopup = {\n\tname: 'ActionsPopup',\n\temits: ['close'],\n\tprops: {\n\t\tbindElement: {\n\t\t\ttype: HTMLElement,\n\t\t\trequired: true,\n\t\t},\n\t\tpopupId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\t/**\n\t\t * @type {Array<PopupMakerItem | PopupMakerItem[]>}\n\t\t */\n\t\tcontentStructure: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\t/**\n\t\t * @type {PopupOptions}\n\t\t */\n\t\tpopupOptions: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tsoonTmp: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tactionsPopupId(): string\n\t\t{\n\t\t\treturn `booking-booking-actions-popup-${this.popupId}`;\n\t\t},\n\t\tconfig(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tclassName: 'booking-booking-actions-popup',\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\twidth: 325,\n\t\t\t\toffsetLeft: this.bindElement.offsetWidth,\n\t\t\t\toffsetTop: -200,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\t...this.popupOptions,\n\t\t\t};\n\t\t},\n\t},\n\tbeforeCreate(): void\n\t{\n\t\tPopupManager.getPopups()\n\t\t\t.filter((popup: Popup) => /booking-booking-actions-popup/.test(popup.getId()))\n\t\t\t.forEach((popup: Popup) => popup.destroy())\n\t\t;\n\t},\n\tcomponents: {\n\t\tStickyPopup,\n\t\tPopupMaker,\n\t},\n\ttemplate: `\n\t\t<StickyPopup\n\t\t\tv-slot=\"{freeze, unfreeze}\"\n\t\t\t:id=\"actionsPopupId\"\n\t\t\t:config=\"config\"\n\t\t\t@close=\"$emit('close')\"\n\t\t>\n\t\t\t<PopupMaker\n\t\t\t\t:contentStructure=\"contentStructure\"\n\t\t\t\t@freeze=\"freeze\"\n\t\t\t\t@unfreeze=\"unfreeze\"\n\t\t\t/>\n\t\t\t<div class=\"booking-booking-actions-popup-footer\">\n\t\t\t\t<slot name=\"footer\" />\n\t\t\t</div>\n\t\t</StickyPopup>\n\t`,\n};\n","import { mapGetters } from 'ui.vue3.vuex';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\n\nimport { Model } from 'booking.const';\nimport { NotePopup } from 'booking.component.note-popup';\nimport type { NotePopupSavePayload } from 'booking.component.note-popup';\n\nimport './note.css';\n\nexport type { NotePopupSavePayload as UpdateNotePayload };\n\n// @vue/component\nexport const Note = {\n\tprops: {\n\t\tid: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tnote: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tdataId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: '',\n\t\t},\n\t\tdataElementPrefix: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tdataAttributes: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\temits: ['popupShown', 'popupClosed', 'updateNote'],\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tIconSet,\n\t\t\tisPopupShown: false,\n\t\t\tisEditMode: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tisFeatureEnabled: `${Model.Interface}/isFeatureEnabled`,\n\t\t}),\n\t\thasNote(): boolean\n\t\t{\n\t\t\treturn Boolean(this.note);\n\t\t},\n\t},\n\tmethods: {\n\t\tonMouseEnter(): void\n\t\t{\n\t\t\tthis.showNoteTimeout = setTimeout(() => this.showViewPopup(), 100);\n\t\t},\n\t\tonMouseLeave(): void\n\t\t{\n\t\t\tclearTimeout(this.showNoteTimeout);\n\t\t\tthis.closeViewPopup();\n\t\t},\n\t\tshowViewPopup(): void\n\t\t{\n\t\t\tif (this.isPopupShown || !this.hasNote)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isEditMode = false;\n\t\t\tthis.showPopup();\n\t\t},\n\t\tcloseViewPopup(): void\n\t\t{\n\t\t\tif (this.isEditMode)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.closePopup();\n\t\t},\n\t\tshowEditPopup(): void\n\t\t{\n\t\t\tthis.isEditMode = true;\n\t\t\tthis.showPopup();\n\t\t},\n\t\tcloseEditPopup(): void\n\t\t{\n\t\t\tif (!this.isEditMode)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.closePopup();\n\t\t},\n\t\tshowPopup(): void\n\t\t{\n\t\t\tthis.isPopupShown = true;\n\t\t\tthis.$emit('popupShown');\n\t\t},\n\t\tclosePopup(): void\n\t\t{\n\t\t\tthis.isPopupShown = false;\n\t\t\tthis.$emit('popupClosed');\n\t\t},\n\t\tsaveBookingNote({ note }: NotePopupSavePayload): void\n\t\t{\n\t\t\tthis.$emit('updateNote', {\n\t\t\t\tid: this.id,\n\t\t\t\tnote,\n\t\t\t});\n\t\t},\n\t},\n\tcomponents: {\n\t\tNotePopup,\n\t\tIcon,\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"booking-actions-popup__item-client-note\"\n\t\t\t:data-element=\"dataElementPrefix + '-menu-note'\"\n\t\t\t:data-has-note=\"hasNote\"\n\t\t\t:class=\"{'--empty': !hasNote}\"\n\t\t\tv-bind=\"dataAttributes\"\n\t\t\tref=\"note\"\n\t\t>\n\t\t\t<div\n\t\t\t\tclass=\"booking-actions-popup__item-client-note-inner\"\n\t\t\t\t:data-element=\"dataElementPrefix + '-menu-note-add'\"\n\t\t\t\tv-bind=\"dataAttributes\"\n\t\t\t\t@mouseenter=\"onMouseEnter\"\n\t\t\t\t@mouseleave=\"onMouseLeave\"\n\t\t\t\t@click=\"() => hasNote ? showViewPopup() : showEditPopup()\"\n\t\t\t>\n\t\t\t\t<template v-if=\"hasNote\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"booking-actions-popup__item-client-note-text\"\n\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-note-text'\"\n\t\t\t\t\t\tv-bind=\"dataAttributes\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ note }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"isFeatureEnabled\"\n\t\t\t\t\t\tclass=\"booking-actions-popup__item-client-note-edit\"\n\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-note-edit'\"\n\t\t\t\t\t\tv-bind=\"dataAttributes\"\n\t\t\t\t\t\t@click=\"showEditPopup\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon :name=\"IconSet.PENCIL_40\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<Icon :name=\"IconSet.PLUS_20\"/>\n\t\t\t\t\t<div class=\"booking-actions-popup__item-client-note-text\">\n\t\t\t\t\t\t{{ loc('BB_ACTIONS_POPUP_ADD_NOTE') }}\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t\t<NotePopup\n\t\t\tv-if=\"isPopupShown\"\n\t\t\t:isEditMode=\"isEditMode && isFeatureEnabled\"\n\t\t\t:id=\"id\"\n\t\t\t:text=\"note\"\n\t\t\t:bindElement=\"() => $refs.note\"\n\t\t\t:dataId=\"dataId\"\n\t\t\t:dataElementPrefix=\"dataElementPrefix\"\n\t\t\t@close=\"closeEditPopup\"\n\t\t\t@save=\"saveBookingNote\"\n\t\t/>\n\t`,\n};\n","import { mapGetters } from 'ui.vue3.vuex';\nimport { hint } from 'ui.vue3.directives.hint';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.main';\n\nimport { limit } from 'booking.lib.limit';\nimport { Button, ButtonSize, ButtonColor, ButtonIcon } from 'booking.component.button';\nimport { ClientPopup } from 'booking.component.client-popup';\nimport { Model } from 'booking.const';\nimport type { ClientData } from 'booking.model.clients';\n\nimport '../client.css';\n\nexport type AddClientsPayload = {\n\tid: number | string,\n\tclients: ClientData[],\n}\n\nexport const Empty = {\n\temits: ['popupShown', 'popupClosed', 'addClients'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdirectives: { hint },\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tButtonIcon,\n\t\t\tisLoading: true,\n\t\t\tshownClientPopup: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tisFeatureEnabled: `${Model.Interface}/isFeatureEnabled`,\n\t\t}),\n\t\tbtnIcon(): string\n\t\t{\n\t\t\treturn this.isFeatureEnabled ? ButtonIcon.ADD : ButtonIcon.LOCK;\n\t\t},\n\t\tuserIcon(): string\n\t\t{\n\t\t\treturn IconSet.PERSON;\n\t\t},\n\t\tpersonSize(): number\n\t\t{\n\t\t\treturn 26;\n\t\t},\n\t\tcallIcon(): string\n\t\t{\n\t\t\treturn IconSet.TELEPHONY_HANDSET_1;\n\t\t},\n\t\tmessageIcon(): string\n\t\t{\n\t\t\treturn IconSet.CHATS_1;\n\t\t},\n\t\ticonSize(): number\n\t\t{\n\t\t\treturn 20;\n\t\t},\n\t\ticonColor(): string\n\t\t{\n\t\t\treturn 'var(--ui-color-palette-gray-20)';\n\t\t},\n\t\tsoonHint(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('BOOKING_BOOKING_SOON_HINT'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\toffsetLeft: -60,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\tshowClientPopup(): void\n\t\t{\n\t\t\tif (!this.isFeatureEnabled)\n\t\t\t{\n\t\t\t\tlimit.show();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.shownClientPopup = true;\n\t\t\tthis.$emit('popupShown');\n\t\t},\n\t\thideClientPopup(): void\n\t\t{\n\t\t\tthis.shownClientPopup = false;\n\t\t\tthis.$emit('popupClosed');\n\t\t},\n\t\taddClientsToBook(clients: ClientData[]): void\n\t\t{\n\t\t\tthis.$emit('addClients', {\n\t\t\t\tid: this.id,\n\t\t\t\tclients,\n\t\t\t});\n\t\t},\n\t},\n\tcomponents: {\n\t\tButton,\n\t\tIcon,\n\t\tClientPopup,\n\t},\n\ttemplate: `\n\t\t<div class=\"booking-actions-popup__item-client-icon-container\">\n\t\t\t<div class=\"booking-actions-popup__item-client-icon\">\n\t\t\t\t<Icon :name=\"userIcon\" :size=\"personSize\" :color=\"iconColor\"/>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"booking-actions-popup__item-client-info --empty\">\n\t\t\t<div class=\"booking-actions-popup__item-client-info-label --empty\">\n\t\t\t\t{{ loc('BB_ACTIONS_POPUP_CLIENT_EMPTY_NAME_LABEL') }}\n\t\t\t</div>\n\t\t\t<div class=\"booking-actions-popup__item-client-info-empty\">\n\t\t\t\t<div></div>\n\t\t\t\t<div></div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclass=\"booking-actions-popup-item-buttons booking-actions-popup__item-client-info-btn\"\n\t\t\t\tref=\"clientButton\"\n\t\t\t>\n\t\t\t\t<Button\n\t\t\t\t\t:text=\"loc('BB_ACTIONS_POPUP_CLIENT_BTN_EMPTY_LABEL')\"\n\t\t\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t\t\t:color=\"ButtonColor.PRIMARY\"\n\t\t\t\t\t:icon=\"btnIcon\"\n\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t@click=\"showClientPopup\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<ClientPopup\n\t\t\t\tv-if=\"shownClientPopup\"\n\t\t\t\t:bindElement=\"this.$refs.clientButton\"\n\t\t\t\t@create=\"addClientsToBook\"\n\t\t\t\t@close=\"hideClientPopup\"\n\t\t\t/>\n\t\t</div>\n\t\t<div v-hint=\"soonHint\" class=\"booking-actions-popup__item-client-action\">\n\t\t\t<Icon :name=\"callIcon\" :size=\"iconSize\" :color=\"iconColor\"/>\n\t\t\t<Icon :name=\"messageIcon\" :size=\"iconSize\" :color=\"iconColor\"/>\n\t\t</div>\n\t`,\n};\n","import { ref } from 'ui.vue3';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.main';\n\nimport { Button, ButtonSize, ButtonColor, ButtonIcon } from 'booking.component.button';\nimport { CrmEntity, Model } from 'booking.const';\nimport { ClientPopup } from 'booking.component.client-popup';\nimport type { CurrentClient } from 'booking.component.client-popup';\nimport type { ClientData, ClientModel } from 'booking.model.clients';\n\nexport type UpdateClientsPayload = {\n\tid: number | string,\n\tclients: ClientData[],\n}\n\ntype OptionsDictionary = { [string]: string };\ntype EditClientButtonData = {\n\ticonSet: OptionsDictionary,\n\tbuttonSize: OptionsDictionary,\n\tbuttonColor: OptionsDictionary,\n\tbuttonIcon: OptionsDictionary,\n\tisClientPopupShowed: boolean,\n}\n\n// @vue/component\nexport const EditClientButton = {\n\tname: 'EditClientButton',\n\tcomponents: {\n\t\tClientPopup,\n\t\tButton,\n\t\tIcon,\n\t},\n\tprops: {\n\t\tid: {\n\t\t\ttype: [Number, Array],\n\t\t\trequired: true,\n\t\t},\n\t\t/**\n\t\t * @type ClientData\n\t\t */\n\t\tclients: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tdataElementPrefix: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tdataAttributes: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\temits: ['visible', 'invisible', 'updateClients'],\n\tsetup(): EditClientButtonData\n\t{\n\t\tconst iconSet = IconSet;\n\t\tconst buttonSize = ButtonSize;\n\t\tconst buttonColor = ButtonColor;\n\t\tconst buttonIcon = ButtonIcon;\n\t\tconst isClientPopupShowed = ref(false);\n\n\t\treturn {\n\t\t\ticonSet,\n\t\t\tbuttonSize,\n\t\t\tbuttonColor,\n\t\t\tbuttonIcon,\n\t\t\tisClientPopupShowed,\n\t\t};\n\t},\n\tcomputed: {\n\t\tgetClientByClientData(): (clientData: ClientData) => ClientModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Clients}/getByClientData`];\n\t\t},\n\t\tcurrentClient(): CurrentClient\n\t\t{\n\t\t\tconst getByClientData = this.getClientByClientData;\n\t\t\tconst client: { contact: ?ClientModel, company: ?ClientModel } = {\n\t\t\t\tcontact: null,\n\t\t\t\tcompany: null,\n\t\t\t};\n\n\t\t\t(this.clients || []).map((clientData) => getByClientData(clientData))\n\t\t\t\t.forEach((clientModel) => {\n\t\t\t\t\tif (clientModel.type.code === CrmEntity.Contact)\n\t\t\t\t\t{\n\t\t\t\t\t\tclient.contact = clientModel;\n\t\t\t\t\t}\n\t\t\t\t\telse if (clientModel.type.code === CrmEntity.Company)\n\t\t\t\t\t{\n\t\t\t\t\t\tclient.company = clientModel;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\treturn client;\n\t\t},\n\t},\n\tmethods: {\n\t\tupdateClient(clients: ClientData[]): void\n\t\t{\n\t\t\tthis.$emit('updateClients', {\n\t\t\t\tid: this.id,\n\t\t\t\tclients,\n\t\t\t});\n\t\t},\n\t\tshowPopup(): void\n\t\t{\n\t\t\tthis.isClientPopupShowed = true;\n\t\t\tthis.$emit('visible');\n\t\t},\n\t\tclosePopup(): void\n\t\t{\n\t\t\tthis.isClientPopupShowed = false;\n\t\t\tthis.$emit('invisible');\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Button\n\t\t\t:data-element=\"dataElementPrefix + '-menu-client-edit'\"\n\t\t\tv-bind=\"dataAttributes\"\n\t\t\t:size=\"buttonSize.EXTRA_SMALL\"\n\t\t\t:color=\"buttonColor.LIGHT\"\n\t\t\t:round=\"true\"\n\t\t\tref=\"editClientButton\"\n\t\t\t@click=\"showPopup\"\n\t\t>\n\t\t\t<Icon :name=\"iconSet.MORE\"/>\n\t\t</Button>\n\t\t<ClientPopup\n\t\t\tv-if=\"isClientPopupShowed\"\n\t\t\t:bind-element=\"$refs.editClientButton.$el\"\n\t\t\t:current-client=\"currentClient\"\n\t\t\t@create=\"updateClient\"\n\t\t\t@close=\"closePopup\"\n\t\t/>\n\t`,\n};\n","import { SidePanel as SidePanelMain } from 'main.sidepanel';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport { lazyload } from 'ui.vue3.directives.lazyload';\nimport { hint } from 'ui.vue3.directives.hint';\nimport 'ui.icon-set.main';\n\nimport { Button, ButtonSize, ButtonColor, ButtonIcon } from 'booking.component.button';\nimport { Loader } from 'booking.component.loader';\nimport type { ClientData, ClientModel } from 'booking.model.clients';\n\nimport { Note } from './note/note';\nimport { Empty } from './empty/empty';\nimport { EditClientButton } from './edit-client-button/edit-client-button';\nimport './client.css';\n\nexport type { AddClientsPayload } from './empty/empty';\nexport type { UpdateClientsPayload } from './edit-client-button/edit-client-button';\nexport type { UpdateNotePayload } from './note/note';\n\nconst SidePanel = SidePanelMain || BX.SidePanel;\n\n// @vue/component\nexport const Client = {\n\tname: 'ActionsPopupClient',\n\tdirectives: { lazyload, hint },\n\tcomponents: {\n\t\tButton,\n\t\tIcon,\n\t\tLoader,\n\t\tEmpty,\n\t\tNote,\n\t\tEditClientButton,\n\t},\n\tprops: {\n\t\tid: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\t/**\n\t\t * @type ClientData\n\t\t */\n\t\tprimaryClientData: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t\t/**\n\t\t * @type ClientData\n\t\t */\n\t\tclients: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tnote: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tdataId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: '',\n\t\t},\n\t\tdataElementPrefix: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tdataAttributes: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\temits: [\n\t\t'freeze',\n\t\t'unfreeze',\n\t\t'addClients',\n\t\t'updateClients',\n\t\t'updateNote',\n\t],\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tButtonIcon,\n\t\t\tisLoading: true,\n\t\t};\n\t},\n\tcomputed: {\n\t\tclient(): ClientModel | null\n\t\t{\n\t\t\tconst clientData: ClientData = this.primaryClientData;\n\n\t\t\treturn clientData ? this.$store.getters['clients/getByClientData'](clientData) : null;\n\t\t},\n\t\tclientPhone(): string\n\t\t{\n\t\t\tconst client: ClientModel = this.client;\n\n\t\t\treturn (\n\t\t\t\tclient.phones.length > 0\n\t\t\t\t\t? client.phones[0]\n\t\t\t\t\t: this.loc('BB_ACTIONS_POPUP_CLIENT_PHONE_LABEL')\n\t\t\t);\n\t\t},\n\t\tclientAvatar(): string\n\t\t{\n\t\t\tconst client: ClientModel = this.client;\n\n\t\t\treturn client.image;\n\t\t},\n\t\tclientStatus(): string\n\t\t{\n\t\t\tif (!this.client.isReturning)\n\t\t\t{\n\t\t\t\treturn this.loc('BB_ACTIONS_POPUP_CLIENT_STATUS_FIRST');\n\t\t\t}\n\n\t\t\treturn this.loc('BB_ACTIONS_POPUP_CLIENT_STATUS_RETURNING');\n\t\t},\n\t\tuserIcon(): string\n\t\t{\n\t\t\treturn IconSet.PERSON;\n\t\t},\n\t\tpersonSize(): number\n\t\t{\n\t\t\treturn 26;\n\t\t},\n\t\tcallIcon(): string\n\t\t{\n\t\t\treturn IconSet.TELEPHONY_HANDSET_1;\n\t\t},\n\t\tmessageIcon(): string\n\t\t{\n\t\t\treturn IconSet.CHATS_1;\n\t\t},\n\t\ticonSize(): number\n\t\t{\n\t\t\treturn 20;\n\t\t},\n\t\ticonColor(): string\n\t\t{\n\t\t\treturn 'var(--ui-color-palette-gray-20)';\n\t\t},\n\t\timageTypeClass(): string[] | string\n\t\t{\n\t\t\treturn '--user';\n\t\t},\n\t\tsoonHint(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('BOOKING_BOOKING_SOON_HINT'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\toffsetLeft: -60,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\tasync mounted()\n\t{\n\t\tthis.isLoading = false;\n\t},\n\tmethods: {\n\t\topenClient(): void\n\t\t{\n\t\t\tconst entity = this.client.type.code.toLowerCase();\n\n\t\t\tSidePanel.Instance.open(`/crm/${entity}/details/${this.client.id}/`);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"booking-actions-popup__item booking-actions-popup__item-client\">\n\t\t\t<div class=\"booking-actions-popup__item-client-client\">\n\t\t\t\t<Loader v-if=\"isLoading\" class=\"booking-actions-popup__item-client-loader\"/>\n\t\t\t\t<template v-else-if=\"client\">\n\t\t\t\t\t<div class=\"booking-actions-popup__item-client-icon-container\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"clientAvatar\"\n\t\t\t\t\t\t\tclass=\"booking-actions-popup-user__avatar\"\n\t\t\t\t\t\t\t:class=\"imageTypeClass\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tv-lazyload\n\t\t\t\t\t\t\t\t:data-lazyload-src=\"clientAvatar\"\n\t\t\t\t\t\t\t\tclass=\"booking-actions-popup-user__source\"\n\t\t\t\t\t\t\t\talt=\"user avatar\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-else class=\"booking-actions-popup__item-client-icon\">\n\t\t\t\t\t\t\t<Icon :name=\"userIcon\" :size=\"personSize\" :color=\"iconColor\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"booking-actions-popup__item-client-info\">\n\t\t\t\t\t\t<div class=\"booking-actions-popup__item-client-info-label\" :title=\"client.name\">\n\t\t\t\t\t\t\t{{ client.name }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"booking-actions-popup-item-info\">\n\t\t\t\t\t\t\t<div class=\"booking-actions-popup-item-subtitle\">\n\t\t\t\t\t\t\t\t{{ clientStatus }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"booking-actions-popup-item-subtitle\">\n\t\t\t\t\t\t\t\t{{ clientPhone }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"booking-actions-popup-item-buttons booking-actions-popup__item-client-info-btn\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-client-open'\"\n\t\t\t\t\t\t\t\tv-bind=\"dataAttributes\"\n\t\t\t\t\t\t\t\tclass=\"booking-actions-popup-item-client-open-button\"\n\t\t\t\t\t\t\t\t:text=\"loc('BB_ACTIONS_POPUP_CLIENT_BTN_LABEL')\"\n\t\t\t\t\t\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t\t\t:color=\"ButtonColor.LIGHT_BORDER\"\n\t\t\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\t\t\t@click=\"openClient\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<EditClientButton\n\t\t\t\t\t\t\t\t:id\n\t\t\t\t\t\t\t\t:clients\n\t\t\t\t\t\t\t\t:dataElementPrefix\n\t\t\t\t\t\t\t\t:dataAttributes\n\t\t\t\t\t\t\t\t@visible=\"$emit('freeze')\"\n\t\t\t\t\t\t\t\t@invisible=\"$emit('unfreeze')\"\n\t\t\t\t\t\t\t\t@updateClients=\"$emit('updateClients', $event)\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-hint=\"soonHint\" class=\"booking-actions-popup__item-client-action\">\n\t\t\t\t\t\t<Icon :name=\"callIcon\" :size=\"iconSize\" :color=\"iconColor\"/>\n\t\t\t\t\t\t<Icon :name=\"messageIcon\" :size=\"iconSize\" :color=\"iconColor\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<Empty\n\t\t\t\t\t\t:id\n\t\t\t\t\t\t@popupShown=\"$emit('freeze')\"\n\t\t\t\t\t\t@popupClosed=\"$emit('unfreeze')\"\n\t\t\t\t\t\t@addClients=\"$emit('addClients', $event)\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t\t<Note\n\t\t\t\t:id\n\t\t\t\t:dataId\n\t\t\t\t:dataElementPrefix\n\t\t\t\t:note\n\t\t\t\t:dataAttributes\n\t\t\t\t@popupShown=\"$emit('freeze')\"\n\t\t\t\t@popupClosed=\"$emit('unfreeze')\"\n\t\t\t\t@updateNote=\"$emit('updateNote', $event)\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { Event } from 'main.core';\nimport { MenuManager, Menu } from 'main.popup';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\n\nimport { Model } from 'booking.const';\nimport { Button, ButtonSize, ButtonColor, ButtonIcon } from 'booking.component.button';\nimport { limit } from 'booking.lib.limit';\n\nimport './confirmation-menu.css';\n\ntype ConfirmationMenuData = {\n\ticonSet: { [string]: string },\n\tbuttonSize: { [string]: string },\n\tbuttonColor: { [string]: string },\n\tbuttonIcon: { [string]: string },\n\tmenuPopup: Menu | null,\n}\n\nexport type UpdateConfirmationStatusPayload = {\n\tid: number | string;\n\tisConfirmed: boolean;\n}\n\nexport const ConfirmationMenu = {\n\tname: 'ConfirmationMenu',\n\temits: ['popupShown', 'popupClosed', 'updateConfirmationStatus'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tisConfirmed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdataId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: '',\n\t\t},\n\t\tdataElementPrefix: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tsetup(): ConfirmationMenuData\n\t{\n\t\tconst iconSet = IconSet;\n\t\tconst buttonSize = ButtonSize;\n\t\tconst buttonColor = ButtonColor;\n\t\tconst buttonIcon = ButtonIcon;\n\t\tconst menuPopup: Menu | null = null;\n\n\t\treturn {\n\t\t\ticonSet,\n\t\t\tbuttonSize,\n\t\t\tbuttonColor,\n\t\t\tbuttonIcon,\n\t\t\tmenuPopup,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tisFeatureEnabled: `${Model.Interface}/isFeatureEnabled`,\n\t\t}),\n\t\tpopupId(): string\n\t\t{\n\t\t\treturn `booking-confirmation-menu-${this.id}`;\n\t\t},\n\t},\n\tunmounted(): void\n\t{\n\t\tif (this.menuPopup)\n\t\t{\n\t\t\tthis.destroy();\n\t\t}\n\t},\n\tmethods: {\n\t\tupdateConfirmStatus(isConfirmed: boolean): void\n\t\t{\n\t\t\tthis.$emit('updateConfirmationStatus', {\n\t\t\t\tid: this.id,\n\t\t\t\tisConfirmed,\n\t\t\t});\n\t\t},\n\t\topenMenu(): void\n\t\t{\n\t\t\tif (!this.isFeatureEnabled)\n\t\t\t{\n\t\t\t\tlimit.show();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.disabled)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.menuPopup?.popupWindow?.isShown())\n\t\t\t{\n\t\t\t\tthis.destroy();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst menuButton = this.$refs.button.$el;\n\t\t\tthis.menuPopup = MenuManager.create(\n\t\t\t\tthis.popupId,\n\t\t\t\tmenuButton,\n\t\t\t\tthis.getMenuItems(),\n\t\t\t\t{\n\t\t\t\t\tclassName: 'booking-confirmation-menu-popup',\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\toffsetLeft: menuButton.offsetWidth - menuButton.offsetWidth / 2,\n\t\t\t\t\tangle: true,\n\t\t\t\t\tcacheable: true,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonClose: () => this.destroy(),\n\t\t\t\t\t\tonDestroy: () => this.unbindScrollEvent(),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t\tthis.menuPopup.show();\n\t\t\tthis.bindScrollEvent();\n\t\t\tthis.$emit('popupShown');\n\t\t},\n\t\tgetMenuItems(): Array\n\t\t{\n\t\t\tconst text = (\n\t\t\t\tthis.isConfirmed\n\t\t\t\t\t? this.loc('BB_ACTIONS_POPUP_CONFIRMATION_MENU_NOT_CONFIRMED')\n\t\t\t\t\t: this.loc('BB_ACTIONS_POPUP_CONFIRMATION_MENU_CONFIRMED')\n\t\t\t);\n\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\ttext,\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.updateConfirmStatus(!this.isConfirmed);\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\tdestroy(): void\n\t\t{\n\t\t\tMenuManager.destroy(this.popupId);\n\t\t\tthis.unbindScrollEvent();\n\t\t\tthis.$emit('popupClosed');\n\t\t},\n\t\tbindScrollEvent(): void\n\t\t{\n\t\t\tEvent.bind(document, 'scroll', this.adjustPosition, { capture: true });\n\t\t},\n\t\tunbindScrollEvent(): void\n\t\t{\n\t\t\tEvent.unbind(document, 'scroll', this.adjustPosition, { capture: true });\n\t\t},\n\t\tadjustPosition(): void\n\t\t{\n\t\t\tthis.menuPopup?.popupWindow?.adjustPosition();\n\t\t},\n\t},\n\tcomponents: {\n\t\tIcon,\n\t\tButton,\n\t},\n\ttemplate: `\n\t\t<Button\n\t\t\t:data-booking-id=\"dataId\"\n\t\t\t:data-element=\"dataElementPrefix + '-menu-confirmation-button'\"\n\t\t\tclass=\"booking-actions-popup-button-with-chevron\"\n\t\t\t:class=\"{'--lock': !isFeatureEnabled || disabled}\"\n\t\t\tbuttonClass=\"ui-btn-shadow\"\n\t\t\t:disabled=\"disabled || !isFeatureEnabled\"\n\t\t\t:text=\"loc('BB_ACTIONS_POPUP_CONFIRMATION_BTN_LABEL')\"\n\t\t\t:size=\"buttonSize.EXTRA_SMALL\"\n\t\t\t:color=\"buttonColor.LIGHT\"\n\t\t\t:round=\"true\"\n\t\t\tref=\"button\"\n\t\t\t@click=\"openMenu\"\n\t\t>\n\t\t\t<Icon v-if=\"isFeatureEnabled\" :name=\"iconSet.CHEVRON_DOWN\"/>\n\t\t\t<Icon v-else :name=\"iconSet.LOCK\"/>\n\t\t</Button>\n\t`,\n};\n","import { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport { ref } from 'ui.vue3';\n\nimport { Loader } from 'booking.component.loader';\nimport { BookingCounterType, HelpDesk } from 'booking.const';\nimport { helpDesk } from 'booking.lib.help-desk';\nimport type { BookingCounter } from 'booking.model.bookings';\n\nimport { ConfirmationMenu } from './confirmation-menu/confirmation-menu';\nimport type { UpdateConfirmationStatusPayload } from './confirmation-menu/confirmation-menu';\nimport './confirmation.css';\n\nexport type { UpdateConfirmationStatusPayload };\n\ntype OptionsDictionary = { [string]: string };\ntype ConfirmationData = {\n\ticonSet: OptionsDictionary,\n\tisLoading: boolean,\n}\n\ntype CounterValue = BookingCounter['value'];\n\nexport const Confirmation = {\n\tname: 'ActionsPopupConfirmation',\n\temits: ['open', 'close', 'updateConfirmationStatus'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tisConfirmed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\t/**\n\t\t * @type BookingCounter[]\n\t\t */\n\t\tcounters: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdataId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: '',\n\t\t},\n\t\tdataElementPrefix: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tsetup(): ConfirmationData\n\t{\n\t\tconst iconSet = IconSet;\n\t\tconst isLoading = ref(true);\n\n\t\treturn {\n\t\t\ticonSet,\n\t\t\tisLoading,\n\t\t};\n\t},\n\tasync mounted()\n\t{\n\t\tthis.isLoading = false;\n\t},\n\tcomputed: {\n\t\tdelayedCounter(): CounterValue\n\t\t{\n\t\t\treturn this.counters\n\t\t\t\t.find((counter) => counter.type === BookingCounterType.Delayed)?.value;\n\t\t},\n\t\tunconfirmedCounter(): CounterValue\n\t\t{\n\t\t\treturn this.counters\n\t\t\t\t.find((counter) => counter.type === BookingCounterType.Unconfirmed)?.value;\n\t\t},\n\t\ticonColor(): string\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.isConfirmed === false\n\t\t\t\t&& !this.unconfirmedCounter\n\t\t\t\t&& !this.delayedCounter\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn '#BDC1C6';\n\t\t\t}\n\n\t\t\treturn '#ffffff';\n\t\t},\n\t\tstateClass(): string\n\t\t{\n\t\t\tif (this.isConfirmed)\n\t\t\t{\n\t\t\t\treturn '--confirmed';\n\t\t\t}\n\n\t\t\tif (this.unconfirmedCounter)\n\t\t\t{\n\t\t\t\treturn '--not-confirmed';\n\t\t\t}\n\n\t\t\tif (this.delayedCounter)\n\t\t\t{\n\t\t\t\treturn '--delayed';\n\t\t\t}\n\n\t\t\treturn '--awaiting';\n\t\t},\n\t\tstateText(): string\n\t\t{\n\t\t\tif (this.isConfirmed)\n\t\t\t{\n\t\t\t\treturn this.loc('BB_ACTIONS_POPUP_CONFIRMATION_CONFIRMED');\n\t\t\t}\n\n\t\t\tif (this.unconfirmedCounter)\n\t\t\t{\n\t\t\t\treturn this.loc('BB_ACTIONS_POPUP_CONFIRMATION_NOT_CONFIRMED');\n\t\t\t}\n\n\t\t\tif (this.delayedCounter)\n\t\t\t{\n\t\t\t\treturn this.loc('BB_ACTIONS_POPUP_CONFIRMATION_DELAYED');\n\t\t\t}\n\n\t\t\treturn this.loc('BB_ACTIONS_POPUP_CONFIRMATION_AWAITING');\n\t\t},\n\t\thasBtnCounter(): boolean\n\t\t{\n\t\t\tif (this.isConfirmed)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn Boolean(this.unconfirmedCounter || this.delayedCounter);\n\t\t},\n\t},\n\tmethods: {\n\t\tshowHelpDesk(): void\n\t\t{\n\t\t\thelpDesk.show(\n\t\t\t\tHelpDesk.BookingActionsConfirmation.code,\n\t\t\t\tHelpDesk.BookingActionsConfirmation.anchorCode,\n\t\t\t);\n\t\t},\n\t},\n\tcomponents: {\n\t\tIcon,\n\t\tLoader,\n\t\tConfirmationMenu,\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"booking-actions-popup__item booking-actions-popup__item-confirmation-content\"\n\t\t\t:class=\"{ '--disabled': disabled }\"\n\t\t>\n\t\t\t<Loader v-if=\"isLoading\" class=\"booking-actions-popup__item-confirmation-loader\"/>\n\t\t\t<template v-else>\n\t\t\t\t<div :class=\"['booking-actions-popup-item-icon', stateClass]\">\n\t\t\t\t\t<Icon :name=\"iconSet.CHECK\" :color=\"iconColor\"/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-actions-popup-item-info\">\n\t\t\t\t\t<div class=\"booking-actions-popup-item-title\">\n\t\t\t\t\t\t<span>{{ loc('BB_ACTIONS_POPUP_CONFIRMATION_LABEL') }}</span>\n\t\t\t\t\t\t<Icon :name=\"iconSet.HELP\" @click=\"showHelpDesk\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\t:class=\"['booking-actions-popup-item-subtitle', stateClass]\"\n\t\t\t\t\t\tdata-element=\"booking-menu-confirmation-status\"\n\t\t\t\t\t\t:data-booking-id=\"dataId\"\n\t\t\t\t\t\t:data-confirmed=\"isConfirmed\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ stateText }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-actions-popup-item-buttons\">\n\t\t\t\t\t<ConfirmationMenu\n\t\t\t\t\t\t:id\n\t\t\t\t\t\t:isConfirmed\n\t\t\t\t\t\t:disabled\n\t\t\t\t\t\t:dataId\n\t\t\t\t\t\t:dataElementPrefix\n\t\t\t\t\t\t@popupShown=\"$emit('open')\"\n\t\t\t\t\t\t@popupClosed=\"$emit('close')\"\n\t\t\t\t\t\t@updateConfirmationStatus=\"$emit('updateConfirmationStatus', $event)\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"hasBtnCounter\"\n\t\t\t\t\t\tclass=\"booking-actions-popup-item-buttons-counter\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t`,\n};\n","import { Event, Runtime } from 'main.core';\nimport { DateTimeFormat } from 'main.date';\nimport { Menu, MenuManager } from 'main.popup';\nimport type { MenuItemOptions } from 'main.popup';\n\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { Dialog } from 'ui.entity-selector';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.main';\n\nimport { EntitySelectorEntity, HelpDesk, Model } from 'booking.const';\nimport { limit } from 'booking.lib.limit';\nimport { helpDesk } from 'booking.lib.help-desk';\nimport { DealHelper } from 'booking.lib.deal-helper';\nimport { Button, ButtonSize, ButtonColor, ButtonIcon } from 'booking.component.button';\nimport { Loader } from 'booking.component.loader';\nimport type { DealData } from 'booking.model.bookings';\n\nimport './deal.css';\n\n// @vue/component\nexport const Deal = {\n\tname: 'ActionsPopupDeal',\n\tcomponents: {\n\t\tButton,\n\t\tIcon,\n\t\tLoader,\n\t},\n\tprops: {\n\t\t/**\n\t\t * @type DealData\n\t\t */\n\t\tdeal: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t\tdealHelper: {\n\t\t\ttype: DealHelper,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdataId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: '',\n\t\t},\n\t\tdataElementPrefix: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tdataAttributes: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\temits: ['freeze', 'unfreeze'],\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tIconSet,\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tButtonIcon,\n\t\t\tisLoading: false,\n\t\t\tsaveDealDebounce: Runtime.debounce(this.saveDeal, 10, this),\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tisFeatureEnabled: `${Model.Interface}/isFeatureEnabled`,\n\t\t}),\n\t\tmenuId(): string\n\t\t{\n\t\t\treturn `${this.dataElementPrefix}-actions-popup-deal-menu-${this.dataId}`;\n\t\t},\n\t\tdateFormatted(): string\n\t\t{\n\t\t\tif (!this.deal.data.createdTimestamp)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tconst format = DateTimeFormat.getFormat('DAY_MONTH_FORMAT');\n\n\t\t\treturn DateTimeFormat.format(format, this.deal.data.createdTimestamp);\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tthis.dialog = new Dialog({\n\t\t\tcontext: 'BOOKING',\n\t\t\tmultiple: false,\n\t\t\ttargetNode: this.getDialogButton(),\n\t\t\twidth: 340,\n\t\t\theight: 340,\n\t\t\tenableSearch: true,\n\t\t\tdropdownMode: true,\n\t\t\tpreselectedItems: this.deal ? [[EntitySelectorEntity.Deal, this.deal.value]] : [],\n\t\t\tentities: [\n\t\t\t\t{\n\t\t\t\t\tid: EntitySelectorEntity.Deal,\n\t\t\t\t\tdynamicLoad: true,\n\t\t\t\t\tdynamicSearch: true,\n\t\t\t\t},\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tonShow: this.freeze,\n\t\t\t\tonHide: this.unfreeze,\n\t\t\t\t'Item:onSelect': this.itemChange,\n\t\t\t\t'Item:onDeselect': this.itemChange,\n\t\t\t},\n\t\t});\n\n\t\tEvent.bind(document, 'scroll', this.adjustPosition, true);\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tEvent.unbind(document, 'scroll', this.adjustPosition, true);\n\t},\n\tmethods: {\n\t\tfreeze(): void\n\t\t{\n\t\t\tthis.$emit('freeze');\n\t\t},\n\t\tunfreeze(): void\n\t\t{\n\t\t\tif (this.dialog?.isOpen() || this.getMenu()?.getPopupWindow().isShown())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('unfreeze');\n\t\t},\n\t\tcreateDeal(): void\n\t\t{\n\t\t\tif (!this.isFeatureEnabled)\n\t\t\t{\n\t\t\t\tvoid limit.show();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.dealHelper.createDeal();\n\t\t},\n\t\tshowMenu(): void\n\t\t{\n\t\t\tif (!this.isFeatureEnabled)\n\t\t\t{\n\t\t\t\tvoid limit.show();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst bindElement = this.$refs.moreButton.$el;\n\t\t\tMenuManager.destroy(this.menuId);\n\t\t\tMenuManager.show({\n\t\t\t\tid: this.menuId,\n\t\t\t\tbindElement,\n\t\t\t\titems: this.getMenuItems(),\n\t\t\t\toffsetLeft: bindElement.offsetWidth / 2,\n\t\t\t\tangle: true,\n\t\t\t\tevents: {\n\t\t\t\t\tonShow: this.freeze,\n\t\t\t\t\tonAfterClose: this.unfreeze,\n\t\t\t\t\tonDestroy: this.unfreeze,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tgetMenuItems(): MenuItemOptions[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\ttext: this.loc('BB_ACTIONS_POPUP_DEAL_CHANGE'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.showDealDialog();\n\t\t\t\t\t\tthis.getMenu().close();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: this.loc('BB_ACTIONS_POPUP_DEAL_CLEAR'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.dialog?.deselectAll();\n\t\t\t\t\t\tthis.saveDealDebounce(null);\n\t\t\t\t\t\tthis.getMenu().close();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\tshowDealDialog(): void\n\t\t{\n\t\t\tif (!this.isFeatureEnabled)\n\t\t\t{\n\t\t\t\tvoid limit.show();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.dialog.setTargetNode(this.getDialogButton());\n\t\t\tthis.dialog.show();\n\t\t},\n\t\tadjustPosition(): void\n\t\t{\n\t\t\tthis.dialog.setTargetNode(this.getDialogButton());\n\t\t\tthis.dialog.adjustPosition();\n\t\t\tthis.getMenu()?.getPopupWindow().adjustPosition();\n\t\t},\n\t\tgetMenu(): Menu | null\n\t\t{\n\t\t\treturn MenuManager.getMenuById(this.menuId);\n\t\t},\n\t\topenDeal(): void\n\t\t{\n\t\t\tthis.dealHelper.openDeal();\n\t\t},\n\t\titemChange(): void\n\t\t{\n\t\t\tconst dealData = this.getDealData();\n\n\t\t\tthis.saveDealDebounce(dealData);\n\n\t\t\tthis.dialog.hide();\n\t\t},\n\t\tgetDealData(): DealData | null\n\t\t{\n\t\t\tconst item = this.dialog.getSelectedItems()[0];\n\t\t\tif (!item)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.dealHelper.mapEntityInfoToDeal(item.getCustomData().get('entityInfo'));\n\t\t},\n\t\tsaveDeal(dealData: DealData | null): void\n\t\t{\n\t\t\tthis.dealHelper.saveDeal(dealData);\n\t\t},\n\t\tgetDialogButton(): HTMLElement\n\t\t{\n\t\t\treturn this.deal ? this.$refs.moreButton.$el : this.$refs.addButton.$el;\n\t\t},\n\t\tshowHelpDesk(): void\n\t\t{\n\t\t\thelpDesk.show(\n\t\t\t\tHelpDesk.BookingActionsDeal.code,\n\t\t\t\tHelpDesk.BookingActionsDeal.anchorCode,\n\t\t\t);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"booking-actions-popup__item booking-actions-popup__item-deal-content\"\n\t\t\t:class=\"{ '--active': deal }\"\n\t\t>\n\t\t\t<Loader v-if=\"isLoading\" class=\"booking-actions-popup__item-deal-loader\" />\n\t\t\t<template v-else>\n\t\t\t\t<div class=\"booking-actions-popup__item-deal\">\n\t\t\t\t\t<div class=\"booking-actions-popup-item-icon\">\n\t\t\t\t\t\t<Icon :name=\"IconSet.DEAL\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"booking-actions-popup-item-info\">\n\t\t\t\t\t\t<div class=\"booking-actions-popup-item-title\">\n\t\t\t\t\t\t\t<span>{{ loc('BB_ACTIONS_POPUP_DEAL_LABEL') }}</span>\n\t\t\t\t\t\t\t<Icon :name=\"IconSet.HELP\" @click=\"showHelpDesk\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<template v-if=\"deal\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"booking-actions-popup__item-deal-profit\"\n\t\t\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-deal-profit'\"\n\t\t\t\t\t\t\t\t:data-profit=\"deal.data.opportunity\"\n\t\t\t\t\t\t\t\tv-bind=\"dataAttributes\"\n\t\t\t\t\t\t\t\tv-html=\"deal.data.formattedOpportunity\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"booking-actions-popup-item-subtitle\"\n\t\t\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-deal-ts'\"\n\t\t\t\t\t\t\t\t:data-ts=\"deal.data.createdTimestamp * 1000\"\n\t\t\t\t\t\t\t\tv-bind=\"dataAttributes\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ dateFormatted }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<div class=\"booking-actions-popup-item-subtitle\">\n\t\t\t\t\t\t\t\t{{ loc('BB_ACTIONS_POPUP_DEAL_ADD_LABEL') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-actions-popup-item-buttons\">\n\t\t\t\t\t<template v-if=\"deal\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-deal-open-button'\"\n\t\t\t\t\t\t\tv-bind=\"dataAttributes\"\n\t\t\t\t\t\t\tbuttonClass=\"ui-btn-shadow\"\n\t\t\t\t\t\t\t:text=\"loc('BB_ACTIONS_POPUP_DEAL_OPEN')\"\n\t\t\t\t\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t\t:color=\"ButtonColor.LIGHT\"\n\t\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\t\t@click=\"openDeal\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-deal-more-button'\"\n\t\t\t\t\t\t\tv-bind=\"dataAttributes\"\n\t\t\t\t\t\t\tbuttonClass=\"ui-btn-shadow\"\n\t\t\t\t\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t\t:color=\"ButtonColor.LIGHT\"\n\t\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\t\tref=\"moreButton\"\n\t\t\t\t\t\t\t@click=\"showMenu\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Icon :name=\"IconSet.MORE\"/>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-deal-create-button'\"\n\t\t\t\t\t\t\tv-bind=\"dataAttributes\"\n\t\t\t\t\t\t\tclass=\"booking-actions-popup-plus-button\"\n\t\t\t\t\t\t\t:class=\"{'--lock': !isFeatureEnabled}\"\n\t\t\t\t\t\t\tbuttonClass=\"ui-btn-shadow\"\n\t\t\t\t\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t\t:color=\"ButtonColor.LIGHT\"\n\t\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\t\t@click=\"createDeal\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Icon v-if=\"isFeatureEnabled\" :name=\"IconSet.PLUS_30\"/>\n\t\t\t\t\t\t\t<Icon v-else :name=\"IconSet.LOCK\"/>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclass=\"booking-menu-deal-add-button\"\n\t\t\t\t\t\t\t:class=\"{'--lock': !isFeatureEnabled}\"\n\t\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-deal-add-button'\"\n\t\t\t\t\t\t\tv-bind=\"dataAttributes\"\n\t\t\t\t\t\t\tbuttonClass=\"ui-btn-shadow\"\n\t\t\t\t\t\t\t:text=\"loc('BB_ACTIONS_POPUP_DEAL_BTN_LABEL')\"\n\t\t\t\t\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t\t:color=\"ButtonColor.LIGHT\"\n\t\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\t\tref=\"addButton\"\n\t\t\t\t\t\t\t@click=\"showDealDialog\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Icon v-if=\"!isFeatureEnabled\" :name=\"IconSet.LOCK\"/>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t`,\n};\n","import { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.main';\n\nimport { Button, ButtonSize, ButtonColor, ButtonIcon } from 'booking.component.button';\nimport { Loader } from 'booking.component.loader';\nimport { bookingActionsService } from 'booking.provider.service.booking-actions-service';\n\nimport './document.css';\n\ntype OptionsDictionary = { [string]: string };\ntype DocumentData = {\n\ticonSet: OptionsDictionary,\n\tbuttonSize: OptionsDictionary,\n\tbuttonColor: OptionsDictionary,\n\tbuttonIcon: OptionsDictionary,\n}\n\nexport const Document = {\n\tname: 'ActionsPopupDocument',\n\temits: ['link'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdataId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: '',\n\t\t},\n\t\tdataElementPrefix: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tsetup(): DocumentData\n\t{\n\t\tconst iconSet = IconSet;\n\t\tconst buttonSize = ButtonSize;\n\t\tconst buttonColor = ButtonColor;\n\t\tconst buttonIcon = ButtonIcon;\n\n\t\treturn {\n\t\t\ticonSet,\n\t\t\tbuttonSize,\n\t\t\tbuttonColor,\n\t\t\tbuttonIcon,\n\t\t};\n\t},\n\tasync mounted()\n\t{\n\t\tawait bookingActionsService.getDocData();\n\n\t\tthis.isLoading = false;\n\t},\n\tmethods: {\n\t\tlinkDoc(): void\n\t\t{\n\t\t\tthis.$emit('link');\n\t\t},\n\t},\n\tcomponents: {\n\t\tButton,\n\t\tIcon,\n\t\tLoader,\n\t},\n\ttemplate: `\n\t\t<div class=\"booking-actions-popup__item booking-actions-popup__item-doc-content --disabled\">\n\t\t\t<Loader v-if=\"loading\" class=\"booking-actions-popup__item-doc-loader\"/>\n\t\t\t<template v-else>\n\t\t\t\t<div class=\"booking-actions-popup__item-doc\">\n\t\t\t\t\t<div class=\"booking-actions-popup-item-icon\">\n\t\t\t\t\t\t<Icon :name=\"iconSet.DOCUMENT\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"booking-actions-popup-item-info\">\n\t\t\t\t\t\t<div class=\"booking-actions-popup-item-title\">\n\t\t\t\t\t\t\t<span>{{ loc('BB_ACTIONS_POPUP_DOC_LABEL') }}</span>\n\t\t\t\t\t\t\t<Icon :name=\"iconSet.HELP\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"booking-actions-popup-item-subtitle\">\n\t\t\t\t\t\t\t{{ loc('BB_ACTIONS_POPUP_DOC_ADD_LABEL') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-actions-popup-item-buttons\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclass=\"booking-actions-popup-plus-button\"\n\t\t\t\t\t\tbuttonClass=\"ui-btn-shadow\"\n\t\t\t\t\t\t:size=\"buttonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t:color=\"buttonColor.LIGHT\"\n\t\t\t\t\t\t:disabled=\"disabled\"\n\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon :name=\"iconSet.PLUS_30\"/>\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tbuttonClass=\"ui-btn-shadow\"\n\t\t\t\t\t\t:text=\"loc('BB_ACTIONS_POPUP_DOC_BTN_LABEL')\"\n\t\t\t\t\t\t:size=\"buttonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t:color=\"buttonColor.LIGHT\"\n\t\t\t\t\t\t:disabled=\"disabled\"\n\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\t@click=\"linkDoc\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<div class=\"booking-booking-actions-popup-label\">\n\t\t\t\t{{ loc('BB_ACTIONS_POPUP_LABEL_SOON') }}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Dialog, Item, type ItemOptions } from 'ui.entity-selector';\nimport { mapGetters } from 'ui.vue3.vuex';\n\nimport { EntitySelectorEntity, EntitySelectorTab, Model } from 'booking.const';\nimport { resourceDialogService } from 'booking.provider.service.resource-dialog-service';\nimport type { BookingModel } from 'booking.model.bookings';\nimport type { ResourceModel } from 'booking.model.resources';\n\n// @vue/component\nexport const ExtraResourcesDialog = {\n\tname: 'ExtraResourcesDialog',\n\tprops: {\n\t\t/**\n\t\t * @type {BookingModel}\n\t\t */\n\t\tbooking: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tresourceId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['save'],\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tresources: `${Model.Resources}/get`,\n\t\t\tselectedDateTs: `${Model.Interface}/selectedDateTs`,\n\t\t\tgetByInterval: `${Model.Bookings}/getByInterval`,\n\t\t}),\n\t\textraResourcesIds(): number[]\n\t\t{\n\t\t\treturn this.booking.resourcesIds.filter((resourceId) => resourceId !== this.resourceId);\n\t\t},\n\t\tbookings(): BookingModel[]\n\t\t{\n\t\t\treturn this.getByInterval(this.booking.dateFromTs, this.booking.dateToTs);\n\t\t},\n\t\tresourceBookingsMap(): Map<number, Array<number | string>>\n\t\t{\n\t\t\tconst map: Map<number, Array<number | string>> = new Map();\n\t\t\tconst bookingId = this.booking.id;\n\n\t\t\tthis.bookings\n\t\t\t\t.filter((booking) => booking.id !== bookingId)\n\t\t\t\t.forEach((booking) => {\n\t\t\t\t\tbooking.resourcesIds.forEach((resourceId) => {\n\t\t\t\t\t\tconst resourceBookingIds = map.get(resourceId) || [];\n\t\t\t\t\t\tresourceBookingIds.push(booking.id);\n\t\t\t\t\t\tmap.set(resourceId, resourceBookingIds);\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\treturn map;\n\t\t},\n\t\texcludedResourceIds(): Set<number>\n\t\t{\n\t\t\treturn new Set([this.resourceId]);\n\t\t},\n\t},\n\twatch: {\n\t\tresources(resources): void\n\t\t{\n\t\t\tthis.addItems(resources);\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tvoid this.loadResources();\n\t},\n\tmounted(): void\n\t{\n\t\tthis.dialog = new Dialog({\n\t\t\tid: `booking-booking-extra-resources-selector-${this.booking.id}`,\n\t\t\ttargetNode: this.$refs.dialog,\n\t\t\tpreselectedItems: this.extraResourcesIds.map((id: number) => [EntitySelectorEntity.Resource, id]),\n\t\t\twidth: 340,\n\t\t\theight: Math.min(window.innerHeight - 380, 400),\n\t\t\tdropdownMode: true,\n\t\t\tentities: [\n\t\t\t\t{\n\t\t\t\t\tid: EntitySelectorEntity.Resource,\n\t\t\t\t\tdynamicLoad: true,\n\t\t\t\t\tdynamicSearch: true,\n\t\t\t\t},\n\t\t\t],\n\t\t\tpopupOptions: {\n\t\t\t\tid: `booking-actions-popup-extra-resources-dialog-${this.booking.id}-${this.resourceId}`,\n\t\t\t\tclassName: 'booking--booking--actions-popup--extra-resources-info--extra-resources-dialog',\n\t\t\t},\n\t\t\tenableSearch: true,\n\t\t\tsearchOptions: {\n\t\t\t\tallowCreateItem: false,\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonLoad: (): void => {\n\t\t\t\t\tthis.addItems(this.resources);\n\t\t\t\t},\n\t\t\t\tonHide: (): void => {\n\t\t\t\t\tconst selectedItemIds = this.dialog.getSelectedItems().map((item) => item.id);\n\t\t\t\t\tselectedItemIds.push(this.resourceId);\n\n\t\t\t\t\tthis.$emit('save', selectedItemIds);\n\t\t\t\t},\n\t\t\t\t'Item:onBeforeSelect': (event): void => {\n\t\t\t\t\tconst item = event.data.item;\n\t\t\t\t\tif ((this.resourceBookingsMap.get(item.id) || []).length > 1)\n\t\t\t\t\t{\n\t\t\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\t\t\tevent.defaultPrevented = true;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tthis.dialog.show();\n\t},\n\tunmounted()\n\t{\n\t\tthis.dialog?.destroy?.();\n\t},\n\tmethods: {\n\t\tasync loadResources(): Promise<void>\n\t\t{\n\t\t\tawait resourceDialogService.fillDialog(this.selectedDateTs / 1000);\n\t\t},\n\t\tgetItemOptions(resource: ResourceModel): ItemOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: resource.id,\n\t\t\t\tentityId: EntitySelectorEntity.Resource,\n\t\t\t\ttitle: resource.name,\n\t\t\t\tsubtitle: '',\n\t\t\t\tavatar: '/bitrix/js/booking/component/actions-popup/images/extra-resource-icon.svg',\n\t\t\t\tavatarOptions: {\n\t\t\t\t\tbgImage: '/bitrix/js/booking/component/actions-popup/images/extra-resource-icon.svg',\n\t\t\t\t\tbgColor: 'rgba(230, 244, 255, 1)',\n\t\t\t\t\tborderRadius: '50%',\n\t\t\t\t},\n\t\t\t\ttabs: EntitySelectorTab.Recent,\n\t\t\t\tselected: this.isItemSelected(resource.id),\n\t\t\t\tdeselectable: !this.excludedResourceIds.has(resource.id),\n\t\t\t\tnodeAttributes: {\n\t\t\t\t\t'data-id': `${this.booking.id}-${resource.id}`,\n\t\t\t\t\t'data-element': 'booking-extra-resources-dialog-item',\n\t\t\t\t},\n\t\t\t\tbadges: [this.getItemBadge(resource)],\n\t\t\t\tbadgesOptions: {\n\t\t\t\t\tjustifyContent: 'right',\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tisItemSelected(id: number): boolean\n\t\t{\n\t\t\treturn this.extraResourcesIds.includes(id);\n\t\t},\n\t\tgetItemBadge(resource: ResourceModel): Object\n\t\t{\n\t\t\tconst resourceBookingsCount = (this.resourceBookingsMap.get(resource.id) || []).length;\n\n\t\t\tif (resourceBookingsCount >= 2)\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\ttitle: this.loc('BOOKING_ACTIONS_POPUP_EXTRA_RESOURCES_INFO_RESOURCE_SELECTOR_BADGE_BUSY'),\n\t\t\t\t\ttextColor: 'rgba(255, 255, 255, 1)',\n\t\t\t\t\tbgColor: '#e92f2a',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (resourceBookingsCount > 0)\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\ttitle: this.loc('BOOKING_ACTIONS_POPUP_EXTRA_RESOURCES_INFO_RESOURCE_SELECTOR_BADGE_OVERBOOKING'),\n\t\t\t\t\ttextColor: 'rgba(255, 255, 255, 1)',\n\t\t\t\t\tbgColor: 'rgba(250, 167, 44, 1)',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {};\n\t\t},\n\t\taddItems(resources: ResourceModel[]): void\n\t\t{\n\t\t\tconst itemsOptions: { [id: number]: ItemOptions } = resources\n\t\t\t\t.filter(({ id }) => !this.excludedResourceIds.has(id))\n\t\t\t\t.reduce((acc, resource: ResourceModel) => ({\n\t\t\t\t\t...acc,\n\t\t\t\t\t[resource.id]: this.getItemOptions(resource),\n\t\t\t\t}), {});\n\n\t\t\tObject.values(itemsOptions).forEach((itemOptions: ItemOptions) => this.dialog.addItem(itemOptions));\n\n\t\t\tconst itemsIds = this.dialog.getItems()\n\t\t\t\t.map((item: Item) => item.getId())\n\t\t\t\t.filter((id: number) => itemsOptions[id]);\n\n\t\t\tthis.dialog.removeItems();\n\t\t\titemsIds.forEach((id: number) => this.dialog.addItem(itemsOptions[id]));\n\n\t\t\tconst tab = this.dialog.getActiveTab();\n\t\t\tif (tab)\n\t\t\t{\n\t\t\t\ttab.getContainer().append(tab.getRootNode().getChildrenContainer());\n\t\t\t\ttab.render();\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div ref=\"dialog\"></div>\n\t`,\n};\n","import { BIcon as Icon, Outline } from 'ui.icon-set.api.vue';\nimport { Label, LabelColor, LabelSize } from 'ui.label';\n\n// @vue/component\nexport const ExtraResourcesInfoPopupItem = {\n\tname: 'ExtraResourcesInfoPopupItem',\n\tcomponents: {\n\t\tIcon,\n\t},\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\toverbooking: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): ExtraResourcesInfoPopupItemData\n\t{\n\t\tconst iconColor = 'var(--ui-color-accent-main-primary)';\n\t\tconst iconSize = 16;\n\n\t\treturn {\n\t\t\tOutline,\n\t\t\ticonColor,\n\t\t\ticonSize,\n\t\t};\n\t},\n\tcomputed: {\n\t\tlabelHTML(): string {\n\t\t\tconst label = new Label({\n\t\t\t\tcolor: LabelColor.WARNING,\n\t\t\t\tsize: LabelSize.SM,\n\t\t\t\ttext: this.loc('BOOKING_ACTIONS_POPUP_EXTRA_RESOURCES_INFO_OVERBOOKING'),\n\t\t\t\tfill: true,\n\t\t\t});\n\n\t\t\treturn label.render().outerHTML;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"booking--extra-resources-info_element\">\n\t\t\t<div class=\"booking--extra-resources-info_element-icon —ui-context-content-light\">\n\t\t\t\t<Icon :name=\"Outline.PRODUCT\" :size=\"iconSize\" :color=\"iconColor\"/>\n\t\t\t</div>\n\n\t\t\t<div class=\"booking--extra-resources-info_element-text\" :title=\"title\">\n\t\t\t\t{{ title }}\n\t\t\t</div>\n\n\t\t\t<div \n\t\t\t\tv-if=\"overbooking\"\n\t\t\t\tclass=\"booking--extra-resources-info_element-overbooking\"\n\t\t\t\t v-html=\"labelHTML\"\n\t\t\t></div>\n\t\t</div>\n\t`,\n};\n\ntype ExtraResourcesInfoPopupItemData = {\n\ticonColor: string;\n\ticonSize: number;\n};\n","import { mapGetters } from 'ui.vue3.vuex';\nimport { PopupOptions } from 'main.popup';\n\nimport { Model } from 'booking.const';\nimport { Popup } from 'booking.component.popup';\nimport type { BookingModel } from 'booking.model.bookings';\nimport type { ResourceModel } from 'booking.model.resources';\n\nimport { ExtraResourcesInfoPopupItem } from './extra-resources-info-popup-item';\n\n// @vue/component\nexport const ExtraResourcesInfoPopup = {\n\tname: 'ExtraResourcesInfoPopup',\n\tcomponents: {\n\t\tPopup,\n\t\tExtraResourcesInfoPopupItem,\n\t},\n\tprops: {\n\t\tvisible: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tbindElement: {\n\t\t\ttype: HTMLElement,\n\t\t\trequired: true,\n\t\t},\n\t\tresourceId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\t/**\n\t\t * @type {BookingModel}\n\t\t */\n\t\tbooking: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['update:visible'],\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tgetResourcesByIds: `${Model.Resources}/getByIds`,\n\t\t\tgetByInterval: `${Model.Bookings}/getByInterval`,\n\t\t}),\n\t\tconfig(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\toffsetTop: 10,\n\t\t\t\toffsetLeft: -65,\n\t\t\t\tpadding: 14,\n\t\t\t\tcontentPadding: 30,\n\t\t\t\theight: 300,\n\t\t\t\twidth: 340,\n\t\t\t\tminWidth: 340,\n\t\t\t\tmaxWidth: 400,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceBindPosition: true,\n\t\t\t\t\tposition: 'bottom',\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tresources(): ResourceModel[]\n\t\t{\n\t\t\tconst extraResourceIds = this.booking.resourcesIds.filter((resourceId) => resourceId !== this.resourceId);\n\n\t\t\treturn this.getResourcesByIds(extraResourceIds);\n\t\t},\n\t\tbookings(): BookingModel[]\n\t\t{\n\t\t\treturn this.getByInterval(this.booking.dateFromTs, this.booking.dateToTs);\n\t\t},\n\t\tresourceBookingsMap(): Map<number, Array<number | string>>\n\t\t{\n\t\t\tconst map: Map<number, Array<number | string>> = new Map();\n\n\t\t\tthis.bookings.forEach((booking) => {\n\t\t\t\tbooking.resourcesIds.forEach((resourceId) => {\n\t\t\t\t\tconst resourceBookingIds = map.get(resourceId) || [];\n\t\t\t\t\tresourceBookingIds.push(booking.id);\n\t\t\t\t\tmap.set(resourceId, resourceBookingIds);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn map;\n\t\t},\n\t},\n\tmethods: {\n\t\tclosePopup(): void\n\t\t{\n\t\t\tthis.$emit('update:visible', false);\n\t\t},\n\t\tisOverbooking(resource: ResourceModel): boolean\n\t\t{\n\t\t\tconst resourceBookingsCount = (this.resourceBookingsMap.get(resource.id) || []).length;\n\n\t\t\treturn resourceBookingsCount > 1;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Popup\n\t\t\tref=\"popup\"\n\t\t\tid=\"booking--booking--extra-resources-info\"\n\t\t\t:config\n\t\t\t@close=\"closePopup\"\n\t\t>\n\t\t\t<div class=\"booking--extra-resources-info_container\">\n\t\t\t\t<div class=\"booking--extra-resources-info_content\">\n\t\t\t\t\t<template v-for=\"resource in resources\" :key=\"resource.id\">\n\t\t\t\t\t\t<ExtraResourcesInfoPopupItem\n\t\t\t\t\t\t\t:title=\"resource.name\"\n\t\t\t\t\t\t\t:overbooking=\"isOverbooking(resource)\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { BIcon as UiIcon, Outline, Set as IconSet } from 'ui.icon-set.api.vue';\n\nimport { Model } from 'booking.const';\nimport { Button as UiButton, AirButtonStyle, ButtonColor, ButtonSize, ButtonStyle } from 'booking.component.button';\nimport type { BookingModel } from 'booking.model.bookings';\nimport { bookingService } from 'booking.provider.service.booking-service';\n\nimport { ExtraResourcesDialog } from './extra-resources-dialog';\nimport { ExtraResourcesInfoPopup } from './extra-resources-info-popup';\nimport './extra-resources-info.css';\n\n// @vue/component\nexport const ExtraResourcesInfo = {\n\tname: 'ExtraResourceInfo',\n\tcomponents: {\n\t\tUiButton,\n\t\tUiIcon,\n\t\tExtraResourcesDialog,\n\t\tExtraResourcesInfoPopup,\n\t},\n\tprops: {\n\t\tid: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tresourceId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['freeze', 'unfreeze'],\n\tsetup(): ExtraResourcesInfoData\n\t{\n\t\tconst iconProductName = Outline.PRODUCT;\n\t\tconst iconEditName = Outline.EDIT_M;\n\t\tconst iconHelpName = IconSet.HELP;\n\n\t\treturn {\n\t\t\ticonProductName,\n\t\t\ticonEditName,\n\t\t\ticonHelpName,\n\t\t\tAirButtonStyle,\n\t\t\tButtonColor,\n\t\t\tButtonSize,\n\t\t\tButtonStyle,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tshownResourcesSelector: false,\n\t\t\tshowDialogInfo: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tgetBookingById: `${Model.Bookings}/getById`,\n\t\t}),\n\t\tbooking(): BookingModel\n\t\t{\n\t\t\treturn this.getBookingById(this.id);\n\t\t},\n\t\tsubtitle(): string\n\t\t{\n\t\t\tif (this.hasExtraResources)\n\t\t\t{\n\t\t\t\tconst count = this.extraResourcesIds.length;\n\n\t\t\t\treturn Loc.getMessagePlural('BOOKING_ACTIONS_POPUP_EXTRA_RESOURCES_INFO_SUBTITLE', count, {\n\t\t\t\t\t'#COUNT#': count,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this.loc('BOOKING_ACTIONS_POPUP_EXTRA_RESOURCES_INFO_SUBTITLE_EMPTY');\n\t\t},\n\t\textraResourcesIds(): number[]\n\t\t{\n\t\t\treturn this.booking.resourcesIds.slice(1);\n\t\t},\n\t\thasExtraResources(): boolean\n\t\t{\n\t\t\treturn this.extraResourcesIds.length > 0;\n\t\t},\n\t\ticonProductColor(): string\n\t\t{\n\t\t\treturn this.hasExtraResources ? 'rgba(0, 117, 255, 1)' : 'rgba(201, 204, 208, 1)';\n\t\t},\n\t},\n\tmethods: {\n\t\ttoggleResourcesSelector(): void\n\t\t{\n\t\t\tthis.shownResourcesSelector = true;\n\t\t\tthis.$emit('freeze');\n\t\t},\n\t\ttoggleResourcesInfo(): void\n\t\t{\n\t\t\tthis.showDialogInfo = this.hasExtraResources ? !this.showDialogInfo : this.showDialogInfo;\n\t\t},\n\t\thideResourcesSelector(): void\n\t\t{\n\t\t\tthis.shownResourcesSelector = false;\n\t\t\tthis.$emit('unfreeze');\n\t\t},\n\t\tsaveBookingExtraResources(extraResources: number[]): void\n\t\t{\n\t\t\tthis.hideResourcesSelector();\n\n\t\t\tif (!this.hasExtraResourcesChanged(extraResources))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst resourcesIds = new Set([this.booking.resourcesIds[0], ...extraResources]);\n\n\t\t\tvoid bookingService.update({\n\t\t\t\tid: this.booking.id,\n\t\t\t\tresourcesIds: [...resourcesIds],\n\t\t\t});\n\t\t},\n\t\thasExtraResourcesChanged(extraResources: number[]): boolean\n\t\t{\n\t\t\tconst bookingExtraResources = this.booking.resourcesIds.slice(1).sort();\n\t\t\tif (bookingExtraResources.length !== extraResources.length)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn [...bookingExtraResources].sort().join(',') !== [...extraResources].sort().join(',');\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"booking-actions-popup__item booking--actions-popup--extra-resources-info\">\n\t\t\t<div class=\"booking--actions-popup--extra-resources-info__row\">\n\t\t\t\t<div\n\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t'booking-actions-popup-item-icon',\n\t\t\t\t\t\t'booking--actions-popup--extra-resources-info__icon-product-bg',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'--active': hasExtraResources\n\t\t\t\t\t\t}\n\t\t\t\t\t]\"\n\t\t\t\t>\n\t\t\t\t\t<UiIcon\n\t\t\t\t\t\t:name=\"iconProductName\"\n\t\t\t\t\t\t:color=\"iconProductColor\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking--actions-popup--extra-resources-info__content\">\n\t\t\t\t\t<div class=\"booking--actions-popup--extra-resources-info__title\">\n\t\t\t\t\t\t<span>{{ loc('BOOKING_ACTIONS_POPUP_EXTRA_RESOURCES_INFO_TITLE') }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"booking--actions-popup--extra-resources-info__subtitle\">\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tref=\"button\"\n\t\t\t\t\t\t\tdata-element=\"amount-additional-resources\"\n\t\t\t\t\t\t\t:class=\"{ '--fill': hasExtraResources }\"\n\t\t\t\t\t\t\t@click=\"toggleResourcesInfo\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ subtitle }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<ExtraResourcesInfoPopup\n\t\t\t\t\t\t\tv-if=\"showDialogInfo\"\n\t\t\t\t\t\t\tv-model:visible=\"showDialogInfo\"\n\t\t\t\t\t\t\t:bindElement=\"$refs.button\"\n\t\t\t\t\t\t\t:booking\n\t\t\t\t\t\t\t:resourceId\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div ref=\"edit\" class=\"booking--actions-popup--extra-resources-info__icon-edit\">\n\t\t\t\t\t<UiButton\n\t\t\t\t\t\tdata-element=\"btn-toggle-resources-selector\"\n\t\t\t\t\t\t:icon=\"iconEditName\"\n\t\t\t\t\t\t:buttonClass=\"['--air', ButtonStyle.NO_CAPS, AirButtonStyle.OUTLINE_NO_ACCENT]\"\n\t\t\t\t\t\t:color=\"ButtonColor.LIGHT_BORDER\"\n\t\t\t\t\t\t:size=\"ButtonSize.SMALL\"\n\t\t\t\t\t\t@click=\"toggleResourcesSelector\"\n\t\t\t\t\t/>\n\t\t\t\t\t<ExtraResourcesDialog\n\t\t\t\t\t\tv-if=\"shownResourcesSelector\"\n\t\t\t\t\t\t:booking\n\t\t\t\t\t\t:resourceId\n\t\t\t\t\t\t@save=\"saveBookingExtraResources\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n\ntype ExtraResourcesInfoData = {\n\ticonProductName: string;\n\ticonEditName: string;\n\ticonHelpName: string;\n}\n","import { hint } from 'ui.vue3.directives.hint';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\n\nimport './full-form.css';\n\nexport const FullForm = {\n\tname: 'ActionsPopupFullForm',\n\tdirectives: {\n\t\thint,\n\t},\n\tcomputed: {\n\t\tarrowIcon(): string\n\t\t{\n\t\t\treturn IconSet.CHEVRON_RIGHT;\n\t\t},\n\t\tarrowIconSize(): number\n\t\t{\n\t\t\treturn 12;\n\t\t},\n\t\tarrowIconColor(): string\n\t\t{\n\t\t\treturn 'var(--ui-color-palette-gray-40)';\n\t\t},\n\t\tsoonHint(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('BOOKING_BOOKING_SOON_HINT'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\toffsetLeft: 60,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\tcomponents: {\n\t\tIcon,\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tv-hint=\"soonHint\"\n\t\t\tclass=\"booking-actions-popup__item booking-actions-popup__item-full-form-content --disabled\"\n\t\t\trole=\"button\"\n\t\t\ttabindex=\"0\"\n\t\t>\n\t\t\t<div class=\"booking-actions-popup__item-full-form-label\">\n\t\t\t\t{{ loc('BB_ACTIONS_POPUP_FULL_FORM_LABEL') }}\n\t\t\t</div>\n\t\t\t<div class=\"booking-actions-popup__item-full-form-icon\">\n\t\t\t\t<Icon :name=\"arrowIcon\" :size=\"arrowIconSize\" :color=\"arrowIconColor\"/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BIcon } from 'ui.icon-set.api.vue';\nimport { Main } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.main';\n\nimport { AhaMoment, Model, VisitStatus } from 'booking.const';\nimport { CyclePopup, CardId } from 'booking.component.cycle-popup';\nimport { ahaMoments } from 'booking.lib.aha-moments';\nimport type { BookingModel } from 'booking.model.bookings';\nimport type { WaitListItemModel } from 'booking.model.wait-list';\n\nimport './info.css';\n\n// @vue/component\nexport const Info = {\n\tcomponents: {\n\t\tBIcon,\n\t\tCyclePopup,\n\t},\n\tprops: {\n\t\tbookingId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: 0,\n\t\t},\n\t\twaitListItemId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: 0,\n\t\t},\n\t},\n\temits: ['freeze', 'unfreeze'],\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tMain,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tnowTs: Date.now(),\n\t\t\tisPopupShown: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tbooking(): BookingModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Bookings}/getById`](this.bookingId);\n\t\t},\n\t\twaitListItem(): WaitListItemModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.WaitList}/getById`](this.waitListItemId);\n\t\t},\n\t\tscrollToCard(): string\n\t\t{\n\t\t\treturn {\n\t\t\t\t[this.isUnconfirmed]: CardId.Unconfirmed,\n\t\t\t\t[this.isConfirmed]: CardId.Confirmed,\n\t\t\t\t[this.isLate]: CardId.Late,\n\t\t\t\t[this.isWaitListItem]: CardId.Waitlist,\n\t\t\t\t[this.isOverbooking]: CardId.Overbooking,\n\t\t\t}.true;\n\t\t},\n\t\tisUnconfirmed(): boolean\n\t\t{\n\t\t\tif (!this.booking || this.isConfirmed)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.booking.counter > 0;\n\t\t},\n\t\tisConfirmed(): boolean\n\t\t{\n\t\t\tif (!this.booking)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.booking.isConfirmed;\n\t\t},\n\t\tisLate(): boolean\n\t\t{\n\t\t\tif (!this.booking)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst started = this.nowTs > this.booking.dateFromTs;\n\t\t\tconst statusUnknown = this.booking.visitStatus === VisitStatus.Unknown;\n\t\t\tconst statusNotVisited = this.booking.visitStatus === VisitStatus.NotVisited;\n\n\t\t\treturn (started && statusUnknown) || statusNotVisited;\n\t\t},\n\t\tisWaitListItem(): boolean\n\t\t{\n\t\t\treturn Boolean(this.waitListItem);\n\t\t},\n\t\tisOverbooking(): boolean\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Bookings}/overbookingMap`].has(this.bookingId);\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tthis.interval = setInterval(() => {\n\t\t\tthis.nowTs = Date.now();\n\t\t}, 5 * 1000);\n\n\t\tvoid this.tryShowAhaMoment();\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tclearInterval(this.interval);\n\t},\n\tmethods: {\n\t\tshowPopup(): void\n\t\t{\n\t\t\tif (ahaMoments.shouldShow(AhaMoment.CyclePopup))\n\t\t\t{\n\t\t\t\tahaMoments.setShown(AhaMoment.CyclePopup);\n\t\t\t}\n\n\t\t\tthis.isPopupShown = true;\n\t\t\tthis.$emit('freeze');\n\t\t},\n\t\thidePopup(): void\n\t\t{\n\t\t\tthis.isPopupShown = false;\n\t\t\tthis.$emit('unfreeze');\n\t\t},\n\t\tasync tryShowAhaMoment(): Promise<void>\n\t\t{\n\t\t\tif (ahaMoments.shouldShow(AhaMoment.CyclePopup))\n\t\t\t{\n\t\t\t\tawait ahaMoments.show({\n\t\t\t\t\tid: 'booking-cycle-popup',\n\t\t\t\t\tahaMoment: AhaMoment.CyclePopup,\n\t\t\t\t\ttitle: this.loc('BOOKING_ACTIONS_POPUP_INFO_AHA_TITLE'),\n\t\t\t\t\ttext: this.loc('BOOKING_ACTIONS_POPUP_INFO_AHA_TEXT'),\n\t\t\t\t\ttarget: this.$refs.container,\n\t\t\t\t\ttop: true,\n\t\t\t\t\tisPulsarTransparent: true,\n\t\t\t\t});\n\n\t\t\t\tahaMoments.setShown(AhaMoment.CyclePopup);\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"booking-actions-popup-info\" ref=\"container\" @click=\"showPopup\">\n\t\t\t<BIcon :name=\"Main.INFO_1\"/>\n\t\t</div>\n\t\t<CyclePopup v-if=\"isPopupShown\" :scrollToCard=\"scrollToCard\" @close=\"hidePopup\"/>\n\t`,\n};\n","import { Event } from 'main.core';\nimport { Menu, MenuManager } from 'main.popup';\nimport type { MenuItemOptions } from 'main.popup';\n\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.main';\n\nimport { HelpDesk, Model } from 'booking.const';\nimport { helpDesk } from 'booking.lib.help-desk';\nimport { limit } from 'booking.lib.limit';\nimport { Button, ButtonSize, ButtonColor, ButtonIcon } from 'booking.component.button';\nimport { Loader } from 'booking.component.loader';\nimport type { ClientData, ClientModel } from 'booking.model.clients';\nimport type { MessageStatusModel } from 'booking.model.message-status';\n\nimport './message.css';\n\nexport type UpdateNotificationTypePayload = {\n\tid: number | string,\n\tnotificationType: string;\n}\n\ntype OptionsDictionary = { [string]: string };\ntype MessageData = {\n\ticonSet: OptionsDictionary,\n\tbuttonSize: OptionsDictionary,\n\tbuttonColor: OptionsDictionary,\n\tbuttonIcon: OptionsDictionary,\n}\n\nexport const Message = {\n\tname: 'ActionsPopupMessage',\n\temits: ['open', 'close', 'updateNotificationType'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\t/**\n\t\t * @type ClientData\n\t\t */\n\t\tclientData: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdataId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: '',\n\t\t},\n\t\tdataElementPrefix: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tcomponents: {\n\t\tButton,\n\t\tIcon,\n\t\tLoader,\n\t},\n\tsetup(): MessageData\n\t{\n\t\tconst iconSet = IconSet;\n\t\tconst buttonSize = ButtonSize;\n\t\tconst buttonColor = ButtonColor;\n\t\tconst buttonIcon = ButtonIcon;\n\n\t\treturn {\n\t\t\ticonSet,\n\t\t\tbuttonSize,\n\t\t\tbuttonColor,\n\t\t\tbuttonIcon,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tdictionary: `${Model.Dictionary}/getNotifications`,\n\t\t\tisCurrentSenderAvailable: `${Model.Interface}/isCurrentSenderAvailable`,\n\t\t\tisFeatureEnabled: `${Model.Interface}/isFeatureEnabled`,\n\t\t}),\n\t\tmenuId(): string\n\t\t{\n\t\t\treturn `booking-message-menu-${this.id}`;\n\t\t},\n\t\tclient(): ClientModel | null\n\t\t{\n\t\t\tconst clientData: ClientData = this.clientData;\n\n\t\t\treturn clientData ? this.$store.getters['clients/getByClientData'](clientData) : null;\n\t\t},\n\t\tstatus(): MessageStatusModel | undefined\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.MessageStatus}/getById`](this.id);\n\t\t},\n\t\tsemantic(): string\n\t\t{\n\t\t\treturn this.status?.semantic || '';\n\t\t},\n\t\ticonColor(): string\n\t\t{\n\t\t\tconst colorMap: Record<MessageStatusModel['semantic'], string> = {\n\t\t\t\tsuccess: '#ffffff',\n\t\t\t\tprimary: '#ffffff',\n\t\t\t\tfailure: '#ffffff',\n\t\t\t};\n\n\t\t\treturn colorMap[this.semantic] || '';\n\t\t},\n\t\tfailure(): boolean\n\t\t{\n\t\t\treturn this.semantic === 'failure';\n\t\t},\n\t},\n\tmethods: {\n\t\topenMenu(): void\n\t\t{\n\t\t\tif (!this.isFeatureEnabled)\n\t\t\t{\n\t\t\t\tlimit.show();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.disabled || (this.status.isDisabled && this.isCurrentSenderAvailable))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.getMenu()?.getPopupWindow()?.isShown())\n\t\t\t{\n\t\t\t\tthis.destroyMenu();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst menuButton = this.$refs.button.$el;\n\t\t\tMenuManager.create(\n\t\t\t\tthis.menuId,\n\t\t\t\tmenuButton,\n\t\t\t\tthis.getMenuItems(),\n\t\t\t\t{\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\toffsetLeft: menuButton.offsetWidth - menuButton.offsetWidth / 2,\n\t\t\t\t\tangle: true,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonClose: this.destroyMenu,\n\t\t\t\t\t\tonDestroy: this.destroyMenu,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t).show();\n\n\t\t\tthis.$emit('freeze');\n\t\t\tEvent.bind(document, 'scroll', this.adjustPosition, { capture: true });\n\t\t},\n\t\tgetMenuItems(): MenuItemOptions[]\n\t\t{\n\t\t\treturn Object.values(this.dictionary).map(({ name, value }) => ({\n\t\t\t\ttext: name,\n\t\t\t\tonclick: () => this.sendMessage(value),\n\t\t\t\tdisabled: value === this.dictionary.Feedback.value,\n\t\t\t}));\n\t\t},\n\t\tsendMessage(notificationType: string): void\n\t\t{\n\t\t\tthis.destroyMenu();\n\t\t\tthis.$emit('updateNotificationType', {\n\t\t\t\tid: this.id,\n\t\t\t\tnotificationType,\n\t\t\t});\n\t\t},\n\t\tdestroyMenu(): void\n\t\t{\n\t\t\tMenuManager.destroy(this.menuId);\n\t\t\tthis.$emit('close');\n\t\t\tEvent.unbind(document, 'scroll', this.adjustPosition, { capture: true });\n\t\t},\n\t\tadjustPosition(): void\n\t\t{\n\t\t\tthis.getMenu()?.getPopupWindow()?.adjustPosition();\n\t\t},\n\t\tgetMenu(): Menu | null\n\t\t{\n\t\t\treturn MenuManager.getMenuById(this.menuId);\n\t\t},\n\t\tshowHelpDesk(): void\n\t\t{\n\t\t\thelpDesk.show(\n\t\t\t\tHelpDesk.BookingActionsMessage.code,\n\t\t\t\tHelpDesk.BookingActionsMessage.anchorCode,\n\t\t\t);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"booking-actions-popup__item booking-actions-popup__item-message-content\"\n\t\t\t:class=\"{'--disabled': disabled || !isCurrentSenderAvailable}\"\n\t\t>\n\t\t\t<Loader v-if=\"loading\" class=\"booking-actions-popup__item-message-loader\"/>\n\t\t\t<template v-else>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"booking-actions-popup-item-icon\"\n\t\t\t\t\t:class=\"'--' + semantic || 'none'\"\n\t\t\t\t>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\t:name=\"iconSet.SMS\"\n\t\t\t\t\t\t:color=\"iconColor\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-actions-popup-item-info\">\n\t\t\t\t\t<div class=\"booking-actions-popup-item-title\">\n\t\t\t\t\t\t<span :title=\"status?.title\">{{ status?.title || 'СМС клиенту' }}</span>\n\t\t\t\t\t\t<Icon :name=\"iconSet.HELP\" @click=\"showHelpDesk\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"booking-actions-popup-item-subtitle\"\n\t\t\t\t\t\t:class=\"'--' + semantic || 'none'\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ status?.description || 'Не отправлено' }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-actions-popup-item-buttons\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-message-button'\"\n\t\t\t\t\t\t:data-booking-id=\"dataId\"\n\t\t\t\t\t\t:disabled=\"disabled || (status?.isDisabled && isCurrentSenderAvailable)\"\n\t\t\t\t\t\tclass=\"booking-actions-popup-button-with-chevron\"\n\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t'--lock': !isFeatureEnabled,\n\t\t\t\t\t\t\t'--disabled': disabled || (status?.isDisabled && isCurrentSenderAvailable)\n\t\t\t\t\t\t}\"\n\t\t\t\t\t\tbuttonClass=\"ui-btn-shadow\"\n\t\t\t\t\t\t:text=\"loc('BB_ACTIONS_POPUP_MESSAGE_BUTTON_SEND')\"\n\t\t\t\t\t\t:size=\"buttonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t:color=\"buttonColor.LIGHT\"\n\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\tref=\"button\"\n\t\t\t\t\t\t@click=\"openMenu\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon v-if=\"isFeatureEnabled\" :name=\"iconSet.CHEVRON_DOWN\"/>\n\t\t\t\t\t\t<Icon v-else :name=\"iconSet.LOCK\"/>\n\t\t\t\t\t</Button>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"failure\"\n\t\t\t\t\t\tclass=\"booking-actions-popup-item-buttons-counter\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<div\n\t\t\t\tv-if=\"!isCurrentSenderAvailable\"\n\t\t\t\tclass=\"booking-booking-actions-popup-label\"\n\t\t\t>\n\t\t\t\t{{ loc('BB_ACTIONS_POPUP_LABEL_SOON') }}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.main';\n\nimport './remove-button.css';\n\ntype RemoveButtonData = {\n\ticonSet: { [string]: string },\n}\n\n// @vue/component\nexport const RemoveButton = {\n\tname: 'RemoveButton',\n\tcomponents: {\n\t\tIcon,\n\t},\n\tprops: {\n\t\tshowLabel: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdataAttributes: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => ({}),\n\t\t},\n\t},\n\temits: ['remove'],\n\tsetup(): RemoveButtonData\n\t{\n\t\tconst iconSet = IconSet;\n\n\t\treturn {\n\t\t\ticonSet,\n\t\t};\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"booking-actions-popup__item-remove-button\"\n\t\t\t:title=\"loc('BB_ACTIONS_POPUP_OVERBOOKING_REMOVE')\"\n\t\t\tv-bind=\"dataAttributes\"\n\t\t\t@click=\"$emit('remove')\"\n\t\t>\n\t\t\t<Icon :name=\"iconSet.TRASH_BIN\"/>\n\t\t\t<div v-if=\"showLabel\" class=\"booking-actions-popup__item-overbooking-label\">\n\t\t\t\t{{ loc('BB_ACTIONS_POPUP_OVERBOOKING_REMOVE') }}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Event } from 'main.core';\nimport { MenuManager, Menu } from 'main.popup';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport type { MenuItemOptions } from 'main.popup';\n\nimport { Model } from 'booking.const';\nimport { limit } from 'booking.lib.limit';\nimport { Button, ButtonSize, ButtonColor, ButtonIcon } from 'booking.component.button';\n\nexport type VisitUpdateVisitStatusPayload = {\n\tid: string | number,\n\tvisitStatus: string,\n}\n\nexport const VisitMenu = {\n\tname: 'VisitMenu',\n\temits: ['popupShown', 'popupClosed', 'update:status'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdataId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tdataElementPrefix: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tdata(): { menuPopup: Menu | null }\n\t{\n\t\treturn {\n\t\t\tIconSet,\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tButtonIcon,\n\t\t\tmenuPopup: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tdictionary: `${Model.Dictionary}/getBookingVisitStatuses`,\n\t\t\tisFeatureEnabled: `${Model.Interface}/isFeatureEnabled`,\n\t\t}),\n\t\tpopupId(): string\n\t\t{\n\t\t\treturn `booking-visit-menu-${this.id}`;\n\t\t},\n\t},\n\tunmounted(): void\n\t{\n\t\tif (this.menuPopup)\n\t\t{\n\t\t\tthis.destroy();\n\t\t}\n\t},\n\tmethods: {\n\t\tupdateVisitStatus(status: string): void\n\t\t{\n\t\t\tthis.$emit('update:status', {\n\t\t\t\tid: this.id,\n\t\t\t\tvisitStatus: status,\n\t\t\t});\n\t\t},\n\t\topenMenu(): void\n\t\t{\n\t\t\tif (this.disabled)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.isFeatureEnabled)\n\t\t\t{\n\t\t\t\tlimit.show();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.menuPopup?.popupWindow?.isShown())\n\t\t\t{\n\t\t\t\tthis.destroy();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst menuButton = this.$refs.button.$el;\n\t\t\tthis.menuPopup = MenuManager.create(\n\t\t\t\tthis.popupId,\n\t\t\t\tmenuButton,\n\t\t\t\tthis.getMenuItems(),\n\t\t\t\t{\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\toffsetLeft: menuButton.offsetWidth - menuButton.offsetWidth / 2,\n\t\t\t\t\tangle: true,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonClose: () => this.destroy(),\n\t\t\t\t\t\tonDestroy: () => this.unbindScrollEvent(),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t\tthis.menuPopup.show();\n\t\t\tthis.bindScrollEvent();\n\t\t\tthis.$emit('popupShown');\n\t\t},\n\t\tgetMenuItems(): MenuItemOptions[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\ttext: this.loc('BB_ACTIONS_POPUP_VISIT_BTN_LABEL_UNKNOWN'),\n\t\t\t\t\tonclick: () => this.setVisitStatus(this.dictionary.Unknown),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: this.loc('BB_ACTIONS_POPUP_VISIT_BTN_LABEL_VISITED'),\n\t\t\t\t\tonclick: () => this.setVisitStatus(this.dictionary.Visited),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: this.loc('BB_ACTIONS_POPUP_VISIT_BTN_LABEL_NOT_VISITED'),\n\t\t\t\t\tonclick: () => this.setVisitStatus(this.dictionary.NotVisited),\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\tsetVisitStatus(status: string)\n\t\t{\n\t\t\tthis.updateVisitStatus(status);\n\t\t\tthis.destroy();\n\t\t},\n\t\tdestroy(): void\n\t\t{\n\t\t\tMenuManager.destroy(this.popupId);\n\t\t\tthis.unbindScrollEvent();\n\t\t\tthis.$emit('popupClosed');\n\t\t},\n\t\tbindScrollEvent(): void\n\t\t{\n\t\t\tEvent.bind(document, 'scroll', this.adjustPosition, { capture: true });\n\t\t},\n\t\tunbindScrollEvent(): void\n\t\t{\n\t\t\tEvent.unbind(document, 'scroll', this.adjustPosition, { capture: true });\n\t\t},\n\t\tadjustPosition(): void\n\t\t{\n\t\t\tthis.menuPopup?.popupWindow?.adjustPosition();\n\t\t},\n\t},\n\tcomponents: {\n\t\tIcon,\n\t\tButton,\n\t},\n\ttemplate: `\n\t\t<Button\n\t\t\t:data-element=\"dataElementPrefix + '-menu-visit-button'\"\n\t\t\t:data-booking-id=\"dataId\"\n\t\t\t:disabled=\"disabled || !isFeatureEnabled\"\n\t\t\tclass=\"booking-actions-popup-button-with-chevron\"\n\t\t\t:class=\"{'--lock': !isFeatureEnabled || disabled}\"\n\t\t\tbuttonClass=\"ui-btn-shadow\"\n\t\t\t:text=\"loc('BB_ACTIONS_POPUP_VISIT_BTN_LABEL')\"\n\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t:color=\"ButtonColor.LIGHT\"\n\t\t\t:round=\"true\"\n\t\t\tref=\"button\"\n\t\t\t@click=\"openMenu\"\n\t\t>\n\t\t\t<Icon v-if=\"isFeatureEnabled\" :name=\"IconSet.CHEVRON_DOWN\"/>\n\t\t\t<Icon v-else :name=\"IconSet.LOCK\"/>\n\t\t</Button>\n\t`,\n};\n","import { ref } from 'ui.vue3';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.main';\n\nimport { HelpDesk, Model } from 'booking.const';\nimport { helpDesk } from 'booking.lib.help-desk';\nimport { Loader } from 'booking.component.loader';\n\nimport { VisitMenu } from './visit-menu/visit-menu';\nimport type { VisitUpdateVisitStatusPayload } from './visit-menu/visit-menu';\nimport './visit.css';\n\nexport type { VisitUpdateVisitStatusPayload };\n\ntype VisitData = {\n\ticonSet: { [string]: string },\n\tisLoading: boolean,\n}\n\nexport const Visit = {\n\tname: 'ActionsPopupVisit',\n\temits: ['freeze', 'unfreeze', 'update:visitStatus'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tvisitStatus: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thasClients: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdataId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tdataElementPrefix: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tsetup(): VisitData\n\t{\n\t\tconst iconSet = IconSet;\n\t\tconst isLoading = ref(true);\n\n\t\treturn {\n\t\t\ticonSet,\n\t\t\tisLoading,\n\t\t};\n\t},\n\tasync mounted()\n\t{\n\t\tthis.isLoading = false;\n\t},\n\tmethods: {\n\t\tshowHelpDesk(): void\n\t\t{\n\t\t\thelpDesk.show(\n\t\t\t\tHelpDesk.BookingActionsVisit.code,\n\t\t\t\tHelpDesk.BookingActionsVisit.anchorCode,\n\t\t\t);\n\t\t},\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tdictionary: `${Model.Dictionary}/getBookingVisitStatuses`,\n\t\t}),\n\t\tgetLocVisitStatus(): string\n\t\t{\n\t\t\tswitch (this.visitStatus)\n\t\t\t{\n\t\t\t\tcase this.dictionary.Visited:\n\t\t\t\t\treturn this.loc('BB_ACTIONS_POPUP_VISIT_BTN_LABEL_VISITED');\n\t\t\t\tcase this.dictionary.NotVisited:\n\t\t\t\t\treturn this.loc('BB_ACTIONS_POPUP_VISIT_BTN_LABEL_NOT_VISITED');\n\t\t\t\tdefault:\n\t\t\t\t\treturn (this.hasClients)\n\t\t\t\t\t\t? this.loc('BB_ACTIONS_POPUP_VISIT_BTN_LABEL_UNKNOWN')\n\t\t\t\t\t\t: this.loc('BB_ACTIONS_POPUP_VISIT_ADD_LABEL');\n\t\t\t}\n\t\t},\n\t\tgetVisitInfoStyles(): string\n\t\t{\n\t\t\tswitch (this.visitStatus)\n\t\t\t{\n\t\t\t\tcase this.dictionary.Visited:\n\t\t\t\t\treturn '--visited';\n\t\t\t\tcase this.dictionary.NotVisited:\n\t\t\t\t\treturn '--not-visited';\n\t\t\t\tdefault:\n\t\t\t\t\treturn '--unknown';\n\t\t\t}\n\t\t},\n\t\tcardIconColor(): string\n\t\t{\n\t\t\tswitch (this.visitStatus)\n\t\t\t{\n\t\t\t\tcase this.dictionary.NotVisited:\n\t\t\t\tcase this.dictionary.Visited:\n\t\t\t\t\treturn 'var(--ui-color-palette-white-base)';\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'var(--ui-color-palette-gray-20)';\n\t\t\t}\n\t\t},\n\t\ticonClass(): string\n\t\t{\n\t\t\tswitch (this.visitStatus)\n\t\t\t{\n\t\t\t\tcase this.dictionary.Visited:\n\t\t\t\t\treturn '--visited';\n\t\t\t\tcase this.dictionary.NotVisited:\n\t\t\t\t\treturn '--not-visited';\n\t\t\t\tdefault:\n\t\t\t\t\treturn '';\n\t\t\t}\n\t\t},\n\t},\n\tcomponents: {\n\t\tIcon,\n\t\tLoader,\n\t\tVisitMenu,\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"booking-actions-popup__item booking-actions-popup__item-visit-content\"\n\t\t\t:class=\"{'--disabled': disabled}\"\n\t\t>\n\t\t\t<Loader v-if=\"isLoading\" class=\"booking-actions-popup__item-visit-loader\"/>\n\t\t\t<template v-else>\n\t\t\t\t<div :class=\"['booking-actions-popup-item-icon', iconClass]\">\n\t\t\t\t\t<Icon :name=\"iconSet.CUSTOMER_CARD\" :color=\"cardIconColor\"/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-actions-popup-item-info\">\n\t\t\t\t\t<div class=\"booking-actions-popup-item-title\">\n\t\t\t\t\t\t<span>{{ loc('BB_ACTIONS_POPUP_VISIT_LABEL') }}</span>\n\t\t\t\t\t\t<Icon :name=\"iconSet.HELP\" @click=\"showHelpDesk\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\t:class=\"['booking-actions-popup-item-subtitle', getVisitInfoStyles]\"\n\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-visit-status'\"\n\t\t\t\t\t\t:data-booking-id=\"id\"\n\t\t\t\t\t\t:data-visit-status=\"visitStatus\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ getLocVisitStatus }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-actions-popup-item-buttons\">\n\t\t\t\t\t<VisitMenu\n\t\t\t\t\t\t:id\n\t\t\t\t\t\t:dataId\n\t\t\t\t\t\t:dataElementPrefix\n\t\t\t\t\t\t:disabled\n\t\t\t\t\t\t@popupShown=\"$emit('freeze')\"\n\t\t\t\t\t\t@popupClosed=\"$emit('unfreeze')\"\n\t\t\t\t\t\t@update:status=\"$emit('update:visitStatus', $event)\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t`,\n};\n"],"names":["ActionsPopup","name","emits","props","bindElement","type","HTMLElement","required","popupId","Number","String","contentStructure","Array","popupOptions","Object","default","data","soonTmp","computed","actionsPopupId","config","className","width","offsetLeft","offsetWidth","offsetTop","animation","beforeCreate","PopupManager","getPopups","filter","popup","test","getId","forEach","destroy","components","StickyPopup","PopupMaker","template","Note","id","note","dataId","dataElementPrefix","dataAttributes","IconSet","isPopupShown","isEditMode","mapGetters","isFeatureEnabled","Model","Interface","hasNote","Boolean","methods","onMouseEnter","showNoteTimeout","setTimeout","showViewPopup","onMouseLeave","clearTimeout","closeViewPopup","showPopup","closePopup","showEditPopup","closeEditPopup","$emit","saveBookingNote","NotePopup","Icon","Empty","directives","hint","ButtonSize","ButtonColor","ButtonIcon","isLoading","shownClientPopup","btnIcon","ADD","LOCK","userIcon","PERSON","personSize","callIcon","TELEPHONY_HANDSET_1","messageIcon","CHATS_1","iconSize","iconColor","soonHint","text","loc","showClientPopup","limit","show","hideClientPopup","addClientsToBook","clients","Button","ClientPopup","EditClientButton","setup","iconSet","buttonSize","buttonColor","buttonIcon","isClientPopupShowed","ref","getClientByClientData","$store","getters","Clients","currentClient","getByClientData","client","contact","company","map","clientData","clientModel","code","CrmEntity","Contact","Company","updateClient","SidePanel","SidePanelMain","BX","Client","lazyload","Loader","primaryClientData","clientPhone","phones","length","clientAvatar","image","clientStatus","isReturning","imageTypeClass","mounted","openClient","entity","toLowerCase","Instance","open","ConfirmationMenu","isConfirmed","disabled","menuPopup","unmounted","updateConfirmStatus","openMenu","popupWindow","isShown","menuButton","$refs","button","$el","MenuManager","create","getMenuItems","closeByEsc","autoHide","angle","cacheable","events","onClose","onDestroy","unbindScrollEvent","bindScrollEvent","onclick","Event","bind","document","adjustPosition","capture","unbind","Confirmation","counters","delayedCounter","find","counter","BookingCounterType","Delayed","value","unconfirmedCounter","Unconfirmed","stateClass","stateText","hasBtnCounter","showHelpDesk","helpDesk","HelpDesk","BookingActionsConfirmation","anchorCode","Deal","deal","dealHelper","DealHelper","saveDealDebounce","Runtime","debounce","saveDeal","menuId","dateFormatted","createdTimestamp","format","DateTimeFormat","getFormat","dialog","Dialog","context","multiple","targetNode","getDialogButton","height","enableSearch","dropdownMode","preselectedItems","EntitySelectorEntity","entities","dynamicLoad","dynamicSearch","onShow","freeze","onHide","unfreeze","itemChange","beforeUnmount","isOpen","getMenu","getPopupWindow","createDeal","showMenu","moreButton","items","onAfterClose","showDealDialog","close","deselectAll","setTargetNode","getMenuById","openDeal","dealData","getDealData","hide","item","getSelectedItems","mapEntityInfoToDeal","getCustomData","get","addButton","BookingActionsDeal","Document","loading","bookingActionsService","getDocData","linkDoc","ExtraResourcesDialog","booking","resourceId","resources","Resources","selectedDateTs","getByInterval","Bookings","extraResourcesIds","resourcesIds","bookings","dateFromTs","dateToTs","resourceBookingsMap","Map","bookingId","resourceBookingIds","push","set","excludedResourceIds","Set","watch","addItems","created","loadResources","Resource","Math","min","window","innerHeight","searchOptions","allowCreateItem","onLoad","selectedItemIds","event","defaultPrevented","resourceDialogService","fillDialog","getItemOptions","resource","entityId","title","subtitle","avatar","avatarOptions","bgImage","bgColor","borderRadius","tabs","EntitySelectorTab","Recent","selected","isItemSelected","deselectable","has","nodeAttributes","badges","getItemBadge","badgesOptions","justifyContent","includes","resourceBookingsCount","textColor","itemsOptions","reduce","acc","values","itemOptions","addItem","itemsIds","getItems","removeItems","tab","getActiveTab","getContainer","append","getRootNode","getChildrenContainer","render","ExtraResourcesInfoPopupItem","overbooking","Outline","labelHTML","label","Label","color","LabelColor","WARNING","size","LabelSize","SM","fill","outerHTML","ExtraResourcesInfoPopup","Popup","visible","getResourcesByIds","padding","contentPadding","minWidth","maxWidth","bindOptions","forceBindPosition","position","extraResourceIds","isOverbooking","ExtraResourcesInfo","UiButton","UiIcon","iconProductName","PRODUCT","iconEditName","EDIT_M","iconHelpName","HELP","AirButtonStyle","ButtonStyle","shownResourcesSelector","showDialogInfo","getBookingById","hasExtraResources","count","Loc","getMessagePlural","slice","iconProductColor","toggleResourcesSelector","toggleResourcesInfo","hideResourcesSelector","saveBookingExtraResources","extraResources","hasExtraResourcesChanged","bookingService","update","bookingExtraResources","sort","join","FullForm","arrowIcon","CHEVRON_RIGHT","arrowIconSize","arrowIconColor","Info","BIcon","CyclePopup","waitListItemId","Main","nowTs","Date","now","waitListItem","WaitList","scrollToCard","isUnconfirmed","CardId","Confirmed","isLate","Late","isWaitListItem","Waitlist","Overbooking","true","started","statusUnknown","visitStatus","VisitStatus","Unknown","statusNotVisited","NotVisited","interval","setInterval","tryShowAhaMoment","clearInterval","ahaMoments","shouldShow","AhaMoment","setShown","hidePopup","ahaMoment","target","container","top","isPulsarTransparent","Message","dictionary","Dictionary","isCurrentSenderAvailable","status","MessageStatus","semantic","colorMap","success","primary","failure","isDisabled","destroyMenu","sendMessage","Feedback","notificationType","BookingActionsMessage","RemoveButton","showLabel","VisitMenu","updateVisitStatus","setVisitStatus","Visited","Visit","hasClients","BookingActionsVisit","getLocVisitStatus","getVisitInfoStyles","cardIconColor","iconClass"],"mappings":"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"}