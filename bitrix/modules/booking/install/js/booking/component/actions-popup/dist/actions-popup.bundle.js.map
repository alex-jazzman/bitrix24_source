{"version":3,"file":"actions-popup.bundle.js","sources":["../src/actions-popup.js","../src/client/note/note.js","../src/client/empty/empty.js","../src/client/edit-client-button/edit-client-button.js","../src/client/client.js","../src/confirmation/confirmation-menu/confirmation-menu.js","../src/confirmation/confirmation.js","../src/deal/deal.js","../src/document/document.js","../src/full-form/full-form.js","../src/message/message.js","../src/remove-button/remove-button.js","../src/visit/visit-menu/visit-menu.js","../src/visit/visit.js"],"sourcesContent":["import { Popup, PopupManager } from 'main.popup';\nimport type { PopupOptions } from 'main.popup';\n\nimport { PopupMaker } from 'booking.component.popup-maker';\nimport { StickyPopup } from 'booking.component.popup';\nimport type { PopupMakerItem } from 'booking.component.popup-maker';\n\nimport './actions-popup.css';\n\nexport type { PopupOptions, PopupMakerItem };\n\nexport const ActionsPopup = {\n\tname: 'ActionsPopup',\n\temits: ['close'],\n\tprops: {\n\t\tbindElement: {\n\t\t\ttype: HTMLElement,\n\t\t\trequired: true,\n\t\t},\n\t\tpopupId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\t/**\n\t\t * @type {Array<PopupMakerItem | PopupMakerItem[]>}\n\t\t */\n\t\tcontentStructure: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\t/**\n\t\t * @type {PopupOptions}\n\t\t */\n\t\tpopupOptions: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tsoonTmp: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tactionsPopupId(): string\n\t\t{\n\t\t\treturn `booking-booking-actions-popup-${this.popupId}`;\n\t\t},\n\t\tconfig(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tclassName: 'booking-booking-actions-popup',\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\twidth: 325,\n\t\t\t\toffsetLeft: this.bindElement.offsetWidth,\n\t\t\t\toffsetTop: -200,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\t...this.popupOptions,\n\t\t\t};\n\t\t},\n\t},\n\tbeforeCreate(): void\n\t{\n\t\tPopupManager.getPopups()\n\t\t\t.filter((popup: Popup) => /booking-booking-actions-popup/.test(popup.getId()))\n\t\t\t.forEach((popup: Popup) => popup.destroy())\n\t\t;\n\t},\n\tcomponents: {\n\t\tStickyPopup,\n\t\tPopupMaker,\n\t},\n\ttemplate: `\n\t\t<StickyPopup\n\t\t\tv-slot=\"{freeze, unfreeze}\"\n\t\t\t:id=\"actionsPopupId\"\n\t\t\t:config=\"config\"\n\t\t\t@close=\"$emit('close')\"\n\t\t>\n\t\t\t<PopupMaker\n\t\t\t\t:contentStructure=\"contentStructure\"\n\t\t\t\t@freeze=\"freeze\"\n\t\t\t\t@unfreeze=\"unfreeze\"\n\t\t\t/>\n\t\t\t<div class=\"booking-booking-actions-popup-footer\">\n\t\t\t\t<slot name=\"footer\" />\n\t\t\t</div>\n\t\t</StickyPopup>\n\t`,\n};\n","import { mapGetters } from 'ui.vue3.vuex';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\n\nimport { Model } from 'booking.const';\nimport { NotePopup } from 'booking.component.note-popup';\nimport type { NotePopupSavePayload } from 'booking.component.note-popup';\n\nimport './note.css';\n\nexport type { NotePopupSavePayload as UpdateNotePayload };\n\nexport const Note = {\n\temits: ['popupShown', 'popupClosed', 'updateNote'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tnote: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tdataId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: '',\n\t\t},\n\t\tdataElementPrefix: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tIconSet,\n\t\t\tisPopupShown: false,\n\t\t\tisEditMode: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tisFeatureEnabled: `${Model.Interface}/isFeatureEnabled`,\n\t\t}),\n\t\thasNote(): boolean\n\t\t{\n\t\t\treturn Boolean(this.note);\n\t\t},\n\t},\n\tmethods: {\n\t\tonMouseEnter(): void\n\t\t{\n\t\t\tthis.showNoteTimeout = setTimeout(() => this.showViewPopup(), 100);\n\t\t},\n\t\tonMouseLeave(): void\n\t\t{\n\t\t\tclearTimeout(this.showNoteTimeout);\n\t\t\tthis.closeViewPopup();\n\t\t},\n\t\tshowViewPopup(): void\n\t\t{\n\t\t\tif (this.isPopupShown || !this.hasNote)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isEditMode = false;\n\t\t\tthis.showPopup();\n\t\t},\n\t\tcloseViewPopup(): void\n\t\t{\n\t\t\tif (this.isEditMode)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.closePopup();\n\t\t},\n\t\tshowEditPopup(): void\n\t\t{\n\t\t\tthis.isEditMode = true;\n\t\t\tthis.showPopup();\n\t\t},\n\t\tcloseEditPopup(): void\n\t\t{\n\t\t\tif (!this.isEditMode)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.closePopup();\n\t\t},\n\t\tshowPopup(): void\n\t\t{\n\t\t\tthis.isPopupShown = true;\n\t\t\tthis.$emit('popupShown');\n\t\t},\n\t\tclosePopup(): void\n\t\t{\n\t\t\tthis.isPopupShown = false;\n\t\t\tthis.$emit('popupClosed');\n\t\t},\n\t\tsaveBookingNote({ note }: NotePopupSavePayload): void\n\t\t{\n\t\t\tthis.$emit('updateNote', {\n\t\t\t\tid: this.id,\n\t\t\t\tnote,\n\t\t\t});\n\t\t},\n\t},\n\tcomponents: {\n\t\tNotePopup,\n\t\tIcon,\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"booking-actions-popup__item-client-note\"\n\t\t\t:data-element=\"dataElementPrefix + '-menu-note'\"\n\t\t\t:data-booking-id=\"dataId\"\n\t\t\t:data-has-note=\"hasNote\"\n\t\t\t:class=\"{'--empty': !hasNote}\"\n\t\t\tref=\"note\"\n\t\t>\n\t\t\t<div\n\t\t\t\tclass=\"booking-actions-popup__item-client-note-inner\"\n\t\t\t\t:data-element=\"dataElementPrefix + '-menu-note-add'\"\n\t\t\t\t:data-booking-id=\"dataId\"\n\t\t\t\t@mouseenter=\"onMouseEnter\"\n\t\t\t\t@mouseleave=\"onMouseLeave\"\n\t\t\t\t@click=\"() => hasNote ? showViewPopup() : showEditPopup()\"\n\t\t\t>\n\t\t\t\t<template v-if=\"hasNote\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"booking-actions-popup__item-client-note-text\"\n\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-note-text'\"\n\t\t\t\t\t\t:data-booking-id=\"dataId\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ note }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"isFeatureEnabled\"\n\t\t\t\t\t\tclass=\"booking-actions-popup__item-client-note-edit\"\n\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-note-edit'\"\n\t\t\t\t\t\t:data-booking-id=\"dataId\"\n\t\t\t\t\t\t@click=\"showEditPopup\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon :name=\"IconSet.PENCIL_40\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<Icon :name=\"IconSet.PLUS_20\"/>\n\t\t\t\t\t<div class=\"booking-actions-popup__item-client-note-text\">\n\t\t\t\t\t\t{{ loc('BB_ACTIONS_POPUP_ADD_NOTE') }}\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t\t<NotePopup\n\t\t\tv-if=\"isPopupShown\"\n\t\t\t:isEditMode=\"isEditMode && isFeatureEnabled\"\n\t\t\t:id=\"id\"\n\t\t\t:text=\"note\"\n\t\t\t:bindElement=\"() => $refs.note\"\n\t\t\t:dataId=\"dataId\"\n\t\t\t:dataElementPrefix=\"dataElementPrefix\"\n\t\t\t@close=\"closeEditPopup\"\n\t\t\t@save=\"saveBookingNote\"\n\t\t/>\n\t`,\n};\n","import { mapGetters } from 'ui.vue3.vuex';\nimport { hint } from 'ui.vue3.directives.hint';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.main';\n\nimport { limit } from 'booking.lib.limit';\nimport { Button, ButtonSize, ButtonColor, ButtonIcon } from 'booking.component.button';\nimport { ClientPopup } from 'booking.component.client-popup';\nimport { Model } from 'booking.const';\nimport type { ClientData } from 'booking.model.clients';\n\nimport '../client.css';\n\nexport type AddClientsPayload = {\n\tid: number | string,\n\tclients: ClientData[],\n}\n\nexport const Empty = {\n\temits: ['popupShown', 'popupClosed', 'addClients'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdirectives: { hint },\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tButtonIcon,\n\t\t\tisLoading: true,\n\t\t\tshownClientPopup: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tisFeatureEnabled: `${Model.Interface}/isFeatureEnabled`,\n\t\t}),\n\t\tbtnIcon(): string\n\t\t{\n\t\t\treturn this.isFeatureEnabled ? ButtonIcon.ADD : ButtonIcon.LOCK;\n\t\t},\n\t\tuserIcon(): string\n\t\t{\n\t\t\treturn IconSet.PERSON;\n\t\t},\n\t\tpersonSize(): number\n\t\t{\n\t\t\treturn 26;\n\t\t},\n\t\tcallIcon(): string\n\t\t{\n\t\t\treturn IconSet.TELEPHONY_HANDSET_1;\n\t\t},\n\t\tmessageIcon(): string\n\t\t{\n\t\t\treturn IconSet.CHATS_1;\n\t\t},\n\t\ticonSize(): number\n\t\t{\n\t\t\treturn 20;\n\t\t},\n\t\ticonColor(): string\n\t\t{\n\t\t\treturn 'var(--ui-color-palette-gray-20)';\n\t\t},\n\t\tsoonHint(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('BOOKING_BOOKING_SOON_HINT'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\toffsetLeft: -60,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\tshowClientPopup(): void\n\t\t{\n\t\t\tif (!this.isFeatureEnabled)\n\t\t\t{\n\t\t\t\tlimit.show();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.shownClientPopup = true;\n\t\t\tthis.$emit('popupShown');\n\t\t},\n\t\thideClientPopup(): void\n\t\t{\n\t\t\tthis.shownClientPopup = false;\n\t\t\tthis.$emit('popupClosed');\n\t\t},\n\t\taddClientsToBook(clients: ClientData[]): void\n\t\t{\n\t\t\tthis.$emit('addClients', {\n\t\t\t\tid: this.id,\n\t\t\t\tclients,\n\t\t\t});\n\t\t},\n\t},\n\tcomponents: {\n\t\tButton,\n\t\tIcon,\n\t\tClientPopup,\n\t},\n\ttemplate: `\n\t\t<div class=\"booking-actions-popup__item-client-icon-container\">\n\t\t\t<div class=\"booking-actions-popup__item-client-icon\">\n\t\t\t\t<Icon :name=\"userIcon\" :size=\"personSize\" :color=\"iconColor\"/>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"booking-actions-popup__item-client-info --empty\">\n\t\t\t<div class=\"booking-actions-popup__item-client-info-label --empty\">\n\t\t\t\t{{ loc('BB_ACTIONS_POPUP_CLIENT_EMPTY_NAME_LABEL') }}\n\t\t\t</div>\n\t\t\t<div class=\"booking-actions-popup__item-client-info-empty\">\n\t\t\t\t<div></div>\n\t\t\t\t<div></div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclass=\"booking-actions-popup-item-buttons booking-actions-popup__item-client-info-btn\"\n\t\t\t\tref=\"clientButton\"\n\t\t\t>\n\t\t\t\t<Button\n\t\t\t\t\t:text=\"loc('BB_ACTIONS_POPUP_CLIENT_BTN_EMPTY_LABEL')\"\n\t\t\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t\t\t:color=\"ButtonColor.PRIMARY\"\n\t\t\t\t\t:icon=\"btnIcon\"\n\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t@click=\"showClientPopup\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<ClientPopup\n\t\t\t\tv-if=\"shownClientPopup\"\n\t\t\t\t:bindElement=\"this.$refs.clientButton\"\n\t\t\t\t@create=\"addClientsToBook\"\n\t\t\t\t@close=\"hideClientPopup\"\n\t\t\t/>\n\t\t</div>\n\t\t<div v-hint=\"soonHint\" class=\"booking-actions-popup__item-client-action\">\n\t\t\t<Icon :name=\"callIcon\" :size=\"iconSize\" :color=\"iconColor\"/>\n\t\t\t<Icon :name=\"messageIcon\" :size=\"iconSize\" :color=\"iconColor\"/>\n\t\t</div>\n\t`,\n};\n","import { ref } from 'ui.vue3';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.main';\n\nimport { Button, ButtonSize, ButtonColor, ButtonIcon } from 'booking.component.button';\nimport { CrmEntity, Model } from 'booking.const';\nimport { ClientPopup } from 'booking.component.client-popup';\nimport type { CurrentClient } from 'booking.component.client-popup';\nimport type { ClientData, ClientModel } from 'booking.model.clients';\n\nexport type UpdateClientsPayload = {\n\tid: number | string,\n\tclients: ClientData[],\n}\n\ntype OptionsDictionary = { [string]: string };\ntype EditClientButtonData = {\n\ticonSet: OptionsDictionary,\n\tbuttonSize: OptionsDictionary,\n\tbuttonColor: OptionsDictionary,\n\tbuttonIcon: OptionsDictionary,\n\tisClientPopupShowed: boolean,\n}\n\nexport const EditClientButton = {\n\tname: 'EditClientButton',\n\temits: ['visible', 'invisible', 'updateClients'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: [Number, Array],\n\t\t\trequired: true,\n\t\t},\n\t\t/**\n\t\t * @type ClientData\n\t\t */\n\t\tclients: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tdataId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: '',\n\t\t},\n\t\tdataElementPrefix: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tsetup(): EditClientButtonData\n\t{\n\t\tconst iconSet = IconSet;\n\t\tconst buttonSize = ButtonSize;\n\t\tconst buttonColor = ButtonColor;\n\t\tconst buttonIcon = ButtonIcon;\n\t\tconst isClientPopupShowed = ref(false);\n\n\t\treturn {\n\t\t\ticonSet,\n\t\t\tbuttonSize,\n\t\t\tbuttonColor,\n\t\t\tbuttonIcon,\n\t\t\tisClientPopupShowed,\n\t\t};\n\t},\n\tcomputed: {\n\t\tgetClientByClientData(): (clientData: ClientData) => ClientModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Clients}/getByClientData`];\n\t\t},\n\t\tcurrentClient(): CurrentClient\n\t\t{\n\t\t\tconst getByClientData = this.getClientByClientData;\n\t\t\tconst client: { contact: ?ClientModel, company: ?ClientModel } = {\n\t\t\t\tcontact: null,\n\t\t\t\tcompany: null,\n\t\t\t};\n\n\t\t\t(this.clients || []).map((clientData) => getByClientData(clientData))\n\t\t\t\t.forEach((clientModel) => {\n\t\t\t\t\tif (clientModel.type.code === CrmEntity.Contact)\n\t\t\t\t\t{\n\t\t\t\t\t\tclient.contact = clientModel;\n\t\t\t\t\t}\n\t\t\t\t\telse if (clientModel.type.code === CrmEntity.Company)\n\t\t\t\t\t{\n\t\t\t\t\t\tclient.company = clientModel;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\treturn client;\n\t\t},\n\t},\n\tmethods: {\n\t\tupdateClient(clients: ClientData[]): void\n\t\t{\n\t\t\tthis.$emit('updateClients', {\n\t\t\t\tid: this.id,\n\t\t\t\tclients,\n\t\t\t});\n\t\t},\n\t\tshowPopup(): void\n\t\t{\n\t\t\tthis.isClientPopupShowed = true;\n\t\t\tthis.$emit('visible');\n\t\t},\n\t\tclosePopup(): void\n\t\t{\n\t\t\tthis.isClientPopupShowed = false;\n\t\t\tthis.$emit('invisible');\n\t\t},\n\t},\n\tcomponents: {\n\t\tClientPopup,\n\t\tButton,\n\t\tIcon,\n\t},\n\ttemplate: `\n\t\t<Button\n\t\t\t:data-element=\"dataElementPrefix + '-menu-client-edit'\"\n\t\t\t:data-booking-id=\"dataId\"\n\t\t\t:size=\"buttonSize.EXTRA_SMALL\"\n\t\t\t:color=\"buttonColor.LIGHT\"\n\t\t\t:round=\"true\"\n\t\t\tref=\"editClientButton\"\n\t\t\t@click=\"showPopup\"\n\t\t>\n\t\t\t<Icon :name=\"iconSet.MORE\"/>\n\t\t</Button>\n\t\t<ClientPopup\n\t\t\tv-if=\"isClientPopupShowed\"\n\t\t\t:bind-element=\"$refs.editClientButton.$el\"\n\t\t\t:current-client=\"currentClient\"\n\t\t\t@create=\"updateClient\"\n\t\t\t@close=\"closePopup\"\n\t\t/>\n\t`,\n};\n","import { SidePanel as SidePanelMain } from 'main.sidepanel';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport { lazyload } from 'ui.vue3.directives.lazyload';\nimport { hint } from 'ui.vue3.directives.hint';\nimport 'ui.icon-set.main';\n\nimport { Button, ButtonSize, ButtonColor, ButtonIcon } from 'booking.component.button';\nimport { Loader } from 'booking.component.loader';\nimport type { ClientData, ClientModel } from 'booking.model.clients';\n\nimport { Note } from './note/note';\nimport { Empty } from './empty/empty';\nimport { EditClientButton } from './edit-client-button/edit-client-button';\nimport './client.css';\n\nexport type { AddClientsPayload } from './empty/empty';\nexport type { UpdateClientsPayload } from './edit-client-button/edit-client-button';\nexport type { UpdateNotePayload } from './note/note';\n\nconst SidePanel = SidePanelMain || BX.SidePanel;\n\nexport const Client = {\n\tname: 'ActionsPopupClient',\n\tdirectives: { lazyload, hint },\n\temits: [\n\t\t'freeze',\n\t\t'unfreeze',\n\t\t'addClients',\n\t\t'updateClients',\n\t\t'updateNote',\n\t],\n\tprops: {\n\t\tid: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\t/**\n\t\t * @type ClientData\n\t\t */\n\t\tprimaryClientData: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t\t/**\n\t\t * @type ClientData\n\t\t */\n\t\tclients: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tnote: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tdataId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: '',\n\t\t},\n\t\tdataElementPrefix: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tButtonIcon,\n\t\t\tisLoading: true,\n\t\t};\n\t},\n\tcomputed: {\n\t\tclient(): ClientModel | null\n\t\t{\n\t\t\tconst clientData: ClientData = this.primaryClientData;\n\n\t\t\treturn clientData ? this.$store.getters['clients/getByClientData'](clientData) : null;\n\t\t},\n\t\tclientPhone(): string\n\t\t{\n\t\t\tconst client: ClientModel = this.client;\n\n\t\t\treturn (\n\t\t\t\tclient.phones.length > 0\n\t\t\t\t\t? client.phones[0]\n\t\t\t\t\t: this.loc('BB_ACTIONS_POPUP_CLIENT_PHONE_LABEL')\n\t\t\t);\n\t\t},\n\t\tclientAvatar(): string\n\t\t{\n\t\t\tconst client: ClientModel = this.client;\n\n\t\t\treturn client.image;\n\t\t},\n\t\tclientStatus(): string\n\t\t{\n\t\t\tif (!this.client.isReturning)\n\t\t\t{\n\t\t\t\treturn this.loc('BB_ACTIONS_POPUP_CLIENT_STATUS_FIRST');\n\t\t\t}\n\n\t\t\treturn this.loc('BB_ACTIONS_POPUP_CLIENT_STATUS_RETURNING');\n\t\t},\n\t\tuserIcon(): string\n\t\t{\n\t\t\treturn IconSet.PERSON;\n\t\t},\n\t\tpersonSize(): number\n\t\t{\n\t\t\treturn 26;\n\t\t},\n\t\tcallIcon(): string\n\t\t{\n\t\t\treturn IconSet.TELEPHONY_HANDSET_1;\n\t\t},\n\t\tmessageIcon(): string\n\t\t{\n\t\t\treturn IconSet.CHATS_1;\n\t\t},\n\t\ticonSize(): number\n\t\t{\n\t\t\treturn 20;\n\t\t},\n\t\ticonColor(): string\n\t\t{\n\t\t\treturn 'var(--ui-color-palette-gray-20)';\n\t\t},\n\t\timageTypeClass(): string[] | string\n\t\t{\n\t\t\treturn '--user';\n\t\t},\n\t\tsoonHint(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('BOOKING_BOOKING_SOON_HINT'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\toffsetLeft: -60,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\tasync mounted()\n\t{\n\t\tthis.isLoading = false;\n\t},\n\tmethods: {\n\t\topenClient(): void\n\t\t{\n\t\t\tconst entity = this.client.type.code.toLowerCase();\n\n\t\t\tSidePanel.Instance.open(`/crm/${entity}/details/${this.client.id}/`);\n\t\t},\n\t},\n\tcomponents: {\n\t\tButton,\n\t\tIcon,\n\t\tLoader,\n\t\tEmpty,\n\t\tNote,\n\t\tEditClientButton,\n\t},\n\ttemplate: `\n\t\t<div class=\"booking-actions-popup__item booking-actions-popup__item-client\">\n\t\t\t<div class=\"booking-actions-popup__item-client-client\">\n\t\t\t\t<Loader v-if=\"isLoading\" class=\"booking-actions-popup__item-client-loader\"/>\n\t\t\t\t<template v-else-if=\"client\">\n\t\t\t\t\t<div class=\"booking-actions-popup__item-client-icon-container\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"clientAvatar\"\n\t\t\t\t\t\t\tclass=\"booking-actions-popup-user__avatar\"\n\t\t\t\t\t\t\t:class=\"imageTypeClass\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tv-lazyload\n\t\t\t\t\t\t\t\t:data-lazyload-src=\"clientAvatar\"\n\t\t\t\t\t\t\t\tclass=\"booking-actions-popup-user__source\"\n\t\t\t\t\t\t\t\talt=\"user avatar\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-else class=\"booking-actions-popup__item-client-icon\">\n\t\t\t\t\t\t\t<Icon :name=\"userIcon\" :size=\"personSize\" :color=\"iconColor\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"booking-actions-popup__item-client-info\">\n\t\t\t\t\t\t<div class=\"booking-actions-popup__item-client-info-label\" :title=\"client.name\">\n\t\t\t\t\t\t\t{{ client.name }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"booking-actions-popup-item-info\">\n\t\t\t\t\t\t\t<div class=\"booking-actions-popup-item-subtitle\">\n\t\t\t\t\t\t\t\t{{ clientStatus }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"booking-actions-popup-item-subtitle\">\n\t\t\t\t\t\t\t\t{{ clientPhone }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"booking-actions-popup-item-buttons booking-actions-popup__item-client-info-btn\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-client-open'\"\n\t\t\t\t\t\t\t\t:data-booking-id=\"dataId\"\n\t\t\t\t\t\t\t\tclass=\"booking-actions-popup-item-client-open-button\"\n\t\t\t\t\t\t\t\t:text=\"loc('BB_ACTIONS_POPUP_CLIENT_BTN_LABEL')\"\n\t\t\t\t\t\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t\t\t:color=\"ButtonColor.LIGHT_BORDER\"\n\t\t\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\t\t\t@click=\"openClient\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<EditClientButton\n\t\t\t\t\t\t\t\t:id\n\t\t\t\t\t\t\t\t:clients\n\t\t\t\t\t\t\t\t:dataId\n\t\t\t\t\t\t\t\t:dataElementPrefix\n\t\t\t\t\t\t\t\t@visible=\"$emit('freeze')\"\n\t\t\t\t\t\t\t\t@invisible=\"$emit('unfreeze')\"\n\t\t\t\t\t\t\t\t@updateClients=\"$emit('updateClients', $event)\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-hint=\"soonHint\" class=\"booking-actions-popup__item-client-action\">\n\t\t\t\t\t\t<Icon :name=\"callIcon\" :size=\"iconSize\" :color=\"iconColor\"/>\n\t\t\t\t\t\t<Icon :name=\"messageIcon\" :size=\"iconSize\" :color=\"iconColor\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<Empty\n\t\t\t\t\t\t:id\n\t\t\t\t\t\t@popupShown=\"$emit('freeze')\"\n\t\t\t\t\t\t@popupClosed=\"$emit('unfreeze')\"\n\t\t\t\t\t\t@addClients=\"$emit('addClients', $event)\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t\t<Note\n\t\t\t\t:id\n\t\t\t\t:dataId\n\t\t\t\t:dataElementPrefix\n\t\t\t\t:note\n\t\t\t\t@popupShown=\"$emit('freeze')\"\n\t\t\t\t@popupClosed=\"$emit('unfreeze')\"\n\t\t\t\t@updateNote=\"$emit('updateNote', $event)\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { Event } from 'main.core';\nimport { MenuManager, Menu } from 'main.popup';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\n\nimport { Model } from 'booking.const';\nimport { Button, ButtonSize, ButtonColor, ButtonIcon } from 'booking.component.button';\nimport { limit } from 'booking.lib.limit';\n\nimport './confirmation-menu.css';\n\ntype ConfirmationMenuData = {\n\ticonSet: { [string]: string },\n\tbuttonSize: { [string]: string },\n\tbuttonColor: { [string]: string },\n\tbuttonIcon: { [string]: string },\n\tmenuPopup: Menu | null,\n}\n\nexport type UpdateConfirmationStatusPayload = {\n\tid: number | string;\n\tisConfirmed: boolean;\n}\n\nexport const ConfirmationMenu = {\n\tname: 'ConfirmationMenu',\n\temits: ['popupShown', 'popupClosed', 'updateConfirmationStatus'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tisConfirmed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdataId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: '',\n\t\t},\n\t\tdataElementPrefix: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tsetup(): ConfirmationMenuData\n\t{\n\t\tconst iconSet = IconSet;\n\t\tconst buttonSize = ButtonSize;\n\t\tconst buttonColor = ButtonColor;\n\t\tconst buttonIcon = ButtonIcon;\n\t\tconst menuPopup: Menu | null = null;\n\n\t\treturn {\n\t\t\ticonSet,\n\t\t\tbuttonSize,\n\t\t\tbuttonColor,\n\t\t\tbuttonIcon,\n\t\t\tmenuPopup,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tisFeatureEnabled: `${Model.Interface}/isFeatureEnabled`,\n\t\t}),\n\t\tpopupId(): string\n\t\t{\n\t\t\treturn `booking-confirmation-menu-${this.id}`;\n\t\t},\n\t},\n\tunmounted(): void\n\t{\n\t\tif (this.menuPopup)\n\t\t{\n\t\t\tthis.destroy();\n\t\t}\n\t},\n\tmethods: {\n\t\tupdateConfirmStatus(isConfirmed: boolean): void\n\t\t{\n\t\t\tthis.$emit('updateConfirmationStatus', {\n\t\t\t\tid: this.id,\n\t\t\t\tisConfirmed,\n\t\t\t});\n\t\t},\n\t\topenMenu(): void\n\t\t{\n\t\t\tif (!this.isFeatureEnabled)\n\t\t\t{\n\t\t\t\tlimit.show();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.menuPopup?.popupWindow?.isShown())\n\t\t\t{\n\t\t\t\tthis.destroy();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst menuButton = this.$refs.button.$el;\n\t\t\tthis.menuPopup = MenuManager.create(\n\t\t\t\tthis.popupId,\n\t\t\t\tmenuButton,\n\t\t\t\tthis.getMenuItems(),\n\t\t\t\t{\n\t\t\t\t\tclassName: 'booking-confirmation-menu-popup',\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\toffsetLeft: menuButton.offsetWidth - menuButton.offsetWidth / 2,\n\t\t\t\t\tangle: true,\n\t\t\t\t\tcacheable: true,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonClose: () => this.destroy(),\n\t\t\t\t\t\tonDestroy: () => this.unbindScrollEvent(),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t\tthis.menuPopup.show();\n\t\t\tthis.bindScrollEvent();\n\t\t\tthis.$emit('popupShown');\n\t\t},\n\t\tgetMenuItems(): Array\n\t\t{\n\t\t\tconst text = (\n\t\t\t\tthis.isConfirmed\n\t\t\t\t\t? this.loc('BB_ACTIONS_POPUP_CONFIRMATION_MENU_NOT_CONFIRMED')\n\t\t\t\t\t: this.loc('BB_ACTIONS_POPUP_CONFIRMATION_MENU_CONFIRMED')\n\t\t\t);\n\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\ttext,\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.updateConfirmStatus(!this.isConfirmed);\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\tdestroy(): void\n\t\t{\n\t\t\tMenuManager.destroy(this.popupId);\n\t\t\tthis.unbindScrollEvent();\n\t\t\tthis.$emit('popupClosed');\n\t\t},\n\t\tbindScrollEvent(): void\n\t\t{\n\t\t\tEvent.bind(document, 'scroll', this.adjustPosition, { capture: true });\n\t\t},\n\t\tunbindScrollEvent(): void\n\t\t{\n\t\t\tEvent.unbind(document, 'scroll', this.adjustPosition, { capture: true });\n\t\t},\n\t\tadjustPosition(): void\n\t\t{\n\t\t\tthis.menuPopup?.popupWindow?.adjustPosition();\n\t\t},\n\t},\n\tcomponents: {\n\t\tIcon,\n\t\tButton,\n\t},\n\ttemplate: `\n\t\t<Button\n\t\t\t:data-booking-id=\"dataId\"\n\t\t\t:data-element=\"dataElementPrefix + '-menu-confirmation-button'\"\n\t\t\tclass=\"booking-actions-popup-button-with-chevron\"\n\t\t\t:class=\"{'--lock': !isFeatureEnabled}\"\n\t\t\tbuttonClass=\"ui-btn-shadow\"\n\t\t\t:disabled=\"disabled || !isFeatureEnabled\"\n\t\t\t:text=\"loc('BB_ACTIONS_POPUP_CONFIRMATION_BTN_LABEL')\"\n\t\t\t:size=\"buttonSize.EXTRA_SMALL\"\n\t\t\t:color=\"buttonColor.LIGHT\"\n\t\t\t:round=\"true\"\n\t\t\tref=\"button\"\n\t\t\t@click=\"openMenu\"\n\t\t>\n\t\t\t<Icon v-if=\"isFeatureEnabled\" :name=\"iconSet.CHEVRON_DOWN\"/>\n\t\t\t<Icon v-else :name=\"iconSet.LOCK\"/>\n\t\t</Button>\n\t`,\n};\n","import { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport { ref } from 'ui.vue3';\n\nimport { Loader } from 'booking.component.loader';\nimport { BookingCounterType, HelpDesk } from 'booking.const';\nimport { helpDesk } from 'booking.lib.help-desk';\nimport type { BookingCounter } from 'booking.model.bookings';\n\nimport { ConfirmationMenu } from './confirmation-menu/confirmation-menu';\nimport type { UpdateConfirmationStatusPayload } from './confirmation-menu/confirmation-menu';\nimport './confirmation.css';\n\nexport type { UpdateConfirmationStatusPayload };\n\ntype OptionsDictionary = { [string]: string };\ntype ConfirmationData = {\n\ticonSet: OptionsDictionary,\n\tisLoading: boolean,\n}\n\ntype CounterValue = BookingCounter['value'];\n\nexport const Confirmation = {\n\tname: 'ActionsPopupConfirmation',\n\temits: ['open', 'close', 'updateConfirmationStatus'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tisConfirmed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\t/**\n\t\t * @type BookingCounter[]\n\t\t */\n\t\tcounters: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdataId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: '',\n\t\t},\n\t\tdataElementPrefix: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tsetup(): ConfirmationData\n\t{\n\t\tconst iconSet = IconSet;\n\t\tconst isLoading = ref(true);\n\n\t\treturn {\n\t\t\ticonSet,\n\t\t\tisLoading,\n\t\t};\n\t},\n\tasync mounted()\n\t{\n\t\tthis.isLoading = false;\n\t},\n\tcomputed: {\n\t\tdelayedCounter(): CounterValue\n\t\t{\n\t\t\treturn this.counters\n\t\t\t\t.find((counter) => counter.type === BookingCounterType.Delayed)?.value;\n\t\t},\n\t\tunconfirmedCounter(): CounterValue\n\t\t{\n\t\t\treturn this.counters\n\t\t\t\t.find((counter) => counter.type === BookingCounterType.Unconfirmed)?.value;\n\t\t},\n\t\ticonColor(): string\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.isConfirmed === false\n\t\t\t\t&& !this.unconfirmedCounter\n\t\t\t\t&& !this.delayedCounter\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn '#BDC1C6';\n\t\t\t}\n\n\t\t\treturn '#ffffff';\n\t\t},\n\t\tstateClass(): string\n\t\t{\n\t\t\tif (this.isConfirmed)\n\t\t\t{\n\t\t\t\treturn '--confirmed';\n\t\t\t}\n\n\t\t\tif (this.unconfirmedCounter)\n\t\t\t{\n\t\t\t\treturn '--not-confirmed';\n\t\t\t}\n\n\t\t\tif (this.delayedCounter)\n\t\t\t{\n\t\t\t\treturn '--delayed';\n\t\t\t}\n\n\t\t\treturn '--awaiting';\n\t\t},\n\t\tstateText(): string\n\t\t{\n\t\t\tif (this.isConfirmed)\n\t\t\t{\n\t\t\t\treturn this.loc('BB_ACTIONS_POPUP_CONFIRMATION_CONFIRMED');\n\t\t\t}\n\n\t\t\tif (this.unconfirmedCounter)\n\t\t\t{\n\t\t\t\treturn this.loc('BB_ACTIONS_POPUP_CONFIRMATION_NOT_CONFIRMED');\n\t\t\t}\n\n\t\t\tif (this.delayedCounter)\n\t\t\t{\n\t\t\t\treturn this.loc('BB_ACTIONS_POPUP_CONFIRMATION_DELAYED');\n\t\t\t}\n\n\t\t\treturn this.loc('BB_ACTIONS_POPUP_CONFIRMATION_AWAITING');\n\t\t},\n\t\thasBtnCounter(): boolean\n\t\t{\n\t\t\tif (this.isConfirmed)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn Boolean(this.unconfirmedCounter || this.delayedCounter);\n\t\t},\n\t},\n\tmethods: {\n\t\tshowHelpDesk(): void\n\t\t{\n\t\t\thelpDesk.show(\n\t\t\t\tHelpDesk.BookingActionsConfirmation.code,\n\t\t\t\tHelpDesk.BookingActionsConfirmation.anchorCode,\n\t\t\t);\n\t\t},\n\t},\n\tcomponents: {\n\t\tIcon,\n\t\tLoader,\n\t\tConfirmationMenu,\n\t},\n\ttemplate: `\n\t\t<div class=\"booking-actions-popup__item booking-actions-popup__item-confirmation-content\">\n\t\t\t<Loader v-if=\"isLoading\" class=\"booking-actions-popup__item-confirmation-loader\"/>\n\t\t\t<template v-else>\n\t\t\t\t<div :class=\"['booking-actions-popup-item-icon', stateClass]\">\n\t\t\t\t\t<Icon :name=\"iconSet.CHECK\" :color=\"iconColor\"/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-actions-popup-item-info\">\n\t\t\t\t\t<div class=\"booking-actions-popup-item-title\">\n\t\t\t\t\t\t<span>{{ loc('BB_ACTIONS_POPUP_CONFIRMATION_LABEL') }}</span>\n\t\t\t\t\t\t<Icon :name=\"iconSet.HELP\" @click=\"showHelpDesk\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\t:class=\"['booking-actions-popup-item-subtitle', stateClass]\"\n\t\t\t\t\t\tdata-element=\"booking-menu-confirmation-status\"\n\t\t\t\t\t\t:data-booking-id=\"dataId\"\n\t\t\t\t\t\t:data-confirmed=\"isConfirmed\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ stateText }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-actions-popup-item-buttons\">\n\t\t\t\t\t<ConfirmationMenu\n\t\t\t\t\t\t:id\n\t\t\t\t\t\t:isConfirmed\n\t\t\t\t\t\t:disabled\n\t\t\t\t\t\t:dataId\n\t\t\t\t\t\t:dataElementPrefix\n\t\t\t\t\t\t@popupShown=\"$emit('open')\"\n\t\t\t\t\t\t@popupClosed=\"$emit('close')\"\n\t\t\t\t\t\t@updateConfirmationStatus=\"$emit('updateConfirmationStatus', $event)\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"hasBtnCounter\"\n\t\t\t\t\t\tclass=\"booking-actions-popup-item-buttons-counter\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t`,\n};\n","import { Event, Runtime } from 'main.core';\nimport { DateTimeFormat } from 'main.date';\nimport { Menu, MenuManager } from 'main.popup';\nimport type { MenuItemOptions } from 'main.popup';\n\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { Dialog } from 'ui.entity-selector';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.main';\n\nimport { EntitySelectorEntity, HelpDesk, Model } from 'booking.const';\nimport { limit } from 'booking.lib.limit';\nimport { helpDesk } from 'booking.lib.help-desk';\nimport { DealHelper } from 'booking.lib.deal-helper';\nimport { Button, ButtonSize, ButtonColor, ButtonIcon } from 'booking.component.button';\nimport { Loader } from 'booking.component.loader';\nimport type { DealData } from 'booking.model.bookings';\n\nimport './deal.css';\n\nexport const Deal = {\n\tname: 'ActionsPopupDeal',\n\temits: ['freeze', 'unfreeze'],\n\tprops: {\n\t\t/**\n\t\t * @type DealData\n\t\t */\n\t\tdeal: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t\tdealHelper: {\n\t\t\ttype: DealHelper,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdataId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: '',\n\t\t},\n\t\tdataElementPrefix: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tIconSet,\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tButtonIcon,\n\t\t\tisLoading: false,\n\t\t\tsaveDealDebounce: Runtime.debounce(this.saveDeal, 10, this),\n\t\t};\n\t},\n\tmounted(): void\n\t{\n\t\tthis.dialog = new Dialog({\n\t\t\tcontext: 'BOOKING',\n\t\t\tmultiple: false,\n\t\t\ttargetNode: this.getDialogButton(),\n\t\t\twidth: 340,\n\t\t\theight: 340,\n\t\t\tenableSearch: true,\n\t\t\tdropdownMode: true,\n\t\t\tpreselectedItems: this.deal ? [[EntitySelectorEntity.Deal, this.deal.value]] : [],\n\t\t\tentities: [\n\t\t\t\t{\n\t\t\t\t\tid: EntitySelectorEntity.Deal,\n\t\t\t\t\tdynamicLoad: true,\n\t\t\t\t\tdynamicSearch: true,\n\t\t\t\t},\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tonShow: this.freeze,\n\t\t\t\tonHide: this.unfreeze,\n\t\t\t\t'Item:onSelect': this.itemChange,\n\t\t\t\t'Item:onDeselect': this.itemChange,\n\t\t\t},\n\t\t});\n\n\t\tEvent.bind(document, 'scroll', this.adjustPosition, true);\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tEvent.unbind(document, 'scroll', this.adjustPosition, true);\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tisFeatureEnabled: `${Model.Interface}/isFeatureEnabled`,\n\t\t}),\n\t\tmenuId(): string\n\t\t{\n\t\t\treturn `${this.dataElementPrefix}-actions-popup-deal-menu-${this.dataId}`;\n\t\t},\n\t\tdateFormatted(): string\n\t\t{\n\t\t\tif (!this.deal.data.createdTimestamp)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tconst format = DateTimeFormat.getFormat('DAY_MONTH_FORMAT');\n\n\t\t\treturn DateTimeFormat.format(format, this.deal.data.createdTimestamp);\n\t\t},\n\t},\n\tmethods: {\n\t\tfreeze(): void\n\t\t{\n\t\t\tthis.$emit('freeze');\n\t\t},\n\t\tunfreeze(): void\n\t\t{\n\t\t\tif (this.dialog?.isOpen() || this.getMenu()?.getPopupWindow().isShown())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('unfreeze');\n\t\t},\n\t\tcreateDeal(): void\n\t\t{\n\t\t\tif (!this.isFeatureEnabled)\n\t\t\t{\n\t\t\t\tvoid limit.show();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.dealHelper.createDeal();\n\t\t},\n\t\tshowMenu(): void\n\t\t{\n\t\t\tif (!this.isFeatureEnabled)\n\t\t\t{\n\t\t\t\tvoid limit.show();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst bindElement = this.$refs.moreButton.$el;\n\t\t\tMenuManager.destroy(this.menuId);\n\t\t\tMenuManager.show({\n\t\t\t\tid: this.menuId,\n\t\t\t\tbindElement,\n\t\t\t\titems: this.getMenuItems(),\n\t\t\t\toffsetLeft: bindElement.offsetWidth / 2,\n\t\t\t\tangle: true,\n\t\t\t\tevents: {\n\t\t\t\t\tonShow: this.freeze,\n\t\t\t\t\tonAfterClose: this.unfreeze,\n\t\t\t\t\tonDestroy: this.unfreeze,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tgetMenuItems(): MenuItemOptions[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\ttext: this.loc('BB_ACTIONS_POPUP_DEAL_CHANGE'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.showDealDialog();\n\t\t\t\t\t\tthis.getMenu().close();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: this.loc('BB_ACTIONS_POPUP_DEAL_CLEAR'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.dialog?.deselectAll();\n\t\t\t\t\t\tthis.saveDealDebounce(null);\n\t\t\t\t\t\tthis.getMenu().close();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\tshowDealDialog(): void\n\t\t{\n\t\t\tif (!this.isFeatureEnabled)\n\t\t\t{\n\t\t\t\tvoid limit.show();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.dialog.setTargetNode(this.getDialogButton());\n\t\t\tthis.dialog.show();\n\t\t},\n\t\tadjustPosition(): void\n\t\t{\n\t\t\tthis.dialog.setTargetNode(this.getDialogButton());\n\t\t\tthis.dialog.adjustPosition();\n\t\t\tthis.getMenu()?.getPopupWindow().adjustPosition();\n\t\t},\n\t\tgetMenu(): Menu | null\n\t\t{\n\t\t\treturn MenuManager.getMenuById(this.menuId);\n\t\t},\n\t\topenDeal(): void\n\t\t{\n\t\t\tthis.dealHelper.openDeal();\n\t\t},\n\t\titemChange(): void\n\t\t{\n\t\t\tconst dealData = this.getDealData();\n\n\t\t\tthis.saveDealDebounce(dealData);\n\n\t\t\tthis.dialog.hide();\n\t\t},\n\t\tgetDealData(): DealData | null\n\t\t{\n\t\t\tconst item = this.dialog.getSelectedItems()[0];\n\t\t\tif (!item)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.dealHelper.mapEntityInfoToDeal(item.getCustomData().get('entityInfo'));\n\t\t},\n\t\tsaveDeal(dealData: DealData | null): void\n\t\t{\n\t\t\tthis.dealHelper.saveDeal(dealData);\n\t\t},\n\t\tgetDialogButton(): HTMLElement\n\t\t{\n\t\t\treturn this.deal ? this.$refs.moreButton.$el : this.$refs.addButton.$el;\n\t\t},\n\t\tshowHelpDesk(): void\n\t\t{\n\t\t\thelpDesk.show(\n\t\t\t\tHelpDesk.BookingActionsDeal.code,\n\t\t\t\tHelpDesk.BookingActionsDeal.anchorCode,\n\t\t\t);\n\t\t},\n\t},\n\tcomponents: {\n\t\tButton,\n\t\tIcon,\n\t\tLoader,\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"booking-actions-popup__item booking-actions-popup__item-deal-content\"\n\t\t\t:class=\"{ '--active': deal }\"\n\t\t>\n\t\t\t<Loader v-if=\"isLoading\" class=\"booking-actions-popup__item-deal-loader\" />\n\t\t\t<template v-else>\n\t\t\t\t<div class=\"booking-actions-popup__item-deal\">\n\t\t\t\t\t<div class=\"booking-actions-popup-item-icon\">\n\t\t\t\t\t\t<Icon :name=\"IconSet.DEAL\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"booking-actions-popup-item-info\">\n\t\t\t\t\t\t<div class=\"booking-actions-popup-item-title\">\n\t\t\t\t\t\t\t<span>{{ loc('BB_ACTIONS_POPUP_DEAL_LABEL') }}</span>\n\t\t\t\t\t\t\t<Icon :name=\"IconSet.HELP\" @click=\"showHelpDesk\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<template v-if=\"deal\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"booking-actions-popup__item-deal-profit\"\n\t\t\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-deal-profit'\"\n\t\t\t\t\t\t\t\t:data-profit=\"deal.data.opportunity\"\n\t\t\t\t\t\t\t\t:data-booking-id=\"dataId\"\n\t\t\t\t\t\t\t\tv-html=\"deal.data.formattedOpportunity\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"booking-actions-popup-item-subtitle\"\n\t\t\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-deal-ts'\"\n\t\t\t\t\t\t\t\t:data-ts=\"deal.data.createdTimestamp * 1000\"\n\t\t\t\t\t\t\t\t:data-booking-id=\"dataId\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ dateFormatted }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<div class=\"booking-actions-popup-item-subtitle\">\n\t\t\t\t\t\t\t\t{{ loc('BB_ACTIONS_POPUP_DEAL_ADD_LABEL') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-actions-popup-item-buttons\">\n\t\t\t\t\t<template v-if=\"deal\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-deal-open-button'\"\n\t\t\t\t\t\t\t:data-booking-id=\"dataId\"\n\t\t\t\t\t\t\tbuttonClass=\"ui-btn-shadow\"\n\t\t\t\t\t\t\t:text=\"loc('BB_ACTIONS_POPUP_DEAL_OPEN')\"\n\t\t\t\t\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t\t:color=\"ButtonColor.LIGHT\"\n\t\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\t\t@click=\"openDeal\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-deal-more-button'\"\n\t\t\t\t\t\t\t:data-booking-id=\"dataId\"\n\t\t\t\t\t\t\tbuttonClass=\"ui-btn-shadow\"\n\t\t\t\t\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t\t:color=\"ButtonColor.LIGHT\"\n\t\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\t\tref=\"moreButton\"\n\t\t\t\t\t\t\t@click=\"showMenu\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Icon :name=\"IconSet.MORE\"/>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-deal-create-button'\"\n\t\t\t\t\t\t\t:data-booking-id=\"dataId\"\n\t\t\t\t\t\t\tclass=\"booking-actions-popup-plus-button\"\n\t\t\t\t\t\t\t:class=\"{'--lock': !isFeatureEnabled}\"\n\t\t\t\t\t\t\tbuttonClass=\"ui-btn-shadow\"\n\t\t\t\t\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t\t:color=\"ButtonColor.LIGHT\"\n\t\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\t\t@click=\"createDeal\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Icon v-if=\"isFeatureEnabled\" :name=\"IconSet.PLUS_30\"/>\n\t\t\t\t\t\t\t<Icon v-else :name=\"IconSet.LOCK\"/>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclass=\"booking-menu-deal-add-button\"\n\t\t\t\t\t\t\t:class=\"{'--lock': !isFeatureEnabled}\"\n\t\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-deal-add-button'\"\n\t\t\t\t\t\t\t:data-booking-id=\"dataId\"\n\t\t\t\t\t\t\tbuttonClass=\"ui-btn-shadow\"\n\t\t\t\t\t\t\t:text=\"loc('BB_ACTIONS_POPUP_DEAL_BTN_LABEL')\"\n\t\t\t\t\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t\t:color=\"ButtonColor.LIGHT\"\n\t\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\t\tref=\"addButton\"\n\t\t\t\t\t\t\t@click=\"showDealDialog\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Icon v-if=\"!isFeatureEnabled\" :name=\"IconSet.LOCK\"/>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t`,\n};\n","import { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.main';\n\nimport { Button, ButtonSize, ButtonColor, ButtonIcon } from 'booking.component.button';\nimport { Loader } from 'booking.component.loader';\nimport { bookingActionsService } from 'booking.provider.service.booking-actions-service';\n\nimport './document.css';\n\ntype OptionsDictionary = { [string]: string };\ntype DocumentData = {\n\ticonSet: OptionsDictionary,\n\tbuttonSize: OptionsDictionary,\n\tbuttonColor: OptionsDictionary,\n\tbuttonIcon: OptionsDictionary,\n}\n\nexport const Document = {\n\tname: 'ActionsPopupDocument',\n\temits: ['link'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdataId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: '',\n\t\t},\n\t\tdataElementPrefix: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tsetup(): DocumentData\n\t{\n\t\tconst iconSet = IconSet;\n\t\tconst buttonSize = ButtonSize;\n\t\tconst buttonColor = ButtonColor;\n\t\tconst buttonIcon = ButtonIcon;\n\n\t\treturn {\n\t\t\ticonSet,\n\t\t\tbuttonSize,\n\t\t\tbuttonColor,\n\t\t\tbuttonIcon,\n\t\t};\n\t},\n\tasync mounted()\n\t{\n\t\tawait bookingActionsService.getDocData();\n\n\t\tthis.isLoading = false;\n\t},\n\tmethods: {\n\t\tlinkDoc(): void\n\t\t{\n\t\t\tthis.$emit('link');\n\t\t},\n\t},\n\tcomponents: {\n\t\tButton,\n\t\tIcon,\n\t\tLoader,\n\t},\n\ttemplate: `\n\t\t<div class=\"booking-actions-popup__item booking-actions-popup__item-doc-content --disabled\">\n\t\t\t<Loader v-if=\"loading\" class=\"booking-actions-popup__item-doc-loader\"/>\n\t\t\t<template v-else>\n\t\t\t\t<div class=\"booking-actions-popup__item-doc\">\n\t\t\t\t\t<div class=\"booking-actions-popup-item-icon\">\n\t\t\t\t\t\t<Icon :name=\"iconSet.DOCUMENT\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"booking-actions-popup-item-info\">\n\t\t\t\t\t\t<div class=\"booking-actions-popup-item-title\">\n\t\t\t\t\t\t\t<span>{{ loc('BB_ACTIONS_POPUP_DOC_LABEL') }}</span>\n\t\t\t\t\t\t\t<Icon :name=\"iconSet.HELP\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"booking-actions-popup-item-subtitle\">\n\t\t\t\t\t\t\t{{ loc('BB_ACTIONS_POPUP_DOC_ADD_LABEL') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-actions-popup-item-buttons\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclass=\"booking-actions-popup-plus-button\"\n\t\t\t\t\t\tbuttonClass=\"ui-btn-shadow\"\n\t\t\t\t\t\t:size=\"buttonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t:color=\"buttonColor.LIGHT\"\n\t\t\t\t\t\t:disabled=\"disabled\"\n\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon :name=\"iconSet.PLUS_30\"/>\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tbuttonClass=\"ui-btn-shadow\"\n\t\t\t\t\t\t:text=\"loc('BB_ACTIONS_POPUP_DOC_BTN_LABEL')\"\n\t\t\t\t\t\t:size=\"buttonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t:color=\"buttonColor.LIGHT\"\n\t\t\t\t\t\t:disabled=\"disabled\"\n\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\t@click=\"linkDoc\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<div class=\"booking-booking-actions-popup-label\">\n\t\t\t\t{{ loc('BB_ACTIONS_POPUP_LABEL_SOON') }}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { hint } from 'ui.vue3.directives.hint';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\n\nimport './full-form.css';\n\nexport const FullForm = {\n\tname: 'ActionsPopupFullForm',\n\tdirectives: {\n\t\thint,\n\t},\n\tcomputed: {\n\t\tarrowIcon(): string\n\t\t{\n\t\t\treturn IconSet.CHEVRON_RIGHT;\n\t\t},\n\t\tarrowIconSize(): number\n\t\t{\n\t\t\treturn 12;\n\t\t},\n\t\tarrowIconColor(): string\n\t\t{\n\t\t\treturn 'var(--ui-color-palette-gray-40)';\n\t\t},\n\t\tsoonHint(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('BOOKING_BOOKING_SOON_HINT'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\toffsetLeft: 60,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\tcomponents: {\n\t\tIcon,\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tv-hint=\"soonHint\"\n\t\t\tclass=\"booking-actions-popup__item booking-actions-popup__item-full-form-content --disabled\"\n\t\t\trole=\"button\"\n\t\t\ttabindex=\"0\"\n\t\t>\n\t\t\t<div class=\"booking-actions-popup__item-full-form-label\">\n\t\t\t\t{{ loc('BB_ACTIONS_POPUP_FULL_FORM_LABEL') }}\n\t\t\t</div>\n\t\t\t<div class=\"booking-actions-popup__item-full-form-icon\">\n\t\t\t\t<Icon :name=\"arrowIcon\" :size=\"arrowIconSize\" :color=\"arrowIconColor\"/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Event } from 'main.core';\nimport { Menu, MenuManager } from 'main.popup';\nimport type { MenuItemOptions } from 'main.popup';\n\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.main';\n\nimport { HelpDesk, Model } from 'booking.const';\nimport { helpDesk } from 'booking.lib.help-desk';\nimport { limit } from 'booking.lib.limit';\nimport { Button, ButtonSize, ButtonColor, ButtonIcon } from 'booking.component.button';\nimport { Loader } from 'booking.component.loader';\nimport type { ClientData, ClientModel } from 'booking.model.clients';\nimport type { MessageStatusModel } from 'booking.model.message-status';\n\nimport './message.css';\n\nexport type UpdateNotificationTypePayload = {\n\tid: number | string,\n\tnotificationType: string;\n}\n\ntype OptionsDictionary = { [string]: string };\ntype MessageData = {\n\ticonSet: OptionsDictionary,\n\tbuttonSize: OptionsDictionary,\n\tbuttonColor: OptionsDictionary,\n\tbuttonIcon: OptionsDictionary,\n}\n\nexport const Message = {\n\tname: 'ActionsPopupMessage',\n\temits: ['open', 'close', 'updateNotificationType'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\t/**\n\t\t * @type ClientData\n\t\t */\n\t\tclientData: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdataId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: '',\n\t\t},\n\t\tdataElementPrefix: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tcomponents: {\n\t\tButton,\n\t\tIcon,\n\t\tLoader,\n\t},\n\tsetup(): MessageData\n\t{\n\t\tconst iconSet = IconSet;\n\t\tconst buttonSize = ButtonSize;\n\t\tconst buttonColor = ButtonColor;\n\t\tconst buttonIcon = ButtonIcon;\n\n\t\treturn {\n\t\t\ticonSet,\n\t\t\tbuttonSize,\n\t\t\tbuttonColor,\n\t\t\tbuttonIcon,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tdictionary: `${Model.Dictionary}/getNotifications`,\n\t\t\tisCurrentSenderAvailable: `${Model.Interface}/isCurrentSenderAvailable`,\n\t\t\tisFeatureEnabled: `${Model.Interface}/isFeatureEnabled`,\n\t\t}),\n\t\tmenuId(): string\n\t\t{\n\t\t\treturn `booking-message-menu-${this.bookingId}`;\n\t\t},\n\t\tclient(): ClientModel | null\n\t\t{\n\t\t\tconst clientData: ClientData = this.clientData;\n\n\t\t\treturn clientData ? this.$store.getters['clients/getByClientData'](clientData) : null;\n\t\t},\n\t\tstatus(): MessageStatusModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.MessageStatus}/getById`](this.id);\n\t\t},\n\t\ticonColor(): string\n\t\t{\n\t\t\tconst colorMap: Record<MessageStatusModel['semantic'], string> = {\n\t\t\t\tsuccess: '#ffffff',\n\t\t\t\tprimary: '#ffffff',\n\t\t\t\tfailure: '#ffffff',\n\t\t\t};\n\n\t\t\treturn colorMap[this.status.semantic] || '';\n\t\t},\n\t\tfailure(): boolean\n\t\t{\n\t\t\treturn this.status.semantic === 'failure';\n\t\t},\n\t},\n\tmethods: {\n\t\topenMenu(): void\n\t\t{\n\t\t\tif (!this.isFeatureEnabled)\n\t\t\t{\n\t\t\t\tlimit.show();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.status.isDisabled && this.isCurrentSenderAvailable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.getMenu()?.getPopupWindow()?.isShown())\n\t\t\t{\n\t\t\t\tthis.destroyMenu();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst menuButton = this.$refs.button.$el;\n\t\t\tMenuManager.create(\n\t\t\t\tthis.menuId,\n\t\t\t\tmenuButton,\n\t\t\t\tthis.getMenuItems(),\n\t\t\t\t{\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\toffsetLeft: menuButton.offsetWidth - menuButton.offsetWidth / 2,\n\t\t\t\t\tangle: true,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonClose: this.destroyMenu,\n\t\t\t\t\t\tonDestroy: this.destroyMenu,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t).show();\n\n\t\t\tthis.$emit('freeze');\n\t\t\tEvent.bind(document, 'scroll', this.adjustPosition, { capture: true });\n\t\t},\n\t\tgetMenuItems(): MenuItemOptions[]\n\t\t{\n\t\t\treturn Object.values(this.dictionary).map(({ name, value }) => ({\n\t\t\t\ttext: name,\n\t\t\t\tonclick: () => this.sendMessage(value),\n\t\t\t\tdisabled: value === this.dictionary.Feedback.value,\n\t\t\t}));\n\t\t},\n\t\tsendMessage(notificationType: string): void\n\t\t{\n\t\t\tthis.destroyMenu();\n\t\t\tthis.$emit('updateNotificationType', {\n\t\t\t\tid: this.id,\n\t\t\t\tnotificationType,\n\t\t\t});\n\t\t},\n\t\tdestroyMenu(): void\n\t\t{\n\t\t\tMenuManager.destroy(this.menuId);\n\t\t\tthis.$emit('close');\n\t\t\tEvent.unbind(document, 'scroll', this.adjustPosition, { capture: true });\n\t\t},\n\t\tadjustPosition(): void\n\t\t{\n\t\t\tthis.getMenu()?.getPopupWindow()?.adjustPosition();\n\t\t},\n\t\tgetMenu(): Menu | null\n\t\t{\n\t\t\treturn MenuManager.getMenuById(this.menuId);\n\t\t},\n\t\tshowHelpDesk(): void\n\t\t{\n\t\t\thelpDesk.show(\n\t\t\t\tHelpDesk.BookingActionsMessage.code,\n\t\t\t\tHelpDesk.BookingActionsMessage.anchorCode,\n\t\t\t);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"booking-actions-popup__item booking-actions-popup__item-message-content\"\n\t\t\t:class=\"{'--disabled': !isCurrentSenderAvailable}\"\n\t\t>\n\t\t\t<Loader v-if=\"loading\" class=\"booking-actions-popup__item-message-loader\"/>\n\t\t\t<template v-else>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"booking-actions-popup-item-icon\"\n\t\t\t\t\t:class=\"'--' + status.semantic\"\n\t\t\t\t>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\t:name=\"iconSet.SMS\"\n\t\t\t\t\t\t:color=\"iconColor\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-actions-popup-item-info\">\n\t\t\t\t\t<div class=\"booking-actions-popup-item-title\">\n\t\t\t\t\t\t<span :title=\"status.title\">{{ status.title }}</span>\n\t\t\t\t\t\t<Icon :name=\"iconSet.HELP\" @click=\"showHelpDesk\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"booking-actions-popup-item-subtitle\"\n\t\t\t\t\t\t:class=\"'--' + status.semantic\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ status.description }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-actions-popup-item-buttons\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-message-button'\"\n\t\t\t\t\t\t:data-booking-id=\"dataId\"\n\t\t\t\t\t\t:disabled=\"disabled || (status.isDisabled && isCurrentSenderAvailable)\"\n\t\t\t\t\t\tclass=\"booking-actions-popup-button-with-chevron\"\n\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t'--lock': !isFeatureEnabled,\n\t\t\t\t\t\t\t'--disabled': status.isDisabled && isCurrentSenderAvailable\n\t\t\t\t\t\t}\"\n\t\t\t\t\t\tbuttonClass=\"ui-btn-shadow\"\n\t\t\t\t\t\t:text=\"loc('BB_ACTIONS_POPUP_MESSAGE_BUTTON_SEND')\"\n\t\t\t\t\t\t:size=\"buttonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t:color=\"buttonColor.LIGHT\"\n\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\tref=\"button\"\n\t\t\t\t\t\t@click=\"openMenu\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon v-if=\"isFeatureEnabled\" :name=\"iconSet.CHEVRON_DOWN\"/>\n\t\t\t\t\t\t<Icon v-else :name=\"iconSet.LOCK\"/>\n\t\t\t\t\t</Button>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"failure\"\n\t\t\t\t\t\tclass=\"booking-actions-popup-item-buttons-counter\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<div\n\t\t\t\tv-if=\"!isCurrentSenderAvailable\"\n\t\t\t\tclass=\"booking-booking-actions-popup-label\"\n\t\t\t>\n\t\t\t\t{{ loc('BB_ACTIONS_POPUP_LABEL_SOON') }}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.main';\n\nimport './remove-button.css';\n\ntype RemoveButtonData = {\n\ticonSet: { [string]: string },\n}\n\nexport const RemoveButton = {\n\tname: 'RemoveButton',\n\temits: ['remove'],\n\tprops: {\n\t\tdataId: {\n\t\t\ttype: [String, Number],\n\t\t\trequired: true,\n\t\t},\n\t\tdataElementPrefix: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tsetup(): RemoveButtonData\n\t{\n\t\tconst iconSet = IconSet;\n\n\t\treturn {\n\t\t\ticonSet,\n\t\t};\n\t},\n\tcomponents: {\n\t\tIcon,\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"booking-actions-popup__item-remove-button\"\n\t\t\t:data-element=\"dataElementPrefix + '-menu-remove-button'\"\n\t\t\t:data-booking-id=\"dataId\"\n\t\t\t@click=\"$emit('remove')\"\n\t\t>\n\t\t\t<div class=\"booking-actions-popup__item-overbooking-label\">\n\t\t\t\t{{ loc('BB_ACTIONS_POPUP_OVERBOOKING_REMOVE') }}\n\t\t\t</div>\n\t\t\t<Icon :name=\"iconSet.TRASH_BIN\"/>\n\t\t</div>\n\t`,\n};\n","import { Event } from 'main.core';\nimport { MenuManager, Menu } from 'main.popup';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport type { MenuItemOptions } from 'main.popup';\n\nimport { Model } from 'booking.const';\nimport { limit } from 'booking.lib.limit';\nimport { Button, ButtonSize, ButtonColor, ButtonIcon } from 'booking.component.button';\n\nexport type VisitUpdateVisitStatusPayload = {\n\tid: string | number,\n\tvisitStatus: string,\n}\n\nexport const VisitMenu = {\n\tname: 'VisitMenu',\n\temits: ['popupShown', 'popupClosed', 'update:status'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdataId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tdataElementPrefix: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tdata(): { menuPopup: Menu | null }\n\t{\n\t\treturn {\n\t\t\tIconSet,\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tButtonIcon,\n\t\t\tmenuPopup: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tdictionary: `${Model.Dictionary}/getBookingVisitStatuses`,\n\t\t\tisFeatureEnabled: `${Model.Interface}/isFeatureEnabled`,\n\t\t}),\n\t\tpopupId(): string\n\t\t{\n\t\t\treturn `booking-visit-menu-${this.id}`;\n\t\t},\n\t},\n\tunmounted(): void\n\t{\n\t\tif (this.menuPopup)\n\t\t{\n\t\t\tthis.destroy();\n\t\t}\n\t},\n\tmethods: {\n\t\tupdateVisitStatus(status: string): void\n\t\t{\n\t\t\tthis.$emit('update:status', {\n\t\t\t\tid: this.id,\n\t\t\t\tvisitStatus: status,\n\t\t\t});\n\t\t},\n\t\topenMenu(): void\n\t\t{\n\t\t\tif (!this.isFeatureEnabled)\n\t\t\t{\n\t\t\t\tlimit.show();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.menuPopup?.popupWindow?.isShown())\n\t\t\t{\n\t\t\t\tthis.destroy();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst menuButton = this.$refs.button.$el;\n\t\t\tthis.menuPopup = MenuManager.create(\n\t\t\t\tthis.popupId,\n\t\t\t\tmenuButton,\n\t\t\t\tthis.getMenuItems(),\n\t\t\t\t{\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\toffsetLeft: menuButton.offsetWidth - menuButton.offsetWidth / 2,\n\t\t\t\t\tangle: true,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonClose: () => this.destroy(),\n\t\t\t\t\t\tonDestroy: () => this.unbindScrollEvent(),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t\tthis.menuPopup.show();\n\t\t\tthis.bindScrollEvent();\n\t\t\tthis.$emit('popupShown');\n\t\t},\n\t\tgetMenuItems(): MenuItemOptions[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\ttext: this.loc('BB_ACTIONS_POPUP_VISIT_BTN_LABEL_UNKNOWN'),\n\t\t\t\t\tonclick: () => this.setVisitStatus(this.dictionary.Unknown),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: this.loc('BB_ACTIONS_POPUP_VISIT_BTN_LABEL_VISITED'),\n\t\t\t\t\tonclick: () => this.setVisitStatus(this.dictionary.Visited),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: this.loc('BB_ACTIONS_POPUP_VISIT_BTN_LABEL_NOT_VISITED'),\n\t\t\t\t\tonclick: () => this.setVisitStatus(this.dictionary.NotVisited),\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\tsetVisitStatus(status: string)\n\t\t{\n\t\t\tthis.updateVisitStatus(status);\n\t\t\tthis.destroy();\n\t\t},\n\t\tdestroy(): void\n\t\t{\n\t\t\tMenuManager.destroy(this.popupId);\n\t\t\tthis.unbindScrollEvent();\n\t\t\tthis.$emit('popupClosed');\n\t\t},\n\t\tbindScrollEvent(): void\n\t\t{\n\t\t\tEvent.bind(document, 'scroll', this.adjustPosition, { capture: true });\n\t\t},\n\t\tunbindScrollEvent(): void\n\t\t{\n\t\t\tEvent.unbind(document, 'scroll', this.adjustPosition, { capture: true });\n\t\t},\n\t\tadjustPosition(): void\n\t\t{\n\t\t\tthis.menuPopup?.popupWindow?.adjustPosition();\n\t\t},\n\t},\n\tcomponents: {\n\t\tIcon,\n\t\tButton,\n\t},\n\ttemplate: `\n\t\t<Button\n\t\t\t:data-element=\"dataElementPrefix + '-menu-visit-button'\"\n\t\t\t:data-booking-id=\"dataId\"\n\t\t\t:disabled=\"disabled || !isFeatureEnabled\"\n\t\t\tclass=\"booking-actions-popup-button-with-chevron\"\n\t\t\t:class=\"{'--lock': !isFeatureEnabled}\"\n\t\t\tbuttonClass=\"ui-btn-shadow\"\n\t\t\t:text=\"loc('BB_ACTIONS_POPUP_VISIT_BTN_LABEL')\"\n\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t:color=\"ButtonColor.LIGHT\"\n\t\t\t:round=\"true\"\n\t\t\tref=\"button\"\n\t\t\t@click=\"openMenu\"\n\t\t>\n\t\t\t<Icon v-if=\"isFeatureEnabled\" :name=\"IconSet.CHEVRON_DOWN\"/>\n\t\t\t<Icon v-else :name=\"IconSet.LOCK\"/>\n\t\t</Button>\n\t`,\n};\n","import { ref } from 'ui.vue3';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.main';\n\nimport { HelpDesk, Model } from 'booking.const';\nimport { helpDesk } from 'booking.lib.help-desk';\nimport { Loader } from 'booking.component.loader';\n\nimport { VisitMenu } from './visit-menu/visit-menu';\nimport type { VisitUpdateVisitStatusPayload } from './visit-menu/visit-menu';\nimport './visit.css';\n\nexport type { VisitUpdateVisitStatusPayload };\n\ntype VisitData = {\n\ticonSet: { [string]: string },\n\tisLoading: boolean,\n}\n\nexport const Visit = {\n\tname: 'ActionsPopupVisit',\n\temits: ['freeze', 'unfreeze', 'update:visitStatus'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tvisitStatus: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thasClients: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdataId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tdataElementPrefix: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tsetup(): VisitData\n\t{\n\t\tconst iconSet = IconSet;\n\t\tconst isLoading = ref(true);\n\n\t\treturn {\n\t\t\ticonSet,\n\t\t\tisLoading,\n\t\t};\n\t},\n\tasync mounted()\n\t{\n\t\tthis.isLoading = false;\n\t},\n\tmethods: {\n\t\tshowHelpDesk(): void\n\t\t{\n\t\t\thelpDesk.show(\n\t\t\t\tHelpDesk.BookingActionsVisit.code,\n\t\t\t\tHelpDesk.BookingActionsVisit.anchorCode,\n\t\t\t);\n\t\t},\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tdictionary: `${Model.Dictionary}/getBookingVisitStatuses`,\n\t\t}),\n\t\tgetLocVisitStatus(): string\n\t\t{\n\t\t\tswitch (this.visitStatus)\n\t\t\t{\n\t\t\t\tcase this.dictionary.Visited:\n\t\t\t\t\treturn this.loc('BB_ACTIONS_POPUP_VISIT_BTN_LABEL_VISITED');\n\t\t\t\tcase this.dictionary.NotVisited:\n\t\t\t\t\treturn this.loc('BB_ACTIONS_POPUP_VISIT_BTN_LABEL_NOT_VISITED');\n\t\t\t\tdefault:\n\t\t\t\t\treturn (this.hasClients)\n\t\t\t\t\t\t? this.loc('BB_ACTIONS_POPUP_VISIT_BTN_LABEL_UNKNOWN')\n\t\t\t\t\t\t: this.loc('BB_ACTIONS_POPUP_VISIT_ADD_LABEL');\n\t\t\t}\n\t\t},\n\t\tgetVisitInfoStyles(): string\n\t\t{\n\t\t\tswitch (this.visitStatus)\n\t\t\t{\n\t\t\t\tcase this.dictionary.Visited:\n\t\t\t\t\treturn '--visited';\n\t\t\t\tcase this.dictionary.NotVisited:\n\t\t\t\t\treturn '--not-visited';\n\t\t\t\tdefault:\n\t\t\t\t\treturn '--unknown';\n\t\t\t}\n\t\t},\n\t\tcardIconColor(): string\n\t\t{\n\t\t\tswitch (this.visitStatus)\n\t\t\t{\n\t\t\t\tcase this.dictionary.NotVisited:\n\t\t\t\tcase this.dictionary.Visited:\n\t\t\t\t\treturn 'var(--ui-color-palette-white-base)';\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'var(--ui-color-palette-gray-20)';\n\t\t\t}\n\t\t},\n\t\ticonClass(): string\n\t\t{\n\t\t\tswitch (this.visitStatus)\n\t\t\t{\n\t\t\t\tcase this.dictionary.Visited:\n\t\t\t\t\treturn '--visited';\n\t\t\t\tcase this.dictionary.NotVisited:\n\t\t\t\t\treturn '--not-visited';\n\t\t\t\tdefault:\n\t\t\t\t\treturn '';\n\t\t\t}\n\t\t},\n\t},\n\tcomponents: {\n\t\tIcon,\n\t\tLoader,\n\t\tVisitMenu,\n\t},\n\ttemplate: `\n\t\t<div class=\"booking-actions-popup__item booking-actions-popup__item-visit-content\">\n\t\t\t<Loader v-if=\"isLoading\" class=\"booking-actions-popup__item-visit-loader\"/>\n\t\t\t<template v-else>\n\t\t\t\t<div :class=\"['booking-actions-popup-item-icon', iconClass]\">\n\t\t\t\t\t<Icon :name=\"iconSet.CUSTOMER_CARD\" :color=\"cardIconColor\"/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-actions-popup-item-info\">\n\t\t\t\t\t<div class=\"booking-actions-popup-item-title\">\n\t\t\t\t\t\t<span>{{ loc('BB_ACTIONS_POPUP_VISIT_LABEL') }}</span>\n\t\t\t\t\t\t<Icon :name=\"iconSet.HELP\" @click=\"showHelpDesk\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\t:class=\"['booking-actions-popup-item-subtitle', getVisitInfoStyles]\"\n\t\t\t\t\t\t:data-element=\"dataElementPrefix + '-menu-visit-status'\"\n\t\t\t\t\t\t:data-booking-id=\"id\"\n\t\t\t\t\t\t:data-visit-status=\"visitStatus\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ getLocVisitStatus }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-actions-popup-item-buttons\">\n\t\t\t\t\t<VisitMenu\n\t\t\t\t\t\t:id\n\t\t\t\t\t\t:dataId\n\t\t\t\t\t\t:dataElementPrefix\n\t\t\t\t\t\t:disabled\n\t\t\t\t\t\t@popupShown=\"$emit('freeze')\"\n\t\t\t\t\t\t@popupClosed=\"$emit('unfreeze')\"\n\t\t\t\t\t\t@update:status=\"$emit('update:visitStatus', $event)\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t`,\n};\n"],"names":["ActionsPopup","name","emits","props","bindElement","type","HTMLElement","required","popupId","Number","String","contentStructure","Array","popupOptions","Object","default","data","soonTmp","computed","actionsPopupId","config","className","width","offsetLeft","offsetWidth","offsetTop","animation","beforeCreate","PopupManager","getPopups","filter","popup","test","getId","forEach","destroy","components","StickyPopup","PopupMaker","template","Note","id","note","dataId","dataElementPrefix","IconSet","isPopupShown","isEditMode","mapGetters","isFeatureEnabled","Model","Interface","hasNote","Boolean","methods","onMouseEnter","showNoteTimeout","setTimeout","showViewPopup","onMouseLeave","clearTimeout","closeViewPopup","showPopup","closePopup","showEditPopup","closeEditPopup","$emit","saveBookingNote","NotePopup","Icon","Empty","directives","hint","ButtonSize","ButtonColor","ButtonIcon","isLoading","shownClientPopup","btnIcon","ADD","LOCK","userIcon","PERSON","personSize","callIcon","TELEPHONY_HANDSET_1","messageIcon","CHATS_1","iconSize","iconColor","soonHint","text","loc","showClientPopup","limit","show","hideClientPopup","addClientsToBook","clients","Button","ClientPopup","EditClientButton","setup","iconSet","buttonSize","buttonColor","buttonIcon","isClientPopupShowed","ref","getClientByClientData","$store","getters","Clients","currentClient","getByClientData","client","contact","company","map","clientData","clientModel","code","CrmEntity","Contact","Company","updateClient","SidePanel","SidePanelMain","BX","Client","lazyload","primaryClientData","clientPhone","phones","length","clientAvatar","image","clientStatus","isReturning","imageTypeClass","mounted","openClient","entity","toLowerCase","Instance","open","Loader","ConfirmationMenu","isConfirmed","disabled","menuPopup","unmounted","updateConfirmStatus","openMenu","popupWindow","isShown","menuButton","$refs","button","$el","MenuManager","create","getMenuItems","closeByEsc","autoHide","angle","cacheable","events","onClose","onDestroy","unbindScrollEvent","bindScrollEvent","onclick","Event","bind","document","adjustPosition","capture","unbind","Confirmation","counters","delayedCounter","find","counter","BookingCounterType","Delayed","value","unconfirmedCounter","Unconfirmed","stateClass","stateText","hasBtnCounter","showHelpDesk","helpDesk","HelpDesk","BookingActionsConfirmation","anchorCode","Deal","deal","dealHelper","DealHelper","saveDealDebounce","Runtime","debounce","saveDeal","dialog","Dialog","context","multiple","targetNode","getDialogButton","height","enableSearch","dropdownMode","preselectedItems","EntitySelectorEntity","entities","dynamicLoad","dynamicSearch","onShow","freeze","onHide","unfreeze","itemChange","beforeUnmount","menuId","dateFormatted","createdTimestamp","format","DateTimeFormat","getFormat","isOpen","getMenu","getPopupWindow","createDeal","showMenu","moreButton","items","onAfterClose","showDealDialog","close","deselectAll","setTargetNode","getMenuById","openDeal","dealData","getDealData","hide","item","getSelectedItems","mapEntityInfoToDeal","getCustomData","get","addButton","BookingActionsDeal","Document","loading","bookingActionsService","getDocData","linkDoc","FullForm","arrowIcon","CHEVRON_RIGHT","arrowIconSize","arrowIconColor","Message","dictionary","Dictionary","isCurrentSenderAvailable","bookingId","status","MessageStatus","colorMap","success","primary","failure","semantic","isDisabled","destroyMenu","values","sendMessage","Feedback","notificationType","BookingActionsMessage","RemoveButton","VisitMenu","updateVisitStatus","visitStatus","setVisitStatus","Unknown","Visited","NotVisited","Visit","hasClients","BookingActionsVisit","getLocVisitStatus","getVisitInfoStyles","cardIconColor","iconClass"],"mappings":";;;;;;OAWaA,YAAY,GAAG;GAC3BC,IAAI,EAAE,cAAc;GACpBC,KAAK,EAAE,CAAC,OAAO,CAAC;GAChBC,KAAK,EAAE;KACNC,WAAW,EAAE;OACZC,IAAI,EAAEC,WAAW;OACjBC,QAAQ,EAAE;MACV;KACDC,OAAO,EAAE;OACRH,IAAI,EAAE,CAACI,MAAM,EAAEC,MAAM,CAAC;OACtBH,QAAQ,EAAE;MACV;;CAEH;CACA;KACEI,gBAAgB,EAAE;OACjBN,IAAI,EAAEO,KAAK;OACXL,QAAQ,EAAE;MACV;;CAEH;CACA;KACEM,YAAY,EAAE;OACbR,IAAI,EAAES,MAAM;OACZC,OAAO,EAAE;;IAEV;GACDC,IAAI,GACJ;KACC,OAAO;OACNC,OAAO,EAAE;MACT;IACD;GACDC,QAAQ,EAAE;KACTC,cAAc,GACd;OACC,OAAQ,iCAAgC,IAAI,CAACX,OAAQ,EAAC;MACtD;KACDY,MAAM,GACN;OACC,OAAO;SACNC,SAAS,EAAE,+BAA+B;SAC1CjB,WAAW,EAAE,IAAI,CAACA,WAAW;SAC7BkB,KAAK,EAAE,GAAG;SACVC,UAAU,EAAE,IAAI,CAACnB,WAAW,CAACoB,WAAW;SACxCC,SAAS,EAAE,CAAC,GAAG;SACfC,SAAS,EAAE,cAAc;SACzB,GAAG,IAAI,CAACb;QACR;;IAEF;GACDc,YAAY,GACZ;KACCC,uBAAY,CAACC,SAAS,EAAE,CACtBC,MAAM,CAAEC,KAAY,IAAK,+BAA+B,CAACC,IAAI,CAACD,KAAK,CAACE,KAAK,EAAE,CAAC,CAAC,CAC7EC,OAAO,CAAEH,KAAY,IAAKA,KAAK,CAACI,OAAO,EAAE,CAAC;IAE5C;GACDC,UAAU,EAAE;kBACXC,mCAAW;iBACXC;IACA;GACDC,QAAQ,EAAG;;;;;;;;;;;;;;;;;CAiBZ,CAAC;;CC/EM,MAAMC,IAAI,GAAG;GACnBtC,KAAK,EAAE,CAAC,YAAY,EAAE,aAAa,EAAE,YAAY,CAAC;GAClDC,KAAK,EAAE;KACNsC,EAAE,EAAE;OACHpC,IAAI,EAAE,CAACI,MAAM,EAAEC,MAAM,CAAC;OACtBH,QAAQ,EAAE;MACV;KACDmC,IAAI,EAAE;OACLrC,IAAI,EAAEK,MAAM;OACZK,OAAO,EAAE;MACT;KACD4B,MAAM,EAAE;OACPtC,IAAI,EAAE,CAACI,MAAM,EAAEC,MAAM,CAAC;OACtBK,OAAO,EAAE;MACT;KACD6B,iBAAiB,EAAE;OAClBvC,IAAI,EAAEK,MAAM;OACZK,OAAO,EAAE;;IAEV;GACDC,IAAI,GACJ;KACC,OAAO;gBACN6B,sBAAO;OACPC,YAAY,EAAE,KAAK;OACnBC,UAAU,EAAE;MACZ;IACD;GACD7B,QAAQ,EAAE;KACT,GAAG8B,uBAAU,CAAC;OACbC,gBAAgB,EAAG,GAAEC,mBAAK,CAACC,SAAU;MACrC,CAAC;KACFC,OAAO,GACP;OACC,OAAOC,OAAO,CAAC,IAAI,CAACX,IAAI,CAAC;;IAE1B;GACDY,OAAO,EAAE;KACRC,YAAY,GACZ;OACC,IAAI,CAACC,eAAe,GAAGC,UAAU,CAAC,MAAM,IAAI,CAACC,aAAa,EAAE,EAAE,GAAG,CAAC;MAClE;KACDC,YAAY,GACZ;OACCC,YAAY,CAAC,IAAI,CAACJ,eAAe,CAAC;OAClC,IAAI,CAACK,cAAc,EAAE;MACrB;KACDH,aAAa,GACb;OACC,IAAI,IAAI,CAACZ,YAAY,IAAI,CAAC,IAAI,CAACM,OAAO,EACtC;SACC;;OAGD,IAAI,CAACL,UAAU,GAAG,KAAK;OACvB,IAAI,CAACe,SAAS,EAAE;MAChB;KACDD,cAAc,GACd;OACC,IAAI,IAAI,CAACd,UAAU,EACnB;SACC;;OAGD,IAAI,CAACgB,UAAU,EAAE;MACjB;KACDC,aAAa,GACb;OACC,IAAI,CAACjB,UAAU,GAAG,IAAI;OACtB,IAAI,CAACe,SAAS,EAAE;MAChB;KACDG,cAAc,GACd;OACC,IAAI,CAAC,IAAI,CAAClB,UAAU,EACpB;SACC;;OAGD,IAAI,CAACgB,UAAU,EAAE;MACjB;KACDD,SAAS,GACT;OACC,IAAI,CAAChB,YAAY,GAAG,IAAI;OACxB,IAAI,CAACoB,KAAK,CAAC,YAAY,CAAC;MACxB;KACDH,UAAU,GACV;OACC,IAAI,CAACjB,YAAY,GAAG,KAAK;OACzB,IAAI,CAACoB,KAAK,CAAC,aAAa,CAAC;MACzB;KACDC,eAAe,CAAC;OAAEzB;MAA4B,EAC9C;OACC,IAAI,CAACwB,KAAK,CAAC,YAAY,EAAE;SACxBzB,EAAE,EAAE,IAAI,CAACA,EAAE;SACXC;QACA,CAAC;;IAEH;GACDN,UAAU,EAAE;gBACXgC,qCAAS;WACTC;IACA;GACD9B,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAuDZ,CAAC;;CCtJM,MAAM+B,KAAK,GAAG;GACpBpE,KAAK,EAAE,CAAC,YAAY,EAAE,aAAa,EAAE,YAAY,CAAC;GAClDC,KAAK,EAAE;KACNsC,EAAE,EAAE;OACHpC,IAAI,EAAE,CAACI,MAAM,EAAEC,MAAM,CAAC;OACtBH,QAAQ,EAAE;;IAEX;GACDgE,UAAU,EAAE;WAAEC;IAAM;GACpBxD,IAAI,GACJ;KACC,OAAO;mBACNyD,mCAAU;oBACVC,oCAAW;mBACXC,mCAAU;OACVC,SAAS,EAAE,IAAI;OACfC,gBAAgB,EAAE;MAClB;IACD;GACD3D,QAAQ,EAAE;KACT,GAAG8B,uBAAU,CAAC;OACbC,gBAAgB,EAAG,GAAEC,mBAAK,CAACC,SAAU;MACrC,CAAC;KACF2B,OAAO,GACP;OACC,OAAO,IAAI,CAAC7B,gBAAgB,GAAG0B,mCAAU,CAACI,GAAG,GAAGJ,mCAAU,CAACK,IAAI;MAC/D;KACDC,QAAQ,GACR;OACC,OAAOpC,sBAAO,CAACqC,MAAM;MACrB;KACDC,UAAU,GACV;OACC,OAAO,EAAE;MACT;KACDC,QAAQ,GACR;OACC,OAAOvC,sBAAO,CAACwC,mBAAmB;MAClC;KACDC,WAAW,GACX;OACC,OAAOzC,sBAAO,CAAC0C,OAAO;MACtB;KACDC,QAAQ,GACR;OACC,OAAO,EAAE;MACT;KACDC,SAAS,GACT;OACC,OAAO,iCAAiC;MACxC;KACDC,QAAQ,GACR;OACC,OAAO;SACNC,IAAI,EAAE,IAAI,CAACC,GAAG,CAAC,2BAA2B,CAAC;SAC3C/E,YAAY,EAAE;WACbU,UAAU,EAAE,CAAC;;QAEd;;IAEF;GACD+B,OAAO,EAAE;KACRuC,eAAe,GACf;OACC,IAAI,CAAC,IAAI,CAAC5C,gBAAgB,EAC1B;SACC6C,uBAAK,CAACC,IAAI,EAAE;SAEZ;;OAGD,IAAI,CAAClB,gBAAgB,GAAG,IAAI;OAC5B,IAAI,CAACX,KAAK,CAAC,YAAY,CAAC;MACxB;KACD8B,eAAe,GACf;OACC,IAAI,CAACnB,gBAAgB,GAAG,KAAK;OAC7B,IAAI,CAACX,KAAK,CAAC,aAAa,CAAC;MACzB;KACD+B,gBAAgB,CAACC,OAAqB,EACtC;OACC,IAAI,CAAChC,KAAK,CAAC,YAAY,EAAE;SACxBzB,EAAE,EAAE,IAAI,CAACA,EAAE;SACXyD;QACA,CAAC;;IAEH;GACD9D,UAAU,EAAE;aACX+D,+BAAM;WACN9B,wBAAI;kBACJ+B;IACA;GACD7D,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAuCZ,CAAC;;CC7HM,MAAM8D,gBAAgB,GAAG;GAC/BpG,IAAI,EAAE,kBAAkB;GACxBC,KAAK,EAAE,CAAC,SAAS,EAAE,WAAW,EAAE,eAAe,CAAC;GAChDC,KAAK,EAAE;KACNsC,EAAE,EAAE;OACHpC,IAAI,EAAE,CAACI,MAAM,EAAEG,KAAK,CAAC;OACrBL,QAAQ,EAAE;MACV;;CAEH;CACA;KACE2F,OAAO,EAAE;OACR7F,IAAI,EAAEO,KAAK;OACXG,OAAO,EAAE,MAAM;MACf;KACD4B,MAAM,EAAE;OACPtC,IAAI,EAAE,CAACI,MAAM,EAAEC,MAAM,CAAC;OACtBK,OAAO,EAAE;MACT;KACD6B,iBAAiB,EAAE;OAClBvC,IAAI,EAAEK,MAAM;OACZK,OAAO,EAAE;;IAEV;GACDuF,KAAK,GACL;KACC,MAAMC,OAAO,GAAG1D,sBAAO;KACvB,MAAM2D,UAAU,GAAG/B,mCAAU;KAC7B,MAAMgC,WAAW,GAAG/B,oCAAW;KAC/B,MAAMgC,UAAU,GAAG/B,mCAAU;KAC7B,MAAMgC,mBAAmB,GAAGC,WAAG,CAAC,KAAK,CAAC;KAEtC,OAAO;OACNL,OAAO;OACPC,UAAU;OACVC,WAAW;OACXC,UAAU;OACVC;MACA;IACD;GACDzF,QAAQ,EAAE;KACT2F,qBAAqB,GACrB;OACC,OAAO,IAAI,CAACC,MAAM,CAACC,OAAO,CAAE,GAAE7D,mBAAK,CAAC8D,OAAQ,kBAAiB,CAAC;MAC9D;KACDC,aAAa,GACb;OACC,MAAMC,eAAe,GAAG,IAAI,CAACL,qBAAqB;OAClD,MAAMM,MAAwD,GAAG;SAChEC,OAAO,EAAE,IAAI;SACbC,OAAO,EAAE;QACT;OAED,CAAC,IAAI,CAACnB,OAAO,IAAI,EAAE,EAAEoB,GAAG,CAAEC,UAAU,IAAKL,eAAe,CAACK,UAAU,CAAC,CAAC,CACnErF,OAAO,CAAEsF,WAAW,IAAK;SACzB,IAAIA,WAAW,CAACnH,IAAI,CAACoH,IAAI,KAAKC,uBAAS,CAACC,OAAO,EAC/C;WACCR,MAAM,CAACC,OAAO,GAAGI,WAAW;UAC5B,MACI,IAAIA,WAAW,CAACnH,IAAI,CAACoH,IAAI,KAAKC,uBAAS,CAACE,OAAO,EACpD;WACCT,MAAM,CAACE,OAAO,GAAGG,WAAW;;QAE7B,CAAC;OAEH,OAAOL,MAAM;;IAEd;GACD7D,OAAO,EAAE;KACRuE,YAAY,CAAC3B,OAAqB,EAClC;OACC,IAAI,CAAChC,KAAK,CAAC,eAAe,EAAE;SAC3BzB,EAAE,EAAE,IAAI,CAACA,EAAE;SACXyD;QACA,CAAC;MACF;KACDpC,SAAS,GACT;OACC,IAAI,CAAC6C,mBAAmB,GAAG,IAAI;OAC/B,IAAI,CAACzC,KAAK,CAAC,SAAS,CAAC;MACrB;KACDH,UAAU,GACV;OACC,IAAI,CAAC4C,mBAAmB,GAAG,KAAK;OAChC,IAAI,CAACzC,KAAK,CAAC,WAAW,CAAC;;IAExB;GACD9B,UAAU,EAAE;kBACXgE,yCAAW;aACXD,+BAAM;WACN9B;IACA;GACD9B,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;CAoBZ,CAAC;;CCrHD,MAAMuF,SAAS,GAAGC,wBAAa,IAAIC,EAAE,CAACF,SAAS;AAE/C,OAAaG,MAAM,GAAG;GACrBhI,IAAI,EAAE,oBAAoB;GAC1BsE,UAAU,EAAE;eAAE2D,oCAAQ;WAAE1D;IAAM;GAC9BtE,KAAK,EAAE,CACN,QAAQ,EACR,UAAU,EACV,YAAY,EACZ,eAAe,EACf,YAAY,CACZ;GACDC,KAAK,EAAE;KACNsC,EAAE,EAAE;OACHpC,IAAI,EAAE,CAACI,MAAM,EAAEC,MAAM,CAAC;OACtBH,QAAQ,EAAE;MACV;;CAEH;CACA;KACE4H,iBAAiB,EAAE;OAClB9H,IAAI,EAAES,MAAM;OACZC,OAAO,EAAE;MACT;;CAEH;CACA;KACEmF,OAAO,EAAE;OACR7F,IAAI,EAAEO,KAAK;OACXG,OAAO,EAAE,MAAM;MACf;KACD2B,IAAI,EAAE;OACLrC,IAAI,EAAEK,MAAM;OACZK,OAAO,EAAE;MACT;KACD4B,MAAM,EAAE;OACPtC,IAAI,EAAE,CAACI,MAAM,EAAEC,MAAM,CAAC;OACtBK,OAAO,EAAE;MACT;KACD6B,iBAAiB,EAAE;OAClBvC,IAAI,EAAEK,MAAM;OACZK,OAAO,EAAE;;IAEV;GACDC,IAAI,GACJ;KACC,OAAO;mBACNyD,mCAAU;oBACVC,oCAAW;mBACXC,mCAAU;OACVC,SAAS,EAAE;MACX;IACD;GACD1D,QAAQ,EAAE;KACTiG,MAAM,GACN;OACC,MAAMI,UAAsB,GAAG,IAAI,CAACY,iBAAiB;OAErD,OAAOZ,UAAU,GAAG,IAAI,CAACT,MAAM,CAACC,OAAO,CAAC,yBAAyB,CAAC,CAACQ,UAAU,CAAC,GAAG,IAAI;MACrF;KACDa,WAAW,GACX;OACC,MAAMjB,MAAmB,GAAG,IAAI,CAACA,MAAM;OAEvC,OACCA,MAAM,CAACkB,MAAM,CAACC,MAAM,GAAG,CAAC,GACrBnB,MAAM,CAACkB,MAAM,CAAC,CAAC,CAAC,GAChB,IAAI,CAACzC,GAAG,CAAC,qCAAqC,CAAC;MAEnD;KACD2C,YAAY,GACZ;OACC,MAAMpB,MAAmB,GAAG,IAAI,CAACA,MAAM;OAEvC,OAAOA,MAAM,CAACqB,KAAK;MACnB;KACDC,YAAY,GACZ;OACC,IAAI,CAAC,IAAI,CAACtB,MAAM,CAACuB,WAAW,EAC5B;SACC,OAAO,IAAI,CAAC9C,GAAG,CAAC,sCAAsC,CAAC;;OAGxD,OAAO,IAAI,CAACA,GAAG,CAAC,0CAA0C,CAAC;MAC3D;KACDX,QAAQ,GACR;OACC,OAAOpC,sBAAO,CAACqC,MAAM;MACrB;KACDC,UAAU,GACV;OACC,OAAO,EAAE;MACT;KACDC,QAAQ,GACR;OACC,OAAOvC,sBAAO,CAACwC,mBAAmB;MAClC;KACDC,WAAW,GACX;OACC,OAAOzC,sBAAO,CAAC0C,OAAO;MACtB;KACDC,QAAQ,GACR;OACC,OAAO,EAAE;MACT;KACDC,SAAS,GACT;OACC,OAAO,iCAAiC;MACxC;KACDkD,cAAc,GACd;OACC,OAAO,QAAQ;MACf;KACDjD,QAAQ,GACR;OACC,OAAO;SACNC,IAAI,EAAE,IAAI,CAACC,GAAG,CAAC,2BAA2B,CAAC;SAC3C/E,YAAY,EAAE;WACbU,UAAU,EAAE,CAAC;;QAEd;;IAEF;GACD,MAAMqH,OAAO,GACb;KACC,IAAI,CAAChE,SAAS,GAAG,KAAK;IACtB;GACDtB,OAAO,EAAE;KACRuF,UAAU,GACV;OACC,MAAMC,MAAM,GAAG,IAAI,CAAC3B,MAAM,CAAC9G,IAAI,CAACoH,IAAI,CAACsB,WAAW,EAAE;OAElDjB,SAAS,CAACkB,QAAQ,CAACC,IAAI,CAAE,QAAOH,MAAO,YAAW,IAAI,CAAC3B,MAAM,CAAC1E,EAAG,GAAE,CAAC;;IAErE;GACDL,UAAU,EAAE;aACX+D,+BAAM;WACN9B,wBAAI;aACJ6E,+BAAM;KACN5E,KAAK;KACL9B,IAAI;KACJ6D;IACA;GACD9D,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAiFZ,CAAC;;CC3NM,MAAM4G,gBAAgB,GAAG;GAC/BlJ,IAAI,EAAE,kBAAkB;GACxBC,KAAK,EAAE,CAAC,YAAY,EAAE,aAAa,EAAE,0BAA0B,CAAC;GAChEC,KAAK,EAAE;KACNsC,EAAE,EAAE;OACHpC,IAAI,EAAE,CAACI,MAAM,EAAEC,MAAM,CAAC;OACtBH,QAAQ,EAAE;MACV;KACD6I,WAAW,EAAE;OACZ/I,IAAI,EAAEgD,OAAO;OACb9C,QAAQ,EAAE;MACV;KACD8I,QAAQ,EAAE;OACThJ,IAAI,EAAEgD,OAAO;OACbtC,OAAO,EAAE;MACT;KACD4B,MAAM,EAAE;OACPtC,IAAI,EAAE,CAACI,MAAM,EAAEC,MAAM,CAAC;OACtBK,OAAO,EAAE;MACT;KACD6B,iBAAiB,EAAE;OAClBvC,IAAI,EAAEK,MAAM;OACZK,OAAO,EAAE;;IAEV;GACDuF,KAAK,GACL;KACC,MAAMC,OAAO,GAAG1D,sBAAO;KACvB,MAAM2D,UAAU,GAAG/B,mCAAU;KAC7B,MAAMgC,WAAW,GAAG/B,oCAAW;KAC/B,MAAMgC,UAAU,GAAG/B,mCAAU;KAC7B,MAAM2E,SAAsB,GAAG,IAAI;KAEnC,OAAO;OACN/C,OAAO;OACPC,UAAU;OACVC,WAAW;OACXC,UAAU;OACV4C;MACA;IACD;GACDpI,QAAQ,EAAE;KACT,GAAG8B,uBAAU,CAAC;OACbC,gBAAgB,EAAG,GAAEC,mBAAK,CAACC,SAAU;MACrC,CAAC;KACF3C,OAAO,GACP;OACC,OAAQ,6BAA4B,IAAI,CAACiC,EAAG,EAAC;;IAE9C;GACD8G,SAAS,GACT;KACC,IAAI,IAAI,CAACD,SAAS,EAClB;OACC,IAAI,CAACnH,OAAO,EAAE;;IAEf;GACDmB,OAAO,EAAE;KACRkG,mBAAmB,CAACJ,WAAoB,EACxC;OACC,IAAI,CAAClF,KAAK,CAAC,0BAA0B,EAAE;SACtCzB,EAAE,EAAE,IAAI,CAACA,EAAE;SACX2G;QACA,CAAC;MACF;KACDK,QAAQ,GACR;OAAA;OACC,IAAI,CAAC,IAAI,CAACxG,gBAAgB,EAC1B;SACC6C,uBAAK,CAACC,IAAI,EAAE;SAEZ;;OAGD,uBAAI,IAAI,CAACuD,SAAS,sCAAd,gBAAgBI,WAAW,aAA3B,sBAA6BC,OAAO,EAAE,EAC1C;SACC,IAAI,CAACxH,OAAO,EAAE;SAEd;;OAGD,MAAMyH,UAAU,GAAG,IAAI,CAACC,KAAK,CAACC,MAAM,CAACC,GAAG;OACxC,IAAI,CAACT,SAAS,GAAGU,sBAAW,CAACC,MAAM,CAClC,IAAI,CAACzJ,OAAO,EACZoJ,UAAU,EACV,IAAI,CAACM,YAAY,EAAE,EACnB;SACC7I,SAAS,EAAE,iCAAiC;SAC5C8I,UAAU,EAAE,IAAI;SAChBC,QAAQ,EAAE,IAAI;SACd3I,SAAS,EAAE,CAAC;SACZF,UAAU,EAAEqI,UAAU,CAACpI,WAAW,GAAGoI,UAAU,CAACpI,WAAW,GAAG,CAAC;SAC/D6I,KAAK,EAAE,IAAI;SACXC,SAAS,EAAE,IAAI;SACfC,MAAM,EAAE;WACPC,OAAO,EAAE,MAAM,IAAI,CAACrI,OAAO,EAAE;WAC7BsI,SAAS,EAAE,MAAM,IAAI,CAACC,iBAAiB;;QAExC,CACD;OACD,IAAI,CAACpB,SAAS,CAACvD,IAAI,EAAE;OACrB,IAAI,CAAC4E,eAAe,EAAE;OACtB,IAAI,CAACzG,KAAK,CAAC,YAAY,CAAC;MACxB;KACDgG,YAAY,GACZ;OACC,MAAMvE,IAAI,GACT,IAAI,CAACyD,WAAW,GACb,IAAI,CAACxD,GAAG,CAAC,kDAAkD,CAAC,GAC5D,IAAI,CAACA,GAAG,CAAC,8CAA8C,CAC1D;OAED,OAAO,CACN;SACCD,IAAI;SACJiF,OAAO,EAAE,MAAM;WACd,IAAI,CAACpB,mBAAmB,CAAC,CAAC,IAAI,CAACJ,WAAW,CAAC;WAC3C,IAAI,CAACjH,OAAO,EAAE;;QAEf,CACD;MACD;KACDA,OAAO,GACP;OACC6H,sBAAW,CAAC7H,OAAO,CAAC,IAAI,CAAC3B,OAAO,CAAC;OACjC,IAAI,CAACkK,iBAAiB,EAAE;OACxB,IAAI,CAACxG,KAAK,CAAC,aAAa,CAAC;MACzB;KACDyG,eAAe,GACf;OACCE,eAAK,CAACC,IAAI,CAACC,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAACC,cAAc,EAAE;SAAEC,OAAO,EAAE;QAAM,CAAC;MACtE;KACDP,iBAAiB,GACjB;OACCG,eAAK,CAACK,MAAM,CAACH,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAACC,cAAc,EAAE;SAAEC,OAAO,EAAE;QAAM,CAAC;MACxE;KACDD,cAAc,GACd;OAAA;OACC,wBAAI,CAAC1B,SAAS,8CAAd,iBAAgBI,WAAW,qBAA3B,sBAA6BsB,cAAc,EAAE;;IAE9C;GACD5I,UAAU,EAAE;WACXiC,wBAAI;aACJ8B;IACA;GACD5D,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;CAmBZ,CAAC;;OCtKY4I,YAAY,GAAG;GAC3BlL,IAAI,EAAE,0BAA0B;GAChCC,KAAK,EAAE,CAAC,MAAM,EAAE,OAAO,EAAE,0BAA0B,CAAC;GACpDC,KAAK,EAAE;KACNsC,EAAE,EAAE;OACHpC,IAAI,EAAE,CAACI,MAAM,EAAEC,MAAM,CAAC;OACtBH,QAAQ,EAAE;MACV;KACD6I,WAAW,EAAE;OACZ/I,IAAI,EAAEgD,OAAO;OACb9C,QAAQ,EAAE;MACV;;CAEH;CACA;KACE6K,QAAQ,EAAE;OACT/K,IAAI,EAAEO,KAAK;OACXG,OAAO,EAAE,MAAM;MACf;KACDsI,QAAQ,EAAE;OACThJ,IAAI,EAAEgD,OAAO;OACbtC,OAAO,EAAE;MACT;KACD4B,MAAM,EAAE;OACPtC,IAAI,EAAE,CAACI,MAAM,EAAEC,MAAM,CAAC;OACtBK,OAAO,EAAE;MACT;KACD6B,iBAAiB,EAAE;OAClBvC,IAAI,EAAEK,MAAM;OACZK,OAAO,EAAE;;IAEV;GACDuF,KAAK,GACL;KACC,MAAMC,OAAO,GAAG1D,sBAAO;KACvB,MAAM+B,SAAS,GAAGgC,WAAG,CAAC,IAAI,CAAC;KAE3B,OAAO;OACNL,OAAO;OACP3B;MACA;IACD;GACD,MAAMgE,OAAO,GACb;KACC,IAAI,CAAChE,SAAS,GAAG,KAAK;IACtB;GACD1D,QAAQ,EAAE;KACTmK,cAAc,GACd;OAAA;OACC,8BAAO,IAAI,CAACD,QAAQ,CAClBE,IAAI,CAAEC,OAAO,IAAKA,OAAO,CAAClL,IAAI,KAAKmL,gCAAkB,CAACC,OAAO,CAAC,qBADzD,oBAC2DC,KAAK;MACvE;KACDC,kBAAkB,GAClB;OAAA;OACC,+BAAO,IAAI,CAACP,QAAQ,CAClBE,IAAI,CAAEC,OAAO,IAAKA,OAAO,CAAClL,IAAI,KAAKmL,gCAAkB,CAACI,WAAW,CAAC,qBAD7D,qBAC+DF,KAAK;MAC3E;KACDjG,SAAS,GACT;OACC,IACC,IAAI,CAAC2D,WAAW,KAAK,KAAK,IACvB,CAAC,IAAI,CAACuC,kBAAkB,IACxB,CAAC,IAAI,CAACN,cAAc,EAExB;SACC,OAAO,SAAS;;OAGjB,OAAO,SAAS;MAChB;KACDQ,UAAU,GACV;OACC,IAAI,IAAI,CAACzC,WAAW,EACpB;SACC,OAAO,aAAa;;OAGrB,IAAI,IAAI,CAACuC,kBAAkB,EAC3B;SACC,OAAO,iBAAiB;;OAGzB,IAAI,IAAI,CAACN,cAAc,EACvB;SACC,OAAO,WAAW;;OAGnB,OAAO,YAAY;MACnB;KACDS,SAAS,GACT;OACC,IAAI,IAAI,CAAC1C,WAAW,EACpB;SACC,OAAO,IAAI,CAACxD,GAAG,CAAC,yCAAyC,CAAC;;OAG3D,IAAI,IAAI,CAAC+F,kBAAkB,EAC3B;SACC,OAAO,IAAI,CAAC/F,GAAG,CAAC,6CAA6C,CAAC;;OAG/D,IAAI,IAAI,CAACyF,cAAc,EACvB;SACC,OAAO,IAAI,CAACzF,GAAG,CAAC,uCAAuC,CAAC;;OAGzD,OAAO,IAAI,CAACA,GAAG,CAAC,wCAAwC,CAAC;MACzD;KACDmG,aAAa,GACb;OACC,IAAI,IAAI,CAAC3C,WAAW,EACpB;SACC,OAAO,KAAK;;OAGb,OAAO/F,OAAO,CAAC,IAAI,CAACsI,kBAAkB,IAAI,IAAI,CAACN,cAAc,CAAC;;IAE/D;GACD/H,OAAO,EAAE;KACR0I,YAAY,GACZ;OACCC,6BAAQ,CAAClG,IAAI,CACZmG,sBAAQ,CAACC,0BAA0B,CAAC1E,IAAI,EACxCyE,sBAAQ,CAACC,0BAA0B,CAACC,UAAU,CAC9C;;IAEF;GACDhK,UAAU,EAAE;WACXiC,wBAAI;aACJ6E,+BAAM;KACNC;IACA;GACD5G,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAwCZ,CAAC;;OC9KY8J,IAAI,GAAG;GACnBpM,IAAI,EAAE,kBAAkB;GACxBC,KAAK,EAAE,CAAC,QAAQ,EAAE,UAAU,CAAC;GAC7BC,KAAK,EAAE;;CAER;CACA;KACEmM,IAAI,EAAE;OACLjM,IAAI,EAAES,MAAM;OACZC,OAAO,EAAE;MACT;KACDwL,UAAU,EAAE;OACXlM,IAAI,EAAEmM,iCAAU;OAChBjM,QAAQ,EAAE;MACV;KACD8I,QAAQ,EAAE;OACThJ,IAAI,EAAEgD,OAAO;OACbtC,OAAO,EAAE;MACT;KACD4B,MAAM,EAAE;OACPtC,IAAI,EAAE,CAACI,MAAM,EAAEC,MAAM,CAAC;OACtBK,OAAO,EAAE;MACT;KACD6B,iBAAiB,EAAE;OAClBvC,IAAI,EAAEK,MAAM;OACZK,OAAO,EAAE;;IAEV;GACDC,IAAI,GACJ;KACC,OAAO;gBACN6B,sBAAO;mBACP4B,mCAAU;oBACVC,oCAAW;mBACXC,mCAAU;OACVC,SAAS,EAAE,KAAK;OAChB6H,gBAAgB,EAAEC,iBAAO,CAACC,QAAQ,CAAC,IAAI,CAACC,QAAQ,EAAE,EAAE,EAAE,IAAI;MAC1D;IACD;GACDhE,OAAO,GACP;KACC,IAAI,CAACiE,MAAM,GAAG,IAAIC,wBAAM,CAAC;OACxBC,OAAO,EAAE,SAAS;OAClBC,QAAQ,EAAE,KAAK;OACfC,UAAU,EAAE,IAAI,CAACC,eAAe,EAAE;OAClC5L,KAAK,EAAE,GAAG;OACV6L,MAAM,EAAE,GAAG;OACXC,YAAY,EAAE,IAAI;OAClBC,YAAY,EAAE,IAAI;OAClBC,gBAAgB,EAAE,IAAI,CAAChB,IAAI,GAAG,CAAC,CAACiB,kCAAoB,CAAClB,IAAI,EAAE,IAAI,CAACC,IAAI,CAACZ,KAAK,CAAC,CAAC,GAAG,EAAE;OACjF8B,QAAQ,EAAE,CACT;SACC/K,EAAE,EAAE8K,kCAAoB,CAAClB,IAAI;SAC7BoB,WAAW,EAAE,IAAI;SACjBC,aAAa,EAAE;QACf,CACD;OACDnD,MAAM,EAAE;SACPoD,MAAM,EAAE,IAAI,CAACC,MAAM;SACnBC,MAAM,EAAE,IAAI,CAACC,QAAQ;SACrB,eAAe,EAAE,IAAI,CAACC,UAAU;SAChC,iBAAiB,EAAE,IAAI,CAACA;;MAEzB,CAAC;KAEFlD,eAAK,CAACC,IAAI,CAACC,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAACC,cAAc,EAAE,IAAI,CAAC;IACzD;GACDgD,aAAa,GACb;KACCnD,eAAK,CAACK,MAAM,CAACH,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAACC,cAAc,EAAE,IAAI,CAAC;IAC3D;GACD9J,QAAQ,EAAE;KACT,GAAG8B,uBAAU,CAAC;OACbC,gBAAgB,EAAG,GAAEC,mBAAK,CAACC,SAAU;MACrC,CAAC;KACF8K,MAAM,GACN;OACC,OAAQ,GAAE,IAAI,CAACrL,iBAAkB,4BAA2B,IAAI,CAACD,MAAO,EAAC;MACzE;KACDuL,aAAa,GACb;OACC,IAAI,CAAC,IAAI,CAAC5B,IAAI,CAACtL,IAAI,CAACmN,gBAAgB,EACpC;SACC,OAAO,EAAE;;OAGV,MAAMC,MAAM,GAAGC,wBAAc,CAACC,SAAS,CAAC,kBAAkB,CAAC;OAE3D,OAAOD,wBAAc,CAACD,MAAM,CAACA,MAAM,EAAE,IAAI,CAAC9B,IAAI,CAACtL,IAAI,CAACmN,gBAAgB,CAAC;;IAEtE;GACD7K,OAAO,EAAE;KACRsK,MAAM,GACN;OACC,IAAI,CAAC1J,KAAK,CAAC,QAAQ,CAAC;MACpB;KACD4J,QAAQ,GACR;OAAA;OACC,IAAI,oBAAI,CAACjB,MAAM,aAAX,aAAa0B,MAAM,EAAE,qBAAI,IAAI,CAACC,OAAO,EAAE,aAAd,cAAgBC,cAAc,EAAE,CAAC9E,OAAO,EAAE,EACvE;SACC;;OAGD,IAAI,CAACzF,KAAK,CAAC,UAAU,CAAC;MACtB;KACDwK,UAAU,GACV;OACC,IAAI,CAAC,IAAI,CAACzL,gBAAgB,EAC1B;SACC,KAAK6C,uBAAK,CAACC,IAAI,EAAE;SAEjB;;OAGD,IAAI,CAACwG,UAAU,CAACmC,UAAU,EAAE;MAC5B;KACDC,QAAQ,GACR;OACC,IAAI,CAAC,IAAI,CAAC1L,gBAAgB,EAC1B;SACC,KAAK6C,uBAAK,CAACC,IAAI,EAAE;SAEjB;;OAGD,MAAM3F,WAAW,GAAG,IAAI,CAACyJ,KAAK,CAAC+E,UAAU,CAAC7E,GAAG;OAC7CC,sBAAW,CAAC7H,OAAO,CAAC,IAAI,CAAC8L,MAAM,CAAC;OAChCjE,sBAAW,CAACjE,IAAI,CAAC;SAChBtD,EAAE,EAAE,IAAI,CAACwL,MAAM;SACf7N,WAAW;SACXyO,KAAK,EAAE,IAAI,CAAC3E,YAAY,EAAE;SAC1B3I,UAAU,EAAEnB,WAAW,CAACoB,WAAW,GAAG,CAAC;SACvC6I,KAAK,EAAE,IAAI;SACXE,MAAM,EAAE;WACPoD,MAAM,EAAE,IAAI,CAACC,MAAM;WACnBkB,YAAY,EAAE,IAAI,CAAChB,QAAQ;WAC3BrD,SAAS,EAAE,IAAI,CAACqD;;QAEjB,CAAC;MACF;KACD5D,YAAY,GACZ;OACC,OAAO,CACN;SACCvE,IAAI,EAAE,IAAI,CAACC,GAAG,CAAC,8BAA8B,CAAC;SAC9CgF,OAAO,EAAE,MAAM;WACd,IAAI,CAACmE,cAAc,EAAE;WACrB,IAAI,CAACP,OAAO,EAAE,CAACQ,KAAK,EAAE;;QAEvB,EACD;SACCrJ,IAAI,EAAE,IAAI,CAACC,GAAG,CAAC,6BAA6B,CAAC;SAC7CgF,OAAO,EAAE,MAAM;WAAA;WACd,qBAAI,CAACiC,MAAM,qBAAX,cAAaoC,WAAW,EAAE;WAC1B,IAAI,CAACxC,gBAAgB,CAAC,IAAI,CAAC;WAC3B,IAAI,CAAC+B,OAAO,EAAE,CAACQ,KAAK,EAAE;;QAEvB,CACD;MACD;KACDD,cAAc,GACd;OACC,IAAI,CAAC,IAAI,CAAC9L,gBAAgB,EAC1B;SACC,KAAK6C,uBAAK,CAACC,IAAI,EAAE;SAEjB;;OAGD,IAAI,CAAC8G,MAAM,CAACqC,aAAa,CAAC,IAAI,CAAChC,eAAe,EAAE,CAAC;OACjD,IAAI,CAACL,MAAM,CAAC9G,IAAI,EAAE;MAClB;KACDiF,cAAc,GACd;OAAA;OACC,IAAI,CAAC6B,MAAM,CAACqC,aAAa,CAAC,IAAI,CAAChC,eAAe,EAAE,CAAC;OACjD,IAAI,CAACL,MAAM,CAAC7B,cAAc,EAAE;OAC5B,sBAAI,CAACwD,OAAO,EAAE,qBAAd,eAAgBC,cAAc,EAAE,CAACzD,cAAc,EAAE;MACjD;KACDwD,OAAO,GACP;OACC,OAAOxE,sBAAW,CAACmF,WAAW,CAAC,IAAI,CAAClB,MAAM,CAAC;MAC3C;KACDmB,QAAQ,GACR;OACC,IAAI,CAAC7C,UAAU,CAAC6C,QAAQ,EAAE;MAC1B;KACDrB,UAAU,GACV;OACC,MAAMsB,QAAQ,GAAG,IAAI,CAACC,WAAW,EAAE;OAEnC,IAAI,CAAC7C,gBAAgB,CAAC4C,QAAQ,CAAC;OAE/B,IAAI,CAACxC,MAAM,CAAC0C,IAAI,EAAE;MAClB;KACDD,WAAW,GACX;OACC,MAAME,IAAI,GAAG,IAAI,CAAC3C,MAAM,CAAC4C,gBAAgB,EAAE,CAAC,CAAC,CAAC;OAC9C,IAAI,CAACD,IAAI,EACT;SACC,OAAO,IAAI;;OAGZ,OAAO,IAAI,CAACjD,UAAU,CAACmD,mBAAmB,CAACF,IAAI,CAACG,aAAa,EAAE,CAACC,GAAG,CAAC,YAAY,CAAC,CAAC;MAClF;KACDhD,QAAQ,CAACyC,QAAyB,EAClC;OACC,IAAI,CAAC9C,UAAU,CAACK,QAAQ,CAACyC,QAAQ,CAAC;MAClC;KACDnC,eAAe,GACf;OACC,OAAO,IAAI,CAACZ,IAAI,GAAG,IAAI,CAACzC,KAAK,CAAC+E,UAAU,CAAC7E,GAAG,GAAG,IAAI,CAACF,KAAK,CAACgG,SAAS,CAAC9F,GAAG;MACvE;KACDiC,YAAY,GACZ;OACCC,6BAAQ,CAAClG,IAAI,CACZmG,sBAAQ,CAAC4D,kBAAkB,CAACrI,IAAI,EAChCyE,sBAAQ,CAAC4D,kBAAkB,CAAC1D,UAAU,CACtC;;IAEF;GACDhK,UAAU,EAAE;aACX+D,+BAAM;WACN9B,wBAAI;aACJ6E;IACA;GACD3G,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAoGZ,CAAC;;OCxUYwN,QAAQ,GAAG;GACvB9P,IAAI,EAAE,sBAAsB;GAC5BC,KAAK,EAAE,CAAC,MAAM,CAAC;GACfC,KAAK,EAAE;KACNsC,EAAE,EAAE;OACHpC,IAAI,EAAE,CAACI,MAAM,EAAEC,MAAM,CAAC;OACtBH,QAAQ,EAAE;MACV;KACDyP,OAAO,EAAE;OACR3P,IAAI,EAAEgD,OAAO;OACbtC,OAAO,EAAE;MACT;KACDsI,QAAQ,EAAE;OACThJ,IAAI,EAAEgD,OAAO;OACbtC,OAAO,EAAE;MACT;KACD4B,MAAM,EAAE;OACPtC,IAAI,EAAE,CAACI,MAAM,EAAEC,MAAM,CAAC;OACtBK,OAAO,EAAE;MACT;KACD6B,iBAAiB,EAAE;OAClBvC,IAAI,EAAEK,MAAM;OACZK,OAAO,EAAE;;IAEV;GACDuF,KAAK,GACL;KACC,MAAMC,OAAO,GAAG1D,sBAAO;KACvB,MAAM2D,UAAU,GAAG/B,mCAAU;KAC7B,MAAMgC,WAAW,GAAG/B,oCAAW;KAC/B,MAAMgC,UAAU,GAAG/B,mCAAU;KAE7B,OAAO;OACN4B,OAAO;OACPC,UAAU;OACVC,WAAW;OACXC;MACA;IACD;GACD,MAAMkC,OAAO,GACb;KACC,MAAMqH,oEAAqB,CAACC,UAAU,EAAE;KAExC,IAAI,CAACtL,SAAS,GAAG,KAAK;IACtB;GACDtB,OAAO,EAAE;KACR6M,OAAO,GACP;OACC,IAAI,CAACjM,KAAK,CAAC,MAAM,CAAC;;IAEnB;GACD9B,UAAU,EAAE;aACX+D,+BAAM;WACN9B,wBAAI;aACJ6E;IACA;GACD3G,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA6CZ,CAAC;;OCjHY6N,QAAQ,GAAG;GACvBnQ,IAAI,EAAE,sBAAsB;GAC5BsE,UAAU,EAAE;WACXC;IACA;GACDtD,QAAQ,EAAE;KACTmP,SAAS,GACT;OACC,OAAOxN,sBAAO,CAACyN,aAAa;MAC5B;KACDC,aAAa,GACb;OACC,OAAO,EAAE;MACT;KACDC,cAAc,GACd;OACC,OAAO,iCAAiC;MACxC;KACD9K,QAAQ,GACR;OACC,OAAO;SACNC,IAAI,EAAE,IAAI,CAACC,GAAG,CAAC,2BAA2B,CAAC;SAC3C/E,YAAY,EAAE;WACbU,UAAU,EAAE;;QAEb;;IAEF;GACDa,UAAU,EAAE;WACXiC;IACA;GACD9B,QAAQ,EAAG;;;;;;;;;;;;;;;CAeZ,CAAC;;OCpBYkO,OAAO,GAAG;GACtBxQ,IAAI,EAAE,qBAAqB;GAC3BC,KAAK,EAAE,CAAC,MAAM,EAAE,OAAO,EAAE,wBAAwB,CAAC;GAClDC,KAAK,EAAE;KACNsC,EAAE,EAAE;OACHpC,IAAI,EAAE,CAACI,MAAM,EAAEC,MAAM,CAAC;OACtBH,QAAQ,EAAE;MACV;;CAEH;CACA;KACEgH,UAAU,EAAE;OACXlH,IAAI,EAAES,MAAM;OACZC,OAAO,EAAE;MACT;KACDiP,OAAO,EAAE;OACR3P,IAAI,EAAEgD,OAAO;OACbtC,OAAO,EAAE;MACT;KACDsI,QAAQ,EAAE;OACThJ,IAAI,EAAEgD,OAAO;OACbtC,OAAO,EAAE;MACT;KACD4B,MAAM,EAAE;OACPtC,IAAI,EAAE,CAACI,MAAM,EAAEC,MAAM,CAAC;OACtBK,OAAO,EAAE;MACT;KACD6B,iBAAiB,EAAE;OAClBvC,IAAI,EAAEK,MAAM;OACZK,OAAO,EAAE;;IAEV;GACDqB,UAAU,EAAE;aACX+D,+BAAM;WACN9B,wBAAI;aACJ6E;IACA;GACD5C,KAAK,GACL;KACC,MAAMC,OAAO,GAAG1D,sBAAO;KACvB,MAAM2D,UAAU,GAAG/B,mCAAU;KAC7B,MAAMgC,WAAW,GAAG/B,oCAAW;KAC/B,MAAMgC,UAAU,GAAG/B,mCAAU;KAE7B,OAAO;OACN4B,OAAO;OACPC,UAAU;OACVC,WAAW;OACXC;MACA;IACD;GACDxF,QAAQ,EAAE;KACT,GAAG8B,uBAAU,CAAC;OACb0N,UAAU,EAAG,GAAExN,mBAAK,CAACyN,UAAW,mBAAkB;OAClDC,wBAAwB,EAAG,GAAE1N,mBAAK,CAACC,SAAU,2BAA0B;OACvEF,gBAAgB,EAAG,GAAEC,mBAAK,CAACC,SAAU;MACrC,CAAC;KACF8K,MAAM,GACN;OACC,OAAQ,wBAAuB,IAAI,CAAC4C,SAAU,EAAC;MAC/C;KACD1J,MAAM,GACN;OACC,MAAMI,UAAsB,GAAG,IAAI,CAACA,UAAU;OAE9C,OAAOA,UAAU,GAAG,IAAI,CAACT,MAAM,CAACC,OAAO,CAAC,yBAAyB,CAAC,CAACQ,UAAU,CAAC,GAAG,IAAI;MACrF;KACDuJ,MAAM,GACN;OACC,OAAO,IAAI,CAAChK,MAAM,CAACC,OAAO,CAAE,GAAE7D,mBAAK,CAAC6N,aAAc,UAAS,CAAC,CAAC,IAAI,CAACtO,EAAE,CAAC;MACrE;KACDgD,SAAS,GACT;OACC,MAAMuL,QAAwD,GAAG;SAChEC,OAAO,EAAE,SAAS;SAClBC,OAAO,EAAE,SAAS;SAClBC,OAAO,EAAE;QACT;OAED,OAAOH,QAAQ,CAAC,IAAI,CAACF,MAAM,CAACM,QAAQ,CAAC,IAAI,EAAE;MAC3C;KACDD,OAAO,GACP;OACC,OAAO,IAAI,CAACL,MAAM,CAACM,QAAQ,KAAK,SAAS;;IAE1C;GACD9N,OAAO,EAAE;KACRmG,QAAQ,GACR;OAAA;OACC,IAAI,CAAC,IAAI,CAACxG,gBAAgB,EAC1B;SACC6C,uBAAK,CAACC,IAAI,EAAE;SAEZ;;OAGD,IAAI,IAAI,CAAC+K,MAAM,CAACO,UAAU,IAAI,IAAI,CAACT,wBAAwB,EAC3D;SACC;;OAGD,qBAAI,IAAI,CAACpC,OAAO,EAAE,sCAAd,cAAgBC,cAAc,EAAE,aAAhC,sBAAkC9E,OAAO,EAAE,EAC/C;SACC,IAAI,CAAC2H,WAAW,EAAE;SAElB;;OAGD,MAAM1H,UAAU,GAAG,IAAI,CAACC,KAAK,CAACC,MAAM,CAACC,GAAG;OACxCC,sBAAW,CAACC,MAAM,CACjB,IAAI,CAACgE,MAAM,EACXrE,UAAU,EACV,IAAI,CAACM,YAAY,EAAE,EACnB;SACCE,QAAQ,EAAE,IAAI;SACd3I,SAAS,EAAE,CAAC;SACZF,UAAU,EAAEqI,UAAU,CAACpI,WAAW,GAAGoI,UAAU,CAACpI,WAAW,GAAG,CAAC;SAC/D6I,KAAK,EAAE,IAAI;SACXE,MAAM,EAAE;WACPC,OAAO,EAAE,IAAI,CAAC8G,WAAW;WACzB7G,SAAS,EAAE,IAAI,CAAC6G;;QAEjB,CACD,CAACvL,IAAI,EAAE;OAER,IAAI,CAAC7B,KAAK,CAAC,QAAQ,CAAC;OACpB2G,eAAK,CAACC,IAAI,CAACC,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAACC,cAAc,EAAE;SAAEC,OAAO,EAAE;QAAM,CAAC;MACtE;KACDf,YAAY,GACZ;OACC,OAAOpJ,MAAM,CAACyQ,MAAM,CAAC,IAAI,CAACb,UAAU,CAAC,CAACpJ,GAAG,CAAC,CAAC;SAAErH,IAAI;SAAEyL;QAAO,MAAM;SAC/D/F,IAAI,EAAE1F,IAAI;SACV2K,OAAO,EAAE,MAAM,IAAI,CAAC4G,WAAW,CAAC9F,KAAK,CAAC;SACtCrC,QAAQ,EAAEqC,KAAK,KAAK,IAAI,CAACgF,UAAU,CAACe,QAAQ,CAAC/F;QAC7C,CAAC,CAAC;MACH;KACD8F,WAAW,CAACE,gBAAwB,EACpC;OACC,IAAI,CAACJ,WAAW,EAAE;OAClB,IAAI,CAACpN,KAAK,CAAC,wBAAwB,EAAE;SACpCzB,EAAE,EAAE,IAAI,CAACA,EAAE;SACXiP;QACA,CAAC;MACF;KACDJ,WAAW,GACX;OACCtH,sBAAW,CAAC7H,OAAO,CAAC,IAAI,CAAC8L,MAAM,CAAC;OAChC,IAAI,CAAC/J,KAAK,CAAC,OAAO,CAAC;OACnB2G,eAAK,CAACK,MAAM,CAACH,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAACC,cAAc,EAAE;SAAEC,OAAO,EAAE;QAAM,CAAC;MACxE;KACDD,cAAc,GACd;OAAA;OACC,sBAAI,CAACwD,OAAO,EAAE,8CAAd,eAAgBC,cAAc,EAAE,qBAAhC,sBAAkCzD,cAAc,EAAE;MAClD;KACDwD,OAAO,GACP;OACC,OAAOxE,sBAAW,CAACmF,WAAW,CAAC,IAAI,CAAClB,MAAM,CAAC;MAC3C;KACDjC,YAAY,GACZ;OACCC,6BAAQ,CAAClG,IAAI,CACZmG,sBAAQ,CAACyF,qBAAqB,CAAClK,IAAI,EACnCyE,sBAAQ,CAACyF,qBAAqB,CAACvF,UAAU,CACzC;;IAEF;GACD7J,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA+DZ,CAAC;;OC3PYqP,YAAY,GAAG;GAC3B3R,IAAI,EAAE,cAAc;GACpBC,KAAK,EAAE,CAAC,QAAQ,CAAC;GACjBC,KAAK,EAAE;KACNwC,MAAM,EAAE;OACPtC,IAAI,EAAE,CAACK,MAAM,EAAED,MAAM,CAAC;OACtBF,QAAQ,EAAE;MACV;KACDqC,iBAAiB,EAAE;OAClBvC,IAAI,EAAEK,MAAM;OACZK,OAAO,EAAE;;IAEV;GACDuF,KAAK,GACL;KACC,MAAMC,OAAO,GAAG1D,sBAAO;KAEvB,OAAO;OACN0D;MACA;IACD;GACDnE,UAAU,EAAE;WACXiC;IACA;GACD9B,QAAQ,EAAG;;;;;;;;;;;;;CAaZ,CAAC;;CC/BM,MAAMsP,SAAS,GAAG;GACxB5R,IAAI,EAAE,WAAW;GACjBC,KAAK,EAAE,CAAC,YAAY,EAAE,aAAa,EAAE,eAAe,CAAC;GACrDC,KAAK,EAAE;KACNsC,EAAE,EAAE;OACHpC,IAAI,EAAEI,MAAM;OACZF,QAAQ,EAAE;MACV;KACD8I,QAAQ,EAAE;OACThJ,IAAI,EAAEgD,OAAO;OACbtC,OAAO,EAAE;MACT;KACD4B,MAAM,EAAE;OACPtC,IAAI,EAAE,CAACI,MAAM,EAAEC,MAAM,CAAC;OACtBH,QAAQ,EAAE;MACV;KACDqC,iBAAiB,EAAE;OAClBvC,IAAI,EAAEK,MAAM;OACZK,OAAO,EAAE;;IAEV;GACDC,IAAI,GACJ;KACC,OAAO;gBACN6B,sBAAO;mBACP4B,mCAAU;oBACVC,oCAAW;mBACXC,mCAAU;OACV2E,SAAS,EAAE;MACX;IACD;GACDpI,QAAQ,EAAE;KACT,GAAG8B,uBAAU,CAAC;OACb0N,UAAU,EAAG,GAAExN,mBAAK,CAACyN,UAAW,0BAAyB;OACzD1N,gBAAgB,EAAG,GAAEC,mBAAK,CAACC,SAAU;MACrC,CAAC;KACF3C,OAAO,GACP;OACC,OAAQ,sBAAqB,IAAI,CAACiC,EAAG,EAAC;;IAEvC;GACD8G,SAAS,GACT;KACC,IAAI,IAAI,CAACD,SAAS,EAClB;OACC,IAAI,CAACnH,OAAO,EAAE;;IAEf;GACDmB,OAAO,EAAE;KACRwO,iBAAiB,CAAChB,MAAc,EAChC;OACC,IAAI,CAAC5M,KAAK,CAAC,eAAe,EAAE;SAC3BzB,EAAE,EAAE,IAAI,CAACA,EAAE;SACXsP,WAAW,EAAEjB;QACb,CAAC;MACF;KACDrH,QAAQ,GACR;OAAA;OACC,IAAI,CAAC,IAAI,CAACxG,gBAAgB,EAC1B;SACC6C,uBAAK,CAACC,IAAI,EAAE;SAEZ;;OAGD,uBAAI,IAAI,CAACuD,SAAS,sCAAd,gBAAgBI,WAAW,aAA3B,sBAA6BC,OAAO,EAAE,EAC1C;SACC,IAAI,CAACxH,OAAO,EAAE;SAEd;;OAGD,MAAMyH,UAAU,GAAG,IAAI,CAACC,KAAK,CAACC,MAAM,CAACC,GAAG;OACxC,IAAI,CAACT,SAAS,GAAGU,sBAAW,CAACC,MAAM,CAClC,IAAI,CAACzJ,OAAO,EACZoJ,UAAU,EACV,IAAI,CAACM,YAAY,EAAE,EACnB;SACCE,QAAQ,EAAE,IAAI;SACd3I,SAAS,EAAE,CAAC;SACZF,UAAU,EAAEqI,UAAU,CAACpI,WAAW,GAAGoI,UAAU,CAACpI,WAAW,GAAG,CAAC;SAC/D6I,KAAK,EAAE,IAAI;SACXE,MAAM,EAAE;WACPC,OAAO,EAAE,MAAM,IAAI,CAACrI,OAAO,EAAE;WAC7BsI,SAAS,EAAE,MAAM,IAAI,CAACC,iBAAiB;;QAExC,CACD;OACD,IAAI,CAACpB,SAAS,CAACvD,IAAI,EAAE;OACrB,IAAI,CAAC4E,eAAe,EAAE;OACtB,IAAI,CAACzG,KAAK,CAAC,YAAY,CAAC;MACxB;KACDgG,YAAY,GACZ;OACC,OAAO,CACN;SACCvE,IAAI,EAAE,IAAI,CAACC,GAAG,CAAC,0CAA0C,CAAC;SAC1DgF,OAAO,EAAE,MAAM,IAAI,CAACoH,cAAc,CAAC,IAAI,CAACtB,UAAU,CAACuB,OAAO;QAC1D,EACD;SACCtM,IAAI,EAAE,IAAI,CAACC,GAAG,CAAC,0CAA0C,CAAC;SAC1DgF,OAAO,EAAE,MAAM,IAAI,CAACoH,cAAc,CAAC,IAAI,CAACtB,UAAU,CAACwB,OAAO;QAC1D,EACD;SACCvM,IAAI,EAAE,IAAI,CAACC,GAAG,CAAC,8CAA8C,CAAC;SAC9DgF,OAAO,EAAE,MAAM,IAAI,CAACoH,cAAc,CAAC,IAAI,CAACtB,UAAU,CAACyB,UAAU;QAC7D,CACD;MACD;KACDH,cAAc,CAAClB,MAAc,EAC7B;OACC,IAAI,CAACgB,iBAAiB,CAAChB,MAAM,CAAC;OAC9B,IAAI,CAAC3O,OAAO,EAAE;MACd;KACDA,OAAO,GACP;OACC6H,sBAAW,CAAC7H,OAAO,CAAC,IAAI,CAAC3B,OAAO,CAAC;OACjC,IAAI,CAACkK,iBAAiB,EAAE;OACxB,IAAI,CAACxG,KAAK,CAAC,aAAa,CAAC;MACzB;KACDyG,eAAe,GACf;OACCE,eAAK,CAACC,IAAI,CAACC,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAACC,cAAc,EAAE;SAAEC,OAAO,EAAE;QAAM,CAAC;MACtE;KACDP,iBAAiB,GACjB;OACCG,eAAK,CAACK,MAAM,CAACH,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAACC,cAAc,EAAE;SAAEC,OAAO,EAAE;QAAM,CAAC;MACxE;KACDD,cAAc,GACd;OAAA;OACC,wBAAI,CAAC1B,SAAS,8CAAd,iBAAgBI,WAAW,qBAA3B,sBAA6BsB,cAAc,EAAE;;IAE9C;GACD5I,UAAU,EAAE;WACXiC,wBAAI;aACJ8B;IACA;GACD5D,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;CAmBZ,CAAC;;OCvJY6P,KAAK,GAAG;GACpBnS,IAAI,EAAE,mBAAmB;GACzBC,KAAK,EAAE,CAAC,QAAQ,EAAE,UAAU,EAAE,oBAAoB,CAAC;GACnDC,KAAK,EAAE;KACNsC,EAAE,EAAE;OACHpC,IAAI,EAAE,CAACI,MAAM,EAAEC,MAAM,CAAC;OACtBH,QAAQ,EAAE;MACV;KACDwR,WAAW,EAAE;OACZ1R,IAAI,EAAEK,MAAM;OACZH,QAAQ,EAAE;MACV;KACD8R,UAAU,EAAE;OACXhS,IAAI,EAAEgD,OAAO;OACbtC,OAAO,EAAE;MACT;KACDsI,QAAQ,EAAE;OACThJ,IAAI,EAAEgD,OAAO;OACbtC,OAAO,EAAE;MACT;KACD4B,MAAM,EAAE;OACPtC,IAAI,EAAE,CAACI,MAAM,EAAEC,MAAM,CAAC;OACtBH,QAAQ,EAAE;MACV;KACDqC,iBAAiB,EAAE;OAClBvC,IAAI,EAAEK,MAAM;OACZK,OAAO,EAAE;;IAEV;GACDuF,KAAK,GACL;KACC,MAAMC,OAAO,GAAG1D,sBAAO;KACvB,MAAM+B,SAAS,GAAGgC,WAAG,CAAC,IAAI,CAAC;KAE3B,OAAO;OACNL,OAAO;OACP3B;MACA;IACD;GACD,MAAMgE,OAAO,GACb;KACC,IAAI,CAAChE,SAAS,GAAG,KAAK;IACtB;GACDtB,OAAO,EAAE;KACR0I,YAAY,GACZ;OACCC,6BAAQ,CAAClG,IAAI,CACZmG,sBAAQ,CAACoG,mBAAmB,CAAC7K,IAAI,EACjCyE,sBAAQ,CAACoG,mBAAmB,CAAClG,UAAU,CACvC;;IAEF;GACDlL,QAAQ,EAAE;KACT,GAAG8B,uBAAU,CAAC;OACb0N,UAAU,EAAG,GAAExN,mBAAK,CAACyN,UAAW;MAChC,CAAC;KACF4B,iBAAiB,GACjB;OACC,QAAQ,IAAI,CAACR,WAAW;SAEvB,KAAK,IAAI,CAACrB,UAAU,CAACwB,OAAO;WAC3B,OAAO,IAAI,CAACtM,GAAG,CAAC,0CAA0C,CAAC;SAC5D,KAAK,IAAI,CAAC8K,UAAU,CAACyB,UAAU;WAC9B,OAAO,IAAI,CAACvM,GAAG,CAAC,8CAA8C,CAAC;SAChE;WACC,OAAQ,IAAI,CAACyM,UAAU,GACpB,IAAI,CAACzM,GAAG,CAAC,0CAA0C,CAAC,GACpD,IAAI,CAACA,GAAG,CAAC,kCAAkC,CAAC;;MAEjD;KACD4M,kBAAkB,GAClB;OACC,QAAQ,IAAI,CAACT,WAAW;SAEvB,KAAK,IAAI,CAACrB,UAAU,CAACwB,OAAO;WAC3B,OAAO,WAAW;SACnB,KAAK,IAAI,CAACxB,UAAU,CAACyB,UAAU;WAC9B,OAAO,eAAe;SACvB;WACC,OAAO,WAAW;;MAEpB;KACDM,aAAa,GACb;OACC,QAAQ,IAAI,CAACV,WAAW;SAEvB,KAAK,IAAI,CAACrB,UAAU,CAACyB,UAAU;SAC/B,KAAK,IAAI,CAACzB,UAAU,CAACwB,OAAO;WAC3B,OAAO,oCAAoC;SAC5C;WACC,OAAO,iCAAiC;;MAE1C;KACDQ,SAAS,GACT;OACC,QAAQ,IAAI,CAACX,WAAW;SAEvB,KAAK,IAAI,CAACrB,UAAU,CAACwB,OAAO;WAC3B,OAAO,WAAW;SACnB,KAAK,IAAI,CAACxB,UAAU,CAACyB,UAAU;WAC9B,OAAO,eAAe;SACvB;WACC,OAAO,EAAE;;;IAGZ;GACD/P,UAAU,EAAE;WACXiC,wBAAI;aACJ6E,+BAAM;KACN2I;IACA;GACDtP,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAmCZ,CAAC;;;;;;;;;;;;;;;;"}