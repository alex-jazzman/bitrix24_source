{"version":3,"file":"resource-creation-wizard.bundle.js","sources":["../src/lib.js","../src/resource-creation-wizard.js"],"sourcesContent":["import { toRaw } from 'ui.vue3';\nimport { Core } from 'booking.core';\nimport { ResourceModel } from './types';\n\nexport function getResource(resourceId: number): ResourceModel\n{\n\tconst store = Core.getStore();\n\tconst resource = store.getters['resources/getById'](resourceId);\n\n\treturn structuredClone(toRaw(resource));\n}\n\nexport function getEmptyResource(): ResourceModel\n{\n\treturn {\n\t\tid: null,\n\t\ttypeId: null,\n\t\tname: '',\n\t\tdescription: null,\n\t\tavatar: null,\n\t\tslotRanges: [],\n\t\tcounter: null,\n\t\tentities: [],\n\t\tisMain: true,\n\t\tisDeleted: false,\n\t\tisConfirmationNotificationOn: false,\n\t\tisFeedbackNotificationOn: false,\n\t\tisInfoNotificationOn: false,\n\t\tisDelayedNotificationOn: false,\n\t\tisReminderNotificationOn: false,\n\t\ttemplateTypeConfirmation: 'animate',\n\t\ttemplateTypeFeedback: 'animate',\n\t\ttemplateTypeInfo: 'animate',\n\t\ttemplateTypeDelayed: 'animate',\n\t\ttemplateTypeReminder: 'base',\n\t\tcreatedBy: 0,\n\t\tcreatedAt: 0,\n\t\tupdatedAt: null,\n\t};\n}\n","/* eslint-disable no-param-reassign,max-lines-per-function */\nimport { Loc, Type } from 'main.core';\nimport { BuilderModel } from 'ui.vue3.vuex';\nimport type { ActionTree, GetterTree, MutationTree } from 'ui.vue3.vuex';\n\nimport { Model, NotificationFieldsMap, ResourceEntityType } from 'booking.const';\nimport { SlotRange } from 'booking.model.resources';\nimport type { IntegrationCalendarType, IntegrationCalendarDataType } from 'booking.model.resources';\n\nimport { getEmptyResource, getResource } from './lib';\nimport type {\n\tResourceCreationWizardState,\n\tInitPayload,\n\tResourceModel,\n\tAdvertisingResourceType,\n} from './types';\n\nexport class ResourceCreationWizardModel extends BuilderModel\n{\n\tgetName(): string\n\t{\n\t\treturn Model.ResourceCreationWizard;\n\t}\n\n\tgetState(): ResourceCreationWizardState\n\t{\n\t\treturn {\n\t\t\tresourceId: this.getVariable('resourceId', null),\n\t\t\tresourceName: '',\n\t\t\tresourceAvatarFile: null,\n\t\t\tresource: getEmptyResource(),\n\t\t\tadvertisingResourceTypes: [],\n\t\t\tcompanyScheduleSlots: [],\n\t\t\tfetching: false,\n\t\t\tstep: 1,\n\t\t\tisSaving: false,\n\t\t\tinvalidResourceName: false,\n\t\t\tinvalidResourceType: false,\n\t\t\tinvalidIntegrationCalendarUser: false,\n\t\t\tisCompanyScheduleAccess: false,\n\t\t\tcompanyScheduleUrl: '',\n\t\t\tweekStart: 'Mon',\n\t\t\tglobalSchedule: false,\n\t\t\tcheckedForAll: {},\n\t\t\tisChannelChoiceAvailable: true,\n\t\t\tisIntegrationCalendarEnabled: false,\n\t\t};\n\t}\n\n\tgetGetters(): GetterTree<ResourceCreationWizardState, any>\n\t{\n\t\treturn {\n\t\t\t/** @function resource-creation-wizard/resourceId */\n\t\t\tresourceId: (state): ResourceModel => state.resourceId,\n\t\t\t/** @function resource-creation-wizard/getResource */\n\t\t\tgetResource: (state): ResourceModel => state.resource,\n\t\t\t/** @function resource-creation-wizard/getResourceAvatarFile */\n\t\t\tgetResourceAvatarFile: (state): File | null => state.resourceAvatarFile,\n\t\t\t/** @function resource-creation-wizard/isSaving */\n\t\t\tisSaving: (state): boolean => state.isSaving,\n\t\t\t/** @function resource-creation-wizard/getCompanyScheduleSlots */\n\t\t\tgetCompanyScheduleSlots: (state): SlotRange[] => state.companyScheduleSlots,\n\t\t\t/** @function resource-creation-wizard/isGlobalSchedule */\n\t\t\tisGlobalSchedule: (state): boolean => state.globalSchedule,\n\t\t\tstartStep: (state): number => {\n\t\t\t\treturn Type.isNull(state.resourceId) ? 1 : 2;\n\t\t\t},\n\t\t\tfinishStep: (): number => 3,\n\t\t\tinvalidIntegrationCalendarUser: (state): boolean => {\n\t\t\t\treturn state.isIntegrationCalendarEnabled && state.invalidIntegrationCalendarUser;\n\t\t\t},\n\t\t\tinvalidChooseTypeCard: (state): boolean => Type.isNull(state.resource.typeId),\n\t\t\tinvalidSettingsCard: (state, getters): boolean => {\n\t\t\t\treturn (\n\t\t\t\t\tstate.invalidResourceName\n\t\t\t\t\t|| !state.resource.typeId\n\t\t\t\t\t|| getters.invalidIntegrationCalendarUser\n\t\t\t\t);\n\t\t\t},\n\t\t\tinvalidCurrentCard: (state, getters): boolean => {\n\t\t\t\tif (state.step === 1)\n\t\t\t\t{\n\t\t\t\t\treturn getters.invalidChooseTypeCard;\n\t\t\t\t}\n\n\t\t\t\tif (state.step === 2)\n\t\t\t\t{\n\t\t\t\t\treturn getters.invalidSettingsCard;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\t/** @function resource-creation-wizard/isCompanyScheduleAccess */\n\t\t\tisCompanyScheduleAccess: (state): boolean => state.isCompanyScheduleAccess,\n\t\t\t/** @function resource-creation-wizard/companyScheduleUrl */\n\t\t\tcompanyScheduleUrl: (state): boolean => state.companyScheduleUrl,\n\t\t\t/** @function resource-creation-wizard/weekStart */\n\t\t\tweekStart: (state): boolean => state.weekStart,\n\t\t\t/** @function resource-creation-wizard/isChannelChoiceAvailable */\n\t\t\tisChannelChoiceAvailable: (state): boolean => state.isChannelChoiceAvailable,\n\t\t\t/** @function resource-creation-wizard/isCheckedForAll */\n\t\t\tisCheckedForAll: (state) => (type: string): boolean => state.checkedForAll[type] ?? true,\n\t\t\tadvertisingResourceType: (state): AdvertisingResourceType | undefined => {\n\t\t\t\tconst typeId = state.resource.typeId;\n\n\t\t\t\treturn state.advertisingResourceTypes.find(({ relatedResourceTypeId }) => {\n\t\t\t\t\treturn relatedResourceTypeId === typeId;\n\t\t\t\t}) || null;\n\t\t\t},\n\t\t\tentityCalendar: (state): IntegrationCalendarType | null => {\n\t\t\t\treturn state.resource?.entities?.find((ent) => ent.entityType === ResourceEntityType.Calendar) || null;\n\t\t\t},\n\t\t\tisIntegrationCalendarEnabled: (state): boolean => {\n\t\t\t\treturn state.isIntegrationCalendarEnabled;\n\t\t\t},\n\t\t};\n\t}\n\n\tgetActions(): ActionTree<ResourceCreationWizardState, any>\n\t{\n\t\treturn {\n\t\t\tasync initState({ state, dispatch }): Promise<void>\n\t\t\t{\n\t\t\t\tif (Type.isNull(state.resourceId))\n\t\t\t\t{\n\t\t\t\t\tawait dispatch('initCreateMaster');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tawait dispatch('initEditMaster');\n\t\t\t\t}\n\t\t\t},\n\t\t\tinitCreateMaster({ state, commit }): void\n\t\t\t{\n\t\t\t\tcommit('init', {\n\t\t\t\t\tresourceId: state.resourceId,\n\t\t\t\t\tstep: 1,\n\t\t\t\t});\n\t\t\t\tcommit('setCurrentResourceName', Loc.getMessage('BRCW_TITLE'));\n\t\t\t},\n\t\t\tinitEditMaster({ state, commit }): void\n\t\t\t{\n\t\t\t\tconst resourceId = state.resourceId;\n\t\t\t\tconst resource = getResource(resourceId);\n\n\t\t\t\tcommit('init', {\n\t\t\t\t\tresourceId,\n\t\t\t\t\tresource,\n\t\t\t\t\tstep: 2,\n\t\t\t\t});\n\t\t\t\tcommit('setCurrentResourceName', resource.name);\n\n\t\t\t\tcommit(\n\t\t\t\t\t'setIsIntegrationCalendarEnabled',\n\t\t\t\t\tresource.entities?.find((ent) => ent.entityType === ResourceEntityType.Calendar)?.data?.userIds?.length > 0,\n\t\t\t\t);\n\t\t\t},\n\t\t\tnextStep({ state, getters, commit }): void\n\t\t\t{\n\t\t\t\tif (getters.invalidCurrentCard)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (state.step < getters.finishStep)\n\t\t\t\t{\n\t\t\t\t\tcommit('updateStep', state.step + 1);\n\t\t\t\t}\n\t\t\t},\n\t\t\tprevStep({ state, getters, commit }): void\n\t\t\t{\n\t\t\t\tif (state.step > getters.startStep)\n\t\t\t\t{\n\t\t\t\t\tcommit('updateStep', state.step - 1);\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetAdvertisingTypes({ commit }, types: AdvertisingResourceType[]): void\n\t\t\t{\n\t\t\t\tconst advertisingResourceType: AdvertisingResourceType[] = [\n\t\t\t\t\t...types,\n\t\t\t\t\t{\n\t\t\t\t\t\tcode: 'none',\n\t\t\t\t\t\tname: Loc.getMessage('BRCW_CHOOSE_CATEGORY_YOUR_TYPE'),\n\t\t\t\t\t\trelatedResourceTypeId: 0,\n\t\t\t\t\t},\n\t\t\t\t];\n\n\t\t\t\tcommit('setAdvertisingTypes', advertisingResourceType);\n\t\t\t},\n\t\t\t/** @function resource-creation-wizard/updateResource */\n\t\t\tupdateResource({ commit, rootGetters }, patch: Partial<ResourceModel>): void\n\t\t\t{\n\t\t\t\tif (patch.typeId)\n\t\t\t\t{\n\t\t\t\t\tconst resourceType = rootGetters[`${Model.ResourceTypes}/getById`](patch.typeId);\n\t\t\t\t\tconst notifications = [\n\t\t\t\t\t\t...Object.values(NotificationFieldsMap.NotificationOn),\n\t\t\t\t\t\t...Object.values(NotificationFieldsMap.TemplateType),\n\t\t\t\t\t\t...Object.values(NotificationFieldsMap.Settings).flat(),\n\t\t\t\t\t].reduce((acc: Partial<ResourceModel>, field: $Keys<ResourceModel>) => ({\n\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t[field]: resourceType[field],\n\t\t\t\t\t}), {});\n\n\t\t\t\t\tObject.assign(patch, notifications);\n\t\t\t\t}\n\n\t\t\t\tcommit('updateResource', patch);\n\t\t\t},\n\t\t\t/** @function resource-creation-wizard/setResourceAvatarFile */\n\t\t\tsetResourceAvatarFile({ commit }, file: File | null): void\n\t\t\t{\n\t\t\t\tcommit('setResourceAvatarFile', file);\n\t\t\t},\n\t\t\t/** @function resource-creation-wizard/createResourceEntityCalendar */\n\t\t\tcreateResourceEntityCalendar({ commit }): void\n\t\t\t{\n\t\t\t\tcommit('createResourceEntityCalendar');\n\t\t\t},\n\t\t\t/** @function resource-creation-wizard/updateResourceEntityCalendar */\n\t\t\tupdateResourceEntityCalendar({ commit }, calendarPath: Partial<IntegrationCalendarDataType>): void\n\t\t\t{\n\t\t\t\tcommit('updateResourceEntityCalendar', calendarPath);\n\t\t\t},\n\t\t\t/** @function resource-creation-wizard/setCompanyScheduleSlots */\n\t\t\tsetCompanyScheduleSlots({ commit }, slots: SlotRange[]): void\n\t\t\t{\n\t\t\t\tconst defaultTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n\n\t\t\t\tcommit('setCompanyScheduleSlots', slots.map((slotRange) => ({\n\t\t\t\t\t...slotRange,\n\t\t\t\t\tweekDays: Object.values(slotRange.weekDays),\n\t\t\t\t\ttimezone: slotRange.timezone || defaultTimeZone,\n\t\t\t\t})));\n\t\t\t},\n\t\t\t/** @function resource-creation-wizard/setGlobalSchedule */\n\t\t\tsetGlobalSchedule({ commit }, checked: boolean): void\n\t\t\t{\n\t\t\t\tcommit('setGlobalSchedule', checked);\n\t\t\t},\n\t\t\t/** @function resource-creation-wizard/setCompanyScheduleAccess */\n\t\t\tsetCompanyScheduleAccess({ commit }, isCompanyScheduleAccess: boolean): void\n\t\t\t{\n\t\t\t\tcommit('setCompanyScheduleAccess', isCompanyScheduleAccess);\n\t\t\t},\n\t\t\t/** @function resource-creation-wizard/setCompanyScheduleUrl */\n\t\t\tsetCompanyScheduleUrl({ commit }, companyScheduleUrl: string): void\n\t\t\t{\n\t\t\t\tcommit('setCompanyScheduleUrl', companyScheduleUrl);\n\t\t\t},\n\t\t\t/** @function resource-creation-wizard/setInvalidResourceName */\n\t\t\tsetInvalidResourceName({ commit, state }, invalid: boolean): void\n\t\t\t{\n\t\t\t\tif (state.invalidResourceName !== invalid)\n\t\t\t\t{\n\t\t\t\t\tcommit('setInvalidResourceName', invalid);\n\t\t\t\t}\n\t\t\t},\n\t\t\t/** @function resource-creation-wizard/setInvalidResourceType */\n\t\t\tsetInvalidResourceType({ commit, state }, invalid: boolean): void\n\t\t\t{\n\t\t\t\tif (state.invalidResourceType !== invalid)\n\t\t\t\t{\n\t\t\t\t\tcommit('setInvalidResourceType', invalid);\n\t\t\t\t}\n\t\t\t},\n\t\t\t/** @function resource-creation-wizard/setWeekStart */\n\t\t\tsetWeekStart({ commit }, weekStart: string): void\n\t\t\t{\n\t\t\t\tcommit('setWeekStart', weekStart);\n\t\t\t},\n\t\t\t/** @function resource-creation-wizard/setCheckedForAll */\n\t\t\tsetCheckedForAll({ commit }, { type, isChecked }: { type: string, isChecked: boolean }): void\n\t\t\t{\n\t\t\t\tcommit('setCheckedForAll', { type, isChecked });\n\t\t\t},\n\t\t\tsetSlotLengthId({ commit }, { slotLengthId }: { slotLengthId: number }): void\n\t\t\t{\n\t\t\t\tcommit('setSlotLengthId', { slotLengthId });\n\t\t\t},\n\t\t\t/** @function resource-creation-wizard/setIsChannelChoiceAvailable */\n\t\t\tsetIsChannelChoiceAvailable({ commit }, isChannelChoiceAvailable: boolean): void\n\t\t\t{\n\t\t\t\tcommit('setIsChannelChoiceAvailable', isChannelChoiceAvailable);\n\t\t\t},\n\t\t\t/** @function resource-creation-wizard/setIsIntegrationCalendarEnabled */\n\t\t\tsetIsIntegrationCalendarEnabled({ commit }, isIntegrationCalendarEnabled: boolean): void\n\t\t\t{\n\t\t\t\tcommit('setIsIntegrationCalendarEnabled', isIntegrationCalendarEnabled);\n\t\t\t},\n\t\t\t/** @function resource-creation-wizard/setInvalidIntegrationCalendarUser */\n\t\t\tsetInvalidIntegrationCalendarUser({ commit }, invalidIntegrationCalendarUser: boolean): void\n\t\t\t{\n\t\t\t\tcommit('setInvalidIntegrationCalendarUser', invalidIntegrationCalendarUser);\n\t\t\t},\n\t\t};\n\t}\n\n\tgetMutations(): MutationTree<ResourceCreationWizardState>\n\t{\n\t\treturn {\n\t\t\tinit(state: ResourceCreationWizardState, { step, resourceId, resource = null }: InitPayload): void\n\t\t\t{\n\t\t\t\tstate.step = step;\n\t\t\t\tstate.resourceId = resourceId;\n\t\t\t\tstate.resource = Type.isNull(resourceId) ? getEmptyResource() : resource;\n\t\t\t},\n\t\t\tsetCurrentResourceName(state: ResourceCreationWizardState, name: string): void\n\t\t\t{\n\t\t\t\tstate.resourceName = name;\n\t\t\t},\n\t\t\tsetResourceAvatarFile(state: ResourceCreationWizardState, file: File | null): void\n\t\t\t{\n\t\t\t\tstate.resourceAvatarFile = file;\n\t\t\t},\n\t\t\tsetAdvertisingTypes(state: ResourceCreationWizardState, types: AdvertisingResourceType[]): void\n\t\t\t{\n\t\t\t\tstate.advertisingResourceTypes = types;\n\t\t\t},\n\t\t\tsetCompanyScheduleSlots(state: ResourceCreationWizardState, slots: SlotRange[]): void\n\t\t\t{\n\t\t\t\tstate.companyScheduleSlots = slots;\n\t\t\t},\n\t\t\tupdateStep(state: ResourceCreationWizardState, step): void\n\t\t\t{\n\t\t\t\tstate.step = step;\n\t\t\t},\n\t\t\tupdateResource(state: ResourceCreationWizardState, patch: Partial<ResourceModel>): void\n\t\t\t{\n\t\t\t\tstate.resource = {\n\t\t\t\t\t...state.resource,\n\t\t\t\t\t...patch,\n\t\t\t\t};\n\t\t\t},\n\t\t\tcreateResourceEntityCalendar(state): void\n\t\t\t{\n\t\t\t\tconst hasCalendarEntity = state.resource?.entities?.some(\n\t\t\t\t\t(entity) => entity.entityType === ResourceEntityType.Calendar,\n\t\t\t\t);\n\n\t\t\t\tif (!hasCalendarEntity)\n\t\t\t\t{\n\t\t\t\t\tstate.resource?.entities?.push({\n\t\t\t\t\t\tentityType: ResourceEntityType.Calendar,\n\t\t\t\t\t\tentityId: 0,\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tuserIds: [],\n\t\t\t\t\t\t\tlocationId: null,\n\t\t\t\t\t\t\tcheckAvailability: false,\n\t\t\t\t\t\t\treminders: [],\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdateResourceEntityCalendar(state, calendarPath: Partial<IntegrationCalendarDataType>): void\n\t\t\t{\n\t\t\t\tconst index = state.resource?.entities.findIndex((ent) => ent.entityType === ResourceEntityType.Calendar);\n\n\t\t\t\tif (index >= 0)\n\t\t\t\t{\n\t\t\t\t\tconst entityCalendar = state.resource.entities[index];\n\t\t\t\t\tentityCalendar.data = {\n\t\t\t\t\t\t...entityCalendar.data,\n\t\t\t\t\t\t...calendarPath,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetGlobalSchedule(state: ResourceCreationWizardState, checked: boolean): void\n\t\t\t{\n\t\t\t\tstate.globalSchedule = Boolean(checked);\n\t\t\t},\n\t\t\tupdateFetching(state: ResourceCreationWizardState, fetching: boolean): void\n\t\t\t{\n\t\t\t\tstate.fetching = fetching;\n\t\t\t},\n\t\t\tsetSaving(state: ResourceCreationWizardState, isSaving: boolean): void\n\t\t\t{\n\t\t\t\tstate.isSaving = isSaving;\n\t\t\t},\n\t\t\tsetCompanyScheduleAccess(state: ResourceCreationWizardState, isCompanyScheduleAccess: boolean): void\n\t\t\t{\n\t\t\t\tstate.isCompanyScheduleAccess = isCompanyScheduleAccess;\n\t\t\t},\n\t\t\tsetCompanyScheduleUrl(state: ResourceCreationWizardState, companyScheduleUrl: string): void\n\t\t\t{\n\t\t\t\tstate.companyScheduleUrl = companyScheduleUrl;\n\t\t\t},\n\t\t\tsetInvalidResourceName(state, invalid: boolean): void\n\t\t\t{\n\t\t\t\tstate.invalidResourceName = invalid;\n\t\t\t},\n\t\t\tsetInvalidResourceType(state, invalid: boolean): void\n\t\t\t{\n\t\t\t\tstate.invalidResourceType = invalid;\n\t\t\t},\n\t\t\tsetWeekStart(state, weekStart: string): void\n\t\t\t{\n\t\t\t\tstate.weekStart = weekStart;\n\t\t\t},\n\t\t\tsetCheckedForAll(state, { type, isChecked }: { type: string, isChecked: boolean }): void\n\t\t\t{\n\t\t\t\tstate.checkedForAll[type] = isChecked;\n\t\t\t},\n\t\t\tsetSlotLengthId(state, { slotLengthId }: { slotLengthId: number }): void\n\t\t\t{\n\t\t\t\tstate.slotLengthId = slotLengthId;\n\t\t\t},\n\t\t\tsetIsChannelChoiceAvailable(state, isChannelChoiceAvailable: boolean): void\n\t\t\t{\n\t\t\t\tstate.isChannelChoiceAvailable = isChannelChoiceAvailable;\n\t\t\t},\n\t\t\tsetIsIntegrationCalendarEnabled(state, isIntegrationCalendarEnabled: boolean): void\n\t\t\t{\n\t\t\t\tstate.isIntegrationCalendarEnabled = isIntegrationCalendarEnabled;\n\t\t\t},\n\t\t\tsetInvalidIntegrationCalendarUser(state, invalidIntegrationCalendarUser = false): void\n\t\t\t{\n\t\t\t\tstate.invalidIntegrationCalendarUser = invalidIntegrationCalendarUser;\n\t\t\t},\n\t\t};\n\t}\n}\n"],"names":["getResource","resourceId","store","Core","getStore","resource","getters","structuredClone","toRaw","getEmptyResource","id","typeId","name","description","avatar","slotRanges","counter","entities","isMain","isDeleted","isConfirmationNotificationOn","isFeedbackNotificationOn","isInfoNotificationOn","isDelayedNotificationOn","isReminderNotificationOn","templateTypeConfirmation","templateTypeFeedback","templateTypeInfo","templateTypeDelayed","templateTypeReminder","createdBy","createdAt","updatedAt","ResourceCreationWizardModel","BuilderModel","getName","Model","ResourceCreationWizard","getState","getVariable","resourceName","resourceAvatarFile","advertisingResourceTypes","companyScheduleSlots","fetching","step","isSaving","invalidResourceName","invalidResourceType","invalidIntegrationCalendarUser","isCompanyScheduleAccess","companyScheduleUrl","weekStart","globalSchedule","checkedForAll","isChannelChoiceAvailable","isIntegrationCalendarEnabled","getGetters","state","getResourceAvatarFile","getCompanyScheduleSlots","isGlobalSchedule","startStep","Type","isNull","finishStep","invalidChooseTypeCard","invalidSettingsCard","invalidCurrentCard","isCheckedForAll","type","advertisingResourceType","find","relatedResourceTypeId","entityCalendar","ent","entityType","ResourceEntityType","Calendar","getActions","initState","dispatch","initCreateMaster","commit","Loc","getMessage","initEditMaster","data","userIds","length","nextStep","prevStep","setAdvertisingTypes","types","code","updateResource","rootGetters","patch","resourceType","ResourceTypes","notifications","Object","values","NotificationFieldsMap","NotificationOn","TemplateType","Settings","flat","reduce","acc","field","assign","setResourceAvatarFile","file","createResourceEntityCalendar","updateResourceEntityCalendar","calendarPath","setCompanyScheduleSlots","slots","defaultTimeZone","Intl","DateTimeFormat","resolvedOptions","timeZone","map","slotRange","weekDays","timezone","setGlobalSchedule","checked","setCompanyScheduleAccess","setCompanyScheduleUrl","setInvalidResourceName","invalid","setInvalidResourceType","setWeekStart","setCheckedForAll","isChecked","setSlotLengthId","slotLengthId","setIsChannelChoiceAvailable","setIsIntegrationCalendarEnabled","setInvalidIntegrationCalendarUser","getMutations","init","setCurrentResourceName","updateStep","hasCalendarEntity","some","entity","push","entityId","locationId","checkAvailability","reminders","index","findIndex","Boolean","updateFetching","setSaving"],"mappings":"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"}