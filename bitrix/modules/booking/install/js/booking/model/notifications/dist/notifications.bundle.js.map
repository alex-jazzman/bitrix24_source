{"version":3,"file":"notifications.bundle.js","sources":["../src/notifications.js"],"sourcesContent":["/* eslint-disable no-param-reassign */\nimport { BuilderModel } from 'ui.vue3.vuex';\nimport type { Store, GetterTree, ActionTree, MutationTree } from 'ui.vue3.vuex';\n\nimport { Model } from 'booking.const';\nimport type { NotificationsModel, NotificationsSenderModel, NotificationsState } from './types';\n\nexport class Notifications extends BuilderModel\n{\n\tgetName(): string\n\t{\n\t\treturn Model.Notifications;\n\t}\n\n\tgetState(): NotificationsState\n\t{\n\t\treturn {\n\t\t\tnotifications: {},\n\t\t\tsenders: {},\n\t\t};\n\t}\n\n\tgetElementState(): NotificationsModel\n\t{\n\t\treturn {\n\t\t\ttype: '',\n\t\t\ttemplates: [{\n\t\t\t\ttype: '',\n\t\t\t\ttext: '',\n\t\t\t\ttextSms: '',\n\t\t\t}],\n\t\t\tisExpanded: false,\n\t\t};\n\t}\n\n\tgetGetters(): GetterTree\n\t{\n\t\treturn {\n\t\t\t/** @function notifications/get */\n\t\t\tget: (state: NotificationsState): NotificationsModel[] => Object.values(state.notifications),\n\t\t\t/** @function notifications/getByType */\n\t\t\tgetByType: (state: NotificationsState) => (type: string): NotificationsModel => state.notifications[type],\n\t\t\t/** @function notifications/getSenders */\n\t\t\tgetSenders: (state: NotificationsState): NotificationsSenderModel[] => Object.values(state.senders),\n\t\t\t/** @function notifications/isCurrentSenderAvailable */\n\t\t\tisCurrentSenderAvailable: (state: NotificationsState): boolean => {\n\t\t\t\treturn Object.values(state.senders).some((sender: NotificationsSenderModel) => sender.canUse);\n\t\t\t},\n\t\t};\n\t}\n\n\tgetActions(): ActionTree\n\t{\n\t\treturn {\n\t\t\t/** @function notifications/upsert */\n\t\t\tupsert: (store: Store, notification: NotificationsModel): void => {\n\t\t\t\tstore.commit('upsert', notification);\n\t\t\t},\n\t\t\t/** @function notifications/upsertMany */\n\t\t\tupsertMany: (store: Store, notifications: NotificationsModel[]): void => {\n\t\t\t\tnotifications.forEach((notification: NotificationsModel) => store.commit('upsert', notification));\n\t\t\t},\n\t\t\t/** @function notifications/upsertManySenders */\n\t\t\tupsertManySenders: (store: Store, senders: NotificationsSenderModel[]): void => {\n\t\t\t\tsenders.forEach((sender: NotificationsSenderModel) => store.commit('upsertSender', sender));\n\t\t\t},\n\t\t\t/** @function notifications/setIsExpanded */\n\t\t\tsetIsExpanded: (store: Store, payload: { type: string, isExpanded: boolean }): void => {\n\t\t\t\tstore.commit('setIsExpanded', payload);\n\t\t\t},\n\t\t};\n\t}\n\n\tgetMutations(): MutationTree\n\t{\n\t\treturn {\n\t\t\tupsert: (state: NotificationsState, notification: NotificationsModel): void => {\n\t\t\t\tstate.notifications[notification.type] ??= notification;\n\t\t\t\tObject.assign(state.notifications[notification.type], notification);\n\t\t\t},\n\t\t\tupsertSender: (state: NotificationsState, sender: NotificationsSenderModel): void => {\n\t\t\t\tstate.senders[sender.code] ??= sender;\n\t\t\t\tObject.assign(state.senders[sender.code], sender);\n\t\t\t},\n\t\t\tsetIsExpanded: (state: NotificationsState, { type, isExpanded }: { type: string, isExpanded: boolean }): void => {\n\t\t\t\tstate.notifications[type].isExpanded = isExpanded;\n\t\t\t},\n\t\t};\n\t}\n}\n"],"names":["Notifications","BuilderModel","getName","Model","getState","notifications","senders","getElementState","type","templates","text","textSms","isExpanded","getGetters","get","state","Object","values","getByType","getSenders","isCurrentSenderAvailable","some","sender","canUse","getActions","upsert","store","notification","commit","upsertMany","forEach","upsertManySenders","setIsExpanded","payload","getMutations","assign","upsertSender","code"],"mappings":";;;;;;CAAA;AACA,CAMO,MAAMA,aAAa,SAASC,yBAAY,CAC/C;GACCC,OAAO,GACP;KACC,OAAOC,mBAAK,CAACH,aAAa;;GAG3BI,QAAQ,GACR;KACC,OAAO;OACNC,aAAa,EAAE,EAAE;OACjBC,OAAO,EAAE;MACT;;GAGFC,eAAe,GACf;KACC,OAAO;OACNC,IAAI,EAAE,EAAE;OACRC,SAAS,EAAE,CAAC;SACXD,IAAI,EAAE,EAAE;SACRE,IAAI,EAAE,EAAE;SACRC,OAAO,EAAE;QACT,CAAC;OACFC,UAAU,EAAE;MACZ;;GAGFC,UAAU,GACV;KACC,OAAO;;OAENC,GAAG,EAAGC,KAAyB,IAA2BC,MAAM,CAACC,MAAM,CAACF,KAAK,CAACV,aAAa,CAAC;;OAE5Fa,SAAS,EAAGH,KAAyB,IAAMP,IAAY,IAAyBO,KAAK,CAACV,aAAa,CAACG,IAAI,CAAC;;OAEzGW,UAAU,EAAGJ,KAAyB,IAAiCC,MAAM,CAACC,MAAM,CAACF,KAAK,CAACT,OAAO,CAAC;;OAEnGc,wBAAwB,EAAGL,KAAyB,IAAc;SACjE,OAAOC,MAAM,CAACC,MAAM,CAACF,KAAK,CAACT,OAAO,CAAC,CAACe,IAAI,CAAEC,MAAgC,IAAKA,MAAM,CAACC,MAAM,CAAC;;MAE9F;;GAGFC,UAAU,GACV;KACC,OAAO;;OAENC,MAAM,EAAE,CAACC,KAAY,EAAEC,YAAgC,KAAW;SACjED,KAAK,CAACE,MAAM,CAAC,QAAQ,EAAED,YAAY,CAAC;QACpC;;OAEDE,UAAU,EAAE,CAACH,KAAY,EAAErB,aAAmC,KAAW;SACxEA,aAAa,CAACyB,OAAO,CAAEH,YAAgC,IAAKD,KAAK,CAACE,MAAM,CAAC,QAAQ,EAAED,YAAY,CAAC,CAAC;QACjG;;OAEDI,iBAAiB,EAAE,CAACL,KAAY,EAAEpB,OAAmC,KAAW;SAC/EA,OAAO,CAACwB,OAAO,CAAER,MAAgC,IAAKI,KAAK,CAACE,MAAM,CAAC,cAAc,EAAEN,MAAM,CAAC,CAAC;QAC3F;;OAEDU,aAAa,EAAE,CAACN,KAAY,EAAEO,OAA8C,KAAW;SACtFP,KAAK,CAACE,MAAM,CAAC,eAAe,EAAEK,OAAO,CAAC;;MAEvC;;GAGFC,YAAY,GACZ;KACC,OAAO;OACNT,MAAM,EAAE,CAACV,KAAyB,EAAEY,YAAgC,KAAW;SAAA;SAC9E,iDAAAZ,KAAK,CAACV,aAAa,uBAACsB,YAAY,CAACnB,IAAI,CAAC,oCAAtC,wCAAsC,GAAKmB,YAAY;SACvDX,MAAM,CAACmB,MAAM,CAACpB,KAAK,CAACV,aAAa,CAACsB,YAAY,CAACnB,IAAI,CAAC,EAAEmB,YAAY,CAAC;QACnE;OACDS,YAAY,EAAE,CAACrB,KAAyB,EAAEO,MAAgC,KAAW;SAAA;SACpF,2CAAAP,KAAK,CAACT,OAAO,iBAACgB,MAAM,CAACe,IAAI,CAAC,oCAA1B,4BAA0B,GAAKf,MAAM;SACrCN,MAAM,CAACmB,MAAM,CAACpB,KAAK,CAACT,OAAO,CAACgB,MAAM,CAACe,IAAI,CAAC,EAAEf,MAAM,CAAC;QACjD;OACDU,aAAa,EAAE,CAACjB,KAAyB,EAAE;SAAEP,IAAI;SAAEI;QAAmD,KAAW;SAChHG,KAAK,CAACV,aAAa,CAACG,IAAI,CAAC,CAACI,UAAU,GAAGA,UAAU;;MAElD;;CAEH;;;;;;;;"}