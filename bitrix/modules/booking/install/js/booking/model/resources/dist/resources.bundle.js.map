{"version":3,"file":"resources.bundle.js","sources":["../src/resources.js"],"sourcesContent":["import { BuilderModel, Store } from 'ui.vue3.vuex';\nimport type { GetterTree, ActionTree, MutationTree } from 'ui.vue3.vuex';\n\nimport { Model } from 'booking.const';\nimport type { ResourceModel, ResourcesState, SlotRange } from './types';\n\nexport class Resources extends BuilderModel\n{\n\tgetName(): string\n\t{\n\t\treturn Model.Resources;\n\t}\n\n\tgetState(): ResourcesState\n\t{\n\t\treturn {\n\t\t\tcollection: {},\n\t\t};\n\t}\n\n\tgetElementState(): ResourceModel\n\t{\n\t\treturn {\n\t\t\tid: 0,\n\t\t\ttype: '',\n\t\t\tname: '',\n\t\t\tdescription: '',\n\t\t\tlinkedResources: [],\n\t\t\tslotRanges: [],\n\t\t\tworkLoad: null,\n\t\t\tcounter: null,\n\t\t\tisMain: false,\n\t\t\tisDeleted: false,\n\t\t\tisConfirmationNotificationOn: true,\n\t\t\tisFeedbackNotificationOn: true,\n\t\t\tisInfoNotificationOn: false,\n\t\t\tisDelayedNotificationOn: false,\n\t\t\tisReminderNotificationOn: false,\n\t\t\ttemplateTypeConfirmation: '',\n\t\t\ttemplateTypeFeedback: '',\n\t\t\ttemplateTypeInfo: '',\n\t\t\ttemplateTypeDelayed: '',\n\t\t\ttemplateTypeReminder: '',\n\t\t\tcreatedBy: 0,\n\t\t\tcreatedAt: 0,\n\t\t\tupdatedAt: 0,\n\t\t\tdeletedAt: 0,\n\t\t};\n\t}\n\n\tgetGetters(): GetterTree\n\t{\n\t\treturn {\n\t\t\t/** @function resources/get */\n\t\t\tget: (state: ResourcesState, getters, rootState, rootGetters): ResourceModel[] => {\n\t\t\t\tconst deletingResources = rootGetters[`${Model.Interface}/deletingResources`];\n\n\t\t\t\treturn Object.values(state.collection).filter(({ id }) => !deletingResources[id]);\n\t\t\t},\n\t\t\t/** @function resources/getById */\n\t\t\tgetById: (state: ResourcesState) => (id: number): ResourceModel => state.collection[id],\n\t\t\t/** @function resources/getByIds */\n\t\t\tgetByIds: (state: ResourcesState) => (ids: number[]): ResourceModel[] => {\n\t\t\t\treturn ids.map((id: number): ResourceModel => state.collection[id]);\n\t\t\t},\n\t\t};\n\t}\n\n\tgetActions(): ActionTree\n\t{\n\t\treturn {\n\t\t\t/** @function resources/insertMany */\n\t\t\tinsertMany: (store: Store, resources: ResourceModel[]): void => {\n\t\t\t\tresources.forEach((resource: ResourceModel) => store.commit('insert', resource));\n\t\t\t},\n\t\t\t/** @function resources/upsert */\n\t\t\tupsert: (store: Store, resource: ResourceModel): void => {\n\t\t\t\tstore.commit('upsert', resource);\n\t\t\t},\n\t\t\t/** @function resources/upsertMany */\n\t\t\tupsertMany: (store: Store, resources: ResourceModel[]): void => {\n\t\t\t\tresources.forEach((resource: ResourceModel) => store.commit('upsert', resource));\n\t\t\t},\n\t\t\t/** @function resources/delete */\n\t\t\tdelete: (store: Store, resourceId: number): void => {\n\t\t\t\tstore.commit('delete', resourceId);\n\t\t\t},\n\t\t};\n\t}\n\n\tgetMutations(): MutationTree\n\t{\n\t\treturn {\n\t\t\tinsert: (state: ResourcesState, resource: ResourceModel): void => {\n\t\t\t\tresource.slotRanges = this.#updateSlotRangesTimezone(resource.slotRanges);\n\t\t\t\tstate.collection[resource.id] ??= resource;\n\t\t\t},\n\t\t\tupsert: (state: ResourcesState, resource: ResourceModel): void => {\n\t\t\t\tresource.slotRanges = this.#updateSlotRangesTimezone(resource.slotRanges);\n\t\t\t\tstate.collection[resource.id] ??= resource;\n\t\t\t\tObject.assign(state.collection[resource.id], resource);\n\t\t\t},\n\t\t\tdelete: (state: ResourcesState, resourceId: number): void => {\n\t\t\t\tdelete state.collection[resourceId];\n\t\t\t},\n\t\t};\n\t}\n\n\t#updateSlotRangesTimezone(slotRanges: SlotRange[]): SlotRange[]\n\t{\n\t\treturn slotRanges.map((slotRange: SlotRange) => {\n\t\t\treturn {\n\t\t\t\t...slotRange,\n\t\t\t\ttimezone: (\n\t\t\t\t\tslotRange.timezone === ''\n\t\t\t\t\t\t? Intl.DateTimeFormat().resolvedOptions().timeZone\n\t\t\t\t\t\t: slotRange.timezone\n\t\t\t\t),\n\t\t\t};\n\t\t});\n\t}\n}\n"],"names":["Resources","BuilderModel","getName","Model","getState","collection","getElementState","id","type","name","description","linkedResources","slotRanges","workLoad","counter","isMain","isDeleted","isConfirmationNotificationOn","isFeedbackNotificationOn","isInfoNotificationOn","isDelayedNotificationOn","isReminderNotificationOn","templateTypeConfirmation","templateTypeFeedback","templateTypeInfo","templateTypeDelayed","templateTypeReminder","createdBy","createdAt","updatedAt","deletedAt","getGetters","get","state","getters","rootState","rootGetters","deletingResources","Interface","Object","values","filter","getById","getByIds","ids","map","getActions","insertMany","store","resources","forEach","resource","commit","upsert","upsertMany","delete","resourceId","getMutations","insert","assign","slotRange","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone"],"mappings":";;;;;;CAGsC;AAGtC,CAAO,MAAMA,SAAS,SAASC,yBAAY,CAC3C;GAAA;KAAA;KAAA;OAAA;;;GACCC,OAAO,GACP;KACC,OAAOC,mBAAK,CAACH,SAAS;;GAGvBI,QAAQ,GACR;KACC,OAAO;OACNC,UAAU,EAAE;MACZ;;GAGFC,eAAe,GACf;KACC,OAAO;OACNC,EAAE,EAAE,CAAC;OACLC,IAAI,EAAE,EAAE;OACRC,IAAI,EAAE,EAAE;OACRC,WAAW,EAAE,EAAE;OACfC,eAAe,EAAE,EAAE;OACnBC,UAAU,EAAE,EAAE;OACdC,QAAQ,EAAE,IAAI;OACdC,OAAO,EAAE,IAAI;OACbC,MAAM,EAAE,KAAK;OACbC,SAAS,EAAE,KAAK;OAChBC,4BAA4B,EAAE,IAAI;OAClCC,wBAAwB,EAAE,IAAI;OAC9BC,oBAAoB,EAAE,KAAK;OAC3BC,uBAAuB,EAAE,KAAK;OAC9BC,wBAAwB,EAAE,KAAK;OAC/BC,wBAAwB,EAAE,EAAE;OAC5BC,oBAAoB,EAAE,EAAE;OACxBC,gBAAgB,EAAE,EAAE;OACpBC,mBAAmB,EAAE,EAAE;OACvBC,oBAAoB,EAAE,EAAE;OACxBC,SAAS,EAAE,CAAC;OACZC,SAAS,EAAE,CAAC;OACZC,SAAS,EAAE,CAAC;OACZC,SAAS,EAAE;MACX;;GAGFC,UAAU,GACV;KACC,OAAO;;OAENC,GAAG,EAAE,CAACC,KAAqB,EAAEC,OAAO,EAAEC,SAAS,EAAEC,WAAW,KAAsB;SACjF,MAAMC,iBAAiB,GAAGD,WAAW,CAAE,GAAEjC,mBAAK,CAACmC,SAAU,oBAAmB,CAAC;SAE7E,OAAOC,MAAM,CAACC,MAAM,CAACP,KAAK,CAAC5B,UAAU,CAAC,CAACoC,MAAM,CAAC,CAAC;WAAElC;UAAI,KAAK,CAAC8B,iBAAiB,CAAC9B,EAAE,CAAC,CAAC;QACjF;;OAEDmC,OAAO,EAAGT,KAAqB,IAAM1B,EAAU,IAAoB0B,KAAK,CAAC5B,UAAU,CAACE,EAAE,CAAC;;OAEvFoC,QAAQ,EAAGV,KAAqB,IAAMW,GAAa,IAAsB;SACxE,OAAOA,GAAG,CAACC,GAAG,CAAEtC,EAAU,IAAoB0B,KAAK,CAAC5B,UAAU,CAACE,EAAE,CAAC,CAAC;;MAEpE;;GAGFuC,UAAU,GACV;KACC,OAAO;;OAENC,UAAU,EAAE,CAACC,KAAY,EAAEC,SAA0B,KAAW;SAC/DA,SAAS,CAACC,OAAO,CAAEC,QAAuB,IAAKH,KAAK,CAACI,MAAM,CAAC,QAAQ,EAAED,QAAQ,CAAC,CAAC;QAChF;;OAEDE,MAAM,EAAE,CAACL,KAAY,EAAEG,QAAuB,KAAW;SACxDH,KAAK,CAACI,MAAM,CAAC,QAAQ,EAAED,QAAQ,CAAC;QAChC;;OAEDG,UAAU,EAAE,CAACN,KAAY,EAAEC,SAA0B,KAAW;SAC/DA,SAAS,CAACC,OAAO,CAAEC,QAAuB,IAAKH,KAAK,CAACI,MAAM,CAAC,QAAQ,EAAED,QAAQ,CAAC,CAAC;QAChF;;OAEDI,MAAM,EAAE,CAACP,KAAY,EAAEQ,UAAkB,KAAW;SACnDR,KAAK,CAACI,MAAM,CAAC,QAAQ,EAAEI,UAAU,CAAC;;MAEnC;;GAGFC,YAAY,GACZ;KACC,OAAO;OACNC,MAAM,EAAE,CAACzB,KAAqB,EAAEkB,QAAuB,KAAW;SAAA;SACjEA,QAAQ,CAACvC,UAAU,2CAAG,IAAI,wDAA2BuC,QAAQ,CAACvC,UAAU,CAAC;SACzE,8CAAAqB,KAAK,CAAC5B,UAAU,iBAAC8C,QAAQ,CAAC5C,EAAE,CAAC,oCAA7B,+BAA6B,GAAK4C,QAAQ;QAC1C;OACDE,MAAM,EAAE,CAACpB,KAAqB,EAAEkB,QAAuB,KAAW;SAAA;SACjEA,QAAQ,CAACvC,UAAU,2CAAG,IAAI,wDAA2BuC,QAAQ,CAACvC,UAAU,CAAC;SACzE,+CAAAqB,KAAK,CAAC5B,UAAU,kBAAC8C,QAAQ,CAAC5C,EAAE,CAAC,oCAA7B,iCAA6B,GAAK4C,QAAQ;SAC1CZ,MAAM,CAACoB,MAAM,CAAC1B,KAAK,CAAC5B,UAAU,CAAC8C,QAAQ,CAAC5C,EAAE,CAAC,EAAE4C,QAAQ,CAAC;QACtD;OACDI,MAAM,EAAE,CAACtB,KAAqB,EAAEuB,UAAkB,KAAW;SAC5D,OAAOvB,KAAK,CAAC5B,UAAU,CAACmD,UAAU,CAAC;;MAEpC;;CAgBH;CAAC,oCAb0B5C,UAAuB,EACjD;GACC,OAAOA,UAAU,CAACiC,GAAG,CAAEe,SAAoB,IAAK;KAC/C,OAAO;OACN,GAAGA,SAAS;OACZC,QAAQ,EACPD,SAAS,CAACC,QAAQ,KAAK,EAAE,GACtBC,IAAI,CAACC,cAAc,EAAE,CAACC,eAAe,EAAE,CAACC,QAAQ,GAChDL,SAAS,CAACC;MAEd;IACD,CAAC;CACH;;;;;;;;"}