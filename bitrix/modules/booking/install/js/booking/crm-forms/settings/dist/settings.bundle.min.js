this.BX=this.BX||{};this.BX.Booking=this.BX.Booking||{};(function(e,s,t,a,l,i,o){"use strict";var r=babelHelpers.classPrivateFieldLooseKey("resourcesById");var n=babelHelpers.classPrivateFieldLooseKey("isLoaded");class c{constructor(){Object.defineProperty(this,n,{value:b});Object.defineProperty(this,r,{writable:true,value:new Map})}async ensure(e){if(e.length===0){return}const s=e.filter((e=>!babelHelpers.classPrivateFieldLooseBase(this,n)[n](e)));if(s.length===0){return}const a=await t.crmFormService.getResources(s);for(const e of a){babelHelpers.classPrivateFieldLooseBase(this,r)[r].set(e.id,e)}}getByIds(e){return e.map((e=>babelHelpers.classPrivateFieldLooseBase(this,r)[r].get(e))).filter(Boolean)}getAll(){return[...babelHelpers.classPrivateFieldLooseBase(this,r)[r].values()]}}function b(e){return babelHelpers.classPrivateFieldLooseBase(this,r)[r].has(e)}const d=new c;const u={resourceIds:[],label:o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_FIELD_LABEL_DEFAULT"),isVisibleHint:true,hint:o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_HINT_DEFAULT_VALUE"),hasSlotsAllAvailableResources:false};const v={...u,resourceIds:[],textHeader:o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_FIELD_PLACEHOLDER_DEFAULT_VALUE")};const p={...u,resourceIds:[],hasSlotsAllAvailableResources:false,textHeader:o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_FIELD_PLACEHOLDER_AUTO_SELECT_DEFAULT_VALUE")};var h=babelHelpers.classPrivateFieldLooseKey("isAutoSelectionOn");var L=babelHelpers.classPrivateFieldLooseKey("settingsData");var P=babelHelpers.classPrivateFieldLooseKey("getAutoSelectionFormByTemplate");var F=babelHelpers.classPrivateFieldLooseKey("getDefaultFormByTemplate");class g{constructor(e,s,t){Object.defineProperty(this,F,{value:B});Object.defineProperty(this,P,{value:H});Object.defineProperty(this,h,{writable:true,value:void 0});Object.defineProperty(this,L,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,h)[h]=s;const a=e[l.CrmFormSettingsDataPropName.autoSelection]||babelHelpers.classPrivateFieldLooseBase(this,P)[P](t);const i=e[l.CrmFormSettingsDataPropName.default]||babelHelpers.classPrivateFieldLooseBase(this,F)[F](t);babelHelpers.classPrivateFieldLooseBase(this,L)[L]={[l.CrmFormSettingsDataPropName.isAutoSelectionOn]:s,[l.CrmFormSettingsDataPropName.autoSelection]:a,[l.CrmFormSettingsDataPropName.default]:i}}get dataSettingsProperty(){return babelHelpers.classPrivateFieldLooseBase(this,h)[h]?l.CrmFormSettingsDataPropName.autoSelection:l.CrmFormSettingsDataPropName.default}setSettingsData(e={}){Object.assign(babelHelpers.classPrivateFieldLooseBase(this,L)[L][this.dataSettingsProperty],e)}get settingsData(){return babelHelpers.classPrivateFieldLooseBase(this,L)[L]}get form(){return babelHelpers.classPrivateFieldLooseBase(this,L)[L][this.dataSettingsProperty]}}function H(){return p}function B(e){if(e===l.CrmFormTemplateId.BookingAnyResource){return{...v,hasSlotsAllAvailableResources:true}}return{...v}}class f extends i.BaseHeader{constructor(...e){super(...e);this.getContainer()}render(){return this.options.content}}let y=e=>e,m;var O=babelHelpers.classPrivateFieldLooseKey("resources");var S=babelHelpers.classPrivateFieldLooseKey("onClose");var _=babelHelpers.classPrivateFieldLooseKey("onSave");var R=babelHelpers.classPrivateFieldLooseKey("add");var E=babelHelpers.classPrivateFieldLooseKey("close");var T=babelHelpers.classPrivateFieldLooseKey("handleOnTagAdd");var I=babelHelpers.classPrivateFieldLooseKey("handleOnTagRemove");var C=babelHelpers.classPrivateFieldLooseKey("onResourceToggle");class A extends i.BaseFooter{constructor(e,s){super(e,s);Object.defineProperty(this,C,{value:w});Object.defineProperty(this,I,{value:D});Object.defineProperty(this,T,{value:K});Object.defineProperty(this,E,{value:M});Object.defineProperty(this,R,{value:N});Object.defineProperty(this,O,{writable:true,value:[]});Object.defineProperty(this,S,{writable:true,value:null});Object.defineProperty(this,_,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,O)[O]=[];babelHelpers.classPrivateFieldLooseBase(this,S)[S]=s.onClose||null;babelHelpers.classPrivateFieldLooseBase(this,_)[_]=s.onSave||null;this.getDialog().subscribe("Item:onSelect",babelHelpers.classPrivateFieldLooseBase(this,T)[T].bind(this));this.getDialog().subscribe("Item:onDeselect",babelHelpers.classPrivateFieldLooseBase(this,I)[I].bind(this))}render(){const{footer:e,footerAddButton:s,footerCloseButton:t}=o.Tag.render(m||(m=y`
			<div ref="footer" class="crm-forms--booking--resource-selector-dialog__footer">
				<button
					ref="footerAddButton"
					class="ui-btn ui-btn ui-btn-sm ui-btn-primary ui-btn-round crm-forms--booking--resource-selector-dialog__footer-btn-width"
				>
					${0}
				</button>
				<button ref="footerCloseButton" class="ui-btn ui-btn ui-btn-sm ui-btn-light-border ui-btn-round crm-forms--booking--resource-selector-dialog__footer-btn-width">
					${0}
				</button>
			</div>
		`),o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCE_SELECTOR_DIALOG_ADD_BUTTON"),o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCE_SELECTOR_DIALOG_CANCEL_BUTTON"));this.footerAddButton=s;o.Event.bind(s,"click",babelHelpers.classPrivateFieldLooseBase(this,R)[R].bind(this));this.footerCloseButton=t;o.Event.bind(this.footerCloseButton,"click",babelHelpers.classPrivateFieldLooseBase(this,E)[E].bind(this));return e}get resourcesCount(){return babelHelpers.classPrivateFieldLooseBase(this,O)[O].length}destroyDialog(){o.Event.unbindAll(this.footerAddButton,"click");o.Event.unbindAll(this.footerCloseButton,"click");this.getDialog().destroy()}}function N(){const e=this.dialog.getSelectedItems();const s=e.map((e=>e.id));if(o.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(this,_)[_])){babelHelpers.classPrivateFieldLooseBase(this,_)[_]({resourceIds:s})}babelHelpers.classPrivateFieldLooseBase(this,E)[E]()}function M(){var e;if(o.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(this,S)[S])){babelHelpers.classPrivateFieldLooseBase(this,S)[S]()}(e=this.dialog)==null?void 0:e.hide()}function K(e){const{item:s}=e.getData();babelHelpers.classPrivateFieldLooseBase(this,C)[C](s,true)}function D(e){const{item:s}=e.getData();babelHelpers.classPrivateFieldLooseBase(this,C)[C](s,false)}function w(e,s=false){if(s){babelHelpers.classPrivateFieldLooseBase(this,O)[O]=[...babelHelpers.classPrivateFieldLooseBase(this,O)[O],e]}else{babelHelpers.classPrivateFieldLooseBase(this,O)[O]=babelHelpers.classPrivateFieldLooseBase(this,O)[O].filter((s=>s.id!==e.id))}}var j=babelHelpers.classPrivateFieldLooseKey("selector");var G=babelHelpers.classPrivateFieldLooseKey("targetNode");var U=babelHelpers.classPrivateFieldLooseKey("selectedIds");var k=babelHelpers.classPrivateFieldLooseKey("selectedItems");var x=babelHelpers.classPrivateFieldLooseKey("onClose");var V=babelHelpers.classPrivateFieldLooseKey("onSave");var $=babelHelpers.classPrivateFieldLooseKey("changeSelected");class X{constructor(e){Object.defineProperty(this,$,{value:q});Object.defineProperty(this,j,{writable:true,value:null});Object.defineProperty(this,G,{writable:true,value:void 0});Object.defineProperty(this,U,{writable:true,value:void 0});Object.defineProperty(this,k,{writable:true,value:[]});Object.defineProperty(this,x,{writable:true,value:null});Object.defineProperty(this,V,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,G)[G]=e.targetNode;babelHelpers.classPrivateFieldLooseBase(this,U)[U]=e.selectedIds||[];babelHelpers.classPrivateFieldLooseBase(this,k)[k]=[];babelHelpers.classPrivateFieldLooseBase(this,x)[x]=e.onClose;babelHelpers.classPrivateFieldLooseBase(this,V)[V]=e.onSave}getSelectedItems(){return babelHelpers.classPrivateFieldLooseBase(this,k)[k]}createSelector(){babelHelpers.classPrivateFieldLooseBase(this,j)[j]=new i.Dialog({id:"crm-forms--booking--booking-setting--resources-selector",preselectedItems:babelHelpers.classPrivateFieldLooseBase(this,U)[U].map((e=>[l.EntitySelectorEntity.Resource,e])),width:400,enableSearch:true,dropdownMode:true,context:"crmFormsBookingResourcesSelector",multiple:true,cacheable:true,showAvatars:false,footer:A,footerOptions:{onSave:babelHelpers.classPrivateFieldLooseBase(this,V)[V],onClose:babelHelpers.classPrivateFieldLooseBase(this,x)[x]},entities:[{id:l.EntitySelectorEntity.Resource,dynamicLoad:true,dynamicSearch:true}],searchOptions:{allowCreateItem:false},popupOptions:{overlay:{opacity:40}},events:{onHide:this.hide.bind(this),onLoad:babelHelpers.classPrivateFieldLooseBase(this,$)[$].bind(this)}});return babelHelpers.classPrivateFieldLooseBase(this,j)[j]}getSelectedIds(){return babelHelpers.classPrivateFieldLooseBase(this,k)[k].map((({id:e})=>e))}hide(){if(o.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(this,x)[x])){babelHelpers.classPrivateFieldLooseBase(this,x)[x]()}}}function q(){babelHelpers.classPrivateFieldLooseBase(this,k)[k]=babelHelpers.classPrivateFieldLooseBase(this,j)[j].getSelectedItems()}let z=e=>e,W,Y,J;const Q="crm-form--booking--resources-manager--header-resources-section";var Z=babelHelpers.classPrivateFieldLooseKey("targetNode");var ee=babelHelpers.classPrivateFieldLooseKey("selectedIds");var se=babelHelpers.classPrivateFieldLooseKey("resourcesIds");var te=babelHelpers.classPrivateFieldLooseKey("loadingResources");var ae=babelHelpers.classPrivateFieldLooseKey("options");var le=babelHelpers.classPrivateFieldLooseKey("btnDeleteResources");var ie=babelHelpers.classPrivateFieldLooseKey("btnChangeResources");var oe=babelHelpers.classPrivateFieldLooseKey("initDialog");var re=babelHelpers.classPrivateFieldLooseKey("selectItem");var ne=babelHelpers.classPrivateFieldLooseKey("deselectItem");var ce=babelHelpers.classPrivateFieldLooseKey("deleteResources");var be=babelHelpers.classPrivateFieldLooseKey("appendEmptyState");var de=babelHelpers.classPrivateFieldLooseKey("removeEmptyState");var ue=babelHelpers.classPrivateFieldLooseKey("updateResourcesCount");var ve=babelHelpers.classPrivateFieldLooseKey("loadResources");var pe=babelHelpers.classPrivateFieldLooseKey("addSelectedItems");var he=babelHelpers.classPrivateFieldLooseKey("setLoadingResources");var Le=babelHelpers.classPrivateFieldLooseKey("setResourceIds");var Pe=babelHelpers.classPrivateFieldLooseKey("openResourceSelector");var Fe=babelHelpers.classPrivateFieldLooseKey("saveResourceSelector");var ge=babelHelpers.classPrivateFieldLooseKey("closeResourceSelector");var He=babelHelpers.classPrivateFieldLooseKey("getHeaderContent");var Be=babelHelpers.classPrivateFieldLooseKey("appendSubHeaderContent");var fe=babelHelpers.classPrivateFieldLooseKey("showDeleteButton");var ye=babelHelpers.classPrivateFieldLooseKey("hideDeleteButton");var me=babelHelpers.classPrivateFieldLooseKey("removeSubHeadContent");class Oe{constructor(e){Object.defineProperty(this,me,{value:Ve});Object.defineProperty(this,ye,{value:xe});Object.defineProperty(this,fe,{value:ke});Object.defineProperty(this,Be,{value:Ue});Object.defineProperty(this,He,{value:Ge});Object.defineProperty(this,ge,{value:je});Object.defineProperty(this,Fe,{value:we});Object.defineProperty(this,Pe,{value:De});Object.defineProperty(this,Le,{value:Ke});Object.defineProperty(this,he,{value:Me});Object.defineProperty(this,pe,{value:Ne});Object.defineProperty(this,ve,{value:Ae});Object.defineProperty(this,ue,{value:Ce});Object.defineProperty(this,de,{value:Ie});Object.defineProperty(this,be,{value:Te});Object.defineProperty(this,ce,{value:Ee});Object.defineProperty(this,ne,{value:Re});Object.defineProperty(this,re,{value:_e});Object.defineProperty(this,oe,{value:Se});this.dialog=null;Object.defineProperty(this,Z,{writable:true,value:void 0});Object.defineProperty(this,ee,{writable:true,value:void 0});Object.defineProperty(this,se,{writable:true,value:void 0});Object.defineProperty(this,te,{writable:true,value:false});Object.defineProperty(this,ae,{writable:true,value:void 0});Object.defineProperty(this,le,{writable:true,value:void 0});Object.defineProperty(this,ie,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,se)[se]=e.selectedIds||[];babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]=[];babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]=e.target;babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]=e}async show(){if(!this.dialog){babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]();await babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](babelHelpers.classPrivateFieldLooseBase(this,se)[se]);const e=babelHelpers.classPrivateFieldLooseBase(this,se)[se].length>0?babelHelpers.classPrivateFieldLooseBase(this,pe)[pe].bind(this):babelHelpers.classPrivateFieldLooseBase(this,be)[be].bind(this);e()}this.dialog.show();o.Event.bind(document,"scroll",this.adjustPosition,true)}close(){if(this.dialog){babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].onUpdateResourceIds(babelHelpers.classPrivateFieldLooseBase(this,se)[se]);if(o.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].onClose)){babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].onClose(babelHelpers.classPrivateFieldLooseBase(this,se)[se])}this.dialog.destroy();o.Event.unbind(document,"scroll",this.adjustPosition,true)}}adjustPosition(){if(this.dialog){this.dialog.adjustPosition()}}get selectedResources(){if(babelHelpers.classPrivateFieldLooseBase(this,se)[se].length===0){return[]}return d.getByIds(babelHelpers.classPrivateFieldLooseBase(this,se)[se])}}function Se(){this.dialog=new i.Dialog({targetNode:babelHelpers.classPrivateFieldLooseBase(this,Z)[Z],id:"booking-crm-form-resource-selector",height:Math.max(window.innerHeight-300,500),width:356,offsetLeft:babelHelpers.classPrivateFieldLooseBase(this,Z)[Z].offsetWidth+5,offsetTop:-300,addTagOnSelect:false,showAvatars:false,focusOnFirst:false,dropdownMode:true,enableSearch:true,searchOptions:{allowCreateItem:false},header:f,headerOptions:{content:babelHelpers.classPrivateFieldLooseBase(this,He)[He]()},popupOptions:{className:"crm-form--booking--resource-manager-popup",angle:{position:"left"}},tagSelectorOptions:{textBoxWidth:"90%",placeholder:o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCE_MANAGER_SEARCH_PLACEHOLDER")},events:{onHide:()=>{var e,s;return(e=(s=babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]).onClose)==null?void 0:e.call(s,babelHelpers.classPrivateFieldLooseBase(this,se)[se])},"Item:onSelect":e=>{babelHelpers.classPrivateFieldLooseBase(this,re)[re](e.getData().item)},"Item:onDeselect":e=>{babelHelpers.classPrivateFieldLooseBase(this,ne)[ne](e.getData().item)}}});if(babelHelpers.classPrivateFieldLooseBase(this,se)[se].length>0){babelHelpers.classPrivateFieldLooseBase(this,Be)[Be]()}this.dialog.removeItems()}function _e(e){babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].push(e.id);if(babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].length>0){babelHelpers.classPrivateFieldLooseBase(this,fe)[fe]()}}function Re(e){babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]=babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].filter((s=>s!==e.id));if(babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].length===0){babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]()}}function Ee(){if(babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].length===0){return}babelHelpers.classPrivateFieldLooseBase(this,Le)[Le](babelHelpers.classPrivateFieldLooseBase(this,se)[se].filter((e=>!babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].includes(e))));babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]=[];babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]()}function Te(){const e=this.dialog.getPopup().getContentContainer();if(o.Type.isDomNode(e.querySelector(".crm-forms--booking--resources-manager-empty-state"))){return}const s=o.Tag.render(W||(W=z`
			<div class="crm-forms--booking--resources-manager-empty-state d-flex h-100 w-100 justify-content-center">
				<div class="d-flex flex-column align-items-center p-4">
					<div class="mb-3 crm-forms--booking--resources-manager-empty-state_icon"></div>
					<div class="mb-3 crm-forms--booking--resources-manager-empty-state_title fw-medium fs-6 lh-base">
						${0}
					</div>
					<div class="mb-3 crm-forms--booking--resources-manager-empty-state_text fw-normal">
						${0}
					</div>
					<div>
						<button
							class="btn btn-primary g-btn-size-l crm-forms--booking--resources-manager__empty-state-btn-add"
							type="button"
							onclick="${0}"
						>
							${0}
						</button>
					</div>
				</div>
			</div>
		`),o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCE_MANAGER_EMPTY_TITLE"),o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCE_MANAGER_EMPTY_MESSAGE"),babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe].bind(this),o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCE_MANAGER_ADD_RESOURCES_BUTTON"));o.Dom.insertBefore(s,e.querySelector(".ui-selector-items"))}function Ie(){const e=this.dialog.getPopup().getContentContainer().querySelector(".crm-forms--booking--resources-manager-empty-state");$e(e)}function Ce(e){const s=this.dialog.getPopup().getContentContainer().querySelector(".crm-form--booking--resources-manager--header-resources-count");if(o.Type.isDomNode(s)){s.innerText=e}}async function Ae(e){if(e.length===0){return}babelHelpers.classPrivateFieldLooseBase(this,he)[he](true);await d.ensure(e);babelHelpers.classPrivateFieldLooseBase(this,he)[he](false)}function Ne(){this.dialog.removeItems();const e=d.getByIds(babelHelpers.classPrivateFieldLooseBase(this,se)[se]);for(const s of e){this.dialog.addItem({id:s.id,entityId:l.EntitySelectorEntity.Resource,title:s.name,subtitle:s.typeName,tabs:l.EntitySelectorTab.Recent})}}function Me(e){babelHelpers.classPrivateFieldLooseBase(this,te)[te]=e;if(babelHelpers.classPrivateFieldLooseBase(this,te)[te]){this.dialog.showLoader()}else{this.dialog.hideLoader()}}function Ke(e){babelHelpers.classPrivateFieldLooseBase(this,se)[se]=e;babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]();babelHelpers.classPrivateFieldLooseBase(this,ue)[ue](e.length);babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].onUpdateResourceIds(e);if(e.length>0){babelHelpers.classPrivateFieldLooseBase(this,Be)[Be]();babelHelpers.classPrivateFieldLooseBase(this,de)[de]()}else{babelHelpers.classPrivateFieldLooseBase(this,be)[be]();babelHelpers.classPrivateFieldLooseBase(this,me)[me]()}}function De(e){const s=new X({targetNode:(e==null?void 0:e.target)||null,selectedIds:babelHelpers.classPrivateFieldLooseBase(this,se)[se],onSave:babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe].bind(this),onClose:babelHelpers.classPrivateFieldLooseBase(this,ge)[ge].bind(this)}).createSelector();this.dialog.freeze();s.show()}async function we({resourceIds:e}){await babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e);babelHelpers.classPrivateFieldLooseBase(this,Le)[Le](e)}function je(){this.dialog.unfreeze()}function Ge(){return o.Tag.render(Y||(Y=z`
			<div class="w-100 pt-3 px-3">
				<div class="d-flex align-items-end w-100">
					<h5 class="flex-grow-1">
						${0}
					</h5>
					<div
						class="landing-ui-button-icon-remove" 
						role="button"
						tabindex="0"
						onclick="${0}"
					></div>
				</div>
			</div>
		`),o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCE_MANAGER_HEADER_TITLE"),this.close.bind(this))}function Ue(){if(this.dialog.getPopup().getPopupContainer().querySelector(`.${Q}`)){return}const e=o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCE_MANAGER_HEADER_ADD_RESOURCES_BUTTON",{"#PLUS#":"+"});const s=o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCE_MANAGER_HEADER_DELETE_RESOURCES_BUTTON",{"#ICON#":"\xd7"});const t=o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCE_MANAGER_RESOURCES_COUNT",{"#COUNT#":`<span class="crm-form--booking--resources-manager--header-resources-count">${babelHelpers.classPrivateFieldLooseBase(this,se)[se].length}</span>`});const{root:a,btnDeleteResources:l,btnChangeResources:i}=o.Tag.render(J||(J=z`
			<div class="${0} d-flex align-items-center">
				<div class="crm-form--booking--resources-manager--header-resources flex-grow-1">
					<span class="pr-2 crm-form--booking--resources-manager--header-resources-title">
						${0}
					</span>
				</div>
				<div>
					<button
						ref="btnDeleteResources"
						class="crm-form--booking--resources-manager--header__btn --none btn btn-outline-danger g-btn-size-sm"
						type="button"
						onclick="${0}"
					>
						${0}
					</button>
					<button
						ref="btnChangeResources"
						class="crm-form--booking--resources-manager--header__btn btn btn-primary g-btn-size-sm"
						type="button"
						onclick="${0}"
					>
						${0}
					</button>
				</div>
			</div>
		`),Q,t,babelHelpers.classPrivateFieldLooseBase(this,ce)[ce].bind(this),s,babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe].bind(this),e);babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]=i;babelHelpers.classPrivateFieldLooseBase(this,le)[le]=l;const r=this.dialog.getPopup().getPopupContainer().querySelector(".ui-selector-search");o.Dom.insertAfter(a,r)}function ke(){if(o.Type.isDomNode(babelHelpers.classPrivateFieldLooseBase(this,le)[le])&&o.Type.isDomNode(babelHelpers.classPrivateFieldLooseBase(this,ie)[ie])){o.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,ie)[ie],"--none");o.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,le)[le],"--none")}}function xe(){if(o.Type.isDomNode(babelHelpers.classPrivateFieldLooseBase(this,le)[le])&&o.Type.isDomNode(babelHelpers.classPrivateFieldLooseBase(this,ie)[ie])){o.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,ie)[ie],"--none");o.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,le)[le],"--none")}}function Ve(){const e=document.querySelector(`.${Q}`);$e(e)}function $e(e){if(o.Type.isDomNode(e)){o.Dom.remove(e)}}var Xe=babelHelpers.classPrivateFieldLooseKey("field");class qe{constructor(e){Object.defineProperty(this,Xe,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe]=e}getValue(){return babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe].getValue()}setValue(e){babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe].setValue(e)}getField(){return babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe]}getLayout(){return babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe].layout}}const ze="data-hint";const We="data-hint-no-icon";var Ye=babelHelpers.classPrivateFieldLooseKey("disabled");var Je=babelHelpers.classPrivateFieldLooseKey("addItem");var Qe=babelHelpers.classPrivateFieldLooseKey("updateLayoutDataAttrs");class Ze extends qe{constructor(e,s,t=false){super(new BX.Landing.UI.Field.Checkbox({selector:"hasSlotsAllAvailableResources",compact:true,multiple:false,items:[]}));Object.defineProperty(this,Qe,{value:ss});Object.defineProperty(this,Je,{value:es});Object.defineProperty(this,Ye,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Je)[Je](t);babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye]=t;if(o.Type.isFunction(s)){this.getField().subscribe("onChange",(()=>{s(Boolean(this.getField().getValue()))}))}this.setValue(e)}setValue(e){super.setValue(e?["hasSlotsAllAvailableResources"]:false)}getLayout(){return babelHelpers.classPrivateFieldLooseBase(this,Qe)[Qe](super.getLayout())}}function es(e=false){const s=o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_SHOW_SLOTS_ALL_AVAILABLE_RESOURCES_HELP_HINT",{"#NBSP# ":"&nbsp;"});this.getField().addItem({name:o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_SHOW_SLOTS_ALL_AVAILABLE_RESOURCES"),html:`\n\t\t\t\t${o.Text.encode(o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_SHOW_SLOTS_ALL_AVAILABLE_RESOURCES"))}\n\t\t\t\t<span\n\t\t\t\t\tclass="landing-ui-form-help booking--crm-forms-settins--show-slots-all-available-resources-help-hint"\n\t\t\t\t\ttitle=""\n\t\t\t\t\t${ze}="${s}"\n\t\t\t\t\tonclick="return false;"\n\t\t\t\t>\n\t\t\t\t\t<div></div>\n\t\t\t\t</span>\n\t\t\t`,value:"hasSlotsAllAvailableResources",disabled:e})}function ss(e){if(babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye]){e.setAttribute(ze,o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_SHOW_SLOTS_ALL_AVAILABLE_RESOURCES_DISABLED_HINT"));e.setAttribute(We,true)}else{e.removeAttribute(ze);e.removeAttribute(We)}return e}class ts extends qe{constructor(e,s){super(new BX.Landing.UI.Field.Text({title:o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_HINT_LABEL"),textOnly:true,content:e}));if(o.Type.isFunction(s)){this.getField().subscribe("onChange",(()=>s(this.getValue()||"")))}this.setValue(e)}setValue(e){super.setValue(e)}}class as extends qe{constructor(e,s){super(new BX.Landing.UI.Field.Checkbox({selector:"isVisibleHint",compact:true,multiple:false,items:[{name:o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_IS_VISIBLE_HINT_LABEL"),value:"isVisibleHint"}]}));if(o.Type.isFunction(s)){this.getField().subscribe("onChange",(()=>s(Boolean(this.getValue()))))}this.setValue(e)}setValue(e){super.setValue(e?["isVisibleHint"]:false)}}class ls extends qe{constructor(e,s){super(new BX.Landing.UI.Field.Text({title:o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_FIELD_LABEL"),textOnly:true,content:e}));if(o.Type.isFunction(s)){this.getField().subscribe("onChange",(()=>s(this.getValue()||"")))}this.setValue(e)}setValue(e){super.setValue(e)}}class is extends qe{constructor(e,s){super(new BX.Landing.UI.Field.Text({title:o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_FIELD_PLACEHOLDER"),textOnly:true,content:e}));if(o.Type.isFunction(s)){this.getField().subscribe("onChange",(()=>s(this.getValue()||"")))}this.setValue(e)}setValue(e){super.setValue(e)}}let os=e=>e,rs,ns,cs;var bs=babelHelpers.classPrivateFieldLooseKey("options");var ds=babelHelpers.classPrivateFieldLooseKey("layout");var us=babelHelpers.classPrivateFieldLooseKey("bookingSettingsDataModel");var vs=babelHelpers.classPrivateFieldLooseKey("isAutoSelectionOn");var ps=babelHelpers.classPrivateFieldLooseKey("resourceLoader");var hs=babelHelpers.classPrivateFieldLooseKey("loadingResources");var Ls=babelHelpers.classPrivateFieldLooseKey("resourcesManagerButton");var Ps=babelHelpers.classPrivateFieldLooseKey("initFields");var Fs=babelHelpers.classPrivateFieldLooseKey("loadResources");var gs=babelHelpers.classPrivateFieldLooseKey("setLoadingResources");var Hs=babelHelpers.classPrivateFieldLooseKey("filterAvailableResourceIds");var Bs=babelHelpers.classPrivateFieldLooseKey("getHeaderContainer");var fs=babelHelpers.classPrivateFieldLooseKey("getBodyContainer");var ys=babelHelpers.classPrivateFieldLooseKey("renderContent");var ms=babelHelpers.classPrivateFieldLooseKey("renderResource");var Os=babelHelpers.classPrivateFieldLooseKey("showResourcesManager");var Ss=babelHelpers.classPrivateFieldLooseKey("getResourceIds");var _s=babelHelpers.classPrivateFieldLooseKey("setResourceIds");var Rs=babelHelpers.classPrivateFieldLooseKey("updateResourcesCounter");var Es=babelHelpers.classPrivateFieldLooseKey("updateResourceManagerButton");var Ts=babelHelpers.classPrivateFieldLooseKey("renderLabelField");var Is=babelHelpers.classPrivateFieldLooseKey("renderPlaceholderField");var Cs=babelHelpers.classPrivateFieldLooseKey("renderHintField");var As=babelHelpers.classPrivateFieldLooseKey("renderIsVisibleHint");var Ns=babelHelpers.classPrivateFieldLooseKey("renderHasSlotsAllAvailableResources");var Ms=babelHelpers.classPrivateFieldLooseKey("updateSettings");class Ks extends a.EventEmitter{constructor({listItemOptions:e,isAutoSelectionOn:s,templateId:t}){super();Object.defineProperty(this,Ms,{value:st});Object.defineProperty(this,Ns,{value:et});Object.defineProperty(this,As,{value:Zs});Object.defineProperty(this,Cs,{value:Qs});Object.defineProperty(this,Is,{value:Js});Object.defineProperty(this,Ts,{value:Ys});Object.defineProperty(this,Es,{value:Ws});Object.defineProperty(this,Rs,{value:zs});Object.defineProperty(this,_s,{value:qs});Object.defineProperty(this,Ss,{value:Xs});Object.defineProperty(this,Os,{value:$s});Object.defineProperty(this,ms,{value:Vs});Object.defineProperty(this,ys,{value:xs});Object.defineProperty(this,fs,{value:ks});Object.defineProperty(this,Bs,{value:Us});Object.defineProperty(this,Hs,{value:Gs});Object.defineProperty(this,gs,{value:js});Object.defineProperty(this,Fs,{value:ws});Object.defineProperty(this,Ps,{value:Ds});Object.defineProperty(this,bs,{writable:true,value:void 0});Object.defineProperty(this,ds,{writable:true,value:void 0});Object.defineProperty(this,us,{writable:true,value:void 0});Object.defineProperty(this,vs,{writable:true,value:void 0});Object.defineProperty(this,ps,{writable:true,value:null});Object.defineProperty(this,hs,{writable:true,value:false});Object.defineProperty(this,Ls,{writable:true,value:null});this.setEventNamespace("BX.Booking.CrmForm.BookingSettingsPopup");babelHelpers.classPrivateFieldLooseBase(this,bs)[bs]=e;babelHelpers.classPrivateFieldLooseBase(this,vs)[vs]=s;babelHelpers.classPrivateFieldLooseBase(this,us)[us]=new g(e.sourceOptions.settingsData||{},s,t);babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps](babelHelpers.classPrivateFieldLooseBase(this,us)[us].form)}async show(){await babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs](babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]());const e=babelHelpers.classPrivateFieldLooseBase(this,fs)[fs]();o.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,ys)[ys](),e);BX.UI.Hint.init(e);babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs]();o.Dom.style(e,"display","block")}close(){const e=babelHelpers.classPrivateFieldLooseBase(this,fs)[fs]();this.emit("onClose");o.Dom.style(e,"display","none");o.Dom.clean(e)}getSettings(){babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms]();return babelHelpers.classPrivateFieldLooseBase(this,bs)[bs].sourceOptions.settingsData}}function Ds(e){const s=e=>{babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms](e)};babelHelpers.classPrivateFieldLooseBase(this,ds)[ds]={};babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].label=new ls(e.label||"",(e=>s({label:e})));babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].placeholder=new is(e.textHeader||"",(e=>s({textHeader:e})));babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].hint=new ts(e.hint||"",(e=>s({hint:e})));babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].isVisibleHint=new as(Boolean(e==null?void 0:e.isVisibleHint),(e=>s({isVisibleHint:e})));babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].hasSlotsAllAvailableResources=new Ze(Boolean(e==null?void 0:e.hasSlotsAllAvailableResources),(e=>s({hasSlotsAllAvailableResources:e})),babelHelpers.classPrivateFieldLooseBase(this,vs)[vs])}async function ws(e){if(e.length===0){return}babelHelpers.classPrivateFieldLooseBase(this,gs)[gs](true);await d.ensure(babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]());babelHelpers.classPrivateFieldLooseBase(this,_s)[_s](babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs](e));babelHelpers.classPrivateFieldLooseBase(this,gs)[gs](false)}function js(e){const t=babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]();babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]=e;if(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]){var a,l;(l=(a=babelHelpers.classPrivateFieldLooseBase(this,ps))[ps])!=null?l:a[ps]=new s.Loader({size:40});o.Dom.style(t,"opacity",.8);void babelHelpers.classPrivateFieldLooseBase(this,ps)[ps].show(t)}else{o.Dom.style(t,"opacity",1);void babelHelpers.classPrivateFieldLooseBase(this,ps)[ps].hide()}}function Gs(e){const s=d.getAll();const t=new Set(s.map((e=>e.id)));return e.filter((e=>t.has(e)))}function Us(){return document.querySelector(`.landing-ui-component-list-item[data-id="${babelHelpers.classPrivateFieldLooseBase(this,bs)[bs].id}"] .landing-ui-component-list-item-header`)}function ks(){return document.querySelector(`.landing-ui-component-list-item[data-id="${babelHelpers.classPrivateFieldLooseBase(this,bs)[bs].id}"] .landing-ui-component-list-item-body`)}function xs(){return o.Tag.render(rs||(rs=os`
			<div class="landing-ui-form landing-ui-form-form-settings booking-crm-forms-settings">
				<div class="landing-ui-form-description"></div>
				${0}
				${0}
				${0}
				${0}
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,ms)[ms](),babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts](),babelHelpers.classPrivateFieldLooseBase(this,Is)[Is](),babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs](),babelHelpers.classPrivateFieldLooseBase(this,As)[As](),babelHelpers.classPrivateFieldLooseBase(this,Ns)[Ns]())}function Vs(){babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls]=o.Tag.render(ns||(ns=os`
			<button
				id="booking--crm-forms--resource-manager-button"
				type="button"
				class="btn btn-primary g-btn-size-l"
				onclick="${0}"
			>
				${0}
			</button>
		`),babelHelpers.classPrivateFieldLooseBase(this,Os)[Os].bind(this),babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]().length>0?o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCES_FIELD_CHANGE_BUTTON"):o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCES_FIELD_ADD_BUTTON"));return o.Tag.render(cs||(cs=os`
			<div class="landing-ui-field d-flex">
				<div class="flex-grow-1">
					<div class="g-line-height-1_7 g-font-size-18 g-font-weight-500 g-color-gray-dark-v2">
						${0}
					</div>
					<div class="crm-form--booking-resources-count"></div>
				</div>
				<div style="align-self: flex-end">
					${0}
				</div>
			</div>
		`),o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCES_FIELD_LABEL"),babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls])}function $s(){const e=new Oe({target:babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls],selectedIds:babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss](),onUpdateResourceIds:e=>{babelHelpers.classPrivateFieldLooseBase(this,_s)[_s](e);babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms]();babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs]();babelHelpers.classPrivateFieldLooseBase(this,Es)[Es]()}});e.show()}function Xs(){return babelHelpers.classPrivateFieldLooseBase(this,us)[us].form.resourceIds}function qs(e){babelHelpers.classPrivateFieldLooseBase(this,us)[us].setSettingsData({resourceIds:o.Type.isArray(e)?e:[]});babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms]()}function zs(){const e=babelHelpers.classPrivateFieldLooseBase(this,fs)[fs]().querySelector(".crm-form--booking-resources-count");if(o.Type.isDomNode(e)){e.innerText=babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]().length>0?o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCES_FIELD_TEXT",{"#COUNT#":babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]().length}):o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCES_FIELD_EMPTY")}}function Ws(){if(o.Type.isDomNode(babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls])){babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].innerText=babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]().length>0?o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCES_FIELD_CHANGE_BUTTON"):o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCES_FIELD_ADD_BUTTON")}}function Ys(){return babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].label.getLayout()}function Js(){return babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].placeholder.getLayout()}function Qs(){if(babelHelpers.classPrivateFieldLooseBase(this,vs)[vs]&&!babelHelpers.classPrivateFieldLooseBase(this,us)[us].form.hint){babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].hint.setValue(o.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_HINT_DEFAULT_VALUE"))}return babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].hint.getLayout()}function Zs(){return babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].isVisibleHint.getLayout()}function et(){return babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].hasSlotsAllAvailableResources.getLayout()}function st(e=null){babelHelpers.classPrivateFieldLooseBase(this,us)[us].setSettingsData(e);babelHelpers.classPrivateFieldLooseBase(this,bs)[bs].sourceOptions.settingsData={...babelHelpers.classPrivateFieldLooseBase(this,bs)[bs].sourceOptions.settingsData,isAutoSelectionOn:babelHelpers.classPrivateFieldLooseBase(this,vs)[vs],...babelHelpers.classPrivateFieldLooseBase(this,us)[us].settingsData};this.emit("onChange");babelHelpers.classPrivateFieldLooseBase(this,bs)[bs].form.emit("onChange")}var tt=babelHelpers.classPrivateFieldLooseKey("isAutoSelectionOn");var at=babelHelpers.classPrivateFieldLooseKey("options");class lt{constructor(e,s={}){var t;Object.defineProperty(this,tt,{writable:true,value:void 0});Object.defineProperty(this,at,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,at)[at]=e;babelHelpers.classPrivateFieldLooseBase(this,tt)[tt]=Boolean(s==null?void 0:(t=s.bookingResourceAutoSelection)==null?void 0:t.use);this.settingsPopup=new Ks({listItemOptions:e,isAutoSelectionOn:babelHelpers.classPrivateFieldLooseBase(this,tt)[tt],templateId:s==null?void 0:s.templateId})}getSettings(){return this.settingsPopup.getSettings()}showSettingsPopup(){const e=o.Extension.getSettings("booking.crm-forms.settings").isToolDisabled;if(e){o.Runtime.loadExtension("ui.info-helper").then((({InfoHelper:e})=>{e.show("limit_v2_booking_off")})).catch((e=>{console.error(e)}));return}const s=document.querySelector(`.landing-ui-component-list-item[data-id="${babelHelpers.classPrivateFieldLooseBase(this,at)[at].id}"] .landing-ui-component-list-item-body`);if(o.Dom.style(s,"display")==="block"){this.settingsPopup.close()}else{this.settingsPopup.show()}}}e.Settings=lt})(this.BX.Booking.CrmForms=this.BX.Booking.CrmForms||{},BX,BX.Booking.Provider.Service,BX.Event,BX.Booking.Const,BX.UI.EntitySelector,BX);
//# sourceMappingURL=settings.bundle.map.js