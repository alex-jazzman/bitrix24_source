this.BX=this.BX||{};this.BX.Booking=this.BX.Booking||{};(function(e,s,t,a,l,i){"use strict";const o={resourceIds:[],label:i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_FIELD_LABEL_DEFAULT"),isVisibleHint:true,hint:i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_HINT_DEFAULT_VALUE"),hasSlotsAllAvailableResources:false};const r={...o,resourceIds:[],textHeader:i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_FIELD_PLACEHOLDER_DEFAULT_VALUE")};const n={...o,resourceIds:[],hasSlotsAllAvailableResources:false,textHeader:i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_FIELD_PLACEHOLDER_AUTO_SELECT_DEFAULT_VALUE")};var c=babelHelpers.classPrivateFieldLooseKey("isAutoSelectionOn");var b=babelHelpers.classPrivateFieldLooseKey("settingsData");var d=babelHelpers.classPrivateFieldLooseKey("getAutoSelectionFormByTemplate");var u=babelHelpers.classPrivateFieldLooseKey("getDefaultFormByTemplate");class v{constructor(e,s,t){Object.defineProperty(this,u,{value:h});Object.defineProperty(this,d,{value:p});Object.defineProperty(this,c,{writable:true,value:void 0});Object.defineProperty(this,b,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,c)[c]=s;const l=e[a.CrmFormSettingsDataPropName.autoSelection]||babelHelpers.classPrivateFieldLooseBase(this,d)[d](t);const i=e[a.CrmFormSettingsDataPropName.default]||babelHelpers.classPrivateFieldLooseBase(this,u)[u](t);babelHelpers.classPrivateFieldLooseBase(this,b)[b]={[a.CrmFormSettingsDataPropName.isAutoSelectionOn]:s,[a.CrmFormSettingsDataPropName.autoSelection]:l,[a.CrmFormSettingsDataPropName.default]:i}}get dataSettingsProperty(){return babelHelpers.classPrivateFieldLooseBase(this,c)[c]?a.CrmFormSettingsDataPropName.autoSelection:a.CrmFormSettingsDataPropName.default}setSettingsData(e={}){Object.assign(babelHelpers.classPrivateFieldLooseBase(this,b)[b][this.dataSettingsProperty],e)}get settingsData(){return babelHelpers.classPrivateFieldLooseBase(this,b)[b]}get form(){return babelHelpers.classPrivateFieldLooseBase(this,b)[b][this.dataSettingsProperty]}}function p(){return n}function h(e){if(e===a.CrmFormTemplateId.BookingAnyResource){return{...r,hasSlotsAllAvailableResources:true}}return{...r}}class L extends l.BaseHeader{constructor(...e){super(...e);this.getContainer()}render(){return this.options.content}}let P=e=>e,F;var g=babelHelpers.classPrivateFieldLooseKey("resources");var H=babelHelpers.classPrivateFieldLooseKey("onClose");var B=babelHelpers.classPrivateFieldLooseKey("onSave");var f=babelHelpers.classPrivateFieldLooseKey("add");var O=babelHelpers.classPrivateFieldLooseKey("close");var m=babelHelpers.classPrivateFieldLooseKey("handleOnTagAdd");var S=babelHelpers.classPrivateFieldLooseKey("handleOnTagRemove");var y=babelHelpers.classPrivateFieldLooseKey("onResourceToggle");class _ extends l.BaseFooter{constructor(e,s){super(e,s);Object.defineProperty(this,y,{value:C});Object.defineProperty(this,S,{value:I});Object.defineProperty(this,m,{value:T});Object.defineProperty(this,O,{value:R});Object.defineProperty(this,f,{value:E});Object.defineProperty(this,g,{writable:true,value:[]});Object.defineProperty(this,H,{writable:true,value:null});Object.defineProperty(this,B,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,g)[g]=[];babelHelpers.classPrivateFieldLooseBase(this,H)[H]=s.onClose||null;babelHelpers.classPrivateFieldLooseBase(this,B)[B]=s.onSave||null;this.getDialog().subscribe("Item:onSelect",babelHelpers.classPrivateFieldLooseBase(this,m)[m].bind(this));this.getDialog().subscribe("Item:onDeselect",babelHelpers.classPrivateFieldLooseBase(this,S)[S].bind(this))}render(){const{footer:e,footerAddButton:s,footerCloseButton:t}=i.Tag.render(F||(F=P`
			<div ref="footer" class="crm-forms--booking--resource-selector-dialog__footer">
				<button
					ref="footerAddButton"
					class="ui-btn ui-btn ui-btn-sm ui-btn-primary ui-btn-round crm-forms--booking--resource-selector-dialog__footer-btn-width"
				>
					${0}
				</button>
				<button ref="footerCloseButton" class="ui-btn ui-btn ui-btn-sm ui-btn-light-border ui-btn-round crm-forms--booking--resource-selector-dialog__footer-btn-width">
					${0}
				</button>
			</div>
		`),i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCE_SELECTOR_DIALOG_ADD_BUTTON"),i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCE_SELECTOR_DIALOG_CANCEL_BUTTON"));this.footerAddButton=s;i.Event.bind(s,"click",babelHelpers.classPrivateFieldLooseBase(this,f)[f].bind(this));this.footerCloseButton=t;i.Event.bind(this.footerCloseButton,"click",babelHelpers.classPrivateFieldLooseBase(this,O)[O].bind(this));return e}get resourcesCount(){return babelHelpers.classPrivateFieldLooseBase(this,g)[g].length}destroyDialog(){i.Event.unbindAll(this.footerAddButton,"click");i.Event.unbindAll(this.footerCloseButton,"click");this.getDialog().destroy()}}function E(){const e=this.dialog.getSelectedItems();const s=e.map((e=>e.id));if(i.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(this,B)[B])){babelHelpers.classPrivateFieldLooseBase(this,B)[B]({resourceIds:s})}babelHelpers.classPrivateFieldLooseBase(this,O)[O]()}function R(){var e;if(i.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(this,H)[H])){babelHelpers.classPrivateFieldLooseBase(this,H)[H]()}(e=this.dialog)==null?void 0:e.hide()}function T(e){const{item:s}=e.getData();babelHelpers.classPrivateFieldLooseBase(this,y)[y](s,true)}function I(e){const{item:s}=e.getData();babelHelpers.classPrivateFieldLooseBase(this,y)[y](s,false)}function C(e,s=false){if(s){babelHelpers.classPrivateFieldLooseBase(this,g)[g]=[...babelHelpers.classPrivateFieldLooseBase(this,g)[g],e]}else{babelHelpers.classPrivateFieldLooseBase(this,g)[g]=babelHelpers.classPrivateFieldLooseBase(this,g)[g].filter((s=>s.id!==e.id))}}var A=babelHelpers.classPrivateFieldLooseKey("selector");var N=babelHelpers.classPrivateFieldLooseKey("targetNode");var M=babelHelpers.classPrivateFieldLooseKey("selectedIds");var K=babelHelpers.classPrivateFieldLooseKey("selectedItems");var D=babelHelpers.classPrivateFieldLooseKey("onClose");var j=babelHelpers.classPrivateFieldLooseKey("onSave");var w=babelHelpers.classPrivateFieldLooseKey("changeSelected");class G{constructor(e){Object.defineProperty(this,w,{value:U});Object.defineProperty(this,A,{writable:true,value:null});Object.defineProperty(this,N,{writable:true,value:void 0});Object.defineProperty(this,M,{writable:true,value:void 0});Object.defineProperty(this,K,{writable:true,value:[]});Object.defineProperty(this,D,{writable:true,value:null});Object.defineProperty(this,j,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,N)[N]=e.targetNode;babelHelpers.classPrivateFieldLooseBase(this,M)[M]=e.selectedIds||[];babelHelpers.classPrivateFieldLooseBase(this,K)[K]=[];babelHelpers.classPrivateFieldLooseBase(this,D)[D]=e.onClose;babelHelpers.classPrivateFieldLooseBase(this,j)[j]=e.onSave}getSelectedItems(){return babelHelpers.classPrivateFieldLooseBase(this,K)[K]}createSelector(){babelHelpers.classPrivateFieldLooseBase(this,A)[A]=new l.Dialog({id:"crm-forms--booking--booking-setting--resources-selector",preselectedItems:babelHelpers.classPrivateFieldLooseBase(this,M)[M].map((e=>[a.EntitySelectorEntity.Resource,e])),width:400,enableSearch:true,dropdownMode:true,context:"crmFormsBookingResourcesSelector",multiple:true,cacheable:true,showAvatars:false,footer:_,footerOptions:{onSave:babelHelpers.classPrivateFieldLooseBase(this,j)[j],onClose:babelHelpers.classPrivateFieldLooseBase(this,D)[D]},entities:[{id:a.EntitySelectorEntity.Resource,dynamicLoad:true,dynamicSearch:true}],searchOptions:{allowCreateItem:false},popupOptions:{overlay:{opacity:40}},events:{onHide:this.hide.bind(this),onLoad:babelHelpers.classPrivateFieldLooseBase(this,w)[w].bind(this)}});return babelHelpers.classPrivateFieldLooseBase(this,A)[A]}getSelectedIds(){return babelHelpers.classPrivateFieldLooseBase(this,K)[K].map((({id:e})=>e))}hide(){if(i.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(this,D)[D])){babelHelpers.classPrivateFieldLooseBase(this,D)[D]()}}}function U(){babelHelpers.classPrivateFieldLooseBase(this,K)[K]=babelHelpers.classPrivateFieldLooseBase(this,A)[A].getSelectedItems()}let k=e=>e,V,x,$;const X="crm-form--booking--resources-manager--header-resources-section";var q=babelHelpers.classPrivateFieldLooseKey("targetNode");var z=babelHelpers.classPrivateFieldLooseKey("selectedIds");var W=babelHelpers.classPrivateFieldLooseKey("resourcedIds");var Y=babelHelpers.classPrivateFieldLooseKey("resources");var J=babelHelpers.classPrivateFieldLooseKey("loadingResources");var Q=babelHelpers.classPrivateFieldLooseKey("options");var Z=babelHelpers.classPrivateFieldLooseKey("btnDeleteResources");var ee=babelHelpers.classPrivateFieldLooseKey("btnChangeResources");var se=babelHelpers.classPrivateFieldLooseKey("initDialog");var te=babelHelpers.classPrivateFieldLooseKey("selectItem");var ae=babelHelpers.classPrivateFieldLooseKey("deselectItem");var le=babelHelpers.classPrivateFieldLooseKey("deleteResources");var ie=babelHelpers.classPrivateFieldLooseKey("appendEmptyState");var oe=babelHelpers.classPrivateFieldLooseKey("removeEmptyState");var re=babelHelpers.classPrivateFieldLooseKey("updateResourcesCount");var ne=babelHelpers.classPrivateFieldLooseKey("fetchResources");var ce=babelHelpers.classPrivateFieldLooseKey("addSelectedItems");var be=babelHelpers.classPrivateFieldLooseKey("setLoadingResources");var de=babelHelpers.classPrivateFieldLooseKey("setResourceIds");var ue=babelHelpers.classPrivateFieldLooseKey("openResourceSelector");var ve=babelHelpers.classPrivateFieldLooseKey("saveResourceSelector");var pe=babelHelpers.classPrivateFieldLooseKey("closeResourceSelector");var he=babelHelpers.classPrivateFieldLooseKey("getHeaderContent");var Le=babelHelpers.classPrivateFieldLooseKey("appendSubHeaderContent");var Pe=babelHelpers.classPrivateFieldLooseKey("showDeleteButton");var Fe=babelHelpers.classPrivateFieldLooseKey("hideDeleteButton");var ge=babelHelpers.classPrivateFieldLooseKey("removeSubHeadContent");class He{constructor(e){Object.defineProperty(this,ge,{value:we});Object.defineProperty(this,Fe,{value:je});Object.defineProperty(this,Pe,{value:De});Object.defineProperty(this,Le,{value:Ke});Object.defineProperty(this,he,{value:Me});Object.defineProperty(this,pe,{value:Ne});Object.defineProperty(this,ve,{value:Ae});Object.defineProperty(this,ue,{value:Ce});Object.defineProperty(this,de,{value:Ie});Object.defineProperty(this,be,{value:Te});Object.defineProperty(this,ce,{value:Re});Object.defineProperty(this,ne,{value:Ee});Object.defineProperty(this,re,{value:_e});Object.defineProperty(this,oe,{value:ye});Object.defineProperty(this,ie,{value:Se});Object.defineProperty(this,le,{value:me});Object.defineProperty(this,ae,{value:Oe});Object.defineProperty(this,te,{value:fe});Object.defineProperty(this,se,{value:Be});this.dialog=null;Object.defineProperty(this,q,{writable:true,value:void 0});Object.defineProperty(this,z,{writable:true,value:void 0});Object.defineProperty(this,W,{writable:true,value:void 0});Object.defineProperty(this,Y,{writable:true,value:void 0});Object.defineProperty(this,J,{writable:true,value:false});Object.defineProperty(this,Q,{writable:true,value:void 0});Object.defineProperty(this,Z,{writable:true,value:void 0});Object.defineProperty(this,ee,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,W)[W]=e.selectedIds||[];babelHelpers.classPrivateFieldLooseBase(this,z)[z]=[];babelHelpers.classPrivateFieldLooseBase(this,q)[q]=e.target;babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]=[];babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]=e}show(){if(!this.dialog){babelHelpers.classPrivateFieldLooseBase(this,se)[se]()}void babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]();this.dialog.show();i.Event.bind(document,"scroll",this.adjustPosition,true)}close(){if(this.dialog){babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].onUpdateResourceIds(babelHelpers.classPrivateFieldLooseBase(this,W)[W]);if(i.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].onClose)){babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].onClose(babelHelpers.classPrivateFieldLooseBase(this,W)[W])}this.dialog.destroy();i.Event.unbind(document,"scroll",this.adjustPosition,true)}}adjustPosition(){if(this.dialog){this.dialog.adjustPosition()}}get selectedResources(){if(babelHelpers.classPrivateFieldLooseBase(this,W)[W].length===0||babelHelpers.classPrivateFieldLooseBase(this,Y)[Y].length===0){return[]}return babelHelpers.classPrivateFieldLooseBase(this,Y)[Y].filter((e=>babelHelpers.classPrivateFieldLooseBase(this,W)[W].includes(e.id)))}}function Be(){this.dialog=new l.Dialog({targetNode:babelHelpers.classPrivateFieldLooseBase(this,q)[q],id:"booking-crm-form-resource-selector",height:Math.max(window.innerHeight-300,500),width:356,offsetLeft:babelHelpers.classPrivateFieldLooseBase(this,q)[q].offsetWidth+5,offsetTop:-300,addTagOnSelect:false,showAvatars:false,focusOnFirst:false,dropdownMode:true,enableSearch:true,searchOptions:{allowCreateItem:false},header:L,headerOptions:{content:babelHelpers.classPrivateFieldLooseBase(this,he)[he]()},popupOptions:{className:"crm-form--booking--resource-manager-popup",angle:{position:"left"}},tagSelectorOptions:{textBoxWidth:"90%",placeholder:i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCE_MANAGER_SEARCH_PLACEHOLDER")},events:{onHide:()=>{var e,s;return(e=(s=babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]).onClose)==null?void 0:e.call(s,babelHelpers.classPrivateFieldLooseBase(this,W)[W])},"Item:onSelect":e=>{babelHelpers.classPrivateFieldLooseBase(this,te)[te](e.getData().item)},"Item:onDeselect":e=>{babelHelpers.classPrivateFieldLooseBase(this,ae)[ae](e.getData().item)}}});if(babelHelpers.classPrivateFieldLooseBase(this,W)[W].length>0){babelHelpers.classPrivateFieldLooseBase(this,Le)[Le]()}this.dialog.removeItems()}function fe(e){babelHelpers.classPrivateFieldLooseBase(this,z)[z].push(e.id);if(babelHelpers.classPrivateFieldLooseBase(this,z)[z].length>0){babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe]()}}function Oe(e){babelHelpers.classPrivateFieldLooseBase(this,z)[z]=babelHelpers.classPrivateFieldLooseBase(this,z)[z].filter((s=>s!==e.id));if(babelHelpers.classPrivateFieldLooseBase(this,z)[z].length===0){babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe]()}}function me(){if(babelHelpers.classPrivateFieldLooseBase(this,z)[z].length===0){return}babelHelpers.classPrivateFieldLooseBase(this,de)[de](babelHelpers.classPrivateFieldLooseBase(this,W)[W].filter((e=>!babelHelpers.classPrivateFieldLooseBase(this,z)[z].includes(e))));babelHelpers.classPrivateFieldLooseBase(this,z)[z]=[];babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe]()}function Se(){const e=this.dialog.getPopup().getContentContainer();if(i.Type.isDomNode(e.querySelector(".crm-forms--booking--resources-manager-empty-state"))){return}const s=i.Tag.render(V||(V=k`
			<div class="crm-forms--booking--resources-manager-empty-state d-flex h-100 w-100 justify-content-center">
				<div class="d-flex flex-column align-items-center p-4">
					<div class="mb-3 crm-forms--booking--resources-manager-empty-state_icon"></div>
					<div class="mb-3 crm-forms--booking--resources-manager-empty-state_title fw-medium fs-6 lh-base">
						${0}
					</div>
					<div class="mb-3 crm-forms--booking--resources-manager-empty-state_text fw-normal">
						${0}
					</div>
					<div>
						<button
							class="btn btn-primary g-btn-size-l crm-forms--booking--resources-manager__empty-state-btn-add"
							type="button"
							onclick="${0}"
						>
							${0}
						</button>
					</div>
				</div>
			</div>
		`),i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCE_MANAGER_EMPTY_TITLE"),i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCE_MANAGER_EMPTY_MESSAGE"),babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].bind(this),i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCE_MANAGER_ADD_RESOURCES_BUTTON"));i.Dom.insertBefore(s,e.querySelector(".ui-selector-items"))}function ye(){const e=this.dialog.getPopup().getContentContainer().querySelector(".crm-forms--booking--resources-manager-empty-state");Ge(e)}function _e(e){const s=this.dialog.getPopup().getContentContainer().querySelector(".crm-form--booking--resources-manager--header-resources-count");if(i.Type.isDomNode(s)){s.innerText=e}}async function Ee(){if(babelHelpers.classPrivateFieldLooseBase(this,Y)[Y].length>0){return}babelHelpers.classPrivateFieldLooseBase(this,be)[be](true);babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]=await t.crmFormService.getResources();babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]();babelHelpers.classPrivateFieldLooseBase(this,be)[be](false);if(babelHelpers.classPrivateFieldLooseBase(this,W)[W].length===0){babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]()}}function Re(){this.dialog.removeItems();for(const e of babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]){if(!babelHelpers.classPrivateFieldLooseBase(this,W)[W].includes(e.id)){continue}this.dialog.addItem({id:e.id,entityId:a.EntitySelectorEntity.Resource,title:e.name,subtitle:e.typeName,tabs:a.EntitySelectorTab.Recent})}}function Te(e){babelHelpers.classPrivateFieldLooseBase(this,J)[J]=e;if(babelHelpers.classPrivateFieldLooseBase(this,J)[J]){this.dialog.showLoader()}else{this.dialog.hideLoader()}}function Ie(e){babelHelpers.classPrivateFieldLooseBase(this,W)[W]=e;babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]();babelHelpers.classPrivateFieldLooseBase(this,re)[re](e.length);babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].onUpdateResourceIds(e);if(e.length>0){babelHelpers.classPrivateFieldLooseBase(this,Le)[Le]();babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]()}else{babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]();babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]()}}function Ce(e){const s=new G({targetNode:(e==null?void 0:e.target)||null,selectedIds:babelHelpers.classPrivateFieldLooseBase(this,W)[W],resources:babelHelpers.classPrivateFieldLooseBase(this,Y)[Y],onSave:babelHelpers.classPrivateFieldLooseBase(this,ve)[ve].bind(this),onClose:babelHelpers.classPrivateFieldLooseBase(this,pe)[pe].bind(this)}).createSelector();this.dialog.freeze();s.show()}function Ae({resourceIds:e}){babelHelpers.classPrivateFieldLooseBase(this,de)[de](e)}function Ne(){this.dialog.unfreeze()}function Me(){return i.Tag.render(x||(x=k`
			<div class="w-100 pt-3 px-3">
				<div class="d-flex align-items-end w-100">
					<h5 class="flex-grow-1">
						${0}
					</h5>
					<div
						class="landing-ui-button-icon-remove" 
						role="button"
						tabindex="0"
						onclick="${0}"
					></div>
				</div>
			</div>
		`),i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCE_MANAGER_HEADER_TITLE"),this.close.bind(this))}function Ke(){if(this.dialog.getPopup().getPopupContainer().querySelector(`.${X}`)){return}const e=i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCE_MANAGER_HEADER_ADD_RESOURCES_BUTTON",{"#PLUS#":"+"});const s=i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCE_MANAGER_HEADER_DELETE_RESOURCES_BUTTON",{"#ICON#":"\xd7"});const t=i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCE_MANAGER_RESOURCES_COUNT",{"#COUNT#":`<span class="crm-form--booking--resources-manager--header-resources-count">${babelHelpers.classPrivateFieldLooseBase(this,W)[W].length}</span>`});const{root:a,btnDeleteResources:l,btnChangeResources:o}=i.Tag.render($||($=k`
			<div class="${0} d-flex align-items-center">
				<div class="crm-form--booking--resources-manager--header-resources flex-grow-1">
					<span class="pr-2 crm-form--booking--resources-manager--header-resources-title">
						${0}
					</span>
				</div>
				<div>
					<button
						ref="btnDeleteResources"
						class="crm-form--booking--resources-manager--header__btn --none btn btn-outline-danger g-btn-size-sm"
						type="button"
						onclick="${0}"
					>
						${0}
					</button>
					<button
						ref="btnChangeResources"
						class="crm-form--booking--resources-manager--header__btn btn btn-primary g-btn-size-sm"
						type="button"
						onclick="${0}"
					>
						${0}
					</button>
				</div>
			</div>
		`),X,t,babelHelpers.classPrivateFieldLooseBase(this,le)[le].bind(this),s,babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].bind(this),e);babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]=o;babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]=l;const r=this.dialog.getPopup().getPopupContainer().querySelector(".ui-selector-search");i.Dom.insertAfter(a,r)}function De(){if(i.Type.isDomNode(babelHelpers.classPrivateFieldLooseBase(this,Z)[Z])&&i.Type.isDomNode(babelHelpers.classPrivateFieldLooseBase(this,ee)[ee])){i.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,ee)[ee],"--none");i.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,Z)[Z],"--none")}}function je(){if(i.Type.isDomNode(babelHelpers.classPrivateFieldLooseBase(this,Z)[Z])&&i.Type.isDomNode(babelHelpers.classPrivateFieldLooseBase(this,ee)[ee])){i.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,ee)[ee],"--none");i.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,Z)[Z],"--none")}}function we(){const e=document.querySelector(`.${X}`);Ge(e)}function Ge(e){if(i.Type.isDomNode(e)){i.Dom.remove(e)}}var Ue=babelHelpers.classPrivateFieldLooseKey("field");class ke{constructor(e){Object.defineProperty(this,Ue,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue]=e}getValue(){return babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue].getValue()}setValue(e){babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue].setValue(e)}getField(){return babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue]}getLayout(){return babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue].layout}}const Ve="data-hint";const xe="data-hint-no-icon";var $e=babelHelpers.classPrivateFieldLooseKey("disabled");var Xe=babelHelpers.classPrivateFieldLooseKey("addItem");var qe=babelHelpers.classPrivateFieldLooseKey("updateLayoutDataAttrs");class ze extends ke{constructor(e,s,t=false){super(new BX.Landing.UI.Field.Checkbox({selector:"hasSlotsAllAvailableResources",compact:true,multiple:false,items:[]}));Object.defineProperty(this,qe,{value:Ye});Object.defineProperty(this,Xe,{value:We});Object.defineProperty(this,$e,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe](t);babelHelpers.classPrivateFieldLooseBase(this,$e)[$e]=t;if(i.Type.isFunction(s)){this.getField().subscribe("onChange",(()=>{s(Boolean(this.getField().getValue()))}))}this.setValue(e)}setValue(e){super.setValue(e?["hasSlotsAllAvailableResources"]:false)}getLayout(){return babelHelpers.classPrivateFieldLooseBase(this,qe)[qe](super.getLayout())}}function We(e=false){const s=i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_SHOW_SLOTS_ALL_AVAILABLE_RESOURCES_HELP_HINT",{"#NBSP# ":"&nbsp;"});this.getField().addItem({name:i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_SHOW_SLOTS_ALL_AVAILABLE_RESOURCES"),html:`\n\t\t\t\t${i.Text.encode(i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_SHOW_SLOTS_ALL_AVAILABLE_RESOURCES"))}\n\t\t\t\t<span\n\t\t\t\t\tclass="landing-ui-form-help booking--crm-forms-settins--show-slots-all-available-resources-help-hint"\n\t\t\t\t\ttitle=""\n\t\t\t\t\t${Ve}="${s}"\n\t\t\t\t\tonclick="return false;"\n\t\t\t\t>\n\t\t\t\t\t<div></div>\n\t\t\t\t</span>\n\t\t\t`,value:"hasSlotsAllAvailableResources",disabled:e})}function Ye(e){if(babelHelpers.classPrivateFieldLooseBase(this,$e)[$e]){e.setAttribute(Ve,i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_SHOW_SLOTS_ALL_AVAILABLE_RESOURCES_DISABLED_HINT"));e.setAttribute(xe,true)}else{e.removeAttribute(Ve);e.removeAttribute(xe)}return e}class Je extends ke{constructor(e,s){super(new BX.Landing.UI.Field.Text({title:i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_HINT_LABEL"),textOnly:true,content:e}));if(i.Type.isFunction(s)){this.getField().subscribe("onChange",(()=>s(this.getValue()||"")))}this.setValue(e)}setValue(e){super.setValue(e)}}class Qe extends ke{constructor(e,s){super(new BX.Landing.UI.Field.Checkbox({selector:"isVisibleHint",compact:true,multiple:false,items:[{name:i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_IS_VISIBLE_HINT_LABEL"),value:"isVisibleHint"}]}));if(i.Type.isFunction(s)){this.getField().subscribe("onChange",(()=>s(Boolean(this.getValue()))))}this.setValue(e)}setValue(e){super.setValue(e?["isVisibleHint"]:false)}}class Ze extends ke{constructor(e,s){super(new BX.Landing.UI.Field.Text({title:i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_FIELD_LABEL"),textOnly:true,content:e}));if(i.Type.isFunction(s)){this.getField().subscribe("onChange",(()=>s(this.getValue()||"")))}this.setValue(e)}setValue(e){super.setValue(e)}}class es extends ke{constructor(e,s){super(new BX.Landing.UI.Field.Text({title:i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_FIELD_PLACEHOLDER"),textOnly:true,content:e}));if(i.Type.isFunction(s)){this.getField().subscribe("onChange",(()=>s(this.getValue()||"")))}this.setValue(e)}setValue(e){super.setValue(e)}}let ss=e=>e,ts,as,ls;var is=babelHelpers.classPrivateFieldLooseKey("options");var os=babelHelpers.classPrivateFieldLooseKey("layout");var rs=babelHelpers.classPrivateFieldLooseKey("bookingSettingsDataModel");var ns=babelHelpers.classPrivateFieldLooseKey("isAutoSelectionOn");var cs=babelHelpers.classPrivateFieldLooseKey("resourcesManagerButton");var bs=babelHelpers.classPrivateFieldLooseKey("initFields");var ds=babelHelpers.classPrivateFieldLooseKey("getContainer");var us=babelHelpers.classPrivateFieldLooseKey("renderContent");var vs=babelHelpers.classPrivateFieldLooseKey("renderResource");var ps=babelHelpers.classPrivateFieldLooseKey("showResourcesManager");var hs=babelHelpers.classPrivateFieldLooseKey("setResourceIds");var Ls=babelHelpers.classPrivateFieldLooseKey("updateResourcesCounter");var Ps=babelHelpers.classPrivateFieldLooseKey("updateResouceManagerButton");var Fs=babelHelpers.classPrivateFieldLooseKey("renderLabelField");var gs=babelHelpers.classPrivateFieldLooseKey("renderPlaceholderField");var Hs=babelHelpers.classPrivateFieldLooseKey("renderHintField");var Bs=babelHelpers.classPrivateFieldLooseKey("renderIsVisibleHint");var fs=babelHelpers.classPrivateFieldLooseKey("renderHasSlotsAllAvailableResources");var Os=babelHelpers.classPrivateFieldLooseKey("updateSettings");class ms extends s.EventEmitter{constructor({listItemOptions:e,isAutoSelectionOn:s,templateId:t}){super();Object.defineProperty(this,Os,{value:js});Object.defineProperty(this,fs,{value:Ds});Object.defineProperty(this,Bs,{value:Ks});Object.defineProperty(this,Hs,{value:Ms});Object.defineProperty(this,gs,{value:Ns});Object.defineProperty(this,Fs,{value:As});Object.defineProperty(this,Ps,{value:Cs});Object.defineProperty(this,Ls,{value:Is});Object.defineProperty(this,hs,{value:Ts});Object.defineProperty(this,ps,{value:Rs});Object.defineProperty(this,vs,{value:Es});Object.defineProperty(this,us,{value:_s});Object.defineProperty(this,ds,{value:ys});Object.defineProperty(this,bs,{value:Ss});Object.defineProperty(this,is,{writable:true,value:void 0});Object.defineProperty(this,os,{writable:true,value:void 0});Object.defineProperty(this,rs,{writable:true,value:void 0});Object.defineProperty(this,ns,{writable:true,value:void 0});Object.defineProperty(this,cs,{writable:true,value:null});this.setEventNamespace("BX.Booking.CrmForm.BookingSettingsPopup");babelHelpers.classPrivateFieldLooseBase(this,is)[is]=e;babelHelpers.classPrivateFieldLooseBase(this,ns)[ns]=s;babelHelpers.classPrivateFieldLooseBase(this,rs)[rs]=new v(e.sourceOptions.settingsData||{},s,t);babelHelpers.classPrivateFieldLooseBase(this,bs)[bs](babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].form)}show(){const e=babelHelpers.classPrivateFieldLooseBase(this,ds)[ds]();i.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,us)[us](),e);BX.UI.Hint.init(e);babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls]();i.Dom.style(e,"display","block")}close(){const e=babelHelpers.classPrivateFieldLooseBase(this,ds)[ds]();this.emit("onClose");i.Dom.style(e,"display","none");i.Dom.clean(e)}getSettings(){babelHelpers.classPrivateFieldLooseBase(this,Os)[Os]();return babelHelpers.classPrivateFieldLooseBase(this,is)[is].sourceOptions.settingsData}}function Ss(e){const s=e=>{babelHelpers.classPrivateFieldLooseBase(this,Os)[Os](e)};babelHelpers.classPrivateFieldLooseBase(this,os)[os]={};babelHelpers.classPrivateFieldLooseBase(this,os)[os].label=new Ze(e.label||"",(e=>s({label:e})));babelHelpers.classPrivateFieldLooseBase(this,os)[os].placeholder=new es(e.textHeader||"",(e=>s({textHeader:e})));babelHelpers.classPrivateFieldLooseBase(this,os)[os].hint=new Je(e.hint||"",(e=>s({hint:e})));babelHelpers.classPrivateFieldLooseBase(this,os)[os].isVisibleHint=new Qe(Boolean(e==null?void 0:e.isVisibleHint),(e=>s({isVisibleHint:e})));babelHelpers.classPrivateFieldLooseBase(this,os)[os].hasSlotsAllAvailableResources=new ze(Boolean(e==null?void 0:e.hasSlotsAllAvailableResources),(e=>s({hasSlotsAllAvailableResources:e})),babelHelpers.classPrivateFieldLooseBase(this,ns)[ns])}function ys(){return document.querySelector(`.landing-ui-component-list-item[data-id="${babelHelpers.classPrivateFieldLooseBase(this,is)[is].id}"] .landing-ui-component-list-item-body`)}function _s(){return i.Tag.render(ts||(ts=ss`
			<div class="landing-ui-form landing-ui-form-form-settings booking-crm-forms-settings">
				<div class="landing-ui-form-description"></div>
				${0}
				${0}
				${0}
				${0}
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,vs)[vs](),babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs](),babelHelpers.classPrivateFieldLooseBase(this,gs)[gs](),babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs](),babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs](),babelHelpers.classPrivateFieldLooseBase(this,fs)[fs]())}function Es(){babelHelpers.classPrivateFieldLooseBase(this,cs)[cs]=i.Tag.render(as||(as=ss`
			<button
				id="booking--crm-forms--resource-manager-button"
				type="button"
				class="btn btn-primary g-btn-size-l"
				onclick="${0}"
			>
				${0}
			</button>
		`),babelHelpers.classPrivateFieldLooseBase(this,ps)[ps].bind(this),babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].form.resourceIds.length>0?i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCES_FIELD_CHANGE_BUTTON"):i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCES_FIELD_ADD_BUTTON"));return i.Tag.render(ls||(ls=ss`
			<div class="landing-ui-field d-flex">
				<div class="flex-grow-1">
					<div class="g-line-height-1_7 g-font-size-18 g-font-weight-500 g-color-gray-dark-v2">
						${0}
					</div>
					<div class="crm-form--booking-resources-count"></div>
				</div>
				<div style="align-self: flex-end">
					${0}
				</div>
			</div>
		`),i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCES_FIELD_LABEL"),babelHelpers.classPrivateFieldLooseBase(this,cs)[cs])}function Rs(){const e=new He({target:babelHelpers.classPrivateFieldLooseBase(this,cs)[cs],selectedIds:babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].form.resourceIds,onUpdateResourceIds:e=>{babelHelpers.classPrivateFieldLooseBase(this,hs)[hs](e);babelHelpers.classPrivateFieldLooseBase(this,Os)[Os]();babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls]();babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]()}});e.show()}function Ts(e){babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].setSettingsData({resourceIds:i.Type.isArray(e)?e:[]});babelHelpers.classPrivateFieldLooseBase(this,Os)[Os]()}function Is(){const e=babelHelpers.classPrivateFieldLooseBase(this,ds)[ds]().querySelector(".crm-form--booking-resources-count");if(i.Type.isDomNode(e)){e.innerText=babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].form.resourceIds.length>0?i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCES_FIELD_TEXT",{"#COUNT#":babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].form.resourceIds.length}):i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCES_FIELD_EMPTY")}}function Cs(){if(i.Type.isDomNode(babelHelpers.classPrivateFieldLooseBase(this,cs)[cs])){babelHelpers.classPrivateFieldLooseBase(this,cs)[cs].innerText=babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].form.resourceIds.length>0?i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCES_FIELD_CHANGE_BUTTON"):i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_RESOURCES_FIELD_ADD_BUTTON")}}function As(){return babelHelpers.classPrivateFieldLooseBase(this,os)[os].label.getLayout()}function Ns(){return babelHelpers.classPrivateFieldLooseBase(this,os)[os].placeholder.getLayout()}function Ms(){if(babelHelpers.classPrivateFieldLooseBase(this,ns)[ns]&&!babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].form.hint){babelHelpers.classPrivateFieldLooseBase(this,os)[os].hint.setValue(i.Loc.getMessage("BOOKING_CRM_FORMS_SETTINGS_HINT_DEFAULT_VALUE"))}return babelHelpers.classPrivateFieldLooseBase(this,os)[os].hint.getLayout()}function Ks(){return babelHelpers.classPrivateFieldLooseBase(this,os)[os].isVisibleHint.getLayout()}function Ds(){return babelHelpers.classPrivateFieldLooseBase(this,os)[os].hasSlotsAllAvailableResources.getLayout()}function js(e=null){babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].setSettingsData(e);babelHelpers.classPrivateFieldLooseBase(this,is)[is].sourceOptions.settingsData={...babelHelpers.classPrivateFieldLooseBase(this,is)[is].sourceOptions.settingsData,isAutoSelectionOn:babelHelpers.classPrivateFieldLooseBase(this,ns)[ns],...babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].settingsData};this.emit("onChange");babelHelpers.classPrivateFieldLooseBase(this,is)[is].form.emit("onChange")}var ws=babelHelpers.classPrivateFieldLooseKey("isAutoSelectionOn");var Gs=babelHelpers.classPrivateFieldLooseKey("options");class Us{constructor(e,s={}){var t;Object.defineProperty(this,ws,{writable:true,value:void 0});Object.defineProperty(this,Gs,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Gs)[Gs]=e;babelHelpers.classPrivateFieldLooseBase(this,ws)[ws]=Boolean(s==null?void 0:(t=s.bookingResourceAutoSelection)==null?void 0:t.use);this.settingsPopup=new ms({listItemOptions:e,isAutoSelectionOn:babelHelpers.classPrivateFieldLooseBase(this,ws)[ws],templateId:s==null?void 0:s.templateId})}getSettings(){return this.settingsPopup.getSettings()}showSettingsPopup(){const e=document.querySelector(`.landing-ui-component-list-item[data-id="${babelHelpers.classPrivateFieldLooseBase(this,Gs)[Gs].id}"] .landing-ui-component-list-item-body`);if(i.Dom.style(e,"display")==="block"){this.settingsPopup.close()}else{this.settingsPopup.show()}}}e.Settings=Us})(this.BX.Booking.CrmForms=this.BX.Booking.CrmForms||{},BX.Event,BX.Booking.Provider.Service,BX.Booking.Const,BX.UI.EntitySelector,BX);
//# sourceMappingURL=settings.bundle.map.js