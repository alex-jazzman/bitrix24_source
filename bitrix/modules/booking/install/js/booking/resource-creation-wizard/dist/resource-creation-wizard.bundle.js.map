{"version":3,"file":"resource-creation-wizard.bundle.js","sources":["../src/components/layout/ui-loader.js","../src/components/layout/layout.js","../src/components/header/header.js","../src/components/footer/next-button.js","../src/components/footer/back-button.js","../src/presenter/step.js","../src/presenter/choose-resource-step.js","../src/presenter/resource-notification-step.js","../src/presenter/resource-settings-step.js","../src/components/footer/footer.js","../src/components/resource-category-card/resource-type/resource-type.js","../src/components/resource-category-card/resource-category-card.js","../src/components/resource-settings-card/error-message/error-message.js","../src/components/resource-settings-card/base-fields/base-fields.js","../src/components/resource-settings-card/title-layout/title-layout.js","../src/components/resource-settings-card/schedule-types/components/schedule-item.js","../src/components/resource-settings-card/schedule-types/schedule-types.js","../src/components/resource-settings-card/text-layout/text-layout.js","../src/components/resource-settings-card/work-time/work-time-mixin.js","../src/components/resource-settings-card/work-time/week-days-popup.js","../src/components/resource-settings-card/work-time/work-time-slot-range.js","../src/components/resource-settings-card/work-time/work-time-selector.js","../src/components/resource-settings-card/work-time/work-time.js","../src/components/resource-settings-card/slot-length/slot-length-precision-selection.js","../src/components/resource-settings-card/slot-length/slot-length-selector.js","../src/components/resource-settings-card/slot-length/slot-length.js","../src/components/resource-settings-card/resource-settings-card.js","../src/components/resource-notification-card/label/label.js","../src/components/resource-notification-card/channel-menu/channel-menu.js","../src/components/resource-notification-card/choose-template-popup/choose-template-popup.js","../src/components/resource-notification-card/template-empty/template-empty.js","../src/components/resource-notification-card/layout/resource-notification-checkbox-row.js","../src/components/resource-notification-card/layout/components/checked-for-all.js","../src/components/resource-notification-card/layout/resource-notification-text-row.js","../src/components/resource-notification-card/layout/components/description.js","../src/components/resource-notification-card/layout/components/message-tempalte.js","../src/components/resource-notification-card/layout/components/manager-notification.js","../src/components/resource-notification-card/layout/resource-notification.js","../src/components/resource-notification-card/base-info/base-info.js","../src/components/resource-notification-card/confirmation/confirmation.js","../src/components/resource-notification-card/reminder/reminder.js","../src/components/resource-notification-card/feedback/feedback.js","../src/components/resource-notification-card/late/late.js","../src/components/resource-notification-card/resource-notification-card.js","../src/components/app.js","../src/resource-creation-wizard.js"],"sourcesContent":["import { Loader } from 'main.loader';\n\nexport const UiLoader = {\n\tname: 'UiLoader',\n\tprops: {\n\t\tshow: Boolean,\n\t},\n\tdata(): { loader: Loader }\n\t{\n\t\treturn {\n\t\t\tloader: new Loader(),\n\t\t};\n\t},\n\tmounted(): void\n\t{\n\t\tvoid this.loader.show(this.$refs.loader);\n\t},\n\ttemplate: `\n\t\t<div ref=\"loader\"></div>\n\t`,\n};\n","import { UiLoader } from './ui-loader';\nimport './resource-creation-wizard-layout.css';\n\nexport const ResourceCreationWizardLayout = {\n\tname: 'ResourceCreationWizardLayout',\n\tprops: {\n\t\tstep: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tloading: Boolean,\n\t},\n\twatch: {\n\t\tstep(): void\n\t\t{\n\t\t\tthis.$refs.wrapper?.scrollTo(0, 0);\n\t\t},\n\t},\n\tcomponents: {\n\t\tUiLoader,\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard-layout\">\n\t\t\t<div ref=\"wrapper\" class=\"resource-creation-wizard__wrapper\">\n\t\t\t\t<div class=\"resource-creation-wizard__header\">\n\t\t\t\t\t<slot name=\"header\">\n\t\t\t\t\t\t<h4 class=\"resource-creation-wizard__header-title\">\n\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t</h4>\n\t\t\t\t\t</slot>\n\t\t\t\t</div>\n\t\t\t\t<div v-show=\"!loading\" class=\"resource-creation-wizard__content\">\n\t\t\t\t\t<slot/>\n\t\t\t\t</div>\n\t\t\t\t<UiLoader v-if=\"loading\"/>\n\t\t\t</div>\n\t\t\t<slot name=\"footer\"/>\n\t\t</div>\n\t`,\n};\n","export const ResourceCreationWizardHeader = {\n\tname: 'ResourceCreationWizardHeader',\n\tcomputed: {\n\t\ttitle(): string\n\t\t{\n\t\t\treturn this.$store.state['resource-creation-wizard'].resourceName;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<span class=\"resource-creation-wizard__header-title\">\n\t\t\t{{ title }}\n\t\t</span>\n\t`,\n};\n","import { Button, ButtonSize, ButtonColor } from 'booking.component.button';\nimport type { IStep } from '../../presenter';\n\nexport const NextButton = {\n\tname: 'NextButton',\n\tcomponents: {\n\t\tUiButton: Button,\n\t},\n\tprops: {\n\t\tstep: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tsteps: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: Boolean,\n\t\twaiting: Boolean,\n\t},\n\tcomputed: {\n\t\tcurrentStep(): IStep\n\t\t{\n\t\t\treturn this.steps[this.step - 1];\n\t\t},\n\t\tsize(): string\n\t\t{\n\t\t\treturn ButtonSize.SMALL;\n\t\t},\n\t\tcolor(): string\n\t\t{\n\t\t\treturn ButtonColor.SUCCESS;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<UiButton\n\t\t\t:text=\"currentStep.labelNext\"\n\t\t\t:title=\"currentStep.labelNext\"\n\t\t\t:size\n\t\t\t:color\n\t\t\t:disabled\n\t\t\t:waiting\n\t\t\t@click=\"currentStep.next()\"\n\t\t/>\n\t`,\n};\n","import { Button, ButtonSize, ButtonColor } from 'booking.component.button';\nimport type { IStep } from '../../presenter';\n\nexport const BackButton = {\n\tname: 'BackButton',\n\tprops: {\n\t\tstep: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tsteps: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tbuttonSize(): string\n\t\t{\n\t\t\treturn ButtonSize.SMALL;\n\t\t},\n\t\tbuttonColor(): string\n\t\t{\n\t\t\treturn ButtonColor.LINK;\n\t\t},\n\t\tcurrentStep(): IStep\n\t\t{\n\t\t\treturn this.steps[this.step - 1];\n\t\t},\n\t},\n\tcomponents: {\n\t\tUiButton: Button,\n\t},\n\ttemplate: `\n\t\t<UiButton\n\t\t\tclass=\"resource-creation-wizard__back-button\"\n\t\t\t:text=\"currentStep.labelBack\"\n\t\t\t:title=\"currentStep.labelBack\"\n\t\t\t:size=\"buttonSize\"\n\t\t\t:color=\"buttonColor\"\n\t\t\t@click=\"currentStep.back()\"\n\t\t/>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { Core } from 'booking.core';\nimport type { IStep } from './types';\n\n/**\n * @abstract\n */\nexport class Step implements IStep\n{\n\thidden = false;\n\n\tconstructor(hidden = false)\n\t{\n\t\tthis.hidden = hidden;\n\t}\n\n\tget store(): Store\n\t{\n\t\treturn Core.getStore();\n\t}\n\n\tget labelNext(): string\n\t{\n\t\treturn Loc.getMessage('BRCW_BUTTON_CONTINUE');\n\t}\n\n\tget labelBack(): string\n\t{\n\t\treturn Loc.getMessage('BRCW_BUTTON_CANCEL');\n\t}\n\n\tasync next(): Promise<void>\n\t{\n\t\tawait this.store.dispatch('resource-creation-wizard/nextStep');\n\t}\n\n\tasync back(): Promise<void>\n\t{\n\t\tawait this.store.dispatch('resource-creation-wizard/prevStep');\n\t}\n}\n","import { Event, Loc } from 'main.core';\nimport { EventName } from 'booking.const';\nimport { Step } from './step';\n\nexport class ChooseResourceStep extends Step\n{\n\tconstructor()\n\t{\n\t\tsuper(true);\n\t}\n\n\tget labelBack(): string\n\t{\n\t\treturn Loc.getMessage('BRCW_BUTTON_CANCEL');\n\t}\n\n\tasync next(): Promise<void>\n\t{\n\t\tawait super.next();\n\t}\n\n\tback()\n\t{\n\t\tEvent.EventEmitter.emit(EventName.CloseWizard);\n\t}\n}\n","import { Event, Loc, Text, Type } from 'main.core';\nimport { Notifier, NotificationOptions } from 'ui.notification-manager';\nimport { ConditionChecker, Types as SenderTypes } from 'crm.messagesender';\n\nimport { EventName, Model, NotificationFieldsMap, Module } from 'booking.const';\nimport { resourceService } from 'booking.provider.service.resources-service';\nimport { resourceTypeService } from 'booking.provider.service.resources-type-service';\nimport { RcwAnalytics } from 'booking.lib.analytics';\nimport type { SlotRange, ResourceModel } from 'booking.model.resources';\nimport type { ResourceTypeModel } from 'booking.model.resource-types';\n\nimport { Step } from './step';\n\nexport class ResourceNotificationStep extends Step\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.step = 3;\n\t}\n\n\tget #resource(): ResourceModel\n\t{\n\t\treturn this.store.getters[`${Model.ResourceCreationWizard}/getResource`];\n\t}\n\n\tget labelNext(): string\n\t{\n\t\treturn Type.isNull(this.#resource.id ?? null)\n\t\t\t? Loc.getMessage('BRCW_BUTTON_CREATE_RESOURCE')\n\t\t\t: Loc.getMessage('BRCW_BUTTON_UPDATE_RESOURCE');\n\t}\n\n\tasync next(): Promise<void>\n\t{\n\t\tthis.store.commit(`${Model.ResourceCreationWizard}/setSaving`, true);\n\t\tRcwAnalytics.sendAddResourceFinish();\n\n\t\tconst isApproved = await this.#isBitrix24Approved();\n\t\tif (!isApproved)\n\t\t{\n\t\t\tthis.store.commit(`${Model.ResourceCreationWizard}/setSaving`, false);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.store.getters[`${Model.ResourceCreationWizard}/isGlobalSchedule`])\n\t\t{\n\t\t\tawait this.store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, {\n\t\t\t\tslotRanges: this.#prepareCompanySlotRanges(this.#resource),\n\t\t\t});\n\t\t}\n\n\t\tconst isSuccess = await this.#upsertResource(this.#resource);\n\t\tif (!isSuccess)\n\t\t{\n\t\t\tthis.store.commit(`${Model.ResourceCreationWizard}/setSaving`, false);\n\n\t\t\treturn;\n\t\t}\n\n\t\tawait resourceTypeService.update({\n\t\t\tid: this.#resource.typeId,\n\t\t\t...this.#prepareResourceTypeNotifications(this.#resource),\n\t\t});\n\n\t\tEvent.EventEmitter.emit(EventName.CloseWizard);\n\t}\n\n\t#isBitrix24Approved(): Promise<boolean>\n\t{\n\t\tif (!this.#isBitrix24SenderAvailable())\n\t\t{\n\t\t\treturn Promise.resolve(true);\n\t\t}\n\n\t\treturn ConditionChecker.checkIsApproved({\n\t\t\tsenderType: SenderTypes.bitrix24,\n\t\t});\n\t}\n\n\t#isBitrix24SenderAvailable(): boolean\n\t{\n\t\tconst bitrix24Sender = this.store.getters[`${Model.Notifications}/getSenders`]\n\t\t\t.find((sender) => sender.moduleId === Module.Crm && sender.code === SenderTypes.bitrix24)\n\t\t;\n\n\t\tif (!bitrix24Sender)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn bitrix24Sender.canUse;\n\t}\n\n\t#prepareCompanySlotRanges(resource: ResourceModel): SlotRange[]\n\t{\n\t\tconst slotSize = resource.slotRanges[0]?.slotSize ?? 60;\n\t\tconst scheduleSlots = this.store.getters[`${Model.ResourceCreationWizard}/getCompanyScheduleSlots`];\n\t\tconst timezone = this.store.getters[`${Model.Interface}/timezone`];\n\n\t\treturn scheduleSlots.map((slotRange: SlotRange) => ({\n\t\t\t...slotRange,\n\t\t\tslotSize,\n\t\t\ttimezone,\n\t\t}));\n\t}\n\n\t#prepareResourceTypeNotifications(resource: ResourceModel): Partial<ResourceTypeModel>\n\t{\n\t\tconst resourceType = this.store.getters[`${Model.ResourceTypes}/getById`](resource.typeId);\n\n\t\treturn Object.values(this.store.getters[`${Model.Dictionary}/getNotifications`])\n\t\t\t.map(({ value }) => value)\n\t\t\t.reduce((acc: Object, type: string) => {\n\t\t\t\tconst notificationOnField = NotificationFieldsMap.NotificationOn[type];\n\t\t\t\tconst templateTypeField = NotificationFieldsMap.TemplateType[type];\n\t\t\t\tconst settingsFields = NotificationFieldsMap.Settings[type];\n\n\t\t\t\tconst isCheckedForAll = this.store.getters[`${Model.ResourceCreationWizard}/isCheckedForAll`](type);\n\n\t\t\t\treturn {\n\t\t\t\t\t...acc,\n\t\t\t\t\t[notificationOnField]: isCheckedForAll ? resource[notificationOnField] : resourceType[notificationOnField],\n\t\t\t\t\t[templateTypeField]: isCheckedForAll ? resource[templateTypeField] : resourceType[templateTypeField],\n\t\t\t\t\t...settingsFields.reduce((fields, field) => ({\n\t\t\t\t\t\t...fields,\n\t\t\t\t\t\t[field]: isCheckedForAll ? resource[field] : resourceType[field],\n\t\t\t\t\t}), {}),\n\t\t\t\t};\n\t\t\t}, {})\n\t\t;\n\t}\n\n\tasync #upsertResource(resource: ResourceModel): Promise<boolean>\n\t{\n\t\tconst isUpdate = Boolean(resource.id);\n\t\tconst result = await (isUpdate ? resourceService.update(resource) : resourceService.add(resource));\n\n\t\tlet text = Loc.getMessage(isUpdate ? 'BRCW_UPDATE_SUCCESS_MESSAGE' : 'BRCW_CREATE_SUCCESS_MESSAGE');\n\t\tif (Type.isArrayFilled(result.errors))\n\t\t{\n\t\t\ttext = result.errors[0].message;\n\t\t}\n\n\t\tNotifier.notify(this.#prepareNotificationOptions(text));\n\n\t\treturn !Type.isArrayFilled(result.errors);\n\t}\n\n\t#prepareNotificationOptions(text: string): NotificationOptions\n\t{\n\t\treturn {\n\t\t\tid: Text.getRandom(),\n\t\t\ttext,\n\t\t};\n\t}\n}\n","import { Event, Loc, Type } from 'main.core';\nimport { EventName, Model } from 'booking.const';\nimport { RcwAnalytics } from 'booking.lib.analytics';\nimport { Step } from './step';\n\nexport class ResourceSettingsStep extends Step\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.step = 2;\n\t}\n\n\tget #isFirstStep(): boolean\n\t{\n\t\treturn this.store.getters[`${Model.ResourceCreationWizard}/startStep`] === this.step;\n\t}\n\n\tget labelBack(): string\n\t{\n\t\treturn this.#isFirstStep ? super.labelBack : Loc.getMessage('BRCW_BUTTON_BACK');\n\t}\n\n\tasync next(): Promise<void>\n\t{\n\t\tconst store = this.store;\n\n\t\tif (!store.state[Model.ResourceCreationWizard].resource.name)\n\t\t{\n\t\t\tif (!Type.isNull(store.state[Model.ResourceCreationWizard].resourceId))\n\t\t\t{\n\t\t\t\tawait store.dispatch(`${Model.ResourceCreationWizard}/setInvalidResourceName`, true);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, {\n\t\t\t\tname: Loc.getMessage('BRCW_DEFAULT_RESOURCE_NAME'),\n\t\t\t});\n\t\t}\n\n\t\tif (!store.state[Model.ResourceCreationWizard].resource.typeId)\n\t\t{\n\t\t\tawait store.dispatch(`${Model.ResourceCreationWizard}/setInvalidResourceType`, true);\n\n\t\t\treturn;\n\t\t}\n\n\t\tawait super.next();\n\t\tRcwAnalytics.sendAddResourceStep2();\n\t}\n\n\tasync back()\n\t{\n\t\tif (this.#isFirstStep)\n\t\t{\n\t\t\tEvent.EventEmitter.emit(EventName.CloseWizard);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tawait super.back();\n\t\t}\n\t}\n}\n","import { mapGetters } from 'ui.vue3.vuex';\nimport { Model } from 'booking.const';\nimport { NextButton } from './next-button';\nimport { BackButton } from './back-button';\nimport { ChooseResourceStep, ResourceNotificationStep, ResourceSettingsStep } from '../../presenter';\nimport './footer.css';\n\nexport const ResourceCreationWizardFooter = {\n\tname: 'ResourceCreationWizardFooter',\n\tprops: {\n\t\tstep: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: Boolean,\n\t},\n\tdata(): Object {\n\t\treturn {\n\t\t\tsteps: [\n\t\t\t\tnew ChooseResourceStep(),\n\t\t\t\tnew ResourceSettingsStep(),\n\t\t\t\tnew ResourceNotificationStep(),\n\t\t\t],\n\t\t};\n\t},\n\tcomputed: mapGetters({\n\t\tisSaving: `${Model.ResourceCreationWizard}/isSaving`,\n\t}),\n\tcomponents: {\n\t\tBackButton,\n\t\tNextButton,\n\t},\n\ttemplate: `\n\t\t<div v-if=\"!steps[step - 1].hidden\" class=\"resource-creation-wizard__footer\">\n\t\t\t<NextButton :step :steps :disabled :waiting=\"isSaving\"/>\n\t\t\t<BackButton :step :steps :disabled=\"isSaving\"/>\n\t\t</div>\n\t`,\n};\n","import { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.actions';\n\nimport './resource-type.css';\n\nexport const ResourceType = {\n\tname: 'ResourceType',\n\temits: ['selected'],\n\tprops: {\n\t\tresourceType: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tIconSet,\n\t\t};\n\t},\n\tcomponents: {\n\t\tIcon,\n\t},\n\ttemplate: `\n\t\t<div class=\"booking--rcw--resource-type-item\" @click=\"$emit('selected', resourceType)\">\n\t\t\t<div class=\"rcw__resource-type\">\n\t\t\t\t<div :class=\"['booking--rcw--resource-type__icon', 'booking--rcw--resource-type__icon--' + resourceType.code]\">\n\t\t\t\t</div>\n\t\t\t\t<div class=\"rcw__resource-type__row\">\n\t\t\t\t\t<div class=\"rcw__resource-type__label\">\n\t\t\t\t\t\t<div class=\"rcw__resource-type__label-title\">{{ resourceType.name }}</div>\n\t\t\t\t\t\t<div class=\"rcw__resource-type__label-description\">{{ resourceType.description }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Icon :name=\"IconSet.ARROW_RIGHT\"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { HelpDesk, Model } from 'booking.const';\nimport { HelpDeskLoc } from 'booking.component.help-desk-loc';\nimport { RcwAnalytics } from 'booking.lib.analytics';\nimport type { ResourceCreationType } from 'booking.model.resource-creation-wizard';\n\nimport { ResourceType } from './resource-type/resource-type';\nimport './resource-category-card.css';\n\nexport const ResourceCategoryCard = {\n\tname: 'ResourceCategoryCard',\n\tsetup(): { code: string, anchorCode: string }\n\t{\n\t\treturn {\n\t\t\tcode: HelpDesk.ResourceType.code,\n\t\t\tanchorCode: HelpDesk.ResourceType.anchorCode,\n\t\t};\n\t},\n\tcomputed: {\n\t\tresourceTypes(): ResourceCreationType[]\n\t\t{\n\t\t\treturn this.$store.state[Model.ResourceCreationWizard].advertisingResourceTypes;\n\t\t},\n\t},\n\tmethods: {\n\t\tasync selectResourceType({ relatedResourceTypeId }: ResourceCreationType): Promise<void>\n\t\t{\n\t\t\tawait this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, {\n\t\t\t\ttypeId: relatedResourceTypeId,\n\t\t\t});\n\n\t\t\tawait this.$store.dispatch(`${Model.ResourceCreationWizard}/nextStep`);\n\t\t\tRcwAnalytics.sendAddResourceStep1();\n\t\t},\n\t},\n\tcomponents: {\n\t\tHelpDeskLoc,\n\t\tResourceType,\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-category-card\">\n\t\t\t<div class=\"resource-category-card__header\">\n\t\t\t\t<div class=\"resource-category-card__header__title\">\n\t\t\t\t\t{{ loc('BRCW_CHOOSE_CATEGORY_MSGVER_1') }}\n\t\t\t\t</div>\n\t\t\t\t<HelpDeskLoc\n\t\t\t\t\t:message=\"loc('BRCW_CHOOSE_CATEGORY_DESCRIPTION_MSGVER_2')\"\n\t\t\t\t\t:code=\"code\"\n\t\t\t\t\t:anchor=\"anchorCode\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"resource-category-card__content resource-creation-wizard__form\">\n\t\t\t\t<ResourceType\n\t\t\t\t\tv-for=\"resourceType in resourceTypes\"\n\t\t\t\t\t:key=\"resourceType.code\"\n\t\t\t\t\t:resource-type\n\t\t\t\t\t:data-id=\"'brcw-resource-type-list-' + resourceType.code\"\n\t\t\t\t\t@selected=\"selectResourceType\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import './error-message.css';\n\nexport const ErrorMessage = {\n\tname: 'ErrorMessage',\n\tprops: {\n\t\tmessage: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"booking--rcw--error-message-container\">\n\t\t\t<div class=\"booking--rcw--error-message\">\n\t\t\t\t<span class=\"ui-icon-set --warning\"></span>\n\t\t\t\t<span>{{ message }}</span>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Text } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { Dialog, ItemOptions } from 'ui.entity-selector';\n\nimport { EntitySelectorEntity, Model } from 'booking.const';\nimport { ResourceTypeModel } from 'booking.model.resource-types';\nimport { resourceTypeService } from 'booking.provider.service.resources-type-service';\nimport { EmptyRichLoc } from 'booking.component.help-desk-loc';\n\nimport { ErrorMessage } from '../error-message/error-message';\nimport './base-fields.css';\n\nexport const BaseFields = {\n\tname: 'ResourceSettingsCardBaseFields',\n\temits: [\n\t\t'nameUpdate',\n\t\t'typeUpdate',\n\t],\n\tprops: {\n\t\tinitialResourceName: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tinitialResourceType: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tentityId: EntitySelectorEntity.ResourceType,\n\t\t\ttypeSelectorId: `booking-resource-creation-types${Text.getRandom()}`,\n\t\t\ttypeName: this.initialResourceType.typeName,\n\t\t};\n\t},\n\tcomputed: {\n\t\tresourceName: {\n\t\t\tget(): string\n\t\t\t{\n\t\t\t\treturn this.initialResourceName;\n\t\t\t},\n\t\t\tset(name: string | null = '')\n\t\t\t{\n\t\t\t\tthis.$emit('nameUpdate', name);\n\t\t\t},\n\t\t},\n\t\tinvalidResourceName(): boolean\n\t\t{\n\t\t\treturn this.$store.state[Model.ResourceCreationWizard].invalidResourceName;\n\t\t},\n\t\tinvalidResourceType(): boolean\n\t\t{\n\t\t\treturn this.$store.state[Model.ResourceCreationWizard].invalidResourceType;\n\t\t},\n\t\terrorMessage(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_REQUIRED_FIELD');\n\t\t},\n\t},\n\tmethods: {\n\t\tshowTypeSelector(): void\n\t\t{\n\t\t\tconst dialog = this.getTypeSelectorDialog(this.$refs.typeSelectorAngle);\n\n\t\t\tdialog.show();\n\t\t},\n\t\tgetTypeSelectorDialog(bindElement: HTMLElement): Dialog\n\t\t{\n\t\t\tconst typeSelectorDialog = Dialog.getById(this.typeSelectorId);\n\n\t\t\tif (typeSelectorDialog)\n\t\t\t{\n\t\t\t\ttypeSelectorDialog.setTargetNode(bindElement);\n\n\t\t\t\treturn typeSelectorDialog;\n\t\t\t}\n\n\t\t\treturn new Dialog({\n\t\t\t\tid: this.typeSelectorId,\n\t\t\t\ttargetNode: bindElement,\n\t\t\t\twidth: 300,\n\t\t\t\theight: 400,\n\t\t\t\tenableSearch: true,\n\t\t\t\tdropdownMode: true,\n\t\t\t\tcontext: 'bookingResourceCreationType',\n\t\t\t\tmultiple: false,\n\t\t\t\tcacheable: true,\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: this.entityId,\n\t\t\t\t\t\tdynamicLoad: true,\n\t\t\t\t\t\tdynamicSearch: true,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tpopupOptions: {\n\t\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\t},\n\t\t\t\tsearchOptions: {\n\t\t\t\t\tallowCreateItem: true,\n\t\t\t\t\tfooterOptions: {\n\t\t\t\t\t\tlabel: this.loc('BRCW_SETTINGS_CARD_TYPE_SELECTOR_CREATE_BTN'),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\t'Search:onItemCreateAsync': (baseEvent: BaseEvent) => {\n\t\t\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\t\t\tconst { searchQuery } = baseEvent.getData();\n\t\t\t\t\t\t\tconst dialog: Dialog = baseEvent.getTarget();\n\n\t\t\t\t\t\t\tthis.createType(searchQuery.getQuery())\n\t\t\t\t\t\t\t\t.then((resourceType: ResourceTypeModel) => {\n\t\t\t\t\t\t\t\t\tthis.updateResourceType(resourceType.id, resourceType.name);\n\t\t\t\t\t\t\t\t\tdialog.addItem(this.prepareTypeToDialog(resourceType));\n\t\t\t\t\t\t\t\t\tdialog.hide();\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\t'Item:onSelect': (baseEvent: BaseEvent) => {\n\t\t\t\t\t\tconst selectedItem = baseEvent.getData().item;\n\t\t\t\t\t\tthis.updateResourceType(selectedItem.getId(), selectedItem.getTitle());\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tasync createType(typeName: string): Promise<ResourceTypeModel>\n\t\t{\n\t\t\treturn resourceTypeService.add({\n\t\t\t\tmoduleId: 'booking',\n\t\t\t\tname: typeName,\n\t\t\t});\n\t\t},\n\t\tprepareTypeToDialog(type: ResourceTypeModel): ItemOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: type.id,\n\t\t\t\tentityId: this.entityId,\n\t\t\t\ttitle: type.name,\n\t\t\t\tsort: 1,\n\t\t\t\tselected: true,\n\t\t\t\ttabs: 'recents',\n\t\t\t\tsupertitle: this.loc('BRCW_SETTINGS_CARD_TYPE_SELECTOR_SUPER_TITLE'),\n\t\t\t\tavatar: '/bitrix/js/booking/images/entity-selector/resource-type.svg',\n\t\t\t};\n\t\t},\n\t\tupdateResourceType(typeId: number, typeName: string): void\n\t\t{\n\t\t\tthis.typeName = typeName;\n\n\t\t\tthis.$emit('typeUpdate', typeId);\n\t\t},\n\t\tscrollToBaseFieldsForm(): void\n\t\t{\n\t\t\tthis.$refs.baseFieldsForm?.scrollIntoView(true, {\n\t\t\t\tbehavior: 'smooth',\n\t\t\t\tblock: 'center',\n\t\t\t});\n\t\t},\n\t},\n\twatch: {\n\t\tinvalidResourceName(invalid: boolean): void\n\t\t{\n\t\t\tif (invalid)\n\t\t\t{\n\t\t\t\tthis.scrollToBaseFieldsForm();\n\t\t\t}\n\t\t},\n\t\tinvalidResourceType(invalid: boolean): void\n\t\t{\n\t\t\tif (invalid)\n\t\t\t{\n\t\t\t\tthis.scrollToBaseFieldsForm();\n\t\t\t}\n\t\t},\n\t},\n\tcomponents: {\n\t\tErrorMessage,\n\t\tEmptyRichLoc,\n\t},\n\ttemplate: `\n\t\t<div ref=\"baseFieldsForm\" class=\"ui-form resource-creation-wizard__form-settings --base\">\n\t\t\t<div class=\"ui-form-row-inline booking--rcw--form-row-align\">\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t<label class=\"ui-ctl-label-text\" for=\"brcw-settings-resource-name\">\n\t\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_NAME_LABEL') }}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-form-content booking--rcw--field-with-validation\">\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tv-model.trim=\"resourceName\"\n\t\t\t\t\t\t\t\tid=\"brcw-settings-resource-name\"\n\t\t\t\t\t\t\t\tdata-id=\"brcw-settings-resource-name-input\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t:class=\"{ '--error': invalidResourceName }\"\n\t\t\t\t\t\t\t\t:placeholder=\"loc('BRCW_SETTINGS_CARD_NAME_LABEL')\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ErrorMessage\n\t\t\t\t\t\t\tv-if=\"invalidResourceName\"\n\t\t\t\t\t\t\t:message=\"errorMessage\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-form-line\">\n\t\t\t\t\t\t<div class=\"booking--rcw--resource-name-description\">\n\t\t\t\t\t\t\t<EmptyRichLoc\n\t\t\t\t\t\t\t\t:message=\"loc('BRCW_SETTINGS_CARD_NAME_DESCRIPTION')\"\n\t\t\t\t\t\t\t\t:rules=\"['nowrap']\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_TYPE_LABEL') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-form-content booking--rcw--field-with-validation\">\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tref=\"typeSelectorAngle\"\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-angle\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tref=\"typeSelectorElement\"\n\t\t\t\t\t\t\t\tdata-id=\"brcw-settings-resource-type-selector\"\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-element resource-creation-wizard__form-settings-element\"\n\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t'--placeholder': !typeName,\n\t\t\t\t\t\t\t\t\t'--error': invalidResourceType,\n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t@click=\"showTypeSelector\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<template v-if=\"typeName\">\n\t\t\t\t\t\t\t\t\t{{ typeName }}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_TYPE_PLACEHOLDER') }}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ErrorMessage\n\t\t\t\t\t\t\tv-if=\"invalidResourceType\"\n\t\t\t\t\t\t\t:message=\"errorMessage\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BIcon as Icon } from 'ui.icon-set.api.vue';\nimport './title-layout.css';\n\nexport const TitleLayout = {\n\tname: 'ResourceSettingsCardTitleLayout',\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ticonType: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tIcon,\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard__form-settings-title-row\">\n\t\t\t<Icon\n\t\t\t\t:name=\"iconType\"\n\t\t\t\t:color=\"'var(--ui-color-primary)'\"\n\t\t\t\t:size=\"24\"\n\t\t\t/>\n\t\t\t<div class=\"resource-creation-wizard__form-settings-title\">\n\t\t\t\t{{ title }}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { HelpDesk } from 'booking.const';\nimport { HelpDeskLoc } from 'booking.component.help-desk-loc';\n\nexport const ScheduleItem = {\n\tname: 'ScheduleItem',\n\temits: ['update:model-value'],\n\tprops: {\n\t\tmodelValue: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\titemClass: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): { code: string, anchorCode: string }\n\t{\n\t\treturn {\n\t\t\tcode: HelpDesk.ResourceSchedule.code,\n\t\t\tanchorCode: HelpDesk.ResourceSchedule.anchorCode,\n\t\t};\n\t},\n\tcomputed: {\n\t\tisSelected(): boolean\n\t\t{\n\t\t\treturn this.modelValue.toString() === this.value.toString();\n\t\t},\n\t},\n\tmethods: {\n\t\tselectOption()\n\t\t{\n\t\t\tthis.$emit('update:model-value', this.value);\n\t\t},\n\t},\n\tcomponents: {\n\t\tHelpDeskLoc,\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"['booking--rcw--schedule-item', { '--selected': isSelected }]\"\n\t\t\t@click=\"selectOption\"\n\t\t>\n\t\t\t<div class=\"booking--rcw--schedule-item-radio ui-ctl-radio\">\n\t\t\t\t<input\n\t\t\t\t\t:id=\"itemClass\"\n\t\t\t\t\t:checked=\"isSelected\"\n\t\t\t\t\t:value=\"value.toString()\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t@input=\"$emit('update:model-value', $event.target.value === 'true')\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"booking--rcw--schedule-item-text\">\n\t\t\t\t<label\n\t\t\t\t\t:for=\"itemClass\"\n\t\t\t\t\tclass=\"booking--rcw--schedule-item-text-title\">\n\t\t\t\t\t{{ title }}\n\t\t\t\t</label>\n\t\t\t\t<HelpDeskLoc\n\t\t\t\t\t:message=\"description\"\n\t\t\t\t\t:code=\"code\"\n\t\t\t\t\t:anchor=\"anchorCode\"\n\t\t\t\t\t:rules=\"['nowrap']\"\n\t\t\t\t\tclass=\"booking--rcw--schedule-item-text-description\"\n\t\t\t\t\tlink-class=\"booking--rcw--more booking--rcw--schedule-item-text-description-more\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"booking--rcw--schedule-item-view\" :class=\"itemClass\"></div>\n\t\t</div>\n\t`,\n};\n\nexport type IScheduleItem = {\n\titemClass: string;\n\ttitle: string;\n\tdescription: string;\n\tvalue: boolean;\n}\n","import { Loc } from 'main.core';\nimport { Set as IconSet } from 'ui.icon-set.api.vue';\nimport { TitleLayout } from '../title-layout/title-layout';\nimport { ScheduleItem } from './components/schedule-item';\nimport type { IScheduleItem } from './components/schedule-item';\n\nimport './schedule-types.css';\n\nexport const ScheduleTypes = {\n\tname: 'ResourceSettingsCardScheduleTypes',\n\temits: ['update:model-value'],\n\tprops: {\n\t\tmodelValue: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tsetup(): { title: string, titleIconType: string, items: IScheduleItem[] }\n\t{\n\t\tconst title = Loc.getMessage('BRCW_SETTINGS_CARD_SCHEDULE_TITLE_MSGVER_1');\n\t\tconst titleIconType = IconSet.COLLABORATION;\n\t\tconst items = [\n\t\t\t{\n\t\t\t\tid: 'common',\n\t\t\t\titemClass: 'resource-creation-wizard__form-settings-schedule-view-common',\n\t\t\t\ttitle: Loc.getMessage('BRCW_SETTINGS_CARD_SCHEDULE_COLUMNS_TITLE_MSGVER_1'),\n\t\t\t\tdescription: Loc.getMessage('BRCW_SETTINGS_CARD_SCHEDULE_COLUMNS_DESCRIPTION_MSGVER_2'),\n\t\t\t\tvalue: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'extra',\n\t\t\t\titemClass: 'resource-creation-wizard__form-settings-schedule-view-extra',\n\t\t\t\ttitle: Loc.getMessage('BRCW_SETTINGS_CARD_SCHEDULE_CROSS_RESOURCING_TITLE_MSGVER_1'),\n\t\t\t\tdescription: Loc.getMessage('BRCW_SETTINGS_CARD_SCHEDULE_CROSS_RESOURCING_DESCRIPTION_MSGVER_2'),\n\t\t\t\tvalue: false,\n\t\t\t},\n\t\t];\n\n\t\treturn {\n\t\t\titems,\n\t\t\ttitle,\n\t\t\ttitleIconType,\n\t\t};\n\t},\n\tcomponents: {\n\t\tScheduleItem,\n\t\tTitleLayout,\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-settings --schedule\">\n\t\t\t<TitleLayout\n\t\t\t\t:title=\"title\"\n\t\t\t\t:iconType=\"titleIconType\"\n\t\t\t/>\n\t\t\t<div class=\"resource-creation-wizard__form-settings-schedule-view\">\n\t\t\t\t<ScheduleItem\n\t\t\t\t\tv-for=\"item in items\"\n\t\t\t\t\t:key=\"item.id\"\n\t\t\t\t\t:data-id=\"'brcw-resource-schedule-view-' + item.id\"\n\t\t\t\t\t:model-value=\"modelValue\"\n\t\t\t\t\t:item-class=\"item.itemClass\"\n\t\t\t\t\t:title=\"item.title\"\n\t\t\t\t\t:description=\"item.description\"\n\t\t\t\t\t:value=\"item.value\"\n\t\t\t\t\t@update:model-value=\"$emit('update:model-value', $event)\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { HelpDesk } from 'booking.const';\nimport { HelpDeskLoc } from 'booking.component.help-desk-loc';\nimport './text-layout.css';\n\nexport const TextLayout = {\n\tname: 'ResourceSettingsCardTextLayout',\n\tprops: {\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(props): { code: string, anchorCode: string }\n\t{\n\t\treturn {\n\t\t\tcode: HelpDesk[`Resource${props.type}`].code,\n\t\t\tanchorCode: HelpDesk[`Resource${props.type}`].anchorCode,\n\t\t};\n\t},\n\tcomponents: {\n\t\tHelpDeskLoc,\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard__form-settings-text-row\">\n\t\t\t<HelpDeskLoc\n\t\t\t\t:message=\"text\"\n\t\t\t\t:code=\"code\"\n\t\t\t\t:anchor=\"anchorCode\"\n\t\t\t\tclass=\"resource-creation-wizard__form-settings-text\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { createNamespacedHelpers } from 'ui.vue3.vuex';\nimport { DateTimeFormat } from 'main.date';\n\nconst { mapGetters: mapResourceGetters } = createNamespacedHelpers('resource-creation-wizard');\n\nexport const WorkTimeMixin = {\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tselected: {\n\t\t\t\tMon: false,\n\t\t\t\tTue: false,\n\t\t\t\tWed: false,\n\t\t\t\tThu: false,\n\t\t\t\tFri: false,\n\t\t\t\tSat: false,\n\t\t\t\tSun: false,\n\t\t\t},\n\t\t\tdaysLabel: '',\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.initialDays.forEach((day) => {\n\t\t\tif (Object.prototype.hasOwnProperty.call(this.selected, day))\n\t\t\t{\n\t\t\t\tthis.selected[day] = true;\n\t\t\t}\n\t\t});\n\n\t\tthis.daysLabel = this.formatDaysLabel();\n\t},\n\tmethods: {\n\t\tformatDaysLabel(): string\n\t\t{\n\t\t\tconst defaultString = this.loc('BRCW_SETTINGS_CARD_WORK_TIME_DAYS');\n\n\t\t\tconst weekDays = this.companyScheduleSlots[0].weekDays;\n\t\t\tif (this.isArraysEqual(this.selectedDays, weekDays))\n\t\t\t{\n\t\t\t\treturn defaultString;\n\t\t\t}\n\n\t\t\tconst orderedDays = Object.keys(this.daysLabelMap);\n\n\t\t\tconst sortedSelectedDays = this.selectedDays.sort((a, b) => {\n\t\t\t\treturn orderedDays.indexOf(a) - orderedDays.indexOf(b);\n\t\t\t});\n\t\t\tconst formattedDays = sortedSelectedDays.map((day) => this.daysLabelMap[day]);\n\n\t\t\treturn String(formattedDays.join(', '));\n\t\t},\n\t\tgetDayDefaultIndex(dayKey): number\n\t\t{\n\t\t\tconst dayIndices = {\n\t\t\t\tSun: 0,\n\t\t\t\tMon: 1,\n\t\t\t\tTue: 2,\n\t\t\t\tWed: 3,\n\t\t\t\tThu: 4,\n\t\t\t\tFri: 5,\n\t\t\t\tSat: 6,\n\t\t\t};\n\n\t\t\treturn dayIndices[dayKey];\n\t\t},\n\t\tisArraysEqual(first: [], second: []): boolean\n\t\t{\n\t\t\treturn first.length === second.length && first.every((value, index) => value === second[index]);\n\t\t},\n\t},\n\tcomputed: {\n\t\t...mapResourceGetters({\n\t\t\tcompanyScheduleSlots: 'getCompanyScheduleSlots',\n\t\t\tweekStart: 'weekStart',\n\t\t}),\n\t\tselectedDays(): Array\n\t\t{\n\t\t\treturn Object.keys(this.selected).filter((day) => this.selected[day]);\n\t\t},\n\t\tdaysLabelMap(): Object\n\t\t{\n\t\t\tconst weekdays = [];\n\t\t\tconst format = 'D';\n\n\t\t\tconst allDays = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];\n\n\t\t\tconst startIndex = allDays.indexOf(this.weekStart);\n\n\t\t\tconst orderedDays = [...allDays.slice(startIndex), ...allDays.slice(0, startIndex)];\n\n\t\t\torderedDays.forEach((dayKey, index) => {\n\t\t\t\tconst currentDayIndex = new Date().getDay();\n\t\t\t\tconst targetDayIndex = this.getDayDefaultIndex(dayKey);\n\t\t\t\tconst dayDifference = (targetDayIndex - currentDayIndex + 7) % 7;\n\n\t\t\t\tconst dayDate = new Date();\n\t\t\t\tdayDate.setDate(dayDate.getDate() + dayDifference);\n\n\t\t\t\tweekdays[index] = DateTimeFormat.format(format, dayDate);\n\t\t\t});\n\n\t\t\treturn orderedDays.reduce((result, dayKey, index) => {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\tresult[dayKey] = weekdays[index];\n\n\t\t\t\treturn result;\n\t\t\t}, {});\n\t\t},\n\t},\n};\n","import { PopupOptions } from 'main.popup';\nimport { Popup } from 'booking.component.popup';\nimport { WorkTimeMixin } from './work-time-mixin';\n\nimport './week-days-popup.css';\n\nexport const WeekDaysPopup = {\n\tname: 'ResourceSettingsCardWeekDaysPopup',\n\temits: ['select', 'close'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tbindElement: {\n\t\t\ttype: HTMLElement,\n\t\t\trequired: true,\n\t\t},\n\t\tinitialDays: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tPopup,\n\t},\n\tmixins: [WorkTimeMixin],\n\tmethods: {\n\t\tclose(): void\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t},\n\t\tclick(day: string): void\n\t\t{\n\t\t\tconst trueKeys = Object.keys(this.selected).filter((key) => this.selected[key] === true);\n\n\t\t\tif (trueKeys.length === 1 && trueKeys[0] === day)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.selected[day] = !this.selected[day];\n\n\t\t\tthis.$emit('select', this.selectedDays, this.formatDaysLabel());\n\t\t},\n\t},\n\tcomputed: {\n\t\tpopupId(): string\n\t\t{\n\t\t\treturn `booking-work-time-popup-${this.id}`;\n\t\t},\n\t\tconfig(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\toffsetRight: this.bindElement.offsetWidth,\n\t\t\t\tangle: false,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceBindPosition: true,\n\t\t\t\t\tforceLeft: true,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Popup\n\t\t\t:id=\"popupId\"\n\t\t\t:config=\"config\"\n\t\t\t@close=\"close\"\n\t\t\tref=\"popup\"\n\t\t>\n\t\t\t<div class=\"resource-creation-wizard__form-week-days-popup\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"(day, index) in daysLabelMap\"\n\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t:data-id=\"'brcw-resource-work-time-week-day-' + index + '-' + id\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-week-days-popup-weekday\"\n\t\t\t\t\t:class=\"{ '--selected': selected[index] }\"\n\t\t\t\t\t@click=\"() => click(index)\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-week-days-popup-weekday-text\">\n\t\t\t\t\t\t{{ day }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-week-days-popup-weekday-icon\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n","import { Dom } from 'main.core';\nimport { DateTimeFormat } from 'main.date';\nimport { MenuManager, Menu, MenuItem } from 'main.popup';\nimport type { SlotRange } from 'booking.model.resources';\nimport { WorkTimeMixin } from './work-time-mixin';\nimport { WeekDaysPopup } from './week-days-popup';\n\nimport './work-time-slot-range.css';\n\nexport const WorkTimeSlotRange = {\n\tname: 'ResourceSettingsCardWorkTimeSlotRange',\n\temits: ['add', 'update', 'remove'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tisLastRange: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tinitialSlotRange: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tWeekDaysPopup,\n\t},\n\tmixins: [WorkTimeMixin],\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tfromId: 'from',\n\t\t\ttoId: 'to',\n\t\t\tfromTs: 0,\n\t\t\ttoTs: 0,\n\t\t\tduration: 0,\n\t\t\tisShownDays: false,\n\t\t\tarrow: {\n\t\t\t\tdays: false,\n\t\t\t\tfrom: false,\n\t\t\t\tto: false,\n\t\t\t},\n\t\t\tremoveSlot: !this.isLastRange,\n\t\t\tlocalSlotRange: { ...this.initialSlotRange },\n\t\t\tinitialDays: [...this.initialSlotRange.weekDays],\n\t\t};\n\t},\n\tcreated(): void\n\t{\n\t\tthis.fromTs = this.slotRange.from;\n\t\tthis.toTs = this.slotRange.to;\n\t\tthis.duration = this.toTs - this.fromTs;\n\t},\n\twatch: {\n\t\t'slotRange.from': function(value) {\n\t\t\tthis.fromTs = value;\n\n\t\t\tthis.toTs = this.fromTs + this.duration;\n\n\t\t\tthis.update();\n\t\t},\n\t\t'slotRange.to': function(value) {\n\t\t\tthis.toTs = value;\n\n\t\t\tif (this.toTs <= this.fromTs)\n\t\t\t{\n\t\t\t\tthis.fromTs = this.toTs - this.duration;\n\t\t\t}\n\n\t\t\tthis.duration = this.toTs - this.fromTs;\n\n\t\t\tthis.update();\n\t\t},\n\t},\n\tmethods: {\n\t\tshowDays(): void\n\t\t{\n\t\t\tthis.isShownDays = true;\n\t\t\tthis.arrow.days = true;\n\t\t},\n\t\thideDays(): void\n\t\t{\n\t\t\tthis.isShownDays = false;\n\t\t\tthis.arrow.days = false;\n\t\t},\n\t\tselectDays(weekDays: Array, daysLabel: string): void\n\t\t{\n\t\t\tthis.slotRange.weekDays = weekDays;\n\n\t\t\tthis.daysLabel = daysLabel;\n\n\t\t\tthis.update();\n\t\t},\n\t\tshow(bindElement: HTMLElement, id: string): void\n\t\t{\n\t\t\tif (this.arrow[id] === true)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst menuId = `booking-work-time-popup-${this.id}-${id}`;\n\t\t\tMenuManager.destroy(menuId);\n\n\t\t\tconst timeList: Menu = MenuManager.create({\n\t\t\t\tid: menuId,\n\t\t\t\tclassName: 'resource-creation-wizard__form-work-time-menu',\n\t\t\t\tbindElement,\n\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tevents: {\n\t\t\t\t\tonShow: () => {\n\t\t\t\t\t\tthis.arrow[id] = true;\n\n\t\t\t\t\t\tconst selectedItem: MenuItem = timeList.getMenuItems()\n\t\t\t\t\t\t\t.find((item: MenuItem) => Dom.hasClass(item.getLayout().item, '--selected'))\n\t\t\t\t\t\t;\n\n\t\t\t\t\t\tconst itemHeight = 36;\n\t\t\t\t\t\tconst offset = 2 * itemHeight;\n\n\t\t\t\t\t\tconst scrollContainer = timeList.getPopupWindow().getContentContainer();\n\t\t\t\t\t\tconst topPosition = Dom.getRelativePosition(selectedItem.getContainer(), scrollContainer).top;\n\n\t\t\t\t\t\tscrollContainer.scrollTo({\n\t\t\t\t\t\t\ttop: scrollContainer.scrollTop + topPosition - offset,\n\t\t\t\t\t\t\tbehavior: 'instant',\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tthis.arrow[id] = false;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tmaxHeight: 200,\n\t\t\t\tminWidth: bindElement.offsetWidth,\n\t\t\t});\n\n\t\t\tfor (const [key, value] of Object.entries(this.generateTimeMap(id)))\n\t\t\t{\n\t\t\t\tconst minutes = parseInt(key, 10);\n\t\t\t\tconst defaultClass = 'menu-popup-item menu-popup-no-icon';\n\n\t\t\t\ttimeList.addMenuItem({\n\t\t\t\t\ttext: value,\n\t\t\t\t\tclassName: this.slotRange[id] === minutes ? `${defaultClass} --selected` : defaultClass,\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tminutes,\n\t\t\t\t\t},\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.slotRange[id] = parseInt(minutes, 10);\n\t\t\t\t\t\ttimeList.close();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\ttimeList.show();\n\t\t},\n\t\tgenerateTimeMap(id: string): Object\n\t\t{\n\t\t\tconst timeMap = {};\n\n\t\t\tconst timeFormat = DateTimeFormat.getFormat('SHORT_TIME_FORMAT');\n\n\t\t\tconst interval = 30;\n\t\t\tconst from = (id === this.toId ? this.fromTs + interval : 0);\n\t\t\tconst to = (id === this.fromId ? this.toTs : 1440);\n\t\t\tfor (let minutes = from; minutes < to; minutes += interval)\n\t\t\t{\n\t\t\t\tconst timestamp = new Date().setHours(0, minutes, 0, 0) / 1000;\n\t\t\t\ttimeMap[minutes] = DateTimeFormat.format(timeFormat, timestamp);\n\t\t\t}\n\n\t\t\tif (id === this.toId)\n\t\t\t{\n\t\t\t\tconst midnightTimestamp = new Date().setHours(0, 0, 0, 0) / 1000;\n\t\t\t\ttimeMap[to] = DateTimeFormat.format(timeFormat, midnightTimestamp);\n\t\t\t}\n\n\t\t\treturn timeMap;\n\t\t},\n\t\tclickBtn(): void\n\t\t{\n\t\t\tif (this.removeSlot === false)\n\t\t\t{\n\t\t\t\tthis.removeSlot = true;\n\n\t\t\t\tthis.$emit('add');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.removeSlot = false;\n\n\t\t\t\tthis.$emit('remove', this.id);\n\t\t\t}\n\t\t},\n\t\tupdate(): void\n\t\t{\n\t\t\tthis.$emit('update', this.id, this.slotRange);\n\t\t},\n\t},\n\tcomputed: {\n\t\tdaysId(): string\n\t\t{\n\t\t\treturn `days-${this.id}`;\n\t\t},\n\t\tdays(): HTMLElement\n\t\t{\n\t\t\treturn this.$refs.days;\n\t\t},\n\t\tslotRange(): SlotRange\n\t\t{\n\t\t\treturn this.localSlotRange;\n\t\t},\n\t\tfromLabel(): string\n\t\t{\n\t\t\tconst timeMap = this.generateTimeMap(this.fromId);\n\n\t\t\treturn timeMap[this.slotRange.from];\n\t\t},\n\t\ttoLabel(): string\n\t\t{\n\t\t\tconst timeMap = this.generateTimeMap(this.toId);\n\n\t\t\treturn timeMap[this.slotRange.to];\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form-content resource-creation-wizard__form-work-time-selector-widget\">\n\t\t\t<div class=\"ui-form-row resource-creation-wizard__form-work-time-selector-widget-days\">\n\t\t\t\t<div\n\t\t\t\t\tref=\"days\"\n\t\t\t\t\t:data-id=\"'brcw-resource-work-time-slot-range-days-' + id\"\n\t\t\t\t\tclass=\"rcw-ui-ctl ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-sm ui-ctl-round\"\n\t\t\t\t\t@click=\"showDays\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-angle\"\n\t\t\t\t\t\t:class=\"{ '--active': arrow.days }\"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div class=\"ui-ctl-element\">\n\t\t\t\t\t\t{{ daysLabel }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<WeekDaysPopup\n\t\t\t\t\t\tv-if=\"isShownDays\"\n\t\t\t\t\t\t:id=\"daysId\"\n\t\t\t\t\t\t:bindElement=\"days\"\n\t\t\t\t\t\t:initialDays=\"slotRange.weekDays\"\n\t\t\t\t\t\t@select=\"selectDays\"\n\t\t\t\t\t\t@close=\"hideDays\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"ui-form-row resource-creation-wizard__form-work-time-selector-widget-time\">\n\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tref=\"from\"\n\t\t\t\t\t\t\t:data-id=\"'brcw-resource-work-time-slot-range-from-' + id\"\n\t\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-sm ui-ctl-round\"\n\t\t\t\t\t\t\t@click=\"() => show($refs.from, fromId)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-angle\"\n\t\t\t\t\t\t\t\t:class=\"{ '--active': arrow.from }\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div class=\"ui-ctl-element\">{{ fromLabel }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t<div class=\"resource-creation-wizard__form-work-time-selector-dash\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tref=\"to\"\n\t\t\t\t\t\t\t:data-id=\"'brcw-resource-work-time-slot-range-to-' + id\"\n\t\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-sm ui-ctl-round\"\n\t\t\t\t\t\t\t@click=\"() => show($refs.to, toId)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-angle\"\n\t\t\t\t\t\t\t\t:class=\"{ '--active': arrow.to }\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div class=\"ui-ctl-element\">{{ toLabel }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"ui-form-row resource-creation-wizard__form-work-time-selector-btn-row\">\n\t\t\t\t<div\n\t\t\t\t\t:data-id=\"'brcw-resource-work-time-slot-range-add-' + id\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-work-time-selector-btn\"\n\t\t\t\t\t:class=\"{ '--remove': removeSlot }\"\n\t\t\t\t\t@click=\"clickBtn\"\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Text } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\n\nimport { Timezone } from 'booking.lib.timezone';\nimport type { SlotRange } from 'booking.model.resources';\nimport { WorkTimeSlotRange } from './work-time-slot-range';\n\nimport './work-time-selector.css';\n\nexport const WorkTimeSelector = {\n\tname: 'ResourceSettingsCardWorkTimeSelector',\n\temits: [\n\t\t'update',\n\t\t'updateGlobalSchedule',\n\t\t'getGlobalSchedule',\n\t],\n\tprops: {\n\t\tinitialSlotRanges: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tisGlobalSchedule: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tdefaultSlotRange: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tinitialTimezone: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcurrentTimezone: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tisCompanyScheduleAccess: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tcompanyScheduleUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tWorkTimeSlotRange,\n\t\tIcon,\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tlocalSlotRanges: this.processSlotRanges(this.initialSlotRanges),\n\t\t\tisChecked: this.isGlobalSchedule,\n\t\t\thasTimezonesDifference: false,\n\t\t\tformattedInitialOffset: '',\n\t\t\tformattedCurrentOffset: '',\n\t\t};\n\t},\n\tcreated(): void\n\t{\n\t\tthis.calculateDifferenceBetweenTimezones(this.initialTimezone, this.currentTimezone);\n\t},\n\twatch: {\n\t\tinitialSlotRanges: {\n\t\t\thandler(newSlotRanges)\n\t\t\t{\n\t\t\t\tthis.localSlotRanges = this.processSlotRanges(newSlotRanges);\n\t\t\t},\n\t\t\tdeep: true,\n\t\t},\n\t\tisChecked(checked): void\n\t\t{\n\t\t\tthis.$emit('updateGlobalSchedule', checked);\n\t\t},\n\t},\n\tmethods: {\n\t\topenCompanyWorkTime(event): void\n\t\t{\n\t\t\tconst isTextClick = event.target === event.currentTarget;\n\t\t\tif (\n\t\t\t\t!isTextClick\n\t\t\t\t&& this.isCompanyScheduleAccess\n\t\t\t\t&& this.companyScheduleUrl !== ''\n\t\t\t)\n\t\t\t{\n\t\t\t\ttop.BX.Event.EventEmitter.subscribeOnce(\n\t\t\t\t\ttop.BX.Event.EventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t'SidePanel.Slider:onLoad',\n\t\t\t\t\t(baseEvent: BaseEvent) => {\n\t\t\t\t\t\tconst slider = baseEvent.getTarget();\n\t\t\t\t\t\tslider.getWindow().BX.Event.EventEmitter.subscribeOnce(\n\t\t\t\t\t\t\tslider.getWindow().BX.Event.EventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t\t\t'BX.Intranet.Settings:onSuccessSave',\n\t\t\t\t\t\t\t(innerBaseEvent: BaseEvent) => {\n\t\t\t\t\t\t\t\tconst extraSettings = innerBaseEvent.getData();\n\t\t\t\t\t\t\t\textraSettings.reloadAfterClose = false;\n\n\t\t\t\t\t\t\t\tthis.$emit('getGlobalSchedule');\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t);\n\n\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\tthis.companyScheduleUrl,\n\t\t\t\t\t{ cacheable: false },\n\t\t\t\t);\n\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t},\n\t\tupdateSlotRange(index: number, slotRange: SlotRange): void\n\t\t{\n\t\t\tthis.slotRanges[index] = slotRange;\n\n\t\t\tthis.$emit('update', this.slotRanges);\n\t\t},\n\t\taddSlotRange(): void\n\t\t{\n\t\t\tthis.slotRanges.push(this.defaultSlotRange);\n\n\t\t\tthis.$emit('update', this.slotRanges);\n\t\t},\n\t\tremoveSlotRange(index: number): void\n\t\t{\n\t\t\tthis.slotRanges.splice(index, 1);\n\n\t\t\tthis.$emit('update', this.slotRanges);\n\t\t},\n\t\tprocessSlotRanges(slotRanges): SlotRange[]\n\t\t{\n\t\t\treturn slotRanges.map((slotRange) => {\n\t\t\t\tif (slotRange.id === null)\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...slotRange,\n\t\t\t\t\t\tid: Text.getRandom(),\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn slotRange;\n\t\t\t});\n\t\t},\n\t\tgetTimezoneOffset(timeZone: string): number\n\t\t{\n\t\t\treturn Timezone.getOffset(Date.now(), timeZone) / (-60);\n\t\t},\n\t\tcalculateDifferenceBetweenTimezones(initialTimezone: string, currentTimezone: string): void\n\t\t{\n\t\t\tconst initialOffset = this.getTimezoneOffset(initialTimezone);\n\t\t\tconst currentOffset = this.getTimezoneOffset(currentTimezone);\n\n\t\t\tthis.hasTimezonesDifference = initialOffset !== currentOffset;\n\n\t\t\tif (this.hasTimezonesDifference)\n\t\t\t{\n\t\t\t\tconst formatOffset = (offset) => {\n\t\t\t\t\tconst sign = offset >= 0 ? '+' : '-';\n\t\t\t\t\tconst hours = Math.floor(Math.abs(offset) / 60);\n\t\t\t\t\tconst minutes = Math.abs(offset) % 60;\n\n\t\t\t\t\treturn `${sign}${hours}:${minutes.toString().padStart(2, '0')}`;\n\t\t\t\t};\n\n\t\t\t\tthis.formattedInitialOffset = `UTC ${formatOffset(-initialOffset)} ${initialTimezone}`;\n\n\t\t\t\tconst totalDifferenceMinutes = currentOffset - initialOffset;\n\n\t\t\t\tthis.formattedCurrentOffset = formatOffset(totalDifferenceMinutes);\n\t\t\t}\n\t\t},\n\t\tonSlotClick(): void\n\t\t{\n\t\t\tthis.isChecked = false;\n\t\t},\n\t},\n\tcomputed: {\n\t\tcompanyWorkTimeOptionLabel(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_WORK_TIME_COMPANY_OPTION');\n\t\t},\n\t\tslotRanges(): SlotRange[]\n\t\t{\n\t\t\treturn this.localSlotRanges;\n\t\t},\n\t\tisSlotsDisabled(): boolean\n\t\t{\n\t\t\treturn this.isChecked;\n\t\t},\n\t\ttimezoneIconType(): string\n\t\t{\n\t\t\treturn IconSet.EARTH_TIME;\n\t\t},\n\t\tformattedTimezonesText(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_WORK_TIME_TIMEZONES')\n\t\t\t\t.replace('#utc#', this.formattedInitialOffset)\n\t\t\t\t.replace('#difference#', this.formattedCurrentOffset);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-work-time-selector\">\n\t\t\t<div class=\"ui-form-row-inline\">\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<label\n\t\t\t\t\t\tfor=\"brcw-settings-work-time-company-option\"\n\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-checkbox\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"brcw-settings-work-time-company-option\"\n\t\t\t\t\t\t\tdata-id=\"brcw-settings-work-time-company-option\"\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\tv-model=\"isChecked\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"ui-ctl-label-text work-time-selector-label-text\"\n\t\t\t\t\t\t\t:class=\"{'--disabled': !isCompanyScheduleAccess || companyScheduleUrl === ''}\"\n\t\t\t\t\t\t\t@click=\"openCompanyWorkTime\"\n\t\t\t\t\t\t\tv-html=\"companyWorkTimeOptionLabel\"\n\t\t\t\t\t\t></span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclass=\"resource-creation-wizard__form-work-time-selector-slots\"\n\t\t\t\t:class=\"{'--disabled': isSlotsDisabled }\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"(slotRange, index) in slotRanges\"\n\t\t\t\t\t:key=\"slotRange.id\"\n\t\t\t\t\t:data-id=\"'brcw-resource-work-time-slot-' + slotRange.id\"\n\t\t\t\t\tclass=\"ui-form-row-inline\"\n\t\t\t\t\t@click=\"onSlotClick\"\n\t\t\t\t>\n\t\t\t\t\t<WorkTimeSlotRange\n\t\t\t\t\t\t:id=\"index\"\n\t\t\t\t\t\t:initialSlotRange=\"slotRange\"\n\t\t\t\t\t\t:isLastRange=\"index === slotRanges.length - 1\"\n\t\t\t\t\t\t@add=\"addSlotRange\"\n\t\t\t\t\t\t@update=\"updateSlotRange\"\n\t\t\t\t\t\t@remove=\"removeSlotRange\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"hasTimezonesDifference\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-work-time-selector-slots-timezone\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-work-time-selector-slots-timezone-icon\">\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t:name=\"timezoneIconType\"\n\t\t\t\t\t\t\t:color=\"'var(--ui-color-palette-gray-50)'\"\n\t\t\t\t\t\t\t:size=\"24\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"resource-creation-wizard__form-work-time-selector-slots-timezone-text\"\n\t\t\t\t\t\tv-html=\"formattedTimezonesText\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Set as IconSet } from 'ui.icon-set.api.vue';\nimport type { SlotRange } from 'booking.model.resources';\nimport { TextLayout } from '../text-layout/text-layout';\nimport { TitleLayout } from '../title-layout/title-layout';\nimport { WorkTimeSelector } from './work-time-selector';\n\nexport const WorkTime = {\n\tname: 'ResourceSettingsCardWorkTime',\n\temits: [\n\t\t'update',\n\t\t'updateGlobalSchedule',\n\t\t'getGlobalSchedule',\n\t],\n\tprops: {\n\t\tinitialSlotRanges: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tisGlobalSchedule: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tdefaultSlotRange: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tinitialTimezone: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcurrentTimezone: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tisCompanyScheduleAccess: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tcompanyScheduleUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tTitleLayout,\n\t\tTextLayout,\n\t\tWorkTimeSelector,\n\t},\n\tmethods: {\n\t\tupdate(slotRanges: SlotRange[]): void\n\t\t{\n\t\t\tthis.$emit('update', slotRanges);\n\t\t},\n\t\tupdateGlobalSchedule(checked: boolean): void\n\t\t{\n\t\t\tthis.$emit('updateGlobalSchedule', checked);\n\t\t},\n\t\tgetGlobalSchedule(): void\n\t\t{\n\t\t\tthis.$emit('getGlobalSchedule');\n\t\t},\n\t},\n\tcomputed: {\n\t\ttitle(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_WORK_TIME_TITLE_MSGVER_1');\n\t\t},\n\t\ttitleIconType(): string\n\t\t{\n\t\t\treturn IconSet.CLOCK_2;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-settings\">\n\t\t\t<TitleLayout\n\t\t\t\t:title=\"title\"\n\t\t\t\t:iconType=\"titleIconType\"\n\t\t\t/>\n\t\t\t<TextLayout\n\t\t\t\ttype=\"WorkTime\"\n\t\t\t\t:text=\"loc('BRCW_SETTINGS_CARD_WORK_TIME_TEXT_MSGVER_2')\"\n\t\t\t/>\n\t\t\t<WorkTimeSelector\n\t\t\t\t:initialSlotRanges=\"initialSlotRanges\"\n\t\t\t\t:defaultSlotRange=\"defaultSlotRange\"\n\t\t\t\t:isGlobalSchedule=\"isGlobalSchedule\"\n\t\t\t\t:initialTimezone=\"initialTimezone\"\n\t\t\t\t:currentTimezone=\"currentTimezone\"\n\t\t\t\t:isCompanyScheduleAccess=\"isCompanyScheduleAccess\"\n\t\t\t\t:companyScheduleUrl=\"companyScheduleUrl\"\n\t\t\t\t@update=\"update\"\n\t\t\t\t@updateGlobalSchedule=\"updateGlobalSchedule\"\n\t\t\t\t@getGlobalSchedule=\"getGlobalSchedule\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { hint } from 'ui.vue3.directives.hint';\nimport { Type } from 'main.core';\nimport 'ui.layout-form';\nimport './slot-length-precision-selection.css';\n\nexport const SlotLengthPrecisionSelection = {\n\tname: 'ResourceSettingsCardSlotLengthSlotLengthPrecisionSelection',\n\tdirectives: { hint },\n\temits: ['input'],\n\tcomponents: {},\n\tprops: {\n\t\tinitialValue: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tdays: 0,\n\t\t\thours: 0,\n\t\t\tminutes: 0,\n\t\t\tminutesFocused: false,\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.distributeInitialValue();\n\t},\n\tmethods: {\n\t\tdistributeInitialValue(): void\n\t\t{\n\t\t\tlet remainingMinutes = this.initialValue;\n\n\t\t\tthis.days = Math.floor(remainingMinutes / (24 * 60));\n\t\t\tremainingMinutes %= 24 * 60;\n\n\t\t\tthis.hours = Math.floor(remainingMinutes / 60);\n\t\t\tremainingMinutes %= 60;\n\n\t\t\tthis.minutes = remainingMinutes;\n\t\t},\n\t\tcalculateTotalMinutes()\n\t\t{\n\t\t\tconst totalMinutes = this.days * 24 * 60 + this.hours * 60 + this.minutes;\n\n\t\t\tthis.$emit('input', totalMinutes);\n\t\t},\n\t\tvalidateHours()\n\t\t{\n\t\t\tthis.hours = parseInt(this.hours, 10);\n\n\t\t\tif (!Type.isNumber(this.hours))\n\t\t\t{\n\t\t\t\tthis.hours = 0;\n\t\t\t}\n\n\t\t\tif (this.hours > 12)\n\t\t\t{\n\t\t\t\tthis.hours = 12;\n\t\t\t}\n\n\t\t\tif (this.hours === 0)\n\t\t\t{\n\t\t\t\t// delay calculation to let time to determine if minutes focused before\n\t\t\t\tsetTimeout((): void => {\n\t\t\t\t\tif (!this.minutesFocused)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.calculateTotalMinutes();\n\t\t\t\t\t}\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.calculateTotalMinutes();\n\t\t\t}\n\t\t},\n\t\tvalidateMinutes()\n\t\t{\n\t\t\tthis.minutesFocused = false;\n\t\t\tthis.minutes = parseInt(this.minutes, 10);\n\n\t\t\tif (!Type.isNumber(this.minutes))\n\t\t\t{\n\t\t\t\tthis.minutes = 0;\n\t\t\t}\n\n\t\t\tif (this.minutes > 59)\n\t\t\t{\n\t\t\t\tthis.minutes = 59;\n\t\t\t}\n\n\t\t\tthis.calculateTotalMinutes();\n\t\t},\n\t\thandleEnterKey(event)\n\t\t{\n\t\t\tif (event.key === 'Enter')\n\t\t\t{\n\t\t\t\tevent.target.blur();\n\t\t\t}\n\t\t},\n\t},\n\tcomputed: {\n\t\thourHint(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_PRECISION_LIMIT_HOUR'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tminutesHint(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_PRECISION_LIMIT_MINUTES'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-slot-length-precision-selection\">\n\t\t\t<div class=\"ui-form-row-inline\">\n\t\t\t\t<div class=\"ui-form-row --disabled\">\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-time ui-ctl-sm ui-ctl-round\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t:data-id=\"'brcw-resource-slot-length-precision-days'\"\n\t\t\t\t\t\t\t\t\tv-model=\"days\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_PRECISION_1') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-time ui-ctl-sm ui-ctl-round\"\n\t\t\t\t\t\t\t\tv-hint=\"hourHint\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t:data-id=\"'brcw-resource-slot-length-precision-hours'\"\n\t\t\t\t\t\t\t\t\tv-model=\"hours\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t@blur=\"validateHours\"\n\t\t\t\t\t\t\t\t\t@keydown=\"handleEnterKey\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_PRECISION_2') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-time ui-ctl-sm ui-ctl-round\"\n\t\t\t\t\t\t\t\tv-hint=\"minutesHint\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t:data-id=\"'brcw-resource-slot-length-precision-minutes'\"\n\t\t\t\t\t\t\t\t\tv-model=\"minutes\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t@focus=\"minutesFocused = true\"\n\t\t\t\t\t\t\t\t\t@blur=\"validateMinutes\"\n\t\t\t\t\t\t\t\t\t@keydown=\"handleEnterKey\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_PRECISION_3') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","// @vue/component\n\nimport { hint } from 'ui.vue3.directives.hint';\nimport 'ui.buttons';\n\nimport { Model } from 'booking.const';\nimport { Duration } from 'booking.lib.duration';\nimport type { SlotLengthId } from 'booking.model.resource-creation-wizard';\n\nimport { SlotLengthPrecisionSelection } from './slot-length-precision-selection';\nimport './slot-length-selector.css';\n\nconst unitDurations = Duration.getUnitDurations();\nconst units = Object.fromEntries(\n\tObject.entries(unitDurations).map(([unit, value]) => [unit, value / unitDurations.i]),\n);\n\nconst disabledLengths = new Set([units.H * 24, units.d * 7]);\n\nexport const SlotLengthSelector = {\n\tname: 'ResourceSettingsCardSlotLengthSelector',\n\tdirectives: { hint },\n\temits: ['select'],\n\tcomponents: {\n\t\tSlotLengthPrecisionSelection,\n\t},\n\tprops: {\n\t\tinitialSelectedValue: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tselectedPrecisionValue: this.initialSelectedValue,\n\t\t\tprecisionMode: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tselectedValue: {\n\t\t\tget(): SlotLengthId\n\t\t\t{\n\t\t\t\treturn this.$store.state[Model.ResourceCreationWizard].slotLengthId;\n\t\t\t},\n\t\t\tset(slotLengthId: SlotLengthId): void\n\t\t\t{\n\t\t\t\tthis.$store.dispatch(`${Model.ResourceCreationWizard}/setSlotLengthId`, { slotLengthId });\n\t\t\t},\n\t\t},\n\t\tdurations(): { label: string, value: number }[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: new Duration(unitDurations.H).format('H'),\n\t\t\t\t\tvalue: units.H,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: new Duration(unitDurations.H * 2).format('H'),\n\t\t\t\t\tvalue: units.H * 2,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: new Duration(unitDurations.H * 24).format('H'),\n\t\t\t\t\tvalue: units.H * 24,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: new Duration(unitDurations.d * 7).format('d'),\n\t\t\t\t\tvalue: units.d * 7,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: this.loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_SELECTOR_CUSTOM'),\n\t\t\t\t\tvalue: 0,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tconst templateValues = new Set([\n\t\t\tunits.H,\n\t\t\tunits.H * 2,\n\t\t\tunits.H * 24,\n\t\t\tunits.d * 7,\n\t\t]);\n\n\t\tthis.selectedValue = this.initialSelectedValue;\n\t\tif (!templateValues.has(this.selectedValue))\n\t\t{\n\t\t\tthis.selectedValue = 0;\n\t\t\tthis.precisionMode = true;\n\t\t}\n\t},\n\tmethods: {\n\t\tselect(value: number): void\n\t\t{\n\t\t\tif (disabledLengths.has(value))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.selectedValue = parseInt(value, 10);\n\n\t\t\tif (value === 0)\n\t\t\t{\n\t\t\t\tthis.precisionMode = true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.precisionMode = false;\n\n\t\t\t\tthis.$emit('select', this.selectedValue);\n\t\t\t}\n\t\t},\n\t\tselectPrecision(value: number): void\n\t\t{\n\t\t\tthis.selectedPrecisionValue = value === 0 ? units.H : parseInt(value, 10);\n\n\t\t\tif (value === 0)\n\t\t\t{\n\t\t\t\tthis.selectedValue = units.H;\n\t\t\t\tthis.precisionMode = false;\n\t\t\t}\n\n\t\t\tthis.$emit('select', this.selectedPrecisionValue);\n\t\t},\n\t\tgetClass(value): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-btn-primary': this.selectedValue === value,\n\t\t\t\t'ui-btn-light': this.selectedValue !== value,\n\t\t\t\t'ui-btn-disabled': disabledLengths.has(value),\n\t\t\t};\n\t\t},\n\t\tgetSoonHintContent(value: number): ?Object\n\t\t{\n\t\t\tif (disabledLengths.has(value))\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\ttext: this.loc('BRCW_SOON_HINT'),\n\t\t\t\t\tpopupOptions: {\n\t\t\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\t\t\tbindOptions: {\n\t\t\t\t\t\t\tposition: 'bottom',\n\t\t\t\t\t\t},\n\t\t\t\t\t\toffsetLeft: 0,\n\t\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard__form-slot-length-selector\">\n\t\t\t<div\n\t\t\t\tv-for=\"(duration, index) in durations\"\n\t\t\t\t:key=\"index\"\n\t\t\t\t:data-id=\"'brcw-resource-slot-length-selector-size-' + index\"\n\t\t\t\tclass=\"ui-btn ui-btn-xs\"\n\t\t\t\t:class=\"getClass(duration.value)\"\n\t\t\t\t@click=\"select(duration.value)\"\n\t\t\t\tv-hint=\"getSoonHintContent(duration.value)\"\n\t\t\t>\n\t\t\t\t{{ duration.label }}\n\t\t\t</div>\n\t\t</div>\n\t\t<transition name=\"fade\">\n\t\t\t<div\n\t\t\t\tv-if=\"precisionMode\"\n\t\t\t\tclass=\"resource-creation-wizard__form-slot-length-precision\"\n\t\t\t>\n\t\t\t\t<SlotLengthPrecisionSelection\n\t\t\t\t\t:initialValue=\"selectedPrecisionValue\"\n\t\t\t\t\t@input=\"selectPrecision\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</transition>\n\t`,\n};\n","import { Set as IconSet } from 'ui.icon-set.api.vue';\nimport { TextLayout } from '../text-layout/text-layout';\nimport { TitleLayout } from '../title-layout/title-layout';\nimport { SlotLengthSelector } from './slot-length-selector';\n\nexport const SlotLength = {\n\tname: 'ResourceSettingsCardSlotLength',\n\temits: ['select'],\n\tcomponents: {\n\t\tTitleLayout,\n\t\tTextLayout,\n\t\tSlotLengthSelector,\n\t},\n\tprops: {\n\t\tinitialSelectedValue: {\n\t\t\ttype: Number,\n\t\t\tdefault: 60,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tselectedSlotLength: this.initialSelectedValue,\n\t\t};\n\t},\n\tmethods: {\n\t\tupdateSelectedValue(value): void\n\t\t{\n\t\t\tthis.selectedSlotLength = value;\n\n\t\t\tthis.$emit('select', value);\n\t\t},\n\t},\n\tcomputed: {\n\t\ttitle(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_TITLE_MSGVER_1');\n\t\t},\n\t\ttitleIconType(): string\n\t\t{\n\t\t\treturn IconSet.GANTT_GRAPHS;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-settings\">\n\t\t\t<TitleLayout\n\t\t\t\t:title=\"title\"\n\t\t\t\t:iconType=\"titleIconType\"\n\t\t\t/>\n\t\t\t<TextLayout\n\t\t\t\ttype=\"SlotLength\"\n\t\t\t\t:text=\"loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_TEXT_MSGVER_2')\"\n\t\t\t/>\n\t\t\t<div>\n\t\t\t\t<SlotLengthSelector\n\t\t\t\t\t:initialSelectedValue=\"initialSelectedValue\"\n\t\t\t\t\t@select=\"updateSelectedValue\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { createNamespacedHelpers, mapGetters } from 'ui.vue3.vuex';\nimport { Type } from 'main.core';\nimport { Model } from 'booking.const';\nimport { resourceCreationWizardService } from 'booking.provider.service.resource-creation-wizard-service';\nimport { BaseFields } from './base-fields/base-fields';\nimport { ScheduleTypes } from './schedule-types/schedule-types';\nimport { WorkTime } from './work-time/work-time';\nimport { SlotLength } from './slot-length/slot-length';\n\nimport type { SlotRange } from 'booking.model.resources';\nimport type { ResourceTypeModel } from 'booking.model.resource-types';\n\nimport 'ui.forms';\nimport 'ui.layout-form';\nimport 'ui.icon-set.main';\n\nimport './resource-settings-card.css';\n\nconst { mapGetters: mapResourceGetters, mapActions, mapMutations } = createNamespacedHelpers('resource-creation-wizard');\n\nexport const ResourceSettingsCard = {\n\tname: 'ResourceSettingsCard',\n\tcomponents: {\n\t\tBaseFields,\n\t\tScheduleTypes,\n\t\tWorkTime,\n\t\tSlotLength,\n\t},\n\tcreated(): void\n\t{\n\t\tthis.initialTimezone = this.getInitialSlotTimeZone();\n\t\tthis.selectedSlotLength = this.resource.slotRanges?.[0]?.slotSize ?? 60;\n\n\t\tconst slotRanges = (\n\t\t\tType.isArrayFilled(this.resource.slotRanges)\n\t\t\t\t? this.resource.slotRanges\n\t\t\t\t: this.companyScheduleSlots\n\t\t);\n\n\t\tthis.updateSlotRanges(slotRanges);\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tselectedSlotLength: 60,\n\t\t\tinitialTimezone: '',\n\t\t};\n\t},\n\tmethods: {\n\t\t...mapActions([\n\t\t\t'updateResource',\n\t\t\t'setInvalidResourceName',\n\t\t\t'setInvalidResourceType',\n\t\t]),\n\t\t...mapMutations([\n\t\t\t'setGlobalSchedule',\n\t\t]),\n\t\tupdateResourceName(name): void\n\t\t{\n\t\t\tthis.updateResource({ name });\n\t\t\tif (name)\n\t\t\t{\n\t\t\t\tthis.setInvalidResourceName(false);\n\t\t\t}\n\t\t},\n\t\tupdateResourceType(typeId): void\n\t\t{\n\t\t\tthis.updateResource({ typeId });\n\t\t\tif (typeId)\n\t\t\t{\n\t\t\t\tthis.setInvalidResourceType(false);\n\t\t\t}\n\t\t},\n\t\tupdateSlotRanges(slotRanges: SlotRange[]): void\n\t\t{\n\t\t\tthis.updateResource({ slotRanges: this.updateSlotDataForAllRanges(slotRanges) });\n\t\t},\n\t\tupdateSlotLength(value): void\n\t\t{\n\t\t\tthis.selectedSlotLength = value;\n\n\t\t\tif (this.resource.slotRanges.length === 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.updateSlotRanges(this.resource.slotRanges);\n\t\t},\n\t\tupdateSlotDataForAllRanges(inputSlotRanges: SlotRange[]): SlotRange[]\n\t\t{\n\t\t\tconst slotRanges = inputSlotRanges || this.resource.slotRanges;\n\n\t\t\treturn slotRanges.map((slotRange: SlotRange) => {\n\t\t\t\treturn {\n\t\t\t\t\t...slotRange,\n\t\t\t\t\tslotSize: this.selectedSlotLength,\n\t\t\t\t\ttimezone: this.timezone,\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t\tupdateGlobalSchedule(checked: boolean): void\n\t\t{\n\t\t\tthis.setGlobalSchedule(checked);\n\t\t},\n\t\tasync fetchData(): void\n\t\t{\n\t\t\tawait resourceCreationWizardService.fetchData();\n\n\t\t\tif (!this.isEditForm)\n\t\t\t{\n\t\t\t\tthis.updateSlotRanges(this.companyScheduleSlots);\n\t\t\t}\n\t\t},\n\t\tgetInitialSlotTimeZone(): string\n\t\t{\n\t\t\tconst slotRanges = this.isEditForm ? this.resource.slotRanges : this.companyScheduleSlots;\n\n\t\t\treturn slotRanges[0]?.timezone;\n\t\t},\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\ttimezone: `${Model.Interface}/timezone`,\n\t\t}),\n\t\t...mapResourceGetters({\n\t\t\tresource: 'getResource',\n\t\t\tcompanyScheduleSlots: 'getCompanyScheduleSlots',\n\t\t\tisCompanyScheduleAccess: 'isCompanyScheduleAccess',\n\t\t\tcompanyScheduleUrl: 'companyScheduleUrl',\n\t\t\tisGlobalSchedule: 'isGlobalSchedule',\n\t\t}),\n\t\tresourceName(): string\n\t\t{\n\t\t\treturn this.resource.name;\n\t\t},\n\t\tresourceType(): Object\n\t\t{\n\t\t\tconst resourceType: ?ResourceTypeModel = this.$store\n\t\t\t\t.getters[`${Model.ResourceTypes}/getById`](this.resource.typeId)\n\t\t\t;\n\n\t\t\treturn {\n\t\t\t\ttypeId: this.resource.typeId,\n\t\t\t\ttypeName: resourceType?.name,\n\t\t\t};\n\t\t},\n\t\tslotRanges(): SlotRange[]\n\t\t{\n\t\t\treturn this.resource.slotRanges;\n\t\t},\n\t\tdefaultSlotRange(): SlotRange\n\t\t{\n\t\t\treturn this.companyScheduleSlots[0];\n\t\t},\n\t\tslotSize(): number\n\t\t{\n\t\t\tconst slotRange: SlotRange = this.resource.slotRanges?.[0];\n\n\t\t\treturn slotRange?.slotSize ?? 60;\n\t\t},\n\t\tisMain: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.resource.isMain;\n\t\t\t},\n\t\t\tset(isMain: boolean)\n\t\t\t{\n\t\t\t\tthis.updateResource({ isMain });\n\t\t\t},\n\t\t},\n\t\tisEditForm(): boolean\n\t\t{\n\t\t\treturn this.resource.id !== null;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-settings-card\">\n\t\t\t<BaseFields\n\t\t\t\tdata-id=\"brcw-resource-settings-base\"\n\t\t\t\t:initialResourceName=\"resourceName\"\n\t\t\t\t:initialResourceType=\"resourceType\"\n\t\t\t\t@nameUpdate=\"updateResourceName\"\n\t\t\t\t@typeUpdate=\"updateResourceType\"\n\t\t\t/>\n\t\t\t<ScheduleTypes\n\t\t\t\tdata-id=\"brcw-resource-settings-schedule-types\"\n\t\t\t\tv-model=\"isMain\"\n\t\t\t/>\n\t\t\t<WorkTime\n\t\t\t\tdata-id=\"brcw-resource-settings-work-time\"\n\t\t\t\t:initialSlotRanges=\"slotRanges\"\n\t\t\t\t:defaultSlotRange=\"defaultSlotRange\"\n\t\t\t\t:isGlobalSchedule=\"isGlobalSchedule\"\n\t\t\t\t:initialTimezone=\"initialTimezone\"\n\t\t\t\t:currentTimezone=\"timezone\"\n\t\t\t\t:isCompanyScheduleAccess=\"isCompanyScheduleAccess\"\n\t\t\t\t:companyScheduleUrl=\"companyScheduleUrl\"\n\t\t\t\t@update=\"updateSlotRanges\"\n\t\t\t\t@updateGlobalSchedule=\"updateGlobalSchedule\"\n\t\t\t\t@getGlobalSchedule=\"fetchData\"\n\t\t\t/>\n\t\t\t<SlotLength\n\t\t\t\tdata-id=\"brcw-resource-settings-slot-length\"\n\t\t\t\t:initialSelectedValue=\"slotSize\"\n\t\t\t\t@select=\"updateSlotLength\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { BMenu, type MenuOptions } from 'ui.vue3.components.menu';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { Actions } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.actions';\n\nimport './label.css';\n\nexport type Item = {\n\tname: string,\n\tvalue: number,\n};\n\n// @vue/component\nexport const LabelDropdown = {\n\tcomponents: {\n\t\tBIcon,\n\t\tBMenu,\n\t},\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\t/** @type Item[] */\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tActions,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisMenuShown: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttext(): string\n\t\t{\n\t\t\treturn this.items.find(({ value }) => value === this.value).name;\n\t\t},\n\t\tmenuOptions(): MenuOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: 'booking-resource-creation-wizard-label-dropdown-menu',\n\t\t\t\tbindElement: this.$refs.container,\n\t\t\t\toffsetTop: 8,\n\t\t\t\titems: this.items.map(({ name, value }) => ({\n\t\t\t\t\ttitle: name,\n\t\t\t\t\tonClick: () => this.$emit('update:value', value),\n\t\t\t\t})),\n\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tthis.isMenuShown = true;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"booking-resource-creation-wizard-label-dropdown\" ref=\"container\" @click=\"handleClick\">\n\t\t\t<span>{{ text }}</span>\n\t\t\t<BIcon :name=\"Actions.CHEVRON_DOWN\"/>\n\t\t</div>\n\t\t<BMenu v-if=\"isMenuShown\" :options=\"menuOptions\" @close=\"isMenuShown = false\"/>\n\t`,\n};\n","import { Event } from 'main.core';\nimport { MenuManager, Menu } from 'main.popup';\nimport { BIcon as Icon } from 'ui.icon-set.api.vue';\nimport { Model, NotificationChannel } from 'booking.const';\nimport { ButtonSize, ButtonColor, ButtonIcon } from 'booking.component.button';\nimport { mapGetters } from 'ui.vue3.vuex';\n\nimport './channel-menu.css';\n\nexport const ChannelMenu = {\n\tname: 'ChannelMenu',\n\temits: ['popupShown', 'popupClosed', 'updateChannel'],\n\tprops: {\n\t\tcurrentChannel: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\tdata(): { menuPopup: Menu | null }\n\t{\n\t\treturn {\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tButtonIcon,\n\t\t\tmenuPopup: null,\n\t\t\tchannel: this.loc('BRCW_NOTIFICATION_CARD_MESSAGE_SELECT_WHA'),\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tisChannelChoiceAvailable: `${Model.ResourceCreationWizard}/isChannelChoiceAvailable`,\n\t\t}),\n\t\tpopupId(): string\n\t\t{\n\t\t\treturn 'booking-choose-channel-menu';\n\t\t},\n\t\tnotificationChannelOptions(): { label: string, value: Messenger }[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: this.loc('BRCW_NOTIFICATION_CARD_MESSAGE_SELECT_WHA'),\n\t\t\t\t\tvalue: NotificationChannel.WhatsApp,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: this.loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_SELECT_SMS_MSGVER_1'),\n\t\t\t\t\tvalue: NotificationChannel.Sms,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tthis.channel = this.notificationChannelOptions\n\t\t\t.find(({ value }) => value === this.currentChannel)?.label\n\t\t\t|| this.loc('BRCW_NOTIFICATION_CARD_MESSAGE_SELECT_WHA');\n\t},\n\tunmounted(): void\n\t{\n\t\tif (this.menuPopup)\n\t\t{\n\t\t\tthis.destroy();\n\t\t}\n\t},\n\tmethods: {\n\t\topenMenu(): void\n\t\t{\n\t\t\tif (this.menuPopup?.popupWindow?.isShown())\n\t\t\t{\n\t\t\t\tthis.destroy();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst menuButton = this.$refs['menu-button'];\n\t\t\tthis.menuPopup = MenuManager.create(\n\t\t\t\tthis.popupId,\n\t\t\t\tmenuButton,\n\t\t\t\tthis.getMenuItems(),\n\t\t\t\t{\n\t\t\t\t\tclassName: 'booking-choose-channel-menu',\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\toffsetLeft: menuButton.offsetWidth - menuButton.offsetWidth / 2,\n\t\t\t\t\tangle: true,\n\t\t\t\t\tcacheable: true,\n\t\t\t\t\ttargetContainer: document.querySelector('div.resource-creation-wizard__wrapper'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonClose: () => this.destroy(),\n\t\t\t\t\t\tonDestroy: () => this.destroy(),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t\tthis.menuPopup.show();\n\t\t\tthis.bindScrollEvent();\n\t\t\tthis.$emit('popupShown');\n\t\t},\n\t\tgetMenuItems(): Array\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\ttext: this.loc('BRCW_NOTIFICATION_CARD_MESSAGE_SELECT_WHA'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.channel = this.loc('BRCW_NOTIFICATION_CARD_MESSAGE_SELECT_WHA');\n\t\t\t\t\t\tthis.$emit('updateChannel', NotificationChannel.WhatsApp);\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: this.loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_SELECT_SMS_MSGVER_1'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.channel = this.loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_SELECT_SMS_MSGVER_1');\n\t\t\t\t\t\tthis.$emit('updateChannel', NotificationChannel.Sms);\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\tdestroy(): void\n\t\t{\n\t\t\tMenuManager.destroy(this.popupId);\n\t\t\tthis.unbindScrollEvent();\n\t\t\tthis.$emit('popupClosed');\n\t\t},\n\t\tbindScrollEvent(): void\n\t\t{\n\t\t\tEvent.bind(document, 'scroll', this.adjustPosition, { capture: true });\n\t\t},\n\t\tunbindScrollEvent(): void\n\t\t{\n\t\t\tEvent.unbind(document, 'scroll', this.adjustPosition, { capture: true });\n\t\t},\n\t\tadjustPosition(): void\n\t\t{\n\t\t\tthis.menuPopup?.popupWindow?.adjustPosition();\n\t\t},\n\t},\n\tcomponents: {\n\t\tIcon,\n\t},\n\ttemplate: `\n\t\t<span\n\t\t\tclass=\"booking-resource-creation-wizard-channel-menu-button\"\n\t\t\t:class=\"{'--disabled': !isChannelChoiceAvailable}\"\n\t\t\tref=\"menu-button\"\n\t\t\t@click=\"isChannelChoiceAvailable && openMenu()\"\n\t\t>\n\t\t\t{{ channel }}\n\t\t</span>\n\t`,\n};\n","import { Event, Text } from 'main.core';\nimport { DateTimeFormat } from 'main.date';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\n\nimport { Model, NotificationChannel } from 'booking.const';\nimport { Popup } from 'booking.component.popup';\nimport { ButtonSize, ButtonColor } from 'booking.component.button';\nimport type { NotificationsTemplateModel } from 'booking.model.notifications';\n\nimport { ChannelMenu } from '../channel-menu/channel-menu';\n\nimport './choose-template-popup.css';\n\nexport const ChooseTemplatePopup = {\n\tname: 'ResourceNotificationChooseTemplatePopup',\n\temits: ['close', 'templateTypeSelected'],\n\tprops: {\n\t\tbindElement: {\n\t\t\ttype: HTMLElement,\n\t\t\trequired: true,\n\t\t},\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcurrentChannel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcurrentTemplateType: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tbuttonSize: {\n\t\t\ttype: String,\n\t\t\tdefault: ButtonSize.EXTRA_SMALL,\n\t\t},\n\t\tbuttonColors: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => ({\n\t\t\t\tselected: ButtonColor.BASE_LIGHT,\n\t\t\t\tdefault: ButtonColor.PRIMARY,\n\t\t\t}),\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tIconSet,\n\t\t\tmessenger: NotificationChannel.WhatsApp,\n\t\t\tselectedTemplateType: this.currentTemplateType,\n\t\t};\n\t},\n\tcomponents: {\n\t\tPopup,\n\t\tChannelMenu,\n\t\tIcon,\n\t},\n\tbeforeMount(): void\n\t{\n\t\tthis.messenger = this.currentChannel;\n\t},\n\tmounted(): void\n\t{\n\t\tthis.adjustPosition();\n\t\tEvent.bind(document, 'scroll', this.adjustPosition, { capture: true });\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tEvent.unbind(document, 'scroll', this.adjustPosition, { capture: true });\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\ttemplateTypes: `${Model.Dictionary}/getNotificationTemplates`,\n\t\t}),\n\t\tpopupId(): string\n\t\t{\n\t\t\treturn `booking-resource-wizard-choose-template-popup-${Text.getRandom(4)}`;\n\t\t},\n\t\tconfig(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tclassName: 'booking-resource-wizard-choose-template-popup',\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceBindPosition: true,\n\t\t\t\t\tforceTop: true,\n\t\t\t\t},\n\t\t\t\twidth: 350,\n\t\t\t\toffsetLeft: (this.bindElement.childNodes[0]?.offsetWidth ?? 146) + 10,\n\t\t\t\toffsetTop: -149,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tangle: {\n\t\t\t\t\toffset: 120,\n\t\t\t\t\tposition: 'left',\n\t\t\t\t},\n\t\t\t\tangleBorderRadius: '4px 0',\n\t\t\t\tpadding: 15,\n\t\t\t\ttargetContainer: document.querySelector('div.resource-creation-wizard__wrapper'),\n\t\t\t};\n\t\t},\n\t\tgetFormattedTime(): string\n\t\t{\n\t\t\treturn DateTimeFormat.format(DateTimeFormat.getFormat('SHORT_TIME_FORMAT'), Date.now() / 1000);\n\t\t},\n\t},\n\tmethods: {\n\t\tgetMessageTemplate(messenger: string, templateType: string): string\n\t\t{\n\t\t\tconst templateModel = this.model.templates.find((template: NotificationsTemplateModel): boolean => {\n\t\t\t\treturn template.type === templateType;\n\t\t\t});\n\n\t\t\tif (!templateModel)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tswitch (messenger)\n\t\t\t{\n\t\t\t\tcase NotificationChannel.WhatsApp:\n\t\t\t\t\treturn templateModel.text;\n\t\t\t\tcase NotificationChannel.Sms:\n\t\t\t\t\treturn templateModel.textSms;\n\t\t\t\tdefault:\n\t\t\t\t\treturn '';\n\t\t\t}\n\t\t},\n\t\thandleChannelChange(selectedChannel): void\n\t\t{\n\t\t\tthis.messenger = selectedChannel;\n\t\t},\n\t\tchooseType(selectedType): void\n\t\t{\n\t\t\tthis.selectedTemplateType = selectedType;\n\t\t\tthis.$emit('templateTypeSelected', this.selectedTemplateType);\n\t\t},\n\t\tadjustPosition(): void\n\t\t{\n\t\t\tthis.$refs.popup.adjustPosition({\n\t\t\t\tforceBindPosition: true,\n\t\t\t\tforceTop: true,\n\t\t\t});\n\t\t},\n\t\tgetButtonText(templateType): string\n\t\t{\n\t\t\treturn (this.selectedTemplateType === templateType)\n\t\t\t\t? this.loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_BTN_SELECTED')\n\t\t\t\t: this.loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_BTN_SELECT_TYPE');\n\t\t},\n\t\tgetButtonColor(templateType: string): string\n\t\t{\n\t\t\treturn (this.selectedTemplateType === templateType)\n\t\t\t\t? this.buttonColors.selected\n\t\t\t\t: this.buttonColors.default;\n\t\t},\n\t\tgetTemplateTitle(templateType: string): string\n\t\t{\n\t\t\tconst typeDictionary = Object.values(this.templateTypes)\n\t\t\t\t.find((templateDictionary: { name: string, value: string }): boolean => {\n\t\t\t\t\treturn templateDictionary.value === templateType;\n\t\t\t\t});\n\n\t\t\treturn (typeDictionary)\n\t\t\t\t? typeDictionary.name\n\t\t\t\t: '';\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Popup\n\t\t\tv-slot=\"{freeze, unfreeze}\"\n\t\t\t:id=\"popupId\"\n\t\t\t:config=\"config\"\n\t\t\tref=\"popup\"\n\t\t\t@close=\"$emit('close')\"\n\t\t>\n\t\t\t<div class=\"booking-resource-wizard-choose-template-popup\">\n\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-header\">\n\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-header-title\">\n\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_HEADER_TITLE') }}\n\t\t\t\t\t\t<ChannelMenu\n\t\t\t\t\t\t\t:current-channel=\"messenger\"\n\t\t\t\t\t\t\t@popupShown=\"freeze\"\n\t\t\t\t\t\t\t@popupClosed=\"unfreeze\"\n\t\t\t\t\t\t\t@updateChannel=\"handleChannelChange\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t:class=\"['--close-btn']\"\n\t\t\t\t\t\t\t:name=\"IconSet.CROSS_25\"\n\t\t\t\t\t\t\t:color=\"'var(--ui-color-palette-gray-20)'\"\n\t\t\t\t\t\t\t@click=\"$emit('close')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-header-close-btn\"></div>\n\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-header-line\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-container\">\n\t\t\t\t\t<div v-for=\"template in this.model.templates\" :key=\"template.type\"\n\t\t\t\t\t\t class=\"booking-resource-wizard-choose-template-popup-content\">\n\t\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-content-desc\">\n\t\t\t\t\t\t\t{{ getTemplateTitle(template.type) }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-content-msg-example\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t:class=\"['booking-resource-wizard-choose-template-popup-content-msg-example-body', messenger]\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t:class=\"['booking-resource-wizard-choose-template-popup-content-msg-example-body-text', messenger]\">\n\t\t\t\t\t\t\t\t\t<div v-html=\"getMessageTemplate(messenger, template.type)\"></div>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t:class=\"['booking-resource-wizard-choose-template-popup-content-msg-example-body-text-time', messenger]\">\n\t\t\t\t\t\t\t\t\t\t{{ getFormattedTime }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t:class=\"['booking-resource-wizard-choose-template-popup-content-msg-example-body-text-tail', messenger]\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-content-msg-example-actions\">\n\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t:name=\"IconSet.CIRCLE_CHECK\"\n\t\t\t\t\t\t\t\t\t:color=\"'var(--ui-color-palette-green-55)'\"\n\t\t\t\t\t\t\t\t\t:size=\"24\"\n\t\t\t\t\t\t\t\t\tv-if=\"selectedTemplateType === template.type\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t:class=\"['ui-btn ui-btn-round', buttonSize, getButtonColor(template.type), {'--selected': selectedTemplateType === template.type}]\"\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t@click=\"chooseType(template.type)\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ getButtonText(template.type) }}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n","import './template-empty.css';\n\nexport const TemplateEmpty = {\n\ttemplate: `\n\t\t<div class=\"booking-resource-creation-wizard-message-template-empty\">\n\t\t\t<div class=\"booking-resource-creation-wizard-message-template-empty-icon\"></div>\n\t\t\t<div class=\"booking-resource-creation-wizard-message-template-empty-text\">\n\t\t\t\t{{ loc('BRCW_MESSAGE_TEMPLATE_SOON_TEXT') }}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","export const ResourceNotificationCheckBoxRow = {\n\tname: 'ResourceNotificationCheckBoxRow',\n\temits: ['update:checked'],\n\tprops: {\n\t\tchecked: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\ttemplate: `\n\t\t<label class=\"resource-creation-wizard__form-notification-text-row\">\n\t\t\t<span class=\"resource-creation-wizard__form-notification-text-row-checkbox\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t:disabled=\"disabled\"\n\t\t\t\t\t:checked=\"checked\"\n\t\t\t\t\t@input=\"$emit('update:checked', $event.target.checked)\"\n\t\t\t\t/>\n\t\t\t</span>\n\t\t\t<slot/>\n\t\t</label>\n\t`,\n};\n","import { Model } from 'booking.const';\nimport { ResourceNotificationCheckBoxRow } from '../resource-notification-checkbox-row';\n\nexport const CheckedForAll = {\n\tprops: {\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tisCheckedForAll: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.$store.getters[`${Model.ResourceCreationWizard}/isCheckedForAll`](this.type);\n\t\t\t},\n\t\t\tset(isChecked: boolean): void\n\t\t\t{\n\t\t\t\tthis.$store.dispatch(`${Model.ResourceCreationWizard}/setCheckedForAll`, {\n\t\t\t\t\ttype: this.type,\n\t\t\t\t\tisChecked,\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\t},\n\tcomponents: {\n\t\tResourceNotificationCheckBoxRow,\n\t},\n\ttemplate: `\n\t\t<ResourceNotificationCheckBoxRow\n\t\t\tv-model:checked=\"isCheckedForAll\"\n\t\t\t:disabled=\"disabled\"\n\t\t>\n\t\t\t<div class=\"resource-creation-wizard__form-notification-text\">\n\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_HELPER_TEXT_APPLY_FOR_ALL') }}\n\t\t\t</div>\n\t\t</ResourceNotificationCheckBoxRow>\n\t`,\n};\n","export const ResourceNotificationTextRow = {\n\tname: 'ResourceNotificationTextRow',\n\tprops: {\n\t\ticon: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard__form-notification-text-row\">\n\t\t\t<div :class=\"[icon, 'ui-icon-set', 'resource-creation-wizard__form-notification-text-row-icon']\"></div>\n\t\t\t<div class=\"resource-creation-wizard__form-notification-text\">\n\t\t\t\t<slot/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { HelpDeskLoc } from 'booking.component.help-desk-loc';\nimport { ResourceNotificationTextRow } from '../resource-notification-text-row';\n\nexport const Description = {\n\tprops: {\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thelpDesk: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tHelpDeskLoc,\n\t\tResourceNotificationTextRow,\n\t},\n\ttemplate: `\n\t\t<ResourceNotificationTextRow icon=\"--info-1\">\n\t\t\t<HelpDeskLoc \n\t\t\t\t:message=\"description\"\n\t\t\t\t:code=\"helpDesk.code\"\n\t\t\t\t:anchor=\"helpDesk.anchorCode\"\n\t\t\t/>\n\t\t</ResourceNotificationTextRow>\n\t`,\n};\n","import { RichLoc } from 'ui.vue3.components.rich-loc';\n\n// @vue/component\nexport const MessageTemplate = {\n\tcomponents: {\n\t\tRichLoc,\n\t},\n\tprops: {\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tpreparedTemplate(): string\n\t\t{\n\t\t\treturn this.text\n\t\t\t\t.replaceAll('\\n', '[br/]')\n\t\t\t\t.replaceAll(/#(.+?)#/g, '[accent][[bold]$1[/bold]][/accent]')\n\t\t\t;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<RichLoc\n\t\t\tclass=\"resource-creation-wizard__form-notification-info-template\"\n\t\t\t:placeholder=\"['[accent]', '[br/]']\"\n\t\t\t:text=\"preparedTemplate\"\n\t\t>\n\t\t\t<template #accent=\"{ text: accentText }\">\n\t\t\t\t<RichLoc tag=\"span\" class=\"--accent\" placeholder=\"[bold]\" :text=\"accentText\">\n\t\t\t\t\t<template #bold=\"{ text: boldText }\">\n\t\t\t\t\t\t<span class=\"--bold\">{{ boldText }}</span>\n\t\t\t\t\t</template>\n\t\t\t\t</RichLoc>\n\t\t\t</template>\n\t\t\t<template #br><br/></template>\n\t\t</RichLoc>\n\t`,\n};\n","import { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { Main } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.main';\n\nimport { CyclePopup } from 'booking.component.cycle-popup';\nimport { Description } from './description';\n\nexport const ManagerNotification = {\n\tcomponents: {\n\t\tBIcon,\n\t\tDescription,\n\t\tCyclePopup,\n\t\tRichLoc,\n\t},\n\tprops: {\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thelpDesk: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tscrollToCard: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tMain,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisPopupShown: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tnotificationText(): string\n\t\t{\n\t\t\treturn this.text.replaceAll('\\n', '[br/]');\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"booking-resource-creation-wizard-notification --manager\">\n\t\t\t<div class=\"booking-resource-creation-wizard-notification-main\">\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info-title-row\">\n\t\t\t\t\t<BIcon :name=\"Main.BELL_1\"/>\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info-title\">\n\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_MANAGER') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"booking-resource-creation-wizard-manager-see\" @click=\"isPopupShown = true\">\n\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_MANAGER_SEE') }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info\">\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info-text-row\">\n\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_MANAGER_TEXT') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<RichLoc\n\t\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-info-template\"\n\t\t\t\t\t\t:placeholder=\"'[br/]'\"\n\t\t\t\t\t\t:text=\"notificationText\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<template #br><br/></template>\n\t\t\t\t\t</RichLoc>\n\t\t\t\t</div>\n\t\t\t\t<Description :description=\"description\" :helpDesk=\"helpDesk\"/>\n\t\t\t\t<slot/>\n\t\t\t</div>\n\t\t\t<CyclePopup v-if=\"isPopupShown\" :scrollToCard=\"scrollToCard\" @close=\"isPopupShown = false\"/>\n\t\t</div>\n\t`,\n};\n","import { Dom, Text } from 'main.core';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { hint } from 'ui.vue3.directives.hint';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { Actions, CRM } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.actions';\nimport 'ui.icon-set.crm';\nimport 'ui.hint';\n\nimport { Button as UiButton, ButtonSize, ButtonColor } from 'booking.component.button';\nimport { Switcher } from 'booking.component.switcher';\nimport { Model, NotificationChannel, NotificationFieldsMap } from 'booking.const';\nimport { resourceCreationWizardService } from 'booking.provider.service.resource-creation-wizard-service';\nimport type { NotificationsModel, NotificationsTemplateModel } from 'booking.model.notifications';\n\nimport { ChannelMenu } from '../channel-menu/channel-menu';\nimport { ChooseTemplatePopup } from '../choose-template-popup/choose-template-popup';\nimport { TemplateEmpty } from '../template-empty/template-empty';\nimport { CheckedForAll } from './components/checked-for-all';\nimport { Description } from './components/description';\nimport { MessageTemplate } from './components/message-tempalte';\nimport { ManagerNotification } from './components/manager-notification';\n\n// eslint-disable-next-line no-promise-executor-return\nconst sleep = (timeout: number) => new Promise((resolve) => setTimeout(resolve, timeout));\n\n// @vue/component\nexport const ResourceNotification = {\n\tname: 'ResourceNotification',\n\tcomponents: {\n\t\tSwitcher,\n\t\tBIcon,\n\t\tUiButton,\n\t\tDescription,\n\t\tChannelMenu,\n\t\tChooseTemplatePopup,\n\t\tTemplateEmpty,\n\t\tCheckedForAll,\n\t\tMessageTemplate,\n\t\tManagerNotification,\n\t},\n\tdirectives: { hint },\n\tprops: {\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thelpDesk: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tchecked: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tmanagerDescription: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tscrollToCard: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\temits: ['update:checked'],\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tActions,\n\t\t\tCRM,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tmessenger: NotificationChannel.WhatsApp,\n\t\t\tshowTemplatePopup: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tmodel(): NotificationsModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Notifications}/getByType`](this.type);\n\t\t},\n\t\ttemplate(): NotificationsTemplateModel | undefined\n\t\t{\n\t\t\tconst templateName = this.resource[this.templateTypeField];\n\n\t\t\treturn this.model.templates.find((template) => template.type === templateName);\n\t\t},\n\t\tmessageTemplate(): string\n\t\t{\n\t\t\treturn {\n\t\t\t\t[NotificationChannel.WhatsApp]: this.template?.text ?? '',\n\t\t\t\t[NotificationChannel.Sms]: this.template?.textSms ?? '',\n\t\t\t}[this.messenger] ?? '';\n\t\t},\n\t\thasTemplate(): boolean\n\t\t{\n\t\t\treturn this.isCurrentSenderAvailable && this.messageTemplate;\n\t\t},\n\t\tdisableSwitcher(): boolean\n\t\t{\n\t\t\treturn this.disabled || !this.isCurrentSenderAvailable || !this.template;\n\t\t},\n\t\ttemplateTypeField(): string\n\t\t{\n\t\t\treturn NotificationFieldsMap.TemplateType[this.type];\n\t\t},\n\t\tordinal(): string\n\t\t{\n\t\t\treturn NotificationFieldsMap.Ordinal[this.type];\n\t\t},\n\t\tsoonHint(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('BRCW_BOOKING_SOON_HINT'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\toffsetLeft: 60,\n\t\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tthis.hintManager = BX.UI.Hint.createInstance({\n\t\t\tid: `brwc-notification-hint-${Text.getRandom(5)}`,\n\t\t\tpopupParameters: {\n\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t},\n\t\t});\n\t},\n\tmounted(): void\n\t{\n\t\tthis.hintManager.init(this.$el);\n\n\t\tvoid this.animateHeight(false);\n\t},\n\tupdated(): void\n\t{\n\t\tthis.hintManager.init(this.$el);\n\n\t\tvoid this.animateHeight(true);\n\t},\n\tmethods: {\n\t\thandleChannelChange(selectedChannel: string): void\n\t\t{\n\t\t\tthis.messenger = selectedChannel;\n\t\t},\n\t\thandleTemplateTypeSelected(selectedType: string): void\n\t\t{\n\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { [this.templateTypeField]: selectedType });\n\t\t},\n\t\tgetChooseTemplateButton(): HTMLElement\n\t\t{\n\t\t\treturn this.$refs.chooseTemplateBtn || null;\n\t\t},\n\t\texpand(): void\n\t\t{\n\t\t\tvoid resourceCreationWizardService.updateNotificationExpanded(this.type, !this.model.isExpanded);\n\t\t},\n\t\tasync animateHeight(withAnimation: boolean): Promise<void>\n\t\t{\n\t\t\tDom.style(this.$el, 'transition', null);\n\t\t\tif (withAnimation)\n\t\t\t{\n\t\t\t\tawait sleep(10);\n\t\t\t}\n\n\t\t\tconst prevHeight = this.$el.offsetHeight;\n\t\t\tDom.style(this.$el, 'height', null);\n\t\t\tif (!this.model.isExpanded)\n\t\t\t{\n\t\t\t\tDom.style(this.$refs.main, 'display', 'none');\n\t\t\t\tDom.style(this.$refs.manager?.$el, 'display', 'none');\n\t\t\t}\n\n\t\t\tconst height = this.$el.offsetHeight;\n\t\t\tDom.style(this.$refs.main, 'display', null);\n\t\t\tDom.style(this.$refs.manager?.$el, 'display', null);\n\t\t\tDom.style(this.$el, 'height', `${prevHeight}px`);\n\n\t\t\tif (withAnimation)\n\t\t\t{\n\t\t\t\tDom.style(this.$el, 'transition', 'height 0.2s');\n\t\t\t\tawait sleep(10);\n\t\t\t\tDom.style(this.$el, 'height', `${height}px`);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.style(this.$el, 'height', `${height}px`);\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"booking-resource-creation-wizard-notification-container\" :class=\"{'--disabled': !checked}\">\n\t\t\t<div class=\"booking-resource-creation-wizard-notification\">\n\t\t\t\t<div class=\"booking-resource-creation-wizard-notification-header\" @click=\"expand\">\n\t\t\t\t\t<div class=\"booking-resource-creation-wizard-notification-number\">{{ ordinal }}</div>\n\t\t\t\t\t<div class=\"booking-resource-creation-wizard-notification-title\">{{ title }}</div>\n\t\t\t\t\t<BIcon :name=\"model.isExpanded ? Actions.CHEVRON_UP : Actions.CHEVRON_DOWN\"/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-resource-creation-wizard-notification-main\" ref=\"main\">\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info-title-row --main\">\n\t\t\t\t\t\t<BIcon :name=\"CRM.CHAT_LINE\"/>\n\t\t\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info-title\">\n\t\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_MESSAGE') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Switcher\n\t\t\t\t\t\t\tv-hint=\"disableSwitcher && soonHint\"\n\t\t\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-info-switcher\"\n\t\t\t\t\t\t\t:data-id=\"'brcw-resource-notification-info-switcher-' + type\"\n\t\t\t\t\t\t\t:model-value=\"checked\"\n\t\t\t\t\t\t\t:disabled=\"disableSwitcher\"\n\t\t\t\t\t\t\t@update:model-value=\"$emit('update:checked', $event)\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info --message\">\n\t\t\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info-text-row\">\n\t\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_MESSAGE_TEXT') }}\n\t\t\t\t\t\t\t<ChannelMenu\n\t\t\t\t\t\t\t\t:current-channel=\"messenger\"\n\t\t\t\t\t\t\t\t@updateChannel=\"handleChannelChange\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<template v-if=\"hasTemplate\">\n\t\t\t\t\t\t\t<MessageTemplate :text=\"messageTemplate\"/>\n\t\t\t\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info-template-choose-buttons\">\n\t\t\t\t\t\t\t\t<div class=\"booking-resource-creation-wizard-choose-template-button\" ref=\"chooseTemplateBtn\">\n\t\t\t\t\t\t\t\t\t<UiButton\n\t\t\t\t\t\t\t\t\t\t:disabled=\"!checked\"\n\t\t\t\t\t\t\t\t\t\t:text=\"loc('BRCW_NOTIFICATION_CARD_CHOOSE_TEMPLATE_TYPE')\"\n\t\t\t\t\t\t\t\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t\t\t\t\t:color=\"ButtonColor.LIGHT_BORDER\"\n\t\t\t\t\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\t\t\t\t\t@click=\"showTemplatePopup = true\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<TemplateEmpty v-else/>\n\t\t\t\t\t\t<ChooseTemplatePopup\n\t\t\t\t\t\t\tv-if=\"showTemplatePopup\"\n\t\t\t\t\t\t\t:bindElement=\"$refs.chooseTemplateBtn\"\n\t\t\t\t\t\t\t:model=\"model\"\n\t\t\t\t\t\t\t:current-channel=\"messenger\"\n\t\t\t\t\t\t\t:currentTemplateType=\"resource[templateTypeField]\"\n\t\t\t\t\t\t\t@templateTypeSelected=\"handleTemplateTypeSelected\"\n\t\t\t\t\t\t\t@close=\"showTemplatePopup = false\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Description :description=\"description\" :helpDesk=\"helpDesk\"/>\n\t\t\t\t\t<slot name=\"client\"/>\n\t\t\t\t\t<CheckedForAll :type=\"type\" :disabled=\"!checked\"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ManagerNotification\n\t\t\t\tv-if=\"$slots.manager\"\n\t\t\t\t:description=\"managerDescription\"\n\t\t\t\t:text=\"model.managerNotification\"\n\t\t\t\t:helpDesk=\"helpDesk\"\n\t\t\t\t:scrollToCard=\"scrollToCard\"\n\t\t\t\tref=\"manager\"\n\t\t\t>\n\t\t\t\t<slot name=\"manager\"/>\n\t\t\t</ManagerNotification>\n\t\t</div>\n\t`,\n};\n","import { Type } from 'main.core';\nimport { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport 'ui.icon-set.main';\n\nimport { Model, AhaMoment, HelpDesk } from 'booking.const';\nimport { ahaMoments } from 'booking.lib.aha-moments';\n\nimport { LabelDropdown } from '../label/label';\nimport { ResourceNotification } from '../layout/resource-notification';\nimport { ResourceNotificationTextRow } from '../layout/resource-notification-text-row';\n\n// @vue/component\nexport const BaseInfo = {\n\tname: 'ResourceNotificationCardBaseInfo',\n\tcomponents: {\n\t\tResourceNotification,\n\t\tResourceNotificationTextRow,\n\t\tLabelDropdown,\n\t\tRichLoc,\n\t},\n\tprops: {\n\t\t/** @type {NotificationsModel} */\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\t/** @type {ResourceModel} */\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tisInfoNotificationOn: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.isCurrentSenderAvailable && this.resource.isInfoNotificationOn;\n\t\t\t},\n\t\t\tset(isInfoNotificationOn: boolean): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { isInfoNotificationOn });\n\t\t\t},\n\t\t},\n\t\tinfoNotificationDelay: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.resource.infoNotificationDelay;\n\t\t\t},\n\t\t\tset(infoNotificationDelay: number): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { infoNotificationDelay });\n\t\t\t\tthis.$refs.card.$forceUpdate();\n\t\t\t},\n\t\t},\n\t\tlocInfoTimeSend(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_BASE_INFO_HELPER_TEXT_SECOND')\n\t\t\t\t.replace('#time#', '[delay/]')\n\t\t\t;\n\t\t},\n\t\thelpDesk(): Object\n\t\t{\n\t\t\treturn HelpDesk.ResourceNotificationInfo;\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tif (ahaMoments.shouldShow(AhaMoment.MessageTemplate))\n\t\t{\n\t\t\tsetTimeout(() => this.showAhaMoment(), 500);\n\t\t}\n\t},\n\tmethods: {\n\t\tasync showAhaMoment(): Promise<void>\n\t\t{\n\t\t\tconst target = this.$refs.card.getChooseTemplateButton();\n\t\t\tif (Type.isNull(target))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait ahaMoments.showGuide({\n\t\t\t\tid: 'booking-message-template',\n\t\t\t\ttitle: this.loc('BOOKING_AHA_MESSAGE_TEMPLATE_TITLE'),\n\t\t\t\ttext: this.loc('BOOKING_AHA_MESSAGE_TEMPLATE_TEXT'),\n\t\t\t\tarticle: HelpDesk.AhaMessageTemplate,\n\t\t\t\ttarget: this.$refs.card.getChooseTemplateButton(),\n\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t});\n\n\t\t\tahaMoments.setShown(AhaMoment.MessageTemplate);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ResourceNotification\n\t\t\tv-model:checked=\"isInfoNotificationOn\"\n\t\t\t:type=\"model.type\"\n\t\t\t:title=\"loc('BRCW_NOTIFICATION_CARD_BASE_INFO_TITLE_MSGVER_1')\"\n\t\t\t:description=\"loc('BRCW_NOTIFICATION_CARD_BASE_INFO_HELPER_TEXT_FIRST_MSGVER_2')\"\n\t\t\t:helpDesk=\"helpDesk\"\n\t\t\tref=\"card\"\n\t\t>\n\t\t\t<template #client>\n\t\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t\t<RichLoc :text=\"locInfoTimeSend\" :placeholder=\"'[delay/]'\">\n\t\t\t\t\t\t<template #delay>\n\t\t\t\t\t\t\t<LabelDropdown v-model:value=\"infoNotificationDelay\" :items=\"model.settings.notification.delayValues\"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</RichLoc>\n\t\t\t\t</ResourceNotificationTextRow>\n\t\t\t</template>\n\t\t</ResourceNotification>\n\t`,\n};\n","import { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport 'ui.icon-set.main';\n\nimport { HelpDesk, Model } from 'booking.const';\nimport { CardId } from 'booking.component.cycle-popup';\n\nimport { LabelDropdown } from '../label/label';\nimport { ResourceNotification } from '../layout/resource-notification';\nimport { ResourceNotificationTextRow } from '../layout/resource-notification-text-row';\n\n// @vue/component\nexport const Confirmation = {\n\tname: 'ResourceNotificationCardConfirmation',\n\tcomponents: {\n\t\tResourceNotification,\n\t\tResourceNotificationTextRow,\n\t\tLabelDropdown,\n\t\tRichLoc,\n\t},\n\tprops: {\n\t\t/** @type {NotificationsModel} */\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tHelpDesk,\n\t\t\tCardId,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\t/** @type {ResourceModel} */\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tisConfirmationNotificationOn: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.isCurrentSenderAvailable && this.resource.isConfirmationNotificationOn;\n\t\t\t},\n\t\t\tset(isConfirmationNotificationOn: boolean): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { isConfirmationNotificationOn });\n\t\t\t},\n\t\t},\n\t\tconfirmationNotificationDelay: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.resource.confirmationNotificationDelay;\n\t\t\t},\n\t\t\tset(confirmationNotificationDelay: number): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { confirmationNotificationDelay });\n\t\t\t\tthis.$refs.card.$forceUpdate();\n\t\t\t},\n\t\t},\n\t\tconfirmationNotificationRepetitions: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.resource.confirmationNotificationRepetitions;\n\t\t\t},\n\t\t\tset(confirmationNotificationRepetitions: number): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { confirmationNotificationRepetitions });\n\t\t\t\tthis.$refs.card.$forceUpdate();\n\t\t\t},\n\t\t},\n\t\tconfirmationNotificationRepetitionsInterval: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.resource.confirmationNotificationRepetitionsInterval;\n\t\t\t},\n\t\t\tset(confirmationNotificationRepetitionsInterval: number): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { confirmationNotificationRepetitionsInterval });\n\t\t\t\tthis.$refs.card.$forceUpdate();\n\t\t\t},\n\t\t},\n\t\tconfirmationCounterDelay: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.resource.confirmationCounterDelay;\n\t\t\t},\n\t\t\tset(confirmationCounterDelay: number): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { confirmationCounterDelay });\n\t\t\t\tthis.$refs.card.$forceUpdate();\n\t\t\t},\n\t\t},\n\t\tlocSendMessageBefore(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_CONFIRMATION_HELPER_TEXT_SECOND')\n\t\t\t\t.replace('#days_before#', '[delay/]')\n\t\t\t;\n\t\t},\n\t\tlocRetryMessage(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_CONFIRMATION_HELPER_TEXT_THIRD')\n\t\t\t\t.replace('#times#', '[repeat/]')\n\t\t\t\t.replace('#time_delay#', '[repeatInterval/]')\n\t\t\t;\n\t\t},\n\t\tlocManagerRemindTime(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_CONFIRMATION_MANAGER_REMIND_TIME')\n\t\t\t\t.replace('#time#', '[delay/]')\n\t\t\t;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ResourceNotification\n\t\t\tv-model:checked=\"isConfirmationNotificationOn\"\n\t\t\t:type=\"model.type\"\n\t\t\t:title=\"loc('BRCW_NOTIFICATION_CARD_CONFIRMATION_TITLE_MSGVER_2')\"\n\t\t\t:description=\"loc('BRCW_NOTIFICATION_CARD_CONFIRMATION_HELPER_TEXT_FIRST_MSGVER_2')\"\n\t\t\t:helpDesk=\"HelpDesk.ResourceNotificationConfirmation\"\n\t\t\t:managerDescription=\"loc('BRCW_NOTIFICATION_CARD_CONFIRMATION_MANAGER_HELPER')\"\n\t\t\t:scrollToCard=\"CardId.Unconfirmed\"\n\t\t\tref=\"card\"\n\t\t>\n\t\t\t<template #client>\n\t\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t\t<RichLoc :text=\"locSendMessageBefore\" :placeholder=\"'[delay/]'\">\n\t\t\t\t\t\t<template #delay>\n\t\t\t\t\t\t\t<LabelDropdown v-model:value=\"confirmationNotificationDelay\" :items=\"model.settings.notification.delayValues\"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</RichLoc>\n\t\t\t\t</ResourceNotificationTextRow>\n\t\t\t\t<ResourceNotificationTextRow icon=\"--undo-1\">\n\t\t\t\t\t<RichLoc :text=\"locRetryMessage\" :placeholder=\"['[repeat/]', '[repeatInterval/]']\">\n\t\t\t\t\t\t<template #repeat>\n\t\t\t\t\t\t\t<LabelDropdown v-model:value=\"confirmationNotificationRepetitions\" :items=\"model.settings.notification.repeatValues\"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template #repeatInterval>\n\t\t\t\t\t\t\t<LabelDropdown v-model:value=\"confirmationNotificationRepetitionsInterval\" :items=\"model.settings.notification.repeatIntervalValues\"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</RichLoc>\n\t\t\t\t</ResourceNotificationTextRow>\n\t\t\t</template>\n\t\t\t<template #manager>\n\t\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t\t<RichLoc :text=\"locManagerRemindTime\" :placeholder=\"'[delay/]'\">\n\t\t\t\t\t\t<template #delay>\n\t\t\t\t\t\t\t<LabelDropdown v-model:value=\"confirmationCounterDelay\" :items=\"model.settings.counter.delayValues\"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</RichLoc>\n\t\t\t\t</ResourceNotificationTextRow>\n\t\t\t</template>\n\t\t</ResourceNotification>\n\t`,\n};\n","import { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport 'ui.icon-set.main';\n\nimport { HelpDesk, Model } from 'booking.const';\nimport { ResourceNotification } from '../layout/resource-notification';\nimport { ResourceNotificationTextRow } from '../layout/resource-notification-text-row';\nimport { LabelDropdown } from '../label/label';\n\n// @vue/component\nexport const Reminder = {\n\tname: 'ResourceNotificationCardReminder',\n\tcomponents: {\n\t\tResourceNotification,\n\t\tResourceNotificationTextRow,\n\t\tLabelDropdown,\n\t\tRichLoc,\n\t},\n\tprops: {\n\t\t/** @type {NotificationsModel} */\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\t/** @type {ResourceModel} */\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tisReminderNotificationOn: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.isCurrentSenderAvailable && this.resource.isReminderNotificationOn;\n\t\t\t},\n\t\t\tset(isReminderNotificationOn: boolean): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { isReminderNotificationOn });\n\t\t\t},\n\t\t},\n\t\treminderNotificationDelay: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.resource.reminderNotificationDelay;\n\t\t\t},\n\t\t\tset(reminderNotificationDelay: number): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { reminderNotificationDelay });\n\t\t\t\tthis.$refs.card.$forceUpdate();\n\t\t\t},\n\t\t},\n\t\tlocSendReminderTime(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_REMINDER_HELPER_TEXT_SECOND')\n\t\t\t\t.replace('#time#', '[delay/]')\n\t\t\t;\n\t\t},\n\t\thelpDesk(): Object\n\t\t{\n\t\t\treturn HelpDesk.ResourceNotificationReminder;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ResourceNotification\n\t\t\tv-model:checked=\"isReminderNotificationOn\"\n\t\t\t:type=\"model.type\"\n\t\t\t:title=\"loc('BRCW_NOTIFICATION_CARD_REMINDER_TITLE')\"\n\t\t\t:description=\"loc('BRCW_NOTIFICATION_CARD_REMINDER_HELPER_TEXT_FIRST_MSGVER_1')\"\n\t\t\t:helpDesk=\"helpDesk\"\n\t\t\tref=\"card\"\n\t\t>\n\t\t\t<template #client>\n\t\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t\t<RichLoc :text=\"locSendReminderTime\" :placeholder=\"'[delay/]'\">\n\t\t\t\t\t\t<template #delay>\n\t\t\t\t\t\t\t<LabelDropdown v-model:value=\"reminderNotificationDelay\" :items=\"model.settings.notification.delayValues\"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</RichLoc>\n\t\t\t\t</ResourceNotificationTextRow>\n\t\t\t</template>\n\t\t</ResourceNotification>\n\t`,\n};\n","import { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport 'ui.icon-set.main';\n\nimport { HelpDesk, Model } from 'booking.const';\nimport { LabelDropdown } from '../label/label';\nimport { ResourceNotification } from '../layout/resource-notification';\nimport { ResourceNotificationTextRow } from '../layout/resource-notification-text-row';\n\n// @vue/component\nexport const Feedback = {\n\tname: 'ResourceNotificationCardFeedback',\n\tcomponents: {\n\t\tResourceNotification,\n\t\tResourceNotificationTextRow,\n\t\tLabelDropdown,\n\t\tRichLoc,\n\t},\n\tprops: {\n\t\t/** @type {NotificationsModel} */\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tlabelValue: this.model.settings.notification.delayValues[0].value,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\t/** @type {ResourceModel} */\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tisFeedbackNotificationOn: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tset(isFeedbackNotificationOn: boolean): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { isFeedbackNotificationOn });\n\t\t\t},\n\t\t},\n\t\tlocSendFeedbackTime(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_FEEDBACK_HELPER_TEXT_SECOND')\n\t\t\t\t.replace('#time#', '[delay/]')\n\t\t\t;\n\t\t},\n\t\thelpDesk(): Object\n\t\t{\n\t\t\treturn HelpDesk.ResourceNotificationFeedback;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ResourceNotification\n\t\t\tv-model:checked=\"isFeedbackNotificationOn\"\n\t\t\t:type=\"model.type\"\n\t\t\t:title=\"loc('BRCW_NOTIFICATION_CARD_FEEDBACK_TITLE')\"\n\t\t\t:description=\"loc('BRCW_NOTIFICATION_CARD_FEEDBACK_HELPER_TEXT_FIRST_MSGVER_2')\"\n\t\t\t:helpDesk=\"helpDesk\"\n\t\t\t:disabled=\"true\"\n\t\t>\n\t\t\t<template #client>\n\t\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t\t<RichLoc :text=\"locSendFeedbackTime\" :placeholder=\"'[delay/]'\">\n\t\t\t\t\t\t<template #delay>\n\t\t\t\t\t\t\t<LabelDropdown v-model:value=\"labelValue\" :items=\"model.settings.notification.delayValues\"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</RichLoc>\n\t\t\t\t</ResourceNotificationTextRow>\n\t\t\t</template>\n\t\t</ResourceNotification>\n\t`,\n};\n","import { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport 'ui.icon-set.main';\n\nimport { HelpDesk, Model } from 'booking.const';\nimport { CardId } from 'booking.component.cycle-popup';\n\nimport { LabelDropdown } from '../label/label';\nimport { ResourceNotification } from '../layout/resource-notification';\nimport { ResourceNotificationTextRow } from '../layout/resource-notification-text-row';\n\n// @vue/component\nexport const Late = {\n\tname: 'ResourceNotificationCardLate',\n\tcomponents: {\n\t\tResourceNotification,\n\t\tResourceNotificationTextRow,\n\t\tLabelDropdown,\n\t\tRichLoc,\n\t},\n\tprops: {\n\t\t/** @type {NotificationsModel} */\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tHelpDesk,\n\t\t\tCardId,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\t/** @type {ResourceModel} */\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tisDelayedNotificationOn: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.isCurrentSenderAvailable && this.resource.isDelayedNotificationOn;\n\t\t\t},\n\t\t\tset(isDelayedNotificationOn: boolean): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { isDelayedNotificationOn });\n\t\t\t},\n\t\t},\n\t\tdelayedNotificationDelay: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.resource.delayedNotificationDelay;\n\t\t\t},\n\t\t\tset(delayedNotificationDelay: number): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { delayedNotificationDelay });\n\t\t\t\tthis.$refs.card.$forceUpdate();\n\t\t\t},\n\t\t},\n\t\tdelayedCounterDelay: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.resource.delayedCounterDelay;\n\t\t\t},\n\t\t\tset(delayedCounterDelay: number): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { delayedCounterDelay });\n\t\t\t\tthis.$refs.card.$forceUpdate();\n\t\t\t},\n\t\t},\n\t\tlocSendMessageAfter(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_LATE_HELPER_TEXT_SECOND_MSGVER_1')\n\t\t\t\t.replace('#time#', '[delay/]')\n\t\t\t;\n\t\t},\n\t\tlocNotifyManagerIn(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_LATE_MANAGER_NOTIFY_IN')\n\t\t\t\t.replace('#time#', '[delay/]')\n\t\t\t;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ResourceNotification\n\t\t\tv-model:checked=\"isDelayedNotificationOn\"\n\t\t\t:type=\"model.type\"\n\t\t\t:title=\"loc('BRCW_NOTIFICATION_CARD_LATE_TITLE_MSGVER_1')\"\n\t\t\t:description=\"loc('BRCW_NOTIFICATION_CARD_LATE_HELPER_TEXT_FIRST_MSGVER_2')\"\n\t\t\t:helpDesk=\"HelpDesk.ResourceNotificationLate\"\n\t\t\t:managerDescription=\"loc('BRCW_NOTIFICATION_CARD_LATE_MANAGER_HELPER')\"\n\t\t\t:scrollToCard=\"CardId.Late\"\n\t\t\tref=\"card\"\n\t\t>\n\t\t\t<template #client>\n\t\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t\t<RichLoc :text=\"locSendMessageAfter\" :placeholder=\"'[delay/]'\">\n\t\t\t\t\t\t<template #delay>\n\t\t\t\t\t\t\t<LabelDropdown v-model:value=\"delayedNotificationDelay\" :items=\"model.settings.notification.delayValues\"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</RichLoc>\n\t\t\t\t</ResourceNotificationTextRow>\n\t\t\t</template>\n\t\t\t<template #manager>\n\t\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t\t<RichLoc :text=\"locNotifyManagerIn\" :placeholder=\"'[delay/]'\">\n\t\t\t\t\t\t<template #delay>\n\t\t\t\t\t\t\t<LabelDropdown v-model:value=\"delayedCounterDelay\" :items=\"model.settings.counter.delayValues\"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</RichLoc>\n\t\t\t\t</ResourceNotificationTextRow>\n\t\t\t</template>\n\t\t</ResourceNotification>\n\t`,\n};\n","import { mapGetters } from 'ui.vue3.vuex';\nimport 'ui.forms';\nimport 'ui.layout-form';\nimport type { BitrixVueComponentProps } from 'ui.vue3';\n\nimport { Model } from 'booking.const';\nimport type { NotificationsModel } from 'booking.model.notifications';\n\nimport { BaseInfo } from './base-info/base-info';\nimport { Confirmation } from './confirmation/confirmation';\nimport { Reminder } from './reminder/reminder';\nimport { Feedback } from './feedback/feedback';\nimport { Late } from './late/late';\n\nimport './resource-notification-card.css';\n\n// @vue/component\nexport const ResourceNotificationCard = {\n\tname: 'ResourceNotificationCard',\n\tcomputed: {\n\t\tnotificationViews(): { view: BitrixVueComponentProps, model: NotificationsModel }[]\n\t\t{\n\t\t\treturn this.notifications.map((model: NotificationsModel) => {\n\t\t\t\treturn {\n\t\t\t\t\t[this.dictionary.Info.value]: { view: BaseInfo, model },\n\t\t\t\t\t[this.dictionary.Confirmation.value]: { view: Confirmation, model },\n\t\t\t\t\t[this.dictionary.Reminder.value]: { view: Reminder, model },\n\t\t\t\t\t[this.dictionary.Delayed.value]: { view: Late, model },\n\t\t\t\t\t[this.dictionary.Feedback.value]: { view: Feedback, model },\n\t\t\t\t}[model.type] ?? {};\n\t\t\t});\n\t\t},\n\t\t...mapGetters({\n\t\t\tnotifications: `${Model.Notifications}/get`,\n\t\t\tdictionary: `${Model.Dictionary}/getNotifications`,\n\t\t}),\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-notification-card\">\n\t\t\t<slot v-for=\"notification of notificationViews\" :key=\"notification.view\">\n\t\t\t\t<component\n\t\t\t\t\t:is=\"notification.view\"\n\t\t\t\t\t:model=\"notification.model\"\n\t\t\t\t\t:data-id=\"'brcw-resource-notification-view-' + notification.view\"\n\t\t\t\t/>\n\t\t\t</slot>\n\t\t</div>\n\t`,\n};\n","import { mapState, mapGetters, mapActions, mapMutations } from 'ui.vue3.vuex';\nimport { resourceCreationWizardService } from 'booking.provider.service.resource-creation-wizard-service';\nimport { ResourceCreationWizardLayout } from './layout/layout';\nimport { ResourceCreationWizardHeader } from './header/header';\nimport { ResourceCreationWizardFooter } from './footer/footer';\nimport { ResourceCategoryCard } from './resource-category-card/resource-category-card';\nimport { ResourceSettingsCard } from './resource-settings-card/resource-settings-card';\nimport { ResourceNotificationCard } from './resource-notification-card/resource-notification-card';\n\nexport const App = {\n\tname: 'ResourceCreationWizardApp',\n\tcomponents: {\n\t\tResourceCreationWizardLayout,\n\t\tResourceCreationWizardHeader,\n\t\tResourceCreationWizardFooter,\n\t\tResourceCategoryCard,\n\t\tResourceSettingsCard,\n\t\tResourceNotificationCard,\n\t},\n\tdata(): { init: boolean }\n\t{\n\t\treturn {\n\t\t\tinit: true,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapState({\n\t\t\tstep: (state) => state['resource-creation-wizard'].step,\n\t\t\tfetching: (state) => state['resource-creation-wizard'].fetching,\n\t\t}),\n\t\t...mapGetters('resource-creation-wizard', [\n\t\t\t'invalidCurrentCard',\n\t\t\t'resourceId',\n\t\t]),\n\t\tcurrentView(): string\n\t\t{\n\t\t\tconst step = this.step || 1;\n\n\t\t\tswitch (step)\n\t\t\t{\n\t\t\t\tcase 2:\n\t\t\t\t\treturn 'ResourceSettingsCard';\n\t\t\t\tcase 3:\n\t\t\t\t\treturn 'ResourceNotificationCard';\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'ResourceCategoryCard';\n\t\t\t}\n\t\t},\n\t\tisEditForm(): boolean\n\t\t{\n\t\t\treturn this.resourceId !== null;\n\t\t},\n\t},\n\tasync beforeMount()\n\t{\n\t\tawait this.initApp();\n\t},\n\tmethods: {\n\t\t...mapActions(\n\t\t\t'resource-creation-wizard',\n\t\t\t['initState'],\n\t\t),\n\t\t...mapMutations(\n\t\t\t'resource-creation-wizard',\n\t\t\t[\n\t\t\t\t'prevStep',\n\t\t\t\t'updateFetching',\n\t\t\t\t'setGlobalSchedule',\n\t\t\t],\n\t\t),\n\t\tasync initApp()\n\t\t{\n\t\t\tawait this.initState();\n\t\t\tawait this.loadWizardData();\n\t\t\tthis.init = false;\n\t\t},\n\t\tasync loadWizardData()\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis.updateFetching(true);\n\t\t\t\tawait resourceCreationWizardService.fetchData();\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tconsole.error('Loading wizard data error', error);\n\t\t\t}\n\t\t\tfinally\n\t\t\t{\n\t\t\t\tthis.updateFetching(false);\n\t\t\t\tif (!this.isEditForm)\n\t\t\t\t{\n\t\t\t\t\tthis.setGlobalSchedule(true);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div id=\"booking-resource-creation-wizard\" class=\"booking-resource-creation-wizard\">\n\t\t\t<ResourceCreationWizardLayout :loading=\"fetching\" :step>\n\t\t\t\t<template #header>\n\t\t\t\t\t<ResourceCreationWizardHeader/>\n\t\t\t\t</template>\n\t\t\t\t<template v-if=\"!init\">\n\t\t\t\t\t<component :is=\"currentView\"/>\n\t\t\t\t</template>\n\t\t\t\t<template #footer>\n\t\t\t\t\t<ResourceCreationWizardFooter :step/>\n\t\t\t\t</template>\n\t\t\t</ResourceCreationWizardLayout>\n\t\t</div>\n\t`,\n};\n","import { Event, Tag } from 'main.core';\nimport { BitrixVue } from 'ui.vue3';\nimport type { VueCreateAppResult } from 'ui.vue3';\n\nimport { Core } from 'booking.core';\nimport { EventName, Model } from 'booking.const';\nimport { locMixin } from 'booking.component.mixin.loc-mixin';\nimport { Notifications } from 'booking.model.notifications';\nimport { ResourceCreationWizardModel } from 'booking.model.resource-creation-wizard';\nimport { SidePanelInstance } from 'booking.lib.side-panel-instance';\nimport { App } from './components/app';\n\ntype ResourceId = number | null;\n\nexport class ResourceCreationWizard\n{\n\tstatic #width: number = 600;\n\n\t#application: VueCreateAppResult | null = null;\n\n\tstatic #makeName(resourceId: string = 'new'): string\n\t{\n\t\treturn `booking:resource-creation-wizard:${resourceId || 'new'}`;\n\t}\n\n\t#mountContent(container: HTMLElement): void\n\t{\n\t\tconst application = BitrixVue.createApp(App, Core.getParams());\n\n\t\tapplication.mixin(locMixin);\n\t\tapplication.use(Core.getStore());\n\t\tapplication.mount(container);\n\n\t\tthis.#application = application;\n\t}\n\n\tasync #initCore(resourceId: ResourceId): Promise<void>\n\t{\n\t\ttry\n\t\t{\n\t\t\tawait Core.init();\n\t\t\tawait Core.addDynamicModule(\n\t\t\t\tResourceCreationWizardModel\n\t\t\t\t\t.create()\n\t\t\t\t\t.setVariables({ resourceId }),\n\t\t\t);\n\t\t\tawait Core.addDynamicModule(Notifications.create());\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error('Init Resource creation wizard error', error);\n\t\t}\n\t}\n\n\t#makeContainer(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div id=\"booking-resource-creation-wizard-app\" class=\"booking-resource-creation-wizard-app\"></div>\n\t\t`;\n\t}\n\n\topen(resourceId: ResourceId = null): void\n\t{\n\t\tSidePanelInstance.open(ResourceCreationWizard.#makeName(resourceId), {\n\t\t\twidth: ResourceCreationWizard.#width,\n\t\t\tcacheable: false,\n\t\t\tevents: {\n\t\t\t\tonClose: this.closeSidePanel.bind(this),\n\t\t\t},\n\t\t\tcontentCallback: async () => {\n\t\t\t\tawait this.#initCore(resourceId);\n\t\t\t\tthis.subscribe();\n\n\t\t\t\tconst container = this.#makeContainer();\n\t\t\t\tthis.#mountContent(container);\n\n\t\t\t\treturn container;\n\t\t\t},\n\t\t});\n\t}\n\n\tasync closeSidePanel(): Promise<void>\n\t{\n\t\tthis.unsubscribe();\n\t\tthis.#application.unmount();\n\t\tthis.#application = null;\n\n\t\tawait Core.removeDynamicModule(Model.ResourceCreationWizard);\n\t\tawait Core.removeDynamicModule(Model.Notifications);\n\t}\n\n\tsubscribe(): void\n\t{\n\t\tEvent.EventEmitter.subscribe(\n\t\t\tEventName.CloseWizard,\n\t\t\tthis.close,\n\t\t);\n\t}\n\n\tunsubscribe(): void\n\t{\n\t\tEvent.EventEmitter.unsubscribe(\n\t\t\tEventName.CloseWizard,\n\t\t\tthis.close,\n\t\t);\n\t}\n\n\tclose(): void\n\t{\n\t\tSidePanelInstance.close();\n\t}\n}\n"],"names":["UiLoader","name","props","show","Boolean","data","loader","Loader","mounted","$refs","template","ResourceCreationWizardLayout","step","type","Number","required","title","String","default","loading","watch","wrapper","scrollTo","components","ResourceCreationWizardHeader","computed","$store","state","resourceName","NextButton","UiButton","Button","steps","Array","disabled","waiting","currentStep","size","ButtonSize","SMALL","color","ButtonColor","SUCCESS","BackButton","buttonSize","buttonColor","LINK","Step","constructor","hidden","store","Core","getStore","labelNext","Loc","getMessage","labelBack","next","dispatch","back","ChooseResourceStep","Event","EventEmitter","emit","EventName","CloseWizard","ResourceNotificationStep","Type","isNull","id","commit","Model","ResourceCreationWizard","RcwAnalytics","sendAddResourceFinish","isApproved","getters","slotRanges","isSuccess","resourceTypeService","update","typeId","Promise","resolve","ConditionChecker","checkIsApproved","senderType","SenderTypes","bitrix24","bitrix24Sender","Notifications","find","sender","moduleId","Module","Crm","code","canUse","resource","slotSize","scheduleSlots","timezone","Interface","map","slotRange","resourceType","ResourceTypes","Object","values","Dictionary","value","reduce","acc","notificationOnField","NotificationFieldsMap","NotificationOn","templateTypeField","TemplateType","settingsFields","Settings","isCheckedForAll","fields","field","isUpdate","result","resourceService","add","text","isArrayFilled","errors","message","Notifier","notify","Text","getRandom","ResourceSettingsStep","resourceId","sendAddResourceStep2","ResourceCreationWizardFooter","mapGetters","isSaving","ResourceType","emits","IconSet","Icon","ResourceCategoryCard","setup","HelpDesk","anchorCode","resourceTypes","advertisingResourceTypes","methods","selectResourceType","relatedResourceTypeId","sendAddResourceStep1","HelpDeskLoc","ErrorMessage","BaseFields","initialResourceName","initialResourceType","entityId","EntitySelectorEntity","typeSelectorId","typeName","get","set","$emit","invalidResourceName","invalidResourceType","errorMessage","loc","showTypeSelector","dialog","getTypeSelectorDialog","typeSelectorAngle","bindElement","typeSelectorDialog","Dialog","getById","setTargetNode","targetNode","width","height","enableSearch","dropdownMode","context","multiple","cacheable","entities","dynamicLoad","dynamicSearch","popupOptions","targetContainer","$root","$el","querySelector","searchOptions","allowCreateItem","footerOptions","label","events","baseEvent","searchQuery","getData","getTarget","createType","getQuery","then","updateResourceType","addItem","prepareTypeToDialog","hide","catch","selectedItem","item","getId","getTitle","sort","selected","tabs","supertitle","avatar","scrollToBaseFieldsForm","baseFieldsForm","scrollIntoView","behavior","block","invalid","EmptyRichLoc","TitleLayout","iconType","ScheduleItem","modelValue","itemClass","description","ResourceSchedule","isSelected","toString","selectOption","ScheduleTypes","titleIconType","COLLABORATION","items","TextLayout","mapResourceGetters","createNamespacedHelpers","WorkTimeMixin","Mon","Tue","Wed","Thu","Fri","Sat","Sun","daysLabel","created","initialDays","forEach","day","prototype","hasOwnProperty","call","formatDaysLabel","defaultString","weekDays","companyScheduleSlots","isArraysEqual","selectedDays","orderedDays","keys","daysLabelMap","sortedSelectedDays","a","b","indexOf","formattedDays","join","getDayDefaultIndex","dayKey","dayIndices","first","second","length","every","index","weekStart","filter","weekdays","format","allDays","startIndex","slice","currentDayIndex","Date","getDay","targetDayIndex","dayDifference","dayDate","setDate","getDate","DateTimeFormat","WeekDaysPopup","HTMLElement","Popup","mixins","close","click","trueKeys","key","popupId","config","offsetRight","offsetWidth","angle","bindOptions","forceBindPosition","forceLeft","WorkTimeSlotRange","isLastRange","initialSlotRange","fromId","toId","fromTs","toTs","duration","isShownDays","arrow","days","from","to","removeSlot","localSlotRange","showDays","hideDays","selectDays","menuId","MenuManager","destroy","timeList","create","className","autoHide","closeByEsc","onShow","getMenuItems","Dom","hasClass","getLayout","itemHeight","offset","scrollContainer","getPopupWindow","getContentContainer","topPosition","getRelativePosition","getContainer","top","scrollTop","onClose","maxHeight","minWidth","entries","generateTimeMap","minutes","parseInt","defaultClass","addMenuItem","dataset","onclick","timeMap","timeFormat","getFormat","interval","timestamp","setHours","midnightTimestamp","clickBtn","daysId","fromLabel","toLabel","WorkTimeSelector","initialSlotRanges","isGlobalSchedule","defaultSlotRange","initialTimezone","currentTimezone","isCompanyScheduleAccess","companyScheduleUrl","localSlotRanges","processSlotRanges","isChecked","hasTimezonesDifference","formattedInitialOffset","formattedCurrentOffset","calculateDifferenceBetweenTimezones","handler","newSlotRanges","deep","checked","openCompanyWorkTime","event","isTextClick","target","currentTarget","BX","subscribeOnce","GLOBAL_TARGET","slider","getWindow","innerBaseEvent","extraSettings","reloadAfterClose","SidePanel","Instance","open","preventDefault","updateSlotRange","addSlotRange","push","removeSlotRange","splice","getTimezoneOffset","timeZone","Timezone","getOffset","now","initialOffset","currentOffset","formatOffset","sign","hours","Math","floor","abs","padStart","totalDifferenceMinutes","onSlotClick","companyWorkTimeOptionLabel","isSlotsDisabled","timezoneIconType","EARTH_TIME","formattedTimezonesText","replace","WorkTime","updateGlobalSchedule","getGlobalSchedule","CLOCK_2","SlotLengthPrecisionSelection","directives","hint","initialValue","minutesFocused","distributeInitialValue","remainingMinutes","calculateTotalMinutes","totalMinutes","validateHours","isNumber","setTimeout","validateMinutes","handleEnterKey","blur","hourHint","minutesHint","unitDurations","Duration","getUnitDurations","units","fromEntries","unit","i","disabledLengths","Set","H","d","SlotLengthSelector","initialSelectedValue","selectedPrecisionValue","precisionMode","selectedValue","slotLengthId","durations","templateValues","has","select","selectPrecision","getClass","getSoonHintContent","position","offsetLeft","offsetTop","SlotLength","selectedSlotLength","updateSelectedValue","GANTT_GRAPHS","mapActions","mapMutations","ResourceSettingsCard","getInitialSlotTimeZone","updateSlotRanges","updateResourceName","updateResource","setInvalidResourceName","setInvalidResourceType","updateSlotDataForAllRanges","updateSlotLength","inputSlotRanges","setGlobalSchedule","fetchData","resourceCreationWizardService","isEditForm","isMain","LabelDropdown","BIcon","BMenu","Actions","isMenuShown","menuOptions","container","onClick","handleClick","ChannelMenu","currentChannel","ButtonIcon","menuPopup","channel","isChannelChoiceAvailable","notificationChannelOptions","NotificationChannel","WhatsApp","Sms","unmounted","openMenu","popupWindow","isShown","menuButton","document","onDestroy","bindScrollEvent","unbindScrollEvent","bind","adjustPosition","capture","unbind","ChooseTemplatePopup","model","currentTemplateType","EXTRA_SMALL","buttonColors","BASE_LIGHT","PRIMARY","messenger","selectedTemplateType","beforeMount","beforeUnmount","templateTypes","forceTop","childNodes","animation","angleBorderRadius","padding","getFormattedTime","getMessageTemplate","templateType","templateModel","templates","textSms","handleChannelChange","selectedChannel","chooseType","selectedType","popup","getButtonText","getButtonColor","getTemplateTitle","typeDictionary","templateDictionary","TemplateEmpty","ResourceNotificationCheckBoxRow","CheckedForAll","ResourceNotificationTextRow","icon","Description","helpDesk","MessageTemplate","RichLoc","preparedTemplate","replaceAll","ManagerNotification","CyclePopup","scrollToCard","Main","isPopupShown","notificationText","sleep","timeout","ResourceNotification","Switcher","managerDescription","CRM","showTemplatePopup","isCurrentSenderAvailable","templateName","messageTemplate","hasTemplate","disableSwitcher","ordinal","Ordinal","soonHint","hintManager","UI","Hint","createInstance","popupParameters","init","animateHeight","updated","handleTemplateTypeSelected","getChooseTemplateButton","chooseTemplateBtn","expand","updateNotificationExpanded","isExpanded","withAnimation","style","prevHeight","offsetHeight","main","manager","BaseInfo","isInfoNotificationOn","infoNotificationDelay","card","$forceUpdate","locInfoTimeSend","ResourceNotificationInfo","ahaMoments","shouldShow","AhaMoment","showAhaMoment","showGuide","article","AhaMessageTemplate","setShown","Confirmation","CardId","isConfirmationNotificationOn","confirmationNotificationDelay","confirmationNotificationRepetitions","confirmationNotificationRepetitionsInterval","confirmationCounterDelay","locSendMessageBefore","locRetryMessage","locManagerRemindTime","Reminder","isReminderNotificationOn","reminderNotificationDelay","locSendReminderTime","ResourceNotificationReminder","Feedback","labelValue","settings","notification","delayValues","isFeedbackNotificationOn","locSendFeedbackTime","ResourceNotificationFeedback","Late","isDelayedNotificationOn","delayedNotificationDelay","delayedCounterDelay","locSendMessageAfter","locNotifyManagerIn","ResourceNotificationCard","notificationViews","notifications","dictionary","Info","view","Delayed","App","mapState","fetching","currentView","initApp","initState","loadWizardData","updateFetching","error","console","SidePanelInstance","closeSidePanel","contentCallback","subscribe","unsubscribe","unmount","removeDynamicModule","application","BitrixVue","createApp","getParams","mixin","locMixin","use","mount","addDynamicModule","ResourceCreationWizardModel","setVariables","Tag","render"],"mappings":"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"}