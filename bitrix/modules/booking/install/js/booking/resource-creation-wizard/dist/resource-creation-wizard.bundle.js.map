{"version":3,"file":"resource-creation-wizard.bundle.js","sources":["../src/components/layout/ui-loader.js","../src/components/layout/layout.js","../src/components/header/header.js","../src/components/footer/next-button.js","../src/components/footer/back-button.js","../src/presenter/step.js","../src/presenter/choose-resource-step.js","../src/presenter/resource-notification-step.js","../src/presenter/resource-settings-step.js","../src/components/footer/footer.js","../src/components/resource-category-card/resource-type/resource-type.js","../src/components/resource-category-card/resource-category-card.js","../src/components/resource-settings-card/base-fields/components/avatar-field.js","../src/components/resource-settings-card/error-message/error-message.js","../src/components/resource-settings-card/base-fields/components/name-field.js","../src/components/resource-settings-card/base-fields/components/type-field.js","../src/components/resource-settings-card/base-fields/components/description-field.js","../src/components/resource-settings-card/title-layout/title-layout.js","../src/components/resource-settings-card/text-layout/text-layout.js","../src/components/resource-settings-card/base-fields/base-fields.js","../src/components/resource-settings-card/schedule-types/components/schedule-item.js","../src/components/resource-settings-card/schedule-types/schedule-types.js","../src/components/resource-settings-card/integration/components/settings-item.js","../src/components/resource-settings-card/integration/components/settings-selector.js","../src/components/resource-settings-card/integration/components/calendar/integration-calendar.js","../src/components/resource-settings-card/integration/integration.js","../src/components/resource-settings-card/work-time/work-time-mixin.js","../src/components/resource-settings-card/work-time/week-days-popup.js","../src/components/resource-settings-card/work-time/work-time-slot-range.js","../src/components/resource-settings-card/work-time/work-time-selector.js","../src/components/resource-settings-card/work-time/work-time.js","../src/components/resource-settings-card/slot-length/slot-length-precision-selection.js","../src/components/resource-settings-card/slot-length/slot-length-selector.js","../src/components/resource-settings-card/slot-length/slot-length.js","../src/components/resource-settings-card/resource-settings-card.js","../src/components/resource-notification-card/label/label.js","../src/components/resource-notification-card/channel-menu/channel-menu.js","../src/components/resource-notification-card/choose-template-popup/choose-template-popup.js","../src/components/resource-notification-card/template-empty/template-empty.js","../src/components/resource-notification-card/layout/resource-notification-checkbox-row.js","../src/components/resource-notification-card/layout/components/checked-for-all.js","../src/components/resource-notification-card/layout/resource-notification-text-row.js","../src/components/resource-notification-card/layout/components/description.js","../src/components/resource-notification-card/layout/components/message-tempalte.js","../src/components/resource-notification-card/layout/components/manager-notification.js","../src/components/resource-notification-card/layout/resource-notification.js","../src/components/resource-notification-card/base-info/base-info.js","../src/components/resource-notification-card/confirmation/confirmation.js","../src/components/resource-notification-card/reminder/reminder.js","../src/components/resource-notification-card/feedback/feedback.js","../src/components/resource-notification-card/late/late.js","../src/components/resource-notification-card/resource-notification-card.js","../src/components/app.js","../src/resource-creation-wizard.js"],"sourcesContent":["import { Loader } from 'main.loader';\n\nexport const UiLoader = {\n\tname: 'UiLoader',\n\tprops: {\n\t\tshow: Boolean,\n\t},\n\tdata(): { loader: Loader }\n\t{\n\t\treturn {\n\t\t\tloader: new Loader(),\n\t\t};\n\t},\n\tmounted(): void\n\t{\n\t\tvoid this.loader.show(this.$refs.loader);\n\t},\n\ttemplate: `\n\t\t<div ref=\"loader\"></div>\n\t`,\n};\n","import { UiLoader } from './ui-loader';\nimport './resource-creation-wizard-layout.css';\n\nexport const ResourceCreationWizardLayout = {\n\tname: 'ResourceCreationWizardLayout',\n\tprops: {\n\t\tstep: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tloading: Boolean,\n\t},\n\twatch: {\n\t\tstep(): void\n\t\t{\n\t\t\tthis.$refs.wrapper?.scrollTo(0, 0);\n\t\t},\n\t},\n\tcomponents: {\n\t\tUiLoader,\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard-layout\">\n\t\t\t<div ref=\"wrapper\" class=\"resource-creation-wizard__wrapper\">\n\t\t\t\t<div class=\"resource-creation-wizard__header\">\n\t\t\t\t\t<slot name=\"header\">\n\t\t\t\t\t\t<h4 class=\"resource-creation-wizard__header-title\">\n\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t</h4>\n\t\t\t\t\t</slot>\n\t\t\t\t</div>\n\t\t\t\t<div v-show=\"!loading\" class=\"resource-creation-wizard__content\">\n\t\t\t\t\t<slot/>\n\t\t\t\t</div>\n\t\t\t\t<UiLoader v-if=\"loading\"/>\n\t\t\t</div>\n\t\t\t<slot name=\"footer\"/>\n\t\t</div>\n\t`,\n};\n","export const ResourceCreationWizardHeader = {\n\tname: 'ResourceCreationWizardHeader',\n\tcomputed: {\n\t\ttitle(): string\n\t\t{\n\t\t\treturn this.$store.state['resource-creation-wizard'].resourceName;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<span class=\"resource-creation-wizard__header-title\">\n\t\t\t{{ title }}\n\t\t</span>\n\t`,\n};\n","import { Button, ButtonSize, ButtonColor } from 'booking.component.button';\nimport type { IStep } from '../../presenter';\n\nexport const NextButton = {\n\tname: 'NextButton',\n\tcomponents: {\n\t\tUiButton: Button,\n\t},\n\tprops: {\n\t\tstep: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tsteps: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: Boolean,\n\t\twaiting: Boolean,\n\t},\n\tcomputed: {\n\t\tcurrentStep(): IStep\n\t\t{\n\t\t\treturn this.steps[this.step - 1];\n\t\t},\n\t\tsize(): string\n\t\t{\n\t\t\treturn ButtonSize.SMALL;\n\t\t},\n\t\tcolor(): string\n\t\t{\n\t\t\treturn ButtonColor.SUCCESS;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<UiButton\n\t\t\t:text=\"currentStep.labelNext\"\n\t\t\t:title=\"currentStep.labelNext\"\n\t\t\t:size\n\t\t\t:color\n\t\t\t:disabled\n\t\t\t:waiting\n\t\t\t@click=\"currentStep.next()\"\n\t\t/>\n\t`,\n};\n","import { Button, ButtonSize, ButtonColor } from 'booking.component.button';\nimport type { IStep } from '../../presenter';\n\nexport const BackButton = {\n\tname: 'BackButton',\n\tprops: {\n\t\tstep: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tsteps: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tbuttonSize(): string\n\t\t{\n\t\t\treturn ButtonSize.SMALL;\n\t\t},\n\t\tbuttonColor(): string\n\t\t{\n\t\t\treturn ButtonColor.LINK;\n\t\t},\n\t\tcurrentStep(): IStep\n\t\t{\n\t\t\treturn this.steps[this.step - 1];\n\t\t},\n\t},\n\tcomponents: {\n\t\tUiButton: Button,\n\t},\n\ttemplate: `\n\t\t<UiButton\n\t\t\tclass=\"resource-creation-wizard__back-button\"\n\t\t\t:text=\"currentStep.labelBack\"\n\t\t\t:title=\"currentStep.labelBack\"\n\t\t\t:size=\"buttonSize\"\n\t\t\t:color=\"buttonColor\"\n\t\t\t@click=\"currentStep.back()\"\n\t\t/>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { Core } from 'booking.core';\nimport type { IStep } from './types';\n\n/**\n * @abstract\n */\nexport class Step implements IStep\n{\n\thidden = false;\n\n\tconstructor(hidden = false)\n\t{\n\t\tthis.hidden = hidden;\n\t}\n\n\tget store(): Store\n\t{\n\t\treturn Core.getStore();\n\t}\n\n\tget labelNext(): string\n\t{\n\t\treturn Loc.getMessage('BRCW_BUTTON_CONTINUE');\n\t}\n\n\tget labelBack(): string\n\t{\n\t\treturn Loc.getMessage('BRCW_BUTTON_CANCEL');\n\t}\n\n\tasync next(): Promise<void>\n\t{\n\t\tawait this.store.dispatch('resource-creation-wizard/nextStep');\n\t}\n\n\tasync back(): Promise<void>\n\t{\n\t\tawait this.store.dispatch('resource-creation-wizard/prevStep');\n\t}\n}\n","import { Event, Loc } from 'main.core';\nimport { EventName } from 'booking.const';\nimport { Step } from './step';\n\nexport class ChooseResourceStep extends Step\n{\n\tconstructor()\n\t{\n\t\tsuper(true);\n\t}\n\n\tget labelBack(): string\n\t{\n\t\treturn Loc.getMessage('BRCW_BUTTON_CANCEL');\n\t}\n\n\tasync next(): Promise<void>\n\t{\n\t\tawait super.next();\n\t}\n\n\tback()\n\t{\n\t\tEvent.EventEmitter.emit(EventName.CloseWizard);\n\t}\n}\n","import { Event, Loc, Text, Type } from 'main.core';\nimport { Notifier, NotificationOptions } from 'ui.notification-manager';\nimport { ConditionChecker, Types as SenderTypes } from 'crm.messagesender';\n\nimport { EventName, Model, NotificationFieldsMap, Module } from 'booking.const';\nimport { resourceService } from 'booking.provider.service.resources-service';\nimport { resourceTypeService } from 'booking.provider.service.resources-type-service';\nimport { RcwAnalytics } from 'booking.lib.analytics';\nimport type { SlotRange, ResourceModel } from 'booking.model.resources';\nimport type { ResourceTypeModel } from 'booking.model.resource-types';\n\nimport { Step } from './step';\n\nexport class ResourceNotificationStep extends Step\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.step = 3;\n\t}\n\n\tget #resource(): ResourceModel\n\t{\n\t\treturn this.store.getters[`${Model.ResourceCreationWizard}/getResource`];\n\t}\n\n\tget #entityCalendar(): ResourceModel\n\t{\n\t\treturn this.store.getters[`${Model.ResourceCreationWizard}/entityCalendar`];\n\t}\n\n\tget labelNext(): string\n\t{\n\t\treturn Type.isNull(this.#resource.id ?? null)\n\t\t\t? Loc.getMessage('BRCW_BUTTON_CREATE_RESOURCE')\n\t\t\t: Loc.getMessage('BRCW_BUTTON_UPDATE_RESOURCE');\n\t}\n\n\tget #resourceAvatarFile(): File | null\n\t{\n\t\treturn this.store.getters[`${Model.ResourceCreationWizard}/getResourceAvatarFile`];\n\t}\n\n\tasync next(): Promise<void>\n\t{\n\t\tthis.store.commit(`${Model.ResourceCreationWizard}/setSaving`, true);\n\t\tRcwAnalytics.sendAddResourceFinish();\n\n\t\tconst isApproved = await this.#isBitrix24Approved();\n\t\tif (!isApproved)\n\t\t{\n\t\t\tthis.store.commit(`${Model.ResourceCreationWizard}/setSaving`, false);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.store.getters[`${Model.ResourceCreationWizard}/isGlobalSchedule`])\n\t\t{\n\t\t\tawait this.store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, {\n\t\t\t\tslotRanges: this.#prepareCompanySlotRanges(this.#resource),\n\t\t\t});\n\t\t}\n\n\t\tthis.#checkEntityCalendar();\n\n\t\tconst isSuccess = await this.#upsertResource(this.#resource);\n\t\tif (!isSuccess)\n\t\t{\n\t\t\tthis.store.commit(`${Model.ResourceCreationWizard}/setSaving`, false);\n\n\t\t\treturn;\n\t\t}\n\n\t\tawait resourceTypeService.update({\n\t\t\tid: this.#resource.typeId,\n\t\t\t...this.#prepareResourceTypeNotifications(this.#resource),\n\t\t});\n\n\t\tEvent.EventEmitter.emit(EventName.CloseWizard);\n\t}\n\n\t#isBitrix24Approved(): Promise<boolean>\n\t{\n\t\tif (!this.#isBitrix24SenderAvailable())\n\t\t{\n\t\t\treturn Promise.resolve(true);\n\t\t}\n\n\t\treturn ConditionChecker.checkIsApproved({\n\t\t\tsenderType: SenderTypes.bitrix24,\n\t\t});\n\t}\n\n\t#isBitrix24SenderAvailable(): boolean\n\t{\n\t\tconst bitrix24Sender = this.store.getters[`${Model.Notifications}/getSenders`]\n\t\t\t.find((sender) => sender.moduleId === Module.Crm && sender.code === SenderTypes.bitrix24)\n\t\t;\n\n\t\tif (!bitrix24Sender)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn bitrix24Sender.canUse;\n\t}\n\n\t#prepareCompanySlotRanges(resource: ResourceModel): SlotRange[]\n\t{\n\t\tconst slotSize = resource.slotRanges[0]?.slotSize ?? 60;\n\t\tconst scheduleSlots = this.store.getters[`${Model.ResourceCreationWizard}/getCompanyScheduleSlots`];\n\t\tconst timezone = this.store.getters[`${Model.Interface}/timezone`];\n\n\t\treturn scheduleSlots.map((slotRange: SlotRange) => ({\n\t\t\t...slotRange,\n\t\t\tslotSize,\n\t\t\ttimezone,\n\t\t}));\n\t}\n\n\t#prepareResourceTypeNotifications(resource: ResourceModel): Partial<ResourceTypeModel>\n\t{\n\t\tconst resourceType = this.store.getters[`${Model.ResourceTypes}/getById`](resource.typeId);\n\n\t\treturn Object.values(this.store.getters[`${Model.Dictionary}/getNotifications`])\n\t\t\t.map(({ value }) => value)\n\t\t\t.reduce((acc: Object, type: string) => {\n\t\t\t\tconst notificationOnField = NotificationFieldsMap.NotificationOn[type];\n\t\t\t\tconst templateTypeField = NotificationFieldsMap.TemplateType[type];\n\t\t\t\tconst settingsFields = NotificationFieldsMap.Settings[type];\n\n\t\t\t\tconst isCheckedForAll = this.store.getters[`${Model.ResourceCreationWizard}/isCheckedForAll`](type);\n\n\t\t\t\treturn {\n\t\t\t\t\t...acc,\n\t\t\t\t\t[notificationOnField]: isCheckedForAll ? resource[notificationOnField] : resourceType[notificationOnField],\n\t\t\t\t\t[templateTypeField]: isCheckedForAll ? resource[templateTypeField] : resourceType[templateTypeField],\n\t\t\t\t\t...settingsFields.reduce((fields, field) => ({\n\t\t\t\t\t\t...fields,\n\t\t\t\t\t\t[field]: isCheckedForAll ? resource[field] : resourceType[field],\n\t\t\t\t\t}), {}),\n\t\t\t\t};\n\t\t\t}, {})\n\t\t;\n\t}\n\n\tasync #upsertResource(resource: ResourceModel): Promise<boolean>\n\t{\n\t\tconst isUpdate = Boolean(resource.id);\n\t\tconst resourceToProcess = this.#prepareResourceToProcess(resource);\n\n\t\tconst result = await (isUpdate\n\t\t\t? resourceService.update(resourceToProcess)\n\t\t\t: resourceService.add(resourceToProcess)\n\t\t);\n\n\t\tlet text = Loc.getMessage(isUpdate ? 'BRCW_UPDATE_SUCCESS_MESSAGE' : 'BRCW_CREATE_SUCCESS_MESSAGE');\n\t\tif (Type.isArrayFilled(result.errors))\n\t\t{\n\t\t\ttext = result.errors[0].message;\n\t\t}\n\n\t\tNotifier.notify(this.#prepareNotificationOptions(text));\n\n\t\treturn !Type.isArrayFilled(result.errors);\n\t}\n\n\t#prepareResourceToProcess(resource: ResourceModel): ResourceModel\n\t{\n\t\tconst uploadedAvatar = this.#resourceAvatarFile;\n\t\tif (!uploadedAvatar)\n\t\t{\n\t\t\treturn { ...resource };\n\t\t}\n\n\t\treturn {\n\t\t\t...resource,\n\t\t\tavatar: {\n\t\t\t\tid: null,\n\t\t\t\turl: null,\n\t\t\t\tfile: uploadedAvatar,\n\t\t\t},\n\t\t};\n\t}\n\n\t#prepareNotificationOptions(text: string): NotificationOptions\n\t{\n\t\treturn {\n\t\t\tid: Text.getRandom(),\n\t\t\ttext,\n\t\t};\n\t}\n\n\tasync #checkEntityCalendar(): void\n\t{\n\t\tif (\n\t\t\t!this.store.getters[`${Model.ResourceCreationWizard}/isIntegrationCalendarEnabled`]\n\t\t\t|| this.#entityCalendar.data?.userIds?.length === 0\n\t\t)\n\t\t{\n\t\t\tawait this.#disabledCalendarIntegration();\n\t\t}\n\t}\n\n\tasync #disabledCalendarIntegration(): Promise<void>\n\t{\n\t\tif (this.#entityCalendar === null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tawait this.store.dispatch(`${Model.ResourceCreationWizard}/updateResourceEntityCalendar`, {\n\t\t\tuserIds: [],\n\t\t\tlocationId: null,\n\t\t\tcheckAvailability: false,\n\t\t\treminders: [],\n\t\t});\n\t}\n}\n","import { Event, Loc, Type } from 'main.core';\nimport { EventName, Model } from 'booking.const';\nimport { RcwAnalytics } from 'booking.lib.analytics';\nimport { Step } from './step';\n\nexport class ResourceSettingsStep extends Step\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.step = 2;\n\t}\n\n\tget #isFirstStep(): boolean\n\t{\n\t\treturn this.store.getters[`${Model.ResourceCreationWizard}/startStep`] === this.step;\n\t}\n\n\tget labelBack(): string\n\t{\n\t\treturn this.#isFirstStep ? super.labelBack : Loc.getMessage('BRCW_BUTTON_BACK');\n\t}\n\n\tasync next(): Promise<void>\n\t{\n\t\tconst store = this.store;\n\n\t\tif (!store.state[Model.ResourceCreationWizard].resource.name)\n\t\t{\n\t\t\tif (!Type.isNull(store.state[Model.ResourceCreationWizard].resourceId))\n\t\t\t{\n\t\t\t\tawait store.dispatch(`${Model.ResourceCreationWizard}/setInvalidResourceName`, true);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, {\n\t\t\t\tname: Loc.getMessage('BRCW_DEFAULT_RESOURCE_NAME'),\n\t\t\t});\n\t\t}\n\n\t\tif (!store.state[Model.ResourceCreationWizard].resource.typeId)\n\t\t{\n\t\t\tawait store.dispatch(`${Model.ResourceCreationWizard}/setInvalidResourceType`, true);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.#validateIntegrationCalendarUser())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tawait super.next();\n\t\tRcwAnalytics.sendAddResourceStep2();\n\t}\n\n\tasync back()\n\t{\n\t\tif (this.#isFirstStep)\n\t\t{\n\t\t\tEvent.EventEmitter.emit(EventName.CloseWizard);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tawait super.back();\n\t\t}\n\t}\n\n\t#validateIntegrationCalendarUser(): boolean\n\t{\n\t\tconst isIntegrationCalendarEnabled = this.store.getters[`${Model.ResourceCreationWizard}/isIntegrationCalendarEnabled`];\n\t\tconst calendarEntity = this.store.getters[`${Model.ResourceCreationWizard}/entityCalendar`];\n\n\t\tif (!isIntegrationCalendarEnabled || !calendarEntity || calendarEntity.data.userIds.length > 0)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tif (!calendarEntity.data.locationId && calendarEntity.data.reminders.length === 0)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tvoid this.store.dispatch(`${Model.ResourceCreationWizard}/setInvalidIntegrationCalendarUser`, true);\n\n\t\treturn false;\n\t}\n}\n","import { mapGetters } from 'ui.vue3.vuex';\nimport { Model } from 'booking.const';\nimport { NextButton } from './next-button';\nimport { BackButton } from './back-button';\nimport { ChooseResourceStep, ResourceNotificationStep, ResourceSettingsStep } from '../../presenter';\nimport './footer.css';\n\nexport const ResourceCreationWizardFooter = {\n\tname: 'ResourceCreationWizardFooter',\n\tprops: {\n\t\tstep: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: Boolean,\n\t},\n\tdata(): Object {\n\t\treturn {\n\t\t\tsteps: [\n\t\t\t\tnew ChooseResourceStep(),\n\t\t\t\tnew ResourceSettingsStep(),\n\t\t\t\tnew ResourceNotificationStep(),\n\t\t\t],\n\t\t};\n\t},\n\tcomputed: mapGetters({\n\t\tisSaving: `${Model.ResourceCreationWizard}/isSaving`,\n\t}),\n\tcomponents: {\n\t\tBackButton,\n\t\tNextButton,\n\t},\n\ttemplate: `\n\t\t<div v-if=\"!steps[step - 1].hidden\" class=\"resource-creation-wizard__footer\">\n\t\t\t<NextButton :step :steps :disabled :waiting=\"isSaving\"/>\n\t\t\t<BackButton :step :steps :disabled=\"isSaving\"/>\n\t\t</div>\n\t`,\n};\n","import { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.actions';\n\nimport './resource-type.css';\n\nexport const ResourceType = {\n\tname: 'ResourceType',\n\temits: ['selected'],\n\tprops: {\n\t\tresourceType: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tIconSet,\n\t\t};\n\t},\n\tcomponents: {\n\t\tIcon,\n\t},\n\ttemplate: `\n\t\t<div class=\"booking--rcw--resource-type-item\" @click=\"$emit('selected', resourceType)\">\n\t\t\t<div class=\"rcw__resource-type\">\n\t\t\t\t<div :class=\"['booking--rcw--resource-type__icon', 'booking--rcw--resource-type__icon--' + resourceType.code]\">\n\t\t\t\t</div>\n\t\t\t\t<div class=\"rcw__resource-type__row\">\n\t\t\t\t\t<div class=\"rcw__resource-type__label\">\n\t\t\t\t\t\t<div class=\"rcw__resource-type__label-title\">{{ resourceType.name }}</div>\n\t\t\t\t\t\t<div class=\"rcw__resource-type__label-description\">{{ resourceType.description }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Icon :name=\"IconSet.ARROW_RIGHT\"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { HelpDesk, Model } from 'booking.const';\nimport { HelpDeskLoc } from 'booking.component.help-desk-loc';\nimport { RcwAnalytics } from 'booking.lib.analytics';\nimport type { ResourceCreationType } from 'booking.model.resource-creation-wizard';\n\nimport { ResourceType } from './resource-type/resource-type';\nimport './resource-category-card.css';\n\nexport const ResourceCategoryCard = {\n\tname: 'ResourceCategoryCard',\n\tsetup(): { code: string, anchorCode: string }\n\t{\n\t\treturn {\n\t\t\tcode: HelpDesk.ResourceType.code,\n\t\t\tanchorCode: HelpDesk.ResourceType.anchorCode,\n\t\t};\n\t},\n\tcomputed: {\n\t\tresourceTypes(): ResourceCreationType[]\n\t\t{\n\t\t\treturn this.$store.state[Model.ResourceCreationWizard].advertisingResourceTypes;\n\t\t},\n\t},\n\tmethods: {\n\t\tasync selectResourceType({ relatedResourceTypeId }: ResourceCreationType): Promise<void>\n\t\t{\n\t\t\tawait this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, {\n\t\t\t\ttypeId: relatedResourceTypeId,\n\t\t\t});\n\n\t\t\tawait this.$store.dispatch(`${Model.ResourceCreationWizard}/nextStep`);\n\t\t\tRcwAnalytics.sendAddResourceStep1();\n\t\t},\n\t},\n\tcomponents: {\n\t\tHelpDeskLoc,\n\t\tResourceType,\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-category-card\">\n\t\t\t<div class=\"resource-category-card__header\">\n\t\t\t\t<div class=\"resource-category-card__header__title\">\n\t\t\t\t\t{{ loc('BRCW_CHOOSE_CATEGORY_MSGVER_1') }}\n\t\t\t\t</div>\n\t\t\t\t<HelpDeskLoc\n\t\t\t\t\t:message=\"loc('BRCW_CHOOSE_CATEGORY_DESCRIPTION_MSGVER_2')\"\n\t\t\t\t\t:code=\"code\"\n\t\t\t\t\t:anchor=\"anchorCode\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"resource-category-card__content resource-creation-wizard__form\">\n\t\t\t\t<ResourceType\n\t\t\t\t\tv-for=\"resourceType in resourceTypes\"\n\t\t\t\t\t:key=\"resourceType.code\"\n\t\t\t\t\t:resource-type\n\t\t\t\t\t:data-id=\"'brcw-resource-type-list-' + resourceType.code\"\n\t\t\t\t\t@selected=\"selectResourceType\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BaseEvent } from 'main.core.events';\nimport { Uploader, UploaderEvent } from 'ui.uploader.core';\nimport { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { BIcon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.notification';\n\nimport '../css/avatar-field.css';\n\n// @vue/component\nexport const AvatarField = {\n\tname: 'ResourceAvatarField',\n\tcomponents: { RichLoc, BIcon },\n\tprops: {\n\t\tavatarUrl: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\temits: [\n\t\t'avatarFileUpdate',\n\t],\n\tsetup(): { IconSet: IconSet }\n\t{\n\t\treturn {\n\t\t\tIconSet,\n\t\t};\n\t},\n\tcomputed: {\n\t\thasAvatar(): boolean\n\t\t{\n\t\t\treturn this.avatarUrl.trim().length > 0;\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tthis.uploader = new Uploader({\n\t\t\tbrowseElement: this.$refs.uploaderContainer,\n\t\t\tassignServerFile: false,\n\t\t\tacceptedFileTypes: ['.jpg', '.jpeg', '.png'],\n\t\t\tmaxFileSize: 1024 * 1024 * 5, // 5 MB\n\n\t\t\tevents: {\n\t\t\t\t[UploaderEvent.FILE_LOAD_COMPLETE]: (event: BaseEvent): void => {\n\t\t\t\t\tconst file = event.getData().file;\n\t\t\t\t\tthis.$emit('avatarFileUpdate', file);\n\t\t\t\t},\n\t\t\t\t[UploaderEvent.FILE_ERROR]: (event: BaseEvent): void => {\n\t\t\t\t\tconst error = event.getData().error;\n\t\t\t\t\tconst errorMessage = error.getMessage();\n\n\t\t\t\t\tBX.UI.Notification.Center.notify({ content: errorMessage });\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t},\n\tmethods: {\n\t\tremoveCurrentAvatar(): void\n\t\t{\n\t\t\tthis.uploader.removeFiles();\n\t\t\tthis.$emit('avatarFileUpdate', null);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form-row booking--rcw--avatar-field\">\n\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_AVATAR_UPLOAD_LABEL') }}\n\t\t\t</div>\n\t\t\t<div class=\"booking--rcw--avatar-container\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"booking--rcw--avatar\"\n\t\t\t\t\t:class=\"{ '--has-img': hasAvatar }\"\n\t\t\t\t\tdata-id=\"brcw-settings-resource-avatar-input\"\n\t\t\t\t\tref=\"uploaderContainer\"\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\tv-if=\"hasAvatar\"\n\t\t\t\t\t\tclass=\"booking--rcw--avatar-img\"\n\t\t\t\t\t\t:src=\"avatarUrl\"\n\t\t\t\t\t\talt=\"Resource avatar\"\n\t\t\t\t\t\tdraggable=\"false\"\n\t\t\t\t\t/>\n\t\t\t\t\t<span v-else class=\"booking--rcw--avatar-icon --default-icon\">\n\t\t\t\t\t\t<BIcon :name=\"IconSet.PICTURE\" :size=\"36\"></BIcon>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"booking--rcw--avatar-icon --hover-icon\">\n\t\t\t\t\t\t<BIcon :name=\"IconSet.DOWNLOAD_3\" :size=\"29\"></BIcon>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<span v-if=\"hasAvatar\" class=\"booking--rcw--avatar-remove\" @click=\"removeCurrentAvatar\">\n\t\t\t\t\t<BIcon :name=\"IconSet.CROSS_25\" :size=\"14\"></BIcon>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import './error-message.css';\n\n// @vue/component\nexport const ErrorMessage = {\n\tname: 'ErrorMessage',\n\tprops: {\n\t\tmessage: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"booking--rcw--error-message-container\">\n\t\t\t<div class=\"booking--rcw--error-message\">\n\t\t\t\t<span class=\"ui-icon-set --warning\"></span>\n\t\t\t\t<span>{{ message }}</span>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { EmptyRichLoc } from 'booking.component.help-desk-loc';\nimport { ErrorMessage } from '../../error-message/error-message';\n\nimport '../css/name-field.css';\n\n// @vue/component\nexport const NameField = {\n\tname: 'ResourceNameField',\n\tcomponents: {\n\t\tErrorMessage,\n\t\tEmptyRichLoc,\n\t},\n\tprops: {\n\t\tresourceName: { type: String, default: '' },\n\t\tinvalid: { type: Boolean, default: false },\n\t},\n\temits: ['nameUpdate'],\n\tcomputed: {\n\t\tlocalName: {\n\t\t\tget(): string\n\t\t\t{\n\t\t\t\treturn this.resourceName;\n\t\t\t},\n\t\t\tset(value: string): void\n\t\t\t{\n\t\t\t\tthis.$emit('nameUpdate', value);\n\t\t\t},\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form-row booking--rcw--name-field\">\n\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t<label class=\"ui-ctl-label-text\" for=\"brcw-settings-resource-name\">\n\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_NAME_LABEL') }}\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class=\"ui-form-content booking--rcw--field-with-validation\">\n\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tdata-id=\"brcw-settings-resource-name-input\"\n\t\t\t\t\t\tv-model.trim=\"localName\"\n\t\t\t\t\t\tid=\"brcw-settings-resource-name\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t:class=\"{ '--error': invalid }\"\n\t\t\t\t\t\t:placeholder=\"loc('BRCW_SETTINGS_CARD_NAME_LABEL')\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<ErrorMessage\n\t\t\t\t\tv-if=\"invalid\"\n\t\t\t\t\t:message=\"loc('BRCW_SETTINGS_CARD_REQUIRED_FIELD')\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Text } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { Dialog } from 'ui.entity-selector';\nimport { EntitySelectorEntity } from 'booking.const';\nimport { ResourceTypeModel } from 'booking.model.resource-types';\nimport { resourceTypeService } from 'booking.provider.service.resources-type-service';\nimport { ErrorMessage } from '../../error-message/error-message';\n\n// @vue/component\nexport const TypeField = {\n\tname: 'ResourceTypeField',\n\tcomponents: {\n\t\tErrorMessage,\n\t},\n\tprops: {\n\t\tinitialTypeId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: null,\n\t\t},\n\t\tinitialTypeName: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tinvalid: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['typeUpdate'],\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tentityId: EntitySelectorEntity.ResourceType,\n\t\t\ttypeSelectorId: `booking-resource-creation-types${Text.getRandom()}`,\n\t\t\ttypeName: this.initialTypeName,\n\t\t};\n\t},\n\tmethods: {\n\t\tshowTypeSelector(): void\n\t\t{\n\t\t\tconst dialog = this.getTypeSelectorDialog(this.$refs.typeSelectorAngle);\n\t\t\tdialog.show();\n\t\t},\n\t\tgetTypeSelectorDialog(bindElement: HTMLElement): Dialog\n\t\t{\n\t\t\tconst existing = Dialog.getById(this.typeSelectorId);\n\t\t\tif (existing)\n\t\t\t{\n\t\t\t\texisting.setTargetNode(bindElement);\n\n\t\t\t\treturn existing;\n\t\t\t}\n\n\t\t\treturn new Dialog({\n\t\t\t\tid: this.typeSelectorId,\n\t\t\t\ttargetNode: bindElement,\n\t\t\t\twidth: 300,\n\t\t\t\theight: 400,\n\t\t\t\tenableSearch: true,\n\t\t\t\tdropdownMode: true,\n\t\t\t\tcontext: 'bookingResourceCreationType',\n\t\t\t\tmultiple: false,\n\t\t\t\tcacheable: true,\n\t\t\t\tpreselectedItems: [[this.entityId, this.initialTypeId]],\n\t\t\t\tentities: [{ id: this.entityId, dynamicLoad: true, dynamicSearch: true }],\n\t\t\t\tpopupOptions: {\n\t\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\t},\n\t\t\t\tsearchOptions: {\n\t\t\t\t\tallowCreateItem: true,\n\t\t\t\t\tfooterOptions: { label: this.loc('BRCW_SETTINGS_CARD_TYPE_SELECTOR_CREATE_BTN') },\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\t'Search:onItemCreateAsync': (event: BaseEvent) => {\n\t\t\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\t\t\tconst query = event.getData().searchQuery.getQuery();\n\t\t\t\t\t\t\tthis.createType(query)\n\t\t\t\t\t\t\t\t.then((type) => {\n\t\t\t\t\t\t\t\t\tthis.updateResourceType(type.id, type.name);\n\t\t\t\t\t\t\t\t\tevent.getTarget().addItem(this.prepareTypeToDialog(type));\n\t\t\t\t\t\t\t\t\tevent.getTarget().hide();\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(() => resolve());\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\t'Item:onSelect': (event: BaseEvent) => {\n\t\t\t\t\t\tconst item = event.getData().item;\n\t\t\t\t\t\tthis.updateResourceType(item.getId(), item.getTitle());\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tasync createType(name: string): Promise<ResourceTypeModel>\n\t\t{\n\t\t\treturn resourceTypeService.add({ moduleId: 'booking', name });\n\t\t},\n\t\tprepareTypeToDialog(type: ResourceTypeModel): ItemOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: type.id,\n\t\t\t\tentityId: this.entityId,\n\t\t\t\ttitle: type.name,\n\t\t\t\tsort: 1,\n\t\t\t\tselected: true,\n\t\t\t\ttabs: 'recents',\n\t\t\t\tsupertitle: this.loc('BRCW_SETTINGS_CARD_TYPE_SELECTOR_SUPER_TITLE'),\n\t\t\t\tavatar: '/bitrix/js/booking/images/entity-selector/resource-type.svg',\n\t\t\t};\n\t\t},\n\t\tupdateResourceType(typeId: number, typeName: string): void\n\t\t{\n\t\t\tthis.typeName = typeName;\n\t\t\tthis.$emit('typeUpdate', typeId);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form-row booking--rcw--type-field\">\n\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_TYPE_LABEL') }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"ui-form-content booking--rcw--field-with-validation\">\n\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100\">\n\t\t\t\t\t<div ref=\"typeSelectorAngle\" class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tdata-id=\"brcw-settings-resource-type-selector\"\n\t\t\t\t\t\tclass=\"ui-ctl-element resource-creation-wizard__form-settings-element\"\n\t\t\t\t\t\t:class=\"{'--placeholder': !typeName, '--error': invalid}\"\n\t\t\t\t\t\t@click=\"showTypeSelector\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ typeName || loc('BRCW_SETTINGS_CARD_TYPE_PLACEHOLDER') }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<ErrorMessage\n\t\t\t\t\tv-if=\"invalid\"\n\t\t\t\t\t:message=\"loc('BRCW_SETTINGS_CARD_REQUIRED_FIELD')\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { EmptyRichLoc } from 'booking.component.help-desk-loc';\nimport { ErrorMessage } from '../../error-message/error-message';\n\nimport '../css/description-field.css';\n\n// @vue/component\nexport const DescriptionField = {\n\tname: 'ResourceDescriptionField',\n\tcomponents: {\n\t\tErrorMessage,\n\t\tEmptyRichLoc,\n\t},\n\tprops: {\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\temits: ['descriptionUpdate'],\n\tcomputed: {\n\t\tlocalDescription: {\n\t\t\tget(): string\n\t\t\t{\n\t\t\t\treturn this.description;\n\t\t\t},\n\t\t\tset(value: string): void\n\t\t\t{\n\t\t\t\tthis.$emit('descriptionUpdate', value);\n\t\t\t},\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form-row booking--rcw--description-field\">\n\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t<label class=\"ui-ctl-label-text\" for=\"brcw-settings-resource-description\">\n\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_DESCRIPTION_LABEL') }}\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class=\"ui-form-content booking--rcw--field-with-validation booking--rcw--resource-description\">\n\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tdata-id=\"brcw-settings-resource-description-input\"\n\t\t\t\t\t\tv-model.trim=\"localDescription\"\n\t\t\t\t\t\tid=\"brcw-settings-resource-description\"\n\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t:placeholder=\"loc('BRCW_SETTINGS_CARD_DESCRIPTION_PLACEHOLDER')\"\n\t\t\t\t\t></textarea>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BIcon as Icon } from 'ui.icon-set.api.vue';\nimport './title-layout.css';\n\nexport const TitleLayout = {\n\tname: 'ResourceSettingsCardTitleLayout',\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ticonType: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tIcon,\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard__form-settings-title-row\">\n\t\t\t<Icon\n\t\t\t\t:name=\"iconType\"\n\t\t\t\t:color=\"'var(--ui-color-primary)'\"\n\t\t\t\t:size=\"24\"\n\t\t\t/>\n\t\t\t<div class=\"resource-creation-wizard__form-settings-title\">\n\t\t\t\t{{ title }}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { HelpDesk } from 'booking.const';\nimport { HelpDeskLoc } from 'booking.component.help-desk-loc';\nimport './text-layout.css';\n\nexport const TextLayout = {\n\tname: 'ResourceSettingsCardTextLayout',\n\tprops: {\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(props): { code: string, anchorCode: string }\n\t{\n\t\treturn {\n\t\t\tcode: HelpDesk[`Resource${props.type}`].code,\n\t\t\tanchorCode: HelpDesk[`Resource${props.type}`].anchorCode,\n\t\t};\n\t},\n\tcomponents: {\n\t\tHelpDeskLoc,\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard__form-settings-text-row\">\n\t\t\t<HelpDeskLoc\n\t\t\t\t:message=\"text\"\n\t\t\t\t:code=\"code\"\n\t\t\t\t:anchor=\"anchorCode\"\n\t\t\t\tclass=\"resource-creation-wizard__form-settings-text\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { Model } from 'booking.const';\nimport { BIcon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport { Actions } from 'ui.icon-set.api.core';\n\nimport { AvatarField } from './components/avatar-field';\nimport { NameField } from './components/name-field';\nimport { TypeField } from './components/type-field';\nimport { DescriptionField } from './components/description-field';\nimport { TitleLayout } from '../title-layout/title-layout';\nimport { TextLayout } from '../text-layout/text-layout';\n\nimport './base-fields.css';\n\n// @vue/component\nexport const BaseFields = {\n\tname: 'ResourceSettingsCardBaseFields',\n\tcomponents: {\n\t\tTitleLayout,\n\t\tTextLayout,\n\t\tNameField,\n\t\tTypeField,\n\t\tDescriptionField,\n\t\tAvatarField,\n\t\tBIcon,\n\t},\n\tprops: {\n\t\tinitialResourceName: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tinitialResourceDescription: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tinitialResourceType: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tinitialResourceAvatarUrl: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\temits: [\n\t\t'nameUpdate',\n\t\t'descriptionUpdate',\n\t\t'typeUpdate',\n\t\t'avatarFileUpdate',\n\t],\n\tsetup(): { IconSet: IconSet }\n\t{\n\t\treturn {\n\t\t\tIconSet,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tadditionalInfoExpanded: this.initialAdditionalInfoExpanded(),\n\t\t\tActions,\n\t\t};\n\t},\n\tcomputed: {\n\t\tinvalidResourceName(): boolean\n\t\t{\n\t\t\treturn this.$store.state[Model.ResourceCreationWizard].invalidResourceName;\n\t\t},\n\t\tinvalidResourceType(): boolean\n\t\t{\n\t\t\treturn this.$store.state[Model.ResourceCreationWizard].invalidResourceType;\n\t\t},\n\t},\n\twatch: {\n\t\tinvalidResourceName(invalid: boolean): void\n\t\t{\n\t\t\tif (invalid)\n\t\t\t{\n\t\t\t\tthis.scrollToBaseFieldsForm();\n\t\t\t}\n\t\t},\n\t\tinvalidResourceType(invalid: boolean): void\n\t\t{\n\t\t\tif (invalid)\n\t\t\t{\n\t\t\t\tthis.scrollToBaseFieldsForm();\n\t\t\t}\n\t\t},\n\t},\n\tmethods: {\n\t\tscrollToBaseFieldsForm(): void\n\t\t{\n\t\t\tthis.$refs.baseFieldsForm?.scrollIntoView(true, { behavior: 'smooth', block: 'center' });\n\t\t},\n\t\tinitialAdditionalInfoExpanded(): boolean\n\t\t{\n\t\t\treturn (this.initialResourceAvatarUrl.length > 0 || this.initialResourceDescription.length > 0);\n\t\t},\n\t\ttoggleAdditionalInfo(): void\n\t\t{\n\t\t\tthis.additionalInfoExpanded = !this.additionalInfoExpanded;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div ref=\"baseFieldsForm\" class=\"ui-form resource-creation-wizard__form-settings --base\">\n\t\t\t<TitleLayout\n\t\t\t\t:title=\"loc('BRCW_SETTINGS_CARD_BASE_TITLE')\"\n\t\t\t\t:icon-type=\"IconSet.INFO\"\n\t\t\t/>\n\t\t\t<TextLayout\n\t\t\t\ttype=\"BaseFields\"\n\t\t\t\t:text=\"loc('BRCW_SETTINGS_CARD_BASE_DESCRIPTION')\"\n\t\t\t/>\n\t\t\t<div class=\"ui-form-row-inline booking--rcw--form-row-align\">\n\t\t\t\t<NameField\n\t\t\t\t\t:resourceName=\"initialResourceName\"\n\t\t\t\t\t:invalid=\"invalidResourceName\"\n\t\t\t\t\t@nameUpdate=\"$emit('nameUpdate', $event)\"\n\t\t\t\t/>\n\t\t\t\t<TypeField\n\t\t\t\t\t:initialTypeId=\"initialResourceType.typeId\"\n\t\t\t\t\t:initialTypeName=\"initialResourceType.typeName\"\n\t\t\t\t\t:invalid=\"invalidResourceType\"\n\t\t\t\t\t@typeUpdate=\"$emit('typeUpdate', $event)\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"booking--rcw--additional-info\">\n\t\t\t\t<div class=\"booking--rcw--additional-info-header\" @click=\"toggleAdditionalInfo\">\n\t\t\t\t\t<span class=\"booking--rcw--additional-info-title\">\n\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_ADDITIONAL_INFO_TITLE') }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<BIcon :name=\"additionalInfoExpanded ? Actions.CHEVRON_UP : Actions.CHEVRON_DOWN\" />\n\t\t\t\t</div>\n\t\t\t\t<Transition name=\"booking--rcw--additional-info\">\n\t\t\t\t\t<div v-if=\"additionalInfoExpanded\" class=\"booking--rcw--additional-info-content\">\n\t\t\t\t\t\t<AvatarField\n\t\t\t\t\t\t\t:avatarUrl=\"initialResourceAvatarUrl\"\n\t\t\t\t\t\t\t@avatarFileUpdate=\"$emit('avatarFileUpdate', $event)\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<DescriptionField\n\t\t\t\t\t\t\t:description=\"initialResourceDescription\"\n\t\t\t\t\t\t\t@descriptionUpdate=\"$emit('descriptionUpdate', $event)\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Transition>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { HelpDesk } from 'booking.const';\nimport { HelpDeskLoc } from 'booking.component.help-desk-loc';\n\nexport const ScheduleItem = {\n\tname: 'ScheduleItem',\n\temits: ['update:model-value'],\n\tprops: {\n\t\tmodelValue: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\titemClass: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): { code: string, anchorCode: string }\n\t{\n\t\treturn {\n\t\t\tcode: HelpDesk.ResourceSchedule.code,\n\t\t\tanchorCode: HelpDesk.ResourceSchedule.anchorCode,\n\t\t};\n\t},\n\tcomputed: {\n\t\tisSelected(): boolean\n\t\t{\n\t\t\treturn this.modelValue.toString() === this.value.toString();\n\t\t},\n\t},\n\tmethods: {\n\t\tselectOption()\n\t\t{\n\t\t\tthis.$emit('update:model-value', this.value);\n\t\t},\n\t},\n\tcomponents: {\n\t\tHelpDeskLoc,\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"['booking--rcw--schedule-item', { '--selected': isSelected }]\"\n\t\t\t@click=\"selectOption\"\n\t\t>\n\t\t\t<div class=\"booking--rcw--schedule-item-radio ui-ctl-radio\">\n\t\t\t\t<input\n\t\t\t\t\t:id=\"itemClass\"\n\t\t\t\t\t:checked=\"isSelected\"\n\t\t\t\t\t:value=\"value.toString()\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t@input=\"$emit('update:model-value', $event.target.value === 'true')\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"booking--rcw--schedule-item-text\">\n\t\t\t\t<label\n\t\t\t\t\t:for=\"itemClass\"\n\t\t\t\t\tclass=\"booking--rcw--schedule-item-text-title\">\n\t\t\t\t\t{{ title }}\n\t\t\t\t</label>\n\t\t\t\t<HelpDeskLoc\n\t\t\t\t\t:message=\"description\"\n\t\t\t\t\t:code=\"code\"\n\t\t\t\t\t:anchor=\"anchorCode\"\n\t\t\t\t\t:rules=\"['nowrap']\"\n\t\t\t\t\tclass=\"booking--rcw--schedule-item-text-description\"\n\t\t\t\t\tlink-class=\"booking--rcw--more booking--rcw--schedule-item-text-description-more\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"booking--rcw--schedule-item-view\" :class=\"itemClass\"></div>\n\t\t</div>\n\t`,\n};\n\nexport type IScheduleItem = {\n\titemClass: string;\n\ttitle: string;\n\tdescription: string;\n\tvalue: boolean;\n}\n","import { Loc } from 'main.core';\nimport { Set as IconSet } from 'ui.icon-set.api.vue';\nimport { TitleLayout } from '../title-layout/title-layout';\nimport { ScheduleItem } from './components/schedule-item';\nimport type { IScheduleItem } from './components/schedule-item';\n\nimport './schedule-types.css';\n\nexport const ScheduleTypes = {\n\tname: 'ResourceSettingsCardScheduleTypes',\n\temits: ['update:model-value'],\n\tprops: {\n\t\tmodelValue: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tsetup(): { title: string, titleIconType: string, items: IScheduleItem[] }\n\t{\n\t\tconst title = Loc.getMessage('BRCW_SETTINGS_CARD_SCHEDULE_TITLE_MSGVER_1');\n\t\tconst titleIconType = IconSet.OPENED_EYE;\n\t\tconst items = [\n\t\t\t{\n\t\t\t\tid: 'common',\n\t\t\t\titemClass: 'resource-creation-wizard__form-settings-schedule-view-common',\n\t\t\t\ttitle: Loc.getMessage('BRCW_SETTINGS_CARD_SCHEDULE_COLUMNS_TITLE_MSGVER_1'),\n\t\t\t\tdescription: Loc.getMessage('BRCW_SETTINGS_CARD_SCHEDULE_COLUMNS_DESCRIPTION_MSGVER_2'),\n\t\t\t\tvalue: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'extra',\n\t\t\t\titemClass: 'resource-creation-wizard__form-settings-schedule-view-extra',\n\t\t\t\ttitle: Loc.getMessage('BRCW_SETTINGS_CARD_SCHEDULE_CROSS_RESOURCING_TITLE_MSGVER_1'),\n\t\t\t\tdescription: Loc.getMessage('BRCW_SETTINGS_CARD_SCHEDULE_CROSS_RESOURCING_DESCRIPTION_MSGVER_2'),\n\t\t\t\tvalue: false,\n\t\t\t},\n\t\t];\n\n\t\treturn {\n\t\t\titems,\n\t\t\ttitle,\n\t\t\ttitleIconType,\n\t\t};\n\t},\n\tcomponents: {\n\t\tScheduleItem,\n\t\tTitleLayout,\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-settings --schedule\">\n\t\t\t<TitleLayout\n\t\t\t\t:title=\"title\"\n\t\t\t\t:iconType=\"titleIconType\"\n\t\t\t/>\n\t\t\t<div class=\"resource-creation-wizard__form-settings-schedule-view\">\n\t\t\t\t<ScheduleItem\n\t\t\t\t\tv-for=\"item in items\"\n\t\t\t\t\t:key=\"item.id\"\n\t\t\t\t\t:data-id=\"'brcw-resource-schedule-view-' + item.id\"\n\t\t\t\t\t:model-value=\"modelValue\"\n\t\t\t\t\t:item-class=\"item.itemClass\"\n\t\t\t\t\t:title=\"item.title\"\n\t\t\t\t\t:description=\"item.description\"\n\t\t\t\t\t:value=\"item.value\"\n\t\t\t\t\t@update:model-value=\"$emit('update:model-value', $event)\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { ErrorMessage } from '../../error-message/error-message';\n\n// @vue/component\nexport const SettingsItem = {\n\tname: 'IntegrationSettingsItem',\n\tcomponents: {\n\t\tErrorMessage,\n\t},\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\terrorMessage: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard__integration-block-settings-item\">\n\t\t\t<div class=\"resource-creation-wizard__integration-block-settings-item-info\">\n\t\t\t\t<div class=\"resource-creation-wizard__integration-block-settings-item-info-title\">\n\t\t\t\t\t{{ title }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"resource-creation-wizard__integration-block-settings-item-info-description\">\n\t\t\t\t\t{{ description }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<slot/>\n\t\t\t<ErrorMessage v-if=\"errorMessage\" :message=\"errorMessage\"/>\n\t\t</div>\n\t`,\n};\n","import { BaseEvent } from 'main.core.events';\nimport { TagSelector } from 'ui.entity-selector';\nimport type { TagSelectorOptions } from 'ui.entity-selector';\n\n// @vue/component\nexport const SettingsSelector = {\n\tname: 'SettingsSelector',\n\tprops: {\n\t\tvalues: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tentitiesId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmultiple: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\ttab: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: [\n\t\t'change',\n\t],\n\twatch: {\n\t\tdisabled: {\n\t\t\thandler(disabled: boolean): void\n\t\t\t{\n\t\t\t\tthis.selector?.setLocked(disabled);\n\t\t\t},\n\t\t\timmediate: true,\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tthis.selector = this.createSelector();\n\t},\n\tmounted(): void\n\t{\n\t\tthis.mountSelector();\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tthis.destroySelector();\n\t},\n\tmethods: {\n\t\tcreateSelector(): TagSelector\n\t\t{\n\t\t\tconst tagSelectionOptions: TagSelectorOptions = {\n\t\t\t\tmultiple: this.multiple,\n\t\t\t\taddButtonCaption: this.loc('BRCW_SETTINGS_CARD_INTEGRATION_SELECTOR_BTN'),\n\t\t\t\tshowCreateButton: false,\n\t\t\t\tmaxHeight: 40,\n\t\t\t\tdialogOptions: {\n\t\t\t\t\tcontext: 'bookingResourceIntersection',\n\t\t\t\t\twidth: 290,\n\t\t\t\t\theight: 340,\n\t\t\t\t\tdropdownMode: true,\n\t\t\t\t\tcompactView: true,\n\t\t\t\t\tenableSearch: true,\n\t\t\t\t\tcacheable: true,\n\t\t\t\t\tshowAvatars: false,\n\t\t\t\t\tpopupOptions: {\n\t\t\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\t\t},\n\t\t\t\t\tentities: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: this.entitiesId,\n\t\t\t\t\t\t\tdynamicLoad: true,\n\t\t\t\t\t\t\tdynamicSearch: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tpreselectedItems: this.values.map((id) => ([this.entitiesId, id])),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t'Item:onSelect': (event: BaseEvent) => {\n\t\t\t\t\t\t\tthis.select(event.getData().item.id);\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'Item:onDeselect': (event: BaseEvent) => {\n\t\t\t\t\t\t\tthis.deselect(event.getData().item.id);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tif (this.tab)\n\t\t\t{\n\t\t\t\ttagSelectionOptions.dialogOptions.tabs = [{ id: this.entitiesId }];\n\t\t\t}\n\n\t\t\treturn new TagSelector(tagSelectionOptions);\n\t\t},\n\t\tselect(itemId: number): void\n\t\t{\n\t\t\tconst itemsSet = new Set(this.values);\n\t\t\titemsSet.add(itemId);\n\n\t\t\tthis.$emit('change', [...itemsSet]);\n\t\t},\n\t\tdeselect(itemId: number): void\n\t\t{\n\t\t\tthis.$emit('change', this.values.filter((id) => id !== itemId));\n\t\t},\n\t\tmountSelector(): void\n\t\t{\n\t\t\tthis.selector.renderTo(this.$refs.settingsSelector);\n\n\t\t\tif (this.disabled)\n\t\t\t{\n\t\t\t\tthis.selector.setLocked(this.disabled);\n\t\t\t}\n\t\t},\n\t\tdestroySelector(): void\n\t\t{\n\t\t\tthis.selector.getDialog().destroy();\n\t\t\tthis.selector = null;\n\t\t\tthis.$refs.settingsSelector.innerHTML = '';\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tref=\"settingsSelector\"\n\t\t\tclass=\"resource-creation-wizard__integration-block-settings-selector\"\n\t\t></div>\n\t`,\n};\n","import { createNamespacedHelpers } from 'ui.vue3.vuex';\nimport { BIcon as Icon, Main } from 'ui.icon-set.api.vue';\n\nimport { EntitySelectorEntity, Model } from 'booking.const';\nimport { Switcher } from 'booking.component.switcher';\nimport { Reminder as UiReminder } from 'booking.component.reminder';\n\nimport { SettingsItem } from '../settings-item';\nimport { SettingsSelector } from '../settings-selector';\n\nconst { mapGetters: mapResourceGetters, mapActions } = createNamespacedHelpers(Model.ResourceCreationWizard);\n\n// @vue/component\nexport const IntegrationCalendar = {\n\tname: 'IntegrationCalendar',\n\tcomponents: {\n\t\tIcon,\n\t\tSwitcher,\n\t\tSettingsItem,\n\t\tSettingsSelector,\n\t\tUiReminder,\n\t},\n\tsetup(): IntegrationCalendarData\n\t{\n\t\tconst iconName = Main.CALENDAR_1;\n\t\tconst iconColor = 'var(--ui-color-primary)';\n\t\tconst iconSize = 22;\n\t\tconst entityRoomId = EntitySelectorEntity.Room;\n\t\tconst entityUserId = EntitySelectorEntity.User;\n\n\t\treturn {\n\t\t\ticonName,\n\t\t\ticonColor,\n\t\t\ticonSize,\n\t\t\tentityRoomId,\n\t\t\tentityUserId,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisVisible: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapResourceGetters({\n\t\t\tentityCalendar: 'entityCalendar',\n\t\t\tisIntegrationCalendarEnabled: 'isIntegrationCalendarEnabled',\n\t\t\tinvalidIntegrationCalendarUser: 'invalidIntegrationCalendarUser',\n\t\t}),\n\t\tisEnabled: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.$store.getters[`${Model.ResourceCreationWizard}/isIntegrationCalendarEnabled`];\n\t\t\t},\n\t\t\tset(isIntegrationCalendarEnabled: boolean): boolean\n\t\t\t{\n\t\t\t\tthis.$store.dispatch(\n\t\t\t\t\t`${Model.ResourceCreationWizard}/setIsIntegrationCalendarEnabled`,\n\t\t\t\t\tisIntegrationCalendarEnabled,\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t\treminders: {\n\t\t\tget(): Array\n\t\t\t{\n\t\t\t\treturn (this.entityCalendar?.data?.reminders || []).map((r) => r.count);\n\t\t\t},\n\t\t\tset(reminders: number[]): void\n\t\t\t{\n\t\t\t\tthis.updateResourceEntityCalendar({\n\t\t\t\t\treminders: reminders.map((r: number) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: 'min',\n\t\t\t\t\t\t\tcount: r,\n\t\t\t\t\t\t};\n\t\t\t\t\t}),\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\t\tisDisabled(): boolean\n\t\t{\n\t\t\tif (!this.isEnabled)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn !this.isEnabled || !this.entityCalendar || (this.entityCalendar?.data.userIds.length === 0);\n\t\t},\n\t\tuserErrorMessage(): string | null\n\t\t{\n\t\t\tif (!this.isEnabled || !this.invalidIntegrationCalendarUser)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_INTEGRATION_CALENDAR_SETTING_USER_ERROR_MESSAGE');\n\t\t},\n\t},\n\twatch: {\n\t\tinvalidIntegrationCalendarUser(invalid: boolean): void\n\t\t{\n\t\t\tif (invalid)\n\t\t\t{\n\t\t\t\tthis.scrollToUserField();\n\t\t\t}\n\t\t},\n\t},\n\tbeforeMount(): void\n\t{\n\t\tthis.isVisible = this.$store.getters[`${Model.ResourceCreationWizard}/isIntegrationCalendarEnabled`];\n\t},\n\tmethods: {\n\t\t...mapActions([\n\t\t\t'updateResource',\n\t\t\t'updateResourceEntityCalendar',\n\t\t\t'createResourceEntityCalendar',\n\t\t\t'setInvalidIntegrationCalendarUser',\n\t\t]),\n\t\tasync toggleEnabled(): void\n\t\t{\n\t\t\tif (!this.entityCalendar)\n\t\t\t{\n\t\t\t\tawait this.createResourceEntityCalendar();\n\t\t\t}\n\n\t\t\tthis.isEnabled = !this.isEnabled;\n\n\t\t\tif (this.isEnabled && !this.isVisible)\n\t\t\t{\n\t\t\t\tthis.isVisible = true;\n\t\t\t}\n\n\t\t\tif (!this.isEnabled)\n\t\t\t{\n\t\t\t\tawait this.setInvalidIntegrationCalendarUser(false);\n\t\t\t}\n\t\t},\n\t\tasync updateUsers(userIds: number[]): Pormise<void>\n\t\t{\n\t\t\tawait this.updateResourceEntityCalendar({\n\t\t\t\tuserIds: userIds.map((id) => parseInt(id, 10)),\n\t\t\t});\n\n\t\t\tif (userIds.length > 0)\n\t\t\t{\n\t\t\t\tawait this.setInvalidIntegrationCalendarUser(false);\n\t\t\t}\n\t\t},\n\t\tasync updateLocationId(locationIds: number[]): Promise<void>\n\t\t{\n\t\t\tawait this.updateResourceEntityCalendar({\n\t\t\t\tlocationId: locationIds.length > 0 ? (parseInt(locationIds[0], 10) ?? null) : null,\n\t\t\t});\n\t\t},\n\t\tscrollToUserField(): void\n\t\t{\n\t\t\tthis.$refs.user.$el?.scrollIntoView(true, {\n\t\t\t\tbehavior: 'smooth',\n\t\t\t\tblock: 'center',\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard__integration-block\">\n\t\t\t<div class=\"resource-creation-wizard__integration-block-header\">\n\t\t\t\t<Icon :name=\"iconName\" :size=\"iconSize\" :color=\"iconColor\"/>\n\t\t\t\t<div class=\"resource-creation-wizard__integration-block-title\">\n\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_INTEGRATION_CALENDAR_TITLE') }}\n\t\t\t\t</div>\n\t\t\t\t<Switcher\n\t\t\t\t\tclass=\"resource-creation-wizard__integration-block-switcher\"\n\t\t\t\t\tdata-id=\"resource-creation-wizard__integration-block-switcher-calendar\"\n\t\t\t\t\t:hiddenText=\"true\"\n\t\t\t\t\t:model-value=\"isEnabled\"\n\t\t\t\t\t@toggle=\"toggleEnabled\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"resource-creation-wizard__integration-block-description\">\n\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_INTEGRATION_CALENDAR_TEXT') }}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-if=\"isVisible\"\n\t\t\t\tclass=\"resource-creation-wizard__integration-block-settings\"\n\t\t\t>\n\t\t\t\t<SettingsItem\n\t\t\t\t\tref=\"user\"\n\t\t\t\t\t:title=\"loc('BRCW_SETTINGS_CARD_INTEGRATION_CALENDAR_SETTING_USER_TITLE')\"\n\t\t\t\t\t:description=\"loc('BRCW_SETTINGS_CARD_INTEGRATION_CALENDAR_SETTING_USER_TEXT')\"\n\t\t\t\t\t:errorMessage=\"userErrorMessage\"\n\t\t\t\t>\n\t\t\t\t\t<SettingsSelector\n\t\t\t\t\t\t:class=\"{ '--warning': entityCalendar?.data?.userIds.length === 0 && entityCalendar?.data?.locationId}\"\n\t\t\t\t\t\tid=\"resource-creation-wizard__integration-block-users\"\n\t\t\t\t\t\tdata-element=\"resource-creation-wizard__integration-block-users\"\n\t\t\t\t\t\t:entitiesId=\"entityUserId\"\n\t\t\t\t\t\t:values=\"entityCalendar?.data.userIds ?? []\"\n\t\t\t\t\t\t:disabled=\"!isEnabled\"\n\t\t\t\t\t\t@change=\"updateUsers\"\n\t\t\t\t\t/>\n\t\t\t\t</SettingsItem>\n\t\t\t\t<SettingsItem\n\t\t\t\t\t:title=\"loc('BRCW_SETTINGS_CARD_INTEGRATION_CALENDAR_SETTING_ROOM_TITLE')\"\n\t\t\t\t\t:description=\"loc('BRCW_SETTINGS_CARD_INTEGRATION_CALENDAR_SETTING_ROOM_TEXT')\"\n\t\t\t\t>\n\t\t\t\t\t<SettingsSelector\n\t\t\t\t\t\tid=\"resource-creation-wizard__integration-block-resource\"\n\t\t\t\t\t\tdata-element=\"resource-creation-wizard__integration-block-resource\"\n\t\t\t\t\t\t:entitiesId=\"entityRoomId\"\n\t\t\t\t\t\t:multiple=\"false\"\n\t\t\t\t\t\t:values=\"entityCalendar?.data.locationId ? [String(entityCalendar.data.locationId)] : []\"\n\t\t\t\t\t\t:disabled=\"isDisabled\"\n\t\t\t\t\t\ttab\n\t\t\t\t\t\t@change=\"updateLocationId\"\n\t\t\t\t\t/>\n\t\t\t\t</SettingsItem>\n\t\t\t\t<SettingsItem\n\t\t\t\t\t:title=\"loc('BRCW_SETTINGS_CARD_INTEGRATION_CALENDAR_SETTING_REMINDER_TITLE')\"\n\t\t\t\t\t:description=\"loc('BRCW_SETTINGS_CARD_INTEGRATION_CALENDAR_SETTING_REMINDER_TEXT')\"\n\t\t\t\t>\n\t\t\t\t\t<UiReminder\n\t\t\t\t\t\tv-model=\"reminders\"\n\t\t\t\t\t\t:disabled=\"isDisabled\"\n\t\t\t\t\t/>\n\t\t\t\t</SettingsItem>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n\ntype IntegrationCalendarData = {\n\ticonName: string;\n\ticonColor: string;\n\ticonSize: number;\n\tentityRoomId: string;\n\tentityUserId: string;\n}\n","import { Loc } from 'main.core';\n\nimport { Set as IconSet } from 'ui.icon-set.api.vue';\nimport { TextLayout } from '../text-layout/text-layout';\nimport { TitleLayout } from '../title-layout/title-layout';\nimport { IntegrationCalendar } from './components/calendar/integration-calendar';\n\nimport './integration.css';\n\nexport const Integration = {\n\tname: 'Integration',\n\tcomponents: {\n\t\tTitleLayout,\n\t\tTextLayout,\n\t\tIntegrationCalendar,\n\t},\n\tsetup(): IntegrationSetupObject\n\t{\n\t\tconst title = Loc.getMessage('BRCW_SETTINGS_CARD_INTEGRATION_TITLE');\n\t\tconst titleIconType = IconSet.COLLABORATION;\n\n\t\treturn {\n\t\t\ttitle,\n\t\t\ttitleIconType,\n\t\t};\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-settings\">\n\t\t\t<TitleLayout\n\t\t\t\t:title=\"title\"\n\t\t\t\t:iconType=\"titleIconType\"\n\t\t\t/>\n\t\t\t<TextLayout\n\t\t\t\ttype=\"IntegrationSettings\"\n\t\t\t\t:text=\"loc('BRCW_SETTINGS_CARD_INTEGRATION_DESCRIPTION')\"\n\t\t\t/>\n\t\t\t<IntegrationCalendar/>\n\t\t</div>\n\t`,\n};\n\ntype IntegrationSetupObject = {\n\ttitle: string,\n\ttitleIconType: string,\n}\n","import { createNamespacedHelpers } from 'ui.vue3.vuex';\nimport { DateTimeFormat } from 'main.date';\n\nconst { mapGetters: mapResourceGetters } = createNamespacedHelpers('resource-creation-wizard');\n\nexport const WorkTimeMixin = {\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tselected: {\n\t\t\t\tMon: false,\n\t\t\t\tTue: false,\n\t\t\t\tWed: false,\n\t\t\t\tThu: false,\n\t\t\t\tFri: false,\n\t\t\t\tSat: false,\n\t\t\t\tSun: false,\n\t\t\t},\n\t\t\tdaysLabel: '',\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.initialDays.forEach((day) => {\n\t\t\tif (Object.prototype.hasOwnProperty.call(this.selected, day))\n\t\t\t{\n\t\t\t\tthis.selected[day] = true;\n\t\t\t}\n\t\t});\n\n\t\tthis.daysLabel = this.formatDaysLabel();\n\t},\n\tmethods: {\n\t\tformatDaysLabel(): string\n\t\t{\n\t\t\tconst defaultString = this.loc('BRCW_SETTINGS_CARD_WORK_TIME_DAYS');\n\n\t\t\tconst weekDays = this.companyScheduleSlots[0].weekDays;\n\t\t\tif (this.isArraysEqual(this.selectedDays, weekDays))\n\t\t\t{\n\t\t\t\treturn defaultString;\n\t\t\t}\n\n\t\t\tconst orderedDays = Object.keys(this.daysLabelMap);\n\n\t\t\tconst sortedSelectedDays = this.selectedDays.sort((a, b) => {\n\t\t\t\treturn orderedDays.indexOf(a) - orderedDays.indexOf(b);\n\t\t\t});\n\t\t\tconst formattedDays = sortedSelectedDays.map((day) => this.daysLabelMap[day]);\n\n\t\t\treturn String(formattedDays.join(', '));\n\t\t},\n\t\tgetDayDefaultIndex(dayKey): number\n\t\t{\n\t\t\tconst dayIndices = {\n\t\t\t\tSun: 0,\n\t\t\t\tMon: 1,\n\t\t\t\tTue: 2,\n\t\t\t\tWed: 3,\n\t\t\t\tThu: 4,\n\t\t\t\tFri: 5,\n\t\t\t\tSat: 6,\n\t\t\t};\n\n\t\t\treturn dayIndices[dayKey];\n\t\t},\n\t\tisArraysEqual(first: [], second: []): boolean\n\t\t{\n\t\t\treturn first.length === second.length && first.every((value, index) => value === second[index]);\n\t\t},\n\t},\n\tcomputed: {\n\t\t...mapResourceGetters({\n\t\t\tcompanyScheduleSlots: 'getCompanyScheduleSlots',\n\t\t\tweekStart: 'weekStart',\n\t\t}),\n\t\tselectedDays(): Array\n\t\t{\n\t\t\treturn Object.keys(this.selected).filter((day) => this.selected[day]);\n\t\t},\n\t\tdaysLabelMap(): Object\n\t\t{\n\t\t\tconst weekdays = [];\n\t\t\tconst format = 'D';\n\n\t\t\tconst allDays = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];\n\n\t\t\tconst startIndex = allDays.indexOf(this.weekStart);\n\n\t\t\tconst orderedDays = [...allDays.slice(startIndex), ...allDays.slice(0, startIndex)];\n\n\t\t\torderedDays.forEach((dayKey, index) => {\n\t\t\t\tconst currentDayIndex = new Date().getDay();\n\t\t\t\tconst targetDayIndex = this.getDayDefaultIndex(dayKey);\n\t\t\t\tconst dayDifference = (targetDayIndex - currentDayIndex + 7) % 7;\n\n\t\t\t\tconst dayDate = new Date();\n\t\t\t\tdayDate.setDate(dayDate.getDate() + dayDifference);\n\n\t\t\t\tweekdays[index] = DateTimeFormat.format(format, dayDate);\n\t\t\t});\n\n\t\t\treturn orderedDays.reduce((result, dayKey, index) => {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\tresult[dayKey] = weekdays[index];\n\n\t\t\t\treturn result;\n\t\t\t}, {});\n\t\t},\n\t},\n};\n","import { PopupOptions } from 'main.popup';\nimport { Popup } from 'booking.component.popup';\nimport { WorkTimeMixin } from './work-time-mixin';\n\nimport './week-days-popup.css';\n\nexport const WeekDaysPopup = {\n\tname: 'ResourceSettingsCardWeekDaysPopup',\n\temits: ['select', 'close'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tbindElement: {\n\t\t\ttype: HTMLElement,\n\t\t\trequired: true,\n\t\t},\n\t\tinitialDays: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tPopup,\n\t},\n\tmixins: [WorkTimeMixin],\n\tmethods: {\n\t\tclose(): void\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t},\n\t\tclick(day: string): void\n\t\t{\n\t\t\tconst trueKeys = Object.keys(this.selected).filter((key) => this.selected[key] === true);\n\n\t\t\tif (trueKeys.length === 1 && trueKeys[0] === day)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.selected[day] = !this.selected[day];\n\n\t\t\tthis.$emit('select', this.selectedDays, this.formatDaysLabel());\n\t\t},\n\t},\n\tcomputed: {\n\t\tpopupId(): string\n\t\t{\n\t\t\treturn `booking-work-time-popup-${this.id}`;\n\t\t},\n\t\tconfig(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\toffsetRight: this.bindElement.offsetWidth,\n\t\t\t\tangle: false,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceBindPosition: true,\n\t\t\t\t\tforceLeft: true,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Popup\n\t\t\t:id=\"popupId\"\n\t\t\t:config=\"config\"\n\t\t\t@close=\"close\"\n\t\t\tref=\"popup\"\n\t\t>\n\t\t\t<div class=\"resource-creation-wizard__form-week-days-popup\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"(day, index) in daysLabelMap\"\n\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t:data-id=\"'brcw-resource-work-time-week-day-' + index + '-' + id\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-week-days-popup-weekday\"\n\t\t\t\t\t:class=\"{ '--selected': selected[index] }\"\n\t\t\t\t\t@click=\"() => click(index)\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-week-days-popup-weekday-text\">\n\t\t\t\t\t\t{{ day }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-week-days-popup-weekday-icon\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n","import { Dom } from 'main.core';\nimport { DateTimeFormat } from 'main.date';\nimport { MenuManager, Menu, MenuItem } from 'main.popup';\nimport type { SlotRange } from 'booking.model.resources';\nimport { WorkTimeMixin } from './work-time-mixin';\nimport { WeekDaysPopup } from './week-days-popup';\n\nimport './work-time-slot-range.css';\n\nexport const WorkTimeSlotRange = {\n\tname: 'ResourceSettingsCardWorkTimeSlotRange',\n\temits: ['add', 'update', 'remove'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tisLastRange: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tinitialSlotRange: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tWeekDaysPopup,\n\t},\n\tmixins: [WorkTimeMixin],\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tfromId: 'from',\n\t\t\ttoId: 'to',\n\t\t\tfromTs: 0,\n\t\t\ttoTs: 0,\n\t\t\tduration: 0,\n\t\t\tisShownDays: false,\n\t\t\tarrow: {\n\t\t\t\tdays: false,\n\t\t\t\tfrom: false,\n\t\t\t\tto: false,\n\t\t\t},\n\t\t\tremoveSlot: !this.isLastRange,\n\t\t\tlocalSlotRange: { ...this.initialSlotRange },\n\t\t\tinitialDays: [...this.initialSlotRange.weekDays],\n\t\t};\n\t},\n\tcreated(): void\n\t{\n\t\tthis.fromTs = this.slotRange.from;\n\t\tthis.toTs = this.slotRange.to;\n\t\tthis.duration = this.toTs - this.fromTs;\n\t},\n\twatch: {\n\t\t'slotRange.from': function(value) {\n\t\t\tthis.fromTs = value;\n\n\t\t\tthis.toTs = this.fromTs + this.duration;\n\n\t\t\tthis.update();\n\t\t},\n\t\t'slotRange.to': function(value) {\n\t\t\tthis.toTs = value;\n\n\t\t\tif (this.toTs <= this.fromTs)\n\t\t\t{\n\t\t\t\tthis.fromTs = this.toTs - this.duration;\n\t\t\t}\n\n\t\t\tthis.duration = this.toTs - this.fromTs;\n\n\t\t\tthis.update();\n\t\t},\n\t},\n\tmethods: {\n\t\tshowDays(): void\n\t\t{\n\t\t\tthis.isShownDays = true;\n\t\t\tthis.arrow.days = true;\n\t\t},\n\t\thideDays(): void\n\t\t{\n\t\t\tthis.isShownDays = false;\n\t\t\tthis.arrow.days = false;\n\t\t},\n\t\tselectDays(weekDays: Array, daysLabel: string): void\n\t\t{\n\t\t\tthis.slotRange.weekDays = weekDays;\n\n\t\t\tthis.daysLabel = daysLabel;\n\n\t\t\tthis.update();\n\t\t},\n\t\tshow(bindElement: HTMLElement, id: string): void\n\t\t{\n\t\t\tif (this.arrow[id] === true)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst menuId = `booking-work-time-popup-${this.id}-${id}`;\n\t\t\tMenuManager.destroy(menuId);\n\n\t\t\tconst timeList: Menu = MenuManager.create({\n\t\t\t\tid: menuId,\n\t\t\t\tclassName: 'resource-creation-wizard__form-work-time-menu',\n\t\t\t\tbindElement,\n\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tevents: {\n\t\t\t\t\tonShow: () => {\n\t\t\t\t\t\tthis.arrow[id] = true;\n\n\t\t\t\t\t\tconst selectedItem: MenuItem = timeList.getMenuItems()\n\t\t\t\t\t\t\t.find((item: MenuItem) => Dom.hasClass(item.getLayout().item, '--selected'))\n\t\t\t\t\t\t;\n\n\t\t\t\t\t\tconst itemHeight = 36;\n\t\t\t\t\t\tconst offset = 2 * itemHeight;\n\n\t\t\t\t\t\tconst scrollContainer = timeList.getPopupWindow().getContentContainer();\n\t\t\t\t\t\tconst topPosition = Dom.getRelativePosition(selectedItem.getContainer(), scrollContainer).top;\n\n\t\t\t\t\t\tscrollContainer.scrollTo({\n\t\t\t\t\t\t\ttop: scrollContainer.scrollTop + topPosition - offset,\n\t\t\t\t\t\t\tbehavior: 'instant',\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tthis.arrow[id] = false;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tmaxHeight: 200,\n\t\t\t\tminWidth: bindElement.offsetWidth,\n\t\t\t});\n\n\t\t\tfor (const [key, value] of Object.entries(this.generateTimeMap(id)))\n\t\t\t{\n\t\t\t\tconst minutes = parseInt(key, 10);\n\t\t\t\tconst defaultClass = 'menu-popup-item menu-popup-no-icon';\n\n\t\t\t\ttimeList.addMenuItem({\n\t\t\t\t\ttext: value,\n\t\t\t\t\tclassName: this.slotRange[id] === minutes ? `${defaultClass} --selected` : defaultClass,\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tminutes,\n\t\t\t\t\t},\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.slotRange[id] = parseInt(minutes, 10);\n\t\t\t\t\t\ttimeList.close();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\ttimeList.show();\n\t\t},\n\t\tgenerateTimeMap(id: string): Object\n\t\t{\n\t\t\tconst timeMap = {};\n\n\t\t\tconst timeFormat = DateTimeFormat.getFormat('SHORT_TIME_FORMAT');\n\n\t\t\tconst interval = 30;\n\t\t\tconst from = (id === this.toId ? this.fromTs + interval : 0);\n\t\t\tconst to = (id === this.fromId ? this.toTs : 1440);\n\t\t\tfor (let minutes = from; minutes < to; minutes += interval)\n\t\t\t{\n\t\t\t\tconst timestamp = new Date().setHours(0, minutes, 0, 0) / 1000;\n\t\t\t\ttimeMap[minutes] = DateTimeFormat.format(timeFormat, timestamp);\n\t\t\t}\n\n\t\t\tif (id === this.toId)\n\t\t\t{\n\t\t\t\tconst midnightTimestamp = new Date().setHours(0, 0, 0, 0) / 1000;\n\t\t\t\ttimeMap[to] = DateTimeFormat.format(timeFormat, midnightTimestamp);\n\t\t\t}\n\n\t\t\treturn timeMap;\n\t\t},\n\t\tclickBtn(): void\n\t\t{\n\t\t\tif (this.removeSlot === false)\n\t\t\t{\n\t\t\t\tthis.removeSlot = true;\n\n\t\t\t\tthis.$emit('add');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.removeSlot = false;\n\n\t\t\t\tthis.$emit('remove', this.id);\n\t\t\t}\n\t\t},\n\t\tupdate(): void\n\t\t{\n\t\t\tthis.$emit('update', this.id, this.slotRange);\n\t\t},\n\t},\n\tcomputed: {\n\t\tdaysId(): string\n\t\t{\n\t\t\treturn `days-${this.id}`;\n\t\t},\n\t\tdays(): HTMLElement\n\t\t{\n\t\t\treturn this.$refs.days;\n\t\t},\n\t\tslotRange(): SlotRange\n\t\t{\n\t\t\treturn this.localSlotRange;\n\t\t},\n\t\tfromLabel(): string\n\t\t{\n\t\t\tconst timeMap = this.generateTimeMap(this.fromId);\n\n\t\t\treturn timeMap[this.slotRange.from];\n\t\t},\n\t\ttoLabel(): string\n\t\t{\n\t\t\tconst timeMap = this.generateTimeMap(this.toId);\n\n\t\t\treturn timeMap[this.slotRange.to];\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form-content resource-creation-wizard__form-work-time-selector-widget\">\n\t\t\t<div class=\"ui-form-row resource-creation-wizard__form-work-time-selector-widget-days\">\n\t\t\t\t<div\n\t\t\t\t\tref=\"days\"\n\t\t\t\t\t:data-id=\"'brcw-resource-work-time-slot-range-days-' + id\"\n\t\t\t\t\tclass=\"rcw-ui-ctl ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-sm ui-ctl-round\"\n\t\t\t\t\t@click=\"showDays\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-angle\"\n\t\t\t\t\t\t:class=\"{ '--active': arrow.days }\"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div class=\"ui-ctl-element\">\n\t\t\t\t\t\t{{ daysLabel }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<WeekDaysPopup\n\t\t\t\t\t\tv-if=\"isShownDays\"\n\t\t\t\t\t\t:id=\"daysId\"\n\t\t\t\t\t\t:bindElement=\"days\"\n\t\t\t\t\t\t:initialDays=\"slotRange.weekDays\"\n\t\t\t\t\t\t@select=\"selectDays\"\n\t\t\t\t\t\t@close=\"hideDays\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"ui-form-row resource-creation-wizard__form-work-time-selector-widget-time\">\n\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tref=\"from\"\n\t\t\t\t\t\t\t:data-id=\"'brcw-resource-work-time-slot-range-from-' + id\"\n\t\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-sm ui-ctl-round\"\n\t\t\t\t\t\t\t@click=\"() => show($refs.from, fromId)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-angle\"\n\t\t\t\t\t\t\t\t:class=\"{ '--active': arrow.from }\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div class=\"ui-ctl-element\">{{ fromLabel }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t<div class=\"resource-creation-wizard__form-work-time-selector-dash\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tref=\"to\"\n\t\t\t\t\t\t\t:data-id=\"'brcw-resource-work-time-slot-range-to-' + id\"\n\t\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-sm ui-ctl-round\"\n\t\t\t\t\t\t\t@click=\"() => show($refs.to, toId)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-angle\"\n\t\t\t\t\t\t\t\t:class=\"{ '--active': arrow.to }\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div class=\"ui-ctl-element\">{{ toLabel }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"ui-form-row resource-creation-wizard__form-work-time-selector-btn-row\">\n\t\t\t\t<div\n\t\t\t\t\t:data-id=\"'brcw-resource-work-time-slot-range-add-' + id\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-work-time-selector-btn\"\n\t\t\t\t\t:class=\"{ '--remove': removeSlot }\"\n\t\t\t\t\t@click=\"clickBtn\"\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Text } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\n\nimport { Timezone } from 'booking.lib.timezone';\nimport type { SlotRange } from 'booking.model.resources';\nimport { WorkTimeSlotRange } from './work-time-slot-range';\n\nimport './work-time-selector.css';\n\nexport const WorkTimeSelector = {\n\tname: 'ResourceSettingsCardWorkTimeSelector',\n\temits: [\n\t\t'update',\n\t\t'updateGlobalSchedule',\n\t\t'getGlobalSchedule',\n\t],\n\tprops: {\n\t\tinitialSlotRanges: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tisGlobalSchedule: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tdefaultSlotRange: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tinitialTimezone: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcurrentTimezone: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tisCompanyScheduleAccess: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tcompanyScheduleUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tWorkTimeSlotRange,\n\t\tIcon,\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tlocalSlotRanges: this.processSlotRanges(this.initialSlotRanges),\n\t\t\tisChecked: this.isGlobalSchedule,\n\t\t\thasTimezonesDifference: false,\n\t\t\tformattedInitialOffset: '',\n\t\t\tformattedCurrentOffset: '',\n\t\t};\n\t},\n\tcreated(): void\n\t{\n\t\tthis.calculateDifferenceBetweenTimezones(this.initialTimezone, this.currentTimezone);\n\t},\n\twatch: {\n\t\tinitialSlotRanges: {\n\t\t\thandler(newSlotRanges)\n\t\t\t{\n\t\t\t\tthis.localSlotRanges = this.processSlotRanges(newSlotRanges);\n\t\t\t},\n\t\t\tdeep: true,\n\t\t},\n\t\tisChecked(checked): void\n\t\t{\n\t\t\tthis.$emit('updateGlobalSchedule', checked);\n\t\t},\n\t},\n\tmethods: {\n\t\topenCompanyWorkTime(event): void\n\t\t{\n\t\t\tconst isTextClick = event.target === event.currentTarget;\n\t\t\tif (\n\t\t\t\t!isTextClick\n\t\t\t\t&& this.isCompanyScheduleAccess\n\t\t\t\t&& this.companyScheduleUrl !== ''\n\t\t\t)\n\t\t\t{\n\t\t\t\ttop.BX.Event.EventEmitter.subscribeOnce(\n\t\t\t\t\ttop.BX.Event.EventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t'SidePanel.Slider:onLoad',\n\t\t\t\t\t(baseEvent: BaseEvent) => {\n\t\t\t\t\t\tconst slider = baseEvent.getTarget();\n\t\t\t\t\t\tslider.getWindow().BX.Event.EventEmitter.subscribeOnce(\n\t\t\t\t\t\t\tslider.getWindow().BX.Event.EventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t\t\t'BX.Intranet.Settings:onSuccessSave',\n\t\t\t\t\t\t\t(innerBaseEvent: BaseEvent) => {\n\t\t\t\t\t\t\t\tconst extraSettings = innerBaseEvent.getData();\n\t\t\t\t\t\t\t\textraSettings.reloadAfterClose = false;\n\n\t\t\t\t\t\t\t\tthis.$emit('getGlobalSchedule');\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t);\n\n\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\tthis.companyScheduleUrl,\n\t\t\t\t\t{ cacheable: false },\n\t\t\t\t);\n\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t},\n\t\tupdateSlotRange(index: number, slotRange: SlotRange): void\n\t\t{\n\t\t\tthis.slotRanges[index] = slotRange;\n\n\t\t\tthis.$emit('update', this.slotRanges);\n\t\t},\n\t\taddSlotRange(): void\n\t\t{\n\t\t\tthis.slotRanges.push(this.defaultSlotRange);\n\n\t\t\tthis.$emit('update', this.slotRanges);\n\t\t},\n\t\tremoveSlotRange(index: number): void\n\t\t{\n\t\t\tthis.slotRanges.splice(index, 1);\n\n\t\t\tthis.$emit('update', this.slotRanges);\n\t\t},\n\t\tprocessSlotRanges(slotRanges): SlotRange[]\n\t\t{\n\t\t\treturn slotRanges.map((slotRange) => {\n\t\t\t\tif (slotRange.id === null)\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...slotRange,\n\t\t\t\t\t\tid: Text.getRandom(),\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn slotRange;\n\t\t\t});\n\t\t},\n\t\tgetTimezoneOffset(timeZone: string): number\n\t\t{\n\t\t\treturn Timezone.getOffset(Date.now(), timeZone) / (-60);\n\t\t},\n\t\tcalculateDifferenceBetweenTimezones(initialTimezone: string, currentTimezone: string): void\n\t\t{\n\t\t\tconst initialOffset = this.getTimezoneOffset(initialTimezone);\n\t\t\tconst currentOffset = this.getTimezoneOffset(currentTimezone);\n\n\t\t\tthis.hasTimezonesDifference = initialOffset !== currentOffset;\n\n\t\t\tif (this.hasTimezonesDifference)\n\t\t\t{\n\t\t\t\tconst formatOffset = (offset) => {\n\t\t\t\t\tconst sign = offset >= 0 ? '+' : '-';\n\t\t\t\t\tconst hours = Math.floor(Math.abs(offset) / 60);\n\t\t\t\t\tconst minutes = Math.abs(offset) % 60;\n\n\t\t\t\t\treturn `${sign}${hours}:${minutes.toString().padStart(2, '0')}`;\n\t\t\t\t};\n\n\t\t\t\tthis.formattedInitialOffset = `UTC ${formatOffset(-initialOffset)} ${initialTimezone}`;\n\n\t\t\t\tconst totalDifferenceMinutes = currentOffset - initialOffset;\n\n\t\t\t\tthis.formattedCurrentOffset = formatOffset(totalDifferenceMinutes);\n\t\t\t}\n\t\t},\n\t\tonSlotClick(): void\n\t\t{\n\t\t\tthis.isChecked = false;\n\t\t},\n\t},\n\tcomputed: {\n\t\tcompanyWorkTimeOptionLabel(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_WORK_TIME_COMPANY_OPTION');\n\t\t},\n\t\tslotRanges(): SlotRange[]\n\t\t{\n\t\t\treturn this.localSlotRanges;\n\t\t},\n\t\tisSlotsDisabled(): boolean\n\t\t{\n\t\t\treturn this.isChecked;\n\t\t},\n\t\ttimezoneIconType(): string\n\t\t{\n\t\t\treturn IconSet.EARTH_TIME;\n\t\t},\n\t\tformattedTimezonesText(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_WORK_TIME_TIMEZONES')\n\t\t\t\t.replace('#utc#', this.formattedInitialOffset)\n\t\t\t\t.replace('#difference#', this.formattedCurrentOffset);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-work-time-selector\">\n\t\t\t<div class=\"ui-form-row-inline\">\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<label\n\t\t\t\t\t\tfor=\"brcw-settings-work-time-company-option\"\n\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-checkbox\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"brcw-settings-work-time-company-option\"\n\t\t\t\t\t\t\tdata-id=\"brcw-settings-work-time-company-option\"\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\tv-model=\"isChecked\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"ui-ctl-label-text work-time-selector-label-text\"\n\t\t\t\t\t\t\t:class=\"{'--disabled': !isCompanyScheduleAccess || companyScheduleUrl === ''}\"\n\t\t\t\t\t\t\t@click=\"openCompanyWorkTime\"\n\t\t\t\t\t\t\tv-html=\"companyWorkTimeOptionLabel\"\n\t\t\t\t\t\t></span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclass=\"resource-creation-wizard__form-work-time-selector-slots\"\n\t\t\t\t:class=\"{'--disabled': isSlotsDisabled }\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"(slotRange, index) in slotRanges\"\n\t\t\t\t\t:key=\"slotRange.id\"\n\t\t\t\t\t:data-id=\"'brcw-resource-work-time-slot-' + slotRange.id\"\n\t\t\t\t\tclass=\"ui-form-row-inline\"\n\t\t\t\t\t@click=\"onSlotClick\"\n\t\t\t\t>\n\t\t\t\t\t<WorkTimeSlotRange\n\t\t\t\t\t\t:id=\"index\"\n\t\t\t\t\t\t:initialSlotRange=\"slotRange\"\n\t\t\t\t\t\t:isLastRange=\"index === slotRanges.length - 1\"\n\t\t\t\t\t\t@add=\"addSlotRange\"\n\t\t\t\t\t\t@update=\"updateSlotRange\"\n\t\t\t\t\t\t@remove=\"removeSlotRange\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"hasTimezonesDifference\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-work-time-selector-slots-timezone\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-work-time-selector-slots-timezone-icon\">\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t:name=\"timezoneIconType\"\n\t\t\t\t\t\t\t:color=\"'var(--ui-color-palette-gray-50)'\"\n\t\t\t\t\t\t\t:size=\"24\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"resource-creation-wizard__form-work-time-selector-slots-timezone-text\"\n\t\t\t\t\t\tv-html=\"formattedTimezonesText\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Set as IconSet } from 'ui.icon-set.api.vue';\nimport type { SlotRange } from 'booking.model.resources';\nimport { TextLayout } from '../text-layout/text-layout';\nimport { TitleLayout } from '../title-layout/title-layout';\nimport { WorkTimeSelector } from './work-time-selector';\n\nexport const WorkTime = {\n\tname: 'ResourceSettingsCardWorkTime',\n\temits: [\n\t\t'update',\n\t\t'updateGlobalSchedule',\n\t\t'getGlobalSchedule',\n\t],\n\tprops: {\n\t\tinitialSlotRanges: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tisGlobalSchedule: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tdefaultSlotRange: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tinitialTimezone: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcurrentTimezone: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tisCompanyScheduleAccess: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tcompanyScheduleUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tTitleLayout,\n\t\tTextLayout,\n\t\tWorkTimeSelector,\n\t},\n\tmethods: {\n\t\tupdate(slotRanges: SlotRange[]): void\n\t\t{\n\t\t\tthis.$emit('update', slotRanges);\n\t\t},\n\t\tupdateGlobalSchedule(checked: boolean): void\n\t\t{\n\t\t\tthis.$emit('updateGlobalSchedule', checked);\n\t\t},\n\t\tgetGlobalSchedule(): void\n\t\t{\n\t\t\tthis.$emit('getGlobalSchedule');\n\t\t},\n\t},\n\tcomputed: {\n\t\ttitle(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_WORK_TIME_TITLE_MSGVER_1');\n\t\t},\n\t\ttitleIconType(): string\n\t\t{\n\t\t\treturn IconSet.CLOCK_2;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-settings\">\n\t\t\t<TitleLayout\n\t\t\t\t:title=\"title\"\n\t\t\t\t:iconType=\"titleIconType\"\n\t\t\t/>\n\t\t\t<TextLayout\n\t\t\t\ttype=\"WorkTime\"\n\t\t\t\t:text=\"loc('BRCW_SETTINGS_CARD_WORK_TIME_TEXT_MSGVER_2')\"\n\t\t\t/>\n\t\t\t<WorkTimeSelector\n\t\t\t\t:initialSlotRanges=\"initialSlotRanges\"\n\t\t\t\t:defaultSlotRange=\"defaultSlotRange\"\n\t\t\t\t:isGlobalSchedule=\"isGlobalSchedule\"\n\t\t\t\t:initialTimezone=\"initialTimezone\"\n\t\t\t\t:currentTimezone=\"currentTimezone\"\n\t\t\t\t:isCompanyScheduleAccess=\"isCompanyScheduleAccess\"\n\t\t\t\t:companyScheduleUrl=\"companyScheduleUrl\"\n\t\t\t\t@update=\"update\"\n\t\t\t\t@updateGlobalSchedule=\"updateGlobalSchedule\"\n\t\t\t\t@getGlobalSchedule=\"getGlobalSchedule\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { hint } from 'ui.vue3.directives.hint';\nimport { Type } from 'main.core';\nimport 'ui.layout-form';\nimport './slot-length-precision-selection.css';\n\nexport const SlotLengthPrecisionSelection = {\n\tname: 'ResourceSettingsCardSlotLengthSlotLengthPrecisionSelection',\n\tdirectives: { hint },\n\temits: ['input'],\n\tcomponents: {},\n\tprops: {\n\t\tinitialValue: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tdays: 0,\n\t\t\thours: 0,\n\t\t\tminutes: 0,\n\t\t\tminutesFocused: false,\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.distributeInitialValue();\n\t},\n\tmethods: {\n\t\tdistributeInitialValue(): void\n\t\t{\n\t\t\tlet remainingMinutes = this.initialValue;\n\n\t\t\tthis.days = Math.floor(remainingMinutes / (24 * 60));\n\t\t\tremainingMinutes %= 24 * 60;\n\n\t\t\tthis.hours = Math.floor(remainingMinutes / 60);\n\t\t\tremainingMinutes %= 60;\n\n\t\t\tthis.minutes = remainingMinutes;\n\t\t},\n\t\tcalculateTotalMinutes()\n\t\t{\n\t\t\tconst totalMinutes = this.days * 24 * 60 + this.hours * 60 + this.minutes;\n\n\t\t\tthis.$emit('input', totalMinutes);\n\t\t},\n\t\tvalidateHours()\n\t\t{\n\t\t\tthis.hours = parseInt(this.hours, 10);\n\n\t\t\tif (!Type.isNumber(this.hours))\n\t\t\t{\n\t\t\t\tthis.hours = 0;\n\t\t\t}\n\n\t\t\tif (this.hours > 12)\n\t\t\t{\n\t\t\t\tthis.hours = 12;\n\t\t\t}\n\n\t\t\tif (this.hours === 0)\n\t\t\t{\n\t\t\t\t// delay calculation to let time to determine if minutes focused before\n\t\t\t\tsetTimeout((): void => {\n\t\t\t\t\tif (!this.minutesFocused)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.calculateTotalMinutes();\n\t\t\t\t\t}\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.calculateTotalMinutes();\n\t\t\t}\n\t\t},\n\t\tvalidateMinutes()\n\t\t{\n\t\t\tthis.minutesFocused = false;\n\t\t\tthis.minutes = parseInt(this.minutes, 10);\n\n\t\t\tif (!Type.isNumber(this.minutes))\n\t\t\t{\n\t\t\t\tthis.minutes = 0;\n\t\t\t}\n\n\t\t\tif (this.minutes > 59)\n\t\t\t{\n\t\t\t\tthis.minutes = 59;\n\t\t\t}\n\n\t\t\tthis.calculateTotalMinutes();\n\t\t},\n\t\thandleEnterKey(event)\n\t\t{\n\t\t\tif (event.key === 'Enter')\n\t\t\t{\n\t\t\t\tevent.target.blur();\n\t\t\t}\n\t\t},\n\t},\n\tcomputed: {\n\t\thourHint(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_PRECISION_LIMIT_HOUR'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tminutesHint(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_PRECISION_LIMIT_MINUTES'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-slot-length-precision-selection\">\n\t\t\t<div class=\"ui-form-row-inline\">\n\t\t\t\t<div class=\"ui-form-row --disabled\">\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-time ui-ctl-sm ui-ctl-round\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t:data-id=\"'brcw-resource-slot-length-precision-days'\"\n\t\t\t\t\t\t\t\t\tv-model=\"days\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_PRECISION_1') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-time ui-ctl-sm ui-ctl-round\"\n\t\t\t\t\t\t\t\tv-hint=\"hourHint\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t:data-id=\"'brcw-resource-slot-length-precision-hours'\"\n\t\t\t\t\t\t\t\t\tv-model=\"hours\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t@blur=\"validateHours\"\n\t\t\t\t\t\t\t\t\t@keydown=\"handleEnterKey\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_PRECISION_2') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-time ui-ctl-sm ui-ctl-round\"\n\t\t\t\t\t\t\t\tv-hint=\"minutesHint\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t:data-id=\"'brcw-resource-slot-length-precision-minutes'\"\n\t\t\t\t\t\t\t\t\tv-model=\"minutes\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t@focus=\"minutesFocused = true\"\n\t\t\t\t\t\t\t\t\t@blur=\"validateMinutes\"\n\t\t\t\t\t\t\t\t\t@keydown=\"handleEnterKey\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_PRECISION_3') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","// @vue/component\n\nimport { hint } from 'ui.vue3.directives.hint';\nimport 'ui.buttons';\n\nimport { Model } from 'booking.const';\nimport { Duration } from 'booking.lib.duration';\nimport type { SlotLengthId } from 'booking.model.resource-creation-wizard';\n\nimport { SlotLengthPrecisionSelection } from './slot-length-precision-selection';\nimport './slot-length-selector.css';\n\nconst unitDurations = Duration.getUnitDurations();\nconst units = Object.fromEntries(\n\tObject.entries(unitDurations).map(([unit, value]) => [unit, value / unitDurations.i]),\n);\n\nconst disabledLengths = new Set([units.H * 24, units.d * 7]);\n\nexport const SlotLengthSelector = {\n\tname: 'ResourceSettingsCardSlotLengthSelector',\n\tdirectives: { hint },\n\temits: ['select'],\n\tcomponents: {\n\t\tSlotLengthPrecisionSelection,\n\t},\n\tprops: {\n\t\tinitialSelectedValue: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tselectedPrecisionValue: this.initialSelectedValue,\n\t\t\tprecisionMode: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tselectedValue: {\n\t\t\tget(): SlotLengthId\n\t\t\t{\n\t\t\t\treturn this.$store.state[Model.ResourceCreationWizard].slotLengthId;\n\t\t\t},\n\t\t\tset(slotLengthId: SlotLengthId): void\n\t\t\t{\n\t\t\t\tthis.$store.dispatch(`${Model.ResourceCreationWizard}/setSlotLengthId`, { slotLengthId });\n\t\t\t},\n\t\t},\n\t\tdurations(): { label: string, value: number }[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: new Duration(unitDurations.H).format('H'),\n\t\t\t\t\tvalue: units.H,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: new Duration(unitDurations.H * 2).format('H'),\n\t\t\t\t\tvalue: units.H * 2,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: new Duration(unitDurations.H * 24).format('H'),\n\t\t\t\t\tvalue: units.H * 24,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: new Duration(unitDurations.d * 7).format('d'),\n\t\t\t\t\tvalue: units.d * 7,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: this.loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_SELECTOR_CUSTOM'),\n\t\t\t\t\tvalue: 0,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tconst templateValues = new Set([\n\t\t\tunits.H,\n\t\t\tunits.H * 2,\n\t\t\tunits.H * 24,\n\t\t\tunits.d * 7,\n\t\t]);\n\n\t\tthis.selectedValue = this.initialSelectedValue;\n\t\tif (!templateValues.has(this.selectedValue))\n\t\t{\n\t\t\tthis.selectedValue = 0;\n\t\t\tthis.precisionMode = true;\n\t\t}\n\t},\n\tmethods: {\n\t\tselect(value: number): void\n\t\t{\n\t\t\tif (disabledLengths.has(value))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.selectedValue = parseInt(value, 10);\n\n\t\t\tif (value === 0)\n\t\t\t{\n\t\t\t\tthis.precisionMode = true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.precisionMode = false;\n\n\t\t\t\tthis.$emit('select', this.selectedValue);\n\t\t\t}\n\t\t},\n\t\tselectPrecision(value: number): void\n\t\t{\n\t\t\tthis.selectedPrecisionValue = value === 0 ? units.H : parseInt(value, 10);\n\n\t\t\tif (value === 0)\n\t\t\t{\n\t\t\t\tthis.selectedValue = units.H;\n\t\t\t\tthis.precisionMode = false;\n\t\t\t}\n\n\t\t\tthis.$emit('select', this.selectedPrecisionValue);\n\t\t},\n\t\tgetClass(value): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-btn-primary': this.selectedValue === value,\n\t\t\t\t'ui-btn-light': this.selectedValue !== value,\n\t\t\t\t'ui-btn-disabled': disabledLengths.has(value),\n\t\t\t};\n\t\t},\n\t\tgetSoonHintContent(value: number): ?Object\n\t\t{\n\t\t\tif (disabledLengths.has(value))\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\ttext: this.loc('BRCW_SOON_HINT'),\n\t\t\t\t\tpopupOptions: {\n\t\t\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\t\t\tbindOptions: {\n\t\t\t\t\t\t\tposition: 'bottom',\n\t\t\t\t\t\t},\n\t\t\t\t\t\toffsetLeft: 0,\n\t\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard__form-slot-length-selector\">\n\t\t\t<div\n\t\t\t\tv-for=\"(duration, index) in durations\"\n\t\t\t\t:key=\"index\"\n\t\t\t\t:data-id=\"'brcw-resource-slot-length-selector-size-' + index\"\n\t\t\t\tclass=\"ui-btn ui-btn-xs\"\n\t\t\t\t:class=\"getClass(duration.value)\"\n\t\t\t\t@click=\"select(duration.value)\"\n\t\t\t\tv-hint=\"getSoonHintContent(duration.value)\"\n\t\t\t>\n\t\t\t\t{{ duration.label }}\n\t\t\t</div>\n\t\t</div>\n\t\t<transition name=\"fade\">\n\t\t\t<div\n\t\t\t\tv-if=\"precisionMode\"\n\t\t\t\tclass=\"resource-creation-wizard__form-slot-length-precision\"\n\t\t\t>\n\t\t\t\t<SlotLengthPrecisionSelection\n\t\t\t\t\t:initialValue=\"selectedPrecisionValue\"\n\t\t\t\t\t@input=\"selectPrecision\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</transition>\n\t`,\n};\n","import { Set as IconSet } from 'ui.icon-set.api.vue';\nimport { TextLayout } from '../text-layout/text-layout';\nimport { TitleLayout } from '../title-layout/title-layout';\nimport { SlotLengthSelector } from './slot-length-selector';\n\nexport const SlotLength = {\n\tname: 'ResourceSettingsCardSlotLength',\n\temits: ['select'],\n\tcomponents: {\n\t\tTitleLayout,\n\t\tTextLayout,\n\t\tSlotLengthSelector,\n\t},\n\tprops: {\n\t\tinitialSelectedValue: {\n\t\t\ttype: Number,\n\t\t\tdefault: 60,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tselectedSlotLength: this.initialSelectedValue,\n\t\t};\n\t},\n\tmethods: {\n\t\tupdateSelectedValue(value): void\n\t\t{\n\t\t\tthis.selectedSlotLength = value;\n\n\t\t\tthis.$emit('select', value);\n\t\t},\n\t},\n\tcomputed: {\n\t\ttitle(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_TITLE_MSGVER_1');\n\t\t},\n\t\ttitleIconType(): string\n\t\t{\n\t\t\treturn IconSet.GANTT_GRAPHS;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-settings\">\n\t\t\t<TitleLayout\n\t\t\t\t:title=\"title\"\n\t\t\t\t:iconType=\"titleIconType\"\n\t\t\t/>\n\t\t\t<TextLayout\n\t\t\t\ttype=\"SlotLength\"\n\t\t\t\t:text=\"loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_TEXT_MSGVER_2')\"\n\t\t\t/>\n\t\t\t<div>\n\t\t\t\t<SlotLengthSelector\n\t\t\t\t\t:initialSelectedValue=\"initialSelectedValue\"\n\t\t\t\t\t@select=\"updateSelectedValue\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { createNamespacedHelpers, mapGetters } from 'ui.vue3.vuex';\nimport { Type } from 'main.core';\nimport { Model } from 'booking.const';\nimport { resourceCreationWizardService } from 'booking.provider.service.resource-creation-wizard-service';\nimport { BaseFields } from './base-fields/base-fields';\nimport { ScheduleTypes } from './schedule-types/schedule-types';\nimport { Integration } from './integration/integration';\nimport { WorkTime } from './work-time/work-time';\nimport { SlotLength } from './slot-length/slot-length';\n\nimport type { SlotRange } from 'booking.model.resources';\nimport type { ResourceTypeModel } from 'booking.model.resource-types';\nimport type { UploaderFile } from 'ui.uploader.core';\n\nimport 'ui.forms';\nimport 'ui.layout-form';\nimport 'ui.icon-set.main';\n\nimport './resource-settings-card.css';\n\nconst { mapGetters: mapResourceGetters, mapActions, mapMutations } = createNamespacedHelpers('resource-creation-wizard');\n\n// @vue/component\nexport const ResourceSettingsCard = {\n\tname: 'ResourceSettingsCard',\n\tcomponents: {\n\t\tBaseFields,\n\t\tScheduleTypes,\n\t\tWorkTime,\n\t\tSlotLength,\n\t\tIntegration,\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tselectedSlotLength: 60,\n\t\t\tinitialTimezone: '',\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\ttimezone: `${Model.Interface}/timezone`,\n\t\t}),\n\t\t...mapResourceGetters({\n\t\t\tresource: 'getResource',\n\t\t\tcompanyScheduleSlots: 'getCompanyScheduleSlots',\n\t\t\tisCompanyScheduleAccess: 'isCompanyScheduleAccess',\n\t\t\tcompanyScheduleUrl: 'companyScheduleUrl',\n\t\t\tisGlobalSchedule: 'isGlobalSchedule',\n\t\t}),\n\t\tresourceName(): string\n\t\t{\n\t\t\treturn this.resource.name;\n\t\t},\n\t\tresourceType(): Object\n\t\t{\n\t\t\tconst resourceType: ?ResourceTypeModel = this.$store\n\t\t\t\t.getters[`${Model.ResourceTypes}/getById`](this.resource.typeId)\n\t\t\t;\n\n\t\t\treturn {\n\t\t\t\ttypeId: this.resource.typeId,\n\t\t\t\ttypeName: resourceType?.name,\n\t\t\t};\n\t\t},\n\t\tresourceDescription(): string\n\t\t{\n\t\t\treturn this.resource.description ?? '';\n\t\t},\n\t\tresourceAvatarUrl(): string\n\t\t{\n\t\t\treturn this.resource.avatar?.url ?? '';\n\t\t},\n\t\tslotRanges(): SlotRange[]\n\t\t{\n\t\t\treturn this.resource.slotRanges;\n\t\t},\n\t\tdefaultSlotRange(): SlotRange\n\t\t{\n\t\t\treturn this.companyScheduleSlots[0];\n\t\t},\n\t\tslotSize(): number\n\t\t{\n\t\t\tconst slotRange: SlotRange = this.resource.slotRanges?.[0];\n\n\t\t\treturn slotRange?.slotSize ?? 60;\n\t\t},\n\t\tisMain: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.resource.isMain;\n\t\t\t},\n\t\t\tset(isMain: boolean)\n\t\t\t{\n\t\t\t\tthis.updateResource({ isMain });\n\t\t\t},\n\t\t},\n\t\tisEditForm(): boolean\n\t\t{\n\t\t\treturn this.resource.id !== null;\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tthis.initialTimezone = this.getInitialSlotTimeZone();\n\t\tthis.selectedSlotLength = this.resource.slotRanges?.[0]?.slotSize ?? 60;\n\n\t\tconst slotRanges = (\n\t\t\tType.isArrayFilled(this.resource.slotRanges)\n\t\t\t\t? this.resource.slotRanges\n\t\t\t\t: this.companyScheduleSlots\n\t\t);\n\n\t\tthis.updateSlotRanges(slotRanges);\n\t},\n\tmethods: {\n\t\t...mapActions([\n\t\t\t'updateResource',\n\t\t\t'setResourceAvatarFile',\n\t\t\t'setInvalidResourceName',\n\t\t\t'setInvalidResourceType',\n\t\t]),\n\t\t...mapMutations([\n\t\t\t'setGlobalSchedule',\n\t\t]),\n\t\tupdateResourceName(name): void\n\t\t{\n\t\t\tthis.updateResource({ name });\n\t\t\tif (name)\n\t\t\t{\n\t\t\t\tthis.setInvalidResourceName(false);\n\t\t\t}\n\t\t},\n\t\tupdateResourceType(typeId): void\n\t\t{\n\t\t\tthis.updateResource({ typeId });\n\t\t\tif (typeId)\n\t\t\t{\n\t\t\t\tthis.setInvalidResourceType(false);\n\t\t\t}\n\t\t},\n\t\tupdateResourceDescription(description): void\n\t\t{\n\t\t\tthis.updateResource({ description });\n\t\t},\n\t\tupdateResourceAvatarFile(avatarFile: UploaderFile | null): void\n\t\t{\n\t\t\tif (avatarFile)\n\t\t\t{\n\t\t\t\tthis.setResourceAvatarFile(avatarFile.getBinary());\n\t\t\t\tthis.updateResource({\n\t\t\t\t\tavatar: {\n\t\t\t\t\t\tid: null,\n\t\t\t\t\t\turl: avatarFile.getPreviewUrl(),\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setResourceAvatarFile(null);\n\t\t\t\tthis.updateResource({ avatar: null });\n\t\t\t}\n\t\t},\n\t\tupdateSlotRanges(slotRanges: SlotRange[]): void\n\t\t{\n\t\t\tthis.updateResource({ slotRanges: this.updateSlotDataForAllRanges(slotRanges) });\n\t\t},\n\t\tupdateSlotLength(value): void\n\t\t{\n\t\t\tthis.selectedSlotLength = value;\n\n\t\t\tif (this.resource.slotRanges.length === 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.updateSlotRanges(this.resource.slotRanges);\n\t\t},\n\t\tupdateSlotDataForAllRanges(inputSlotRanges: SlotRange[]): SlotRange[]\n\t\t{\n\t\t\tconst slotRanges = inputSlotRanges || this.resource.slotRanges;\n\n\t\t\treturn slotRanges.map((slotRange: SlotRange) => {\n\t\t\t\treturn {\n\t\t\t\t\t...slotRange,\n\t\t\t\t\tslotSize: this.selectedSlotLength,\n\t\t\t\t\ttimezone: this.timezone,\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t\tupdateGlobalSchedule(checked: boolean): void\n\t\t{\n\t\t\tthis.setGlobalSchedule(checked);\n\t\t},\n\t\tasync fetchData(): void\n\t\t{\n\t\t\tawait resourceCreationWizardService.fetchData();\n\n\t\t\tif (!this.isEditForm)\n\t\t\t{\n\t\t\t\tthis.updateSlotRanges(this.companyScheduleSlots);\n\t\t\t}\n\t\t},\n\t\tgetInitialSlotTimeZone(): string\n\t\t{\n\t\t\tconst slotRanges = this.isEditForm ? this.resource.slotRanges : this.companyScheduleSlots;\n\n\t\t\treturn slotRanges[0]?.timezone;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-settings-card\">\n\t\t\t<BaseFields\n\t\t\t\tdata-id=\"brcw-resource-settings-base\"\n\t\t\t\t:initialResourceName=\"resourceName\"\n\t\t\t\t:initialResourceType=\"resourceType\"\n\t\t\t\t:initialResourceDescription=\"resourceDescription\"\n\t\t\t\t:initialResourceAvatarUrl=\"resourceAvatarUrl\"\n\t\t\t\t@nameUpdate=\"updateResourceName\"\n\t\t\t\t@typeUpdate=\"updateResourceType\"\n\t\t\t\t@descriptionUpdate=\"updateResourceDescription\"\n\t\t\t\t@avatarFileUpdate=\"updateResourceAvatarFile\"\n\t\t\t/>\n\t\t\t<ScheduleTypes\n\t\t\t\tdata-id=\"brcw-resource-settings-schedule-types\"\n\t\t\t\tv-model=\"isMain\"\n\t\t\t/>\n\t\t\t<Integration/>\n\t\t\t<WorkTime\n\t\t\t\tdata-id=\"brcw-resource-settings-work-time\"\n\t\t\t\t:initialSlotRanges=\"slotRanges\"\n\t\t\t\t:defaultSlotRange=\"defaultSlotRange\"\n\t\t\t\t:isGlobalSchedule=\"isGlobalSchedule\"\n\t\t\t\t:initialTimezone=\"initialTimezone\"\n\t\t\t\t:currentTimezone=\"timezone\"\n\t\t\t\t:isCompanyScheduleAccess=\"isCompanyScheduleAccess\"\n\t\t\t\t:companyScheduleUrl=\"companyScheduleUrl\"\n\t\t\t\t@update=\"updateSlotRanges\"\n\t\t\t\t@updateGlobalSchedule=\"updateGlobalSchedule\"\n\t\t\t\t@getGlobalSchedule=\"fetchData\"\n\t\t\t/>\n\t\t\t<SlotLength\n\t\t\t\tdata-id=\"brcw-resource-settings-slot-length\"\n\t\t\t\t:initialSelectedValue=\"slotSize\"\n\t\t\t\t@select=\"updateSlotLength\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { BMenu, type MenuOptions } from 'ui.vue3.components.menu';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { Actions } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.actions';\n\nimport './label.css';\n\nexport type Item = {\n\tname: string,\n\tvalue: number,\n};\n\n// @vue/component\nexport const LabelDropdown = {\n\tcomponents: {\n\t\tBIcon,\n\t\tBMenu,\n\t},\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\t/** @type Item[] */\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tActions,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisMenuShown: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttext(): string\n\t\t{\n\t\t\treturn this.items.find(({ value }) => value === this.value).name;\n\t\t},\n\t\tmenuOptions(): MenuOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: 'booking-resource-creation-wizard-label-dropdown-menu',\n\t\t\t\tbindElement: this.$refs.container,\n\t\t\t\toffsetTop: 8,\n\t\t\t\titems: this.items.map(({ name, value }) => ({\n\t\t\t\t\ttitle: name,\n\t\t\t\t\tonClick: () => this.$emit('update:value', value),\n\t\t\t\t})),\n\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tthis.isMenuShown = true;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"booking-resource-creation-wizard-label-dropdown\" ref=\"container\" @click=\"handleClick\">\n\t\t\t<span>{{ text }}</span>\n\t\t\t<BIcon :name=\"Actions.CHEVRON_DOWN\"/>\n\t\t</div>\n\t\t<BMenu v-if=\"isMenuShown\" :options=\"menuOptions\" @close=\"isMenuShown = false\"/>\n\t`,\n};\n","import { Event } from 'main.core';\nimport { MenuManager, Menu } from 'main.popup';\nimport { BIcon as Icon } from 'ui.icon-set.api.vue';\nimport { Model, NotificationChannel } from 'booking.const';\nimport { ButtonSize, ButtonColor, ButtonIcon } from 'booking.component.button';\nimport { mapGetters } from 'ui.vue3.vuex';\n\nimport './channel-menu.css';\n\nexport const ChannelMenu = {\n\tname: 'ChannelMenu',\n\temits: ['popupShown', 'popupClosed', 'updateChannel'],\n\tprops: {\n\t\tcurrentChannel: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\tdata(): { menuPopup: Menu | null }\n\t{\n\t\treturn {\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tButtonIcon,\n\t\t\tmenuPopup: null,\n\t\t\tchannel: this.loc('BRCW_NOTIFICATION_CARD_MESSAGE_SELECT_WHA'),\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tisChannelChoiceAvailable: `${Model.ResourceCreationWizard}/isChannelChoiceAvailable`,\n\t\t}),\n\t\tpopupId(): string\n\t\t{\n\t\t\treturn 'booking-choose-channel-menu';\n\t\t},\n\t\tnotificationChannelOptions(): { label: string, value: Messenger }[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: this.loc('BRCW_NOTIFICATION_CARD_MESSAGE_SELECT_WHA'),\n\t\t\t\t\tvalue: NotificationChannel.WhatsApp,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: this.loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_SELECT_SMS_MSGVER_1'),\n\t\t\t\t\tvalue: NotificationChannel.Sms,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tthis.channel = this.notificationChannelOptions\n\t\t\t.find(({ value }) => value === this.currentChannel)?.label\n\t\t\t|| this.loc('BRCW_NOTIFICATION_CARD_MESSAGE_SELECT_WHA');\n\t},\n\tunmounted(): void\n\t{\n\t\tif (this.menuPopup)\n\t\t{\n\t\t\tthis.destroy();\n\t\t}\n\t},\n\tmethods: {\n\t\topenMenu(): void\n\t\t{\n\t\t\tif (this.menuPopup?.popupWindow?.isShown())\n\t\t\t{\n\t\t\t\tthis.destroy();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst menuButton = this.$refs['menu-button'];\n\t\t\tthis.menuPopup = MenuManager.create(\n\t\t\t\tthis.popupId,\n\t\t\t\tmenuButton,\n\t\t\t\tthis.getMenuItems(),\n\t\t\t\t{\n\t\t\t\t\tclassName: 'booking-choose-channel-menu',\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\toffsetLeft: menuButton.offsetWidth - menuButton.offsetWidth / 2,\n\t\t\t\t\tangle: true,\n\t\t\t\t\tcacheable: true,\n\t\t\t\t\ttargetContainer: document.querySelector('div.resource-creation-wizard__wrapper'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonClose: () => this.destroy(),\n\t\t\t\t\t\tonDestroy: () => this.destroy(),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t\tthis.menuPopup.show();\n\t\t\tthis.bindScrollEvent();\n\t\t\tthis.$emit('popupShown');\n\t\t},\n\t\tgetMenuItems(): Array\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\ttext: this.loc('BRCW_NOTIFICATION_CARD_MESSAGE_SELECT_WHA'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.channel = this.loc('BRCW_NOTIFICATION_CARD_MESSAGE_SELECT_WHA');\n\t\t\t\t\t\tthis.$emit('updateChannel', NotificationChannel.WhatsApp);\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: this.loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_SELECT_SMS_MSGVER_1'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.channel = this.loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_SELECT_SMS_MSGVER_1');\n\t\t\t\t\t\tthis.$emit('updateChannel', NotificationChannel.Sms);\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\tdestroy(): void\n\t\t{\n\t\t\tMenuManager.destroy(this.popupId);\n\t\t\tthis.unbindScrollEvent();\n\t\t\tthis.$emit('popupClosed');\n\t\t},\n\t\tbindScrollEvent(): void\n\t\t{\n\t\t\tEvent.bind(document, 'scroll', this.adjustPosition, { capture: true });\n\t\t},\n\t\tunbindScrollEvent(): void\n\t\t{\n\t\t\tEvent.unbind(document, 'scroll', this.adjustPosition, { capture: true });\n\t\t},\n\t\tadjustPosition(): void\n\t\t{\n\t\t\tthis.menuPopup?.popupWindow?.adjustPosition();\n\t\t},\n\t},\n\tcomponents: {\n\t\tIcon,\n\t},\n\ttemplate: `\n\t\t<span\n\t\t\tclass=\"booking-resource-creation-wizard-channel-menu-button\"\n\t\t\t:class=\"{'--disabled': !isChannelChoiceAvailable}\"\n\t\t\tref=\"menu-button\"\n\t\t\t@click=\"isChannelChoiceAvailable && openMenu()\"\n\t\t>\n\t\t\t{{ channel }}\n\t\t</span>\n\t`,\n};\n","import { Event, Text } from 'main.core';\nimport { DateTimeFormat } from 'main.date';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\n\nimport { Model, NotificationChannel } from 'booking.const';\nimport { Popup } from 'booking.component.popup';\nimport { ButtonSize, ButtonColor } from 'booking.component.button';\nimport type { NotificationsTemplateModel } from 'booking.model.notifications';\n\nimport { ChannelMenu } from '../channel-menu/channel-menu';\n\nimport './choose-template-popup.css';\n\nexport const ChooseTemplatePopup = {\n\tname: 'ResourceNotificationChooseTemplatePopup',\n\temits: ['close', 'templateTypeSelected'],\n\tprops: {\n\t\tbindElement: {\n\t\t\ttype: HTMLElement,\n\t\t\trequired: true,\n\t\t},\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcurrentChannel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcurrentTemplateType: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tbuttonSize: {\n\t\t\ttype: String,\n\t\t\tdefault: ButtonSize.EXTRA_SMALL,\n\t\t},\n\t\tbuttonColors: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => ({\n\t\t\t\tselected: ButtonColor.BASE_LIGHT,\n\t\t\t\tdefault: ButtonColor.PRIMARY,\n\t\t\t}),\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tIconSet,\n\t\t\tmessenger: NotificationChannel.WhatsApp,\n\t\t\tselectedTemplateType: this.currentTemplateType,\n\t\t};\n\t},\n\tcomponents: {\n\t\tPopup,\n\t\tChannelMenu,\n\t\tIcon,\n\t},\n\tbeforeMount(): void\n\t{\n\t\tthis.messenger = this.currentChannel;\n\t},\n\tmounted(): void\n\t{\n\t\tthis.adjustPosition();\n\t\tEvent.bind(document, 'scroll', this.adjustPosition, { capture: true });\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tEvent.unbind(document, 'scroll', this.adjustPosition, { capture: true });\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\ttemplateTypes: `${Model.Dictionary}/getNotificationTemplates`,\n\t\t}),\n\t\tpopupId(): string\n\t\t{\n\t\t\treturn `booking-resource-wizard-choose-template-popup-${Text.getRandom(4)}`;\n\t\t},\n\t\tconfig(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tclassName: 'booking-resource-wizard-choose-template-popup',\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceBindPosition: true,\n\t\t\t\t\tforceTop: true,\n\t\t\t\t},\n\t\t\t\twidth: 350,\n\t\t\t\toffsetLeft: (this.bindElement.childNodes[0]?.offsetWidth ?? 146) + 10,\n\t\t\t\toffsetTop: -149,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tangle: {\n\t\t\t\t\toffset: 120,\n\t\t\t\t\tposition: 'left',\n\t\t\t\t},\n\t\t\t\tangleBorderRadius: '4px 0',\n\t\t\t\tpadding: 15,\n\t\t\t\ttargetContainer: document.querySelector('div.resource-creation-wizard__wrapper'),\n\t\t\t};\n\t\t},\n\t\tgetFormattedTime(): string\n\t\t{\n\t\t\treturn DateTimeFormat.format(DateTimeFormat.getFormat('SHORT_TIME_FORMAT'), Date.now() / 1000);\n\t\t},\n\t},\n\tmethods: {\n\t\tgetMessageTemplate(messenger: string, templateType: string): string\n\t\t{\n\t\t\tconst templateModel = this.model.templates.find((template: NotificationsTemplateModel): boolean => {\n\t\t\t\treturn template.type === templateType;\n\t\t\t});\n\n\t\t\tif (!templateModel)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tswitch (messenger)\n\t\t\t{\n\t\t\t\tcase NotificationChannel.WhatsApp:\n\t\t\t\t\treturn templateModel.text;\n\t\t\t\tcase NotificationChannel.Sms:\n\t\t\t\t\treturn templateModel.textSms;\n\t\t\t\tdefault:\n\t\t\t\t\treturn '';\n\t\t\t}\n\t\t},\n\t\thandleChannelChange(selectedChannel): void\n\t\t{\n\t\t\tthis.messenger = selectedChannel;\n\t\t},\n\t\tchooseType(selectedType): void\n\t\t{\n\t\t\tthis.selectedTemplateType = selectedType;\n\t\t\tthis.$emit('templateTypeSelected', this.selectedTemplateType);\n\t\t},\n\t\tadjustPosition(): void\n\t\t{\n\t\t\tthis.$refs.popup.adjustPosition({\n\t\t\t\tforceBindPosition: true,\n\t\t\t\tforceTop: true,\n\t\t\t});\n\t\t},\n\t\tgetButtonText(templateType): string\n\t\t{\n\t\t\treturn (this.selectedTemplateType === templateType)\n\t\t\t\t? this.loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_BTN_SELECTED')\n\t\t\t\t: this.loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_BTN_SELECT_TYPE');\n\t\t},\n\t\tgetButtonColor(templateType: string): string\n\t\t{\n\t\t\treturn (this.selectedTemplateType === templateType)\n\t\t\t\t? this.buttonColors.selected\n\t\t\t\t: this.buttonColors.default;\n\t\t},\n\t\tgetTemplateTitle(templateType: string): string\n\t\t{\n\t\t\tconst typeDictionary = Object.values(this.templateTypes)\n\t\t\t\t.find((templateDictionary: { name: string, value: string }): boolean => {\n\t\t\t\t\treturn templateDictionary.value === templateType;\n\t\t\t\t});\n\n\t\t\treturn (typeDictionary)\n\t\t\t\t? typeDictionary.name\n\t\t\t\t: '';\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Popup\n\t\t\tv-slot=\"{freeze, unfreeze}\"\n\t\t\t:id=\"popupId\"\n\t\t\t:config=\"config\"\n\t\t\tref=\"popup\"\n\t\t\t@close=\"$emit('close')\"\n\t\t>\n\t\t\t<div class=\"booking-resource-wizard-choose-template-popup\">\n\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-header\">\n\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-header-title\">\n\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_HEADER_TITLE') }}\n\t\t\t\t\t\t<ChannelMenu\n\t\t\t\t\t\t\t:current-channel=\"messenger\"\n\t\t\t\t\t\t\t@popupShown=\"freeze\"\n\t\t\t\t\t\t\t@popupClosed=\"unfreeze\"\n\t\t\t\t\t\t\t@updateChannel=\"handleChannelChange\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t:class=\"['--close-btn']\"\n\t\t\t\t\t\t\t:name=\"IconSet.CROSS_25\"\n\t\t\t\t\t\t\t:color=\"'var(--ui-color-palette-gray-20)'\"\n\t\t\t\t\t\t\t@click=\"$emit('close')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-header-close-btn\"></div>\n\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-header-line\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-container\">\n\t\t\t\t\t<div v-for=\"template in this.model.templates\" :key=\"template.type\"\n\t\t\t\t\t\t class=\"booking-resource-wizard-choose-template-popup-content\">\n\t\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-content-desc\">\n\t\t\t\t\t\t\t{{ getTemplateTitle(template.type) }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-content-msg-example\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t:class=\"['booking-resource-wizard-choose-template-popup-content-msg-example-body', messenger]\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t:class=\"['booking-resource-wizard-choose-template-popup-content-msg-example-body-text', messenger]\">\n\t\t\t\t\t\t\t\t\t<div v-html=\"getMessageTemplate(messenger, template.type)\"></div>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t:class=\"['booking-resource-wizard-choose-template-popup-content-msg-example-body-text-time', messenger]\">\n\t\t\t\t\t\t\t\t\t\t{{ getFormattedTime }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t:class=\"['booking-resource-wizard-choose-template-popup-content-msg-example-body-text-tail', messenger]\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-content-msg-example-actions\">\n\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t:name=\"IconSet.CIRCLE_CHECK\"\n\t\t\t\t\t\t\t\t\t:color=\"'var(--ui-color-palette-green-55)'\"\n\t\t\t\t\t\t\t\t\t:size=\"24\"\n\t\t\t\t\t\t\t\t\tv-if=\"selectedTemplateType === template.type\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t:class=\"['ui-btn ui-btn-round', buttonSize, getButtonColor(template.type), {'--selected': selectedTemplateType === template.type}]\"\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t@click=\"chooseType(template.type)\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ getButtonText(template.type) }}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n","import './template-empty.css';\n\nexport const TemplateEmpty = {\n\ttemplate: `\n\t\t<div class=\"booking-resource-creation-wizard-message-template-empty\">\n\t\t\t<div class=\"booking-resource-creation-wizard-message-template-empty-icon\"></div>\n\t\t\t<div class=\"booking-resource-creation-wizard-message-template-empty-text\">\n\t\t\t\t{{ loc('BRCW_MESSAGE_TEMPLATE_SOON_TEXT') }}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","export const ResourceNotificationCheckBoxRow = {\n\tname: 'ResourceNotificationCheckBoxRow',\n\temits: ['update:checked'],\n\tprops: {\n\t\tchecked: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\ttemplate: `\n\t\t<label class=\"resource-creation-wizard__form-notification-text-row\">\n\t\t\t<span class=\"resource-creation-wizard__form-notification-text-row-checkbox\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t:disabled=\"disabled\"\n\t\t\t\t\t:checked=\"checked\"\n\t\t\t\t\t@input=\"$emit('update:checked', $event.target.checked)\"\n\t\t\t\t/>\n\t\t\t</span>\n\t\t\t<slot/>\n\t\t</label>\n\t`,\n};\n","import { Model } from 'booking.const';\nimport { ResourceNotificationCheckBoxRow } from '../resource-notification-checkbox-row';\n\nexport const CheckedForAll = {\n\tprops: {\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tisCheckedForAll: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.$store.getters[`${Model.ResourceCreationWizard}/isCheckedForAll`](this.type);\n\t\t\t},\n\t\t\tset(isChecked: boolean): void\n\t\t\t{\n\t\t\t\tthis.$store.dispatch(`${Model.ResourceCreationWizard}/setCheckedForAll`, {\n\t\t\t\t\ttype: this.type,\n\t\t\t\t\tisChecked,\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\t},\n\tcomponents: {\n\t\tResourceNotificationCheckBoxRow,\n\t},\n\ttemplate: `\n\t\t<ResourceNotificationCheckBoxRow\n\t\t\tv-model:checked=\"isCheckedForAll\"\n\t\t\t:disabled=\"disabled\"\n\t\t>\n\t\t\t<div class=\"resource-creation-wizard__form-notification-text\">\n\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_HELPER_TEXT_APPLY_FOR_ALL') }}\n\t\t\t</div>\n\t\t</ResourceNotificationCheckBoxRow>\n\t`,\n};\n","export const ResourceNotificationTextRow = {\n\tname: 'ResourceNotificationTextRow',\n\tprops: {\n\t\ticon: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard__form-notification-text-row\">\n\t\t\t<div :class=\"[icon, 'ui-icon-set', 'resource-creation-wizard__form-notification-text-row-icon']\"></div>\n\t\t\t<div class=\"resource-creation-wizard__form-notification-text\">\n\t\t\t\t<slot/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { HelpDeskLoc } from 'booking.component.help-desk-loc';\nimport { ResourceNotificationTextRow } from '../resource-notification-text-row';\n\nexport const Description = {\n\tprops: {\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thelpDesk: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tHelpDeskLoc,\n\t\tResourceNotificationTextRow,\n\t},\n\ttemplate: `\n\t\t<ResourceNotificationTextRow icon=\"--info-1\">\n\t\t\t<HelpDeskLoc \n\t\t\t\t:message=\"description\"\n\t\t\t\t:code=\"helpDesk.code\"\n\t\t\t\t:anchor=\"helpDesk.anchorCode\"\n\t\t\t/>\n\t\t</ResourceNotificationTextRow>\n\t`,\n};\n","import { RichLoc } from 'ui.vue3.components.rich-loc';\n\n// @vue/component\nexport const MessageTemplate = {\n\tcomponents: {\n\t\tRichLoc,\n\t},\n\tprops: {\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tpreparedTemplate(): string\n\t\t{\n\t\t\treturn this.text\n\t\t\t\t.replaceAll('\\n', '[br/]')\n\t\t\t\t.replaceAll(/#(.+?)#/g, '[accent][[bold]$1[/bold]][/accent]')\n\t\t\t;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<RichLoc\n\t\t\tclass=\"resource-creation-wizard__form-notification-info-template\"\n\t\t\t:placeholder=\"['[accent]', '[br/]']\"\n\t\t\t:text=\"preparedTemplate\"\n\t\t>\n\t\t\t<template #accent=\"{ text: accentText }\">\n\t\t\t\t<RichLoc tag=\"span\" class=\"--accent\" placeholder=\"[bold]\" :text=\"accentText\">\n\t\t\t\t\t<template #bold=\"{ text: boldText }\">\n\t\t\t\t\t\t<span class=\"--bold\">{{ boldText }}</span>\n\t\t\t\t\t</template>\n\t\t\t\t</RichLoc>\n\t\t\t</template>\n\t\t\t<template #br><br/></template>\n\t\t</RichLoc>\n\t`,\n};\n","import { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { Main } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.main';\n\nimport { CyclePopup } from 'booking.component.cycle-popup';\nimport { Description } from './description';\n\nexport const ManagerNotification = {\n\tcomponents: {\n\t\tBIcon,\n\t\tDescription,\n\t\tCyclePopup,\n\t\tRichLoc,\n\t},\n\tprops: {\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thelpDesk: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tscrollToCard: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tMain,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisPopupShown: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tnotificationText(): string\n\t\t{\n\t\t\treturn this.text.replaceAll('\\n', '[br/]');\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"booking-resource-creation-wizard-notification --manager\">\n\t\t\t<div class=\"booking-resource-creation-wizard-notification-main\">\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info-title-row\">\n\t\t\t\t\t<BIcon :name=\"Main.BELL_1\"/>\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info-title\">\n\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_MANAGER') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"booking-resource-creation-wizard-manager-see\" @click=\"isPopupShown = true\">\n\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_MANAGER_SEE') }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info\">\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info-text-row\">\n\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_MANAGER_TEXT') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<RichLoc\n\t\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-info-template\"\n\t\t\t\t\t\t:placeholder=\"'[br/]'\"\n\t\t\t\t\t\t:text=\"notificationText\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<template #br><br/></template>\n\t\t\t\t\t</RichLoc>\n\t\t\t\t</div>\n\t\t\t\t<Description :description=\"description\" :helpDesk=\"helpDesk\"/>\n\t\t\t\t<slot/>\n\t\t\t</div>\n\t\t\t<CyclePopup v-if=\"isPopupShown\" :scrollToCard=\"scrollToCard\" @close=\"isPopupShown = false\"/>\n\t\t</div>\n\t`,\n};\n","import { Dom, Text } from 'main.core';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { hint } from 'ui.vue3.directives.hint';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { Actions, CRM } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.actions';\nimport 'ui.icon-set.crm';\nimport 'ui.hint';\n\nimport { Button as UiButton, ButtonSize, ButtonColor } from 'booking.component.button';\nimport { Switcher } from 'booking.component.switcher';\nimport { Model, NotificationChannel, NotificationFieldsMap } from 'booking.const';\nimport { resourceCreationWizardService } from 'booking.provider.service.resource-creation-wizard-service';\nimport type { NotificationsModel, NotificationsTemplateModel } from 'booking.model.notifications';\n\nimport { ChannelMenu } from '../channel-menu/channel-menu';\nimport { ChooseTemplatePopup } from '../choose-template-popup/choose-template-popup';\nimport { TemplateEmpty } from '../template-empty/template-empty';\nimport { CheckedForAll } from './components/checked-for-all';\nimport { Description } from './components/description';\nimport { MessageTemplate } from './components/message-tempalte';\nimport { ManagerNotification } from './components/manager-notification';\n\n// eslint-disable-next-line no-promise-executor-return\nconst sleep = (timeout: number) => new Promise((resolve) => setTimeout(resolve, timeout));\n\n// @vue/component\nexport const ResourceNotification = {\n\tname: 'ResourceNotification',\n\tcomponents: {\n\t\tSwitcher,\n\t\tBIcon,\n\t\tUiButton,\n\t\tDescription,\n\t\tChannelMenu,\n\t\tChooseTemplatePopup,\n\t\tTemplateEmpty,\n\t\tCheckedForAll,\n\t\tMessageTemplate,\n\t\tManagerNotification,\n\t},\n\tdirectives: { hint },\n\tprops: {\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thelpDesk: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tchecked: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tmanagerDescription: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tscrollToCard: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\temits: ['update:checked'],\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tActions,\n\t\t\tCRM,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tmessenger: NotificationChannel.WhatsApp,\n\t\t\tshowTemplatePopup: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tmodel(): NotificationsModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Notifications}/getByType`](this.type);\n\t\t},\n\t\ttemplate(): NotificationsTemplateModel | undefined\n\t\t{\n\t\t\tconst templateName = this.resource[this.templateTypeField];\n\n\t\t\treturn this.model.templates.find((template) => template.type === templateName);\n\t\t},\n\t\tmessageTemplate(): string\n\t\t{\n\t\t\treturn {\n\t\t\t\t[NotificationChannel.WhatsApp]: this.template?.text ?? '',\n\t\t\t\t[NotificationChannel.Sms]: this.template?.textSms ?? '',\n\t\t\t}[this.messenger] ?? '';\n\t\t},\n\t\thasTemplate(): boolean\n\t\t{\n\t\t\treturn this.isCurrentSenderAvailable && this.messageTemplate;\n\t\t},\n\t\tdisableSwitcher(): boolean\n\t\t{\n\t\t\treturn this.disabled || !this.isCurrentSenderAvailable || !this.template;\n\t\t},\n\t\ttemplateTypeField(): string\n\t\t{\n\t\t\treturn NotificationFieldsMap.TemplateType[this.type];\n\t\t},\n\t\tordinal(): string\n\t\t{\n\t\t\treturn NotificationFieldsMap.Ordinal[this.type];\n\t\t},\n\t\tsoonHint(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('BRCW_BOOKING_SOON_HINT'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\toffsetLeft: 60,\n\t\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tthis.hintManager = BX.UI.Hint.createInstance({\n\t\t\tid: `brwc-notification-hint-${Text.getRandom(5)}`,\n\t\t\tpopupParameters: {\n\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t},\n\t\t});\n\t},\n\tmounted(): void\n\t{\n\t\tthis.hintManager.init(this.$el);\n\n\t\tvoid this.animateHeight(false);\n\t},\n\tupdated(): void\n\t{\n\t\tthis.hintManager.init(this.$el);\n\n\t\tvoid this.animateHeight(true);\n\t},\n\tmethods: {\n\t\thandleChannelChange(selectedChannel: string): void\n\t\t{\n\t\t\tthis.messenger = selectedChannel;\n\t\t},\n\t\thandleTemplateTypeSelected(selectedType: string): void\n\t\t{\n\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { [this.templateTypeField]: selectedType });\n\t\t},\n\t\tgetChooseTemplateButton(): HTMLElement\n\t\t{\n\t\t\treturn this.$refs.chooseTemplateBtn || null;\n\t\t},\n\t\texpand(): void\n\t\t{\n\t\t\tvoid resourceCreationWizardService.updateNotificationExpanded(this.type, !this.model.isExpanded);\n\t\t},\n\t\tasync animateHeight(withAnimation: boolean): Promise<void>\n\t\t{\n\t\t\tDom.style(this.$el, 'transition', null);\n\t\t\tif (withAnimation)\n\t\t\t{\n\t\t\t\tawait sleep(10);\n\t\t\t}\n\n\t\t\tconst prevHeight = this.$el.offsetHeight;\n\t\t\tDom.style(this.$el, 'height', null);\n\t\t\tif (!this.model.isExpanded)\n\t\t\t{\n\t\t\t\tDom.style(this.$refs.main, 'display', 'none');\n\t\t\t\tDom.style(this.$refs.manager?.$el, 'display', 'none');\n\t\t\t}\n\n\t\t\tconst height = this.$el.offsetHeight;\n\t\t\tDom.style(this.$refs.main, 'display', null);\n\t\t\tDom.style(this.$refs.manager?.$el, 'display', null);\n\t\t\tDom.style(this.$el, 'height', `${prevHeight}px`);\n\n\t\t\tif (withAnimation)\n\t\t\t{\n\t\t\t\tDom.style(this.$el, 'transition', 'height 0.2s');\n\t\t\t\tawait sleep(10);\n\t\t\t\tDom.style(this.$el, 'height', `${height}px`);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.style(this.$el, 'height', `${height}px`);\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"booking-resource-creation-wizard-notification-container\" :class=\"{'--disabled': !checked}\">\n\t\t\t<div class=\"booking-resource-creation-wizard-notification\">\n\t\t\t\t<div class=\"booking-resource-creation-wizard-notification-header\" @click=\"expand\">\n\t\t\t\t\t<div class=\"booking-resource-creation-wizard-notification-number\">{{ ordinal }}</div>\n\t\t\t\t\t<div class=\"booking-resource-creation-wizard-notification-title\">{{ title }}</div>\n\t\t\t\t\t<BIcon :name=\"model.isExpanded ? Actions.CHEVRON_UP : Actions.CHEVRON_DOWN\"/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-resource-creation-wizard-notification-main\" ref=\"main\">\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info-title-row --main\">\n\t\t\t\t\t\t<BIcon :name=\"CRM.CHAT_LINE\"/>\n\t\t\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info-title\">\n\t\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_MESSAGE') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Switcher\n\t\t\t\t\t\t\tv-hint=\"disableSwitcher && soonHint\"\n\t\t\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-info-switcher\"\n\t\t\t\t\t\t\t:data-id=\"'brcw-resource-notification-info-switcher-' + type\"\n\t\t\t\t\t\t\t:model-value=\"checked\"\n\t\t\t\t\t\t\t:disabled=\"disableSwitcher\"\n\t\t\t\t\t\t\t@update:model-value=\"$emit('update:checked', $event)\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info --message\">\n\t\t\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info-text-row\">\n\t\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_MESSAGE_TEXT') }}\n\t\t\t\t\t\t\t<ChannelMenu\n\t\t\t\t\t\t\t\t:current-channel=\"messenger\"\n\t\t\t\t\t\t\t\t@updateChannel=\"handleChannelChange\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<template v-if=\"hasTemplate\">\n\t\t\t\t\t\t\t<MessageTemplate :text=\"messageTemplate\"/>\n\t\t\t\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info-template-choose-buttons\">\n\t\t\t\t\t\t\t\t<div class=\"booking-resource-creation-wizard-choose-template-button\" ref=\"chooseTemplateBtn\">\n\t\t\t\t\t\t\t\t\t<UiButton\n\t\t\t\t\t\t\t\t\t\t:disabled=\"!checked\"\n\t\t\t\t\t\t\t\t\t\t:text=\"loc('BRCW_NOTIFICATION_CARD_CHOOSE_TEMPLATE_TYPE')\"\n\t\t\t\t\t\t\t\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t\t\t\t\t:color=\"ButtonColor.LIGHT_BORDER\"\n\t\t\t\t\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\t\t\t\t\t@click=\"showTemplatePopup = true\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<TemplateEmpty v-else/>\n\t\t\t\t\t\t<ChooseTemplatePopup\n\t\t\t\t\t\t\tv-if=\"showTemplatePopup\"\n\t\t\t\t\t\t\t:bindElement=\"$refs.chooseTemplateBtn\"\n\t\t\t\t\t\t\t:model=\"model\"\n\t\t\t\t\t\t\t:current-channel=\"messenger\"\n\t\t\t\t\t\t\t:currentTemplateType=\"resource[templateTypeField]\"\n\t\t\t\t\t\t\t@templateTypeSelected=\"handleTemplateTypeSelected\"\n\t\t\t\t\t\t\t@close=\"showTemplatePopup = false\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Description :description=\"description\" :helpDesk=\"helpDesk\"/>\n\t\t\t\t\t<slot name=\"client\"/>\n\t\t\t\t\t<CheckedForAll :type=\"type\" :disabled=\"!checked\"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ManagerNotification\n\t\t\t\tv-if=\"$slots.manager\"\n\t\t\t\t:description=\"managerDescription\"\n\t\t\t\t:text=\"model.managerNotification\"\n\t\t\t\t:helpDesk=\"helpDesk\"\n\t\t\t\t:scrollToCard=\"scrollToCard\"\n\t\t\t\tref=\"manager\"\n\t\t\t>\n\t\t\t\t<slot name=\"manager\"/>\n\t\t\t</ManagerNotification>\n\t\t</div>\n\t`,\n};\n","import { Type } from 'main.core';\nimport { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport 'ui.icon-set.main';\n\nimport { Model, AhaMoment, HelpDesk } from 'booking.const';\nimport { ahaMoments } from 'booking.lib.aha-moments';\n\nimport { LabelDropdown } from '../label/label';\nimport { ResourceNotification } from '../layout/resource-notification';\nimport { ResourceNotificationTextRow } from '../layout/resource-notification-text-row';\n\n// @vue/component\nexport const BaseInfo = {\n\tname: 'ResourceNotificationCardBaseInfo',\n\tcomponents: {\n\t\tResourceNotification,\n\t\tResourceNotificationTextRow,\n\t\tLabelDropdown,\n\t\tRichLoc,\n\t},\n\tprops: {\n\t\t/** @type {NotificationsModel} */\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\t/** @type {ResourceModel} */\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tisInfoNotificationOn: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.isCurrentSenderAvailable && this.resource.isInfoNotificationOn;\n\t\t\t},\n\t\t\tset(isInfoNotificationOn: boolean): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { isInfoNotificationOn });\n\t\t\t},\n\t\t},\n\t\tinfoNotificationDelay: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.resource.infoNotificationDelay;\n\t\t\t},\n\t\t\tset(infoNotificationDelay: number): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { infoNotificationDelay });\n\t\t\t\tthis.$refs.card.$forceUpdate();\n\t\t\t},\n\t\t},\n\t\tlocInfoTimeSend(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_BASE_INFO_HELPER_TEXT_SECOND')\n\t\t\t\t.replace('#time#', '[delay/]')\n\t\t\t;\n\t\t},\n\t\thelpDesk(): Object\n\t\t{\n\t\t\treturn HelpDesk.ResourceNotificationInfo;\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tif (ahaMoments.shouldShow(AhaMoment.MessageTemplate))\n\t\t{\n\t\t\tsetTimeout(() => this.showAhaMoment(), 500);\n\t\t}\n\t},\n\tmethods: {\n\t\tasync showAhaMoment(): Promise<void>\n\t\t{\n\t\t\tconst target = this.$refs.card.getChooseTemplateButton();\n\t\t\tif (Type.isNull(target))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait ahaMoments.showGuide({\n\t\t\t\tid: 'booking-message-template',\n\t\t\t\ttitle: this.loc('BOOKING_AHA_MESSAGE_TEMPLATE_TITLE'),\n\t\t\t\ttext: this.loc('BOOKING_AHA_MESSAGE_TEMPLATE_TEXT'),\n\t\t\t\tarticle: HelpDesk.AhaMessageTemplate,\n\t\t\t\ttarget: this.$refs.card.getChooseTemplateButton(),\n\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t});\n\n\t\t\tahaMoments.setShown(AhaMoment.MessageTemplate);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ResourceNotification\n\t\t\tv-model:checked=\"isInfoNotificationOn\"\n\t\t\t:type=\"model.type\"\n\t\t\t:title=\"loc('BRCW_NOTIFICATION_CARD_BASE_INFO_TITLE_MSGVER_1')\"\n\t\t\t:description=\"loc('BRCW_NOTIFICATION_CARD_BASE_INFO_HELPER_TEXT_FIRST_MSGVER_2')\"\n\t\t\t:helpDesk=\"helpDesk\"\n\t\t\tref=\"card\"\n\t\t>\n\t\t\t<template #client>\n\t\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t\t<RichLoc :text=\"locInfoTimeSend\" :placeholder=\"'[delay/]'\">\n\t\t\t\t\t\t<template #delay>\n\t\t\t\t\t\t\t<LabelDropdown v-model:value=\"infoNotificationDelay\" :items=\"model.settings.notification.delayValues\"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</RichLoc>\n\t\t\t\t</ResourceNotificationTextRow>\n\t\t\t</template>\n\t\t</ResourceNotification>\n\t`,\n};\n","import { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport 'ui.icon-set.main';\n\nimport { HelpDesk, Model } from 'booking.const';\nimport { CardId } from 'booking.component.cycle-popup';\n\nimport { LabelDropdown } from '../label/label';\nimport { ResourceNotification } from '../layout/resource-notification';\nimport { ResourceNotificationTextRow } from '../layout/resource-notification-text-row';\n\n// @vue/component\nexport const Confirmation = {\n\tname: 'ResourceNotificationCardConfirmation',\n\tcomponents: {\n\t\tResourceNotification,\n\t\tResourceNotificationTextRow,\n\t\tLabelDropdown,\n\t\tRichLoc,\n\t},\n\tprops: {\n\t\t/** @type {NotificationsModel} */\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tHelpDesk,\n\t\t\tCardId,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\t/** @type {ResourceModel} */\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tisConfirmationNotificationOn: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.isCurrentSenderAvailable && this.resource.isConfirmationNotificationOn;\n\t\t\t},\n\t\t\tset(isConfirmationNotificationOn: boolean): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { isConfirmationNotificationOn });\n\t\t\t},\n\t\t},\n\t\tconfirmationNotificationDelay: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.resource.confirmationNotificationDelay;\n\t\t\t},\n\t\t\tset(confirmationNotificationDelay: number): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { confirmationNotificationDelay });\n\t\t\t\tthis.$refs.card.$forceUpdate();\n\t\t\t},\n\t\t},\n\t\tconfirmationNotificationRepetitions: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.resource.confirmationNotificationRepetitions;\n\t\t\t},\n\t\t\tset(confirmationNotificationRepetitions: number): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { confirmationNotificationRepetitions });\n\t\t\t\tthis.$refs.card.$forceUpdate();\n\t\t\t},\n\t\t},\n\t\tconfirmationNotificationRepetitionsInterval: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.resource.confirmationNotificationRepetitionsInterval;\n\t\t\t},\n\t\t\tset(confirmationNotificationRepetitionsInterval: number): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { confirmationNotificationRepetitionsInterval });\n\t\t\t\tthis.$refs.card.$forceUpdate();\n\t\t\t},\n\t\t},\n\t\tconfirmationCounterDelay: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.resource.confirmationCounterDelay;\n\t\t\t},\n\t\t\tset(confirmationCounterDelay: number): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { confirmationCounterDelay });\n\t\t\t\tthis.$refs.card.$forceUpdate();\n\t\t\t},\n\t\t},\n\t\tlocSendMessageBefore(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_CONFIRMATION_HELPER_TEXT_SECOND')\n\t\t\t\t.replace('#days_before#', '[delay/]')\n\t\t\t;\n\t\t},\n\t\tlocRetryMessage(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_CONFIRMATION_HELPER_TEXT_THIRD')\n\t\t\t\t.replace('#times#', '[repeat/]')\n\t\t\t\t.replace('#time_delay#', '[repeatInterval/]')\n\t\t\t;\n\t\t},\n\t\tlocManagerRemindTime(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_CONFIRMATION_MANAGER_REMIND_TIME')\n\t\t\t\t.replace('#time#', '[delay/]')\n\t\t\t;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ResourceNotification\n\t\t\tv-model:checked=\"isConfirmationNotificationOn\"\n\t\t\t:type=\"model.type\"\n\t\t\t:title=\"loc('BRCW_NOTIFICATION_CARD_CONFIRMATION_TITLE_MSGVER_2')\"\n\t\t\t:description=\"loc('BRCW_NOTIFICATION_CARD_CONFIRMATION_HELPER_TEXT_FIRST_MSGVER_2')\"\n\t\t\t:helpDesk=\"HelpDesk.ResourceNotificationConfirmation\"\n\t\t\t:managerDescription=\"loc('BRCW_NOTIFICATION_CARD_CONFIRMATION_MANAGER_HELPER')\"\n\t\t\t:scrollToCard=\"CardId.Unconfirmed\"\n\t\t\tref=\"card\"\n\t\t>\n\t\t\t<template #client>\n\t\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t\t<RichLoc :text=\"locSendMessageBefore\" :placeholder=\"'[delay/]'\">\n\t\t\t\t\t\t<template #delay>\n\t\t\t\t\t\t\t<LabelDropdown v-model:value=\"confirmationNotificationDelay\" :items=\"model.settings.notification.delayValues\"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</RichLoc>\n\t\t\t\t</ResourceNotificationTextRow>\n\t\t\t\t<ResourceNotificationTextRow icon=\"--undo-1\">\n\t\t\t\t\t<RichLoc :text=\"locRetryMessage\" :placeholder=\"['[repeat/]', '[repeatInterval/]']\">\n\t\t\t\t\t\t<template #repeat>\n\t\t\t\t\t\t\t<LabelDropdown v-model:value=\"confirmationNotificationRepetitions\" :items=\"model.settings.notification.repeatValues\"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template #repeatInterval>\n\t\t\t\t\t\t\t<LabelDropdown v-model:value=\"confirmationNotificationRepetitionsInterval\" :items=\"model.settings.notification.repeatIntervalValues\"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</RichLoc>\n\t\t\t\t</ResourceNotificationTextRow>\n\t\t\t</template>\n\t\t\t<template #manager>\n\t\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t\t<RichLoc :text=\"locManagerRemindTime\" :placeholder=\"'[delay/]'\">\n\t\t\t\t\t\t<template #delay>\n\t\t\t\t\t\t\t<LabelDropdown v-model:value=\"confirmationCounterDelay\" :items=\"model.settings.counter.delayValues\"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</RichLoc>\n\t\t\t\t</ResourceNotificationTextRow>\n\t\t\t</template>\n\t\t</ResourceNotification>\n\t`,\n};\n","import { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport 'ui.icon-set.main';\n\nimport { HelpDesk, Model } from 'booking.const';\nimport { ResourceNotification } from '../layout/resource-notification';\nimport { ResourceNotificationTextRow } from '../layout/resource-notification-text-row';\nimport { LabelDropdown } from '../label/label';\n\n// @vue/component\nexport const Reminder = {\n\tname: 'ResourceNotificationCardReminder',\n\tcomponents: {\n\t\tResourceNotification,\n\t\tResourceNotificationTextRow,\n\t\tLabelDropdown,\n\t\tRichLoc,\n\t},\n\tprops: {\n\t\t/** @type {NotificationsModel} */\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\t/** @type {ResourceModel} */\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tisReminderNotificationOn: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.isCurrentSenderAvailable && this.resource.isReminderNotificationOn;\n\t\t\t},\n\t\t\tset(isReminderNotificationOn: boolean): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { isReminderNotificationOn });\n\t\t\t},\n\t\t},\n\t\treminderNotificationDelay: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.resource.reminderNotificationDelay;\n\t\t\t},\n\t\t\tset(reminderNotificationDelay: number): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { reminderNotificationDelay });\n\t\t\t\tthis.$refs.card.$forceUpdate();\n\t\t\t},\n\t\t},\n\t\tlocSendReminderTime(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_REMINDER_HELPER_TEXT_SECOND')\n\t\t\t\t.replace('#time#', '[delay/]')\n\t\t\t;\n\t\t},\n\t\thelpDesk(): Object\n\t\t{\n\t\t\treturn HelpDesk.ResourceNotificationReminder;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ResourceNotification\n\t\t\tv-model:checked=\"isReminderNotificationOn\"\n\t\t\t:type=\"model.type\"\n\t\t\t:title=\"loc('BRCW_NOTIFICATION_CARD_REMINDER_TITLE')\"\n\t\t\t:description=\"loc('BRCW_NOTIFICATION_CARD_REMINDER_HELPER_TEXT_FIRST_MSGVER_1')\"\n\t\t\t:helpDesk=\"helpDesk\"\n\t\t\tref=\"card\"\n\t\t>\n\t\t\t<template #client>\n\t\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t\t<RichLoc :text=\"locSendReminderTime\" :placeholder=\"'[delay/]'\">\n\t\t\t\t\t\t<template #delay>\n\t\t\t\t\t\t\t<LabelDropdown v-model:value=\"reminderNotificationDelay\" :items=\"model.settings.notification.delayValues\"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</RichLoc>\n\t\t\t\t</ResourceNotificationTextRow>\n\t\t\t</template>\n\t\t</ResourceNotification>\n\t`,\n};\n","import { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport 'ui.icon-set.main';\n\nimport { HelpDesk, Model } from 'booking.const';\nimport { LabelDropdown } from '../label/label';\nimport { ResourceNotification } from '../layout/resource-notification';\nimport { ResourceNotificationTextRow } from '../layout/resource-notification-text-row';\n\n// @vue/component\nexport const Feedback = {\n\tname: 'ResourceNotificationCardFeedback',\n\tcomponents: {\n\t\tResourceNotification,\n\t\tResourceNotificationTextRow,\n\t\tLabelDropdown,\n\t\tRichLoc,\n\t},\n\tprops: {\n\t\t/** @type {NotificationsModel} */\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tlabelValue: this.model.settings.notification.delayValues[0].value,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\t/** @type {ResourceModel} */\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tisFeedbackNotificationOn: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tset(isFeedbackNotificationOn: boolean): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { isFeedbackNotificationOn });\n\t\t\t},\n\t\t},\n\t\tlocSendFeedbackTime(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_FEEDBACK_HELPER_TEXT_SECOND')\n\t\t\t\t.replace('#time#', '[delay/]')\n\t\t\t;\n\t\t},\n\t\thelpDesk(): Object\n\t\t{\n\t\t\treturn HelpDesk.ResourceNotificationFeedback;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ResourceNotification\n\t\t\tv-model:checked=\"isFeedbackNotificationOn\"\n\t\t\t:type=\"model.type\"\n\t\t\t:title=\"loc('BRCW_NOTIFICATION_CARD_FEEDBACK_TITLE')\"\n\t\t\t:description=\"loc('BRCW_NOTIFICATION_CARD_FEEDBACK_HELPER_TEXT_FIRST_MSGVER_2')\"\n\t\t\t:helpDesk=\"helpDesk\"\n\t\t\t:disabled=\"true\"\n\t\t>\n\t\t\t<template #client>\n\t\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t\t<RichLoc :text=\"locSendFeedbackTime\" :placeholder=\"'[delay/]'\">\n\t\t\t\t\t\t<template #delay>\n\t\t\t\t\t\t\t<LabelDropdown v-model:value=\"labelValue\" :items=\"model.settings.notification.delayValues\"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</RichLoc>\n\t\t\t\t</ResourceNotificationTextRow>\n\t\t\t</template>\n\t\t</ResourceNotification>\n\t`,\n};\n","import { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport 'ui.icon-set.main';\n\nimport { HelpDesk, Model } from 'booking.const';\nimport { CardId } from 'booking.component.cycle-popup';\n\nimport { LabelDropdown } from '../label/label';\nimport { ResourceNotification } from '../layout/resource-notification';\nimport { ResourceNotificationTextRow } from '../layout/resource-notification-text-row';\n\n// @vue/component\nexport const Late = {\n\tname: 'ResourceNotificationCardLate',\n\tcomponents: {\n\t\tResourceNotification,\n\t\tResourceNotificationTextRow,\n\t\tLabelDropdown,\n\t\tRichLoc,\n\t},\n\tprops: {\n\t\t/** @type {NotificationsModel} */\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tHelpDesk,\n\t\t\tCardId,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\t/** @type {ResourceModel} */\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tisDelayedNotificationOn: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.isCurrentSenderAvailable && this.resource.isDelayedNotificationOn;\n\t\t\t},\n\t\t\tset(isDelayedNotificationOn: boolean): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { isDelayedNotificationOn });\n\t\t\t},\n\t\t},\n\t\tdelayedNotificationDelay: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.resource.delayedNotificationDelay;\n\t\t\t},\n\t\t\tset(delayedNotificationDelay: number): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { delayedNotificationDelay });\n\t\t\t\tthis.$refs.card.$forceUpdate();\n\t\t\t},\n\t\t},\n\t\tdelayedCounterDelay: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.resource.delayedCounterDelay;\n\t\t\t},\n\t\t\tset(delayedCounterDelay: number): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { delayedCounterDelay });\n\t\t\t\tthis.$refs.card.$forceUpdate();\n\t\t\t},\n\t\t},\n\t\tlocSendMessageAfter(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_LATE_HELPER_TEXT_SECOND_MSGVER_1')\n\t\t\t\t.replace('#time#', '[delay/]')\n\t\t\t;\n\t\t},\n\t\tlocNotifyManagerIn(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_LATE_MANAGER_NOTIFY_IN')\n\t\t\t\t.replace('#time#', '[delay/]')\n\t\t\t;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ResourceNotification\n\t\t\tv-model:checked=\"isDelayedNotificationOn\"\n\t\t\t:type=\"model.type\"\n\t\t\t:title=\"loc('BRCW_NOTIFICATION_CARD_LATE_TITLE_MSGVER_1')\"\n\t\t\t:description=\"loc('BRCW_NOTIFICATION_CARD_LATE_HELPER_TEXT_FIRST_MSGVER_2')\"\n\t\t\t:helpDesk=\"HelpDesk.ResourceNotificationLate\"\n\t\t\t:managerDescription=\"loc('BRCW_NOTIFICATION_CARD_LATE_MANAGER_HELPER')\"\n\t\t\t:scrollToCard=\"CardId.Late\"\n\t\t\tref=\"card\"\n\t\t>\n\t\t\t<template #client>\n\t\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t\t<RichLoc :text=\"locSendMessageAfter\" :placeholder=\"'[delay/]'\">\n\t\t\t\t\t\t<template #delay>\n\t\t\t\t\t\t\t<LabelDropdown v-model:value=\"delayedNotificationDelay\" :items=\"model.settings.notification.delayValues\"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</RichLoc>\n\t\t\t\t</ResourceNotificationTextRow>\n\t\t\t</template>\n\t\t\t<template #manager>\n\t\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t\t<RichLoc :text=\"locNotifyManagerIn\" :placeholder=\"'[delay/]'\">\n\t\t\t\t\t\t<template #delay>\n\t\t\t\t\t\t\t<LabelDropdown v-model:value=\"delayedCounterDelay\" :items=\"model.settings.counter.delayValues\"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</RichLoc>\n\t\t\t\t</ResourceNotificationTextRow>\n\t\t\t</template>\n\t\t</ResourceNotification>\n\t`,\n};\n","import { mapGetters } from 'ui.vue3.vuex';\nimport 'ui.forms';\nimport 'ui.layout-form';\nimport type { BitrixVueComponentProps } from 'ui.vue3';\n\nimport { Model } from 'booking.const';\nimport type { NotificationsModel } from 'booking.model.notifications';\n\nimport { BaseInfo } from './base-info/base-info';\nimport { Confirmation } from './confirmation/confirmation';\nimport { Reminder } from './reminder/reminder';\nimport { Feedback } from './feedback/feedback';\nimport { Late } from './late/late';\n\nimport './resource-notification-card.css';\n\n// @vue/component\nexport const ResourceNotificationCard = {\n\tname: 'ResourceNotificationCard',\n\tcomputed: {\n\t\tnotificationViews(): { view: BitrixVueComponentProps, model: NotificationsModel }[]\n\t\t{\n\t\t\treturn this.notifications.map((model: NotificationsModel) => {\n\t\t\t\treturn {\n\t\t\t\t\t[this.dictionary.Info.value]: { view: BaseInfo, model },\n\t\t\t\t\t[this.dictionary.Confirmation.value]: { view: Confirmation, model },\n\t\t\t\t\t[this.dictionary.Reminder.value]: { view: Reminder, model },\n\t\t\t\t\t[this.dictionary.Delayed.value]: { view: Late, model },\n\t\t\t\t\t[this.dictionary.Feedback.value]: { view: Feedback, model },\n\t\t\t\t}[model.type] ?? {};\n\t\t\t});\n\t\t},\n\t\t...mapGetters({\n\t\t\tnotifications: `${Model.Notifications}/get`,\n\t\t\tdictionary: `${Model.Dictionary}/getNotifications`,\n\t\t}),\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-notification-card\">\n\t\t\t<slot v-for=\"notification of notificationViews\" :key=\"notification.view\">\n\t\t\t\t<component\n\t\t\t\t\t:is=\"notification.view\"\n\t\t\t\t\t:model=\"notification.model\"\n\t\t\t\t\t:data-id=\"'brcw-resource-notification-view-' + notification.view\"\n\t\t\t\t/>\n\t\t\t</slot>\n\t\t</div>\n\t`,\n};\n","import { mapState, mapGetters, mapActions, mapMutations } from 'ui.vue3.vuex';\nimport { resourceCreationWizardService } from 'booking.provider.service.resource-creation-wizard-service';\nimport { ResourceCreationWizardLayout } from './layout/layout';\nimport { ResourceCreationWizardHeader } from './header/header';\nimport { ResourceCreationWizardFooter } from './footer/footer';\nimport { ResourceCategoryCard } from './resource-category-card/resource-category-card';\nimport { ResourceSettingsCard } from './resource-settings-card/resource-settings-card';\nimport { ResourceNotificationCard } from './resource-notification-card/resource-notification-card';\n\nexport const App = {\n\tname: 'ResourceCreationWizardApp',\n\tcomponents: {\n\t\tResourceCreationWizardLayout,\n\t\tResourceCreationWizardHeader,\n\t\tResourceCreationWizardFooter,\n\t\tResourceCategoryCard,\n\t\tResourceSettingsCard,\n\t\tResourceNotificationCard,\n\t},\n\tdata(): { init: boolean }\n\t{\n\t\treturn {\n\t\t\tinit: true,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapState({\n\t\t\tstep: (state) => state['resource-creation-wizard'].step,\n\t\t\tfetching: (state) => state['resource-creation-wizard'].fetching,\n\t\t}),\n\t\t...mapGetters('resource-creation-wizard', [\n\t\t\t'invalidCurrentCard',\n\t\t\t'resourceId',\n\t\t]),\n\t\tcurrentView(): string\n\t\t{\n\t\t\tconst step = this.step || 1;\n\n\t\t\tswitch (step)\n\t\t\t{\n\t\t\t\tcase 2:\n\t\t\t\t\treturn 'ResourceSettingsCard';\n\t\t\t\tcase 3:\n\t\t\t\t\treturn 'ResourceNotificationCard';\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'ResourceCategoryCard';\n\t\t\t}\n\t\t},\n\t\tisEditForm(): boolean\n\t\t{\n\t\t\treturn this.resourceId !== null;\n\t\t},\n\t},\n\tasync beforeMount()\n\t{\n\t\tawait this.initApp();\n\t},\n\tmethods: {\n\t\t...mapActions(\n\t\t\t'resource-creation-wizard',\n\t\t\t['initState'],\n\t\t),\n\t\t...mapMutations(\n\t\t\t'resource-creation-wizard',\n\t\t\t[\n\t\t\t\t'prevStep',\n\t\t\t\t'updateFetching',\n\t\t\t\t'setGlobalSchedule',\n\t\t\t],\n\t\t),\n\t\tasync initApp()\n\t\t{\n\t\t\tawait this.initState();\n\t\t\tawait this.loadWizardData();\n\t\t\tthis.init = false;\n\t\t},\n\t\tasync loadWizardData()\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis.updateFetching(true);\n\t\t\t\tawait resourceCreationWizardService.fetchData();\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tconsole.error('Loading wizard data error', error);\n\t\t\t}\n\t\t\tfinally\n\t\t\t{\n\t\t\t\tthis.updateFetching(false);\n\t\t\t\tif (!this.isEditForm)\n\t\t\t\t{\n\t\t\t\t\tthis.setGlobalSchedule(true);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div id=\"booking-resource-creation-wizard\" class=\"booking-resource-creation-wizard\">\n\t\t\t<ResourceCreationWizardLayout :loading=\"fetching\" :step>\n\t\t\t\t<template #header>\n\t\t\t\t\t<ResourceCreationWizardHeader/>\n\t\t\t\t</template>\n\t\t\t\t<template v-if=\"!init\">\n\t\t\t\t\t<component :is=\"currentView\"/>\n\t\t\t\t</template>\n\t\t\t\t<template #footer>\n\t\t\t\t\t<ResourceCreationWizardFooter :step/>\n\t\t\t\t</template>\n\t\t\t</ResourceCreationWizardLayout>\n\t\t</div>\n\t`,\n};\n","import { Event, Tag } from 'main.core';\nimport { BitrixVue } from 'ui.vue3';\nimport type { VueCreateAppResult } from 'ui.vue3';\n\nimport { Core } from 'booking.core';\nimport { EventName, Model } from 'booking.const';\nimport { locMixin } from 'booking.component.mixin.loc-mixin';\nimport { Notifications } from 'booking.model.notifications';\nimport { ResourceCreationWizardModel } from 'booking.model.resource-creation-wizard';\nimport { SidePanelInstance } from 'booking.lib.side-panel-instance';\nimport { App } from './components/app';\n\ntype ResourceId = number | null;\n\nexport class ResourceCreationWizard\n{\n\tstatic #width: number = 600;\n\n\t#application: VueCreateAppResult | null = null;\n\n\tstatic makeName(resourceId: string = 'new'): string\n\t{\n\t\treturn `booking:resource-creation-wizard:${resourceId || 'new'}`;\n\t}\n\n\t#mountContent(container: HTMLElement): void\n\t{\n\t\tconst application = BitrixVue.createApp(App, Core.getParams());\n\n\t\tapplication.mixin(locMixin);\n\t\tapplication.use(Core.getStore());\n\t\tapplication.mount(container);\n\n\t\tthis.#application = application;\n\t}\n\n\tasync #initCore(resourceId: ResourceId): Promise<void>\n\t{\n\t\ttry\n\t\t{\n\t\t\tawait Core.init();\n\t\t\tawait Core.addDynamicModule(\n\t\t\t\tResourceCreationWizardModel\n\t\t\t\t\t.create()\n\t\t\t\t\t.setVariables({ resourceId }),\n\t\t\t);\n\t\t\tawait Core.addDynamicModule(Notifications.create());\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error('Init Resource creation wizard error', error);\n\t\t}\n\t}\n\n\t#makeContainer(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div id=\"booking-resource-creation-wizard-app\" class=\"booking-resource-creation-wizard-app\"></div>\n\t\t`;\n\t}\n\n\topen(resourceId: ResourceId = null): void\n\t{\n\t\tSidePanelInstance.open(ResourceCreationWizard.makeName(resourceId), {\n\t\t\twidth: ResourceCreationWizard.#width,\n\t\t\tcacheable: false,\n\t\t\tevents: {\n\t\t\t\tonClose: this.closeSidePanel.bind(this),\n\t\t\t},\n\t\t\tcontentCallback: async () => {\n\t\t\t\tawait this.#initCore(resourceId);\n\t\t\t\tthis.subscribe();\n\n\t\t\t\tconst container = this.#makeContainer();\n\t\t\t\tthis.#mountContent(container);\n\n\t\t\t\treturn container;\n\t\t\t},\n\t\t});\n\t}\n\n\tasync closeSidePanel(): Promise<void>\n\t{\n\t\tthis.unsubscribe();\n\t\tthis.#application.unmount();\n\t\tthis.#application = null;\n\n\t\tawait Core.removeDynamicModule(Model.ResourceCreationWizard);\n\t\tawait Core.removeDynamicModule(Model.Notifications);\n\t}\n\n\tsubscribe(): void\n\t{\n\t\tEvent.EventEmitter.subscribe(\n\t\t\tEventName.CloseWizard,\n\t\t\tthis.close,\n\t\t);\n\t}\n\n\tunsubscribe(): void\n\t{\n\t\tEvent.EventEmitter.unsubscribe(\n\t\t\tEventName.CloseWizard,\n\t\t\tthis.close,\n\t\t);\n\t}\n\n\tclose(): void\n\t{\n\t\tSidePanelInstance.close();\n\t}\n}\n"],"names":["UiLoader","name","props","show","Boolean","data","loader","Loader","mounted","$refs","template","ResourceCreationWizardLayout","step","type","Number","required","title","String","default","loading","watch","wrapper","scrollTo","components","ResourceCreationWizardHeader","computed","$store","state","resourceName","NextButton","UiButton","Button","steps","Array","disabled","waiting","currentStep","size","ButtonSize","SMALL","color","ButtonColor","SUCCESS","BackButton","buttonSize","buttonColor","LINK","Step","constructor","hidden","store","Core","getStore","labelNext","Loc","getMessage","labelBack","next","dispatch","back","ChooseResourceStep","Event","EventEmitter","emit","EventName","CloseWizard","ResourceNotificationStep","Type","isNull","id","commit","Model","ResourceCreationWizard","RcwAnalytics","sendAddResourceFinish","isApproved","getters","slotRanges","isSuccess","resourceTypeService","update","typeId","Promise","resolve","ConditionChecker","checkIsApproved","senderType","SenderTypes","bitrix24","bitrix24Sender","Notifications","find","sender","moduleId","Module","Crm","code","canUse","resource","slotSize","scheduleSlots","timezone","Interface","map","slotRange","resourceType","ResourceTypes","Object","values","Dictionary","value","reduce","acc","notificationOnField","NotificationFieldsMap","NotificationOn","templateTypeField","TemplateType","settingsFields","Settings","isCheckedForAll","fields","field","isUpdate","resourceToProcess","result","resourceService","add","text","isArrayFilled","errors","message","Notifier","notify","uploadedAvatar","avatar","url","file","Text","getRandom","userIds","length","locationId","checkAvailability","reminders","ResourceSettingsStep","resourceId","sendAddResourceStep2","isIntegrationCalendarEnabled","calendarEntity","ResourceCreationWizardFooter","mapGetters","isSaving","ResourceType","emits","IconSet","Icon","ResourceCategoryCard","setup","HelpDesk","anchorCode","resourceTypes","advertisingResourceTypes","methods","selectResourceType","relatedResourceTypeId","sendAddResourceStep1","HelpDeskLoc","AvatarField","RichLoc","BIcon","avatarUrl","hasAvatar","trim","uploader","Uploader","browseElement","uploaderContainer","assignServerFile","acceptedFileTypes","maxFileSize","events","UploaderEvent","FILE_LOAD_COMPLETE","event","getData","$emit","FILE_ERROR","error","errorMessage","BX","UI","Notification","Center","content","removeCurrentAvatar","removeFiles","ErrorMessage","NameField","EmptyRichLoc","invalid","localName","get","set","TypeField","initialTypeId","initialTypeName","entityId","EntitySelectorEntity","typeSelectorId","typeName","showTypeSelector","dialog","getTypeSelectorDialog","typeSelectorAngle","bindElement","existing","Dialog","getById","setTargetNode","targetNode","width","height","enableSearch","dropdownMode","context","multiple","cacheable","preselectedItems","entities","dynamicLoad","dynamicSearch","popupOptions","targetContainer","$root","$el","querySelector","searchOptions","allowCreateItem","footerOptions","label","loc","query","searchQuery","getQuery","createType","then","updateResourceType","getTarget","addItem","prepareTypeToDialog","hide","catch","item","getId","getTitle","sort","selected","tabs","supertitle","DescriptionField","description","localDescription","TitleLayout","iconType","TextLayout","BaseFields","initialResourceName","initialResourceDescription","initialResourceType","initialResourceAvatarUrl","additionalInfoExpanded","initialAdditionalInfoExpanded","Actions","invalidResourceName","invalidResourceType","scrollToBaseFieldsForm","baseFieldsForm","scrollIntoView","behavior","block","toggleAdditionalInfo","ScheduleItem","modelValue","itemClass","ResourceSchedule","isSelected","toString","selectOption","ScheduleTypes","titleIconType","OPENED_EYE","items","SettingsItem","SettingsSelector","entitiesId","tab","handler","selector","setLocked","immediate","created","createSelector","mountSelector","beforeUnmount","destroySelector","tagSelectionOptions","addButtonCaption","showCreateButton","maxHeight","dialogOptions","compactView","showAvatars","select","deselect","TagSelector","itemId","itemsSet","Set","filter","renderTo","settingsSelector","getDialog","destroy","innerHTML","mapResourceGetters","mapActions","createNamespacedHelpers","IntegrationCalendar","Switcher","UiReminder","iconName","Main","CALENDAR_1","iconColor","iconSize","entityRoomId","Room","entityUserId","User","isVisible","entityCalendar","invalidIntegrationCalendarUser","isEnabled","r","count","updateResourceEntityCalendar","isDisabled","userErrorMessage","scrollToUserField","beforeMount","toggleEnabled","createResourceEntityCalendar","setInvalidIntegrationCalendarUser","updateUsers","parseInt","updateLocationId","locationIds","user","Integration","COLLABORATION","WorkTimeMixin","Mon","Tue","Wed","Thu","Fri","Sat","Sun","daysLabel","initialDays","forEach","day","prototype","hasOwnProperty","call","formatDaysLabel","defaultString","weekDays","companyScheduleSlots","isArraysEqual","selectedDays","orderedDays","keys","daysLabelMap","sortedSelectedDays","a","b","indexOf","formattedDays","join","getDayDefaultIndex","dayKey","dayIndices","first","second","every","index","weekStart","weekdays","format","allDays","startIndex","slice","currentDayIndex","Date","getDay","targetDayIndex","dayDifference","dayDate","setDate","getDate","DateTimeFormat","WeekDaysPopup","HTMLElement","Popup","mixins","close","click","trueKeys","key","popupId","config","offsetRight","offsetWidth","angle","bindOptions","forceBindPosition","forceLeft","WorkTimeSlotRange","isLastRange","initialSlotRange","fromId","toId","fromTs","toTs","duration","isShownDays","arrow","days","from","to","removeSlot","localSlotRange","showDays","hideDays","selectDays","menuId","MenuManager","timeList","create","className","autoHide","closeByEsc","onShow","selectedItem","getMenuItems","Dom","hasClass","getLayout","itemHeight","offset","scrollContainer","getPopupWindow","getContentContainer","topPosition","getRelativePosition","getContainer","top","scrollTop","onClose","minWidth","entries","generateTimeMap","minutes","defaultClass","addMenuItem","dataset","onclick","timeMap","timeFormat","getFormat","interval","timestamp","setHours","midnightTimestamp","clickBtn","daysId","fromLabel","toLabel","WorkTimeSelector","initialSlotRanges","isGlobalSchedule","defaultSlotRange","initialTimezone","currentTimezone","isCompanyScheduleAccess","companyScheduleUrl","localSlotRanges","processSlotRanges","isChecked","hasTimezonesDifference","formattedInitialOffset","formattedCurrentOffset","calculateDifferenceBetweenTimezones","newSlotRanges","deep","checked","openCompanyWorkTime","isTextClick","target","currentTarget","subscribeOnce","GLOBAL_TARGET","baseEvent","slider","getWindow","innerBaseEvent","extraSettings","reloadAfterClose","SidePanel","Instance","open","preventDefault","updateSlotRange","addSlotRange","push","removeSlotRange","splice","getTimezoneOffset","timeZone","Timezone","getOffset","now","initialOffset","currentOffset","formatOffset","sign","hours","Math","floor","abs","padStart","totalDifferenceMinutes","onSlotClick","companyWorkTimeOptionLabel","isSlotsDisabled","timezoneIconType","EARTH_TIME","formattedTimezonesText","replace","WorkTime","updateGlobalSchedule","getGlobalSchedule","CLOCK_2","SlotLengthPrecisionSelection","directives","hint","initialValue","minutesFocused","distributeInitialValue","remainingMinutes","calculateTotalMinutes","totalMinutes","validateHours","isNumber","setTimeout","validateMinutes","handleEnterKey","blur","hourHint","minutesHint","unitDurations","Duration","getUnitDurations","units","fromEntries","unit","i","disabledLengths","H","d","SlotLengthSelector","initialSelectedValue","selectedPrecisionValue","precisionMode","selectedValue","slotLengthId","durations","templateValues","has","selectPrecision","getClass","getSoonHintContent","position","offsetLeft","offsetTop","SlotLength","selectedSlotLength","updateSelectedValue","GANTT_GRAPHS","mapMutations","ResourceSettingsCard","resourceDescription","resourceAvatarUrl","isMain","updateResource","isEditForm","getInitialSlotTimeZone","updateSlotRanges","updateResourceName","setInvalidResourceName","setInvalidResourceType","updateResourceDescription","updateResourceAvatarFile","avatarFile","setResourceAvatarFile","getBinary","getPreviewUrl","updateSlotDataForAllRanges","updateSlotLength","inputSlotRanges","setGlobalSchedule","fetchData","resourceCreationWizardService","LabelDropdown","BMenu","isMenuShown","menuOptions","container","onClick","handleClick","ChannelMenu","currentChannel","ButtonIcon","menuPopup","channel","isChannelChoiceAvailable","notificationChannelOptions","NotificationChannel","WhatsApp","Sms","unmounted","openMenu","popupWindow","isShown","menuButton","document","onDestroy","bindScrollEvent","unbindScrollEvent","bind","adjustPosition","capture","unbind","ChooseTemplatePopup","model","currentTemplateType","EXTRA_SMALL","buttonColors","BASE_LIGHT","PRIMARY","messenger","selectedTemplateType","templateTypes","forceTop","childNodes","animation","angleBorderRadius","padding","getFormattedTime","getMessageTemplate","templateType","templateModel","templates","textSms","handleChannelChange","selectedChannel","chooseType","selectedType","popup","getButtonText","getButtonColor","getTemplateTitle","typeDictionary","templateDictionary","TemplateEmpty","ResourceNotificationCheckBoxRow","CheckedForAll","ResourceNotificationTextRow","icon","Description","helpDesk","MessageTemplate","preparedTemplate","replaceAll","ManagerNotification","CyclePopup","scrollToCard","isPopupShown","notificationText","sleep","timeout","ResourceNotification","managerDescription","CRM","showTemplatePopup","isCurrentSenderAvailable","templateName","messageTemplate","hasTemplate","disableSwitcher","ordinal","Ordinal","soonHint","hintManager","Hint","createInstance","popupParameters","init","animateHeight","updated","handleTemplateTypeSelected","getChooseTemplateButton","chooseTemplateBtn","expand","updateNotificationExpanded","isExpanded","withAnimation","style","prevHeight","offsetHeight","main","manager","BaseInfo","isInfoNotificationOn","infoNotificationDelay","card","$forceUpdate","locInfoTimeSend","ResourceNotificationInfo","ahaMoments","shouldShow","AhaMoment","showAhaMoment","showGuide","article","AhaMessageTemplate","setShown","Confirmation","CardId","isConfirmationNotificationOn","confirmationNotificationDelay","confirmationNotificationRepetitions","confirmationNotificationRepetitionsInterval","confirmationCounterDelay","locSendMessageBefore","locRetryMessage","locManagerRemindTime","Reminder","isReminderNotificationOn","reminderNotificationDelay","locSendReminderTime","ResourceNotificationReminder","Feedback","labelValue","settings","notification","delayValues","isFeedbackNotificationOn","locSendFeedbackTime","ResourceNotificationFeedback","Late","isDelayedNotificationOn","delayedNotificationDelay","delayedCounterDelay","locSendMessageAfter","locNotifyManagerIn","ResourceNotificationCard","notificationViews","notifications","dictionary","Info","view","Delayed","App","mapState","fetching","currentView","initApp","initState","loadWizardData","updateFetching","console","makeName","SidePanelInstance","closeSidePanel","contentCallback","subscribe","unsubscribe","unmount","removeDynamicModule","application","BitrixVue","createApp","getParams","mixin","locMixin","use","mount","addDynamicModule","ResourceCreationWizardModel","setVariables","Tag","render"],"mappings":"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"}