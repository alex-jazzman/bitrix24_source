{"version":3,"file":"remove-resource.bundle.js","sources":["../src/remove-confirmation.js","../src/remove-resource.js"],"sourcesContent":["import { Loc } from 'main.core';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\n\nimport { CloseIconSize } from 'main.popup';\nimport type { ResourceModel } from 'booking.model.resources';\n\nexport class RemoveConfirmation\n{\n\tstatic confirmDelete(): Promise<boolean>\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst messageBox = MessageBox.create({\n\t\t\t\ttitle: Loc.getMessage('BOOKING_RESOURCE_CONFIRM_DELETE_TITLE'),\n\t\t\t\tyesCaption: Loc.getMessage('BOOKING_RESOURCE_CONFIRM_DELETE_YES'),\n\t\t\t\tmodal: true,\n\t\t\t\tbuttons: MessageBoxButtons.YES_CANCEL,\n\t\t\t\tpopupOptions: {\n\t\t\t\t\tclassName: 'booking-resource-remove-confirmation',\n\t\t\t\t\tminHeight: 135,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tcloseIcon: true,\n\t\t\t\t\tcloseIconSize: CloseIconSize.LARGE,\n\t\t\t\t},\n\t\t\t\tuseAirDesign: true,\n\t\t\t\tonYes: async (box) => {\n\t\t\t\t\tbox.close();\n\t\t\t\t\tresolve(true);\n\t\t\t\t},\n\t\t\t\tonCancel: (box) => {\n\t\t\t\t\tbox.close();\n\t\t\t\t\tresolve(false);\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tmessageBox.show();\n\t\t});\n\t}\n\n\tstatic confirmMoveFutureBooking(): Promise<boolean>\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst messageBox = MessageBox.create({\n\t\t\t\ttitle: Loc.getMessage('BOOKING_RESOURCE_CONFIRM_MOVE_FUTURE_BOOKINGS_TITLE'),\n\t\t\t\tmessage: Loc.getMessage('BOOKING_RESOURCE_CONFIRM_MOVE_FUTURE_BOOKINGS_TEXT'),\n\t\t\t\tyesCaption: Loc.getMessage('BOOKING_RESOURCE_CONFIRM_MOVE_FUTURE_BOOKINGS_YES'),\n\t\t\t\tnoCaption: Loc.getMessage('BOOKING_RESOURCE_CONFIRM_MOVE_FUTURE_BOOKINGS_NO'),\n\t\t\t\tbuttons: MessageBoxButtons.YES_NO,\n\t\t\t\tpopupOptions: {\n\t\t\t\t\tclassName: 'booking-resource-remove-confirmation booking-resource-remove-confirmation-move-bookings --air',\n\t\t\t\t\tminHeight: 176,\n\t\t\t\t\tminWidth: 418,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tcloseIcon: true,\n\t\t\t\t\tcloseIconSize: CloseIconSize.LARGE,\n\t\t\t\t},\n\t\t\t\tuseAirDesign: true,\n\t\t\t\tonYes: async (box) => {\n\t\t\t\t\tbox.close();\n\t\t\t\t\tresolve(true);\n\t\t\t\t},\n\t\t\t\tonNo: (box) => {\n\t\t\t\t\tbox.close();\n\t\t\t\t\tresolve(false);\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tmessageBox.show();\n\t\t});\n\t}\n\n\tstatic confirmAfterMoveFutureBooking(resource: ResourceModel): Promise<boolean>\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst messageBox = MessageBox.create({\n\t\t\t\ttitle: Loc.getMessage('BOOKING_RESOURCE_CONFIRM_AFTER_MOVE_FUTURE_BOOKINGS_TITLE'),\n\t\t\t\tmessage: Loc.getMessage('BOOKING_RESOURCE_CONFIRM_AFTER_MOVE_FUTURE_BOOKINGS_TEXT'),\n\t\t\t\tyesCaption: Loc.getMessage('BOOKING_RESOURCE_CONFIRM_AFTER_MOVE_FUTURE_BOOKINGS_YES'),\n\t\t\t\tnoCaption: Loc.getMessage('BOOKING_RESOURCE_CONFIRM_AFTER_MOVE_FUTURE_BOOKINGS_NO'),\n\t\t\t\tbuttons: MessageBoxButtons.YES_NO,\n\t\t\t\tpopupOptions: {\n\t\t\t\t\tid: `booking-resource-remove-confirmation-${resource.id}`,\n\t\t\t\t\tclassName: 'booking-resource-remove-confirmation booking-resource-remove-confirmation-after-clear --air',\n\t\t\t\t\tminHeight: 176,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tcloseIcon: true,\n\t\t\t\t\tcloseIconSize: CloseIconSize.LARGE,\n\t\t\t\t},\n\t\t\t\tuseAirDesign: true,\n\t\t\t\tonYes: async (box) => {\n\t\t\t\t\tbox.close();\n\t\t\t\t\tresolve(true);\n\t\t\t\t},\n\t\t\t\tonNo: (box) => {\n\t\t\t\t\tbox.close();\n\t\t\t\t\tresolve(false);\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tmessageBox.show();\n\t\t});\n\t}\n}\n","import { Loc } from 'main.core';\nimport 'ui.notification';\n\nimport { Model } from 'booking.const';\nimport { Core } from 'booking.core';\nimport { resourceService } from 'booking.provider.service.resources-service';\n\nimport { RemoveConfirmation } from './remove-confirmation';\n\nimport './remove-resource.css';\n\nconst secondsToDelete = 5;\n\nexport class RemoveResource\n{\n\t#resourceId: number;\n\t#shouldRemoveFutureBookings: boolean = false;\n\t#futureBookingIds: number[] = [];\n\n\t#isDeletionCancelled: boolean;\n\t#balloon: BX.UI.Notification.Balloon;\n\t#secondsLeft: number;\n\t#countdownInterval: number;\n\n\tconstructor(resourceId: number)\n\t{\n\t\tthis.#resourceId = resourceId;\n\t}\n\n\tasync run(): Promise<void>\n\t{\n\t\tawait this.#cancelRemovingResource();\n\n\t\tconst hasFutureBookings = await resourceService.hasFutureBookings(this.#resourceId);\n\n\t\tif (hasFutureBookings)\n\t\t{\n\t\t\tconst shouldMoveFutureBookings = await RemoveConfirmation.confirmMoveFutureBooking();\n\t\t\tif (shouldMoveFutureBookings)\n\t\t\t{\n\t\t\t\tawait Core.getStore().dispatch(`${Model.Filter}/setDeletingResourceFilter`, {\n\t\t\t\t\tresourceId: this.#resourceId,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.#shouldRemoveFutureBookings = true;\n\t\t\t\tthis.#runCancellableDeletion();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst isDeletionConfirmed = await RemoveConfirmation.confirmDelete();\n\t\tif (isDeletionConfirmed)\n\t\t{\n\t\t\tthis.#runCancellableDeletion();\n\t\t}\n\t}\n\n\tasync runAfterMoveBookings(): Promise<void>\n\t{\n\t\tawait this.#cancelRemovingResource();\n\n\t\tconst hasFutureBookings = await resourceService.hasFutureBookings(this.#resourceId);\n\t\tif (hasFutureBookings)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst resource = Core.getStore().getters[`${Model.Resources}/getById`](this.#resourceId);\n\t\tconst isDeletionConfirmed = await RemoveConfirmation.confirmAfterMoveFutureBooking(resource);\n\n\t\tif (isDeletionConfirmed)\n\t\t{\n\t\t\tthis.#runCancellableDeletion();\n\t\t}\n\t}\n\n\t#runCancellableDeletion(): void\n\t{\n\t\tthis.#secondsLeft = secondsToDelete;\n\n\t\tthis.#balloon = BX.UI.Notification.Center.notify({\n\t\t\tid: `booking-notify-remove-resource-${this.#resourceId}`,\n\t\t\tcontent: this.#getBalloonTitle(),\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\ttitle: Loc.getMessage('BOOKING_RESOURCE_REMOVE_BALLOON_CANCEL'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tmouseup: this.#cancelDeletion,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tonClose: this.#onBalloonClose,\n\t\t\t},\n\t\t});\n\n\t\tthis.#runCountdown();\n\t}\n\n\t#runCountdown(): void\n\t{\n\t\tvoid Core.getStore().dispatch(`${Model.Interface}/addDeletingResource`, this.#resourceId);\n\n\t\tif (this.#shouldRemoveFutureBookings)\n\t\t{\n\t\t\tconst futureBookings = Core.getStore().getters[`${Model.Bookings}/getFutureByResourceId`](this.#resourceId);\n\t\t\tthis.#futureBookingIds = futureBookings.map((booking) => booking.id);\n\n\t\t\tif (this.#futureBookingIds.length > 0)\n\t\t\t{\n\t\t\t\tvoid Core.getStore().dispatch(`${Model.Interface}/addDeletingBooking`, this.#futureBookingIds);\n\t\t\t}\n\t\t}\n\n\t\tthis.#countdownInterval = setInterval(() => {\n\t\t\tthis.#secondsLeft--;\n\n\t\t\tthis.#balloon.update({ content: this.#getBalloonTitle() });\n\n\t\t\tif (this.#secondsLeft <= 0)\n\t\t\t{\n\t\t\t\tthis.#balloon.close();\n\t\t\t}\n\t\t}, 1000);\n\t}\n\n\t#getBalloonTitle(): string\n\t{\n\t\treturn Loc.getMessage('BOOKING_RESOURCE_REMOVE_BALLOON_TEXT', {\n\t\t\t'#COUNTDOWN#': this.#secondsLeft,\n\t\t});\n\t}\n\n\t#cancelDeletion = (): void => {\n\t\tthis.#isDeletionCancelled = true;\n\t\tthis.#balloon.close();\n\n\t\tvoid Core.getStore().dispatch(`${Model.Interface}/removeDeletingResource`, this.#resourceId);\n\n\t\tif (this.#futureBookingIds.length > 0)\n\t\t{\n\t\t\tvoid Core.getStore().dispatch(`${Model.Interface}/removeDeletingBooking`, this.#futureBookingIds);\n\t\t}\n\t};\n\n\t#onBalloonClose = (): void => {\n\t\tclearInterval(this.#countdownInterval);\n\n\t\tif (this.#isDeletionCancelled)\n\t\t{\n\t\t\tthis.#isDeletionCancelled = false;\n\n\t\t\treturn;\n\t\t}\n\n\t\tvoid resourceService.delete(this.#resourceId, this.#shouldRemoveFutureBookings);\n\t};\n\n\tasync #cancelRemovingResource(): Promise<void>\n\t{\n\t\tconst $store = Core.getStore();\n\n\t\tif ($store.getters[`${Model.Filter}/isDeletingResourceFilterMode`])\n\t\t{\n\t\t\tawait Promise.all([\n\t\t\t\t$store.dispatch(`${Model.Filter}/clearFilter`),\n\t\t\t\t$store.dispatch(`${Model.Interface}/setPinnedResourceIds`, []),\n\t\t\t]);\n\t\t}\n\t}\n}\n"],"names":["RemoveConfirmation","confirmDelete","Promise","resolve","messageBox","MessageBox","create","title","Loc","getMessage","yesCaption","modal","buttons","MessageBoxButtons","YES_CANCEL","popupOptions","className","minHeight","closeByEsc","closeIcon","closeIconSize","CloseIconSize","LARGE","useAirDesign","onYes","box","close","onCancel","show","confirmMoveFutureBooking","message","noCaption","YES_NO","minWidth","onNo","confirmAfterMoveFutureBooking","resource","id","secondsToDelete","RemoveResource","constructor","resourceId","Core","getStore","dispatch","Model","Interface","length","clearInterval","resourceService","delete","run","hasFutureBookings","shouldMoveFutureBookings","Filter","isDeletionConfirmed","runAfterMoveBookings","getters","Resources","BX","UI","Notification","Center","notify","content","actions","events","mouseup","onClose","futureBookings","Bookings","map","booking","setInterval","update","$store","all"],"mappings":";;;;;;CAMO,MAAMA,kBAAkB,CAC/B;GACC,OAAOC,aAAa,GACpB;KACC,OAAO,IAAIC,OAAO,CAAEC,OAAO,IAAK;OAC/B,MAAMC,UAAU,GAAGC,gCAAU,CAACC,MAAM,CAAC;SACpCC,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,uCAAuC,CAAC;SAC9DC,UAAU,EAAEF,aAAG,CAACC,UAAU,CAAC,qCAAqC,CAAC;SACjEE,KAAK,EAAE,IAAI;SACXC,OAAO,EAAEC,uCAAiB,CAACC,UAAU;SACrCC,YAAY,EAAE;WACbC,SAAS,EAAE,sCAAsC;WACjDC,SAAS,EAAE,GAAG;WACdC,UAAU,EAAE,IAAI;WAChBC,SAAS,EAAE,IAAI;WACfC,aAAa,EAAEC,wBAAa,CAACC;UAC7B;SACDC,YAAY,EAAE,IAAI;SAClBC,KAAK,EAAE,MAAOC,GAAG,IAAK;WACrBA,GAAG,CAACC,KAAK,EAAE;WACXvB,OAAO,CAAC,IAAI,CAAC;UACb;SACDwB,QAAQ,EAAGF,GAAG,IAAK;WAClBA,GAAG,CAACC,KAAK,EAAE;WACXvB,OAAO,CAAC,KAAK,CAAC;;QAEf,CAAC;OAEFC,UAAU,CAACwB,IAAI,EAAE;MACjB,CAAC;;GAGH,OAAOC,wBAAwB,GAC/B;KACC,OAAO,IAAI3B,OAAO,CAAEC,OAAO,IAAK;OAC/B,MAAMC,UAAU,GAAGC,gCAAU,CAACC,MAAM,CAAC;SACpCC,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,qDAAqD,CAAC;SAC5EqB,OAAO,EAAEtB,aAAG,CAACC,UAAU,CAAC,oDAAoD,CAAC;SAC7EC,UAAU,EAAEF,aAAG,CAACC,UAAU,CAAC,mDAAmD,CAAC;SAC/EsB,SAAS,EAAEvB,aAAG,CAACC,UAAU,CAAC,kDAAkD,CAAC;SAC7EG,OAAO,EAAEC,uCAAiB,CAACmB,MAAM;SACjCjB,YAAY,EAAE;WACbC,SAAS,EAAE,+FAA+F;WAC1GC,SAAS,EAAE,GAAG;WACdgB,QAAQ,EAAE,GAAG;WACbf,UAAU,EAAE,IAAI;WAChBC,SAAS,EAAE,IAAI;WACfC,aAAa,EAAEC,wBAAa,CAACC;UAC7B;SACDC,YAAY,EAAE,IAAI;SAClBC,KAAK,EAAE,MAAOC,GAAG,IAAK;WACrBA,GAAG,CAACC,KAAK,EAAE;WACXvB,OAAO,CAAC,IAAI,CAAC;UACb;SACD+B,IAAI,EAAGT,GAAG,IAAK;WACdA,GAAG,CAACC,KAAK,EAAE;WACXvB,OAAO,CAAC,KAAK,CAAC;;QAEf,CAAC;OAEFC,UAAU,CAACwB,IAAI,EAAE;MACjB,CAAC;;GAGH,OAAOO,6BAA6B,CAACC,QAAuB,EAC5D;KACC,OAAO,IAAIlC,OAAO,CAAEC,OAAO,IAAK;OAC/B,MAAMC,UAAU,GAAGC,gCAAU,CAACC,MAAM,CAAC;SACpCC,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,2DAA2D,CAAC;SAClFqB,OAAO,EAAEtB,aAAG,CAACC,UAAU,CAAC,0DAA0D,CAAC;SACnFC,UAAU,EAAEF,aAAG,CAACC,UAAU,CAAC,yDAAyD,CAAC;SACrFsB,SAAS,EAAEvB,aAAG,CAACC,UAAU,CAAC,wDAAwD,CAAC;SACnFG,OAAO,EAAEC,uCAAiB,CAACmB,MAAM;SACjCjB,YAAY,EAAE;WACbsB,EAAE,EAAG,wCAAuCD,QAAQ,CAACC,EAAG,EAAC;WACzDrB,SAAS,EAAE,6FAA6F;WACxGC,SAAS,EAAE,GAAG;WACdC,UAAU,EAAE,IAAI;WAChBC,SAAS,EAAE,IAAI;WACfC,aAAa,EAAEC,wBAAa,CAACC;UAC7B;SACDC,YAAY,EAAE,IAAI;SAClBC,KAAK,EAAE,MAAOC,GAAG,IAAK;WACrBA,GAAG,CAACC,KAAK,EAAE;WACXvB,OAAO,CAAC,IAAI,CAAC;UACb;SACD+B,IAAI,EAAGT,GAAG,IAAK;WACdA,GAAG,CAACC,KAAK,EAAE;WACXvB,OAAO,CAAC,KAAK,CAAC;;QAEf,CAAC;OAEFC,UAAU,CAACwB,IAAI,EAAE;MACjB,CAAC;;CAEJ;;CC1FA,MAAMU,eAAe,GAAG,CAAC;CAAC;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAE1B,CAAO,MAAMC,cAAc,CAC3B;GAUCC,WAAW,CAACC,UAAkB,EAC9B;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA,OATuC;;KAAK;OAAA;OAAA,OACd;;KAAE;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA,OAuHd,MAAY;SAC7B,4CAAI,gDAAwB,IAAI;SAChC,4CAAI,sBAAUf,KAAK,EAAE;SAErB,KAAKgB,iBAAI,CAACC,QAAQ,EAAE,CAACC,QAAQ,CAAE,GAAEC,mBAAK,CAACC,SAAU,yBAAwB,0CAAE,IAAI,4BAAa;SAE5F,IAAI,4CAAI,wCAAmBC,MAAM,GAAG,CAAC,EACrC;WACC,KAAKL,iBAAI,CAACC,QAAQ,EAAE,CAACC,QAAQ,CAAE,GAAEC,mBAAK,CAACC,SAAU,wBAAuB,0CAAE,IAAI,wCAAmB;;;;KAElG;OAAA;OAAA,OAEiB,MAAY;SAC7BE,aAAa,yCAAC,IAAI,0CAAoB;SAEtC,4CAAI,IAAI,+CACR;WACC,4CAAI,gDAAwB,KAAK;WAEjC;;SAGD,KAAKC,yDAAe,CAACC,MAAM,yCAAC,IAAI,qEAAc,IAAI,4DAA6B;;;KApI/E,4CAAI,8BAAeT,UAAU;;GAG9B,MAAMU,GAAG,GACT;KACC,8CAAM,IAAI,qDAA0B;KAEpC,MAAMC,iBAAiB,GAAG,MAAMH,yDAAe,CAACG,iBAAiB,yCAAC,IAAI,4BAAa;KAEnF,IAAIA,iBAAiB,EACrB;OACC,MAAMC,wBAAwB,GAAG,MAAMrD,kBAAkB,CAAC6B,wBAAwB,EAAE;OACpF,IAAIwB,wBAAwB,EAC5B;SACC,MAAMX,iBAAI,CAACC,QAAQ,EAAE,CAACC,QAAQ,CAAE,GAAEC,mBAAK,CAACS,MAAO,4BAA2B,EAAE;WAC3Eb,UAAU,0CAAE,IAAI;UAChB,CAAC;QACF,MAED;SACC,4CAAI,8DAA+B,IAAI;SACvC,4CAAI;;OAGL;;KAGD,MAAMc,mBAAmB,GAAG,MAAMvD,kBAAkB,CAACC,aAAa,EAAE;KACpE,IAAIsD,mBAAmB,EACvB;OACC,4CAAI;;;GAIN,MAAMC,oBAAoB,GAC1B;KACC,8CAAM,IAAI,qDAA0B;KAEpC,MAAMJ,iBAAiB,GAAG,MAAMH,yDAAe,CAACG,iBAAiB,yCAAC,IAAI,4BAAa;KACnF,IAAIA,iBAAiB,EACrB;OACC;;KAGD,MAAMhB,QAAQ,GAAGM,iBAAI,CAACC,QAAQ,EAAE,CAACc,OAAO,CAAE,GAAEZ,mBAAK,CAACa,SAAU,UAAS,CAAC,yCAAC,IAAI,4BAAa;KACxF,MAAMH,mBAAmB,GAAG,MAAMvD,kBAAkB,CAACmC,6BAA6B,CAACC,QAAQ,CAAC;KAE5F,IAAImB,mBAAmB,EACvB;OACC,4CAAI;;;CAkGP;CAAC,oCA7FA;GACC,4CAAI,gCAAgBjB,eAAe;GAEnC,4CAAI,wBAAYqB,EAAE,CAACC,EAAE,CAACC,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;KAChD1B,EAAE,EAAG,kCAA+B,wCAAE,IAAI,2BAAa,EAAC;KACxD2B,OAAO,0CAAE,IAAI,uCAAmB;KAChCC,OAAO,EAAE,CACR;OACC1D,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,wCAAwC,CAAC;OAC/DyD,MAAM,EAAE;SACPC,OAAO,0CAAE,IAAI;;MAEd,CACD;KACDD,MAAM,EAAE;OACPE,OAAO,0CAAE,IAAI;;IAEd,CAAC;GAEF,4CAAI;CACL;CAAC,0BAGD;GACC,KAAK1B,iBAAI,CAACC,QAAQ,EAAE,CAACC,QAAQ,CAAE,GAAEC,mBAAK,CAACC,SAAU,sBAAqB,0CAAE,IAAI,4BAAa;GAEzF,4CAAI,IAAI,6DACR;KACC,MAAMuB,cAAc,GAAG3B,iBAAI,CAACC,QAAQ,EAAE,CAACc,OAAO,CAAE,GAAEZ,mBAAK,CAACyB,QAAS,wBAAuB,CAAC,yCAAC,IAAI,4BAAa;KAC3G,4CAAI,0CAAqBD,cAAc,CAACE,GAAG,CAAEC,OAAO,IAAKA,OAAO,CAACnC,EAAE,CAAC;KAEpE,IAAI,4CAAI,wCAAmBU,MAAM,GAAG,CAAC,EACrC;OACC,KAAKL,iBAAI,CAACC,QAAQ,EAAE,CAACC,QAAQ,CAAE,GAAEC,mBAAK,CAACC,SAAU,qBAAoB,0CAAE,IAAI,wCAAmB;;;GAIhG,4CAAI,4CAAsB2B,WAAW,CAAC,MAAM;KAC3C,4CAAI,+BAAe;KAEnB,4CAAI,sBAAUC,MAAM,CAAC;OAAEV,OAAO,0CAAE,IAAI;MAAqB,CAAC;KAE1D,IAAI,4CAAI,iCAAiB,CAAC,EAC1B;OACC,4CAAI,sBAAUtC,KAAK,EAAE;;IAEtB,EAAE,IAAI,CAAC;CACT;CAAC,6BAGD;GACC,OAAOlB,aAAG,CAACC,UAAU,CAAC,sCAAsC,EAAE;KAC7D,aAAa,0CAAE,IAAI;IACnB,CAAC;CACH;CAAC,0CA4BD;GACC,MAAMkE,MAAM,GAAGjC,iBAAI,CAACC,QAAQ,EAAE;GAE9B,IAAIgC,MAAM,CAAClB,OAAO,CAAE,GAAEZ,mBAAK,CAACS,MAAO,+BAA8B,CAAC,EAClE;KACC,MAAMpD,OAAO,CAAC0E,GAAG,CAAC,CACjBD,MAAM,CAAC/B,QAAQ,CAAE,GAAEC,mBAAK,CAACS,MAAO,cAAa,CAAC,EAC9CqB,MAAM,CAAC/B,QAAQ,CAAE,GAAEC,mBAAK,CAACC,SAAU,uBAAsB,EAAE,EAAE,CAAC,CAC9D,CAAC;;CAEJ;;;;;;;;"}