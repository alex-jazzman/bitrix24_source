this.BX=this.BX||{};this.BX.Booking=this.BX.Booking||{};(function(e,s,t,o,a,r,i,l,n,c){"use strict";var d=babelHelpers.classPrivateFieldLooseKey("ahaPopupWidth");var h=babelHelpers.classPrivateFieldLooseKey("bookingForAhaMoment");var u=babelHelpers.classPrivateFieldLooseKey("shownPopups");var p=babelHelpers.classPrivateFieldLooseKey("shouldShowBanner");var b=babelHelpers.classPrivateFieldLooseKey("shouldShowAddResource");var v=babelHelpers.classPrivateFieldLooseKey("shouldShowAddClient");var P=babelHelpers.classPrivateFieldLooseKey("shouldShowResourceIntersection");var B=babelHelpers.classPrivateFieldLooseKey("shouldShowExpandGrid");var A=babelHelpers.classPrivateFieldLooseKey("shouldShowSelectResources");var m=babelHelpers.classPrivateFieldLooseKey("shouldShowCyclePopup");var L=babelHelpers.classPrivateFieldLooseKey("wasNotShown");var M=babelHelpers.classPrivateFieldLooseKey("wasShown");var F=babelHelpers.classPrivateFieldLooseKey("getOptionName");class f{constructor(){Object.defineProperty(this,F,{value:I});Object.defineProperty(this,M,{value:k});Object.defineProperty(this,L,{value:R});Object.defineProperty(this,m,{value:C});Object.defineProperty(this,A,{value:O});Object.defineProperty(this,B,{value:S});Object.defineProperty(this,P,{value:w});Object.defineProperty(this,v,{value:y});Object.defineProperty(this,b,{value:H});Object.defineProperty(this,p,{value:g});Object.defineProperty(this,d,{writable:true,value:380});Object.defineProperty(this,h,{writable:true,value:void 0});Object.defineProperty(this,u,{writable:true,value:{}})}show(e){if(!r.AutoLauncher.isEnabled()){r.AutoLauncher.enable()}return new Promise((s=>{i.BannerDispatcher.critical.toQueue((async t=>{var o;if(!((o=e.target)!=null&&o.offsetWidth)){t();return}await this.showGuide(e);t();s()}))}))}showGuide(e){var t,o,r;if(e.ahaMoment&&babelHelpers.classPrivateFieldLooseBase(this,M)[M](e.ahaMoment)){return}const i=new a.Guide({id:e.id,overlay:false,simpleMode:true,onEvents:true,steps:[{target:e.target,title:e.title,text:e.text,position:e.top?"top":"bottom",condition:{top:!e.top,bottom:Boolean(e.top),color:"primary"},article:(t=e.article)==null?void 0:t.code,articleAnchor:(o=e.article)==null?void 0:o.anchorCode,linkTitle:(r=e.article)==null?void 0:r.title}],targetContainer:e.targetContainer});if(babelHelpers.classPrivateFieldLooseBase(this,d)[d]){i.getPopup().setWidth(babelHelpers.classPrivateFieldLooseBase(this,d)[d])}const l=new BX.SpotLight({targetElement:e.target,targetVertex:"middle-center",color:"var(--ui-color-primary)"});return new Promise((t=>{const o=i.getPopup();o.setAutoHide(true);o.setAngle({offset:e.target.offsetWidth/2});const a=()=>{o.adjustPosition()};const r=()=>{l.close();s.Event.unbind(document,"scroll",a,true);t()};o.subscribe("onClose",r);o.subscribe("onDestroy",r);l.show();i.start();o.adjustPosition({forceTop:!e.top,forceBindPosition:true});if(e.isPulsarTransparent){s.Dom.style(l.container,"pointer-events","none")}s.Event.bind(document,"scroll",a,true)}))}shouldShow(e,s={}){return{[n.AhaMoment.Banner]:babelHelpers.classPrivateFieldLooseBase(this,p)[p](e),[n.AhaMoment.TrialBanner]:babelHelpers.classPrivateFieldLooseBase(this,L)[L](e),[n.AhaMoment.AddResource]:babelHelpers.classPrivateFieldLooseBase(this,b)[b](),[n.AhaMoment.MessageTemplate]:babelHelpers.classPrivateFieldLooseBase(this,L)[L](e),[n.AhaMoment.AddClient]:babelHelpers.classPrivateFieldLooseBase(this,v)[v](s),[n.AhaMoment.ResourceWorkload]:babelHelpers.classPrivateFieldLooseBase(this,L)[L](e),[n.AhaMoment.ResourceIntersection]:babelHelpers.classPrivateFieldLooseBase(this,P)[P](),[n.AhaMoment.ExpandGrid]:babelHelpers.classPrivateFieldLooseBase(this,B)[B](),[n.AhaMoment.SelectResources]:babelHelpers.classPrivateFieldLooseBase(this,A)[A](),[n.AhaMoment.CyclePopup]:babelHelpers.classPrivateFieldLooseBase(this,m)[m]()}[e]}setShown(e){const s=babelHelpers.classPrivateFieldLooseBase(this,F)[F](e);this.setPopupShown(e);void c.optionService.setBool(s,true)}setPopupShown(e){babelHelpers.classPrivateFieldLooseBase(this,u)[u][e]=true}setBookingForAhaMoment(e){var s,t;(t=(s=babelHelpers.classPrivateFieldLooseBase(this,h))[h])!=null?t:s[h]=e}}function g(e){const s=l.Core.getStore().getters[`${n.Model.Interface}/canTurnOnDemo`];return s||babelHelpers.classPrivateFieldLooseBase(this,L)[L](e)}function H(){const e=babelHelpers.classPrivateFieldLooseBase(this,L)[L](n.AhaMoment.AddResource);const s=l.Core.getStore().getters[`${n.Model.Interface}/isLoaded`];const t=l.Core.getStore().getters[`${n.Model.Interface}/resourcesIds`];return e&&s&&t.length===0}function y(e){const s=babelHelpers.classPrivateFieldLooseBase(this,L)[L](n.AhaMoment.AddClient);const t=babelHelpers.classPrivateFieldLooseBase(this,h)[h]===e.bookingId;return s&&t}function w(){const e=babelHelpers.classPrivateFieldLooseBase(this,L)[L](n.AhaMoment.ResourceIntersection);const s=l.Core.getStore().getters[`${n.Model.Interface}/isLoaded`];const o=l.Core.getStore().getters[`${n.Model.Interface}/resourcesIds`];return e&&s&&o.length>=2&&!t.PopupManager.isAnyPopupShown()}function S(){const e=babelHelpers.classPrivateFieldLooseBase(this,L)[L](n.AhaMoment.ExpandGrid);const s=[n.AhaMoment.ResourceWorkload,n.AhaMoment.ResourceWorkload].every((e=>babelHelpers.classPrivateFieldLooseBase(this,M)[M](e)));return e&&s&&!t.PopupManager.isAnyPopupShown()}function O(){const e=babelHelpers.classPrivateFieldLooseBase(this,L)[L](n.AhaMoment.SelectResources);const s=babelHelpers.classPrivateFieldLooseBase(this,M)[M](n.AhaMoment.ExpandGrid);return e&&s&&!t.PopupManager.isAnyPopupShown()}function C(){const e=babelHelpers.classPrivateFieldLooseBase(this,L)[L](n.AhaMoment.CyclePopup);const s=babelHelpers.classPrivateFieldLooseBase(this,M)[M](n.AhaMoment.SelectResources);return e&&s}function R(e){return!babelHelpers.classPrivateFieldLooseBase(this,M)[M](e)}function k(e){const{ahaMoments:s}=l.Core.getParams();return!s[e]||babelHelpers.classPrivateFieldLooseBase(this,u)[u][e]}function I(e){return{[n.AhaMoment.Banner]:n.Option.AhaBanner,[n.AhaMoment.TrialBanner]:n.Option.AhaTrialBanner,[n.AhaMoment.AddResource]:n.Option.AhaAddResource,[n.AhaMoment.MessageTemplate]:n.Option.AhaMessageTemplate,[n.AhaMoment.AddClient]:n.Option.AhaAddClient,[n.AhaMoment.ResourceWorkload]:n.Option.AhaResourceWorkload,[n.AhaMoment.ResourceIntersection]:n.Option.AhaResourceIntersection,[n.AhaMoment.ExpandGrid]:n.Option.AhaExpandGrid,[n.AhaMoment.SelectResources]:n.Option.AhaSelectResources,[n.AhaMoment.CyclePopup]:n.Option.AhaCyclePopup}[e]}const X=new f;e.ahaMoments=X})(this.BX.Booking.Lib=this.BX.Booking.Lib||{},BX,BX.Main,BX,BX.UI.Tour,BX.UI.AutoLaunch,BX.UI,BX.Booking,BX.Booking.Const,BX.Booking.Provider.Service);
//# sourceMappingURL=aha-moments.bundle.map.js