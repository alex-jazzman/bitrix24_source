(function(){"use strict";BX.namespace("BX.CrmStart.Onec");BX.CrmStart.Onec={initTile:function(e){this.tileManagerId=e.tileManagerId;this.tileManager=BX.UI.TileList.Manager.getById(this.tileManagerId);BX.addCustomEvent(this.tileManager,this.tileManager.events.tileClick,(function(e){BX.SidePanel.Instance.open(e.data.url,e.data.sliderOptions??undefined)}));this.synchroTileManagerId=e.synchroTileManagerId;this.synchrotileManager=BX.UI.TileList.Manager.getById(this.synchroTileManagerId);BX.addCustomEvent(this.synchrotileManager,this.synchrotileManager.events.tileClick,(function(e){BX.SidePanel.Instance.open(e.data.url)}));this.integrationTileManagerId=e.integrationTileManagerId;this.integrationtileManager=BX.UI.TileList.Manager.getById(this.integrationTileManagerId);if(this.integrationtileManager){BX.addCustomEvent(this.integrationtileManager,this.integrationtileManager.events.tileClick,(function(e){BX.SidePanel.Instance.open(e.data.url,e.data.sliderOptions??undefined)}))}this.helperTileManagerId=e.helperTileManagerId;this.helperTileManager=BX.UI.TileList.Manager.getById(this.helperTileManagerId);BX.addCustomEvent(this.helperTileManager,this.helperTileManager.events.tileClick,(function(t){BX.UI.Feedback.PartnerForm.show({id:"crm-onec-helper",source:e.formPortalSource})}))}}})();function BXOneCStart(e){if(e==="doc"){var t=BX.CrmStart.OnecAppPaths.doc||""}else if(e==="backoffice"){var t=BX.CrmStart.OnecAppPaths.backoffice||""}else{var t=BX.CrmStart.OnecAppPaths.default||""}BX.ready((function(){if(BX.type.isDomNode(BX("b24-integration-active-button"))){BX.bind(BX("b24-integration-active-button"),"click",(function(){n()}))}}));function n(){if(window.ONEC_APP_INACTIVE){BX.SidePanel.Instance.open(t)}else if(typeof window.LICENCE_RESTRICTED!=="undefined"&&window.LICENCE_RESTRICTED){B24.licenseInfoPopup.show("onec-face-card-block",BX.message("CRM_1C_START_FACE_CARD_B24_BLOCK_TITLE2"),BX.message("CRM_1C_START_FACE_CARD_B24_BLOCK_TEXT2"))}else if(typeof window.LICENCE_ACCEPTED!=="undefined"&&window.LICENCE_ACCEPTED===false){var e=new BX.PopupWindow("1c_license_popup"+(new Date).getTime(),null,{autoHide:false,closeIcon:true,closeByEsc:true,titleBar:BX.message("CRM_1C_START_FACE_CARD_CONSENT_TITLE"),content:BX.create("div",{style:{"max-width":"595px"},html:BX.message("CRM_1C_START_FACE_CARD_CONSENT_AGREEMENT")}),overlay:{opacity:50},buttons:[new BX.PopupWindowButton({text:BX.message("CRM_1C_START_FACE_CARD_CONSENT_AGREED"),className:"popup-window-button-accept",events:{click:function(){this.popupWindow.close();BX.ajax({url:window.ONEC_AJAX_URL,method:"POST",dataType:"json",data:{action:"acceptAgreement",sessid:BX.bitrix_sessid()},onsuccess:function(){i()}})}}})]});e.show()}else{i()}}function i(){BX.toggleClass(BX("b24-integration-active"),"b24-integration-wrap-animate");BX.rest.AppLayout.initialize("DEFAULT",window.ONEC_APP_SID)}}
//# sourceMappingURL=script.map.js