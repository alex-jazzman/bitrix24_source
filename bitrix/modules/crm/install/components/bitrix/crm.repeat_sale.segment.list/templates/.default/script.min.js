(function(e,t,a,i,l){"use strict";var s,n;function r(e,t){c(e,t);t.add(e)}function o(e,t,a){c(e,t);t.set(e,a)}function c(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function d(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var v=i.Reflection.namespace("BX.Crm.RepeatSale.SegmentList");var u=new WeakMap;var p=new WeakMap;var b=new WeakMap;var h=new WeakMap;var f=new WeakMap;var m=new WeakSet;var g=new WeakSet;var w=new WeakSet;var _=function(){function e(t){var a=t.id,i=t.targetNodeId,l=t.checked,s=t.readOnly,n=t.isFlowDisabled;babelHelpers.classCallCheck(this,e);r(this,w);r(this,g);r(this,m);o(this,u,{writable:true,value:void 0});o(this,p,{writable:true,value:void 0});o(this,b,{writable:true,value:void 0});o(this,h,{writable:true,value:void 0});o(this,f,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,u,a);babelHelpers.classPrivateFieldSet(this,p,document.getElementById(i));babelHelpers.classPrivateFieldSet(this,b,l);babelHelpers.classPrivateFieldSet(this,h,s);babelHelpers.classPrivateFieldSet(this,f,n)}babelHelpers.createClass(e,[{key:"init",value:function e(){var t=this;void i.Runtime.loadExtension("ui.switcher").then((function(e){var a=e.Switcher;var l=new a({checked:babelHelpers.classPrivateFieldGet(t,b),disabled:babelHelpers.classPrivateFieldGet(t,h),handlers:{checked:function e(a){a.stopPropagation();d(t,m,S).call(t,(function(){d(t,w,F).call(t,false)}),(function(){l.check(true,false)}))},unchecked:function e(a){a.stopPropagation();if(babelHelpers.classPrivateFieldGet(t,f)){d(t,g,E).call(t,(function(){d(t,w,F).call(t,true);babelHelpers.classPrivateFieldSet(t,f,false)}),(function(){l.check(false,false)}))}else{d(t,w,F).call(t,true)}}}});i.Dom.clean(babelHelpers.classPrivateFieldGet(t,p));l.renderTo(babelHelpers.classPrivateFieldGet(t,p))}))}}]);return e}();function S(e,a){var l=i.Tag.render(s||(s=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-repeat-sale-segment-list-confirm-container">\n\t\t\t\t<div class="crm-repeat-sale-segment-list-confirm-message">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),i.Loc.getMessage("CRM_REPEAT_SALE_SEGMENT_LIST_COLUMN_IS_ENABLED_CONFIRM_DIALOG_MESSAGE"));t.MessageBox.show({modal:true,minHeight:100,minWidth:400,popupOptions:{content:l,closeIcon:false},buttons:t.MessageBoxButtons.OK_CANCEL,okCaption:i.Loc.getMessage("CRM_REPEAT_SALE_SEGMENT_LIST_COLUMN_IS_ENABLED_CONFIRM_DIALOG_OK_BTN"),onOk:function t(a){a.close();e()},onCancel:function e(t){a();t.close()}})}function E(e,a){var l=i.Tag.render(n||(n=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-repeat-sale-segment-list-confirm-container">\n\t\t\t\t<div class="crm-repeat-sale-segment-list-confirm-message">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),i.Loc.getMessage("CRM_REPEAT_SALE_SEGMENT_LIST_COLUMN_IS_ENABLED_RS_CONFIRM_DIALOG_MESSAGE"));t.MessageBox.show({modal:true,minHeight:100,minWidth:400,popupOptions:{content:l,closeIcon:false},buttons:t.MessageBoxButtons.OK_CANCEL,okCaption:i.Loc.getMessage("CRM_REPEAT_SALE_SEGMENT_LIST_COLUMN_IS_ENABLED_RS_CONFIRM_DIALOG_OK_BTN"),onOk:function t(a){a.close();e()},onCancel:function e(t){a();t.close()}})}function F(e){var t=this;i.Runtime.throttle((function(){i.ajax.runAction("crm.repeatsale.segment.active",{json:{id:babelHelpers.classPrivateFieldGet(t,u),isEnabled:e?"Y":"N"},analyticsLabel:{tool:"crm",category:"editor",event:"scenario_enable",c_element:"".concat(e?"on":"off")}})["catch"]((function(e){a.UI.Notification.Center.notify({content:i.Text.encode(e.errors[0].message),autoHideDelay:6e3});throw e}))}),100)()}v.ActiveField=_;var H,C;function M(e,t){L(e,t);t.add(e)}function P(e,t,a){L(e,t);t.set(e,a)}function L(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function k(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var T=i.Reflection.namespace("BX.Crm.RepeatSale.SegmentList");var G="default";var I="lowBorder";var R="highBorder";var B=new WeakMap;var N=new WeakMap;var A=new WeakMap;var O=new WeakMap;var W=new WeakMap;var y=new WeakSet;var D=new WeakSet;var U=function(){function e(t){var a=t.id,i=t.targetNodeId,l=t.borders,s=t.value;babelHelpers.classCallCheck(this,e);M(this,D);M(this,y);P(this,B,{writable:true,value:void 0});P(this,N,{writable:true,value:void 0});P(this,A,{writable:true,value:void 0});P(this,O,{writable:true,value:void 0});P(this,W,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,B,a);babelHelpers.classPrivateFieldSet(this,N,document.getElementById(i));babelHelpers.classPrivateFieldSet(this,A,l!==null&&l!==void 0?l:null);babelHelpers.classPrivateFieldSet(this,O,s)}babelHelpers.createClass(e,[{key:"init",value:function e(){if(babelHelpers.classPrivateFieldGet(this,O)===null){return}babelHelpers.classPrivateFieldSet(this,W,i.Tag.render(H||(H=babelHelpers.taggedTemplateLiteral(["<div></div>"]))));var t=i.Tag.render(C||(C=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-repeat-sale-segment-list-client-percent">\n\t\t\t\t','\n\t\t\t\t<div class="crm-repeat-sale-segment-list-client-percent-value">\n\t\t\t\t\t','\n\t\t\t\t\t<span class="crm-repeat-sale-segment-list-client-percent-percent">%</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'])),babelHelpers.classPrivateFieldGet(this,W),babelHelpers.classPrivateFieldGet(this,O));i.Dom.append(t,babelHelpers.classPrivateFieldGet(this,N));var a=new l.ProgressRound({width:28,lineSize:8,colorBar:k(this,y,x).call(this),colorTrack:"#EBF1F6",rotation:false,value:babelHelpers.classPrivateFieldGet(this,O),color:l.ProgressRound.Color.SUCCESS});a.renderTo(babelHelpers.classPrivateFieldGet(this,W))}}]);return e}();function x(){var e=k(this,D,X).call(this,R);if(e&&babelHelpers.classPrivateFieldGet(this,O)>=(e===null||e===void 0?void 0:e.value)){return e.color}var t=k(this,D,X).call(this,I);if(t&&babelHelpers.classPrivateFieldGet(this,O)<=(t===null||t===void 0?void 0:t.value)){return t.color}var a=k(this,D,X).call(this,G);if(a){return a.color}throw new RangeError("unknown track color")}function X(e){var t;return(t=babelHelpers.classPrivateFieldGet(this,A).find((function(t){return t.id===e})))!==null&&t!==void 0?t:null}T.RoundChartField=U;e.ActiveField=_;e.RoundChartField=U})(this.window=this.window||{},BX.UI.Dialogs,BX,BX,BX.UI);
//# sourceMappingURL=script.map.js