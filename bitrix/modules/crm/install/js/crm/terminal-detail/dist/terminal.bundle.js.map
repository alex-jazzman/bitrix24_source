{"version":3,"file":"terminal.bundle.js","sources":["../src/feedback/button.js","../src/feedback/slider.js"],"sourcesContent":["BX.namespace(\"BX.Crm\");\n\nimport {Loc, Tag} from 'main.core';\nimport 'ui.feedback.form';\n\nexport default class Button\n{\n\tstatic render(parentNode) {\n\t\tconst buttonTitle = main_core.Loc.getMessage('CRM_FEEDBACK_BUTTON_TITLE');\n\t\tconst button = Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-light-border ui-btn-themes\" title=\"${buttonTitle}\">\n\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t${buttonTitle}\n\t\t\t\t</span>\n\t\t\t</button>\n\t\t`;\n\n\t\tbutton.addEventListener('click', () => {\n\t\t\tBX.Crm.Terminal.Slider.openFeedbackForm();\n\t\t});\n\n\t\tif (!parentNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tparentNode.appendChild(button);\n\t\tparentNode.style.justifyContent = 'space-between';\n\n\t\treturn button;\n\t}\n}\n","BX.namespace(\"BX.Crm\");\n\nimport { Runtime, Type } from 'main.core';\n\nexport default class Slider\n{\n\tstatic openFeedbackForm(): void\n\t{\n\t\tvoid Runtime.loadExtension(['ui.feedback.form'])\n\t\t\t.then(() => {\n\t\t\t\tconst settings = Runtime.getSettings('crm.terminal-detail');\n\t\t\t\tconst hasPayment = settings.get('hasPaymentSystemConfigured');\n\t\t\t\tconst hasCashbox = settings.get('hasCashboxConfigured');\n\n\t\t\t\tconst formIdNumber = Math.round(Math.random() * 1000);\n\t\t\t\tBX.UI.Feedback.Form.open({\n\t\t\t\t\tid: `crm.feedback-${formIdNumber}`,\n\t\t\t\t\tforms: [\n\t\t\t\t\t\t{ zones: ['en'], id: 630, lang: 'en', sec: 'ypq6nz' },\n\t\t\t\t\t\t{ zones: ['com.br'], id: 632, lang: 'com.br', sec: 'ama2ql' },\n\t\t\t\t\t\t{ zones: ['ru', 'by', 'kz'], id: 628, lang: 'ru', sec: 'rgyboj' },\n\t\t\t\t\t],\n\t\t\t\t\tpresets: {\n\t\t\t\t\t\tsender_page: 'terminal',\n\t\t\t\t\t\tis_payment_system: hasPayment ? 'yes' : 'no',\n\t\t\t\t\t\tis_cashbox: hasCashbox ? 'yes' : 'no',\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t})\n\t\t;\n\t}\n\n\tstatic open(url, options)\n\t{\n\t\tif(!Type.isPlainObject(options))\n\t\t{\n\t\t\toptions = {};\n\t\t}\n\t\toptions = {...{cacheable: false, allowChangeHistory: false, events: {}}, ...options};\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif(Type.isString(url) && url.length > 1)\n\t\t\t{\n\t\t\t\toptions.events.onClose = function(event)\n\t\t\t\t{\n\t\t\t\t\tresolve(event.getSlider());\n\t\t\t\t};\n\t\t\t\tBX.SidePanel.Instance.open(url, options);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t}\n}"],"names":["BX","namespace","Button","render","parentNode","buttonTitle","main_core","Loc","getMessage","button","Tag","addEventListener","Crm","Terminal","Slider","openFeedbackForm","appendChild","style","justifyContent","Runtime","loadExtension","then","settings","getSettings","hasPayment","get","hasCashbox","formIdNumber","Math","round","random","UI","Feedback","Form","open","id","forms","zones","lang","sec","presets","sender_page","is_payment_system","is_cashbox","url","options","Type","isPlainObject","cacheable","allowChangeHistory","events","Promise","resolve","isString","length","onClose","event","getSlider","SidePanel","Instance"],"mappings":"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"}