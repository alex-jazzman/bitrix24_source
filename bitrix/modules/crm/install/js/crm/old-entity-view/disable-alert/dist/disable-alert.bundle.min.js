this.BX=this.BX||{};this.BX.Crm=this.BX.Crm||{};(function(t,e,i,a,s,r){"use strict";var l;function n(t,e){c(t,e);e.add(t)}function o(t,e,i){c(t,e);e.set(t,i)}function c(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function u(t,e,i){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return i}var _=new WeakMap;var d=new WeakMap;var L=new WeakMap;var A=new WeakMap;var b=new WeakMap;var E=new WeakMap;var h=new WeakSet;var p=new WeakSet;var T=new WeakSet;var v=new WeakSet;var w=function(){function t(i){babelHelpers.classCallCheck(this,t);n(this,v);n(this,T);n(this,p);n(this,h);o(this,_,{writable:true,value:void 0});o(this,d,{writable:true,value:void 0});o(this,L,{writable:true,value:void 0});o(this,A,{writable:true,value:void 0});o(this,b,{writable:true,value:void 0});o(this,E,{writable:true,value:void 0});if(!e.Type.isElementNode(i.alertContainer)){throw new Error("OldCardLayout.DisableAlert: 'alertContainer' must be a DOM element.")}if(!e.Type.isInteger(i.daysUntilDisable)){throw new TypeError("OldCardLayout.DisableAlert: 'daysUntilDisable' must be integer")}if(!e.Type.isBoolean(i.isAdmin)){throw new TypeError("OldCardLayout.DisableAlert: 'isAdmin' must be boolean")}if(!e.Type.isString(i.lastTimeShownField)){throw new TypeError("OldCardLayout.DisableAlert: 'lastTimeShownField' must be string")}if(!e.Type.isString(i.lastTimeShownOptionName)){throw new TypeError("OldCardLayout.DisableAlert: 'lastTimeShownOptionName' must be string")}if(!e.Type.isString(i.previewHref)){throw new TypeError("OldCardLayout.DisableAlert: 'previewHref' must be string")}babelHelpers.classPrivateFieldSet(this,_,i.alertContainer);babelHelpers.classPrivateFieldSet(this,d,i.daysUntilDisable);babelHelpers.classPrivateFieldSet(this,L,i.isAdmin);babelHelpers.classPrivateFieldSet(this,A,i.lastTimeShownField);babelHelpers.classPrivateFieldSet(this,b,i.lastTimeShownOptionName);babelHelpers.classPrivateFieldSet(this,E,i.previewHref)}babelHelpers.createClass(t,[{key:"render",value:function t(){var i=this;var a=new s.Button({text:e.Loc.getMessage("CRM_OLD_CARD_LAYOUT_DISABLE_ALERT_SHOW_PREVIEW_TEXT"),useAirDesign:true,style:s.Button.AirStyle.OUTLINE,size:s.Button.Size.SMALL,onclick:function t(){r.Router.openSlider(babelHelpers.classPrivateFieldGet(i,E),{allowChangeHistory:false})}});var n=e.Tag.render(l||(l=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-old-layout-disable-alert">\n\t\t\t\t<div class="crm-old-layout-left-part">\n\t\t\t\t\t<span class="crm-old-layout-icon"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="crm-old-layout-right-part">\n\t\t\t\t\t<h4 class="crm-old-layout-title ui-typography-heading-h4">\n\t\t\t\t\t\t','\n\t\t\t\t\t</h4>\n\t\t\t\t\t<p class="crm-old-layout-text ui-typography-text-md">\n\t\t\t\t\t\t','\n\t\t\t\t\t</p>\n\t\t\t\t\t<div class="crm-old-layout-buttons" ref="buttonContainer">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button class="crm-old-layout-close-button" ref="closeButton">\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t'])),u(this,T,y).call(this),u(this,v,C).call(this),a.getContainer()),o=n.root,c=n.buttonContainer,d=n.closeButton;if(babelHelpers.classPrivateFieldGet(this,L)){var h=new s.Button({text:e.Loc.getMessage("CRM_OLD_CARD_LAYOUT_DISABLE_ALERT_ENABLE_NEW_LAYOUT_TEXT"),useAirDesign:true,style:s.Button.AirStyle.OUTLINE,size:s.Button.Size.SMALL,onclick:function t(){u(i,p,S).call(i)}});h.renderTo(c)}e.Event.bind(d,"click",(function(){BX.userOptions.save("crm",babelHelpers.classPrivateFieldGet(i,A),babelHelpers.classPrivateFieldGet(i,b),Date.now());babelHelpers.classPrivateFieldGet(i,_).remove()}));babelHelpers.classPrivateFieldGet(this,_).append(o)}}]);return t}();function D(){BX.ajax.runAction("crm.oldentityview.sunset.enableNewCardLayout").then((function(){window.location.reload()}))["catch"]((function(){a.UI.Notification.Center.notify({content:e.Loc.getMessage("CRM_OLD_CARD_LAYOUT_DISABLE_ALERT_ENABLE_NEW_LAYOUT_ERROR_MESSAGE")})}))}function S(){var t=this;var a=i.MessageBox.create({message:e.Loc.getMessage("CRM_OLD_CARD_LAYOUT_DISABLE_ALERT_ENABLE_NEW_LAYOUT_ASSERT"),useAirDesign:true,buttons:[new s.Button({text:e.Loc.getMessage("CRM_OLD_CARD_LAYOUT_DISABLE_ALERT_ENABLE_NEW_LAYOUT_ASSERT_CONFIRM"),useAirDesign:true,style:s.Button.AirStyle.FILLED,onclick:function e(i){u(t,h,D).call(t,i)}}),new s.Button({text:e.Loc.getMessage("CRM_OLD_CARD_LAYOUT_DISABLE_ALERT_ENABLE_NEW_LAYOUT_ASSERT_CANCEL"),useAirDesign:true,style:s.Button.AirStyle.OUTLINE,onclick:function t(e){e.context.close()}})]});a.show()}function y(){if(babelHelpers.classPrivateFieldGet(this,d)===0){return e.Loc.getMessage("CRM_OLD_CARD_LAYOUT_DISABLE_ALERT_TITLE_LESS_THAN_DAY")}return e.Loc.getMessagePlural("CRM_OLD_CARD_LAYOUT_DISABLE_ALERT_TITLE",babelHelpers.classPrivateFieldGet(this,d),{"#DAYS_UNTIL_DISABLE#":babelHelpers.classPrivateFieldGet(this,d)})}function C(){var t='<a class="crm-old-layout-helpdesk-link" href="javascript:top.BX.Helper.show(\'redirect=detail&code=26179574\');">';var i=babelHelpers.classPrivateFieldGet(this,L)?"CRM_OLD_CARD_LAYOUT_DISABLE_ALERT_TEXT":"CRM_OLD_CARD_LAYOUT_DISABLE_ALERT_ENABLE_NEW_LAYOUT_CONTACT_ADMIN";return e.Loc.getMessage(i,{"[helpdeskLink]":t,"[/helpdeskLink]":"</a>"})}t.DisableAlert=w})(this.BX.Crm.OldEntityView=this.BX.Crm.OldEntityView||{},BX,BX.UI.Dialogs,BX,BX.UI,BX.Crm);
//# sourceMappingURL=disable-alert.bundle.map.js