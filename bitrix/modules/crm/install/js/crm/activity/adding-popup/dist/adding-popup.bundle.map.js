{"version":3,"file":"adding-popup.bundle.map.js","names":["this","BX","Crm","exports","crm_activity_todoEditor","crm_activity_todoEditorV2","main_core","main_core_events","main_popup","ui_buttons","ui_notification","_","t","_t","_t2","_t3","_classPrivateMethodInitSpec","obj","privateSet","_checkPrivateRedeclaration","add","_classPrivateFieldInitSpec","privateMap","value","set","privateCollection","has","TypeError","_classPrivateMethodGet","receiver","fn","_entityId","WeakMap","_entityTypeId","_currentUser","_pingSettings","_calendarSettings","_colorSettings","_useTodoEditorV","_popup","_popupContainer","_popupToDoEditorContainer","_todoEditor","_eventEmitter","_createToDoEditor","WeakSet","_prepareAndShowPopup","_fetchNearActivity","_createPopupIfNotExists","_getPopupTitle","_getPopupParams","_saveAndClose","_actualizePopupLayout","_onChangeEditorDescription","_onEditorSaveHotkeyPressed","_onChangeUploaderContainerSize","_onFocus","AddingPopup","entityTypeId","entityId","currentUser","settings","_params","_params$useTodoEditor","babelHelpers","classCallCheck","writable","classPrivateFieldSet","Text","toInteger","EventEmitter","classPrivateFieldGet","setEventNamespace","Type","isObject","_settings$pingSetting","_settings$calendarSet","_settings$colorSettin","pingSettings","calendarSettings","colorSettings","isPlainObject","events","eventName","isFunction","subscribe","useTodoEditorV2","createClass","key","show","bindElement","mode","TodoEditorMode","ADD","popup","_createPopupIfNotExists2","call","setBindElement","isShown","hasChildNodes","_createToDoEditor2","setButtons","SaveButton","id","color","ButtonColor","PRIMARY","size","ButtonSize","EXTRA_SMALL","round","click","_saveAndClose2","bind","CancelButton","close","subscribeOnce","event","target","getZIndexComponent","setZIndex","_actualizePopupLayout2","getDescription","setFocused","resetToDefaults","then","emit","todoEditorMode","activity","params","UPDATE","setMode","setActivityId","setDescription","description","setDeadline","deadline","isArrayFilled","storageElementIds","setStorageElementIds","_prepareAndShowPopup2","bindPopup","container","ownerTypeId","ownerId","onSaveHotkeyPressed","_onEditorSaveHotkeyPressed2","onChangeUploaderContainerSize","_onChangeUploaderContainerSize2","onFocus","_onFocus2","popupMode","defaultDescription","TodoEditorV2","onChangeDescription","_onChangeEditorDescription2","TodoEditor","_fetchNearActivity2","data","console","error","Promise","resolve","reject","ajax","runAction","responseData","catch","response","UI","Notification","Center","notify","content","errors","message","autoHideDelay","isDestroyed","Tag","render","_getPopupTitle2","Popup","_getPopupParams2","Loc","getMessage","innerWidth","window","cacheable","isScrollBlock","className","closeByEsc","closeIcon","padding","minWidth","width","Math","maxWidth","minHeight","maxHeight","overlay","opacity","angle","offset","saveButton","getButton","getState","setWaiting","save","finally","adjustPosition","forceBindPosition","length","setState","ButtonState","DISABLED","getData","setTimeout","Activity","Event","Main"],"sources":["adding-popup.bundle.js"],"mappings":"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"}