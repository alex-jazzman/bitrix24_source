this.BX=this.BX||{};this.BX.Crm=this.BX.Crm||{};(function(e,s,a,l,t,r){"use strict";let i=e=>e,o,n,b;const c=3;var p=babelHelpers.classPrivateFieldLooseKey("bannerDispatcher");var d=babelHelpers.classPrivateFieldLooseKey("popup");var v=babelHelpers.classPrivateFieldLooseKey("originalOverflowValue");var u=babelHelpers.classPrivateFieldLooseKey("targetContainer");var P=babelHelpers.classPrivateFieldLooseKey("step");var h=babelHelpers.classPrivateFieldLooseKey("closeOptionName");var L=babelHelpers.classPrivateFieldLooseKey("closeOptionCategory");var B=babelHelpers.classPrivateFieldLooseKey("getPopup");var F=babelHelpers.classPrivateFieldLooseKey("createPopup");var H=babelHelpers.classPrivateFieldLooseKey("getPopupParams");var y=babelHelpers.classPrivateFieldLooseKey("getPopupContent");var f=babelHelpers.classPrivateFieldLooseKey("renderVideo");var g=babelHelpers.classPrivateFieldLooseKey("getVideoPath");var O=babelHelpers.classPrivateFieldLooseKey("getStepContent");var _=babelHelpers.classPrivateFieldLooseKey("getButton");var m=babelHelpers.classPrivateFieldLooseKey("getButtonText");var T=babelHelpers.classPrivateFieldLooseKey("isLastStep");var w=babelHelpers.classPrivateFieldLooseKey("goToNextStep");var E=babelHelpers.classPrivateFieldLooseKey("setTargetOverflow");var C=babelHelpers.classPrivateFieldLooseKey("resetTargetOverflow");var j=babelHelpers.classPrivateFieldLooseKey("getTarget");class K{constructor(e){var s,a;Object.defineProperty(this,j,{value:z});Object.defineProperty(this,C,{value:G});Object.defineProperty(this,E,{value:U});Object.defineProperty(this,w,{value:x});Object.defineProperty(this,T,{value:k});Object.defineProperty(this,m,{value:$});Object.defineProperty(this,_,{value:M});Object.defineProperty(this,O,{value:D});Object.defineProperty(this,g,{value:X});Object.defineProperty(this,f,{value:R});Object.defineProperty(this,y,{value:N});Object.defineProperty(this,H,{value:S});Object.defineProperty(this,F,{value:I});Object.defineProperty(this,B,{value:A});Object.defineProperty(this,p,{writable:true,value:null});Object.defineProperty(this,d,{writable:true,value:null});Object.defineProperty(this,v,{writable:true,value:null});Object.defineProperty(this,u,{writable:true,value:null});Object.defineProperty(this,P,{writable:true,value:0});Object.defineProperty(this,h,{writable:true,value:null});Object.defineProperty(this,L,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,h)[h]=(s=e==null?void 0:e.closeOptionName)!=null?s:null;babelHelpers.classPrivateFieldLooseBase(this,L)[L]=(a=e==null?void 0:e.closeOptionCategory)!=null?a:null}show(){if(babelHelpers.classPrivateFieldLooseBase(this,B)[B]().isShown()){return}babelHelpers.classPrivateFieldLooseBase(this,p)[p]=new s.BannerDispatcher;babelHelpers.classPrivateFieldLooseBase(this,p)[p].toQueue((e=>{babelHelpers.classPrivateFieldLooseBase(this,E)[E]("hidden");babelHelpers.classPrivateFieldLooseBase(this,B)[B]().subscribe("onAfterClose",e);babelHelpers.classPrivateFieldLooseBase(this,B)[B]().show()}),s.Priority.CRITICAL)}}function A(){if(babelHelpers.classPrivateFieldLooseBase(this,d)[d]===null){babelHelpers.classPrivateFieldLooseBase(this,d)[d]=babelHelpers.classPrivateFieldLooseBase(this,F)[F]()}return babelHelpers.classPrivateFieldLooseBase(this,d)[d]}function I(){return new l.Popup(babelHelpers.classPrivateFieldLooseBase(this,H)[H]())}function S(){return{id:"crm_repeat_sale_onboarding_popup",targetContainer:babelHelpers.classPrivateFieldLooseBase(this,j)[j](),content:babelHelpers.classPrivateFieldLooseBase(this,y)[y](),cacheable:true,isScrollBlock:false,className:"crm-repeat-sale-onboarding-popup",closeByEsc:true,closeIcon:true,padding:16,width:733,overlay:{opacity:40,backgroundColor:"#000000"},animation:"fading-slide",autoHide:false,events:{onclose:()=>{babelHelpers.classPrivateFieldLooseBase(this,C)[C]();BX.userOptions.save(babelHelpers.classPrivateFieldLooseBase(this,L)[L],babelHelpers.classPrivateFieldLooseBase(this,h)[h],"closed","Y")}}}}function N(){const e=new r.Icon({size:29,color:"#853AF5",icon:r.Outline.COPILOT});return a.Tag.render(o||(o=i`
			<div class="crm-repeat-sale__onboarding-popup-container">
				<div class="crm-repeat-sale__onboarding-popup-title">
					${0}
					${0}
				</div>
				<div class="crm-repeat-sale__onboarding-popup-video">
					<div>
						${0}
					</div>
				</div>
				<div class="crm-repeat-sale__onboarding-popup-content">
					${0}
				</div>
			</div>
		`),a.Loc.getMessage("CRM_REPEAT_SALE_ONBOARDING_TITLE"),e.render(),babelHelpers.classPrivateFieldLooseBase(this,f)[f](),babelHelpers.classPrivateFieldLooseBase(this,O)[O]())}function R(){const e=a.Tag.render(n||(n=i`
			<video
				src="${0}"
				autoplay
				preload
				loop
			></video>
		`),babelHelpers.classPrivateFieldLooseBase(this,g)[g]());e.addEventListener("canplay",(()=>{e.muted=true;e.play()}));return e}function X(){const e=a.Extension.getSettings("crm.repeat-sale.onboarding-popup").get("region");let s="how-it-work-en";if(["kz","ru","by"].includes(e)){s="how-it-work-ru"}return`/bitrix/js/crm/repeat-sale/onboarding-popup/video/${s}.webm`}function D(){return a.Tag.render(b||(b=i`
			<div class="crm-repeat-sale__onboarding-popup-step-container">
				<div class="crm-repeat-sale__onboarding-popup-step-text">
					${0}
				</div>
				<div class="crm-repeat-sale__onboarding-popup-button">
					${0}
				</div>
			</div>
		`),a.Loc.getMessage(`CRM_REPEAT_SALE_ONBOARDING_TEXT_STEP_${babelHelpers.classPrivateFieldLooseBase(this,P)[P]}`),babelHelpers.classPrivateFieldLooseBase(this,_)[_]().render())}function M(){const e=babelHelpers.classPrivateFieldLooseBase(this,T)[T]()?t.AirButtonStyle.TINTED:t.AirButtonStyle.FILLED_COPILOT;const s=babelHelpers.classPrivateFieldLooseBase(this,T)[T]()?r.Outline.CHECK_M:r.Outline.NEXT;return new t.Button({useAirDesign:true,text:babelHelpers.classPrivateFieldLooseBase(this,m)[m](),round:true,size:BX.UI.Button.Size.LARGE,icon:s,style:e,onclick:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,T)[T]()){babelHelpers.classPrivateFieldLooseBase(this,B)[B]().close();babelHelpers.classPrivateFieldLooseBase(this,B)[B]().destroy()}else{babelHelpers.classPrivateFieldLooseBase(this,w)[w]()}}})}function $(){const e=babelHelpers.classPrivateFieldLooseBase(this,T)[T]()?"CRM_REPEAT_SALE_ONBOARDING_BUTTON_CLOSE":"CRM_REPEAT_SALE_ONBOARDING_BUTTON_NEXT";return a.Loc.getMessage(e)}function k(){return babelHelpers.classPrivateFieldLooseBase(this,P)[P]===c}function x(){babelHelpers.classPrivateFieldLooseBase(this,P)[P]++;a.Dom.replace(document.querySelector(".crm-repeat-sale__onboarding-popup-step-container"),babelHelpers.classPrivateFieldLooseBase(this,O)[O]())}function U(e){babelHelpers.classPrivateFieldLooseBase(this,v)[v]=a.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,j)[j](),"overflow");a.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,j)[j](),"overflow",e)}function G(){if(babelHelpers.classPrivateFieldLooseBase(this,v)[v]===null){return}a.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,j)[j](),"overflow",babelHelpers.classPrivateFieldLooseBase(this,v)[v]);babelHelpers.classPrivateFieldLooseBase(this,v)[v]=null}function z(){if(babelHelpers.classPrivateFieldLooseBase(this,u)[u]===null){babelHelpers.classPrivateFieldLooseBase(this,u)[u]=document.body}return babelHelpers.classPrivateFieldLooseBase(this,u)[u]}e.OnboardingPopup=K})(this.BX.Crm.RepeatSale=this.BX.Crm.RepeatSale||{},BX.Crm.Integration.UI,BX,BX.Main,BX.UI,BX.UI.IconSet);
//# sourceMappingURL=onboarding-popup.bundle.map.js