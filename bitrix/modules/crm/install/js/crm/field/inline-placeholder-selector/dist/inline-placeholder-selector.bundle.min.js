this.BX=this.BX||{};this.BX.Crm=this.BX.Crm||{};(function(e,t,a){"use strict";var l,i,s,r,n,c;function d(e,t){v(e,t);t.add(e)}function b(e,t,a){v(e,t);t.set(e,a)}function v(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function h(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var o={INPUT:"input",TEXTAREA:"textarea"};var p=new WeakMap;var u=new WeakMap;var H=new WeakMap;var w=new WeakMap;var P=new WeakMap;var g=new WeakMap;var F=new WeakMap;var m=new WeakSet;var f=new WeakSet;var T=new WeakSet;var S=new WeakSet;var G=new WeakSet;var k=function(){function e(a){var l,i;babelHelpers.classCallCheck(this,e);d(this,G);d(this,S);d(this,T);d(this,f);d(this,m);b(this,p,{writable:true,value:void 0});b(this,u,{writable:true,value:void 0});b(this,H,{writable:true,value:void 0});b(this,w,{writable:true,value:void 0});b(this,P,{writable:true,value:void 0});b(this,g,{writable:true,value:void 0});b(this,F,{writable:true,value:void 0});if(!t.Type.isDomNode(a.target)){throw new Error("Target DOM node not found")}babelHelpers.classPrivateFieldSet(this,H,a.target);babelHelpers.classPrivateFieldSet(this,F,t.Type.isInteger(a.entityTypeId)?a.entityTypeId:0);babelHelpers.classPrivateFieldSet(this,p,(l=a.mode)!==null&&l!==void 0?l:o.INPUT);babelHelpers.classPrivateFieldSet(this,u,(i=a.value)!==null&&i!==void 0?i:"")}babelHelpers.createClass(e,[{key:"show",value:function e(){t.Dom.append(h(this,f,W).call(this),babelHelpers.classPrivateFieldGet(this,H))}},{key:"getValue",value:function e(){var t;return(t=babelHelpers.classPrivateFieldGet(this,g).value)!==null&&t!==void 0?t:""}}]);return e}();function y(){var e=this;if(babelHelpers.classPrivateFieldGet(this,P)){return babelHelpers.classPrivateFieldGet(this,P)}babelHelpers.classPrivateFieldSet(this,P,new a.Dialog({targetNode:babelHelpers.classPrivateFieldGet(this,w),multiple:false,showAvatars:false,dropdownMode:true,compactView:true,enableSearch:true,entities:[{id:"placeholder",dynamicLoad:true,dynamicSearch:false,searchable:true,options:{entityTypeId:babelHelpers.classPrivateFieldGet(this,F)}}],events:{"Item:onSelect":function t(a){var l=a.getData(),i=l.item;h(e,G,X).call(e,i)}}}));return babelHelpers.classPrivateFieldGet(this,P)}function W(){babelHelpers.classPrivateFieldSet(this,w,t.Tag.render(l||(l=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<span \n\t\t\tonclick="','"\n\t\t\tclass="crm-inline-placeholder-selector-dotted"\n\t\t\t></span>\n\t\t'])),h(this,S,M).bind(this)));return t.Tag.render(i||(i=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-inline-placeholder-selector">\n\t\t\t\t',"\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),h(this,T,I).call(this),babelHelpers.classPrivateFieldGet(this,w))}function I(){if(babelHelpers.classPrivateFieldGet(this,p)===o.TEXTAREA){babelHelpers.classPrivateFieldSet(this,g,t.Tag.render(s||(s=babelHelpers.taggedTemplateLiteral(['<textarea class="ui-ctl-element" name="subject"></textarea>']))));babelHelpers.classPrivateFieldGet(this,g).value=babelHelpers.classPrivateFieldGet(this,u);return t.Tag.render(r||(r=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-ctl ui-ctl-textarea ui-ctl-no-resize ui-ctl-w100">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t"])),babelHelpers.classPrivateFieldGet(this,g))}babelHelpers.classPrivateFieldSet(this,g,t.Tag.render(n||(n=babelHelpers.taggedTemplateLiteral(['<input type="text" class="ui-ctl-element" name="subject">']))));babelHelpers.classPrivateFieldGet(this,g).value=babelHelpers.classPrivateFieldGet(this,u);return t.Tag.render(c||(c=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="ui-ctl ui-ctl-textbox ui-ctl-w100">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),babelHelpers.classPrivateFieldGet(this,g))}function M(){h(this,m,y).call(this).show()}function X(e){var t="{".concat(e.customData.get("text"),"}");var a=babelHelpers.classPrivateFieldGet(this,g).selectionStart;var l=babelHelpers.classPrivateFieldGet(this,g).value;babelHelpers.classPrivateFieldGet(this,g).value=l.slice(0,a)+t+l.slice(a);var i=a+t.length;babelHelpers.classPrivateFieldGet(this,g).setSelectionRange(i,i);babelHelpers.classPrivateFieldGet(this,g).focus();h(this,m,y).call(this).deselectAll()}e.InlinePlaceholderSelectorMode=o;e.InlinePlaceholderSelector=k})(this.BX.Crm.Field=this.BX.Crm.Field||{},BX,BX.UI.EntitySelector);
//# sourceMappingURL=inline-placeholder-selector.bundle.map.js