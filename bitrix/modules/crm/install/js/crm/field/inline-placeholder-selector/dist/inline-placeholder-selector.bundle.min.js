this.BX=this.BX||{};this.BX.Crm=this.BX.Crm||{};(function(e,t,r){"use strict";var n,a,i,l,o,s;function c(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */c=function t(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function e(t,r,n){return t[r]=n}}function u(e,t,r,a){var i=t&&t.prototype instanceof p?t:p,l=Object.create(i.prototype),o=new L(a||[]);return n(l,"_invoke",{value:H(e,r,o)}),l}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d={};function p(){}function v(){}function f(){}var b={};s(b,i,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(G([])));g&&g!==t&&r.call(g,i)&&(b=g);var m=f.prototype=p.prototype=Object.create(b);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function a(n,i,l,o){var s=h(e[n],e,i);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==babelHelpers["typeof"](u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){a("next",e,l,o)}),(function(e){a("throw",e,l,o)})):t.resolve(u).then((function(e){c.value=e,l(c)}),(function(e){return a("throw",e,l,o)}))}o(s.arg)}var i;n(this,"_invoke",{value:function e(r,n){function l(){return new t((function(e,t){a(r,n,e,t)}))}return i=i?i.then(l,l):l()}})}function H(e,t,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return E()}for(r.method=a,r.arg=i;;){var l=r.delegate;if(l){var o=F(l,r);if(o){if(o===d)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=h(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function F(e,t){var r=t.method,n=e.iterator[r];if(undefined===n)return t.delegate=null,"throw"===r&&e.iterator["return"]&&(t.method="return",t.arg=undefined,F(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=h(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function G(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=undefined,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:undefined,done:!0}}return v.prototype=f,n(m,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:v,configurable:!0}),v.displayName=s(f,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},w(P.prototype),s(P.prototype,l,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var l=new P(u(t,r,n,a),i);return e.isGeneratorFunction(r)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},w(m),s(m,o,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=G,L.prototype={constructor:L,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var n=this;function a(e,r){return o.type="throw",o.arg=t,n.next=e,r&&(n.method="next",n.arg=undefined),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var l=this.tryEntries[i],o=l.completion;if("root"===l.tryLoc)return a("end");if(l.tryLoc<=this.prev){var s=r.call(l,"catchLoc"),c=r.call(l,"finallyLoc");if(s&&c){if(this.prev<l.catchLoc)return a(l.catchLoc,!0);if(this.prev<l.finallyLoc)return a(l.finallyLoc)}else if(s){if(this.prev<l.catchLoc)return a(l.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return a(l.finallyLoc)}}}},abrupt:function e(t,n){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var l=i;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=n&&n<=l.finallyLoc&&(l=null);var o=l?l.completion:{};return o.type=t,o.arg=n,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(o)},complete:function e(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function e(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),d}},catch:function e(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===t){var a=n.completion;if("throw"===a.type){var i=a.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function e(t,r,n){return this.delegate={iterator:G(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),d}},e}function u(e,t){d(e,t);t.add(e)}function h(e,t,r){d(e,t);t.set(e,r)}function d(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function p(e,t,r){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return r}var v={INPUT:"input",TEXTAREA:"textarea"};var f=new WeakMap;var b=new WeakMap;var y=new WeakMap;var g=new WeakMap;var m=new WeakMap;var w=new WeakMap;var P=new WeakMap;var H=new WeakMap;var F=new WeakMap;var x=new WeakSet;var T=new WeakSet;var L=new WeakSet;var G=new WeakSet;var E=new WeakSet;var S=function(){function e(r){var n,a,i;babelHelpers.classCallCheck(this,e);u(this,E);u(this,G);u(this,L);u(this,T);u(this,x);h(this,f,{writable:true,value:void 0});h(this,b,{writable:true,value:void 0});h(this,y,{writable:true,value:void 0});h(this,g,{writable:true,value:void 0});h(this,m,{writable:true,value:void 0});h(this,w,{writable:true,value:void 0});h(this,P,{writable:true,value:void 0});h(this,H,{writable:true,value:void 0});h(this,F,{writable:true,value:void 0});if(!t.Type.isDomNode(r.target)){throw new Error("Target DOM node not found")}var l=t.Type.isArrayFilled(r.entityTypeIds)?r.entityTypeIds:[];l=l.filter((function(e){return BX.CrmEntityType.isDefined(e)}));babelHelpers.classPrivateFieldSet(this,y,r.target);babelHelpers.classPrivateFieldSet(this,H,l);babelHelpers.classPrivateFieldSet(this,f,(n=r.mode)!==null&&n!==void 0?n:v.INPUT);babelHelpers.classPrivateFieldSet(this,b,(a=r.value)!==null&&a!==void 0?a:"");babelHelpers.classPrivateFieldSet(this,g,(i=r.multiple)!==null&&i!==void 0?i:false);babelHelpers.classPrivateFieldSet(this,F,t.Type.isFunction(r.onBeforeMenuOpen)?r.onBeforeMenuOpen:null)}babelHelpers.createClass(e,[{key:"setEntityTypeIds",value:function e(t){babelHelpers.classPrivateFieldSet(this,H,t)}},{key:"show",value:function e(){t.Dom.append(p(this,T,O).call(this),babelHelpers.classPrivateFieldGet(this,y))}},{key:"getValue",value:function e(){var t;return(t=babelHelpers.classPrivateFieldGet(this,P).value)!==null&&t!==void 0?t:""}}]);return e}();function k(){var e=this;if(t.Type.isNull(babelHelpers.classPrivateFieldGet(this,F))&&babelHelpers.classPrivateFieldGet(this,w)){return babelHelpers.classPrivateFieldGet(this,w)}var n=babelHelpers.classPrivateFieldGet(this,g)?{id:"multiple_placeholder",dynamicLoad:true,dynamicSearch:false,searchable:true,options:{entityTypeIds:babelHelpers.classPrivateFieldGet(this,H)}}:{id:"placeholder",dynamicLoad:true,dynamicSearch:false,searchable:true,options:{entityTypeId:babelHelpers.classPrivateFieldGet(this,H)[0]}};babelHelpers.classPrivateFieldSet(this,w,new r.Dialog({targetNode:babelHelpers.classPrivateFieldGet(this,m),multiple:false,showAvatars:false,dropdownMode:true,compactView:true,enableSearch:true,entities:[n],events:{"Item:onSelect":function t(r){var n=r.getData(),a=n.item;p(e,E,M).call(e,a)}}}));return babelHelpers.classPrivateFieldGet(this,w)}function O(){babelHelpers.classPrivateFieldSet(this,m,t.Tag.render(n||(n=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<span \n\t\t\tonclick="','"\n\t\t\tclass="crm-inline-placeholder-selector-dotted"\n\t\t\t></span>\n\t\t'])),p(this,G,_).bind(this)));return t.Tag.render(a||(a=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-inline-placeholder-selector">\n\t\t\t\t',"\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),p(this,L,j).call(this),babelHelpers.classPrivateFieldGet(this,m))}function j(){if(babelHelpers.classPrivateFieldGet(this,f)===v.TEXTAREA){babelHelpers.classPrivateFieldSet(this,P,t.Tag.render(i||(i=babelHelpers.taggedTemplateLiteral(['<textarea class="ui-ctl-element" name="subject"></textarea>']))));babelHelpers.classPrivateFieldGet(this,P).value=babelHelpers.classPrivateFieldGet(this,b);return t.Tag.render(l||(l=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-ctl ui-ctl-textarea ui-ctl-no-resize ui-ctl-w100">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t"])),babelHelpers.classPrivateFieldGet(this,P))}babelHelpers.classPrivateFieldSet(this,P,t.Tag.render(o||(o=babelHelpers.taggedTemplateLiteral(['<input type="text" class="ui-ctl-element" name="subject">']))));babelHelpers.classPrivateFieldGet(this,P).value=babelHelpers.classPrivateFieldGet(this,b);return t.Tag.render(s||(s=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="ui-ctl ui-ctl-textbox ui-ctl-w100">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),babelHelpers.classPrivateFieldGet(this,P))}function _(){return I.apply(this,arguments)}function I(){I=babelHelpers.asyncToGenerator(c().mark((function e(){return c().wrap((function e(t){while(1)switch(t.prev=t.next){case 0:if(!babelHelpers.classPrivateFieldGet(this,F)){t.next=3;break}t.next=3;return babelHelpers.classPrivateFieldGet(this,F).call(this);case 3:p(this,x,k).call(this).show();case 4:case"end":return t.stop()}}),e,this)})));return I.apply(this,arguments)}function M(e){var t="{".concat(e.customData.get("text"),"}");var r=babelHelpers.classPrivateFieldGet(this,P).selectionStart;var n=babelHelpers.classPrivateFieldGet(this,P).value;babelHelpers.classPrivateFieldGet(this,P).value=n.slice(0,r)+t+n.slice(r);var a=r+t.length;babelHelpers.classPrivateFieldGet(this,P).setSelectionRange(a,a);babelHelpers.classPrivateFieldGet(this,P).focus();p(this,x,k).call(this).deselectAll()}e.InlinePlaceholderSelectorMode=v;e.InlinePlaceholderSelector=S})(this.BX.Crm.Field=this.BX.Crm.Field||{},BX,BX.UI.EntitySelector);
//# sourceMappingURL=inline-placeholder-selector.bundle.map.js