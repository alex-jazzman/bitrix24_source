{"version":3,"file":"file-service.bundle.map.js","names":["this","BX","Tasks","V2","Provider","exports","main_core_events","ui_uploader_core","ui_uploader_vue","disk_uploader_userFieldWidget","tasks_v2_const","tasks_v2_core","tasks_v2_lib_apiClient","tasks_v2_provider_service_taskService","mapDtoToModel","fileDto","serverFileId","id","serverId","type","name","size","width","height","isImage","isVideo","treatImageAsFile","downloadUrl","serverPreviewUrl","serverPreviewWidth","serverPreviewHeight","customData","processCheckListFileIds","fileIds","Array","isArray","reduce","result","item","push","fileId","startsWith","EntityTypes","Object","freeze","Task","CheckListItem","_entityId","babelHelpers","classPrivateFieldLooseKey","_entityType","_menu","_loadedIds","_objectsIds","_promises","_adapter","_browseElement","_addFiles","_addLoadedIds","_addLoadedObjectsIds","_removeLoadedObjectsIds","_getIdsByObjectId","_updateEntity","_entityFileIds","FileService","EventEmitter","constructor","entityId","entityType","super","defineProperty","get","_get_entityFileIds","set","value","_updateEntity2","_getIdsByObjectId2","_removeLoadedObjectsIds2","_addLoadedObjectsIds2","_addLoadedIds2","_addFiles2","writable","Set","setEventNamespace","setEntityId","classPrivateFieldLooseBase","VueUploaderAdapter","getServiceKey","controller","imagePreviewHeight","imagePreviewWidth","imagePreviewQuality","treatOversizeImageAsFile","multiple","maxFileSize","subscribeFromOptions","event","file","getData","emit","objectId","some","has","idsToRemove","filter","getEntityId","getAdapter","getFiles","getReactiveItems","isUploading","getItems","status","FileStatus","UPLOADING","LOADING","includes","browse","params","_babelHelpers$classPr","_babelHelpers$classPr2","UserFieldMenu","dialogId","uploader","getUploader","menuOptions","minWidth","animation","closeByEsc","bindOptions","forceBindPosition","forceTop","position","events","onPopupClose","onHideCallback","compact","show","bindElement","browseFiles","document","createElement","assignBrowse","click","browseMyDrive","openDiskFileDialog","destroy","unsubscribeAll","uploadFromClipboard","clipboardEvent","clipboardData","isFilePasted","preventDefault","files","getFilesFromDataTransfer","sync","ids","every","forEach","uploaderIds","Number","slice","removeFile","list","unloadedIds","length","Promise","all","promise","Resolvable","data","apiClient","post","map","objectsIds","values","newFiles","addFiles","resolve","error","console","$store","Core","getStore","add","objectIdToFind","entries","taskService","update","attachments","dispatch","Model","CheckList","fields","getters","services","fileService","_services$key","key","replace","tempId","oldKey","newKey","_services$key2","Service","Event","UI","Uploader","Disk","Const","Lib"],"sources":["file-service.bundle.js"],"mappings":"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","ignoreList":[]}