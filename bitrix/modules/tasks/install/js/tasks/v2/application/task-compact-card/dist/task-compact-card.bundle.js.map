{"version":3,"file":"task-compact-card.bundle.js","sources":["../src/component/full-card-button/full-card-button.js","../src/component/drop-zone/drop-zone.js","../src/component/app.js","../src/task-compact-card.js"],"sourcesContent":["import { Event } from 'main.core';\nimport { Button as UiButton, AirButtonStyle, ButtonSize } from 'ui.vue3.components.button';\n\nimport { Core } from 'tasks.v2.core';\nimport { EventName, Model } from 'tasks.v2.const';\nimport { Hint } from 'tasks.v2.component.elements.hint';\nimport { checkListMeta } from 'tasks.v2.component.fields.check-list';\nimport { filesMeta } from 'tasks.v2.component.fields.files';\nimport { fieldHighlighter } from 'tasks.v2.lib.field-highlighter';\nimport { analytics } from 'tasks.v2.lib.analytics';\nimport { EntityTypes, fileService } from 'tasks.v2.provider.service.file-service';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\nimport type { CheckListModel } from 'tasks.v2.model.check-list';\n\nimport './full-card-button.css';\n\n// @vue/component\nexport const FullCardButton = {\n\tcomponents: {\n\t\tHint,\n\t\tUiButton,\n\t},\n\tinject: ['analytics'],\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tisOpening: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['update:isOpening'],\n\tsetup(props): Object\n\t{\n\t\treturn {\n\t\t\tAirButtonStyle,\n\t\t\tButtonSize,\n\t\t\tfileService: fileService.get(props.taskId),\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisHintShown: false,\n\t\t\thintBindElement: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\tcheckLists(): CheckListModel[]\n\t\t{\n\t\t\treturn this.task?.checklist\n\t\t\t\t? this.$store.getters[`${Model.CheckList}/getByIds`](this.task.checklist)\n\t\t\t\t: [];\n\t\t},\n\t\tisDisabled(): boolean\n\t\t{\n\t\t\treturn this.isUploading || this.isCheckListUploading;\n\t\t},\n\t\tisUploading(): boolean\n\t\t{\n\t\t\treturn this.fileService.isUploading();\n\t\t},\n\t\tisCheckListUploading(): boolean\n\t\t{\n\t\t\treturn this.task.checklist?.some((itemId) => fileService.get(itemId, EntityTypes.CheckListItem).isUploading());\n\t\t},\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tif (this.isUploading)\n\t\t\t{\n\t\t\t\tthis.highlightFiles();\n\t\t\t}\n\t\t\telse if (this.isCheckListUploading)\n\t\t\t{\n\t\t\t\tthis.highlightChecklist();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.openFullCard();\n\t\t\t}\n\t\t},\n\t\thighlightFiles(): void\n\t\t{\n\t\t\tthis.hintBindElement = fieldHighlighter.setContainer(this.$root.$el).addChipHighlight(filesMeta.id);\n\n\t\t\tthis.showHint();\n\t\t},\n\t\thighlightChecklist(): void\n\t\t{\n\t\t\tthis.hintBindElement = fieldHighlighter.setContainer(this.$root.$el).addChipHighlight(checkListMeta.id);\n\n\t\t\tthis.showHint();\n\t\t},\n\t\tshowHint(): void\n\t\t{\n\t\t\tconst removeHighlight = () => {\n\t\t\t\tthis.isHintShown = false;\n\t\t\t\tEvent.unbind(window, 'keydown', removeHighlight);\n\t\t\t};\n\t\t\tEvent.bind(window, 'keydown', removeHighlight);\n\n\t\t\tthis.isHintShown = true;\n\t\t},\n\t\topenFullCard(): void\n\t\t{\n\t\t\tif (this.isOpening)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('update:isOpening', true);\n\n\t\t\tconst features = Core.getParams().features;\n\t\t\tanalytics.sendOpenFullCard(this.analytics);\n\t\t\tif (features.isMiniformEnabled && !features.isV2Enabled)\n\t\t\t{\n\t\t\t\tEvent.EventEmitter.emit(`${EventName.OpenSliderCard}:${this.taskId}`, {\n\t\t\t\t\ttask: this.task,\n\t\t\t\t\tcheckLists: this.checkLists,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tEvent.EventEmitter.emit(`${EventName.OpenFullCard}:${this.taskId}`, this.taskId);\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"tasks-compact-card-full-button-container\"\n\t\t\t:class=\"{ '--disabled': isDisabled }\"\n\t\t\t@click=\"handleClick\"\n\t\t>\n\t\t\t<UiButton\n\t\t\t\tclass=\"tasks-compact-card-full-button\"\n\t\t\t\t:text=\"loc('TASKS_V2_TCC_FULL_CARD_BTN')\"\n\t\t\t\t:size=\"ButtonSize.SMALL\"\n\t\t\t\t:style=\"AirButtonStyle.PLAIN_NO_ACCENT\"\n\t\t\t\t:loading=\"isOpening\"\n\t\t\t\t:dataset=\"{taskButtonId: 'full'}\"\n\t\t\t\t:disabled=\"isDisabled\"\n\t\t\t/>\n\t\t</div>\n\t\t<Hint\n\t\t\tv-if=\"isHintShown\"\n\t\t\t:bindElement=\"hintBindElement\"\n\t\t\t@close=\"isHintShown = false\"\n\t\t>\n\t\t\t{{ loc('TASKS_V2_TCC_FILE_IS_UPLOADING') }}\n\t\t</Hint>\n\t`,\n};\n","import { BIcon } from 'ui.icon-set.api.vue';\nimport { Main } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.main';\n\nimport './drop-zone.css';\n\n// @vue/component\nexport const DropZone = {\n\tcomponents: {\n\t\tBIcon,\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tMain,\n\t\t};\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-compact-card-drop-zone-container\">\n\t\t\t<div class=\"tasks-compact-card-drop-zone\">\n\t\t\t\t<BIcon :name=\"Main.ATTACH\"/>\n\t\t\t\t<div class=\"tasks-compact-card-drop-zone-text\">{{ loc('TASKS_V2_TCC_DROP_ZONE') }}</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Event, Text, Type } from 'main.core';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\nimport { Popup } from 'main.popup';\n\nimport { mapActions, mapGetters } from 'ui.vue3.vuex';\nimport { Notifier } from 'ui.notification-manager';\nimport { DragOverMixin } from 'ui.uploader.tile-widget';\nimport { Button as UiButton, AirButtonStyle, ButtonSize } from 'ui.vue3.components.button';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { Outline } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.outline';\n\nimport { Core } from 'tasks.v2.core';\nimport { EventName, Model, CardType, GroupType } from 'tasks.v2.const';\nimport { AddTaskButton } from 'tasks.v2.component.add-task-button';\nimport { Title as FieldTitle } from 'tasks.v2.component.fields.title';\nimport { Importance } from 'tasks.v2.component.fields.importance';\nimport { DescriptionInline } from 'tasks.v2.component.fields.description';\nimport { FieldList } from 'tasks.v2.component.elements.field-list';\nimport { Responsible, responsibleMeta } from 'tasks.v2.component.fields.responsible';\nimport { Deadline, deadlineMeta } from 'tasks.v2.component.fields.deadline';\nimport { CheckListChip, CheckList } from 'tasks.v2.component.fields.check-list';\nimport { FilesChip } from 'tasks.v2.component.fields.files';\nimport { GroupChip } from 'tasks.v2.component.fields.group';\nimport { analytics } from 'tasks.v2.lib.analytics';\nimport { fileService } from 'tasks.v2.provider.service.file-service';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport { checkListService } from 'tasks.v2.provider.service.check-list-service';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\nimport type { GroupModel } from 'tasks.v2.model.groups';\nimport type { CheckListModel } from 'tasks.v2.model.check-list';\n\nimport { FullCardButton } from './full-card-button/full-card-button';\nimport { DropZone } from './drop-zone/drop-zone';\nimport './app.css';\n\n// @vue/component\nexport const App = {\n\tname: 'TaskCompactCard',\n\tcomponents: {\n\t\tBIcon,\n\t\tFieldTitle,\n\t\tDescriptionInline,\n\t\tImportance,\n\t\tFieldList,\n\t\tUiButton,\n\t\tAddTaskButton,\n\t\tCheckList,\n\t\tFullCardButton,\n\t\tDropZone,\n\t},\n\tmixins: [DragOverMixin],\n\tprovide(): Object\n\t{\n\t\treturn {\n\t\t\tanalytics: this.analytics,\n\t\t\tcardType: CardType.Compact,\n\t\t};\n\t},\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: () => Text.getRandom(),\n\t\t},\n\t\tgroupId: {\n\t\t\ttype: [Number],\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\tdeadlineTs: {\n\t\t\ttype: [Number, null],\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\tanalytics: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => ({}),\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tButtonSize,\n\t\t\tAirButtonStyle,\n\t\t\tOutline,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\topeningFullCard: false,\n\t\t\tisCheckListPopupShown: false,\n\t\t\tchipsEventHandlers: {\n\t\t\t\tshowCheckList: this.showCheckListPopup,\n\t\t\t},\n\t\t\tcreationError: false,\n\t\t\tpopupCount: 0,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\ttitleFieldOffsetHeight: `${Model.Interface}/titleFieldOffsetHeight`,\n\t\t\tcurrentUserId: `${Model.Interface}/currentUserId`,\n\t\t\tdefaultDeadline: `${Model.Interface}/defaultDeadline`,\n\t\t}),\n\t\thasDefaultDeadline(): boolean\n\t\t{\n\t\t\treturn this.defaultDeadline.defaultDeadlineDate !== '';\n\t\t},\n\t\tdefaultDeadlineTs(): number\n\t\t{\n\t\t\treturn new Date(this.defaultDeadline.defaultDeadlineDate).getTime();\n\t\t},\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\tgroup(): GroupModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Groups}/getById`](this.task.groupId);\n\t\t},\n\t\tcheckLists(): CheckListModel[]\n\t\t{\n\t\t\treturn this.task?.checklist\n\t\t\t\t? this.$store.getters[`${Model.CheckList}/getByIds`](this.task.checklist)\n\t\t\t\t: [];\n\t\t},\n\t\tisEdit(): boolean\n\t\t{\n\t\t\treturn Type.isNumber(this.taskId) && this.taskId > 0;\n\t\t},\n\t\tprimaryFields(): Object[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\ttitle: responsibleMeta.title,\n\t\t\t\t\tcomponent: Responsible,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\ttaskId: this.taskId,\n\t\t\t\t\t\tcontext: this.$options.name,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: deadlineMeta.title,\n\t\t\t\t\tcomponent: Deadline,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\ttaskId: this.taskId,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\tchips(): Object[]\n\t\t{\n\t\t\treturn [\n\t\t\t\tFilesChip,\n\t\t\t\tCheckListChip,\n\t\t\t\t...(Core.getParams().features.isProjectsEnabled ? [GroupChip] : []),\n\t\t\t];\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tif (!this.isEdit)\n\t\t{\n\t\t\tthis.destroy();\n\n\t\t\tconst payload = {\n\t\t\t\tid: this.taskId,\n\t\t\t\tcreatorId: this.currentUserId,\n\t\t\t\tresponsibleId: this.currentUserId,\n\t\t\t\t...(this.groupId ? { groupId: this.groupId } : {}),\n\t\t\t};\n\n\t\t\tif (this.deadlineTs !== null)\n\t\t\t{\n\t\t\t\tpayload.deadlineTs = this.deadlineTs;\n\t\t\t}\n\t\t\telse if (this.hasDefaultDeadline)\n\t\t\t{\n\t\t\t\tpayload.deadlineTs = this.defaultDeadlineTs;\n\t\t\t}\n\n\t\t\tthis.insert(payload);\n\t\t}\n\n\t\tthis.fileService = fileService.get(this.taskId);\n\n\t\tanalytics.sendOpenCard(this.analytics, {\n\t\t\tcollabId: this.group?.type === GroupType.Collab ? this.group.id : null,\n\t\t});\n\t},\n\tmounted(): void\n\t{\n\t\tthis.resizeObserver = new ResizeObserver(async (entries) => {\n\t\t\tconst title = entries.find(({ target }) => target === this.$refs.title);\n\t\t\tif (title)\n\t\t\t{\n\t\t\t\tawait this.updateTitleFieldOffsetHeight(title.contentRect.height);\n\t\t\t}\n\t\t});\n\n\t\tthis.resizeObserver.observe(this.$refs.title);\n\t\tthis.subscribeEvents();\n\n\t\tthis.fileService.getAdapter().getUploader().assignDropzone(this.$el);\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tif (this.resizeObserver)\n\t\t{\n\t\t\tthis.resizeObserver.disconnect();\n\t\t}\n\t\tthis.unsubscribeEvents();\n\t},\n\tunmounted(): void\n\t{\n\t\tif (!this.isEdit && this.openingFullCard === false)\n\t\t{\n\t\t\tthis.destroy();\n\t\t}\n\t},\n\tmethods: {\n\t\t...mapActions(Model.Tasks, [\n\t\t\t'insert',\n\t\t\t'delete',\n\t\t]),\n\t\t...mapActions(Model.Interface, [\n\t\t\t'updateTitleFieldOffsetHeight',\n\t\t]),\n\t\tclose(): void\n\t\t{\n\t\t\tEvent.EventEmitter.emit(`${EventName.CloseCard}:${this.taskId}`);\n\t\t},\n\t\tasync addTask(): void\n\t\t{\n\t\t\tconst [id, error] = await taskService.add(this.task);\n\n\t\t\tif (!id)\n\t\t\t{\n\t\t\t\tthis.creationError = true;\n\n\t\t\t\tNotifier.notify({\n\t\t\t\t\tid: 'task-message-add-error',\n\t\t\t\t\ttext: error.message,\n\t\t\t\t});\n\n\t\t\t\tthis.sendAddTaskAnalytics(false);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.sendAddTaskAnalytics(true);\n\n\t\t\tanalytics.sendDescription(this.analytics, {\n\t\t\t\thasDescription: Type.isStringFilled(this.task?.description),\n\t\t\t\thasScroll: this.$refs?.description?.hasScroll(),\n\t\t\t});\n\n\t\t\tif (this.checkLists.length > 0)\n\t\t\t{\n\t\t\t\tawait checkListService.save(id, this.checkLists);\n\t\t\t}\n\n\t\t\tfileService.replace(this.taskId, id);\n\n\t\t\tconst baseEvent = new BaseEvent({\n\t\t\t\tdata: id,\n\t\t\t\tcompatData: [\n\t\t\t\t\t'ADD',\n\t\t\t\t\t{\n\t\t\t\t\t\ttask: this.task,\n\t\t\t\t\t\toptions: {},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\n\t\t\tEvent.EventEmitter.emit(EventName.NotifyGrid, baseEvent);\n\n\t\t\tconst features = Core.getParams().features;\n\t\t\tif (features.isMiniformEnabled && !features.isV2Enabled)\n\t\t\t{\n\t\t\t\tthis.close();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.close();\n\t\t},\n\t\tsendAddTaskAnalytics(isSuccess: boolean): void\n\t\t{\n\t\t\tconst collabId = this.group?.type === GroupType.Collab ? this.group.id : null;\n\t\t\tif (this.checkLists.length > 0)\n\t\t\t{\n\t\t\t\tconst checkLists = this.checkLists.filter(({ parentId }) => parentId === 0);\n\t\t\t\tconst checkListsItems = this.checkLists.filter(({ parentId }) => parentId !== 0);\n\t\t\t\tanalytics.sendAddTaskWithCheckList(this.analytics, {\n\t\t\t\t\tisSuccess,\n\t\t\t\t\tcollabId,\n\t\t\t\t\tviewersCount: this.task.auditorsIds.length,\n\t\t\t\t\tchecklistCount: checkLists.length,\n\t\t\t\t\tchecklistItemsCount: checkListsItems.length,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tanalytics.sendAddTask(this.analytics, {\n\t\t\t\t\tisSuccess,\n\t\t\t\t\tcollabId,\n\t\t\t\t\tviewersCount: this.task.auditorsIds.length,\n\t\t\t\t\tcoexecutorsCount: this.task.accomplicesIds.length,\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\thandleShowingPopup(event: BaseEvent): void\n\t\t{\n\t\t\tEvent.EventEmitter.emit(`${EventName.ShowOverlay}:${this.taskId}`);\n\t\t\tEvent.EventEmitter.emit(`${EventName.AdjustPosition}:${this.taskId}`);\n\t\t\tthis.externalPopup = event.popupInstance;\n\t\t\tthis.adjustCardPopup(true);\n\t\t\tthis.fileService.getAdapter().getUploader().unassignDropzone(this.$el);\n\t\t},\n\t\thandleHidingPopup(): void\n\t\t{\n\t\t\tEvent.EventEmitter.emit(`${EventName.HideOverlay}:${this.taskId}`);\n\t\t\tEvent.EventEmitter.emit(`${EventName.AdjustPosition}:${this.taskId}`);\n\t\t\tthis.externalPopup = null;\n\t\t\tthis.fileService.getAdapter().getUploader().assignDropzone(this.$el);\n\t\t},\n\t\thandleResizingPopup(): void\n\t\t{\n\t\t\tthis.adjustCardPopup();\n\t\t},\n\t\tadjustCardPopup(animate: boolean = false): void\n\t\t{\n\t\t\tif (!this.externalPopup)\n\t\t\t{\n\t\t\t\tEvent.EventEmitter.emit(`${EventName.AdjustPosition}:${this.taskId}`);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tEvent.EventEmitter.emit(`${EventName.AdjustPosition}:${this.taskId}`, {\n\t\t\t\ttitleFieldHeight: this.titleFieldOffsetHeight,\n\t\t\t\tinnerPopup: this.externalPopup,\n\t\t\t\tanimate,\n\t\t\t});\n\t\t},\n\t\tshowCheckListPopup(): void\n\t\t{\n\t\t\tthis.isCheckListPopupShown = true;\n\t\t},\n\t\tcloseCheckListPopup(): void\n\t\t{\n\t\t\tthis.isCheckListPopupShown = false;\n\t\t},\n\t\tgetEventListeners(chip, handlers): Object\n\t\t{\n\t\t\tconst listeners = {};\n\n\t\t\tif (chip.emits)\n\t\t\t{\n\t\t\t\tObject.keys(handlers).forEach((event: string) => {\n\t\t\t\t\tif (chip.emits.includes(event))\n\t\t\t\t\t{\n\t\t\t\t\t\tlisteners[event] = handlers[event];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn listeners;\n\t\t},\n\t\tsubscribeEvents(): void\n\t\t{\n\t\t\tEventEmitter.subscribe('BX.Main.Popup:onShow', this.handlePopupShow);\n\t\t\tEvent.bind(document, 'keydown', this.handleKeyDown, { capture: true });\n\t\t},\n\t\tunsubscribeEvents(): void\n\t\t{\n\t\t\tEventEmitter.unsubscribe('BX.Main.Popup:onShow', this.handlePopupShow);\n\t\t\tEvent.unbind(document, 'keydown', this.handleKeyDown, { capture: true });\n\t\t},\n\t\thandlePopupShow(event): void\n\t\t{\n\t\t\tconst popup: Popup = event.getCompatData()[0];\n\n\t\t\tconst onClose = (): void => {\n\t\t\t\tpopup.unsubscribe('onClose', onClose);\n\t\t\t\tpopup.unsubscribe('onDestroy', onClose);\n\n\t\t\t\tthis.popupCount--;\n\t\t\t};\n\n\t\t\tpopup.subscribe('onClose', onClose);\n\t\t\tpopup.subscribe('onDestroy', onClose);\n\n\t\t\tthis.popupCount++;\n\t\t},\n\t\thandleKeyDown(event: KeyboardEvent): void\n\t\t{\n\t\t\tif (this.popupCount > 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (event.key === 'Enter' && (event.ctrlKey || event.metaKey))\n\t\t\t{\n\t\t\t\tthis.$refs.addTaskButton.handleClick();\n\t\t\t}\n\t\t\telse if (event.key === 'Escape')\n\t\t\t{\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t},\n\t\tdestroy(): void\n\t\t{\n\t\t\tthis.delete(this.taskId);\n\t\t\tfileService.delete(this.taskId);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div v-drop class=\"tasks-compact-card-container\">\n\t\t\t<div v-if=\"task\" class=\"tasks-compact-card\" :data-task-id=\"taskId\" data-task-compact>\n\t\t\t\t<div class=\"tasks-compact-card-fields\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"tasks-compact-card-fields-title\"\n\t\t\t\t\t\t:class=\"{'--no-gap': task.description.length > 0}\"\n\t\t\t\t\t\tref=\"title\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<FieldTitle :taskId=\"taskId\" :disabled=\"isCheckListPopupShown\"/>\n\t\t\t\t\t\t<Importance :taskId=\"taskId\"/>\n\t\t\t\t\t\t<BIcon\n\t\t\t\t\t\t\tclass=\"tasks-compact-card-fields-close\"\n\t\t\t\t\t\t\t:name=\"Outline.CROSS_L\"\n\t\t\t\t\t\t\tdata-task-button-id=\"close\"\n\t\t\t\t\t\t\t@click=\"close\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<DescriptionInline ref=\"description\" :taskId=\"taskId\"/>\n\t\t\t\t\t<div class=\"tasks-compact-card-fields-list\">\n\t\t\t\t\t\t<FieldList :fields=\"primaryFields\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<CheckList\n\t\t\t\t\t\tv-if=\"isCheckListPopupShown\"\n\t\t\t\t\t\t:taskId=\"taskId\"\n\t\t\t\t\t\t:isAutonomous=\"true\"\n\t\t\t\t\t\t@show=\"handleShowingPopup\"\n\t\t\t\t\t\t@close=\"handleHidingPopup(); closeCheckListPopup();\"\n\t\t\t\t\t\t@resize=\"handleResizingPopup\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-compact-card-footer\">\n\t\t\t\t\t<div class=\"tasks-compact-card-chips\">\n\t\t\t\t\t\t<template v-for=\"(chip, index) of chips\" :key=\"index\">\n\t\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t\t:is=\"chip\"\n\t\t\t\t\t\t\t\tv-bind=\"{ taskId, isAutonomous: true }\"\n\t\t\t\t\t\t\t\tv-on=\"getEventListeners(chip, chipsEventHandlers)\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-compact-card-buttons\">\n\t\t\t\t\t\t<div class=\"tasks-compact-card-main-buttons\">\n\t\t\t\t\t\t\t<AddTaskButton\n\t\t\t\t\t\t\t\tref=\"addTaskButton\"\n\t\t\t\t\t\t\t\t:taskId=\"taskId\"\n\t\t\t\t\t\t\t\t:size=\"ButtonSize.MEDIUM\"\n\t\t\t\t\t\t\t\tv-model:hasError=\"creationError\"\n\t\t\t\t\t\t\t\t@addTask=\"addTask\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<UiButton\n\t\t\t\t\t\t\t\t:text=\"loc('TASKS_V2_TCC_CANCEL_BTN')\"\n\t\t\t\t\t\t\t\t:size=\"ButtonSize.MEDIUM\"\n\t\t\t\t\t\t\t\t:style=\"AirButtonStyle.PLAIN\"\n\t\t\t\t\t\t\t\t:dataset=\"{\n\t\t\t\t\t\t\t\t\ttaskButtonId: 'cancel',\n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t@click=\"close\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<FullCardButton v-model:isOpening=\"openingFullCard\" :taskId=\"taskId\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<DropZone/>\n\t\t</div>\n\t`,\n};\n","import { Dom, Runtime, Tag, Type } from 'main.core';\nimport { EventEmitter, type BaseEvent } from 'main.core.events';\nimport type { Popup } from 'main.popup';\n\nimport { BitrixVue, type VueCreateAppResult } from 'ui.vue3';\nimport { locMixin } from 'ui.vue3.mixins.loc-mixin';\n\nimport { TaskMappers } from 'tasks.v2.provider.service.task-service';\nimport { Core } from 'tasks.v2.core';\nimport { EventName } from 'tasks.v2.const';\nimport type { Params } from 'tasks.v2.application.task-card';\n\nimport { App } from './component/app';\n\nexport class TaskCompactCard\n{\n\t#params: Params;\n\t#popup: Popup;\n\t#application: ?VueCreateAppResult;\n\t#handlers: { [eventName: string]: Function };\n\n\tconstructor(params: Params = {})\n\t{\n\t\tthis.#params = params;\n\n\t\tthis.#params.taskId = Type.isUndefined(this.#params.taskId) ? 0 : this.#params.taskId;\n\t}\n\n\tasync mountCard(popup: Popup): Promise<void>\n\t{\n\t\tthis.#popup = popup;\n\n\t\tawait this.#mountApplication(popup.getContentContainer());\n\n\t\tthis.#adjustPosition();\n\t\tthis.#subscribe();\n\n\t\tconst dragHandle = Tag.render`\n\t\t\t<div class=\"tasks-compact-card-popup-drag-handle\"></div>\n\t\t`;\n\t\tDom.append(dragHandle, popup.getContentContainer());\n\t\tthis.#popup.setDraggable({\n\t\t\telement: dragHandle,\n\t\t\trestrict: true,\n\t\t});\n\t}\n\n\tunmountCard(): void\n\t{\n\t\tthis.#unmountApplication();\n\n\t\tthis.#unsubscribe();\n\t}\n\n\tasync #mountApplication(container: HTMLElement): Promise<void>\n\t{\n\t\tawait Core.init();\n\n\t\tconst application = BitrixVue.createApp(App, this.#params);\n\n\t\tapplication.mixin(locMixin);\n\t\tapplication.use(Core.getStore());\n\t\tapplication.mount(container);\n\n\t\tthis.#application = application;\n\t}\n\n\t#unmountApplication(): void\n\t{\n\t\tthis.#application.unmount();\n\t}\n\n\t#subscribe(): void\n\t{\n\t\tthis.#handlers = {\n\t\t\t[`${EventName.CloseCard}:${this.#params.taskId}`]: this.#closeCard,\n\t\t\t[`${EventName.OpenFullCard}:${this.#params.taskId}`]: this.#openFullCard,\n\t\t\t[`${EventName.OpenSliderCard}:${this.#params.taskId}`]: this.#openSliderCard,\n\t\t\t[`${EventName.ShowOverlay}:${this.#params.taskId}`]: this.#showOverlay,\n\t\t\t[`${EventName.HideOverlay}:${this.#params.taskId}`]: this.#hideOverlay,\n\t\t\t[`${EventName.AdjustPosition}:${this.#params.taskId}`]: this.#handleAdjustPosition,\n\t\t\t'BX.Main.Popup:onShow': this.#handlePopupShow,\n\t\t};\n\n\t\tObject.entries(this.#handlers).forEach(([event, handler]) => EventEmitter.subscribe(event, handler));\n\t}\n\n\t#unsubscribe(): void\n\t{\n\t\tObject.entries(this.#handlers).forEach(([event, handler]) => EventEmitter.unsubscribe(event, handler));\n\t}\n\n\t#openFullCard = async (baseEvent: BaseEvent): Promise<void> => {\n\t\tthis.#closeCard();\n\n\t\tconst { TaskCard } = await Runtime.loadExtension('tasks.v2.application.task-card');\n\n\t\tthis.#params.taskId = baseEvent.getData();\n\n\t\tTaskCard.showFullCard(this.#params);\n\t};\n\n\t#openSliderCard = (baseEvent: BaseEvent): void => {\n\t\tconst task = baseEvent.getData().task;\n\t\tconst checkLists = baseEvent.getData().checkLists;\n\n\t\tconst data = TaskMappers.mapModelToSliderData(task, checkLists);\n\n\t\tconst path = Core.getParams().paths.editPath;\n\t\tBX.SidePanel.Instance.open(path, {\n\t\t\trequestMethod: 'post',\n\t\t\trequestParams: data,\n\t\t\tcacheable: false,\n\t\t});\n\n\t\tthis.#closeCard();\n\t};\n\n\t#closeCard = (): void => {\n\t\tthis.#popup.close();\n\t};\n\n\t#showOverlay = (): void => {\n\t\tDom.addClass(this.#popup.getPopupContainer(), '--overlay');\n\t};\n\n\t#hideOverlay = (): void => {\n\t\tDom.removeClass(this.#popup.getPopupContainer(), '--overlay');\n\t};\n\n\t#handleAdjustPosition = (baseEvent?: BaseEvent): void => {\n\t\tconst { innerPopup, titleFieldHeight, animate } = baseEvent?.getData() ?? {};\n\t\tif (!innerPopup)\n\t\t{\n\t\t\tthis.#popup.setOffset({\n\t\t\t\toffsetTop: 0,\n\t\t\t});\n\t\t\tthis.#adjustPosition();\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst innerPopupContainer = innerPopup.getPopupContainer();\n\t\tconst popupContainer = this.#popup.getPopupContainer();\n\n\t\tconst heightDifference = innerPopupContainer.offsetHeight - popupContainer.offsetHeight;\n\t\tconst popupPaddingTop = 20;\n\t\tconst offset = titleFieldHeight + heightDifference / 2 + popupPaddingTop * 2;\n\n\t\tDom.style(popupContainer, '--overlay-offset-top', `-${offset}px`);\n\t\tif (!animate)\n\t\t{\n\t\t\tthis.#adjustPosition();\n\t\t\tDom.style(popupContainer, 'transition', 'none');\n\t\t\tsetTimeout(() => Dom.style(popupContainer, 'transition', null));\n\t\t}\n\t};\n\n\t#adjustPosition(): void\n\t{\n\t\tthis.#popup.adjustPosition({\n\t\t\tforceBindPosition: true,\n\t\t});\n\t}\n\n\t#handlePopupShow = (event): void => {\n\t\tthis.#handlePopupShow.openedPopupsCount ??= 0;\n\n\t\tconst popup: Popup = event.getCompatData()[0];\n\t\tconst popupContainer = this.#popup.getPopupContainer();\n\n\t\tconst onClose = (): void => {\n\t\t\tpopup.unsubscribe('onClose', onClose);\n\t\t\tpopup.unsubscribe('onDestroy', onClose);\n\n\t\t\tthis.#handlePopupShow.openedPopupsCount--;\n\t\t\tif (this.#handlePopupShow.openedPopupsCount === 0)\n\t\t\t{\n\t\t\t\tDom.removeClass(popupContainer, '--disable-drag');\n\t\t\t}\n\t\t};\n\n\t\tpopup.subscribe('onClose', onClose);\n\t\tpopup.subscribe('onDestroy', onClose);\n\n\t\tthis.#handlePopupShow.openedPopupsCount++;\n\t\tDom.addClass(popupContainer, '--disable-drag');\n\t};\n}\n"],"names":["FullCardButton","components","Hint","UiButton","inject","props","taskId","type","Number","String","required","isOpening","Boolean","emits","setup","AirButtonStyle","ButtonSize","fileService","get","data","isHintShown","hintBindElement","computed","task","$store","getters","Model","Tasks","checkLists","checklist","CheckList","isDisabled","isUploading","isCheckListUploading","some","itemId","EntityTypes","CheckListItem","methods","handleClick","highlightFiles","highlightChecklist","openFullCard","fieldHighlighter","setContainer","$root","$el","addChipHighlight","filesMeta","id","showHint","checkListMeta","removeHighlight","Event","unbind","window","bind","$emit","features","Core","getParams","analytics","sendOpenFullCard","isMiniformEnabled","isV2Enabled","EventEmitter","emit","EventName","OpenSliderCard","OpenFullCard","template","DropZone","BIcon","Main","App","name","FieldTitle","DescriptionInline","Importance","FieldList","AddTaskButton","mixins","DragOverMixin","provide","cardType","CardType","Compact","default","Text","getRandom","groupId","deadlineTs","Object","Outline","openingFullCard","isCheckListPopupShown","chipsEventHandlers","showCheckList","showCheckListPopup","creationError","popupCount","mapGetters","titleFieldOffsetHeight","Interface","currentUserId","defaultDeadline","hasDefaultDeadline","defaultDeadlineDate","defaultDeadlineTs","Date","getTime","group","Groups","isEdit","Type","isNumber","primaryFields","title","responsibleMeta","component","Responsible","context","$options","deadlineMeta","Deadline","chips","FilesChip","CheckListChip","isProjectsEnabled","GroupChip","created","destroy","payload","creatorId","responsibleId","insert","sendOpenCard","collabId","GroupType","Collab","mounted","resizeObserver","ResizeObserver","entries","find","target","$refs","updateTitleFieldOffsetHeight","contentRect","height","observe","subscribeEvents","getAdapter","getUploader","assignDropzone","beforeUnmount","disconnect","unsubscribeEvents","unmounted","mapActions","close","CloseCard","addTask","error","taskService","add","Notifier","notify","text","message","sendAddTaskAnalytics","sendDescription","hasDescription","isStringFilled","description","hasScroll","length","checkListService","save","replace","baseEvent","BaseEvent","compatData","options","NotifyGrid","isSuccess","filter","parentId","checkListsItems","sendAddTaskWithCheckList","viewersCount","auditorsIds","checklistCount","checklistItemsCount","sendAddTask","coexecutorsCount","accomplicesIds","handleShowingPopup","event","ShowOverlay","AdjustPosition","externalPopup","popupInstance","adjustCardPopup","unassignDropzone","handleHidingPopup","HideOverlay","handleResizingPopup","animate","titleFieldHeight","innerPopup","closeCheckListPopup","getEventListeners","chip","handlers","listeners","keys","forEach","includes","subscribe","handlePopupShow","document","handleKeyDown","capture","unsubscribe","popup","getCompatData","onClose","key","ctrlKey","metaKey","addTaskButton","delete","TaskCompactCard","constructor","params","TaskCard","Runtime","loadExtension","getData","showFullCard","TaskMappers","mapModelToSliderData","path","paths","editPath","BX","SidePanel","Instance","open","requestMethod","requestParams","cacheable","Dom","addClass","getPopupContainer","removeClass","setOffset","offsetTop","innerPopupContainer","popupContainer","heightDifference","offsetHeight","popupPaddingTop","offset","style","setTimeout","openedPopupsCount","isUndefined","mountCard","getContentContainer","dragHandle","Tag","render","append","setDraggable","element","restrict","unmountCard","container","init","application","BitrixVue","createApp","mixin","locMixin","use","getStore","mount","unmount","handler","adjustPosition","forceBindPosition"],"mappings":"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"}