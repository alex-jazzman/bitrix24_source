this.BX=this.BX||{};this.BX.Tasks=this.BX.Tasks||{};this.BX.Tasks.V2=this.BX.Tasks.V2||{};(function(t,e,s,i,n,a,l,o,r,d,h,c,u,p,k,m,v,S,I,f,C,g,b,B,F,T,L,w,E,D,A,P,_,y,M,O,V,R,X,U){"use strict";const $={name:"TaskFullCardChat",props:{taskId:{type:[Number,String],required:true}},computed:{task(){return this.$store.getters[`${O.Model.Tasks}/getById`](this.taskId)}},watch:{taskId(){void this.openChat()}},mounted(){void this.openChat()},methods:{async openChat(){var t,e;(t=this.app)==null?void 0:t.bitrixVue.unmount();(e=this.app)!=null?e:this.app=await F.Messenger.initApplication("task");if(this.taskId>0){void this.app.mount({rootContainer:this.$el,chatId:this.task.chatId,taskId:this.taskId,type:L.Core.getParams().chatType})}else{await this.app.mountPlaceholder({rootContainer:this.$el,taskId:this.taskId});B.EventEmitter.emit("tasks:card:onMembersCountChange",{taskId:this.taskId,userCounter:1})}}},template:`\n\t\t<div class="tasks-full-card-chat"></div>\n\t`};const K={components:{UiButton:E.Button,AddTaskButton:w.AddTaskButton},props:{taskId:{type:[Number,String],required:true}},emits:["addTask"],setup(){return{AirButtonStyle:E.AirButtonStyle,ButtonSize:E.ButtonSize}},computed:{isTemplateEnabled(){return L.Core.getParams().features.isTemplateEnabled}},methods:{close(){D.Event.EventEmitter.emit(O.EventName.CloseFullCard)}},template:`\n\t\t<div class="tasks-full-card-footer-create">\n\t\t\t<AddTaskButton :taskId="taskId" @addTask="$emit('addTask')"/>\n\t\t\t<UiButton\n\t\t\t\t:text="loc('TASKS_V2_TASK_FULL_CARD_CANCEL')"\n\t\t\t\t:size="ButtonSize.LARGE"\n\t\t\t\t:style="AirButtonStyle.PLAIN"\n\t\t\t\tdata-task-cancel-button\n\t\t\t\t@click="close"\n\t\t\t/>\n\t\t\t<UiButton\n\t\t\t\tv-if="isTemplateEnabled"\n\t\t\t\tclass="tasks-full-card-footer-template-button"\n\t\t\t\t:text="loc('TASKS_V2_TASK_FULL_CARD_TEMPLATES')"\n\t\t\t\t:size="ButtonSize.SMALL"\n\t\t\t\t:style="AirButtonStyle.PLAIN_NO_ACCENT"\n\t\t\t\t:dropdown="true"\n\t\t\t/>\n\t\t</div>\n\t`};const x={name:"TaskFullCardMore",components:{BIcon:_.BIcon,BMenu:P.BMenu},props:{taskId:{type:[Number,String],required:true}},setup(){return{Outline:y.Outline}},data(){return{isMenuShown:false}},computed:{...A.mapGetters({currentUserId:`${O.Model.Interface}/currentUserId`}),task(){return this.$store.getters[`${O.Model.Tasks}/getById`](this.taskId)},preselected(){return[["user",this.task.responsibleId||this.currentUserId]]},isCreator(){return this.currentUserId===this.task.creatorId},isResponsible(){return this.currentUserId===this.task.responsibleId},menuOptions(){return()=>({id:"tasks-full-card-footer-more-menu",bindElement:this.$refs.button.$el,items:this.menuItems})},menuItems(){const t={[O.TaskStatus.Pending]:{[this.isResponsible]:[this.getCompleteItem(),this.getDefferItem(),this.getDelegateItem()],[this.isCreator]:[this.getDefferItem(),this.getDelegateItem(),this.getDeleteItem()],[this.isResponsible&&this.isCreator]:[this.getCompleteItem(),this.getDefferItem(),this.getDelegateItem(),this.getDeleteItem()]},[O.TaskStatus.InProgress]:{[this.isResponsible]:[this.getPauseItem(),this.getDefferItem(),this.getDelegateItem()],[this.isCreator]:[this.getDefferItem(),this.getDelegateItem(),this.getDeleteItem()],[this.isResponsible&&this.isCreator]:[this.getPauseItem(),this.getDefferItem(),this.getDelegateItem(),this.getDeleteItem()]},[O.TaskStatus.Deferred]:{[this.isResponsible]:[this.getCompleteItem(),this.getDelegateItem()],[this.isCreator]:[this.getCompleteItem(),this.getDelegateItem(),this.getDeleteItem()]},[O.TaskStatus.SupposedlyCompleted]:{[this.isResponsible]:[this.getFixItem(),this.getDelegateItem()],[this.isCreator]:[this.getDisapproveItem(),this.getDelegateItem(),this.getDeleteItem()],[this.isResponsible&&this.isCreator]:[this.getCompleteItem(),this.getDelegateItem(),this.getDeleteItem()]},[O.TaskStatus.Completed]:{[this.isCreator]:[this.getRenewItem(),this.getDeleteItem()]}};return t[this.task.status].true}},methods:{handleClick(){this.isMenuShown=true},getDefferItem(){if(!this.task.rights.defer){return null}return{title:this.loc("TASKS_V2_TASK_FULL_CARD_DEFER"),icon:y.Outline.PAUSE_L,onClick:()=>U.statusService.defer(this.taskId)}},getPauseItem(){if(!this.task.rights.pause){return null}return{title:this.loc("TASKS_V2_TASK_FULL_CARD_PAUSE"),icon:y.Outline.STOP_L,onClick:()=>U.statusService.pause(this.taskId)}},getRenewItem(){if(!this.task.rights.renew){return null}return{title:this.loc("TASKS_V2_TASK_FULL_CARD_RENEW"),icon:y.Outline.UNDO,onClick:()=>U.statusService.renew(this.taskId)}},getFixItem(){if(!this.task.rights.renew){return null}return{title:this.loc("TASKS_V2_TASK_FULL_CARD_FIX"),icon:y.Outline.UNDO,onClick:()=>U.statusService.renew(this.taskId)}},getDisapproveItem(){if(!this.task.rights.disapprove){return null}return{title:this.loc("TASKS_V2_TASK_FULL_CARD_DISAPPROVE"),icon:y.Outline.UNDO,onClick:()=>U.statusService.disapprove(this.taskId)}},getCompleteItem(){if(!this.task.rights.complete){return null}return{title:this.loc("TASKS_V2_TASK_FULL_CARD_COMPLETE"),icon:y.Outline.SENDED,onClick:()=>U.statusService.complete(this.taskId)}},getDelegateItem(){if(!this.task.rights.delegate){return null}return{title:this.loc("TASKS_V2_TASK_FULL_CARD_DELEGATE"),icon:y.Outline.DELEGATE,onClick:()=>{var t;const e=D.Runtime.debounce(this.handleDelegateSelect,10,this);(t=this.dialog)!=null?t:this.dialog=new R.EntitySelectorDialog({...V.responsibleMeta.dialogOptions(this.$options.name),preselectedItems:this.preselected,events:{"Item:onSelect":e,"Item:onDeselect":e}});this.dialog.selectItemsByIds(this.preselected);this.dialog.showTo(this.$refs.button.$el)}}},handleDelegateSelect(){var t,e;const s=(t=(e=this.dialog.getSelectedItems()[0])==null?void 0:e.getId())!=null?t:0;void X.taskService.update(this.taskId,{responsibleId:s})},getDeleteItem(){if(!this.task.rights.remove){return null}return{design:P.MenuItemDesign.Alert,title:this.loc("TASKS_V2_TASK_FULL_CARD_DELETE"),icon:y.Outline.TRASHCAN,onClick:()=>{void X.taskService.delete(this.taskId);D.Event.EventEmitter.emit(O.EventName.CloseFullCard)}}}},template:`\n\t\t<BIcon\n\t\t\tv-if="menuItems"\n\t\t\tclass="tasks-full-card-footer-more"\n\t\t\t:name="Outline.MORE_L"\n\t\t\tdata-task-more-button\n\t\t\tref="button"\n\t\t\t@click="handleClick"\n\t\t/>\n\t\t<BMenu v-if="isMenuShown" :options="menuOptions()" @close="isMenuShown = false"/>\n\t`};const H={components:{UiButton:E.Button,BIcon:_.BIcon,More:x},props:{taskId:{type:[Number,String],required:true}},setup(){return{AirButtonStyle:E.AirButtonStyle,ButtonSize:E.ButtonSize,ButtonIcon:E.ButtonIcon,Outline:y.Outline,TaskStatus:O.TaskStatus}},computed:{...A.mapGetters({currentUserId:`${O.Model.Interface}/currentUserId`}),task(){return this.$store.getters[`${O.Model.Tasks}/getById`](this.taskId)},isCreator(){return this.currentUserId===this.task.creatorId},isResponsible(){return this.currentUserId===this.task.responsibleId},statusButton(){const t={[O.TaskStatus.Pending]:{[this.isCreator]:this.getCompleteButton(),[this.isResponsible]:this.getStartButton()},[O.TaskStatus.InProgress]:{[this.isResponsible]:this.getCompleteButton(),[this.isCreator]:this.getCompleteButton()},[O.TaskStatus.Deferred]:{[this.isResponsible]:this.getRenewButton(),[this.isCreator]:this.getRenewButton()},[O.TaskStatus.SupposedlyCompleted]:{[this.isResponsible]:this.getReviewButton(),[this.isCreator]:this.getApproveButton()},[O.TaskStatus.Completed]:{[this.isResponsible&&!this.isCreator]:this.getRenewButton(E.AirButtonStyle.PLAIN)}};return t[this.task.status].true}},methods:{getStartButton(){if(!this.task.rights.start){return null}return{text:this.loc("TASKS_V2_TASK_FULL_CARD_START"),onClick:()=>U.statusService.start(this.taskId)}},getCompleteButton(){if(!this.task.rights.complete){return null}return{text:this.loc("TASKS_V2_TASK_FULL_CARD_COMPLETE"),onClick:()=>U.statusService.complete(this.taskId)}},getRenewButton(t){if(!this.task.rights.renew){return null}return{text:this.loc("TASKS_V2_TASK_FULL_CARD_RENEW"),style:t,onClick:()=>U.statusService.renew(this.taskId)}},getReviewButton(){return{text:this.loc("TASKS_V2_TASK_FULL_CARD_ON_REVIEW"),disabled:true}},getApproveButton(){if(!this.task.rights.approve){return null}return{text:this.loc("TASKS_V2_TASK_FULL_CARD_APPROVE"),onClick:()=>U.statusService.complete(this.taskId)}}},template:`\n\t\t<div class="tasks-full-card-footer-edit">\n\t\t\t<UiButton\n\t\t\t\tv-if="statusButton"\n\t\t\t\t:text="statusButton.text"\n\t\t\t\t:size="ButtonSize.LARGE"\n\t\t\t\t:style="statusButton.style ?? AirButtonStyle.FILLED"\n\t\t\t\t:disabled="statusButton.disabled ?? false"\n\t\t\t\tdata-task-status-button\n\t\t\t\t@click="statusButton.onClick"\n\t\t\t/>\n\t\t\t<More :taskId="taskId"/>\n\t\t\t<div class="tasks-full-card-footer-actions">\n\t\t\t\t<div class="tasks-full-card-footer-reaction">\n\t\t\t\t\t<BIcon :name="Outline.LIKE"/>\n\t\t\t\t\t<div class="tasks-full-card-footer-reaction-text">\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="tasks-full-card-footer-views">\n\t\t\t\t\t<BIcon :name="Outline.OBSERVER"/>\n\t\t\t\t\t<div class="tasks-full-card-footer-views-text">1</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`};const N={name:"TaskFullCard",components:{FieldTitle:o.Title,Importance:r.Importance,DescriptionField:d.DescriptionField,DescriptionSheet:d.DescriptionSheet,Files:p.Files,FilesSheet:p.FilesSheet,CheckList:k.CheckList,DatePlan:C.DatePlan,DatePlanSheet:C.DatePlanSheet,FieldList:a.FieldList,Chip:n.Chip,Chat:$,FooterCreate:K,FooterEdit:H,DropZone:l.DropZone},provide(){return{analytics:this.analytics,cardType:O.CardType.Full}},props:{id:{type:[Number,String],default:()=>D.Text.getRandom()},analytics:{type:Object,default:()=>({})}},setup(){return{Outline:y.Outline,filesMeta:p.filesMeta,datePlanMeta:C.datePlanMeta,checkListMeta:k.checkListMeta,resizeObserver:null}},data(){return{taskId:this.id,isFilesSheetShown:false,isCheckListSheetShown:false,isDatePlanSheetShown:false,checkListId:0,files:g.fileService.get(this.id).getFiles()}},computed:{...A.mapGetters({currentUserId:`${O.Model.Interface}/currentUserId`}),task(){return this.$store.getters[`${O.Model.Tasks}/getById`](this.taskId)},checkLists(){var t;return(t=this.task)!=null&&t.checklist?this.$store.getters[`${O.Model.CheckList}/getByIds`](this.task.checklist):[]},isEdit(){return D.Type.isNumber(this.taskId)&&this.taskId>0},fields(){const t=[{title:h.creatorMeta.title,component:h.Creator,props:{context:this.$options.name,selectorWithActionMenu:this.isEdit}},{title:V.responsibleMeta.title,component:V.Responsible,props:{context:this.$options.name,selectorWithActionMenu:this.isEdit}},{title:c.deadlineMeta.title,component:c.Deadline},{title:u.statusMeta.title,component:u.Status,withSeparator:true},{chip:p.FilesChip},{chip:{component:k.CheckListChip,events:{showCheckList:this.openCheckList}}},{title:m.groupMeta.getTitle(this.task.groupId),component:m.Group,chip:m.GroupChip,isEnabled:L.Core.getParams().features.isProjectsEnabled},{title:S.accomplicesMeta.title,component:S.Accomplices,chip:S.AccomplicesChip},{title:I.auditorsMeta.title,component:I.Auditors,chip:I.AuditorsChip,withSeparator:this.wasFilled(S.accomplicesMeta.id)},{title:v.flowMeta.title,component:v.Flow,chip:v.FlowChip,withSeparator:true,isEnabled:L.Core.getParams().features.isFlowEnabled},{title:f.tagsMeta.title,component:f.Tags,chip:f.TagsChip},{chip:{component:C.DatePlanChip,events:{open:this.openDatePlan}}}];t.forEach((t=>{var e;(e=t.props)!=null?e:t.props={};t.props.taskId=this.taskId}));return t},primaryFields(){const t=new Set([h.Creator,V.Responsible,c.Deadline,u.Status]);return this.fields.filter((({component:e})=>t.has(e)))},projectFields(){const t=new Set;if(this.wasFilled(m.groupMeta.id)){t.add(m.Group)}if(this.wasFilled(v.flowMeta.id)){t.add(v.Flow)}return this.fields.filter((({component:e})=>t.has(e)))},participantsFields(){const t=new Set;if(this.wasFilled(S.accomplicesMeta.id)){t.add(S.Accomplices)}if(this.wasFilled(I.auditorsMeta.id)){t.add(I.Auditors)}return this.fields.filter((({component:e})=>t.has(e)))},tagsFields(){if(!this.wasFilled(f.tagsMeta.id)){return[]}return this.fields.filter((({component:t})=>t===f.Tags))},chips(){return this.fields.filter((({chip:t,isEnabled:e})=>t&&e!==false)).map((({chip:t})=>t))},isBottomSheetShown(){return this.isFilesSheetShown||this.isCheckListSheetShown||this.isDatePlanSheetShown}},watch:{async task(){if(this.task){await this.$nextTick();this.tryStartObserver()}}},async created(){var t;if(!this.isEdit&&!this.task){void this.$store.dispatch(`${O.Model.Tasks}/insert`,{id:this.taskId,creatorId:this.currentUserId})}await this.$store.dispatch(`${O.Model.Tasks}/clearFieldsFilled`,this.taskId);if(this.isEdit&&!this.task){await X.taskService.getById(this.taskId)}await g.fileService.get(this.taskId).list(this.task.fileIds);d.descriptionTextEditor.get(this.taskId,{content:(t=this.task)==null?void 0:t.description})},mounted(){var t;this.tryStartObserver();(t=this.$refs.skeleton)==null?void 0:t.append(i.FullSkeleton())},beforeUnmount(){var t;(t=this.resizeObserver)==null?void 0:t.disconnect()},unmounted(){if(!this.isEdit){void this.$store.dispatch(`${O.Model.Tasks}/delete`,this.taskId);g.fileService.delete(this.taskId);d.descriptionTextEditor.delete(this.taskId)}},methods:{wasFilled(t){return this.$store.getters[`${O.Model.Tasks}/wasFieldFilled`](this.taskId,t)},tryStartObserver(){if(this.$refs.title&&!this.resizeObserver){this.resizeObserver=this.getObserver();this.resizeObserver.observe(this.$refs.title)}},getObserver(){return new ResizeObserver((t=>{for(const e of t){if(e.target===this.$refs.title){void this.$store.dispatch(`${O.Model.Interface}/updateTitleFieldOffsetHeight`,e.contentRect.height)}}}))},async addTask(){var t,e;await((t=this.$refs)==null?void 0:(e=t.description)==null?void 0:e.save());const s=this.checkLists;const[i]=await X.taskService.add(this.task);this.taskId=i;if(s.length>0){await b.checkListService.save(this.taskId,s)}g.fileService.replace(this.id,this.taskId);d.descriptionTextEditor.replace(this.id,this.taskId)},openEditor(){this.handleShowBottomSheet()},closeEditor(t){t.close();this.handleCloseBottomSheet()},openFiles(){this.isFilesSheetShown=true;this.handleShowBottomSheet()},closeFiles(){this.isFilesSheetShown=false;this.handleCloseBottomSheet()},openCheckList(t){this.checkListId=t;this.isCheckListSheetShown=true;this.handleShowBottomSheet()},closeCheckList(t){this.checkListId=t;this.isCheckListSheetShown=false;this.handleCloseBottomSheet()},openDatePlan(){this.isDatePlanSheetShown=true;this.handleShowBottomSheet()},closeDatePlan(){this.isDatePlanSheetShown=false;this.handleCloseBottomSheet()},handleShowBottomSheet(){D.Dom.addClass(this.$refs.scrollContent,"--disable-scroll")},handleCloseBottomSheet(){D.Dom.removeClass(this.$refs.scrollContent,"--disable-scroll")},close(){D.Event.EventEmitter.emit(O.EventName.CloseFullCard)}},template:`\n\t\t<div class="tasks-full-card" :data-task-id="taskId" data-task-full>\n\t\t\t<template v-if="task">\n\t\t\t\t<div class="tasks-full-card-main" :class="{ '--overlay': isBottomSheetShown }">\n\t\t\t\t\t<div class="tasks-full-card-content" ref="scrollContent">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass="tasks-full-card-title"\n\t\t\t\t\t\t\t:class="{'--no-padding-bottom': task.description.length > 0}"\n\t\t\t\t\t\t\tref="title"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FieldTitle :taskId="taskId"/>\n\t\t\t\t\t\t\t<Importance :taskId="taskId"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<FilesSheet\n\t\t\t\t\t\t\t:taskId="taskId"\n\t\t\t\t\t\t\t:isShown="isFilesSheetShown"\n\t\t\t\t\t\t\t@close="closeFiles"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<CheckList\n\t\t\t\t\t\t\t:taskId="taskId"\n\t\t\t\t\t\t\t:checkListId="checkListId"\n\t\t\t\t\t\t\t:isShown="isCheckListSheetShown"\n\t\t\t\t\t\t\t@close="closeCheckList"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<DatePlanSheet\n\t\t\t\t\t\t\t:taskId="taskId"\n\t\t\t\t\t\t\t:isShown="isDatePlanSheetShown"\n\t\t\t\t\t\t\t@close="closeDatePlan"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<DescriptionField\n\t\t\t\t\t\t\t:taskId="taskId"\n\t\t\t\t\t\t\tv-slot="slot"\n\t\t\t\t\t\t\tref="description"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<DescriptionSheet\n\t\t\t\t\t\t\t\t:taskId="taskId"\n\t\t\t\t\t\t\t\t:isShown="slot.isShown"\n\t\t\t\t\t\t\t\t:doOpenInEditMode="slot.doOpenInEditMode"\n\t\t\t\t\t\t\t\t@show="openEditor"\n\t\t\t\t\t\t\t\t@close="closeEditor(slot)"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</DescriptionField>\n\t\t\t\t\t\t<div class="tasks-full-card-fields">\n\t\t\t\t\t\t\t<div class="tasks-full-card-field-container" data-field-container>\n\t\t\t\t\t\t\t\t<FieldList :fields="primaryFields"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="tasks-full-card-chips-fields">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tv-if="files.length > 0 || wasFilled(filesMeta.id)"\n\t\t\t\t\t\t\t\t\tclass="tasks-full-card-field-container --small-vertical-padding"\n\t\t\t\t\t\t\t\t\tdata-field-container\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Files :taskId="taskId" @open="openFiles"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tv-if="wasFilled(checkListMeta.id)"\n\t\t\t\t\t\t\t\t\tclass="tasks-full-card-field-container --custom"\n\t\t\t\t\t\t\t\t\tdata-field-container\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<CheckList\n\t\t\t\t\t\t\t\t\t\t:taskId="taskId"\n\t\t\t\t\t\t\t\t\t\t:isPreview="true"\n\t\t\t\t\t\t\t\t\t\t:isComponentShown="!isCheckListSheetShown"\n\t\t\t\t\t\t\t\t\t\t:checkListId="checkListId"\n\t\t\t\t\t\t\t\t\t\t@open="openCheckList"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tv-if="projectFields.length > 0"\n\t\t\t\t\t\t\t\t\tclass="tasks-full-card-field-container"\n\t\t\t\t\t\t\t\t\tdata-field-container\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FieldList :fields="projectFields"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tv-if="participantsFields.length > 0"\n\t\t\t\t\t\t\t\t\tclass="tasks-full-card-field-container"\n\t\t\t\t\t\t\t\t\tdata-field-container\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FieldList\n\t\t\t\t\t\t\t\t\t\t:fields="participantsFields"\n\t\t\t\t\t\t\t\t\t\t:useSeparator="participantsFields.length > 1"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tv-if="tagsFields.length > 0"\n\t\t\t\t\t\t\t\t\tclass="tasks-full-card-field-container"\n\t\t\t\t\t\t\t\t\tdata-field-container\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FieldList :fields="tagsFields"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tv-if="wasFilled(datePlanMeta.id)"\n\t\t\t\t\t\t\t\t\tclass="tasks-full-card-field-container"\n\t\t\t\t\t\t\t\t\tdata-field-container\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<DatePlan :taskId="taskId" @open="openDatePlan"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="tasks-full-card-chips">\n\t\t\t\t\t\t\t\t\t<template v-for="(chip, index) of chips" :key="index">\n\t\t\t\t\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t\t\t\t\t:is="chip.component ?? chip"\n\t\t\t\t\t\t\t\t\t\t\tv-bind="{ taskId }"\n\t\t\t\t\t\t\t\t\t\t\tv-on="chip.events ?? {}"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<Chip :icon="Outline.APPS" :text="'\u0415\u0449\u0451'" :soon="true"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<DropZone\n\t\t\t\t\t\t\tv-if="!isBottomSheetShown"\n\t\t\t\t\t\t\t:taskId="taskId"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tasks-full-card-footer">\n\t\t\t\t\t\t<FooterEdit v-if="isEdit" :taskId="taskId"/>\n\t\t\t\t\t\t<FooterCreate v-else :taskId="taskId" @addTask="addTask"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<Chat :taskId="taskId"/>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<div ref="skeleton" style="width: 100%;"></div>\n\t\t\t</template>\n\t\t</div>\n\t`};var z=babelHelpers.classPrivateFieldLooseKey("params");var j=babelHelpers.classPrivateFieldLooseKey("slider");var G=babelHelpers.classPrivateFieldLooseKey("application");var W=babelHelpers.classPrivateFieldLooseKey("mountApplication");var q=babelHelpers.classPrivateFieldLooseKey("unmountApplication");var Z=babelHelpers.classPrivateFieldLooseKey("subscribe");var J=babelHelpers.classPrivateFieldLooseKey("unsubscribe");var Q=babelHelpers.classPrivateFieldLooseKey("onClose");var Y=babelHelpers.classPrivateFieldLooseKey("handlePopupShow");class tt{constructor(t={}){Object.defineProperty(this,J,{value:nt});Object.defineProperty(this,Z,{value:it});Object.defineProperty(this,q,{value:st});Object.defineProperty(this,W,{value:et});Object.defineProperty(this,z,{writable:true,value:void 0});Object.defineProperty(this,j,{writable:true,value:void 0});Object.defineProperty(this,G,{writable:true,value:void 0});Object.defineProperty(this,Q,{writable:true,value:()=>{babelHelpers.classPrivateFieldLooseBase(this,j)[j].close()}});Object.defineProperty(this,Y,{writable:true,value:t=>{const e=t.getCompatData()[0];const s=()=>e.adjustPosition();const i=()=>{e.unsubscribe("onClose",i);e.unsubscribe("onDestroy",i);D.Event.unbind(document,"scroll",s,true)};e.subscribe("onClose",i);e.subscribe("onDestroy",i);D.Event.bind(document,"scroll",s,true)}});babelHelpers.classPrivateFieldLooseBase(this,z)[z]=t}async mountCard(t){if(!t.isOpen()){return}babelHelpers.classPrivateFieldLooseBase(this,j)[j]=t;babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]();babelHelpers.classPrivateFieldLooseBase(this,G)[G]=await babelHelpers.classPrivateFieldLooseBase(this,W)[W](t.getContentContainer())}unmountCard(){babelHelpers.classPrivateFieldLooseBase(this,q)[q]();babelHelpers.classPrivateFieldLooseBase(this,J)[J]()}}async function et(t){await L.Core.init();const i=e.BitrixVue.createApp(N,{...babelHelpers.classPrivateFieldLooseBase(this,z)[z],id:babelHelpers.classPrivateFieldLooseBase(this,z)[z].taskId});i.mixin(s.locMixin);i.use(L.Core.getStore());i.mount(t);return i}function st(){var t;(t=babelHelpers.classPrivateFieldLooseBase(this,G)[G])==null?void 0:t.unmount()}function it(){D.Event.EventEmitter.subscribe(O.EventName.CloseFullCard,babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]);D.Event.EventEmitter.subscribe("BX.Main.Popup:onShow",babelHelpers.classPrivateFieldLooseBase(this,Y)[Y])}function nt(){D.Event.EventEmitter.unsubscribe(O.EventName.CloseFullCard,babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]);D.Event.EventEmitter.unsubscribe("BX.Main.Popup:onShow",babelHelpers.classPrivateFieldLooseBase(this,Y)[Y])}t.TaskFullCard=tt})(this.BX.Tasks.V2.Application=this.BX.Tasks.V2.Application||{},BX.Vue3,BX.Vue3.Mixins,BX.Tasks.V2.Application,BX.Tasks.V2.Component.Elements,BX.Tasks.V2.Component.Elements,BX.Tasks.V2.Component,BX.Tasks.V2.Component.Fields,BX.Tasks.V2.Component.Fields,BX.Tasks.V2.Component.Fields,BX.Tasks.V2.Component.Fields,BX.Tasks.V2.Component.Fields,BX.Tasks.V2.Component.Fields,BX.Tasks.V2.Component.Fields,BX.Tasks.V2.Component.Fields,BX.Tasks.V2.Component.Fields,BX.Tasks.V2.Component.Fields,BX.Tasks.V2.Component.Fields,BX.Tasks.V2.Component.Fields,BX.Tasks.V2.Component.Fields,BX.Tasks.V2.Component.Fields,BX.Tasks.V2.Provider.Service,BX.Tasks.V2.Provider.Service,BX.Event,BX.Messenger.v2.Lib,BX.Messenger.v2.Application,BX.Tasks.V2,BX.Tasks.V2.Component,BX.Vue3.Components,BX,BX.Vue3.Vuex,BX.UI.Vue3.Components,BX.UI.IconSet,BX.UI.IconSet,BX,BX.Tasks.V2.Const,BX.Tasks.V2.Component.Fields,BX.Tasks.V2.Lib,BX.Tasks.V2.Provider.Service,BX.Tasks.V2.Provider.Service);
//# sourceMappingURL=task-full-card.bundle.map.js