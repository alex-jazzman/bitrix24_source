{"version":3,"file":"task-card.bundle.js","sources":["../src/task-card-skeleton.js","../src/task-card.js"],"sourcesContent":["import { Tag } from 'main.core';\nimport { Circle, Line } from 'ui.system.skeleton';\nimport './task-card-skeleton.css';\n\nexport const Skeleton = (): HTMLElement => Tag.render`\n\t<div class=\"task-skeleton\" style=\"padding: 24px\">\n\t\t<div class=\"--title --row\">\n\t\t\t${line(240, 18, 99)}\n\t\t\t<div class=\"--fire\">${circle()}</div>\n\t\t\t${circle()}\n\t\t</div>\n\t\t<div class=\"--description\">${line(80, 12, 99)}</div>\n\t\t<div style=\"margin-bottom: 17px\">${FieldRow()}</div>\n\t\t${FieldRow()}\n\t\t<div class=\"--chips\">${line(null, 32)}</div>\n\t\t<div class=\"--buttons --row\">\n\t\t\t${line(84, 34)}\n\t\t\t<div class=\"--cancel\">${line(84, 34)}</div>\n\t\t\t${line(97, 12, 99)}\n\t\t</div>\n\t</div>\n`;\n\nconst FieldRow = (): HTMLElement => Tag.render`\n\t<div class=\"--row\">\n\t\t${line(100, 12, 99)}\n\t\t<div style=\"margin: 0 8px 0 41px\">${circle(22)}</div>\n\t\t${line(130, 12, 99)}\n\t</div>\n`;\n\nexport const FullSkeleton = (): HTMLElement => Tag.render`\n\t<div class=\"task-skeleton --full\">\n\t\t<div class=\"--main\">\n\t\t\t<div style=\"padding: 28px 24px\">\n\t\t\t\t<div class=\"--full-title --row\">\n\t\t\t\t\t${line(350, 18)}\n\t\t\t\t\t${circle()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"--full-description\">${line(260, 18)}</div>\n\t\t\t\t${line(null, 84)}\n\t\t\t\t<div style=\"margin: 12px 0\">${line(null, 84)}</div>\n\t\t\t\t${line(null, 84)}\n\t\t\t\t<div class=\"--full-chips --row\">\n\t\t\t\t\t${line(88, 32)}\n\t\t\t\t\t${line(88, 32)}\n\t\t\t\t\t${line(88, 32)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"--row --footer\">\n\t\t\t\t${line(85, 38)}\n\t\t\t\t<div class=\"--more\">${line(38, 38)}</div>\n\t\t\t\t${line(131, 22)}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"--chat\">\n\t\t\t<div class=\"--chat-title --row\">\n\t\t\t\t${circle(40)}\n\t\t\t\t<div class=\"--chat-info\">\n\t\t\t\t\t${line(110, 12)}\n\t\t\t\t\t${line(75, 10)}\n\t\t\t\t</div>\n\t\t\t\t${circle()}\n\t\t\t\t<div style=\"margin-left: 8px\">${circle()}</div>\n\t\t\t</div>\n\t\t\t<div class=\"--chat-bg\">\n\t\t\t\t<div class=\"--textarea --row\">\n\t\t\t\t\t${line(null, 47)}\n\t\t\t\t\t${circle(44)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n`;\n\nconst line = Line;\nconst circle = Circle;\n","import { Popup, PopupManager } from 'main.popup';\nimport type { Slider } from 'main.sidepanel';\n\nimport { Skeleton, FullSkeleton } from './task-card-skeleton';\nexport { FullSkeleton };\n\nexport type Params = {\n\ttaskId?: number,\n\tgroupId?: number,\n\tdeadlineTs?: number,\n\tanalytics: AnalyticsParams,\n};\n\nexport type AnalyticsParams = {\n\tcontext: string,\n\tadditionalContext: string,\n\telement: string,\n};\n\nexport class TaskCard\n{\n\tstatic showCompactCard(params: Params = {}): void\n\t{\n\t\tconst id = `tasks-compact-card-${params.taskId}`;\n\t\tif (PopupManager.getPopupById(id))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet card;\n\t\tconst popup = new Popup({\n\t\t\tid,\n\t\t\tclassName: 'tasks-compact-card-popup',\n\t\t\twidth: 580,\n\t\t\tborderRadius: '16px',\n\t\t\tnoAllPaddings: true,\n\t\t\tcontent: Skeleton(),\n\t\t\tcacheable: false,\n\t\t\tevents: {\n\t\t\t\tonAfterClose: (): void => card.unmountCard(),\n\t\t\t},\n\t\t\toverlay: {\n\t\t\t\topacity: 100,\n\t\t\t\tbackgroundColor: '#0363',\n\t\t\t\tblur: 'blur(2px)',\n\t\t\t},\n\t\t});\n\n\t\tvoid BX.Runtime.loadExtension('tasks.v2.application.task-compact-card').then(({ TaskCompactCard }) => {\n\t\t\tcard = new TaskCompactCard({ analytics: {}, ...params });\n\t\t\tcard.mountCard(popup);\n\t\t});\n\n\t\tpopup.show();\n\t}\n\n\tstatic showFullCard(params: Params = {}): void\n\t{\n\t\tlet card;\n\t\tBX.SidePanel.Instance.open(`tasks-full-card-${params.taskId}`, {\n\t\t\tcontentClassName: 'tasks-full-card-slider-content',\n\t\t\twidth: 1510,\n\t\t\tcustomLeftBoundary: 0,\n\t\t\tcacheable: false,\n\t\t\tcontentCallback: (slider: Slider): void => {\n\t\t\t\tvoid BX.Runtime.loadExtension('tasks.v2.application.task-full-card').then(({ TaskFullCard }) => {\n\t\t\t\t\tcard = new TaskFullCard({ analytics: {}, ...params });\n\t\t\t\t\tcard.mountCard(slider);\n\t\t\t\t});\n\n\t\t\t\treturn FullSkeleton();\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonClose: (): void => card?.unmountCard(),\n\t\t\t},\n\t\t});\n\t}\n}\n"],"names":["Skeleton","Tag","render","line","circle","FieldRow","FullSkeleton","Line","Circle","TaskCard","showCompactCard","params","id","taskId","PopupManager","getPopupById","card","popup","Popup","className","width","borderRadius","noAllPaddings","content","cacheable","events","onAfterClose","unmountCard","overlay","opacity","backgroundColor","blur","BX","Runtime","loadExtension","then","TaskCompactCard","analytics","mountCard","show","showFullCard","SidePanel","Instance","open","contentClassName","customLeftBoundary","contentCallback","slider","TaskFullCard","onClose"],"mappings":"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"}