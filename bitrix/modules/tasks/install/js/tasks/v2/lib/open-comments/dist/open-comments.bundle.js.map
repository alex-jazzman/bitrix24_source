{"version":3,"file":"open-comments.bundle.js","sources":["../src/open-comments.js"],"sourcesContent":["import { apiClient } from 'tasks.v2.lib.api-client';\n\nimport './open-comments.css';\n\nexport const openComments = async (taskId: number): Promise<void> => {\n\tconst content = await getLegacyCommentsByTaskId(taskId);\n\tconst sidePanelId = `tasks-task-legacy-comments-${taskId}`;\n\tconst maxWidth = 650;\n\n\tconst commentsElement = document.createElement('div');\n\tBX.Runtime.html(commentsElement, `<div class=\"tasks-task-full-card-legacy-comments\">${content}</div>`);\n\n\tBX.SidePanel.Instance.open(sidePanelId, {\n\t\tcustomLeftBoundary: 0,\n\t\twidth: maxWidth,\n\t\tcacheable: false,\n\t\tcustomRightBoundary: 0,\n\t\tcontentCallback: () => commentsElement,\n\t});\n};\n\nasync function getLegacyCommentsByTaskId(id: number): Promise<string>\n{\n\ttry\n\t{\n\t\tconst data = await apiClient.post('LegacyComment.get', { task: { id } });\n\n\t\treturn (data.html) ?? '';\n\t}\n\tcatch (error)\n\t{\n\t\tconsole.error('getLegacyCommentsByTaskId error', error);\n\n\t\treturn '';\n\t}\n}\n"],"names":["openComments","taskId","content","getLegacyCommentsByTaskId","sidePanelId","maxWidth","commentsElement","document","createElement","BX","Runtime","html","SidePanel","Instance","open","customLeftBoundary","width","cacheable","customRightBoundary","contentCallback","id","data","apiClient","post","task","error","console"],"mappings":";;;;;;;OAIaA,YAAY,GAAG,MAAOC,MAAc,IAAoB;GACpE,MAAMC,OAAO,GAAG,MAAMC,yBAAyB,CAACF,MAAM,CAAC;GACvD,MAAMG,WAAW,GAAI,8BAA6BH,MAAO,EAAC;GAC1D,MAAMI,QAAQ,GAAG,GAAG;GAEpB,MAAMC,eAAe,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;GACrDC,EAAE,CAACC,OAAO,CAACC,IAAI,CAACL,eAAe,EAAG,qDAAoDJ,OAAQ,QAAO,CAAC;GAEtGO,EAAE,CAACG,SAAS,CAACC,QAAQ,CAACC,IAAI,CAACV,WAAW,EAAE;KACvCW,kBAAkB,EAAE,CAAC;KACrBC,KAAK,EAAEX,QAAQ;KACfY,SAAS,EAAE,KAAK;KAChBC,mBAAmB,EAAE,CAAC;KACtBC,eAAe,EAAE,MAAMb;IACvB,CAAC;CACH,CAAC;CAED,eAAeH,yBAAyB,CAACiB,EAAU,EACnD;GACC,IACA;KAAA;KACC,MAAMC,IAAI,GAAG,MAAMC,gCAAS,CAACC,IAAI,CAAC,mBAAmB,EAAE;OAAEC,IAAI,EAAE;SAAEJ;;MAAM,CAAC;KAExE,qBAAQC,IAAI,CAACV,IAAI,yBAAK,EAAE;IACxB,CACD,OAAOc,KAAK,EACZ;KACCC,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;KAEvD,OAAO,EAAE;;CAEX;;;;;;;;"}