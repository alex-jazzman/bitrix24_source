{"version":3,"file":"api-client.bundle.js","sources":["../src/api-client.js"],"sourcesContent":["import { ajax } from 'main.core';\n\nexport class ApiClient\n{\n\t#baseUrl: string;\n\t#contentType: string;\n\n\tconstructor(baseUrl = 'tasks.v2.', contentType = 'json')\n\t{\n\t\tthis.#baseUrl = baseUrl;\n\t\tthis.#contentType = contentType;\n\t}\n\n\tasync get(endpoint, params = {}): Promise<any>\n\t{\n\t\tconst url = this.buildUrl(endpoint);\n\t\tconst response = await ajax.runAction(url, {\n\t\t\t[this.#contentType]: { method: 'GET', ...params },\n\t\t});\n\n\t\treturn this.handleResponse(response);\n\t}\n\n\tasync post(endpoint, data): Promise<any>\n\t{\n\t\tconst url = this.buildUrl(endpoint);\n\t\tconst response = await ajax.runAction(url, {\n\t\t\t[this.#contentType]: data,\n\t\t});\n\n\t\treturn this.handleResponse(response);\n\t}\n\n\tasync put(endpoint, data): Promise<any>\n\t{\n\t\tconst url = this.buildUrl(endpoint);\n\t\tconst response = await ajax.runAction(url, {\n\t\t\tmethod: 'PUT',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\t[this.#contentType]: data,\n\t\t});\n\n\t\treturn this.handleResponse(response);\n\t}\n\n\tasync delete(endpoint, params = {}): Promise<any>\n\t{\n\t\tconst url = this.buildUrl(endpoint, params);\n\t\tconst response = await ajax.runAction(url, {\n\t\t\tmethod: 'DELETE',\n\t\t});\n\n\t\treturn this.handleResponse(response);\n\t}\n\n\tbuildUrl(endpoint, params = {}): string\n\t{\n\t\tlet url = `${this.#baseUrl}${endpoint}`;\n\t\tif (Object.keys(params).length > 0)\n\t\t{\n\t\t\turl += `?${new URLSearchParams(params).toString()}`;\n\t\t}\n\n\t\treturn url;\n\t}\n\n\tasync handleResponse(response): Promise<any>\n\t{\n\t\tconst { data, error } = response;\n\t\tif (error)\n\t\t{\n\t\t\tthrow error;\n\t\t}\n\n\t\treturn data;\n\t}\n}\n\nexport const apiClient = new ApiClient();\n"],"names":["ApiClient","constructor","baseUrl","contentType","get","endpoint","params","url","buildUrl","response","ajax","runAction","method","handleResponse","post","data","put","headers","delete","Object","keys","length","URLSearchParams","toString","error","apiClient"],"mappings":";;;;;;;CAAiC;CAAA;AAEjC,CAAO,MAAMA,SAAS,CACtB;GAICC,WAAW,CAACC,OAAO,GAAG,WAAW,EAAEC,WAAW,GAAG,MAAM,EACvD;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KACC,4CAAI,wBAAYD,OAAO;KACvB,4CAAI,gCAAgBC,WAAW;;GAGhC,MAAMC,GAAG,CAACC,QAAQ,EAAEC,MAAM,GAAG,EAAE,EAC/B;KACC,MAAMC,GAAG,GAAG,IAAI,CAACC,QAAQ,CAACH,QAAQ,CAAC;KACnC,MAAMI,QAAQ,GAAG,MAAMC,cAAI,CAACC,SAAS,CAACJ,GAAG,EAAE;OAC1C,yCAAC,IAAI,gCAAgB;SAAEK,MAAM,EAAE,KAAK;SAAE,GAAGN;;MACzC,CAAC;KAEF,OAAO,IAAI,CAACO,cAAc,CAACJ,QAAQ,CAAC;;GAGrC,MAAMK,IAAI,CAACT,QAAQ,EAAEU,IAAI,EACzB;KACC,MAAMR,GAAG,GAAG,IAAI,CAACC,QAAQ,CAACH,QAAQ,CAAC;KACnC,MAAMI,QAAQ,GAAG,MAAMC,cAAI,CAACC,SAAS,CAACJ,GAAG,EAAE;OAC1C,yCAAC,IAAI,gCAAgBQ;MACrB,CAAC;KAEF,OAAO,IAAI,CAACF,cAAc,CAACJ,QAAQ,CAAC;;GAGrC,MAAMO,GAAG,CAACX,QAAQ,EAAEU,IAAI,EACxB;KACC,MAAMR,GAAG,GAAG,IAAI,CAACC,QAAQ,CAACH,QAAQ,CAAC;KACnC,MAAMI,QAAQ,GAAG,MAAMC,cAAI,CAACC,SAAS,CAACJ,GAAG,EAAE;OAC1CK,MAAM,EAAE,KAAK;OACbK,OAAO,EAAE;SACR,cAAc,EAAE;QAChB;OACD,yCAAC,IAAI,gCAAgBF;MACrB,CAAC;KAEF,OAAO,IAAI,CAACF,cAAc,CAACJ,QAAQ,CAAC;;GAGrC,MAAMS,MAAM,CAACb,QAAQ,EAAEC,MAAM,GAAG,EAAE,EAClC;KACC,MAAMC,GAAG,GAAG,IAAI,CAACC,QAAQ,CAACH,QAAQ,EAAEC,MAAM,CAAC;KAC3C,MAAMG,QAAQ,GAAG,MAAMC,cAAI,CAACC,SAAS,CAACJ,GAAG,EAAE;OAC1CK,MAAM,EAAE;MACR,CAAC;KAEF,OAAO,IAAI,CAACC,cAAc,CAACJ,QAAQ,CAAC;;GAGrCD,QAAQ,CAACH,QAAQ,EAAEC,MAAM,GAAG,EAAE,EAC9B;KACC,IAAIC,GAAG,GAAI,2CAAE,IAAI,qBAAU,GAAEF,QAAS,EAAC;KACvC,IAAIc,MAAM,CAACC,IAAI,CAACd,MAAM,CAAC,CAACe,MAAM,GAAG,CAAC,EAClC;OACCd,GAAG,IAAK,IAAG,IAAIe,eAAe,CAAChB,MAAM,CAAC,CAACiB,QAAQ,EAAG,EAAC;;KAGpD,OAAOhB,GAAG;;GAGX,MAAMM,cAAc,CAACJ,QAAQ,EAC7B;KACC,MAAM;OAAEM,IAAI;OAAES;MAAO,GAAGf,QAAQ;KAChC,IAAIe,KAAK,EACT;OACC,MAAMA,KAAK;;KAGZ,OAAOT,IAAI;;CAEb;AAEA,OAAaU,SAAS,GAAG,IAAIzB,SAAS,EAAE;;;;;;;;;"}