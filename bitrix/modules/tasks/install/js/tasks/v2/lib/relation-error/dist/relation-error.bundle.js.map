{"version":3,"file":"relation-error.bundle.js","sources":["../src/relation-error.js"],"sourcesContent":["import { Popup } from 'main.popup';\nimport type { Store } from 'ui.vue3.vuex';\n\nimport { Core } from 'tasks.v2.core';\nimport { Model } from 'tasks.v2.const';\n\nclass RelationError\n{\n\t#taskId: number | string;\n\n\tsetTaskId(taskId: number | string): RelationError\n\t{\n\t\tthis.#taskId = taskId;\n\n\t\treturn this;\n\t}\n\n\tasync showError(errorText: string, fieldId: string): Promise<void>\n\t{\n\t\tvoid this.$store.dispatch(`${Model.Tasks}/setFieldFilled`, {\n\t\t\tid: this.#taskId,\n\t\t\tfieldName: fieldId,\n\t\t});\n\n\t\tawait new Promise((resolve) => {\n\t\t\tsetTimeout(() => resolve(), 0);\n\t\t});\n\n\t\tconst scrollContainer = document.querySelector(`[data-task-card-scroll=\"${this.#taskId}\"]`);\n\t\tconst addButton = scrollContainer.querySelector(`[data-task-relation-add=\"${fieldId}\"]`);\n\n\t\tconst popup = new Popup({\n\t\t\tid: 'tasks-relation-error',\n\t\t\tclassName: 'tasks-hint',\n\t\t\tbackground: 'var(--ui-color-bg-content-inapp)',\n\t\t\tbindElement: addButton,\n\t\t\tcontent: errorText,\n\t\t\tangle: true,\n\t\t\tautoHide: true,\n\t\t\tautoHideHandler: () => true,\n\t\t\tcacheable: false,\n\t\t\tanimation: 'fading',\n\t\t\toffsetLeft: addButton.offsetWidth / 2,\n\t\t\ttargetContainer: scrollContainer,\n\t\t});\n\n\t\tpopup.show();\n\n\t\tsetTimeout(() => popup.close(), 3000);\n\t}\n\n\tget $store(): Store\n\t{\n\t\treturn Core.getStore();\n\t}\n}\n\nexport const relationError = new RelationError();\n"],"names":["RelationError","setTaskId","taskId","showError","errorText","fieldId","$store","dispatch","Model","Tasks","id","fieldName","Promise","resolve","setTimeout","scrollContainer","document","querySelector","addButton","popup","Popup","className","background","bindElement","content","angle","autoHide","autoHideHandler","cacheable","animation","offsetLeft","offsetWidth","targetContainer","show","close","Core","getStore","relationError"],"mappings":";;;;;;;CAIuC;CAEvC,MAAMA,aAAa,CACnB;GAAA;KAAA;OAAA;OAAA;;;GAGCC,SAAS,CAACC,MAAuB,EACjC;KACC,4CAAI,sBAAWA,MAAM;KAErB,OAAO,IAAI;;GAGZ,MAAMC,SAAS,CAACC,SAAiB,EAAEC,OAAe,EAClD;KACC,KAAK,IAAI,CAACC,MAAM,CAACC,QAAQ,CAAE,GAAEC,oBAAK,CAACC,KAAM,iBAAgB,EAAE;OAC1DC,EAAE,0CAAE,IAAI,mBAAQ;OAChBC,SAAS,EAAEN;MACX,CAAC;KAEF,MAAM,IAAIO,OAAO,CAAEC,OAAO,IAAK;OAC9BC,UAAU,CAAC,MAAMD,OAAO,EAAE,EAAE,CAAC,CAAC;MAC9B,CAAC;KAEF,MAAME,eAAe,GAAGC,QAAQ,CAACC,aAAa,CAAE,2BAAwB,wCAAE,IAAI,mBAAS,IAAG,CAAC;KAC3F,MAAMC,SAAS,GAAGH,eAAe,CAACE,aAAa,CAAE,4BAA2BZ,OAAQ,IAAG,CAAC;KAExF,MAAMc,KAAK,GAAG,IAAIC,gBAAK,CAAC;OACvBV,EAAE,EAAE,sBAAsB;OAC1BW,SAAS,EAAE,YAAY;OACvBC,UAAU,EAAE,kCAAkC;OAC9CC,WAAW,EAAEL,SAAS;OACtBM,OAAO,EAAEpB,SAAS;OAClBqB,KAAK,EAAE,IAAI;OACXC,QAAQ,EAAE,IAAI;OACdC,eAAe,EAAE,MAAM,IAAI;OAC3BC,SAAS,EAAE,KAAK;OAChBC,SAAS,EAAE,QAAQ;OACnBC,UAAU,EAAEZ,SAAS,CAACa,WAAW,GAAG,CAAC;OACrCC,eAAe,EAAEjB;MACjB,CAAC;KAEFI,KAAK,CAACc,IAAI,EAAE;KAEZnB,UAAU,CAAC,MAAMK,KAAK,CAACe,KAAK,EAAE,EAAE,IAAI,CAAC;;GAGtC,IAAI5B,MAAM,GACV;KACC,OAAO6B,kBAAI,CAACC,QAAQ,EAAE;;CAExB;AAEA,OAAaC,aAAa,GAAG,IAAIrC,aAAa,EAAE;;;;;;;;"}