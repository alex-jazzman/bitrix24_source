this.BX=this.BX||{};this.BX.Tasks=this.BX.Tasks||{};this.BX.Tasks.V2=this.BX.Tasks.V2||{};this.BX.Tasks.V2.Component=this.BX.Tasks.V2.Component||{};(function(t,s,e,a,i,n,o,T){"use strict";const S=Object.freeze({id:T.TaskField.Status,title:o.Loc.getMessage("TASKS_V2_STATUS_TITLE")});const u={components:{BIcon:e.BIcon,Hint:n.Hint},props:{taskId:{type:[Number,String],required:true}},setup(){return{statusMeta:S}},data(){return{isHintShown:false}},computed:{task(){return this.$store.getters[`${T.Model.Tasks}/getById`](this.taskId)},icon(){var t;const s={[T.TaskStatus.Pending]:a.Outline.HOURGLASS,[T.TaskStatus.InProgress]:a.Outline.NEXT,[T.TaskStatus.SupposedlyCompleted]:a.Outline.REFRESH,[T.TaskStatus.Completed]:a.Outline.SENDED,[T.TaskStatus.Deferred]:a.Outline.PAUSE_L};return(t=s[this.task.status])!=null?t:a.Outline.HOURGLASS},statusFormatted(){var t;const s={[T.TaskStatus.Pending]:this.loc("TASKS_V2_STATUS_PENDING"),[T.TaskStatus.InProgress]:this.loc("TASKS_V2_STATUS_IN_PROGRESS"),[T.TaskStatus.SupposedlyCompleted]:this.loc("TASKS_V2_STATUS_SUPPOSEDLY_COMPLETED"),[T.TaskStatus.Completed]:this.loc("TASKS_V2_STATUS_COMPLETED"),[T.TaskStatus.Deferred]:this.loc("TASKS_V2_STATUS_DEFERRED")};return(t=s[this.task.status])!=null?t:this.loc("TASKS_V2_STATUS_PENDING")},statusAtFormatted(){const t={[T.TaskStatus.Pending]:"TASKS_V2_STATUS_PENDING_FROM",[T.TaskStatus.InProgress]:"TASKS_V2_STATUS_IN_PROGRESS_FROM",[T.TaskStatus.SupposedlyCompleted]:"TASKS_V2_STATUS_SUPPOSEDLY_COMPLETED_FROM",[T.TaskStatus.Completed]:"TASKS_V2_STATUS_COMPLETED_AT",[T.TaskStatus.Deferred]:"TASKS_V2_STATUS_DEFERRED_AT"};return this.loc(t[this.task.status],{"#DATE#":this.formatDate(this.task.statusChangedTs),"#TIME#":this.formatTime(this.task.statusChangedTs)})},createdAtFormatted(){return this.loc("TASKS_V2_STATUS_CREATED_AT",{"#DATE#":this.formatDate(this.task.createdTs),"#TIME#":this.formatTime(this.task.createdTs)})}},methods:{formatDate(t){return s.DateTimeFormat.format(s.DateTimeFormat.getFormat("SHORT_DATE_FORMAT"),t/1e3)},formatTime(t){return s.DateTimeFormat.format(s.DateTimeFormat.getFormat("SHORT_TIME_FORMAT"),t/1e3)},handleClick(){this.clearTimeouts();if(this.isHintShown){this.closePopup()}else{this.showPopup()}},handleMouseEnter(){this.clearTimeouts();this.showTimeout=setTimeout((()=>this.showPopup()),100)},handleMouseLeave(){this.clearTimeouts();this.closePopup()},showPopup(){this.clearTimeouts();this.isHintShown=true},closePopup(){this.clearTimeouts();this.isHintShown=false},clearTimeouts(){clearTimeout(this.showTimeout)}},template:`\n\t\t<div\n\t\t\tclass="tasks-field-status"\n\t\t\t:data-task-id="taskId"\n\t\t\t:data-task-field-id="statusMeta.id"\n\t\t\t:data-task-field-value="task.status"\n\t\t\t:data-task-created-ts="task.createdTs"\n\t\t\t:data-task-status-changes-ts="task.statusChangedTs"\n\t\t\tref="container"\n\t\t\t@click="handleClick"\n\t\t\t@mouseenter="handleMouseEnter"\n\t\t\t@mouseleave="handleMouseLeave"\n\t\t>\n\t\t\t<BIcon class="tasks-field-status-icon" :name="icon"/>\n\t\t\t<div class="tasks-field-status-text">{{ statusFormatted }}</div>\n\t\t</div>\n\t\t<Hint v-if="isHintShown" :bindElement="$refs.container" @close="closePopup">\n\t\t\t<div class="tasks-field-status-hint">\n\t\t\t\t<div>{{ statusAtFormatted }}</div>\n\t\t\t\t<div>{{ createdAtFormatted }}</div>\n\t\t\t</div>\n\t\t</Hint>\n\t`};t.Status=u;t.statusMeta=S})(this.BX.Tasks.V2.Component.Fields=this.BX.Tasks.V2.Component.Fields||{},BX.Main,BX.UI.IconSet,BX.UI.IconSet,BX,BX.Tasks.V2.Component.Elements,BX,BX.Tasks.V2.Const);
//# sourceMappingURL=status.bundle.map.js