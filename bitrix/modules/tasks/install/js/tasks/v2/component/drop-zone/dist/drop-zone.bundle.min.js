this.BX=this.BX||{};this.BX.Tasks=this.BX.Tasks||{};this.BX.Tasks.V2=this.BX.Tasks.V2||{};(function(t,e,n,r,s,a,i){"use strict";const o={components:{BIcon:r.BIcon},props:{taskId:{type:[Number,String],required:true},bottom:{type:Number,default:100}},setup(t){return{Main:r.Main,fileService:i.fileService.get(t.taskId)}},data(){return{showDropArea:false,lastDropAreaEnterTarget:null}},computed:{task(){return this.$store.getters[`${a.Model.Tasks}/getById`](this.taskId)},readonly(){return!this.task.rights.edit},dropAreaStyles(){return{bottom:`${this.bottom}px`}},iconSize(){return 69},container(){var t;return(t=this.$parent)==null?void 0:t.$el}},mounted(){if(!e.Type.isElementNode(this.container)||this.readonly){return}this.bindEvents()},beforeUnmount(){if(!e.Type.isElementNode(this.container)||this.readonly){return}this.unbindEvents()},methods:{bindEvents(){this.fileService.getAdapter().getUploader().assignDropzone(this.container);e.Event.bind(this.container,"dragenter",this.onDragEnter);e.Event.bind(this.container,"dragleave",this.onDragLeave);e.Event.bind(this.container,"drop",this.onDrop)},unbindEvents(){this.fileService.getAdapter().getUploader().unassignDropzone(this.container);e.Event.unbind(this.container,"dragenter",this.onDragEnter);e.Event.unbind(this.container,"dragleave",this.onDragLeave);e.Event.unbind(this.container,"drop",this.onDrop)},async onDragEnter(t){t.stopPropagation();t.preventDefault();const e=await n.hasDataTransferOnlyFiles(t.dataTransfer,false);if(!e){return}this.lastDropAreaEnterTarget=t.target;this.showDropArea=true},onDragLeave(t){t.stopPropagation();t.preventDefault();if(this.lastDropAreaEnterTarget!==t.target){return}this.showDropArea=false},async onDrop(t){t.preventDefault();this.showDropArea=false}},template:`\n\t\t<Transition name="tasks-drop-zone-fade">\n\t\t\t<div v-if="showDropArea" :style="dropAreaStyles" class="tasks-drop-zone__container">\n\t\t\t\t<div class="tasks-drop-zone__box">\n\t\t\t\t\t<BIcon :name="Main.ATTACH" :size="iconSize" class="tasks-drop-zone__icon"/>\n\t\t\t\t\t<label class="tasks-drop-zone__label_text">{{ loc('TASKS_V2_DROP_ZONE_TITLE') }}</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Transition>\n\t`};t.DropZone=o})(this.BX.Tasks.V2.Component=this.BX.Tasks.V2.Component||{},BX,BX.UI.Uploader,BX.UI.IconSet,BX,BX.Tasks.V2.Const,BX.Tasks.V2.Provider.Service);
//# sourceMappingURL=drop-zone.bundle.map.js