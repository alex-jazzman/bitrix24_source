{"version":3,"file":"sub-tasks.bundle.js","sources":["../src/sub-tasks-meta.js","../src/sub-tasks.js","../src/sub-tasks-chip.js"],"sourcesContent":["import { Loc } from 'main.core';\nimport { Outline } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.outline';\n\nimport { TaskField } from 'tasks.v2.const';\nimport { subTasksDialog } from 'tasks.v2.lib.relation-tasks-dialog';\nimport { subTasksService } from 'tasks.v2.provider.service.relation-service';\nimport type { RelationMeta } from 'tasks.v2.component.fields.relation-tasks';\n\nexport const subTasksMeta: RelationMeta = Object.freeze({\n\tid: TaskField.SubTasks,\n\ticon: Outline.RELATED_TASKS,\n\tidsField: 'subTaskIds',\n\tcontainsField: 'containsSubTasks',\n\ttitle: Loc.getMessage('TASKS_V2_SUB_TASKS_TITLE'),\n\tchipTitle: Loc.getMessage('TASKS_V2_SUB_TASKS_TITLE_CHIP'),\n\thint: Loc.getMessage('TASKS_V2_SUB_TASKS_ADD'),\n\tcountLoc: 'TASKS_V2_SUB_TASKS_TITLE_COUNT',\n\tservice: subTasksService,\n\tdialog: subTasksDialog,\n});\n","import { RelationTasks } from 'tasks.v2.component.fields.relation-tasks';\nimport { subTasksMeta } from './sub-tasks-meta';\n\n// @vue/component\nexport const SubTasks = {\n\tname: 'TaskSubTasks',\n\tcomponents: {\n\t\tRelationTasks,\n\t},\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tsubTasksMeta,\n\t\t};\n\t},\n\ttemplate: `\n\t\t<RelationTasks :taskId=\"taskId\" :meta=\"subTasksMeta\"/>\n\t`,\n};\n","import { hint, type HintParams } from 'ui.vue3.directives.hint';\n\nimport { tooltip } from 'tasks.v2.component.elements.hint';\nimport { RelationTasksChip } from 'tasks.v2.component.fields.relation-tasks';\nimport { subTasksMeta } from './sub-tasks-meta';\n\n// @vue/component\nexport const SubTasksChip = {\n\tcomponents: {\n\t\tRelationTasksChip,\n\t},\n\tdirectives: { hint },\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tsubTasksMeta,\n\t\t};\n\t},\n\tcomputed: {\n\t\tisEdit(): boolean\n\t\t{\n\t\t\treturn Number.isInteger(this.taskId) && this.taskId > 0;\n\t\t},\n\t\ttooltip(): Function\n\t\t{\n\t\t\treturn (): HintParams => tooltip({\n\t\t\t\ttext: this.loc('TASKS_V2_SUB_TASKS_DISABLED_HINT'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\toffsetLeft: this.$el.offsetWidth / 2,\n\t\t\t\t\ttargetContainer: document.querySelector(`[data-task-card-scroll=\"${this.taskId}\"]`),\n\t\t\t\t},\n\t\t\t\ttimeout: 200,\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<RelationTasksChip v-hint=\"tooltip\" :taskId=\"taskId\" :meta=\"subTasksMeta\" :disabled=\"!isEdit\"/>\n\t`,\n};\n"],"names":["subTasksMeta","Object","freeze","id","TaskField","SubTasks","icon","Outline","RELATED_TASKS","idsField","containsField","title","Loc","getMessage","chipTitle","hint","countLoc","service","subTasksService","dialog","subTasksDialog","name","components","RelationTasks","props","taskId","type","Number","String","required","setup","template","SubTasksChip","RelationTasksChip","directives","computed","isEdit","isInteger","tooltip","text","loc","popupOptions","offsetLeft","$el","offsetWidth","targetContainer","document","querySelector","timeout"],"mappings":";;;;;;;;OASaA,YAA0B,GAAGC,MAAM,CAACC,MAAM,CAAC;GACvDC,EAAE,EAAEC,wBAAS,CAACC,QAAQ;GACtBC,IAAI,EAAEC,2BAAO,CAACC,aAAa;GAC3BC,QAAQ,EAAE,YAAY;GACtBC,aAAa,EAAE,kBAAkB;GACjCC,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,0BAA0B,CAAC;GACjDC,SAAS,EAAEF,aAAG,CAACC,UAAU,CAAC,+BAA+B,CAAC;GAC1DE,IAAI,EAAEH,aAAG,CAACC,UAAU,CAAC,wBAAwB,CAAC;GAC9CG,QAAQ,EAAE,gCAAgC;GAC1CC,OAAO,EAAEC,yDAAe;GACxBC,MAAM,EAAEC;CACT,CAAC,CAAC;;CCjBF;AACA,OAAaf,QAAQ,GAAG;GACvBgB,IAAI,EAAE,cAAc;GACpBC,UAAU,EAAE;oBACXC;IACA;GACDC,KAAK,EAAE;KACNC,MAAM,EAAE;OACPC,IAAI,EAAE,CAACC,MAAM,EAAEC,MAAM,CAAC;OACtBC,QAAQ,EAAE;;IAEX;GACDC,KAAK,GACL;KACC,OAAO;OACN9B;MACA;IACD;GACD+B,QAAQ,EAAG;;;CAGZ,CAAC;;CClBD;AACA,OAAaC,YAAY,GAAG;GAC3BV,UAAU,EAAE;wBACXW;IACA;GACDC,UAAU,EAAE;WAAEnB;IAAM;GACpBS,KAAK,EAAE;KACNC,MAAM,EAAE;OACPC,IAAI,EAAE,CAACC,MAAM,EAAEC,MAAM,CAAC;OACtBC,QAAQ,EAAE;;IAEX;GACDC,KAAK,GACL;KACC,OAAO;OACN9B;MACA;IACD;GACDmC,QAAQ,EAAE;KACTC,MAAM,GACN;OACC,OAAOT,MAAM,CAACU,SAAS,CAAC,IAAI,CAACZ,MAAM,CAAC,IAAI,IAAI,CAACA,MAAM,GAAG,CAAC;MACvD;KACDa,OAAO,GACP;OACC,OAAO,MAAkBA,wCAAO,CAAC;SAChCC,IAAI,EAAE,IAAI,CAACC,GAAG,CAAC,kCAAkC,CAAC;SAClDC,YAAY,EAAE;WACbC,UAAU,EAAE,IAAI,CAACC,GAAG,CAACC,WAAW,GAAG,CAAC;WACpCC,eAAe,EAAEC,QAAQ,CAACC,aAAa,CAAE,2BAA0B,IAAI,CAACtB,MAAO,IAAG;UAClF;SACDuB,OAAO,EAAE;QACT,CAAC;;IAEH;GACDjB,QAAQ,EAAG;;;CAGZ,CAAC;;;;;;;;;;"}