{"version":3,"file":"parent-task.bundle.js","sources":["../src/parent-task-meta.js","../src/parent-task-dialog.js","../src/parent-task.js","../src/parent-task-chip.js"],"sourcesContent":["import { Loc } from 'main.core';\nimport { TaskField } from 'tasks.v2.const';\n\nexport const parentTaskMeta = Object.freeze({\n\tid: TaskField.Parent,\n\ttitle: Loc.getMessage('TASKS_V2_PARENT_TASK_TITLE'),\n});\n","import { Runtime } from 'main.core';\n\nimport { Core } from 'tasks.v2.core';\nimport { EntitySelectorEntity, Model, TaskField } from 'tasks.v2.const';\nimport { relationError } from 'tasks.v2.lib.relation-error';\nimport { subTasksService } from 'tasks.v2.provider.service.relation-service';\nimport { EntitySelectorDialog } from 'tasks.v2.lib.entity-selector-dialog';\nimport type { ItemId } from 'tasks.v2.lib.entity-selector-dialog';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nclass ParentTaskDialog\n{\n\t#taskId: number | string;\n\t#dialog: EntitySelectorDialog;\n\t#onUpdateOnce: Function | null = null;\n\n\tsetTaskId(taskId: number | string): ParentTaskDialog\n\t{\n\t\tthis.#taskId = taskId;\n\n\t\treturn this;\n\t}\n\n\tshowTo(targetNode: HTMLElement): void\n\t{\n\t\tthis.#dialog ??= this.#createDialog();\n\t\tthis.#dialog.selectItemsByIds(this.#items);\n\t\tthis.#dialog.showTo(targetNode);\n\t}\n\n\tonUpdateOnce(callback: Function): void\n\t{\n\t\tthis.#onUpdateOnce = callback;\n\t}\n\n\t#createDialog(): EntitySelectorDialog\n\t{\n\t\tconst onItemChangeDebounced = Runtime.debounce(this.#onItemChange, 10, this);\n\n\t\treturn new EntitySelectorDialog({\n\t\t\tcontext: 'tasks-card',\n\t\t\tmultiple: false,\n\t\t\tenableSearch: true,\n\t\t\twidth: 500,\n\t\t\tentities: [\n\t\t\t\t{\n\t\t\t\t\tid: EntitySelectorEntity.Task,\n\t\t\t\t},\n\t\t\t],\n\t\t\tpreselectedItems: this.#items,\n\t\t\tevents: {\n\t\t\t\t'Item:onSelect': onItemChangeDebounced,\n\t\t\t\t'Item:onDeselect': onItemChangeDebounced,\n\t\t\t\tonHide: this.#clearOnUpdateOnce,\n\t\t\t\tonDestroy: this.#clearOnUpdateOnce,\n\t\t\t},\n\t\t});\n\t}\n\n\tasync #onItemChange(): void\n\t{\n\t\tconst selectedTaskId = this.#dialog.getSelectedItems()[0]?.getId() ?? 0;\n\n\t\tif (selectedTaskId > 0)\n\t\t{\n\t\t\tconst error = await subTasksService.setParent(this.#taskId, selectedTaskId);\n\n\t\t\tif (error)\n\t\t\t{\n\t\t\t\tvoid relationError.setTaskId(this.#taskId).showError(error, TaskField.Parent);\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\telse if (selectedTaskId === 0 && this.#task.parentId > 0)\n\t\t{\n\t\t\tawait subTasksService.delete(this.#task.parentId, [this.#taskId]);\n\t\t}\n\n\t\tthis.#onUpdateOnce?.();\n\t\tthis.#clearOnUpdateOnce();\n\t}\n\n\t#clearOnUpdateOnce = (): void => {\n\t\tthis.#onUpdateOnce = null;\n\t};\n\n\tget #items(): ItemId[]\n\t{\n\t\treturn this.#task.parentId ? [[EntitySelectorEntity.Task, this.#task.parentId]] : [];\n\t}\n\n\tget #task(): TaskModel\n\t{\n\t\treturn Core.getStore().getters[`${Model.Tasks}/getById`](this.#taskId);\n\t}\n}\n\nexport const parentTaskDialog = new ParentTaskDialog();\n","import { hint, type HintParams } from 'ui.vue3.directives.hint';\nimport { TextMd } from 'ui.system.typography.vue';\nimport { BIcon, Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { Model } from 'tasks.v2.const';\nimport { TaskList } from 'tasks.v2.component.task-list';\nimport { tooltip } from 'tasks.v2.component.elements.hint';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport { subTasksService } from 'tasks.v2.provider.service.relation-service';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport { parentTaskMeta } from './parent-task-meta';\nimport { parentTaskDialog } from './parent-task-dialog';\n\nimport './parent-task.css';\n\n// @vue/component\nexport const ParentTask = {\n\tname: 'TaskParentTask',\n\tcomponents: {\n\t\tBIcon,\n\t\tTaskList,\n\t\tTextMd,\n\t},\n\tdirectives: { hint },\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t\tparentTaskMeta,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\tparentTask(): ?TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.parentId);\n\t\t},\n\t\tparentId(): number\n\t\t{\n\t\t\treturn this.task.parentId;\n\t\t},\n\t\thasParent(): boolean\n\t\t{\n\t\t\treturn this.task.parentId > 0;\n\t\t},\n\t\tparentTaskIds(): number[]\n\t\t{\n\t\t\treturn this.hasParent ? [this.task.parentId] : [];\n\t\t},\n\t\ttext(): string\n\t\t{\n\t\t\treturn parentTaskMeta.title;\n\t\t},\n\t\tcontext(): string\n\t\t{\n\t\t\treturn parentTaskMeta.id;\n\t\t},\n\t\treadonly(): boolean\n\t\t{\n\t\t\treturn !this.task.rights.edit;\n\t\t},\n\t\ttooltip(): Function\n\t\t{\n\t\t\treturn (): HintParams => tooltip({\n\t\t\t\ttext: this.loc('TASKS_V2_PARENT_TASK_SELECT'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\toffsetLeft: this.$refs.add.$el.offsetWidth / 2,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t},\n\twatch: {\n\t\tparentId: {\n\t\t\timmediate: true,\n\t\t\thandler(): void\n\t\t\t{\n\t\t\t\tif (this.hasParent)\n\t\t\t\t{\n\t\t\t\t\tvoid this.loadParentTask();\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t},\n\tmethods: {\n\t\tasync loadParentTask(): void\n\t\t{\n\t\t\tif (this.parentTask)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait taskService.getById(this.parentId);\n\t\t},\n\t\thandleTitleClick(): void\n\t\t{\n\t\t\tif (this.readonly)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tparentTaskDialog.setTaskId(this.taskId).showTo(this.$refs.title);\n\t\t},\n\t\thandleEditClick(): void\n\t\t{\n\t\t\tparentTaskDialog.setTaskId(this.taskId).showTo(this.$refs.add.$el);\n\t\t},\n\t\tasync handleRemoveParentTask(parentId): void\n\t\t{\n\t\t\tawait subTasksService.delete(parentId, [this.taskId]);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"tasks-field-parent-task\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-field-id=\"parentTaskMeta.id\"\n\t\t>\n\t\t\t<div class=\"tasks-field-parent-task-title\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"tasks-field-parent-task-main\"\n\t\t\t\t\t:class=\"{ '--readonly': readonly }\"\n\t\t\t\t\tref=\"title\"\n\t\t\t\t\t@click=\"handleTitleClick\"\n\t\t\t\t>\n\t\t\t\t\t<BIcon :name=\"Outline.SUBTASK\"/>\n\t\t\t\t\t<TextMd :accent=\"true\">{{ text }}</TextMd>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"!readonly\"\n\t\t\t\t\tv-hint=\"tooltip\"\n\t\t\t\t\tclass=\"tasks-field-parent-task-edit-container\"\n\t\t\t\t>\n\t\t\t\t\t<BIcon\n\t\t\t\t\t\tclass=\"tasks-field-parent-task-icon\"\n\t\t\t\t\t\t:name=\"Outline.PLUS_L\"\n\t\t\t\t\t\t:hoverable=\"true\"\n\t\t\t\t\t\t:data-task-relation-add=\"parentTaskMeta.id\"\n\t\t\t\t\t\tref=\"add\"\n\t\t\t\t\t\t@click=\"handleEditClick\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<TaskList\n\t\t\t\tv-if=\"hasParent\"\n\t\t\t\t:readonly=\"readonly\"\n\t\t\t\t:context=\"context\"\n\t\t\t\t:taskIds=\"parentTaskIds\"\n\t\t\t\t@removeTask=\"handleRemoveParentTask\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { Outline } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.outline';\n\nimport { Model } from 'tasks.v2.const';\nimport { Chip, ChipDesign } from 'tasks.v2.component.elements.chip';\nimport { fieldHighlighter } from 'tasks.v2.lib.field-highlighter';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport { parentTaskMeta } from './parent-task-meta';\nimport { parentTaskDialog } from './parent-task-dialog';\n\n// @vue/component\nexport const ParentTaskChip = {\n\tcomponents: {\n\t\tChip,\n\t},\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tisAutonomous: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tsetup(): Object {\n\t\treturn {\n\t\t\tparentTaskMeta,\n\t\t\tOutline,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\tparentTask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.task.parentId);\n\t\t},\n\t\thasParent(): boolean\n\t\t{\n\t\t\treturn this.task.parentId > 0;\n\t\t},\n\t\ticon(): string\n\t\t{\n\t\t\treturn Outline.SUBTASK;\n\t\t},\n\t\tdesign(): string\n\t\t{\n\t\t\treturn {\n\t\t\t\t[!this.isAutonomous && !this.isSelected]: ChipDesign.ShadowNoAccent,\n\t\t\t\t[!this.isAutonomous && this.isSelected]: ChipDesign.ShadowAccent,\n\t\t\t\t[this.isAutonomous && !this.isSelected]: ChipDesign.OutlineNoAccent,\n\t\t\t\t[this.isAutonomous && this.isSelected]: ChipDesign.OutlineAccent,\n\t\t\t}.true;\n\t\t},\n\t\tisSelected(): boolean\n\t\t{\n\t\t\tif (this.isAutonomous)\n\t\t\t{\n\t\t\t\treturn this.hasParent;\n\t\t\t}\n\n\t\t\treturn this.$store.getters[`${Model.Tasks}/wasFieldFilled`](this.taskId, parentTaskMeta.id);\n\t\t},\n\t\treadonly(): boolean\n\t\t{\n\t\t\treturn !this.task.rights.edit;\n\t\t},\n\t\ttext(): string\n\t\t{\n\t\t\treturn parentTaskMeta.title;\n\t\t},\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tif (!this.isAutonomous && this.isSelected)\n\t\t\t{\n\t\t\t\tthis.highlightField();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tparentTaskDialog.setTaskId(this.taskId).showTo(this.$el);\n\n\t\t\tif (!this.isAutonomous)\n\t\t\t{\n\t\t\t\tparentTaskDialog.onUpdateOnce(this.highlightField);\n\t\t\t}\n\t\t},\n\t\thighlightField(): void\n\t\t{\n\t\t\tvoid fieldHighlighter.setContainer(this.$root.$el).highlight(parentTaskMeta.id);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Chip\n\t\t\tv-if=\"isSelected || !readonly\"\n\t\t\t:design=\"design\"\n\t\t\t:text=\"text\"\n\t\t\t:icon=\"icon\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-chip-id=\"parentTaskMeta.id\"\n\t\t\tref=\"chip\"\n\t\t\t@click=\"handleClick\"\n\t\t/>\n\t`,\n};\n"],"names":["parentTaskMeta","Object","freeze","id","TaskField","Parent","title","Loc","getMessage","ParentTaskDialog","setTaskId","taskId","showTo","targetNode","selectItemsByIds","onUpdateOnce","callback","onItemChangeDebounced","Runtime","debounce","EntitySelectorDialog","context","multiple","enableSearch","width","entities","EntitySelectorEntity","Task","preselectedItems","events","onHide","onDestroy","selectedTaskId","getSelectedItems","getId","error","subTasksService","setParent","relationError","showError","parentId","delete","Core","getStore","getters","Model","Tasks","parentTaskDialog","ParentTask","name","components","BIcon","TaskList","TextMd","directives","hint","props","type","Number","String","required","setup","Outline","computed","task","$store","parentTask","hasParent","parentTaskIds","text","readonly","rights","edit","tooltip","loc","popupOptions","offsetLeft","$refs","add","$el","offsetWidth","watch","immediate","handler","loadParentTask","methods","taskService","getById","handleTitleClick","handleEditClick","handleRemoveParentTask","template","ParentTaskChip","Chip","isAutonomous","Boolean","default","icon","SUBTASK","design","isSelected","ChipDesign","ShadowNoAccent","ShadowAccent","OutlineNoAccent","OutlineAccent","true","handleClick","highlightField","fieldHighlighter","setContainer","$root","highlight"],"mappings":"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"}