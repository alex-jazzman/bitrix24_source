{"version":3,"file":"group.bundle.js","sources":["../src/group-meta.js","../src/stage/stage.js","../src/scrum/epic/epic.js","../src/scrum/story-points/story-points.js","../src/scrum/scrum.js","../src/group-popup/group-popup.js","../src/group-dialog.js","../src/group.js","../src/group-chip.js"],"sourcesContent":["import { Loc } from 'main.core';\nimport { Core } from 'tasks.v2.core';\nimport { GroupType, Model, TaskField } from 'tasks.v2.const';\n\nexport const groupMeta = Object.freeze({\n\tid: TaskField.Group,\n\ttitle: Loc.getMessage('TASKS_V2_GROUP_TITLE'),\n\tgetTitle: (groupId: number) => {\n\t\tconst group = Core.getStore().getters[`${Model.Groups}/getById`](groupId);\n\n\t\treturn {\n\t\t\t[GroupType.Collab]: Loc.getMessage('TASKS_V2_GROUP_TITLE_COLLAB'),\n\t\t\t[GroupType.Scrum]: Loc.getMessage('TASKS_V2_GROUP_TITLE_SCRUM'),\n\t\t}[group?.type] ?? Loc.getMessage('TASKS_V2_GROUP_TITLE');\n\t},\n});\n","import { Tag } from 'main.core';\nimport { hint, type HintParams } from 'ui.vue3.directives.hint';\nimport { BMenu, type MenuOptions, type MenuItemOptions } from 'ui.vue3.components.menu';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { CRM, Outline } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.crm';\nimport 'ui.icon-set.outline';\n\nimport { Model } from 'tasks.v2.const';\nimport { Loader } from 'tasks.v2.component.elements.user-custom-tag-selector';\nimport { tooltip } from 'tasks.v2.component.elements.hint';\nimport { Color } from 'tasks.v2.lib.color';\nimport { groupService } from 'tasks.v2.provider.service.group-service';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport type { GroupModel } from 'tasks.v2.model.groups';\nimport type { StageModel } from 'tasks.v2.model.stages';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport './stage.css';\n\n// @vue/component\nexport const Stage = {\n\tcomponents: {\n\t\tBIcon,\n\t\tLoader,\n\t\tBMenu,\n\t},\n\tdirectives: { hint },\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisMenuShown: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\tisEdit(): boolean\n\t\t{\n\t\t\treturn Number.isInteger(this.taskId) && this.taskId > 0;\n\t\t},\n\t\tgroup(): GroupModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Groups}/getById`](this.task.groupId);\n\t\t},\n\t\tgroupId(): number\n\t\t{\n\t\t\treturn this.task.groupId;\n\t\t},\n\t\tstage(): StageModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Stages}/getById`](this.task.stageId) ?? null;\n\t\t},\n\t\tmenuOptions(): Function\n\t\t{\n\t\t\treturn (): MenuOptions => ({\n\t\t\t\tid: 'tasks-field-group-stage-menu',\n\t\t\t\tbindElement: this.$refs.stage,\n\t\t\t\toffsetTop: 8,\n\t\t\t\titems: this.menuItems,\n\t\t\t\tmaxHeight: window.innerHeight / 2,\n\t\t\t\ttargetContainer: document.body,\n\t\t\t});\n\t\t},\n\t\tmenuItems(): MenuItemOptions[]\n\t\t{\n\t\t\tconst stages = this.$store.getters[`${Model.Stages}/getByIds`](this.group.stagesIds ?? []);\n\n\t\t\treturn stages?.map((stage: StageModel): MenuItemOptions => ({\n\t\t\t\ttitle: stage.title,\n\t\t\t\tsvg: this.getStageSvg(new Color(stage.color).limit(250).toRgb()),\n\t\t\t\tisSelected: stage.id === this.stage.id,\n\t\t\t\tonClick: () => this.setStage(stage.id),\n\t\t\t}));\n\t\t},\n\t\tstageColor(): string\n\t\t{\n\t\t\treturn `#${this.stage.color}`;\n\t\t},\n\t\tbackgroundColor(): string\n\t\t{\n\t\t\treturn new Color(this.stage.color).setOpacity(0.1).limit(250).toRgb();\n\t\t},\n\t\tisDarkColor(): boolean\n\t\t{\n\t\t\treturn new Color(this.stage.color).isDark();\n\t\t},\n\t\ttooltip(): Function\n\t\t{\n\t\t\treturn (): HintParams => tooltip({\n\t\t\t\ttext: this.loc('TASKS_V2_GROUP_STAGE_HINT'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\toffsetLeft: this.$refs.stage.offsetWidth / 2,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\treadonly(): boolean\n\t\t{\n\t\t\treturn !this.task.rights.edit;\n\t\t},\n\t},\n\twatch: {\n\t\tgroupId(): void\n\t\t{\n\t\t\tvoid this.loadStagesForCreation();\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tvoid this.loadStagesForCreation();\n\t},\n\tmethods: {\n\t\tgetStageSvg(color: string): SVGElement\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-icon-set --${CRM.STAGE}\" style=\"--ui-icon-set__icon-color: ${color}\"></div>\n\t\t\t`;\n\t\t},\n\t\tasync handleClick(): Promise<void>\n\t\t{\n\t\t\tif (this.readonly)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.group.stagesIds)\n\t\t\t{\n\t\t\t\tawait groupService.getStages(this.groupId);\n\t\t\t}\n\n\t\t\tthis.isMenuShown = true;\n\t\t},\n\t\tsetStage(stageId: number): void\n\t\t{\n\t\t\tvoid taskService.update(\n\t\t\t\tthis.taskId,\n\t\t\t\t{ stageId },\n\t\t\t);\n\t\t},\n\t\tasync loadStagesForCreation(): Promise<void>\n\t\t{\n\t\t\tif (this.isEdit || this.group.stagesIds)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait groupService.getStages(this.groupId);\n\n\t\t\tif (!this.task.stageId)\n\t\t\t{\n\t\t\t\tthis.setStage(this.group.stagesIds[0]);\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tv-if=\"stage\"\n\t\t\tv-hint=\"tooltip\"\n\t\t\tclass=\"tasks-field-group-stage\"\n\t\t\t:class=\"{ '--dark': isDarkColor, '--readonly': readonly }\"\n\t\t\t:style=\"{\n\t\t\t\t'--stage-color': stageColor,\n\t\t\t\t'--stage-background': backgroundColor,\n\t\t\t}\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-field-id=\"'stageId'\"\n\t\t\t:data-task-field-value=\"task.stageId\"\n\t\t\t:data-task-stage-title=\"stage?.title\"\n\t\t\tref=\"stage\"\n\t\t\t@click=\"handleClick\"\n\t\t>\n\t\t\t<div class=\"tasks-field-group-stage-text-container\">\n\t\t\t\t<div class=\"tasks-field-group-stage-text\">{{ stage.title }}</div>\n\t\t\t</div>\n\t\t\t<div class=\"tasks-field-group-stage-arrow\"></div>\n\t\t\t<BIcon v-if=\"!readonly\" :name=\"Outline.CHEVRON_DOWN_S\"/>\n\t\t</div>\n\t\t<div v-else class=\"tasks-field-group-stage-loader\">\n\t\t\t<Loader/>\n\t\t</div>\n\t\t<BMenu v-if=\"isMenuShown\" :options=\"menuOptions()\" @close=\"isMenuShown = false\"/>\n\t`,\n};\n","import { Runtime } from 'main.core';\n\nimport { hint, type HintParams } from 'ui.vue3.directives.hint';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { Outline } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.outline';\n\nimport { tooltip } from 'tasks.v2.component.elements.hint';\nimport { EntitySelectorEntity, Model } from 'tasks.v2.const';\nimport { EntitySelectorDialog } from 'tasks.v2.lib.entity-selector-dialog';\nimport { Color } from 'tasks.v2.lib.color';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport type { EpicModel } from 'tasks.v2.model.epics';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport './epic.css';\n\n// @vue/component\nexport const Epic = {\n\tcomponents: {\n\t\tBIcon,\n\t},\n\tdirectives: { hint },\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\tepic(): ?EpicModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Epics}/getById`](this.task.epicId);\n\t\t},\n\t\tpreselectedEpic(): [string, number][]\n\t\t{\n\t\t\treturn this.epic ? [['epic-selector', this.epic.id]] : [];\n\t\t},\n\t\tepicColor(): string\n\t\t{\n\t\t\tif (!this.epic)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn new Color(this.epic.color).toRgb();\n\t\t},\n\t\tbackgroundColor(): string\n\t\t{\n\t\t\tif (!this.epic)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn new Color(this.epic.color).setOpacity(0.3).limit(250).toRgb();\n\t\t},\n\t\tisDarkColor(): boolean\n\t\t{\n\t\t\tif (!this.epic)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn new Color(this.epic.color).isDark();\n\t\t},\n\t\ttooltip(): Function\n\t\t{\n\t\t\treturn (): HintParams => tooltip({\n\t\t\t\ttext: this.loc('TASKS_V2_GROUP_EPIC_HINT'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\toffsetLeft: this.$el.offsetWidth / 2,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tthis.showDialog();\n\t\t},\n\t\tshowDialog(): void\n\t\t{\n\t\t\tthis.handleEpicSelectedDebounced ??= Runtime.debounce(this.handleEpicSelected, 10, this);\n\n\t\t\tthis.dialog ??= new EntitySelectorDialog({\n\t\t\t\tmultiple: false,\n\t\t\t\tdropdownMode: true,\n\t\t\t\tenableSearch: true,\n\t\t\t\tcompactView: true,\n\t\t\t\thideOnDeselect: true,\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: EntitySelectorEntity.Epic,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tgroupId: this.task.groupId,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdynamicLoad: true,\n\t\t\t\t\t\tdynamicSearch: true,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tpreselectedItems: this.preselectedEpic,\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.handleEpicSelectedDebounced,\n\t\t\t\t\t'Item:onDeselect': this.handleEpicSelectedDebounced,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tthis.dialog.selectItemsByIds(this.preselectedEpic);\n\t\t\tthis.dialog.showTo(this.$el);\n\t\t},\n\t\thandleEpicSelected(): void\n\t\t{\n\t\t\tconst item = this.dialog.getSelectedItems()[0];\n\t\t\tif (item)\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.Epics}/insert`, {\n\t\t\t\t\tid: item.getId(),\n\t\t\t\t\ttitle: item.getTitle(),\n\t\t\t\t\tcolor: item.getAvatarOption('bgColor'),\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvoid taskService.update(\n\t\t\t\tthis.taskId,\n\t\t\t\t{\n\t\t\t\t\tepicId: item?.getId() ?? 0,\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tv-hint=\"tooltip\"\n\t\t\tclass=\"tasks-field-group-scrum-epic\"\n\t\t\t:class=\"{ '--dark': isDarkColor, '--filled': epic }\"\n\t\t\t:style=\"{\n\t\t\t\t'--epic-color': epicColor,\n\t\t\t\t'--epic-background': backgroundColor,\n\t\t\t}\"\n\t\t\t@click=\"handleClick\"\n\t\t>\n\t\t\t<span class=\"tasks-field-group-scrum-epic-title\">\n\t\t\t\t{{ epic?.title || loc('TASKS_V2_GROUP_EPIC_EMPTY') }}\n\t\t\t</span>\n\t\t\t<BIcon :name=\"Outline.CHEVRON_DOWN_S\"/>\n\t\t</div>\n\t`,\n};\n","import { hint, type HintParams } from 'ui.vue3.directives.hint';\n\nimport { tooltip } from 'tasks.v2.component.elements.hint';\nimport { Model } from 'tasks.v2.const';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport './story-points.css';\n\n// @vue/component\nexport const StoryPoints = {\n\tdirectives: { hint },\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisFocused: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\tstoryPoints(): string\n\t\t{\n\t\t\treturn this.task.storyPoints?.trim();\n\t\t},\n\t\ttooltip(): Function\n\t\t{\n\t\t\treturn (): HintParams => tooltip({\n\t\t\t\ttext: this.loc('TASKS_V2_GROUP_STORY_POINTS_HINT'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\toffsetLeft: this.$refs.storyPoints.offsetWidth / 2,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t},\n\tmethods: {\n\t\tasync handleClick(): Promise<void>\n\t\t{\n\t\t\tthis.isFocused = true;\n\n\t\t\tawait this.$nextTick();\n\n\t\t\tthis.$refs.input.focus();\n\t\t},\n\t\thandleBlur(): void\n\t\t{\n\t\t\tthis.isFocused = false;\n\n\t\t\tvoid taskService.update(\n\t\t\t\tthis.taskId,\n\t\t\t\t{\n\t\t\t\t\tstoryPoints: this.$refs.input.value.trim(),\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<input\n\t\t\tv-if=\"isFocused\"\n\t\t\tclass=\"tasks-field-group-scrum-story-points-input\"\n\t\t\t:value=\"storyPoints\"\n\t\t\tref=\"input\"\n\t\t\t@blur=\"handleBlur\"\n\t\t/>\n\t\t<div\n\t\t\tv-else\n\t\t\tv-hint=\"tooltip\"\n\t\t\tclass=\"tasks-field-group-scrum-story-points\"\n\t\t\t:class=\"{ '--filled': storyPoints }\"\n\t\t\tref=\"storyPoints\"\n\t\t\t@click=\"handleClick\"\n\t\t>\n\t\t\t{{ storyPoints || '-' }}\n\t\t</div>\n\t`,\n};\n","import { Loader } from 'tasks.v2.component.elements.user-custom-tag-selector';\nimport { groupService } from 'tasks.v2.provider.service.group-service';\n\nimport { Epic } from './epic/epic';\nimport { StoryPoints } from './story-points/story-points';\nimport './scrum.css';\n\n// @vue/component\nexport const Scrum = {\n\tcomponents: {\n\t\tEpic,\n\t\tStoryPoints,\n\t\tLoader,\n\t},\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\thasScrumInfo: groupService.hasScrumInfo(this.taskId),\n\t\t};\n\t},\n\tasync mounted(): Promise<void>\n\t{\n\t\tawait groupService.getScrumInfo(this.taskId);\n\n\t\tthis.hasScrumInfo = groupService.hasScrumInfo(this.taskId);\n\t},\n\ttemplate: `\n\t\t<div v-if=\"hasScrumInfo\" class=\"tasks-field-group-scrum\">\n\t\t\t<Epic :taskId=\"taskId\"/>\n\t\t\t<StoryPoints :taskId=\"taskId\"/>\n\t\t</div>\n\t\t<div v-else class=\"tasks-field-group-scrum-loader\">\n\t\t\t<Loader/>\n\t\t</div>\n\t`,\n};\n","import { Event, Loc } from 'main.core';\nimport type { PopupOptions } from 'main.popup';\n\nimport { Popup } from 'ui.vue3.components.popup';\nimport { Button as UiButton, AirButtonStyle, ButtonSize } from 'ui.vue3.components.button';\n\nimport { GroupType, Model } from 'tasks.v2.const';\nimport { openGroup } from 'tasks.v2.lib.open-group';\nimport { groupService } from 'tasks.v2.provider.service.group-service';\nimport { userService } from 'tasks.v2.provider.service.user-service';\nimport type { GroupModel } from 'tasks.v2.model.groups';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\nimport './group-popup.css';\n\nexport const GroupPopup = {\n\tcomponents: {\n\t\tPopup,\n\t\tUiButton,\n\t},\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tgetBindElement: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['close'],\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tAirButtonStyle,\n\t\t\tButtonSize,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisPopupShown: false,\n\t\t\t/** @type GroupInfo */\n\t\t\tgroupInfo: {},\n\t\t};\n\t},\n\tcomputed: {\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\tgroup(): ?GroupModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Groups}/getById`](this.task.groupId);\n\t\t},\n\t\tbindElement(): HTMLElement\n\t\t{\n\t\t\treturn this.getBindElement();\n\t\t},\n\t\tpopupId(): string\n\t\t{\n\t\t\treturn 'tasks-field-group-popup';\n\t\t},\n\t\tpopupOptions(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\tpadding: 24,\n\t\t\t\tminWidth: 260,\n\t\t\t\tmaxWidth: 400,\n\t\t\t\toffsetTop: 8,\n\t\t\t\ttargetContainer: document.body,\n\t\t\t};\n\t\t},\n\t\tgroupOwnerUrl(): string\n\t\t{\n\t\t\treturn userService.getUrl(this.groupInfo.ownerId);\n\t\t},\n\t\tgroupMembersCountFormatted(): string\n\t\t{\n\t\t\treturn Loc.getMessagePlural('TASKS_V2_GROUP_COUNT_MEMBERS', this.groupInfo.numberOfMembers, {\n\t\t\t\t'#COUNT#': this.groupInfo.numberOfMembers,\n\t\t\t});\n\t\t},\n\t\tgroupAboutFormatted(): string\n\t\t{\n\t\t\treturn {\n\t\t\t\t[GroupType.Collab]: this.loc('TASKS_V2_GROUP_ABOUT_COLLAB'),\n\t\t\t\t[GroupType.Scrum]: this.loc('TASKS_V2_GROUP_ABOUT_SCRUM'),\n\t\t\t}[this.group?.type] ?? this.loc('TASKS_V2_GROUP_ABOUT');\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tEvent.bind(this.bindElement, 'click', this.handleClick);\n\t\tEvent.bind(this.bindElement, 'mouseenter', this.handleMouseEnter);\n\t\tEvent.bind(this.bindElement, 'mouseleave', this.handleMouseLeave);\n\t},\n\tmethods: {\n\t\topenGroup(): void\n\t\t{\n\t\t\tvoid openGroup(this.group.id, this.group.type);\n\t\t},\n\t\thandleClick(): void\n\t\t{\n\t\t\tthis.clearTimeouts();\n\t\t},\n\t\thandleMouseEnter(): void\n\t\t{\n\t\t\tif (!this.group)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.groupInfoPromise = groupService.getGroupInfo(this.group.id);\n\n\t\t\tthis.clearTimeouts();\n\t\t\tthis.showTimeout = setTimeout(() => this.showPopup(), 400);\n\t\t},\n\t\thandleMouseLeave(): void\n\t\t{\n\t\t\tEvent.unbind(document, 'mouseover', this.updateHoverElement);\n\t\t\tEvent.bind(document, 'mouseover', this.updateHoverElement);\n\n\t\t\tthis.clearTimeouts();\n\t\t\tthis.closeTimeout = setTimeout(() => {\n\t\t\t\tif (!this.$refs.container?.contains(this.hoverElement) && !this.bindElement.contains(this.hoverElement))\n\t\t\t\t{\n\t\t\t\t\tthis.closePopup();\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t},\n\t\tupdateHoverElement(event: MouseEvent): void\n\t\t{\n\t\t\tthis.hoverElement = event.target;\n\t\t},\n\t\tasync showPopup(): Promise<void>\n\t\t{\n\t\t\tif (this.groupInfoPromise)\n\t\t\t{\n\t\t\t\tthis.groupInfo = await this.groupInfoPromise;\n\t\t\t}\n\n\t\t\tif (!this.group)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.clearTimeouts();\n\t\t\tthis.isPopupShown = true;\n\t\t\tawait this.$nextTick();\n\t\t\tthis.$refs.popup.adjustPosition();\n\t\t},\n\t\tclosePopup(): void\n\t\t{\n\t\t\tthis.clearTimeouts();\n\t\t\tthis.isPopupShown = false;\n\t\t\tEvent.unbind(this.$refs.container, 'mouseleave', this.handleMouseLeave);\n\t\t\tEvent.unbind(document, 'mouseover', this.updateHoverElement);\n\t\t},\n\t\tclearTimeouts(): void\n\t\t{\n\t\t\tclearTimeout(this.closeTimeout);\n\t\t\tclearTimeout(this.showTimeout);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Popup\n\t\t\tv-if=\"isPopupShown\"\n\t\t\t:id=\"popupId\"\n\t\t\t:options=\"popupOptions\"\n\t\t\tref=\"popup\"\n\t\t\t@close=\"closePopup\"\n\t\t>\n\t\t\t<div class=\"tasks-field-group-popup\" ref=\"container\">\n\t\t\t\t<div class=\"tasks-field-group-popup-header\">\n\t\t\t\t\t<img class=\"tasks-field-group-popup-image\" :src=\"group?.image\" :alt=\"group?.name\">\n\t\t\t\t\t<div class=\"tasks-field-group-popup-title-container\">\n\t\t\t\t\t\t<div class=\"tasks-field-group-popup-title\" :title=\"group?.name\">{{ group?.name }}</div>\n\t\t\t\t\t\t<div class=\"tasks-field-group-popup-subtitle\">{{ groupMembersCountFormatted }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-field-group-popup-button\">\n\t\t\t\t\t<UiButton\n\t\t\t\t\t\t:text=\"groupAboutFormatted\"\n\t\t\t\t\t\t:style=\"AirButtonStyle.OUTLINE_ACCENT_2\"\n\t\t\t\t\t\t:size=\"ButtonSize.SMALL\"\n\t\t\t\t\t\t:wide=\"true\"\n\t\t\t\t\t\t@click=\"openGroup\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-field-group-popup-info\">\n\t\t\t\t\t<div class=\"tasks-field-group-popup-field\">\n\t\t\t\t\t\t<div class=\"tasks-field-group-popup-field-title\">{{ loc('TASKS_V2_GROUP_OWNER') }}</div>\n\t\t\t\t\t\t<div class=\"tasks-field-group-popup-field-value\">\n\t\t\t\t\t\t\t<a :href=\"groupOwnerUrl\">{{ groupInfo.ownerName }}</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-field-group-popup-field\">\n\t\t\t\t\t\t<div class=\"tasks-field-group-popup-field-title\">{{ loc('TASKS_V2_GROUP_DATE_CREATE') }}</div>\n\t\t\t\t\t\t<div class=\"tasks-field-group-popup-field-value\">{{ groupInfo.dateCreate }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-field-group-popup-field\">\n\t\t\t\t\t\t<div class=\"tasks-field-group-popup-field-title\">{{ loc('TASKS_V2_GROUP_SUBJECT') }}</div>\n\t\t\t\t\t\t<div class=\"tasks-field-group-popup-field-value\">{{ groupInfo.subjectTitle }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n","import { Runtime } from 'main.core';\nimport type { Item } from 'ui.entity-selector';\n\nimport { EntitySelectorDialog, type ItemId } from 'tasks.v2.lib.entity-selector-dialog';\nimport { Core } from 'tasks.v2.core';\nimport { EntitySelectorEntity, Model } from 'tasks.v2.const';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\nimport type { GroupModel } from 'tasks.v2.model.groups';\n\nclass GroupDialog\n{\n\t#taskId: number | string;\n\t#dialog: EntitySelectorDialog;\n\t#onUpdateOnce: Function | null = null;\n\t#onUpdate: Function | null = null;\n\t#onHide: Function | null = null;\n\n\tsetTaskId(taskId: number | string): GroupDialog\n\t{\n\t\tthis.#taskId = taskId;\n\n\t\treturn this;\n\t}\n\n\tinit(): void\n\t{\n\t\tthis.#dialog ??= this.#createDialog();\n\t}\n\n\tshowTo(targetNode: HTMLElement): void\n\t{\n\t\tthis.init();\n\t\tthis.#dialog.selectItemsByIds(this.#items);\n\t\tthis.#dialog.showTo(targetNode);\n\t}\n\n\tonUpdateOnce(callback: Function): void\n\t{\n\t\tthis.#onUpdateOnce = callback;\n\t}\n\n\tonUpdate(callback: Function): void\n\t{\n\t\tthis.#onUpdate = callback;\n\t}\n\n\tonHide(callback: Function): void\n\t{\n\t\tthis.#onHide = callback;\n\t}\n\n\t#createDialog(): EntitySelectorDialog\n\t{\n\t\tconst handleItemChangeDebounced = Runtime.debounce(this.#handleItemChange, 10, this);\n\n\t\treturn new EntitySelectorDialog({\n\t\t\tcontext: 'tasks-card',\n\t\t\tmultiple: false,\n\t\t\thideOnDeselect: true,\n\t\t\tenableSearch: true,\n\t\t\tentities: [\n\t\t\t\t{\n\t\t\t\t\tid: EntitySelectorEntity.Project,\n\t\t\t\t},\n\t\t\t],\n\t\t\tpreselectedItems: this.#items,\n\t\t\tevents: {\n\t\t\t\t'Item:onSelect': handleItemChangeDebounced,\n\t\t\t\t'Item:onDeselect': handleItemChangeDebounced,\n\t\t\t\tonHide: this.#handleHide,\n\t\t\t\tonDestroy: this.#clearOnUpdateOnce,\n\t\t\t\tonLoad: this.#insertSelectedGroup,\n\t\t\t},\n\t\t});\n\t}\n\n\t#handleHide = (): void => {\n\t\tthis.#onHide?.();\n\t\tthis.#clearOnUpdateOnce();\n\t};\n\n\tasync #handleItemChange(): Promise<void>\n\t{\n\t\tconst item = await this.#insertSelectedGroup();\n\t\tthis.#updateGroup(item?.getId());\n\t}\n\n\t#insertSelectedGroup = async (): Promise<?Item> => {\n\t\tconst item = this.#dialog.getSelectedItems()[0];\n\t\tif (!item)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tawait this.#insertGroup({\n\t\t\tid: item.getId(),\n\t\t\tname: item.getTitle(),\n\t\t\timage: item.getAvatar(),\n\t\t\ttype: item.getEntityType(),\n\t\t});\n\n\t\treturn item;\n\t};\n\n\tget #items(): ItemId[]\n\t{\n\t\treturn [[EntitySelectorEntity.Project, this.#task.groupId]];\n\t}\n\n\tget #task(): TaskModel\n\t{\n\t\treturn Core.getStore().getters[`${Model.Tasks}/getById`](this.#taskId);\n\t}\n\n\t#insertGroup(group: GroupModel): Promise<void>\n\t{\n\t\treturn Core.getStore().dispatch(`${Model.Groups}/insert`, group);\n\t}\n\n\t#updateGroup(groupId: number): void\n\t{\n\t\tvoid taskService.update(\n\t\t\tthis.#taskId,\n\t\t\t{\n\t\t\t\tgroupId,\n\t\t\t\tstageId: 0,\n\t\t\t},\n\t\t);\n\n\t\tthis.#onUpdate?.();\n\t\tthis.#onUpdateOnce?.();\n\t\tthis.#clearOnUpdateOnce();\n\t}\n\n\t#clearOnUpdateOnce = (): void => {\n\t\tthis.#onUpdateOnce = null;\n\t};\n}\n\nexport const groupDialog = new GroupDialog();\n","import { BMenu, MenuItemDesign, type MenuOptions } from 'ui.vue3.components.menu';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { Outline } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.outline';\n\nimport { GroupType, Model } from 'tasks.v2.const';\nimport { Hint } from 'tasks.v2.component.elements.hint';\nimport { HoverPill } from 'tasks.v2.component.elements.hover-pill';\nimport { FieldAdd } from 'tasks.v2.component.elements.field-add';\nimport { heightTransition } from 'tasks.v2.lib.height-transition';\nimport { openGroup } from 'tasks.v2.lib.open-group';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport type { GroupModel } from 'tasks.v2.model.groups';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport { groupMeta } from './group-meta';\nimport { Stage } from './stage/stage';\nimport { Scrum } from './scrum/scrum';\nimport { GroupPopup } from './group-popup/group-popup';\nimport { groupDialog } from './group-dialog';\nimport './group.css';\n\n// @vue/component\nexport const Group = {\n\tcomponents: {\n\t\tBIcon,\n\t\tBMenu,\n\t\tStage,\n\t\tScrum,\n\t\tHint,\n\t\tHoverPill,\n\t\tFieldAdd,\n\t\tGroupPopup,\n\t},\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tgroupMeta,\n\t\t\tOutline,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisMenuShown: false,\n\t\t\tisHintShown: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\tisEdit(): boolean\n\t\t{\n\t\t\treturn Number.isInteger(this.taskId) && this.taskId > 0;\n\t\t},\n\t\tgroup(): GroupModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Groups}/getById`](this.task.groupId);\n\t\t},\n\t\tisScrum(): boolean\n\t\t{\n\t\t\treturn this.group?.type === GroupType.Scrum;\n\t\t},\n\t\tmenuOptions(): MenuOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: 'tasks-field-group-menu',\n\t\t\t\tbindElement: this.$refs.group,\n\t\t\t\toffsetTop: 8,\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: this.getAboutItemTitle(),\n\t\t\t\t\t\ticon: Outline.FOLDER,\n\t\t\t\t\t\tonClick: this.openGroup,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: this.loc('TASKS_V2_GROUP_CHANGE'),\n\t\t\t\t\t\ticon: Outline.EDIT_L,\n\t\t\t\t\t\tonClick: this.showDialog,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdesign: MenuItemDesign.Alert,\n\t\t\t\t\t\ttitle: this.loc('TASKS_V2_GROUP_CLEAR'),\n\t\t\t\t\t\ticon: Outline.CROSS_L,\n\t\t\t\t\t\tonClick: this.clearField,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\ttargetContainer: document.body,\n\t\t\t};\n\t\t},\n\t\tgroupName(): string\n\t\t{\n\t\t\treturn this.group?.name ?? this.loc('TASKS_V2_GROUP_HIDDEN');\n\t\t},\n\t\tgroupImage(): string\n\t\t{\n\t\t\treturn encodeURI(this.group?.image);\n\t\t},\n\t\thintText(): string\n\t\t{\n\t\t\treturn this.loc('TASKS_V2_GROUP_CANT_CHANGE_FLOW');\n\t\t},\n\t\tisSecret(): boolean\n\t\t{\n\t\t\treturn Boolean(this.task.groupId) && !this.group;\n\t\t},\n\t\thasFlow(): boolean\n\t\t{\n\t\t\treturn this.task.flowId > 0;\n\t\t},\n\t\treadonly(): boolean\n\t\t{\n\t\t\treturn !this.task.rights.edit || this.hasFlow;\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\theightTransition.animate(this.$refs.container);\n\t},\n\tupdated(): void\n\t{\n\t\theightTransition.animate(this.$refs.container);\n\t},\n\tmethods: {\n\t\tgetAboutItemTitle(): string\n\t\t{\n\t\t\treturn {\n\t\t\t\t[GroupType.Collab]: this.loc('TASKS_V2_GROUP_ABOUT_COLLAB'),\n\t\t\t\t[GroupType.Scrum]: this.loc('TASKS_V2_GROUP_ABOUT_SCRUM'),\n\t\t\t}[this.group?.type] ?? this.loc('TASKS_V2_GROUP_ABOUT');\n\t\t},\n\t\thandleClick(): void\n\t\t{\n\t\t\tif (!this.isEdit && this.hasFlow)\n\t\t\t{\n\t\t\t\tthis.isHintShown = true;\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.readonly)\n\t\t\t{\n\t\t\t\tif (!this.isSecret)\n\t\t\t\t{\n\t\t\t\t\tvoid this.openGroup();\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.isEdit && this.group)\n\t\t\t{\n\t\t\t\tthis.showMenu();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.showDialog();\n\t\t\t}\n\t\t},\n\t\tshowMenu(): void\n\t\t{\n\t\t\tthis.isMenuShown = true;\n\t\t},\n\t\topenGroup(): void\n\t\t{\n\t\t\tvoid openGroup(this.group.id, this.group.type);\n\t\t},\n\t\tshowDialog(): void\n\t\t{\n\t\t\tgroupDialog.setTaskId(this.taskId).showTo(this.$refs.group);\n\t\t},\n\t\tclearField(): void\n\t\t{\n\t\t\tvoid taskService.update(\n\t\t\t\tthis.taskId,\n\t\t\t\t{\n\t\t\t\t\tgroupId: 0,\n\t\t\t\t\tstageId: 0,\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-field-id=\"groupMeta.id\"\n\t\t\t:data-task-field-value=\"task.groupId\"\n\t\t\tref=\"container\"\n\t\t>\n\t\t\t<div class=\"tasks-field-group-group\" :class=\"{ '--secret': isSecret }\" ref=\"group\" @click=\"handleClick\">\n\t\t\t\t<HoverPill\n\t\t\t\t\tv-if=\"task.groupId\"\n\t\t\t\t\t:withClear=\"!readonly && !isEdit && (task.flowId ?? 0) <= 0\"\n\t\t\t\t\t@clear=\"clearField\"\n\t\t\t\t>\n\t\t\t\t\t<img v-if=\"groupImage\" class=\"tasks-field-group-image\" :src=\"groupImage\" :alt=\"groupName\"/>\n\t\t\t\t\t<BIcon v-else class=\"tasks-field-group-icon\" :name=\"Outline.FOLDER\"/>\n\t\t\t\t\t<div class=\"tasks-field-group-title\">{{ groupName }}</div>\n\t\t\t\t</HoverPill>\n\t\t\t\t<FieldAdd v-else :icon=\"Outline.FOLDER_PLUS\"/>\n\t\t\t</div>\n\t\t\t<Stage v-if=\"isEdit && group && !task.flowId\" :taskId=\"taskId\"/>\n\t\t\t<Scrum v-if=\"isScrum && !task.flowId\" :taskId=\"taskId\"/>\n\t\t</div>\n\t\t<Hint\n\t\t\tv-if=\"isHintShown\"\n\t\t\t:bindElement=\"$refs.container\"\n\t\t\t@close=\"isHintShown = false\"\n\t\t>\n\t\t\t{{ hintText }}\n\t\t</Hint>\n\t\t<BMenu v-if=\"isMenuShown\" :options=\"menuOptions\" @close=\"isMenuShown = false\"/>\n\t\t<GroupPopup :taskId=\"taskId\" :getBindElement=\"() => $refs.group\"/>\n\t`,\n};\n","import { Runtime } from 'main.core';\nimport { Outline } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.outline';\n\nimport { Core } from 'tasks.v2.core';\nimport { Model } from 'tasks.v2.const';\nimport { Chip, ChipDesign, type ChipImage } from 'tasks.v2.component.elements.chip';\nimport { Hint } from 'tasks.v2.component.elements.hint';\nimport { fieldHighlighter } from 'tasks.v2.lib.field-highlighter';\nimport { analytics } from 'tasks.v2.lib.analytics';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport type { GroupModel } from 'tasks.v2.model.groups';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport { groupMeta } from './group-meta';\nimport { groupDialog } from './group-dialog';\nimport { GroupPopup } from './group-popup/group-popup';\n\n// @vue/component\nexport const GroupChip = {\n\tcomponents: {\n\t\tChip,\n\t\tHint,\n\t\tGroupPopup,\n\t},\n\tinject: ['analytics', 'cardType'],\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tisAutonomous: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tgroupMeta,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tdoShowHint: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\tgroup(): ?GroupModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Groups}/getById`](this.task.groupId);\n\t\t},\n\t\tdesign(): string\n\t\t{\n\t\t\treturn {\n\t\t\t\t[!this.isAutonomous && !this.isSelected]: ChipDesign.ShadowNoAccent,\n\t\t\t\t[!this.isAutonomous && this.isSelected]: ChipDesign.ShadowAccent,\n\t\t\t\t[this.isAutonomous && !this.isSelected]: ChipDesign.OutlineNoAccent,\n\t\t\t\t[this.isAutonomous && this.isSelected]: ChipDesign.OutlineAccent,\n\t\t\t}.true;\n\t\t},\n\t\tisSelected(): boolean\n\t\t{\n\t\t\tif (this.isAutonomous)\n\t\t\t{\n\t\t\t\treturn this.task.groupId > 0;\n\t\t\t}\n\n\t\t\treturn this.$store.getters[`${Model.Tasks}/wasFieldFilled`](this.taskId, groupMeta.id);\n\t\t},\n\t\tisFilled(): boolean\n\t\t{\n\t\t\treturn Boolean(this.isAutonomous && this.group);\n\t\t},\n\t\tisFlowFilled(): boolean\n\t\t{\n\t\t\treturn this.task.flowId > 0;\n\t\t},\n\t\ttext(): string\n\t\t{\n\t\t\tif (this.isFilled)\n\t\t\t{\n\t\t\t\treturn this.group?.name ?? this.loc('TASKS_V2_GROUP_HIDDEN');\n\t\t\t}\n\n\t\t\treturn this.loc('TASKS_V2_GROUP_TITLE_CHIP');\n\t\t},\n\t\ticon(): ?string\n\t\t{\n\t\t\tif (this.isFilled)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn Outline.FOLDER;\n\t\t},\n\t\timage(): ?ChipImage\n\t\t{\n\t\t\tif (!this.isFilled)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tsrc: encodeURI(this.group?.image),\n\t\t\t\talt: this.group?.name,\n\t\t\t};\n\t\t},\n\t\tcanChange(): boolean\n\t\t{\n\t\t\treturn (this.task.flowId ?? 0) <= 0;\n\t\t},\n\t\thintText(): boolean\n\t\t{\n\t\t\treturn this.loc('TASKS_V2_GROUP_CANT_CHANGE_FLOW');\n\t\t},\n\t\treadonly(): boolean\n\t\t{\n\t\t\treturn !this.task.rights.edit;\n\t\t},\n\t\tisLocked(): boolean\n\t\t{\n\t\t\treturn !Core.getParams().limits.project;\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tgroupDialog.setTaskId(this.taskId).init();\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tif (this.isLocked)\n\t\t\t{\n\t\t\t\tvoid Runtime.loadExtension('tasks.limit').then((exports) => {\n\t\t\t\t\tconst { Limit } = exports;\n\t\t\t\t\tLimit.showInstance({\n\t\t\t\t\t\tfeatureId: Core.getParams().limits.projectFeatureId,\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.isAutonomous && this.isSelected)\n\t\t\t{\n\t\t\t\tthis.highlightField();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.isFlowFilled)\n\t\t\t{\n\t\t\t\tthis.doShowHint = true;\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tgroupDialog.setTaskId(this.taskId).showTo(this.$refs.chip.$el);\n\n\t\t\tif (!this.isAutonomous)\n\t\t\t{\n\t\t\t\tgroupDialog.onUpdateOnce(this.highlightField);\n\t\t\t}\n\n\t\t\tgroupDialog.onHide(this.handleFieldClose);\n\t\t\tgroupDialog.onUpdate(this.handleUpdate);\n\t\t},\n\t\thighlightField(): void\n\t\t{\n\t\t\tvoid fieldHighlighter.setContainer(this.$root.$el).highlight(groupMeta.id);\n\t\t},\n\t\thandleClear(): void\n\t\t{\n\t\t\tvoid taskService.update(\n\t\t\t\tthis.taskId,\n\t\t\t\t{\n\t\t\t\t\tgroupId: 0,\n\t\t\t\t\tstageId: 0,\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\thandleFieldClose(): void\n\t\t{\n\t\t\tif (this.isAutonomous)\n\t\t\t{\n\t\t\t\tthis.$refs.chip?.$el.focus();\n\t\t\t}\n\t\t},\n\t\thandleUpdate(): void\n\t\t{\n\t\t\tanalytics.sendAddProject(this.analytics, {\n\t\t\t\tcardType: this.cardType,\n\t\t\t\tviewersCount: this.task.auditorsIds.length,\n\t\t\t\tcoexecutorsCount: this.task.accomplicesIds.length,\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Chip\n\t\t\tv-if=\"isSelected || !readonly\"\n\t\t\t:design=\"design\"\n\t\t\t:icon=\"icon\"\n\t\t\t:image=\"image\"\n\t\t\t:text=\"text\"\n\t\t\t:withClear=\"isFilled && !isFlowFilled\"\n\t\t\t:lock=\"isLocked\"\n\t\t\t:trimmable=\"isFilled\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-chip-id=\"groupMeta.id\"\n\t\t\t:data-task-chip-value=\"task.groupId\"\n\t\t\tref=\"chip\"\n\t\t\t@click=\"handleClick\"\n\t\t\t@clear=\"handleClear\"\n\t\t/>\n\t\t<Hint\n\t\t\tv-if=\"doShowHint\"\n\t\t\t:bindElement=\"$refs.chip.$el\"\n\t\t\t@close=\"doShowHint = false\"\n\t\t>\n\t\t\t{{ hintText }}\n\t\t</Hint>\n\t\t<GroupPopup v-if=\"isAutonomous\" :taskId=\"taskId\" :getBindElement=\"() => $refs.chip.$el\"/>\n\t`,\n};\n"],"names":["groupMeta","Object","freeze","id","TaskField","Group","title","Loc","getMessage","getTitle","groupId","group","Core","getStore","getters","Model","Groups","GroupType","Collab","Scrum","type","Stage","components","BIcon","Loader","BMenu","directives","hint","props","taskId","Number","String","required","setup","Outline","data","isMenuShown","computed","task","$store","Tasks","isEdit","isInteger","stage","Stages","stageId","menuOptions","bindElement","$refs","offsetTop","items","menuItems","maxHeight","window","innerHeight","targetContainer","document","body","stages","stagesIds","map","svg","getStageSvg","Color","color","limit","toRgb","isSelected","onClick","setStage","stageColor","backgroundColor","setOpacity","isDarkColor","isDark","tooltip","text","loc","popupOptions","offsetLeft","offsetWidth","readonly","rights","edit","watch","loadStagesForCreation","created","methods","Tag","render","CRM","STAGE","handleClick","groupService","getStages","taskService","update","template","Epic","epic","Epics","epicId","preselectedEpic","epicColor","$el","showDialog","handleEpicSelectedDebounced","Runtime","debounce","handleEpicSelected","dialog","EntitySelectorDialog","multiple","dropdownMode","enableSearch","compactView","hideOnDeselect","entities","EntitySelectorEntity","options","dynamicLoad","dynamicSearch","preselectedItems","events","selectItemsByIds","showTo","item","getSelectedItems","dispatch","getId","getAvatarOption","StoryPoints","isFocused","storyPoints","trim","$nextTick","input","focus","handleBlur","value","hasScrumInfo","mounted","getScrumInfo","GroupPopup","Popup","UiButton","getBindElement","Function","emits","AirButtonStyle","ButtonSize","isPopupShown","groupInfo","popupId","padding","minWidth","maxWidth","groupOwnerUrl","userService","getUrl","ownerId","groupMembersCountFormatted","getMessagePlural","numberOfMembers","groupAboutFormatted","Event","bind","handleMouseEnter","handleMouseLeave","openGroup","clearTimeouts","groupInfoPromise","getGroupInfo","showTimeout","setTimeout","showPopup","unbind","updateHoverElement","closeTimeout","container","contains","hoverElement","closePopup","event","target","popup","adjustPosition","clearTimeout","GroupDialog","name","image","getAvatar","getEntityType","setTaskId","init","targetNode","onUpdateOnce","callback","onUpdate","onHide","handleItemChangeDebounced","context","Project","onDestroy","onLoad","groupDialog","Hint","HoverPill","FieldAdd","isHintShown","isScrum","getAboutItemTitle","icon","FOLDER","EDIT_L","design","MenuItemDesign","Alert","CROSS_L","clearField","groupName","groupImage","encodeURI","hintText","isSecret","Boolean","hasFlow","flowId","heightTransition","animate","updated","showMenu","GroupChip","Chip","inject","isAutonomous","default","doShowHint","ChipDesign","ShadowNoAccent","ShadowAccent","OutlineNoAccent","OutlineAccent","true","isFilled","isFlowFilled","src","alt","canChange","isLocked","getParams","limits","project","loadExtension","then","exports","Limit","showInstance","featureId","projectFeatureId","highlightField","chip","handleFieldClose","handleUpdate","fieldHighlighter","setContainer","$root","highlight","handleClear","analytics","sendAddProject","cardType","viewersCount","auditorsIds","length","coexecutorsCount","accomplicesIds"],"mappings":"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"}