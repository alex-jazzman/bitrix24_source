{"version":3,"file":"tab-manager.bundle.js","sources":["../src/lazy-loader.js","../src/tab.js","../src/tab-manager.js"],"sourcesContent":["import { Text, Type } from \"main.core\";\r\n\r\nexport default class LazyLoader {\r\n    constructor(id, settings) {\r\n        this.id = Type.isStringFilled(id) ? id : Text.getRandom();\r\n        this.settings = Type.isObjectLike(settings) ? settings : {};\r\n\r\n        this.container = this.settings.container;\r\n        if (!this.container) {\r\n            throw \"Error: Could not find container.\";\r\n        }\r\n\r\n        this.serviceUrl = this.settings.serviceUrl || \"\";\r\n        if (!Type.isStringFilled(this.serviceUrl)) {\r\n            throw \"Error. Could not find service url.\";\r\n        }\r\n\r\n        this.tabId = this.settings.tabId || \"\";\r\n        if (!Type.isStringFilled(this.tabId)) {\r\n            throw \"Error: Could not find tab id.\";\r\n        }\r\n\r\n        this.params = Type.isObjectLike(this.settings.componentData) ? this.settings.componentData : {};\r\n\r\n        this.isRequestRunning = false;\r\n        this.loaded = false;\r\n    }\r\n\r\n    isLoaded() {\r\n        return this.loaded;\r\n    }\r\n\r\n    load() {\r\n        if (!this.isLoaded()) {\r\n            this.startRequest({ ...this.params, ...{ TABID: this.tabId } });\r\n        }\r\n    }\r\n\r\n    startRequest(params) {\r\n        if (this.isRequestRunning) {\r\n            return false;\r\n        }\r\n\r\n        this.isRequestRunning = true;\r\n\r\n        BX.ajax({\r\n            url: this.serviceUrl,\r\n            method: \"POST\",\r\n            dataType: \"html\",\r\n            data: {\r\n                LOADERID: this.id,\r\n                PARAMS: params,\r\n            },\r\n            onsuccess: this.onRequestSuccess.bind(this),\r\n            onfailure: this.onRequestFailure.bind(this),\r\n        });\r\n\r\n        return true;\r\n    }\r\n\r\n    onRequestSuccess(data) {\r\n        this.isRequestRunning = false;\r\n        this.container.innerHTML = data;\r\n        this.loaded = true;\r\n    }\r\n\r\n    onRequestFailure() {\r\n        this.isRequestRunning = false;\r\n        this.loaded = true;\r\n    }\r\n}\r\n","import { Dom, Event, Text, Type } from \"main.core\";\r\nimport LazyLoader from \"./lazy-loader\";\r\n\r\nexport default class Tab {\r\n    constructor(id, settings) {\r\n        this.id = Type.isStringFilled(id) ? id : Text.getRandom();\r\n        this.settings = Type.isObjectLike(settings) ? settings : {};\r\n        this.data = Type.isObjectLike(this.settings.data) ? this.settings.data : {};\r\n\r\n        this.manager = settings.manager || null;\r\n\r\n        this.container = this.settings.container;\r\n        this.menuContainer = this.settings.menuContainer;\r\n\r\n        this.active = Type.isBoolean(this.data.active) ? this.data.active : false;\r\n        this.enabled = Type.isBoolean(this.data.enabled) ? this.data.enabled : true;\r\n\r\n        Event.bind(this.menuContainer.querySelector(\"a.catalog-entity-section-tab-link\"), \"click\", this.onMenuClick.bind(this));\r\n\r\n        this.loader = null;\r\n\r\n        if (Type.isObjectLike(this.data.loader)) {\r\n            this.loader = new LazyLoader(this.id, {\r\n                ...this.data.loader,\r\n                ...{\r\n                    tabId: this.id,\r\n                    container: this.container,\r\n                },\r\n            });\r\n        }\r\n    }\r\n\r\n    getId() {\r\n        return this.id;\r\n    }\r\n\r\n    isEnabled() {\r\n        return this.enabled;\r\n    }\r\n\r\n    isActive() {\r\n        return this.active;\r\n    }\r\n\r\n    setActive(active) {\r\n        active = !!active;\r\n\r\n        if (this.isActive() === active) {\r\n            return;\r\n        }\r\n\r\n        this.active = active;\r\n\r\n        if (this.isActive()) {\r\n            this.showTab();\r\n        } else {\r\n            this.hideTab();\r\n        }\r\n    }\r\n\r\n    showTab() {\r\n        Dom.addClass(this.container, \"catalog-entity-section-tab-content-show\");\r\n        Dom.removeClass(this.container, \"catalog-entity-section-tab-content-hide\");\r\n        Dom.addClass(this.menuContainer, \"catalog-entity-section-tab-current\");\r\n\r\n        this.container.style.display = \"\";\r\n        this.container.style.position = \"absolute\";\r\n        this.container.style.top = 0;\r\n        this.container.style.left = 0;\r\n        this.container.style.width = \"100%\";\r\n\r\n        new BX.easing({\r\n            duration: 350,\r\n            start: { opacity: 0, translateX: 100 },\r\n            finish: { opacity: 100, translateX: 0 },\r\n            transition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\r\n            step: (state) => {\r\n                this.container.style.opacity = state.opacity / 100;\r\n                this.container.style.transform = \"translateX(\" + state.translateX + \"%)\";\r\n            },\r\n            complete: () => {\r\n                Dom.removeClass(this.container, \"catalog-entity-section-tab-content-show\");\r\n                this.container.style.cssText = \"\";\r\n\r\n                BX.onCustomEvent(window, \"onEntityDetailsTabShow\", [this]);\r\n            },\r\n        }).animate();\r\n    }\r\n\r\n    hideTab() {\r\n        Dom.addClass(this.container, \"catalog-entity-section-tab-content-hide\");\r\n        Dom.removeClass(this.container, \"catalog-entity-section-tab-content-show\");\r\n        Dom.removeClass(this.menuContainer, \"catalog-entity-section-tab-current\");\r\n\r\n        new BX.easing({\r\n            duration: 350,\r\n            start: { opacity: 100 },\r\n            finish: { opacity: 0 },\r\n            transition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\r\n            step: (state) => {\r\n                this.container.style.opacity = state.opacity / 100;\r\n            },\r\n            complete: () => {\r\n                this.container.style.display = \"none\";\r\n                this.container.style.transform = \"translateX(100%)\";\r\n                this.container.style.opacity = 0;\r\n            },\r\n        }).animate();\r\n    }\r\n\r\n    onMenuClick(event) {\r\n        if (this.isEnabled()) {\r\n            if (this.loader && !this.loader.isLoaded()) {\r\n                this.loader.load();\r\n            }\r\n\r\n            this.manager.selectItem(this);\r\n        }\r\n\r\n        event.preventDefault();\r\n    }\r\n}\r\n","import { Text, Type } from \"main.core\";\r\nimport Tab from \"./tab\";\r\nimport { EventEmitter } from \"main.core.events\";\r\nimport \"./tab-manager.css\";\r\n\r\nexport class TabManager {\r\n    constructor(id, settings) {\r\n        this.id = Type.isStringFilled(id) ? id : Text.getRandom();\r\n        this.settings = Type.isObjectLike(settings) ? settings : {};\r\n\r\n        this.container = this.settings.container;\r\n        this.menuContainer = this.settings.menuContainer;\r\n\r\n        this.items = [];\r\n\r\n        if (Type.isArray(this.settings.data)) {\r\n            this.settings.data.forEach((item) => {\r\n                this.items.push(\r\n                    new Tab(item.id, {\r\n                        manager: this,\r\n                        data: item,\r\n                        container: this.container.querySelector('[data-tab-id=\"' + item.id + '\"]'),\r\n                        menuContainer: this.menuContainer.querySelector('[data-tab-id=\"' + item.id + '\"]'),\r\n                    })\r\n                );\r\n            });\r\n        }\r\n\r\n        EventEmitter.subscribe(\"BX.MyWebstor.HMS.TabManager:onOpenTab\", (event) => {\r\n            let tabId = event.data.tabId;\r\n            let item = this.findItemById(tabId);\r\n            if (item) {\r\n                this.selectItem(item);\r\n            }\r\n        });\r\n\r\n        const activeItem = this.items.find((item) => item.isActive());\r\n        if (activeItem) {\r\n            if (activeItem.loader && !activeItem.loader.isLoaded())\r\n                activeItem.loader.load();\r\n\r\n            activeItem.active = false;\r\n            this.selectItem(activeItem);\r\n        }\r\n    }\r\n\r\n    findItemById(id) {\r\n        return this.items.find((item) => item.id === id) || null;\r\n    }\r\n\r\n    selectItem(item) {\r\n        EventEmitter.emit(\"BX.MyWebstor.HMS.TabManager:onSelectItem\", { tabId: item.id });\r\n        this.items.forEach((current) => current.setActive(current === item));\r\n    }\r\n}\r\n"],"names":["LazyLoader","id","settings","Type","isStringFilled","Text","getRandom","isObjectLike","container","serviceUrl","tabId","params","componentData","isRequestRunning","loaded","isLoaded","startRequest","TABID","BX","ajax","url","method","dataType","data","LOADERID","PARAMS","onsuccess","onRequestSuccess","bind","onfailure","onRequestFailure","innerHTML","Tab","manager","menuContainer","active","isBoolean","enabled","Event","querySelector","onMenuClick","loader","isActive","showTab","hideTab","Dom","addClass","removeClass","style","display","position","top","left","width","easing","duration","start","opacity","translateX","finish","transition","makeEaseOut","transitions","quart","step","state","transform","complete","cssText","onCustomEvent","window","animate","event","isEnabled","load","selectItem","preventDefault","TabManager","items","isArray","forEach","item","push","EventEmitter","subscribe","findItemById","activeItem","find","emit","current","setActive"],"mappings":"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"}