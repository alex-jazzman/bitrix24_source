{"version":3,"file":"parser.bundle.map.js","names":["this","BX","UI","exports","ui_bbcode_astProcessor","main_core","ui_bbcode_encoder","ui_linkify","ui_bbcode_model","getByIndex","array","index","Type","isArray","TypeError","isInteger","preparedIndex","length","ParserScheme","BBCodeScheme","getTagScheme","tagName","BBCodeTagScheme","name","isAllowedTag","isChildAllowed","parent","child","TAG_REGEX","TAG_REGEX_GS","isSpecialChar","symbol","includes","isList","String","toLowerCase","isListItem","parserScheme","BBCodeParser","constructor","options","allowedLinkify","scheme","setScheme","DefaultBBCodeScheme","isFunction","onUnknown","setOnUnknown","defaultOnUnknownHandler","encoder","BBCodeEncoder","setEncoder","isBoolean","linkify","setIsAllowedLinkify","getScheme","handler","onUnknownHandler","getOnUnknownHandler","getEncoder","value","Boolean","isAllowedLinkify","canBeLinkified","node","getName","notAllowedNodeNames","inNotAllowedNode","some","AstProcessor","findParentNodeByName","static","getType","BBCodeNode","ELEMENT_NODE","nodeName","newNode","createElement","replace","setChildren","getChildren","fragment","createFragment","children","openingTag","getOpeningTag","closingTag","getClosingTag","createText","isStringFilled","parseText","text","reduce","acc","push","lastItem","isNil","map","createNewLine","createTab","content","decodeText","bbcode","startIndex","nextContent","slice","matchResult","match","RegExp","source","test","parseAttributes","sourceAttributes","result","attributes","startsWith","decodeAttribute","trimQuotes","trim","split","filter","item","key","parse","createRoot","firstTagIndex","findNextTagIndex","textBeforeFirstTag","appendChild","stack","wasOpened","current","level","fullTag","slash","attrs","isOpeningTag","lowerCaseTagName","isPotentiallyVoid","tagScheme","isAllowedVoidTag","isVoid","Object","fromEntries","nextTagIndex","openedTagIndex","indexOf","splice","getFinalLineBreaksIndexes","skip","reduceRight","flattenAst","forEach","finalLinebreaksIndexes","toString","encode","tokens","Linkify","tokenize","nodes","token","t","toHref","BBCode"],"sources":["parser.bundle.js"],"mappings":"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"}