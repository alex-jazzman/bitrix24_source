this.BX=this.BX||{};(function(e,s,t,a,i,l){"use strict";let r=e=>e,o,b,c;var d=babelHelpers.classPrivateFieldLooseKey("cache");var n=babelHelpers.classPrivateFieldLooseKey("intent");var v=babelHelpers.classPrivateFieldLooseKey("ttl");var h=babelHelpers.classPrivateFieldLooseKey("ttlInterval");var u=babelHelpers.classPrivateFieldLooseKey("small");var p=babelHelpers.classPrivateFieldLooseKey("getContainer");var P=babelHelpers.classPrivateFieldLooseKey("getQrNode");var L=babelHelpers.classPrivateFieldLooseKey("getQrStub");var B=babelHelpers.classPrivateFieldLooseKey("getShowQrButton");var H=babelHelpers.classPrivateFieldLooseKey("clean");var F=babelHelpers.classPrivateFieldLooseKey("loading");var y=babelHelpers.classPrivateFieldLooseKey("createQrCodeImage");var f=babelHelpers.classPrivateFieldLooseKey("getQrSize");var m=babelHelpers.classPrivateFieldLooseKey("subscribeEventRefresh");class _{constructor(e={}){Object.defineProperty(this,m,{value:X});Object.defineProperty(this,f,{value:K});Object.defineProperty(this,y,{value:w});Object.defineProperty(this,F,{value:q});Object.defineProperty(this,H,{value:S});Object.defineProperty(this,B,{value:j});Object.defineProperty(this,L,{value:T});Object.defineProperty(this,P,{value:O});Object.defineProperty(this,p,{value:g});Object.defineProperty(this,d,{writable:true,value:new s.Cache.MemoryCache});Object.defineProperty(this,n,{writable:true,value:void 0});Object.defineProperty(this,v,{writable:true,value:void 0});Object.defineProperty(this,h,{writable:true,value:void 0});Object.defineProperty(this,u,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,n)[n]=s.Type.isString(e.intent)?e.intent:"default";babelHelpers.classPrivateFieldLooseBase(this,u)[u]=s.Type.isBoolean(e.small)?e.small:false;babelHelpers.classPrivateFieldLooseBase(this,v)[v]=s.Type.isNumber(e.ttl)?e.ttl:60}render(){return babelHelpers.classPrivateFieldLooseBase(this,p)[p]()}}function g(){return babelHelpers.classPrivateFieldLooseBase(this,d)[d].remember("container",(()=>s.Tag.render(o||(o=r`
				<div class="ui-short-qr-auth__container ${0}">
					<div class="ui-short-qr-auth__corner --top-left"></div>
					<div class="ui-short-qr-auth__corner --top-right"></div>
					<div class="ui-short-qr-auth__corner --bottom-left"></div>
					<div class="ui-short-qr-auth__corner --bottom-right"></div>
					${0}
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,u)[u]?"--small":"",babelHelpers.classPrivateFieldLooseBase(this,P)[P]())))}function O(){return babelHelpers.classPrivateFieldLooseBase(this,d)[d].remember("qrNode",(()=>s.Tag.render(b||(b=r`
				<div class="ui-short-qr-auth__qr">
					${0}
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,L)[L]())))}function T(){return babelHelpers.classPrivateFieldLooseBase(this,d)[d].remember("qrStub",(()=>s.Tag.render(c||(c=r`
				<div class="ui-short-qr-auth__qr-stub">
					<i class="ui-icon-set --o-qr-code ui-short-qr-auth__qr-stub-icon"></i>
					${0}
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,B)[B]().render())))}function j(){return babelHelpers.classPrivateFieldLooseBase(this,d)[d].remember("showQrButton",(()=>new a.Button({size:a.Button.Size.EXTRA_SMALL,text:s.Loc.getMessage("UI_SHORT_QR_AUTH_BUTTON_TITLE"),useAirDesign:true,maxWidth:117,style:a.AirButtonStyle.TINTED,noCaps:true,wide:true,onclick:()=>{babelHelpers.classPrivateFieldLooseBase(this,y)[y]();if(!babelHelpers.classPrivateFieldLooseBase(this,h)[h]){babelHelpers.classPrivateFieldLooseBase(this,h)[h]=setInterval((()=>{babelHelpers.classPrivateFieldLooseBase(this,y)[y]()}),babelHelpers.classPrivateFieldLooseBase(this,v)[v]*1e3)}}})))}function S(){s.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,P)[P]())}function q(){babelHelpers.classPrivateFieldLooseBase(this,H)[H]();new l.Loader({size:60}).show(babelHelpers.classPrivateFieldLooseBase(this,P)[P]())}function w(){babelHelpers.classPrivateFieldLooseBase(this,F)[F]();s.ajax.runAction("mobile.deeplink.get",{data:{intent:babelHelpers.classPrivateFieldLooseBase(this,n)[n],ttl:babelHelpers.classPrivateFieldLooseBase(this,v)[v]}}).then((e=>{var s;const t=(s=e.data)==null?void 0:s.link;if(t){babelHelpers.classPrivateFieldLooseBase(this,H)[H]();new QRCode(babelHelpers.classPrivateFieldLooseBase(this,P)[P](),{text:t,width:babelHelpers.classPrivateFieldLooseBase(this,f)[f](),height:babelHelpers.classPrivateFieldLooseBase(this,f)[f]()});if(!this.isSubscribe){this.isSubscribe=true;babelHelpers.classPrivateFieldLooseBase(this,m)[m]()}}})).catch((()=>{}))}function K(){return babelHelpers.classPrivateFieldLooseBase(this,u)[u]?98:151}function X(){if(i.PULL){i.PULL.subscribe({type:"BX.PullClient.SubscriptionType.Server",moduleId:"mobile",command:"onDeeplinkShouldRefresh",callback:()=>{babelHelpers.classPrivateFieldLooseBase(this,y)[y]()}})}}e.ShortQrAuth=_})(this.BX.UI=this.BX.UI||{},BX,BX,BX.UI,BX,BX);
//# sourceMappingURL=short-qr-auth.bundle.map.js