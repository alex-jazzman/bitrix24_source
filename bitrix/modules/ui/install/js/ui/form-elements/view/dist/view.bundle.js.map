{"version":3,"file":"view.bundle.js","sources":["../src/component/badge.js","../src/base-field.js","../src/checker.js","../src/inline-checker.js","../src/item-picker.js","../src/selector.js","../src/selector-menu.js","../src/single-checker.js","../src/text-input.js","../src/textarea.js","../src/text-input-inline.js","../src/user-selector.js","../src/field-factory.js"],"sourcesContent":["import { Tag, Type } from 'main.core';\n\nexport type BadgeOptions = {\n\ttext: string,\n}\n\nexport class Badge\n{\n\t#text: string;\n\n\tconstructor(options: BadgeOptions)\n\t{\n\t\tthis.#text = Type.isStringFilled(options.text) ? options.text : '';\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-section__field-badge ui-counter ui-counter-md --air --style-filled-extra\">\n\t\t\t\t<div class=\"ui-counter-inner\">${this.#text}</div>\n\t\t\t</div>\n\t\t`;\n\t}\n}\n","import { Dom, Loc, Tag, Text, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { HelpMessage } from 'ui.section';\nimport { Badge } from './component/badge';\n\nexport class BaseField extends EventEmitter\n{\n\t#id: string;\n\t#inputName: string;\n\tfield: HTMLElement;\n\t#isEnable: boolean;\n\t#bannerCode: ?string;\n\t#helpDeskCode: ?string;\n\t#label: string = '';\n\t#helpMessageProvider: function;\n\t#helpMessage: ?HelpMessage = null;\n\t#errorContainer: HTMLElement;\n\t#isFieldDisabled: boolean = false;\n\t#badge: ?Badge = null;\n\n\tconstructor(params)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('UI.Section');\n\n\t\tthis.#label = Type.isStringFilled(params.label) ? params.label : '';\n\t\tif (Type.isStringFilled(params.id))\n\t\t{\n\t\t\tthis.#id = params.id;\n\t\t}\n\t\telse if (!this.id)\n\t\t{\n\t\t\tthis.#id = this.prefixId() + Text.getRandom(8);\n\t\t}\n\n\t\tif (Type.isStringFilled(params.inputName))\n\t\t{\n\t\t\tthis.#inputName = params.inputName;\n\t\t}\n\t\telse if (!this.#inputName)\n\t\t{\n\t\t\tthis.#inputName = Text.getRandom(8);\n\t\t}\n\t\tthis.#isEnable = params.isEnable !== false;\n\t\tthis.#bannerCode = Type.isStringFilled(params.bannerCode) ? params.bannerCode : null;\n\t\tthis.#helpDeskCode = Type.isStringFilled(params.helpDesk) ? params.helpDesk : null;\n\t\tthis.#helpMessageProvider = params.helpMessageProvider;\n\t\tthis.#isFieldDisabled = Type.isBoolean(params.isFieldDisabled) ? params.isFieldDisabled : false;\n\n\t\tthis.#badge = Type.isStringFilled(params.badge) ? new Badge({ text: params.badge }) : null;\n\t}\n\n\tgetHelpMessage(): ?HelpMessage\n\t{\n\t\tif (this.#helpMessage instanceof HelpMessage)\n\t\t{\n\t\t\treturn this.#helpMessage;\n\t\t}\n\t\tthis.#helpMessage = Type.isFunction(this.#helpMessageProvider)\n\t\t\t? this.#helpMessageProvider(this.getId(), this.getInputNode())\n\t\t\t: null;\n\n\t\treturn this.#helpMessage;\n\t}\n\n\tcleanError()\n\t{\n\t\tDom.clean(this.#errorContainer);\n\t\tDom.removeClass(this.getErrorBox(), '--error');\n\t}\n\n\tsetErrors(errorMessages): void\n\t{\n\t\tthis.cleanError();\n\t\tDom.addClass(this.getErrorBox(), '--error');\n\t\tfor (let message of errorMessages)\n\t\t{\n\t\t\tlet error = Tag.render`\n\t\t\t\t<div class=\"ui-section__error-message\">\n\t\t\t\t\t<span class=\"ui-icon-set --warning\"></span>\n\t\t\t\t\t<span>${message}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tDom.append(error, this.renderErrors());\n\t\t}\n\t}\n\n\tgetErrorBox(): HTMLElement\n\t{\n\t\treturn this.getInputNode();\n\t}\n\n\trenderErrors()\n\t{\n\t\tif (this.#errorContainer)\n\t\t{\n\t\t\treturn this.#errorContainer;\n\t\t}\n\n\t\tthis.#errorContainer = Tag.render`<div class=\"ui-section__error-container\"></div>`;\n\n\t\treturn this.#errorContainer;\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.#id;\n\t}\n\n\tgetLabel(): string\n\t{\n\t\treturn this.#label;\n\t}\n\n\tprefixId(): string\n\t{\n\t\treturn '';\n\t}\n\n\tgetValue(): string\n\t{\n\t\treturn '';\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn this.#inputName;\n\t}\n\n\tgetInputNode(): HTMLElement\n\t{\n\t\treturn null;\n\t}\n\n\tsetName(name: string): void\n\t{\n\t\tthis.#inputName = name;\n\t}\n\n\tcancel(): void {}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.field)\n\t\t{\n\t\t\treturn this.field;\n\t\t}\n\t\tthis.field = this.renderContentField();\n\n\t\treturn this.field;\n\t}\n\n\trenderContentField(): HTMLElement\n\t{\n\t\treturn Tag.render``;\n\t}\n\n\tisEnable(): boolean\n\t{\n\t\treturn this.#isEnable;\n\t}\n\n\tgetBannerCode(): ?string\n\t{\n\t\treturn this.#bannerCode;\n\t}\n\n\tshowBanner(): void\n\t{\n\t\tif (this.getBannerCode())\n\t\t{\n\t\t\tBX.UI.InfoHelper.show(this.getBannerCode());\n\t\t}\n\t}\n\n\tgetHelpdeskCode(): ?string\n\t{\n\t\treturn this.#helpDeskCode;\n\t}\n\n\tshowHelpdesk(): void\n\t{\n\t\tif (this.getHelpdeskCode())\n\t\t{\n\t\t\ttop.BX.Helper.show(this.getHelpdeskCode());\n\t\t}\n\t}\n\n\trenderLockElement(): HTMLElement\n\t{\n\t\tif (!this.getBannerCode())\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tconst lockElement = Tag.render`<span class=\"ui-icon-set --lock field-has-lock\"></span>`;\n\n\t\tlockElement.addEventListener('click', () => {\n\t\t\tthis.showBanner()\n\t\t});\n\n\t\treturn lockElement\n\t}\n\n\trenderMoreElement(helpdeskCode): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getMoreElement(helpdeskCode)}\n\t\t`;\n\t}\n\n\tgetMoreElement(helpdeskCode): string\n\t{\n\t\treturn `\n\t\t\t<a class=\"more\" href=\"javascript:top.BX.Helper.show('${helpdeskCode}');\">\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t</a>\n\t\t`;\n\t}\n\n\tisFieldDisabled(): boolean\n\t{\n\t\treturn this.#isFieldDisabled;\n\t}\n\n\tgetBadge(): Badge\n\t{\n\t\treturn this.#badge;\n\t}\n}\n","import { Switcher } from 'ui.switcher';\nimport { Dom, Tag, Type } from 'main.core';\nimport 'ui.info-helper';\nimport { EventEmitter } from 'main.core.events';\nimport { BaseField } from './base-field';\n\nexport class Checker extends BaseField\n{\n\tfield: HTMLElement;\n\tswitcher: Switcher;\n\thintOn: string;\n\thintOff: string;\n\tdefaultValue: boolean;\n\thideSeparator: boolean;\n\talignCenter: boolean;\n\tnoMarginBottom: boolean;\n\t#renderMore: ?HTMLElement;\n\t#moreElement: string;\n\n\tconstructor(params)\n\t{\n\t\tparams.label = params.title;\n\t\tsuper(params);\n\t\tthis.hintOn = params.hintOn;\n\t\tthis.hintOff = params.hintOff;\n\t\tthis.hideSeparator = params.hideSeparator;\n\t\tthis.alignCenter = params.alignCenter;\n\t\tthis.noMarginBottom = params.noMarginBottom;\n\t\tthis.size = params.size;\n\n\t\tthis.switcher = new Switcher({\n\t\t\tinputName: this.getName(),\n\t\t\tchecked: params.checked,\n\t\t\tid: this.getId(),\n\t\t\tattributeName: params.attributeName,\n\t\t\thandlers: params.handlers,\n\t\t\tcolor: params.colors,\n\t\t\tsize: params.size,\n\t\t\tdisabled: !this.isEnable(),\n\t\t});\n\t\tif (this.isFieldDisabled())\n\t\t{\n\t\t\tthis.switcher.disable(true);\n\t\t}\n\t\tthis.defaultValue = params.checked;\n\t\tEventEmitter.subscribe(\n\t\t\tthis.switcher,\n\t\t\t'toggled',\n\t\t\t() =>\n\t\t\t{\n\t\t\t\tif (!this.isEnable())\n\t\t\t\t{\n\t\t\t\t\tthis.switcher.check(this.defaultValue, false);\n\t\t\t\t\tif (!Type.isNil(this.getHelpMessage()))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getHelpMessage().show();\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.switcher.inputNode.form.dispatchEvent(new Event('change'));\n\t\t\t\tthis.changeHint(this.isChecked());\n\t\t\t\tthis.emit('change', this.isChecked());\n\t\t\t}\n\t\t);\n\t}\n\n\tsetHideSeparator(isHide: boolean): void\n\t{\n\t\tthis.hideSeparator = isHide;\n\t}\n\n\tgetValue(): string\n\t{\n\t\treturn this.switcher.inputNode.value;\n\t}\n\n\tgetInputNode(): HTMLElement\n\t{\n\t\treturn this.switcher.node;\n\t}\n\n\tprefixId(): string\n\t{\n\t\treturn 'checker_';\n\t}\n\n\tisChecked(): boolean\n\t{\n\t\treturn this.switcher.isChecked();\n\t}\n\n\trenderMore(): ?HTMLElement\n\t{\n\t\tif (this.#renderMore)\n\t\t{\n\t\t\treturn this.#renderMore;\n\t\t}\n\n\t\tthis.#renderMore = !Type.isNil(this.getHelpdeskCode())\n\t\t\t? this.renderMoreElement(this.getHelpdeskCode())\n\t\t\t: '';\n\n\t\treturn this.#renderMore;\n\t}\n\n\t#getMore(): string\n\t{\n\t\tif (!this.#moreElement)\n\t\t{\n\t\t\tthis.#moreElement = !Type.isNil(this.getHelpdeskCode())\n\t\t\t\t? this.getMoreElement(this.getHelpdeskCode())\n\t\t\t\t: '';\n\t\t}\n\n\t\treturn this.#moreElement;\n\t}\n\n\trenderContentField(): HTMLElement\n\t{\n\t\tconst lockElement = !this.isEnable() ? this.renderLockElement() : null;\n\n\t\treturn Tag.render`\n\t\t\t<div\n\t\t\t\tid=\"${this.getId()}\" \n\t\t\t\tclass=\"\n\t\t\t\t\tui-section__field-switcher\n\t\t\t\t\t${this.hideSeparator ? '--hide-separator' : ''}\n\t\t\t\t\t${this.alignCenter ? '--align-center --gray-title' : ''}\n\t\t\t\t\t${this.noMarginBottom ? '--no-margin-bottom' : ''}\n\t\t\t\t\t${this.size ? `--${this.size}` : ''}\n\t\t\t\t\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-section__field\">\n\t\t\t\t\t<div class=\"ui-section__switcher\">\n\t\t\t\t\t\t${this.getInputNode()}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-section__field-inner\">\n\t\t\t\t\t\t<div class=\"ui-section__title\">\n\t\t\t\t\t\t\t${this.getLabel()} ${this.getBadge()?.render()} ${lockElement}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${this.#renderHint(this.isChecked())}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.renderErrors()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetHint(isChecked: boolean)\n\t{\n\t\tif (!Type.isStringFilled(this.hintOff))\n\t\t{\n\t\t\treturn Type.isStringFilled(this.hintOn) ? this.hintOn : '';\n\t\t}\n\t\tlet result = isChecked ? this.hintOn : this.hintOff;\n\n\t\treturn Type.isStringFilled(result) ? result : '';\n\t}\n\n\tchangeHint(isChecked: boolean)\n\t{\n\t\tconst hintElement = this.field.querySelector('.ui-section__hint');\n\t\tDom.replace(hintElement, this.#renderHint(isChecked));\n\t}\n\n\t#renderHint(isChecked: boolean)\n\t{\n\t\tlet result = '';\n\t\tlet moreText = this.#getMore();\n\t\tlet hintText = this.getHint(isChecked);\n\n\t\tif (hintText.indexOf('#MORE_DETAILS#') === -1)\n\t\t{\n\t\t\tresult = hintText + ' ' + moreText;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tresult = hintText.replace('#MORE_DETAILS#', moreText);\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-section__hint\">\n\t\t\t\t${result}\n\t\t\t</div>\n\t\t`;\n\t}\n}\n","import { Checker } from './checker';\nimport { Tag, Type } from 'main.core';\n\nexport class InlineChecker extends Checker\n{\n\thintTitle: String;\n\t#hintDescElement: HTMLElement;\n\n\tconstructor(params) {\n\t\tsuper(params);\n\t\tthis.hintTitle = Type.isStringFilled(params.hintTitle) ? params.hintTitle : '';\n\t\tthis.#hintDescElement = Tag.render`\n\t\t\t<div class=\"ui-section__description\">\n\t\t\t\t${this.isChecked() ? this.hintOn : this.hintOff}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tprefixId(): string\n\t{\n\t\treturn 'inline_checker_';\n\t}\n\n\trenderContentField(): HTMLElement\n\t{\n\t\tlet content = Tag.render`\n\t\t<div id=\"${this.getId()}\" class=\"ui-section__field-switcher --field-separator --align-center\">\n\t\t<div class=\"ui-section__field-inline-box\">\n\t\t\t<div class=\"ui-section__field-switcher-box\">\n\t\t\t\t<div class=\"ui-section__switcher\"></div>\n\t\t\t\t<div class=\"ui-section__switcher-title\">\n\t\t\t\t\t${this.getLabel()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"ui-section__field-inline-separator\"></div>\n\t\t\t<div class=\"ui-section__hint\">\n\t\t\t\t<div class=\"ui-section__title\">\n\t\t\t\t\t${this.hintTitle}\n\t\t\t\t</div>\n\t\t\t\t${this.#hintDescElement}\n\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t`;\n\n\t\tthis.switcher.renderTo(content.querySelector('.ui-section__switcher'));\n\n\t\treturn content;\n\t}\n\n\tchangeHint(isChecked: boolean)\n\t{\n\t\tthis.#hintDescElement.innerText = this.getHint(isChecked);\n\t}\n}\n","import { BaseField } from './base-field';\nimport { Dom, Tag, Type } from 'main.core';\n\nexport class ItemPicker extends BaseField\n{\n\t#items: Array = [];\n\t#selectNode: HTMLElement;\n\t#isMulti: boolean;\n\t#current;\n\n\tconstructor(params)\n\t{\n\t\tsuper(params);\n\t\tthis.#items = params.items;\n\t\tthis.#isMulti = params.isMulti === true;\n\t\tthis.#current = params.current;\n\t\tif (\n\t\t\tthis.#isMulti\n\t\t&& this.getName().substring(this.getName().length - 2) !== '[]'\n\t\t)\n\t\t{\n\t\t\tthis.setName(this.getName() + '[]');\n\t\t}\n\n\t\tthis.#selectNode = this.#buildSelector();\n\t}\n\n\tprefixId(): string\n\t{\n\t\treturn 'item_picker_';\n\t}\n\n\trenderContentField(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t<div class=\"ui-section__picker-wrapper\" id=\"${this.getId()}\">\n\t\t\t<div class=\"ui-section__field-label\">${this.getLabel()}</div>\n\t\t\t${this.#buildItems()}\n\t\t\t${this.renderErrors()}\n\t\t\t${this.getInputNode()}\n\t\t</div>\n\t\t`\n\t}\n\n\tgetInputNode(): HTMLElement\n\t{\n\t\treturn this.#selectNode;\n\t}\n\n\tonClickHandler(event): void\n\t{\n\t\tDom.toggleClass(event.target, 'ui-section__selected');\n\t\tif (!Dom.hasClass(event.target, 'ui-section__selected') && this.#isMulti)\n\t\t{\n\t\t\tthis.unSelect(event.target);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.select(event.target);\n\t\t}\n\t}\n\n\tcreateItem(text: string, value: string, isSelected: boolean = false): HTMLElement\n\t{\n\t\treturn Dom.create( 'div',\n\t\t\t{\n\t\t\t\ttext: text,\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: \"ui-section__item \" + (isSelected ? 'ui-section__selected' : ''),\n\t\t\t\t},\n\t\t\t\tdataset: {\n\t\t\t\t\tvalue: value\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tclick: this.onClickHandler.bind(this)\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\t#buildSelector(): HTMLElement\n\t{\n\t\tlet options = [];\n\t\tfor (let {value, name, selected} of this.#items)\n\t\t{\n\t\t\tlet selectedAttr = '';\n\t\t\tif (selected === true)\n\t\t\t{\n\t\t\t\tselectedAttr = 'selected';\n\t\t\t}\n\t\t\toptions.push(Tag.render`<option ${selectedAttr} value=\"${value}\">${name}</option>`);\n\t\t}\n\n\t\treturn Dom.create('select', {\n\t\t\tattrs: {\n\t\t\t\tmultiple: this.#isMulti ? 'on' : '',\n\t\t\t\tname: this.getName(),\n\t\t\t\tdisabled: !this.isEnable() ? 'disable' : ''\n\t\t\t},\n\t\t\tstyle: {\n\t\t\t\tdisplay: 'none'\n\t\t\t},\n\t\t\tchildren: options,\n\t\t});\n\t}\n\n\t#buildItems(): HTMLElement\n\t{\n\t\tlet collectionNode = Tag.render`<div class=\"ui-section__item-collection\"></div>`;\n\t\tfor (let {value, name, selected} of this.#items)\n\t\t{\n\t\t\tDom.append(this.createItem(name, value, selected), collectionNode);\n\t\t}\n\n\t\treturn collectionNode;\n\t}\n\n\tselect(node: HTMLElement, fireEvent = true)\n\t{\n\t\tif (!this.#isMulti)\n\t\t{\n\t\t\tthis.unSelectAll();\n\t\t}\n\t\tconst value = node.dataset['value'];\n\t\tlet optNode = this.#selectNode.querySelector('option[value=\"'+value+'\"]')\n\t\tif (Type.isDomNode(optNode))\n\t\t{\n\t\t\tDom.addClass(node, 'ui-section__selected');\n\t\t\toptNode.selected = true;\n\t\t\tif (fireEvent)\n\t\t\t{\n\t\t\t\tthis.fireEvent();\n\t\t\t}\n\t\t}\n\t}\n\n\tunSelect(node, fireEvent = true)\n\t{\n\t\tconst value = node.dataset['value'];\n\t\tlet optNode = this.#selectNode.querySelector('option[value=\"'+value+'\"]')\n\t\tif (Type.isDomNode(optNode))\n\t\t{\n\t\t\tDom.removeClass(node, 'ui-section__selected');\n\t\t\toptNode.selected = false;\n\t\t\tif (fireEvent)\n\t\t\t{\n\t\t\t\tthis.fireEvent();\n\t\t\t}\n\t\t}\n\t}\n\n\tunSelectAll(fireEvent = false)\n\t{\n\t\tif (Type.isDomNode(this.field))\n\t\t{\n\t\t\tlet items = this.field.querySelectorAll('.ui-section__item.ui-section__selected')\n\t\t\titems.forEach(item => {\n\t\t\t\tDom.removeClass(item, 'ui-section__selected');\n\t\t\t});\n\t\t}\n\n\t\tlet optsNodes = this.#selectNode.querySelectorAll('option');\n\t\toptsNodes.forEach((node) => {\n\t\t\tif (Type.isDomNode(node))\n\t\t\t{\n\t\t\t\tnode.selected = false;\n\t\t\t}\n\t\t});\n\t\tif (fireEvent)\n\t\t{\n\t\t\tthis.fireEvent()\n\t\t}\n\t}\n\n\tgetNodesByValue(data)\n\t{\n\t\tlet query;\n\t\tif (Type.isArray(data))\n\t\t{\n\t\t\tlet queryList = data.map((value) => {\n\t\t\t\treturn '.ui-section__item[data-value=\"'+value+'\"]';\n\t\t\t});\n\t\t\tquery = queryList.join(', ');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tquery = '.ui-section__item[data-value=\"'+data+'\"]';\n\t\t}\n\n\t\treturn this.field.querySelectorAll(query);\n\t}\n\n\tfireEvent()\n\t{\n\t\tthis.#selectNode.dispatchEvent(new Event('change'));\n\t\tthis.#selectNode.form.dispatchEvent(new Event('change'));\n\t}\n}\n","import {Dom, Loc, Tag, Text, Type} from \"main.core\";\nimport {BaseField} from \"./base-field\";\n\nexport class Selector extends BaseField\n{\n\t#items: Array = [];\n\t#hintTitle: String;\n\t#hints: Object;\n\tdefaultValue: string;\n\t#hintTitleElement: HTMLElement;\n\t#hintDescElement: HTMLElement;\n\t#inputNode: HTMLElement;\n\t#selectorNode: HTMLElement;\n\t#hintSeparatorElement: HTMLElement;\n\n\tconstructor(params)\n\t{\n\t\tparams.inputName = params.name;\n\t\tsuper(params);\n\t\tthis.#items = params.items;\n\t\tthis.#hintTitle = Type.isString(params.hintTitle) ? params.hintTitle : '';\n\t\tthis.#hints = Type.isObject(params.hints) ? params.hints : {};\n\t\tthis.defaultValue = params.current;\n\t\tthis.#hintTitleElement = Tag.render`<div class=\"ui-section__title\"></div>`;\n\t\tthis.#hintDescElement = Tag.render`<div class=\"ui-section__description\"></div>`;\n\t\tthis.#hintSeparatorElement = Tag.render`<div class=\"ui-section__field-inline-separator\"></div>`;\n\t\tthis.#inputNode = this.#buildSelector();\n\t}\n\n\tgetHint(key: string)\n\t{\n\t\tlet hint = this.#hints[key];\n\t\tif (!Type.isString(hint) || hint === '')\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn hint;\n\t}\n\n\tprefixId(): string\n\t{\n\t\treturn 'selector_';\n\t}\n\n\tsetHint(key: string): void\n\t{\n\t\tconst more = (\n\t\t\tType.isNil(this.getHelpdeskCode())\n\t\t\t\t? ''\n\t\t\t\t: this.renderMoreElement(this.getHelpdeskCode()).outerHTML\n\t\t);\n\n\t\tconst hint = this.getHint(key);\n\t\tthis.#hintTitleElement.innerText = !Type.isNil(hint) ? this.#hintTitle : '';\n\t\tthis.#hintDescElement.innerHTML = !Type.isNil(hint) ? hint + ' ' + more : '';\n\n\t\tDom.removeClass(this.field, '--field-separator');\n\t\tDom.remove(this.#hintSeparatorElement);\n\t\tif (!Type.isNil(hint))\n\t\t{\n\t\t\tDom.addClass(this.field, '--field-separator');\n\t\t\tconst fieldContainer = this.field\n\t\t\t\t.querySelector('.ui-section__field-inline-box .ui-section__field')\n\t\t\t;\n\t\t\tDom.insertAfter(this.#hintSeparatorElement, fieldContainer);\n\t\t}\n\t}\n\n\trenderContentField(): HTMLElement\n\t{\n\t\tconst lockElement = this.isEnable() ? null : this.renderLockElement();\n\n\t\treturn Tag.render`\n\t\t\t<div id=\"${this.getId()}\" class=\"ui-section__field-selector \">\n\t\t\t\t<div class=\"ui-section__field-container\">\n\t\t\t\t\t<div class=\"ui-section__field-label_box\">\n\t\t\t\t\t\t<label class=\"ui-section__field-label\" for=\"${this.getName()}\">${this.getLabel()}</label> \n\t\t\t\t\t\t${lockElement}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-section__field-inline-box\">\n\t\t\t\t\t\t<div class=\"ui-section__field\">\n\t\t\t\t\t\t\t${this.getSelector()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-section__hint\">\n\t\t\t\t\t\t\t${this.#hintTitleElement}\n\t\t\t\t\t\t\t${this.#hintDescElement}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst render = super.render();\n\t\tthis.setHint(this.getInputNode().value);\n\n\t\treturn render;\n\t}\n\n\tgetItems()\n\t{\n\t\treturn this.#items;\n\t}\n\n\tgetValue(): string\n\t{\n\t\treturn this.getInputNode().value;\n\t}\n\n\tgetSelector(): HTMLElement\n\t{\n\t\tconst disableClass = !this.isEnable() || this.isFieldDisabled() ? 'ui-ctl-disabled' : '';\n\n\t\tthis.#selectorNode ??= Tag.render`\n\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-after-icon ui-ctl-dropdown ${disableClass}\">\n\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t${this.getInputNode()}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#selectorNode;\n\t}\n\n\tgetInputNode(): HTMLElement\n\t{\n\t\treturn this.#inputNode;\n\t}\n\n\t#buildSelector(): HTMLElement\n\t{\n\t\tlet options = [];\n\t\tfor (let { value, name, selected, disabled, hidden } of this.#items)\n\t\t{\n\t\t\tlet selectedAttr = '';\n\t\t\tlet disabledAttr = '';\n\t\t\tlet hiddenAttr = '';\n\t\t\tif (selected === true)\n\t\t\t{\n\t\t\t\tselectedAttr = 'selected';\n\t\t\t}\n\n\t\t\tif (disabled === true)\n\t\t\t{\n\t\t\t\tdisabledAttr = 'disabled';\n\t\t\t}\n\n\t\t\tif (hidden === true)\n\t\t\t{\n\t\t\t\thiddenAttr = 'hidden';\n\t\t\t}\n\t\t\toptions.push(Tag.render`<option ${selectedAttr} ${disabledAttr} ${hiddenAttr} value=\"${value}\">${name}</option>`);\n\t\t}\n\n\t\treturn Dom.create('select', {\n\t\t\tattrs: {\n\t\t\t\tname: this.getName(),\n\t\t\t\tclass: 'ui-ctl-element',\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tchange: (event) => {\n\t\t\t\t\tthis.setHint(event.target.value);\n\t\t\t\t},\n\t\t\t\tclick: (event) => {\n\t\t\t\t\tif (!this.isEnable())\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!Type.isNil(this.getHelpMessage()))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.getHelpMessage().show();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmousedown: (event) => {\n\t\t\t\t\tif (!this.isEnable() || this.isFieldDisabled())\n\t\t\t\t\t{\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\tchildren: options,\n\t\t});\n\t}\n}\n","import { Dom, Event } from 'main.core';\nimport { Menu, MenuManager } from 'main.popup';\nimport { Selector } from './selector';\n\nexport class SelectorMenu extends Selector\n{\n\t#menu: Menu;\n\n\tconstructor(params)\n\t{\n\t\tparams.items = params.items.map((item) => ({\n\t\t\tvalue: item.id,\n\t\t\tname: item.text,\n\t\t\t...item,\n\t\t\tonclick: (event, item) => {\n\t\t\t\tthis.getInputNode().value = item.value;\n\t\t\t\tthis.#menu.close();\n\t\t\t},\n\t\t}));\n\n\t\tsuper(params);\n\n\t\tDom.style(this.getInputNode(), 'pointer-events', 'none');\n\t\tDom.style(this.getSelector(), 'cursor', 'pointer');\n\t\tEvent.bind(this.getSelector(), 'click', this.#showMenu.bind(this));\n\t}\n\n\tprefixId(): string\n\t{\n\t\treturn 'menu_';\n\t}\n\n\t#showMenu(): void\n\t{\n\t\tconst handleScroll = () => {\n\t\t\tconst popup = this.#menu.getPopupWindow();\n\t\t\tpopup.adjustPosition();\n\n\t\t\tconst popupRect = popup.bindElement.getBoundingClientRect();\n\t\t\tif (popupRect.top > window.innerHeight || popupRect.bottom < 0)\n\t\t\t{\n\t\t\t\tthis.#menu.close();\n\t\t\t}\n\t\t};\n\n\t\tthis.#menu = MenuManager.create({\n\t\t\tid: `ui-form-elements-menu${this.getId()}`,\n\t\t\tbindElement: this.getInputNode(),\n\t\t\titems: this.getItems().map((item) => {\n\t\t\t\tconst selected = item.value === this.getValue() ? 'ui-form-elements-menu-item --selected' : '';\n\n\t\t\t\treturn {\n\t\t\t\t\t...item,\n\t\t\t\t\tclassName: item.className ? `${item.className} ${selected}` : `menu-popup-no-icon ${selected}`,\n\t\t\t\t};\n\t\t\t}),\n\t\t\tevents: {\n\t\t\t\tonShow: () => {\n\t\t\t\t\tconst popup = this.#menu.getPopupWindow();\n\t\t\t\t\tconst elementWidth = popup.bindElement.offsetWidth;\n\n\t\t\t\t\tpopup.setOffset({ offsetLeft: 0, offsetTop: 5 });\n\t\t\t\t\tpopup.setWidth(elementWidth);\n\t\t\t\t\tpopup.adjustPosition();\n\n\t\t\t\t\tEvent.bind(window, 'scroll', handleScroll, true);\n\t\t\t\t},\n\t\t\t\tonClose: () => {\n\t\t\t\t\tthis.#menu.destroy();\n\n\t\t\t\t\tEvent.unbind(window, 'scroll', handleScroll, true);\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tthis.#menu.show();\n\t}\n}\n","import { BaseField } from './base-field';\nimport { Switcher } from 'ui.switcher';\nimport { Type, Event } from 'main.core';\n\nexport class SingleChecker extends BaseField\n{\n\tswitcher: Switcher;\n\n\tconstructor(params)\n\t{\n\t\tsuper(params);\n\t\tthis.switcher = params.switcher;\n\n\t\tEvent.bind(\n\t\t\tthis.switcher.getNode(),\n\t\t\t'click',\n\t\t\t() => {\n\t\t\t\tif (!this.isEnable() && !this.switcher.isChecked())\n\t\t\t\t{\n\t\t\t\t\tthis.switcher.check(true, false);\n\t\t\t\t\tif (!Type.isNil(this.getHelpMessage()))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getHelpMessage().show();\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.switcher.inputNode.form.dispatchEvent(new window.Event('change'));\n\t\t\t\tthis.emit('change', this.switcher.isChecked());\n\t\t\t},\n\t\t);\n\t}\n}\n","import {Event, Tag, Type, Text} from \"main.core\";\nimport {BaseField} from \"./base-field\";\n\nexport class TextInput extends BaseField\n{\n\tdefaultValue: string;\n\thintTitle: string;\n\tplaceholder: string;\n\t#inputNode: HTMLElement;\n\t#maxlength: number;\n\n\tconstructor(params)\n\t{\n\t\tsuper(params);\n\t\tthis.defaultValue = Type.isStringFilled(params.value) ? params.value : '';\n\t\tthis.hintTitle = Type.isStringFilled(params.hintTitle) ? params.hintTitle : '';\n\t\tthis.placeholder = Type.isStringFilled(params.placeholder) ? params.placeholder : '';\n\t\tthis.#maxlength = Type.isInteger(params.maxlength) ? params.maxlength : 255;\n\t\tthis.inputDefaultWidth = Type.isBoolean(params.inputDefaultWidth) ? params.inputDefaultWidth : '';\n\t\tthis.inputType = Type.isStringFilled(params.type) ? params.type : 'text';\n\n\t\tif (!this.isEnable())\n\t\t{\n\t\t\tEvent.bind(this.getInputNode(), 'click', (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif (!Type.isNil(this.getHelpMessage()))\n\t\t\t\t{\n\t\t\t\t\tthis.getHelpMessage().show();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (this.isEnable())\n\t\t{\n\t\t\tthis.getInputNode().addEventListener('input', () => {\n\t\t\t\tthis.getInputNode().form.dispatchEvent(new window.Event('change'));\n\t\t\t});\n\t\t}\n\t}\n\n\tprefixId(): string\n\t{\n\t\treturn 'text_';\n\t}\n\n\tgetValue(): string\n\t{\n\t\treturn this.getInputNode().value;\n\t}\n\n\tgetInputNode(): HTMLElement\n\t{\n\t\tthis.#inputNode ??= this.#renderInputNode();\n\n\t\treturn this.#inputNode;\n\t}\n\n\t#renderInputNode(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<input\n\t\t\t\tvalue=\"${Text.encode(this.defaultValue)}\" \n\t\t\t\tname=\"${Text.encode(this.getName())}\" \n\t\t\t\ttype=\"${this.inputType}\" \n\t\t\t\tclass=\"ui-ctl-element ${this.isEnable() ? '' : '--readonly'}\" \n\t\t\t\tplaceholder=\"${Text.encode(this.placeholder)}\"\n\t\t\t\tmaxlength=\"${parseInt(this.#maxlength, 10)}\"\n\t\t\t\t${this.isEnable() ? '' : 'readonly'}\n\t\t\t>\n\t\t`;\n\t}\n\n\trenderContentField(): HTMLElement\n\t{\n\t\tconst lockElement = !this.isEnable ? this.renderLockElement() : null;\n\n\t\treturn Tag.render`\n\t\t\t<div id=\"${this.getId()}\" class=\"ui-section__field-selector\">\n\t\t\t\t<div class=\"ui-section__field-container\">\n\t\t\t\t\t<div class=\"ui-section__field-label_box\">\n\t\t\t\t\t\t<label for=\"${this.getName()}\" class=\"ui-section__field-label\">\n\t\t\t\t\t\t\t${this.getLabel()}\n\t\t\t\t\t\t</label> \n\t\t\t\t\t\t${lockElement}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-block ${this.inputDefaultWidth ? '' : 'ui-ctl-w100'}\">\n\t\t\t\t\t\t${this.getInputNode()}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.renderErrors()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-section__hint\">\n\t\t\t\t\t${this.hintTitle}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n}\n","import { Tag, Text, Type } from 'main.core';\nimport { BaseField } from './base-field';\n\ntype TextareaParams = {\n\tvalue: string,\n\thintTitle: string,\n\tplaceholder: string,\n\tinputDefaultWidth: boolean,\n\tresizeOnlyY: boolean,\n\tresizeOnlyX: boolean,\n}\n\nexport class TextArea extends BaseField\n{\n\t#defaultValue: string;\n\t#hintTitle: string;\n\t#placeholder: string;\n\t#inputDefaultWidth: boolean;\n\t#resizeOnlyY: boolean;\n\t#resizeOnlyX: boolean;\n\n\t#node: HTMLElement;\n\n\tconstructor(params: TextareaParams)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('UI.Form.Textarea');\n\n\t\tthis.#defaultValue = Type.isStringFilled(params.value) ? params.value : '';\n\t\tthis.#hintTitle = Type.isStringFilled(params.hintTitle) ? params.hintTitle : '';\n\t\tthis.#placeholder = Type.isStringFilled(params.placeholder) ? params.placeholder : '';\n\t\tthis.#inputDefaultWidth = Type.isBoolean(params.inputDefaultWidth) ? params.inputDefaultWidth : false;\n\t\tthis.#resizeOnlyY = Type.isBoolean(params.resizeOnlyY) ? params.resizeOnlyY : false;\n\t\tthis.#resizeOnlyX = Type.isBoolean(params.resizeOnlyX) ? params.resizeOnlyX : false;\n\t}\n\n\tprefixId(): string\n\t{\n\t\treturn 'textarea_';\n\t}\n\n\tgetValue(): string\n\t{\n\t\treturn this.getNode().value;\n\t}\n\n\trenderContentField(): HTMLElement\n\t{\n\t\tconst lockElement = this.isEnable ? null : this.renderLockElement();\n\n\t\tlet resizeUiClass = this.#resizeOnlyY ? 'ui-ctl-resize-y' : '';\n\t\tif (resizeUiClass === '')\n\t\t{\n\t\t\tresizeUiClass = this.#resizeOnlyX ? 'ui-ctl-resize-x' : '';\n\t\t}\n\t\tconst defaultWidthUIClass = this.#inputDefaultWidth ? '' : 'ui-ctl-w100';\n\n\t\treturn Tag.render`\n\t\t\t<div id=\"${this.getId()}\" class=\"ui-section__field-selector\">\n\t\t\t\t<div class=\"ui-section__field-container\">\n\t\t\t\t\t<div class=\"ui-section__field-label_box\">\n\t\t\t\t\t\t<label for=\"${this.getName()}\" class=\"ui-section__field-label\">\n\t\t\t\t\t\t\t${this.getLabel()}\n\t\t\t\t\t\t</label> \n\t\t\t\t\t\t${lockElement}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textarea ui-form-textarea ${resizeUiClass} ${defaultWidthUIClass}\">\n\t\t\t\t\t\t${this.getNode()}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.renderErrors()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-section__hint\">\n\t\t\t\t\t${this.#hintTitle}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetNode(): HTMLTextAreaElement\n\t{\n\t\tthis.#node ??= this.#renderNode();\n\n\t\treturn this.#node;\n\t}\n\n\t#renderNode(): HTMLTextAreaElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<textarea\n\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\tname=\"${Text.encode(this.getName())}\"\n\t\t\t\tplaceholder=\"${Text.encode(this.#placeholder)}\"\n\t\t\t\t${this.isEnable() ? '' : 'readonly'}\n\t\t\t></textarea>\n\t\t`;\n\n\t\tnode.value = this.#defaultValue;\n\n\t\treturn node;\n\t}\n}\n","import { Text, Tag, Type, Dom } from 'main.core';\nimport { TextInput } from './text-input';\n\nexport class TextInputInline extends TextInput\n{\n\t#hintDesc: string;\n\t#hintBlock: HTMLElement;\n\n\tconstructor(params)\n\t{\n\t\tsuper(params);\n\t\tthis.valueColor = Type.isBoolean(params.valueColor) === true ? '--color-blue' : '';\n\t\tthis.#hintDesc = Type.isStringFilled(params.hintDesc) ? params.hintDesc : '';\n\t\tthis.#hintBlock = Tag.render`<div></div>`;\n\t\tthis.getInputNode().addEventListener('keyup', (event) => {\n\t\t\tDom.clean(this.#hintBlock);\n\t\t\tDom.append(this.renderHint(), this.#hintBlock);\n\t\t});\n\t}\n\n\trenderContentField(): HTMLElement\n\t{\n\t\tconst lockElement = this.isEnable ? null : this.renderLockElement();\n\n\t\tlet content = Tag.render`\n\t\t\t<div id=\"${this.getId()}\" class=\"ui-section__field-selector --field-separator\">\n\t\t\t\t<div class=\"ui-section__field-container\">\t\t\t\n\t\t\t\t\t<div class=\"ui-section__field-label_box\">\n\t\t\t\t\t\t<label for=\"${Text.encode(this.getName())}\" class=\"ui-section__field-label\">${this.getLabel()}</label> \n\t\t\t\t\t\t${lockElement}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-section__field-inline-box\">\n\t\t\t\t\t\t<div class=\"ui-section__field\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-block ui-ctl-w100\">\n\t\t\t\t\t\t\t\t${this.getInputNode()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-section__field-inline-separator\"></div>\n\t\t\t\t\t\t${this.#hintBlock}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.renderErrors()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(this.renderHint(), this.#hintBlock);\n\n\t\treturn content;\n\t}\n\n\tprefixId(): string\n\t{\n\t\treturn 'text_inline_';\n\t}\n\n\trenderHint(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-section__hint\">\n\t\t\t\t<div class=\"ui-section__title\">${this.hintTitle}</div>\n\t\t\t\t<div class=\"ui-section__value ${this.valueColor}\">${Text.encode(this.getInputNode().value)}</div>\n\t\t\t\t<div class=\"ui-section__description\">${this.#hintDesc}</div>\n\t\t\t</div>\n\t\t`;\n\t}\n}\n","import { Dom, Tag, Type, Text } from 'main.core';\nimport { TagSelector } from 'ui.entity-selector';\nimport { BaseField } from './base-field';\n\nexport class UserSelector extends BaseField\n{\n\t#entitySelector: TagSelector;\n\t#defaultValues: Array = [];\n\t#inputContainer: HTMLElement;\n\t#encode: ?function = null;\n\t#decode: ?function = null;\n\t#defaultTags: Array = [];\n\t#className: string = '';\n\t#enableUsers: boolean;\n\t#enableAll: boolean;\n\t#enableDepartments: boolean;\n\t#dialogEvents: Object;\n\n\tconstructor(params)\n\t{\n\t\tsuper(params);\n\t\tthis.#encode = Type.isFunction(params.encodeValue) ? params.encodeValue : null;\n\t\tthis.#decode = Type.isFunction(params.decodeValue) ? params.decodeValue : null;\n\t\tthis.#inputContainer = Tag.render`<div class=\"ui-section__input-container\"></div>`;\n\t\tthis.#className = params.className;\n\t\tthis.#enableUsers = params.enableUsers !== false;\n\t\tthis.#enableAll = this.#enableUsers && params.enableAll !== false;\n\t\tthis.#enableDepartments = params.enableDepartments === true;\n\t\tthis.#dialogEvents = Type.isObject(params.dialogEvents) ? params.dialogEvents : null;\n\n\t\tthis.#initInput(params.values);\n\n\t\tconst entities = [];\n\n\t\tif (this.#enableUsers)\n\t\t{\n\t\t\tentities.push(\n\t\t\t\t{\n\t\t\t\t\tid: 'user',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tintranetUsersOnly: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\tif (this.#enableUsers || this.#enableDepartments)\n\t\t{\n\t\t\tentities.push(\n\t\t\t\t{\n\t\t\t\t\tid: 'department',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tselectMode: this.#getDepartamentsSelectMode(),\n\t\t\t\t\t\tallowFlatDepartments: this.#enableDepartments,\n\t\t\t\t\t\tallowSelectRootDepartment: this.#enableDepartments,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\tif (this.#enableAll)\n\t\t{\n\t\t\tentities.push(\n\t\t\t\t{\n\t\t\t\t\tid: 'meta-user',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\t'all-users': this.#enableAll, // All users\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\tif (params.entities)\n\t\t{\n\t\t\tentities.push(...params.entities);\n\t\t}\n\n\t\tconst multiple = params.multiple !== false;\n\n\t\tconst onChangeSelector = this.onChangeSelector.bind(this);\n\n\t\tconst baseEvents = {\n\t\t\t'Item:onSelect': onChangeSelector,\n\t\t\t'Item:onDeselect': onChangeSelector,\n\t\t};\n\n\t\tconst events = { ...baseEvents, ...this.#dialogEvents };\n\n\t\tthis.#entitySelector = new TagSelector({\n\t\t\tid: this.getId(),\n\t\t\ttextBoxAutoHide: false,\n\t\t\ttextBoxWidth: 350,\n\t\t\tmaxHeight: 99,\n\t\t\tdialogOptions: {\n\t\t\t\tid: this.getId(),\n\t\t\t\tpreselectedItems: this.#defaultValues,\n\t\t\t\tmultiple: multiple,\n\t\t\t\thideOnDeselect: !multiple,\n\t\t\t\tevents,\n\t\t\t\tentities: entities,\n\t\t\t},\n\t\t\tmultiple: multiple,\n\t\t});\n\t\tthis.#defaultTags = this.#entitySelector.getTags();\n\n\t\tif (!this.isEnable())\n\t\t{\n\t\t\tthis.#entitySelector.hideAddButton();\n\t\t\tthis.#entitySelector.getTextBox().readOnly = true;\n\t\t\tDom.adjust(this.#entitySelector.getContainer(), {\n\t\t\t\tevents: {\n\t\t\t\t\tclick: (event) => {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tif (!Type.isNil(this.getHelpMessage()))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.getHelpMessage().show();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\t#getDepartamentsSelectMode(): string\n\t{\n\t\tif (this.#enableUsers && this.#enableDepartments)\n\t\t{\n\t\t\treturn 'usersAndDepartments';\n\t\t}\n\n\t\tif (this.#enableUsers && !this.#enableDepartments)\n\t\t{\n\t\t\treturn 'usersOnly';\n\t\t}\n\n\t\treturn 'departmentsOnly';\n\t}\n\n\tgetSelector(): TagSelector\n\t{\n\t\treturn this.#entitySelector;\n\t}\n\n\tgetInputNode(): HTMLElement\n\t{\n\t\treturn this.#entitySelector.getContainer();\n\t}\n\n\tgetErrorBox(): HTMLElement\n\t{\n\t\treturn this.#entitySelector.getOuterContainer();\n\t}\n\n\tprefixId(): string\n\t{\n\t\treturn 'user_selector_';\n\t}\n\n\trenderContentField(): HTMLElement\n\t{\n\t\tconst content = Tag.render`\n\t\t\t<div id=\"${this.getId()}\" class=\"ui-section__field-user_selector ${this.#className}\">\n\t\t\t\t<div class=\"ui-section__field\">\n\t\t\t\t\t<div class=\"ui-section__field-label\">\n\t\t\t\t\t\t${this.getLabel()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.renderErrors()}\n\t\t\t\t<div class=\"ui-section__input-box\">\n\t\t\t\t\t${this.#inputContainer}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\tthis.#entitySelector.renderTo(content.querySelector('.ui-section__field'));\n\n\t\treturn content;\n\t}\n\n\tonChangeSelector(event): void\n\t{\n\t\tlet selectedItems = event.target.getSelectedItems();\n\t\tDom.clean(this.#inputContainer);\n\t\tif (Type.isArray(selectedItems))\n\t\t{\n\t\t\tselectedItems.forEach(item =>\n\t\t\t{\n\t\t\t\tlet type = '';\n\t\t\t\tswitch (item.entityId)\n\t\t\t\t{\n\t\t\t\t\tcase 'meta-user':\n\t\t\t\t\t\ttype = 'AU';\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'department':\n\t\t\t\t\t\tif (item.id.toString().split(':')[1] === 'F')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype = 'D';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype = 'DR';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'user':\n\t\t\t\t\t\ttype = 'U';\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (type)\n\t\t\t\t{\n\t\t\t\t\tconst value = Type.isFunction(this.#encode) ? this.#encode({id: item.id, type: type}) : item.id;\n\t\t\t\t\tif (value)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.append(this.#createInputElement(value), this.#inputContainer);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tthis.#triggerEventChange();\n\t}\n\n\t#createInputElement(value: string): HTMLElement\n\t{\n\t\treturn Dom.create('input', {\n\t\t\tattrs: {\n\t\t\t\tname: this.getName(),\n\t\t\t\tvalue: Text.encode(value),\n\t\t\t\ttype: 'text',\n\n\t\t\t},\n\t\t\tstyle: {\n\t\t\t\tdisplay: 'none',\n\t\t\t},\n\t\t});\n\t}\n\n\tsetValues(values): void\n\t{\n\t\tif (Type.isArray(values))\n\t\t{\n\t\t\tfor (let userId of values)\n\t\t\t{\n\t\t\t\tconst value = Type.isFunction(this.#decode) ? this.#decode(userId) : userId;\n\n\t\t\t\tlet item = [];\n\t\t\t\tif (Type.isObject(value) && Type.isString(value.type) && Type.isString(value.id))\n\t\t\t\t{\n\t\t\t\t\tswitch (value.type)\n\t\t\t\t\t{\n\t\t\t\t\t\tcase 'AU':\n\t\t\t\t\t\t\titem = ['meta-user', 'all-users'];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'DR':\n\t\t\t\t\t\t\tif (!this.#enableDepartments)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\titem = ['department', value.id];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'D':\n\t\t\t\t\t\t\tif (!this.#enableDepartments)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\titem = ['department', value.id.toString() + ':F'];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'U':\n\t\t\t\t\t\t\titem = ['user', value.id];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArrayFilled(value))\n\t\t\t\t{\n\t\t\t\t\titem = value;\n\t\t\t\t}\n\n\t\t\t\tthis.#defaultValues.push(item);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#defaultValues = [];\n\t\t}\n\t}\n\n\t#initInput(values)\n\t{\n\t\tif (Type.isArray(values))\n\t\t{\n\t\t\tfor (let value of values)\n\t\t\t{\n\t\t\t\tlet input = this.#createInputElement(value);\n\t\t\t\tDom.append(input, this.#inputContainer);\n\t\t\t}\n\t\t\tthis.setValues(values);\n\t\t}\n\t}\n\n\t#triggerEventChange()\n\t{\n\t\tlet input = this.#inputContainer.firstChild;\n\t\tlet form;\n\t\tif (Type.isNil(input))\n\t\t{\n\t\t\tinput = this.#createInputElement('');\n\t\t\tDom.append(input, this.#inputContainer);\n\t\t\tform = input.form;\n\t\t\tDom.remove(input);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tform = input.form;\n\t\t}\n\t\tform.dispatchEvent(new Event('change'));\n\t}\n}\n","import 'ui.info-helper';\nimport { UserSelector } from 'ui.form-elements.view';\nimport { Type } from 'main.core';\n\nexport class FieldFactory\n{\n\tstatic createUserSelector(userSelectorParams): UserSelector\n\t{\n\t\t// eslint-disable-next-line no-param-reassign\n\t\tuserSelectorParams.encodeValue = (value) => {\n\t\t\tif (!Type.isNil(value.id))\n\t\t\t{\n\t\t\t\treturn value.id === 'all-users' ? 'UA' : value.type + value.id.toString().split(':')[0];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\n\t\t// eslint-disable-next-line no-param-reassign\n\t\tuserSelectorParams.decodeValue = (value) => {\n\t\t\tif (value === 'UA')\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'AU',\n\t\t\t\t\tid: '',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst arr = userSelectorParams.enableDepartments\n\t\t\t\t? value.match(/^(U|DR|D)(\\d+)/)\n\t\t\t\t: value.match(/^(U)(\\d+)/);\n\n\t\t\tif (!Type.isArray(arr))\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\ttype: null,\n\t\t\t\t\tid: null,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttype: arr[1],\n\t\t\t\tid: arr[2],\n\t\t\t};\n\t\t};\n\n\t\tif (Type.isObject(userSelectorParams.values))\n\t\t{\n\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\tuserSelectorParams.values = Object.values(userSelectorParams.values);\n\t\t}\n\n\t\treturn new UserSelector(userSelectorParams);\n\t}\n}\n"],"names":["Badge","options","Type","isStringFilled","text","Tag","render","BaseField","params","_classPrivateFieldInitSpec","setEventNamespace","label","id","prefixId","Text","getRandom","inputName","isEnable","bannerCode","helpDesk","helpMessageProvider","isBoolean","isFieldDisabled","badge","HelpMessage","isFunction","getId","getInputNode","Dom","clean","removeClass","getErrorBox","errorMessages","cleanError","addClass","message","error","append","renderErrors","name","field","renderContentField","getBannerCode","BX","UI","InfoHelper","show","getHelpdeskCode","top","Helper","lockElement","addEventListener","showBanner","helpdeskCode","getMoreElement","Loc","getMessage","EventEmitter","Checker","title","hintOn","hintOff","hideSeparator","alignCenter","noMarginBottom","size","switcher","Switcher","getName","checked","attributeName","handlers","color","colors","disabled","disable","defaultValue","subscribe","check","isNil","getHelpMessage","inputNode","form","dispatchEvent","Event","changeHint","isChecked","emit","isHide","value","node","renderMoreElement","renderLockElement","getLabel","getBadge","result","hintElement","querySelector","replace","moreText","hintText","getHint","indexOf","InlineChecker","hintTitle","content","renderTo","innerText","ItemPicker","_classPrivateMethodInitSpec","items","isMulti","current","substring","length","setName","event","toggleClass","target","hasClass","unSelect","select","isSelected","create","props","className","dataset","events","click","onClickHandler","bind","fireEvent","unSelectAll","optNode","isDomNode","selected","querySelectorAll","forEach","item","optsNodes","data","query","isArray","queryList","map","join","selectedAttr","push","attrs","multiple","style","display","children","collectionNode","createItem","Selector","isString","isObject","hints","key","hint","more","outerHTML","innerHTML","remove","fieldContainer","insertAfter","getSelector","setHint","disableClass","hidden","disabledAttr","hiddenAttr","change","preventDefault","mousedown","SelectorMenu","onclick","close","_classPrivateMethodGet","handleScroll","popup","getPopupWindow","adjustPosition","popupRect","bindElement","getBoundingClientRect","window","innerHeight","bottom","MenuManager","getItems","getValue","onShow","elementWidth","offsetWidth","setOffset","offsetLeft","offsetTop","setWidth","onClose","destroy","unbind","SingleChecker","getNode","TextInput","placeholder","isInteger","maxlength","inputDefaultWidth","inputType","type","encode","parseInt","TextArea","resizeOnlyY","resizeOnlyX","resizeUiClass","defaultWidthUIClass","TextInputInline","valueColor","hintDesc","renderHint","UserSelector","encodeValue","decodeValue","enableUsers","enableAll","enableDepartments","dialogEvents","values","entities","intranetUsersOnly","selectMode","allowFlatDepartments","allowSelectRootDepartment","onChangeSelector","baseEvents","TagSelector","textBoxAutoHide","textBoxWidth","maxHeight","dialogOptions","preselectedItems","hideOnDeselect","getTags","hideAddButton","getTextBox","readOnly","adjust","getContainer","getOuterContainer","selectedItems","getSelectedItems","entityId","toString","split","userId","isArrayFilled","input","setValues","firstChild","FieldFactory","userSelectorParams","arr","match","Object"],"mappings":"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"}