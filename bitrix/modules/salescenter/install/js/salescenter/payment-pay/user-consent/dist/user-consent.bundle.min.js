this.BX=this.BX||{};this.BX.Salescenter=this.BX.Salescenter||{};(function(e,t,n){"use strict";var i=function(){function e(t){babelHelpers.classCallCheck(this,e);this.options=t||{};this.eventName=this.option("eventName",false);this.items=this.option("items",[]);this.preselectedConsentsIsSubmitted=false;this.setCallback(null);this.subscribeToEvents()}babelHelpers.createClass(e,[{key:"setCallback",value:function e(t){this.callback=t}},{key:"runCallback",value:function e(){if(this.callback){this.callback()}this.setCallback(null)}},{key:"subscribeToEvents",value:function e(){var i=this;t.EventEmitter.subscribe(n.EventType.consent.accepted,(function(e){var n=e.getData()[0].config.id;var s=i.getItemById(n);if(s){s.checked="Y"}var a=i.getFirstRequiredUncheckedItem();if(a&&i.callback){t.EventEmitter.emit("".concat(i.eventName,"-").concat(a.id));return}i.runCallback()}));t.EventEmitter.subscribe(n.EventType.consent.refused,(function(e){var t=e.getData()[0].config.id;var n=i.getItemById(t);if(n){n.checked="N"}i.setCallback(null)}))}},{key:"isAvailable",value:function e(){return BX.UserConsent&&this.eventName}},{key:"askUserToPerform",value:function e(n){this.setCallback(n);if(!this.isAvailable()){this.runCallback();return}if(!this.preselectedConsentsIsSubmitted){this.sendEventsForCheckedConsents();this.preselectedConsentsIsSubmitted=true}var i=this.getFirstRequiredUncheckedItem();if(i){t.EventEmitter.emit("".concat(this.eventName,"-").concat(i.id));return}this.runCallback()}},{key:"sendEventsForCheckedConsents",value:function e(){var n=this;this.items.forEach((function(e){if(e.checked==="Y"){t.EventEmitter.emit("".concat(n.eventName,"-").concat(e.id))}}))}},{key:"getFirstRequiredUncheckedItem",value:function e(){var t;return(t=this.items.find((function(e){return e.required==="Y"&&e.checked==="N"})))!==null&&t!==void 0?t:null}},{key:"getItemById",value:function e(t){var n;return(n=this.items.find((function(e){return parseInt(e.id,10)===t})))!==null&&n!==void 0?n:null}},{key:"option",value:function e(t,n){return Object.hasOwn(this.options,t)?this.options[t]:n}}]);return e}();e.UserConsent=i})(this.BX.Salescenter.PaymentPay=this.BX.Salescenter.PaymentPay||{},BX.Event,BX.Sale.PaymentPay.Const);
//# sourceMappingURL=user-consent.bundle.map.js