{"version":3,"file":"manager.bundle.js","sources":["../src/feedback-type.js","../src/manager.js"],"sourcesContent":["/**\n * @namespace {BX.Salescenter}\n */\nexport default class FeedbackType\n{\n\tstatic FEEDBACK = 'feedback';\n\tstatic PAY_ORDER = 'pay_order';\n\tstatic PAYSYSTEM_OFFER = 'paysystem_offer';\n\tstatic PAYSYSTEM_SBP_OFFER = 'paysystem_sbp_offer';\n\tstatic SMSPROVIDER_OFFER = 'smsprovider_offer';\n\tstatic DELIVERY_OFFER = 'delivery_offer';\n\tstatic TERMINAL_OFFER = 'terminal_offer';\n\tstatic INTEGRATION_REQUEST = 'integration_request';\n}\n","import { rest as Rest } from 'rest.client';\nimport { Type, Uri, ajax as Ajax, Event, Runtime } from 'main.core';\n\nimport 'clipboard';\nimport 'loadext';\nimport 'popup';\nimport 'sidepanel';\nimport 'ui.feedback.form';\n\nimport './manager.css';\nimport FeedbackType from './feedback-type';\n\nexport class Manager\n{\n\tstatic sessionId = null;\n\tstatic connectedSiteId = null;\n\tstatic addUrlPopup = null;\n\tstatic addUrlResolve = null;\n\tstatic popupNode = null;\n\tstatic siteTemplateCode = null;\n\tstatic isSitePublished = null;\n\tstatic isSiteExists = null;\n\tstatic isOrderPublicUrlAvailable = null;\n\tstatic isPullInited = false;\n\tstatic connectPath = null;\n\tstatic fieldsMap = null;\n\n\tstatic init(options)\n\t{\n\t\toptions.connectedSiteId = parseInt(options.connectedSiteId, 10);\n\t\tif (options.connectedSiteId > 0)\n\t\t{\n\t\t\tManager.connectedSiteId = options.connectedSiteId;\n\t\t}\n\t\toptions.sessionId = parseInt(options.sessionId, 10);\n\t\tif (options.sessionId > 0)\n\t\t{\n\t\t\tManager.sessionId = options.sessionId;\n\t\t}\n\n\t\tif (Type.isString(options.siteTemplateCode))\n\t\t{\n\t\t\tManager.siteTemplateCode = options.siteTemplateCode;\n\t\t}\n\n\t\tif (Type.isString(options.connectPath))\n\t\t{\n\t\t\tManager.connectPath = options.connectPath;\n\t\t}\n\n\t\tif (Type.isBoolean(options.isSitePublished))\n\t\t{\n\t\t\tManager.isSitePublished = options.isSitePublished;\n\t\t}\n\n\t\tif (Type.isBoolean(options.isSiteExists))\n\t\t{\n\t\t\tManager.isSiteExists = options.isSiteExists;\n\t\t}\n\n\t\tif (Type.isBoolean(options.isOrderPublicUrlAvailable))\n\t\t{\n\t\t\tManager.isOrderPublicUrlAvailable = options.isOrderPublicUrlAvailable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tManager.isOrderPublicUrlAvailable = false;\n\t\t}\n\n\t\tif (!Manager.isPullInited)\n\t\t{\n\t\t\tEvent.ready(Manager.initPull);\n\t\t}\n\n\t\t// the crutch to load landings dynamically\n\t\tif (!top.BX.Landing)\n\t\t{\n\t\t\ttop.BX.Landing = {\n\t\t\t\tPageObject: {},\n\t\t\t\tMain: {},\n\t\t\t};\n\t\t}\n\t}\n\n\tstatic loadConfig()\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tRest.callMethod('salescenter.manager.getConfig').then((result) =>\n\t\t\t{\n\t\t\t\tManager.init(result.answer.result);\n\t\t\t\tresolve(result.answer.result);\n\t\t\t}).catch((reason) =>\n\t\t\t{\n\t\t\t\treject(reason);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Shows slider with module description and connect button.\n\t *\n\t * @returns {Promise<any>}\n\t */\n\tstatic startConnection(params = {})\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif (!Manager.connectPath)\n\t\t\t{\n\t\t\t\treject('no connect path');\n\t\t\t}\n\n\t\t\tlet url = new Uri(Manager.connectPath);\n\t\t\tif (!Type.isPlainObject(params))\n\t\t\t{\n\t\t\t\tparams = {};\n\t\t\t}\n\t\t\tparams.analyticsLabel = 'salescenterStartConnection';\n\t\t\turl.setQueryParams(params);\n\t\t\tManager.openSlider(url.toString(), { width: 760 }).then(() =>\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}).catch((reason) =>\n\t\t\t{\n\t\t\t\treject(reason);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Shows slider with landing template.\n\t *\n\t * @param {Object} params\n\t * @returns {Promise<any>}\n\t */\n\tstatic connect(params)\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif (Manager.connectedSiteId > 0 && Manager.isSiteExists)\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet url = new Uri('/shop/stores/site/edit/0/');\n\t\t\t\tif (!Type.isPlainObject(params))\n\t\t\t\t{\n\t\t\t\t\tparams = {};\n\t\t\t\t}\n\t\t\t\tparams.analyticsLabel = 'salescenterConnect';\n\t\t\t\tif (Manager.siteTemplateCode)\n\t\t\t\t{\n\t\t\t\t\tparams.tpl = Manager.siteTemplateCode;\n\t\t\t\t}\n\t\t\t\turl.setQueryParams(params);\n\t\t\t\tManager.openSlider(url.toString()).then(() =>\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic publicConnectedSite()\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif (Manager.connectedSiteId > 0 && !Manager.isSitePublished)\n\t\t\t{\n\t\t\t\tRest.callMethod('landing.site.publication', { id: Manager.connectedSiteId }).then((result) =>\n\t\t\t\t{\n\t\t\t\t\tManager.isSitePublished = true;\n\t\t\t\t\tManager.firePublicConnectedSiteEvent();\n\t\t\t\t\tresolve(result);\n\t\t\t\t}).catch((reason) =>\n\t\t\t\t{\n\t\t\t\t\treject(reason);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic firePublicConnectedSiteEvent()\n\t{\n\t\ttop.BX.onCustomEvent(\n\t\t\t'Salescenter.Manager:onPublicConnectedSite',\n\t\t\t{\n\t\t\t\tisSitePublished: true,\n\t\t\t},\n\t\t);\n\t}\n\n\t/**\n\t * @returns BX.PopupWindow\n\t */\n\tstatic getPopup({ id = '', title = '', text = '', buttons = [] })\n\t{\n\t\tlet popup = BX.PopupWindowManager.getPopupById(id);\n\n\t\tconst content = `<div class=\"salescenter-popup\">\n\t\t\t<div class=\"salescenter-popup-title\">${title}</div>\n\t\t\t<div class=\"salescenter-popup-text\">${text}</div>\n\t\t</div>`;\n\t\tif (popup)\n\t\t{\n\t\t\tpopup.setContent(content);\n\t\t\tpopup.setButtons(buttons);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpopup = new BX.PopupWindow(id, null, {\n\t\t\t\tzIndex: 200,\n\t\t\t\tclassName: 'salescenter-connect-popup',\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tpadding: 0,\n\t\t\t\tcloseIcon: true,\n\t\t\t\tcontent : content,\n\t\t\t\twidth: 400,\n\t\t\t\toverlay: true,\n\t\t\t\tlightShadow: false,\n\t\t\t\tbuttons: buttons,\n\t\t\t});\n\t\t}\n\n\t\treturn popup;\n\t}\n\n\tstatic showAfterConnectPopup()\n\t{\n\t\tconst popup = Manager.getPopup({\n\t\t\tid: 'salescenter-connect-popup',\n\t\t\ttitle: BX.message('SALESCENTER_MANAGER_CONNECT_POPUP_TITLE'),\n\t\t\ttext: BX.message('SALESCENTER_MANAGER_CONNECT_POPUP_DESCRIPTION'),\n\t\t\tbuttons: [\n\t\t\t\tnew BX.PopupWindowButton({\n\t\t\t\t\ttext: BX.message('SALESCENTER_MANAGER_CONNECT_POPUP_GO_BUTTON'),\n\t\t\t\t\tclassName: 'ui-btn ui-btn-md ui-btn-primary',\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tManager.openConnectedSite();\n\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t\tpopup.show();\n\t}\n\n\tstatic copyUrl(url, event)\n\t{\n\t\tBX.clipboard.copy(url);\n\t\tif (event && event.target)\n\t\t{\n\t\t\tManager.showCopyLinkPopup(event.target);\n\t\t}\n\t}\n\n\tstatic showCopyLinkPopup = function(node) {\n\t\tif (Manager.popupOuterLink)\n\t\t{\n\t\t\tManager.popupOuterLink.destroy();\n\t\t\tManager.popupOuterLink = null;\n\t\t\tif (Manager.hideCopyLinkTimeout > 0)\n\t\t\t{\n\t\t\t\tclearTimeout(Manager.hideCopyLinkTimeout);\n\t\t\t\tManager.hideCopyLinkTimeout = 0;\n\t\t\t}\n\n\t\t\tif (Manager.destroyCopyLinkTimeout > 0)\n\t\t\t{\n\t\t\t\tclearTimeout(Manager.destroyCopyLinkTimeout);\n\t\t\t\tManager.destroyCopyLinkTimeout = 0;\n\t\t\t}\n\t\t}\n\n\t\tManager.popupOuterLink = new BX.PopupWindow('salescenter-popup-copy-link', node, {\n\t\t\tclassName: 'salescenter-popup-copy-link',\n\t\t\tdarkMode: true,\n\t\t\tcontent: BX.message('SALESCENTER_MANAGER_COPY_URL_SUCCESS'),\n\t\t\tzIndex: 5000,\n\t\t});\n\n\t\tManager.popupOuterLink.show();\n\n\t\tManager.hideCopyLinkTimeout = setTimeout(() =>\n\t\t{\n\t\t\tBX.hide(BX(Manager.popupOuterLink.uniquePopupId));\n\t\t\tManager.hideCopyLinkTimeout = 0;\n\t\t}, 2000);\n\n\t\tManager.destroyCopyLinkTimeout = setTimeout(() =>\n\t\t{\n\t\t\tManager.popupOuterLink.destroy();\n\t\t\tManager.popupOuterLink = null;\n\t\t\tManager.destroyCopyLinkTimeout = 0;\n\t\t}, 2200);\n\t};\n\n\tstatic addCustomPage(page)\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tManager.getAddUrlPopup().then((popup) => {\n\t\t\t\tManager.templateEngine.$emit('onAddUrlPopupCreate', page);\n\t\t\t\tpopup.show();\n\t\t\t});\n\t\t\tManager.addUrlResolve = resolve;\n\t\t\tManager.addingCustomPage = page;\n\t\t});\n\t}\n\n\tstatic resolveAddPopup(pageId, isSaved)\n\t{\n\t\tif (Manager.addUrlResolve && Type.isFunction(Manager.addUrlResolve))\n\t\t{\n\t\t\tManager.addUrlResolve(pageId);\n\t\t\tManager.addUrlResolve = null;\n\t\t}\n\n\t\tif (isSaved && pageId > 0)\n\t\t{\n\t\t\tif (\n\t\t\t\tManager.addingCustomPage\n\t\t\t\t&& Manager.addingCustomPage.id\n\t\t\t\t&& parseInt(Manager.addingCustomPage.id, 10) === parseInt(pageId, 10)\n\t\t\t)\n\t\t\t{\n\t\t\t\tManager.showNotification(BX.message('SALESCENTER_MANAGER_UPDATE_URL_SUCCESS'));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tManager.showNotification(BX.message('SALESCENTER_MANAGER_ADD_URL_SUCCESS'));\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic initPopupTemplate()\n\t{\n\t\treturn new Promise(resolve =>\n\t\t{\n\t\t\tBX.loadExt('salescenter.url_popup').then(() =>\n\t\t\t{\n\t\t\t\tManager.templateEngine = BX.Vue.create({\n\t\t\t\t\tel: document.createElement('div'),\n\t\t\t\t\ttemplate: '<bx-salescenter-url-popup/>',\n\t\t\t\t\tmounted()\n\t\t\t\t\t{\n\t\t\t\t\t\tManager.popupNode = this.$el;\n\t\t\t\t\t\tthis.$app = Manager;\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic handleAddUrlPopupAutoHide(event)\n\t{\n\t\tif (!Manager.addUrlPopup)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tif (\n\t\t\tevent.target !== Manager.addUrlPopup.getPopupContainer()\n\t\t\t&& !Manager.addUrlPopup.getPopupContainer().contains(event.target)\n\t\t)\n\t\t{\n\t\t\tlet urlFieldsPopupWindow = null;\n\t\t\tconst urlFieldsPopupMenu = BX.PopupMenu.getMenuById('salescenter-url-fields-popup');\n\t\t\tif (urlFieldsPopupMenu)\n\t\t\t{\n\t\t\t\turlFieldsPopupWindow = urlFieldsPopupMenu.popupWindow;\n\t\t\t}\n\n\t\t\tif (!urlFieldsPopupWindow)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (event.target.dataset['rootMenu'] === 'salescenter-url-fields-popup' || event.target.parentNode.dataset['rootMenu'] === 'salescenter-url-fields-popup')\n\t\t\t{\n\t\t\t\tif (!event.target.classList.contains('menu-popup-item-submenu') && !event.target.parentNode.classList.contains('menu-popup-item-submenu'))\n\t\t\t\t{\n\t\t\t\t\turlFieldsPopupWindow.close();\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tstatic getAddUrlPopup()\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif (!Manager.addUrlPopup)\n\t\t\t{\n\t\t\t\tManager.initPopupTemplate().then(() =>\n\t\t\t\t{\n\t\t\t\t\tManager.addUrlPopup = new BX.PopupWindow({\n\t\t\t\t\t\tid: 'salescenter-app-add-url',\n\t\t\t\t\t\tzIndex: 200,\n\t\t\t\t\t\tautoHide: true,\n\t\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\t\tcloseIcon: true,\n\t\t\t\t\t\tpadding: 0,\n\t\t\t\t\t\tcontentPadding: 0,\n\t\t\t\t\t\tcontent : Manager.popupNode,\n\t\t\t\t\t\ttitleBar: BX.message('SALESCENTER_ACTION_ADD_CUSTOM_TITLE'),\n\t\t\t\t\t\tcontentColor: 'white',\n\t\t\t\t\t\twidth: 600,\n\t\t\t\t\t\tautoHideHandler: Manager.handleAddUrlPopupAutoHide,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonPopupClose: () =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet newPageId = document.getElementById('salescenter-app-add-custom-url-id');\n\t\t\t\t\t\t\t\tconst isSaved = document.getElementById('salescenter-app-add-custom-url-is-saved').value === 'y';\n\t\t\t\t\t\t\t\tif (newPageId)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnewPageId = newPageId.value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnewPageId = false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tManager.resolveAddPopup(newPageId, isSaved);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonPopupDestroy: () =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tManager.addUrlPopup = null;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\n\t\t\t\t\tresolve(Manager.addUrlPopup);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresolve(Manager.addUrlPopup);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic addPage(fields)\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tlet method;\n\t\t\tlet analyticsLabel;\n\t\t\tif (fields.analyticsLabel)\n\t\t\t{\n\t\t\t\tanalyticsLabel = fields.analyticsLabel;\n\t\t\t\tdelete(fields.analyticsLabel);\n\t\t\t}\n\t\t\tif (fields.id > 0)\n\t\t\t{\n\t\t\t\tmethod = Rest.callMethod('salescenter.page.update', {\n\t\t\t\t\tid: fields.id,\n\t\t\t\t\tfields: fields,\n\t\t\t\t});\n\t\t\t\tif (!analyticsLabel)\n\t\t\t\t{\n\t\t\t\t\tanalyticsLabel = 'salescenterUpdatePage';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmethod = Rest.callMethod('salescenter.page.add', {\n\t\t\t\t\tfields: fields,\n\t\t\t\t});\n\t\t\t\tif (!analyticsLabel)\n\t\t\t\t{\n\t\t\t\t\tanalyticsLabel = 'salescenterAddPage';\n\t\t\t\t}\n\t\t\t}\n\t\t\tmethod.then((result) =>\n\t\t\t{\n\t\t\t\tif (result.answer.result.page)\n\t\t\t\t{\n\t\t\t\t\tlet page = result.answer.result.page;\n\t\t\t\t\tlet source = 'other';\n\t\t\t\t\tif (page.landingId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (parseInt(page.siteId, 10) === parseInt(Manager.connectedSiteId, 10))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsource = 'landing_store_chat';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsource = 'landing_other';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tManager.addAnalyticAction({\n\t\t\t\t\t\tanalyticsLabel: analyticsLabel,\n\t\t\t\t\t\tsource: source,\n\t\t\t\t\t\ttype: page.isWebform ? 'forms' : 'info',\n\t\t\t\t\t\tcode: page.code,\n\t\t\t\t\t}).then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t}).catch((reason) =>\n\t\t\t{\n\t\t\t\treject(reason);\n\t\t\t})\n\t\t});\n\t}\n\n\tstatic checkUrl(url)\n\t{\n\t\treturn Rest.callMethod('salescenter.page.geturldata', {\n\t\t\turl: url,\n\t\t});\n\t}\n\n\tstatic addSitePage(isWebform = false)\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tconst siteId = Manager.connectedSiteId;\n\t\t\tif (siteId > 0)\n\t\t\t{\n\t\t\t\tBX.loadExt('landing.master').then(() =>\n\t\t\t\t{\n\t\t\t\t\tBX.Landing.Env.getInstance().setOptions({ site_id: siteId });\n\t\t\t\t\tBX.Landing.UI.Panel.URLList\n\t\t\t\t\t\t.getInstance()\n\t\t\t\t\t\t.show('landing', { siteId: siteId })\n\t\t\t\t\t\t.then((result) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tManager.addPage({\n\t\t\t\t\t\t\t\thidden: false,\n\t\t\t\t\t\t\t\tlandingId: result.id,\n\t\t\t\t\t\t\t\tisWebform: isWebform,\n\t\t\t\t\t\t\t}).then((result) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t\t\t\tManager.showNotification(BX.message('SALESCENTER_MANAGER_ADD_URL_SUCCESS'));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tManager.openSlider('/bitrix/components/bitrix/salescenter.connect/slider.php').then(() =>\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic showNotification(message)\n\t{\n\t\tif (!message)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tBX.loadExt('ui.notification').then(() =>\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\tcontent: message,\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic hidePage(page)\n\t{\n\t\tconst method = 'salescenter.page.hide';\n\t\tlet source = 'other';\n\t\tif (page.landingId > 0)\n\t\t{\n\t\t\tif (parseInt(page.siteId, 10) === parseInt(Manager.connectedSiteId, 10))\n\t\t\t{\n\t\t\t\tsource = 'landing_store_chat';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsource = 'landing_other';\n\t\t\t}\n\t\t}\n\t\tconst data = {\n\t\t\tid: page.id,\n\t\t\tfields: {\n\t\t\t\thidden: true,\n\t\t\t},\n\t\t\tanalyticsLabel: 'salescenterDeletePage',\n\t\t\tsource: source,\n\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t\tcode: page.code,\n\t\t};\n\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tRest.callMethod(method, data).then((result) =>\n\t\t\t{\n\t\t\t\tresolve(result);\n\t\t\t\tManager.showNotification(BX.message('SALESCENTER_MANAGER_HIDE_URL_SUCCESS'));\n\t\t\t}).catch((result) =>\n\t\t\t{\n\t\t\t\treject(result);\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic deleteUrl(page)\n\t{\n\t\tconst method = 'salescenter.page.delete';\n\t\tconst data = {\n\t\t\tid: page.id,\n\t\t\tanalyticsLabel: 'salescenterDeletePage',\n\t\t\tsource: 'other',\n\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t};\n\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tRest.callMethod(method, data).then((result) =>\n\t\t\t{\n\t\t\t\tresolve(result);\n\t\t\t\tManager.showNotification(BX.message('SALESCENTER_MANAGER_DELETE_URL_SUCCESS'));\n\t\t\t}).catch((result) =>\n\t\t\t{\n\t\t\t\treject(result);\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic editLandingPage(pageId, siteId = Manager.connectedSiteId)\n\t{\n\t\twindow.open(`/shop/stores/site/${siteId}/view/${pageId}/`, '_blank');\n\t}\n\n\tstatic openSlider(url, options): undefined | Promise\n\t{\n\t\tif (!Type.isStringFilled(url))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (url.startsWith('feedback:'))\n\t\t{\n\t\t\tconst feedbackType = url.slice(9);\n\t\t\tswitch (feedbackType)\n\t\t\t{\n\t\t\t\tcase FeedbackType.FEEDBACK:\n\t\t\t\tcase FeedbackType.PAYSYSTEM_OFFER:\n\t\t\t\tcase FeedbackType.DELIVERY_OFFER:\n\t\t\t\t{\n\t\t\t\t\tconst formConfig = {\n\t\t\t\t\t\tfeedback_type: feedbackType,\n\t\t\t\t\t\tsender_page: null,\n\t\t\t\t\t};\n\n\t\t\t\t\treturn new Promise(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tManager.#showFeedbackForm(formConfig);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (!Type.isPlainObject(options))\n\t\t{\n\t\t\toptions = {};\n\t\t}\n\t\toptions = { ...{ cacheable: false, allowChangeHistory: false, events: {} }, ...options };\n\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif (Type.isString(url) && url.length > 1)\n\t\t\t{\n\t\t\t\toptions.events.onClose = function(event)\n\t\t\t\t{\n\t\t\t\t\tresolve(event.getSlider());\n\t\t\t\t};\n\t\t\t\tBX.SidePanel.Instance.open(url, options);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic getOrdersListUrl(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tif (Manager.sessionId > 0)\n\t\t{\n\t\t\tparams['sessionId'] = Manager.sessionId;\n\t\t}\n\n\t\treturn (new Uri('/saleshub/orders/')).setQueryParams(params).toString();\n\t}\n\n\tstatic getPaymentsListUrl(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tif (Manager.sessionId > 0)\n\t\t{\n\t\t\tparams['sessionId'] = Manager.sessionId;\n\t\t}\n\n\t\treturn (new Uri('/saleshub/payments/')).setQueryParams(params).toString();\n\t}\n\n\tstatic showOrdersList(params)\n\t{\n\t\treturn Manager.openSlider(Manager.getOrdersListUrl(params));\n\t}\n\n\tstatic showPaymentsList(params)\n\t{\n\t\treturn Manager.openSlider(Manager.getPaymentsListUrl(params));\n\t}\n\n\tstatic getOrderAddUrl(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tif (Manager.sessionId > 0)\n\t\t{\n\t\t\tparams['sessionId'] = Manager.sessionId;\n\t\t}\n\n\t\treturn (new Uri('/saleshub/orders/order/')).setQueryParams(params).toString();\n\t}\n\n\tstatic showOrderAdd(params)\n\t{\n\t\treturn Manager.openSlider(Manager.getOrderAddUrl(params));\n\t}\n\n\tstatic showOrdersListAfterCreate(orderId)\n\t{\n\t\tlet ordersListUrl = Manager.getOrdersListUrl({ orderId: orderId });\n\t\tlet listSlider = BX.SidePanel.Instance.getSlider(ordersListUrl);\n\t\tif (!listSlider)\n\t\t{\n\t\t\tordersListUrl = Manager.getOrdersListUrl({ orderId: orderId });\n\t\t\tlistSlider = BX.SidePanel.Instance.getSlider(ordersListUrl);\n\t\t}\n\t\tlet orderAddUrl = Manager.getOrderAddUrl();\n\t\tlet addSlider = BX.SidePanel.Instance.getSlider(orderAddUrl);\n\t\tif (addSlider)\n\t\t{\n\t\t\taddSlider.destroy();\n\t\t}\n\n\t\tif (!listSlider)\n\t\t{\n\t\t\tManager.showOrdersList({ orderId: orderId });\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttop.BX.onCustomEvent(listSlider.getFrameWindow(), 'salescenter-order-create', [\n\t\t\t\t{\n\t\t\t\t\torderId: orderId\n\t\t\t\t},\n\t\t\t]);\n\t\t}\n\t}\n\n\tstatic initPull()\n\t{\n\t\tif (BX.PULL)\n\t\t{\n\t\t\tManager.isPullInited = true;\n\t\t\tBX.PULL.subscribe({\n\t\t\t\tmoduleId: 'salescenter',\n\t\t\t\tcommand: 'SETCONNECTEDSITE',\n\t\t\t\tcallback: (params) =>\n\t\t\t\t{\n\t\t\t\t\tManager.init(params);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic openControlPanel()\n\t{\n\t\twindow.open('/saleshub/', '_blank');\n\t}\n\n\tstatic getFormAddUrl(formId = 0)\n\t{\n\t\treturn (new Uri(`/crm/webform/edit/${parseInt(formId, 10)}/`)).setQueryParams({ ACTIVE: 'Y', RELOAD_LIST: 'N' }).toString();\n\t}\n\n\tstatic addNewForm()\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tManager.openSlider(Manager.getFormAddUrl()).then((slider) =>\n\t\t\t{\n\t\t\t\tconst formId = slider.getData().get('formId');\n\t\t\t\tif (formId > 0)\n\t\t\t\t{\n\t\t\t\t\tManager.addNewFormPage(formId).then((result) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t}).catch((reason) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treject(reason);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic addNewFormPage(formId)\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tconst popupId = 'salescenter-add-new-page-popup';\n\t\t\tManager.getPopup({\n\t\t\t\tid: popupId,\n\t\t\t\ttitle: BX.message('SALESCENTER_MANAGER_NEW_PAGE_POPUP_TITLE'),\n\t\t\t\ttext: BX.message('SALESCENTER_MANAGER_NEW_PAGE_WAIT'),\n\t\t\t}).show();\n\n\t\t\tRest.callMethod('salescenter.page.addformpage', {\n\t\t\t\tformId: formId,\n\t\t\t}).then((result) =>\n\t\t\t{\n\t\t\t\tif (result.answer.result.page)\n\t\t\t\t{\n\t\t\t\t\tresolve(result.answer.result.page);\n\t\t\t\t\tlet landingId = result.answer.result.page.landingId;\n\t\t\t\t\tconst popup = Manager.getPopup({\n\t\t\t\t\t\tid: popupId,\n\t\t\t\t\t\ttitle: BX.message('SALESCENTER_MANAGER_NEW_PAGE_POPUP_TITLE'),\n\t\t\t\t\t\ttext: BX.message('SALESCENTER_MANAGER_NEW_PAGE_COMPLETE'),\n\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\tnew BX.PopupWindowButton({\n\t\t\t\t\t\t\t\ttext: BX.message('SALESCENTER_MANAGER_CONNECT_POPUP_GO_BUTTON'),\n\t\t\t\t\t\t\t\tclassName: 'ui-btn ui-btn-md ui-btn-primary',\n\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\tclick: () =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tManager.editLandingPage(landingId);\n\t\t\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\t\t\t\t\tpopup.show();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tManager.getPopup({\n\t\t\t\t\t\tid: popupId,\n\t\t\t\t\t\ttitle: BX.message('SALESCENTER_MANAGER_ERROR_POPUP'),\n\t\t\t\t\t})\n\t\t\t\t\t\t.show();\n\t\t\t\t\treject();\n\t\t\t\t}\n\t\t\t}).catch((error) =>\n\t\t\t{\n\t\t\t\tManager.getPopup({\n\t\t\t\t\tid: popupId,\n\t\t\t\t\ttitle: BX.message('SALESCENTER_MANAGER_ERROR_POPUP'),\n\t\t\t\t\ttext: error,\n\t\t\t\t})\n\t\t\t\t.show();\n\t\t\t\treject(error);\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic openConnectedSite(isRecycle = false)\n\t{\n\t\tif (Manager.connectedSiteId > 0)\n\t\t{\n\t\t\tlet url = new Uri(`/shop/stores/site/${Manager.connectedSiteId}/`);\n\t\t\tlet params = {\n\t\t\t\tapply_filter: 'y',\n\t\t\t};\n\t\t\tif (isRecycle)\n\t\t\t{\n\t\t\t\tparams.DELETED = 'Y';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tparams.clear_filter = 'y';\n\t\t\t}\n\t\t\turl.setQueryParams(params);\n\t\t\twindow.open(url.toString(), '_blank');\n\t\t}\n\t}\n\n\tstatic openLimitShopNumberInfoHelper()\n\t{\n\t\tBX.UI.InfoHelper.show('limit_shop_number');\n\t}\n\n\tstatic openFreeTarifInfoHelper()\n\t{\n\t\tBX.UI.InfoHelper.show('limit_sites_free');\n\t}\n\n\tstatic openFreeDomenInfoHelper()\n\t{\n\t\tBX.UI.InfoHelper.show('limit_free_domen');\n\t}\n\n\tstatic openConfirmEmailInfoHelper()\n\t{\n\t\tBX.UI.InfoHelper.show('limit_sites_confirm_email');\n\t}\n\n\tstatic openHowItWorks(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=9289135', 'chat_connect');\n\t}\n\n\tstatic openHowCrmStoreWorks(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=13651476', 'crmstore_how_works');\n\t}\n\n\tstatic openHowCrmFormsWorks(event, url)\n\t{\n\t\turl = url || 'redirect=detail&code=13774372';\n\t\tManager.openHelper(event, url, 'crmforms_how_works');\n\t}\n\n\tstatic openHowSmsWorks(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=9680407', 'sms_connect');\n\t}\n\n\tstatic openHowToConfigOpenLines(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=7872935', 'openlines_connect');\n\t}\n\n\tstatic openHowToConfigDefaultPaySystem(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=10460164', 'pay_system_connect');\n\t}\n\n\tstatic openHowToConfigPaySystem(event, code)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=' + code, 'pay_system_connect');\n\t}\n\n\tstatic openHowToConfigCashboxPaySystem(event, code)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=' + code, 'pay_system_cashbox_connect');\n\t}\n\n\tstatic openHowToUseOfflineCashBox(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=11271760', 'cashbox_connect');\n\t}\n\n\tstatic openHowToConfigCashBox(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=11120562', 'cashbox_connect');\n\t}\n\n\tstatic openHowToConfigCheckboxCashBox(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=12306679', 'cashbox_connect');\n\t}\n\n\tstatic openHowToConfigBusinessRuCashBox(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=12806492', 'cashbox_connect');\n\t}\n\n\tstatic openHowToConfigRobokassaCashBox(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=12849128', 'cashbox_connect');\n\t}\n\n\tstatic openHowToConfigYooKassaCashBox(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=17776800', 'cashbox_connect');\n\t}\n\n\tstatic openHowToSetupCheckboxCashBoxAndKeys(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=12334663', 'cashbox_connect');\n\t}\n\n\tstatic openHowToSell(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=17615318', 'crmstore_connect');\n\t}\n\n\tstatic openHowToWork(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=11553526', 'companycontacts_connect');\n\t}\n\n\tstatic openWhatClientSee(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=11278264', 'client_view');\n\t}\n\n\tstatic openHowPayDealWorks(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=17615318', 'pay_deal');\n\t}\n\n\tstatic openHowPaySmartInvoiceWorks(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=17615318', 'pay_smart_invoice');\n\t}\n\n\tstatic openHowTerminalWorks(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=18537646', 'terminal');\n\t}\n\n\tstatic openFormPagesHelp(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=9606749', 'forms');\n\t}\n\n\tstatic openCommonPagesHelp(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=9604717', 'common_pages');\n\t}\n\n\tstatic openBitrix24NotificationsHelp(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=17615266', 'bitrix24_notifications');\n\t}\n\n\tstatic openBitrix24NotificationsWorks(event)\n\t{\n\t\tManager.openHelper(event, 'redirect=detail&code=13655934', 'bitrix24_notifications_work');\n\t}\n\n\tstatic openHelper(event = null, url = '', analyticsArticle = '')\n\t{\n\t\tif (event)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tif (analyticsArticle)\n\t\t{\n\t\t\tManager.addAnalyticAction({\n\t\t\t\tanalyticsLabel: 'salescenterOpenHelp',\n\t\t\t\tarticle: analyticsArticle\n\t\t\t}).then(() =>\n\t\t\t{\n\t\t\t\tif (top.BX.Helper)\n\t\t\t\t{\n\t\t\t\t\ttop.BX.Helper.show(url);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse if (top.BX.Helper)\n\t\t{\n\t\t\ttop.BX.Helper.show(url);\n\t\t}\n\t}\n\n\tstatic openFeedbackForm(event): void\n\t{\n\t\tconst formConfig = {\n\t\t\tfeedback_type: FeedbackType.FEEDBACK,\n\t\t\tsender_page: null,\n\t\t};\n\n\t\tManager.openFeedbackFormParams(event, formConfig);\n\t}\n\n\tstatic openFeedbackFormParams(event, params): void\n\t{\n\t\tif (event && Type.isFunction(event.preventDefault))\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tconst formConfig = Type.isPlainObject(params) ? params : {};\n\n\t\tManager.#showFeedbackForm(formConfig);\n\t}\n\n\tstatic openFeedbackPayOrderForm(event)\n\t{\n\t\tif (event && Type.isFunction(event.preventDefault))\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tconst formConfig = {\n\t\t\tfeedback_type: FeedbackType.PAY_ORDER,\n\t\t\tsender_page: null,\n\t\t};\n\n\t\tManager.#showFeedbackForm(formConfig);\n\t}\n\n\tstatic openFeedbackDeliveryOfferForm(event)\n\t{\n\t\tif (event && Type.isFunction(event.preventDefault))\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tconst formConfig = {\n\t\t\tfeedback_type: FeedbackType.DELIVERY_OFFER,\n\t\t\tsender_page: null,\n\t\t};\n\n\t\tManager.#showFeedbackForm(formConfig);\n\t}\n\n\tstatic openIntegrationRequestForm(event)\n\t{\n\t\tlet params = Manager.#getDataSettingFromEventDomNode(event);\n\n\t\tif (event && Type.isFunction(event.preventDefault))\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tparams.feedback_type = FeedbackType.INTEGRATION_REQUEST;\n\n\t\tManager.#showFeedbackForm(params);\n\n\t/*\nlet url = (new Uri('/bitrix/components/bitrix/salescenter.feedback/slider.php'));\n\nurl.setQueryParams({feedback_type: 'integration_request'});\nurl.setQueryParams(params);\n\nreturn Manager.openSlider(url.toString(), {width: 735});\n */\n\t}\n\n\tstatic async #showFeedbackForm(formConfig: Object): void\n\t{\n\t\ttry\n\t\t{\n\t\t\tconst response = await Ajax.runComponentAction(\n\t\t\t\t'bitrix:salescenter.feedback',\n\t\t\t\t'getFormParams',\n\t\t\t\t{\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: formConfig,\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tconst { Form } = await Runtime.loadExtension(['ui.feedback.form']);\n\n\t\t\tconst formIdNumber = Math.round(Math.random() * 1000);\n\t\t\tconst data = response.data;\n\t\t\tdata.id += formIdNumber.toString();\n\t\t\tForm.open(data);\n\t\t}\n\t\tcatch (err)\n\t\t{\n\t\t\tawait console.error(err);\n\t\t}\n\t}\n\n\tstatic #parseParamsDataSetting(settings): Object\n\t{\n\t\tconst result = {};\n\n\t\tif (Type.isStringFilled(settings))\n\t\t{\n\t\t\tlet fields = settings.split(',');\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tfor (let inx in fields)\n\t\t\t\t{\n\t\t\t\t\tif (!fields.hasOwnProperty(inx))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet [name, value] = fields[inx].split(':');\n\n\t\t\t\t\tif (Type.isStringFilled(name))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult[name] = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tstatic #getDataSettingFromEventDomNode(event): ?Object\n\t{\n\t\tlet node = null;\n\t\tif (Type.isDomNode(event.button))\n\t\t{\n\t\t\tnode = event.button;\n\t\t}\n\t\telse if (Type.isDomNode(event.target))\n\t\t{\n\t\t\tnode = event.target;\n\t\t}\n\n\t\tif (Type.isObject(node))\n\t\t{\n\t\t\tlet dataset = node.dataset ? node.dataset : {};\n\t\t\tlet settings = dataset.hasOwnProperty('managerOpenintegrationrequestformParams') ? dataset.managerOpenintegrationrequestformParams : '';\n\n\t\t\treturn this.#parseParamsDataSetting(settings);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tstatic openApplication(params = {})\n\t{\n\t\tconst url = new Uri('/saleshub/app/');\n\t\tif (Type.isPlainObject(params))\n\t\t{\n\t\t\turl.setQueryParams(params);\n\t\t}\n\n\t\tconst sliderOptions = params.hasOwnProperty('sliderOptions') ? params.sliderOptions : {};\n\t\tif (!sliderOptions.hasOwnProperty('width'))\n\t\t{\n\t\t\tsliderOptions.width = 1140;\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tManager.openSlider(url.toString(), sliderOptions).then((slider) => {\n\t\t\t\tresolve(slider.getData());\n\t\t\t}).catch((reason) => {});\n\t\t});\n\t}\n\n\tstatic addAnalyticAction(params)\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif (!Type.isPlainObject(params) || !params.analyticsLabel)\n\t\t\t{\n\t\t\t\treject('wrong params');\n\t\t\t}\n\t\t\tparams = { ...params, ...{ action: 'salescenter.manager.addAnalytic', sessid: BX.bitrix_sessid() } };\n\t\t\tlet request = new XMLHttpRequest();\n\t\t\tlet url = new Uri('/bitrix/services/main/ajax.php');\n\t\t\turl.setQueryParams(params);\n\t\t\trequest.open('GET', url.toString());\n\t\t\trequest.onload = () =>\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\trequest.onerror = () =>\n\t\t\t{\n\t\t\t\treject();\n\t\t\t};\n\t\t\trequest.send();\n\t\t});\n\t}\n\n\tstatic getFieldsMap()\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif (Manager.fieldsMap !== null)\n\t\t\t{\n\t\t\t\tresolve(Manager.fieldsMap);\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tAjax.runAction('salescenter.manager.getFieldsMap', {\n\t\t\t\tanalyticsLabel: 'salescenterFieldsMapLoading',\n\t\t\t}).then((response) =>\n\t\t\t{\n\t\t\t\tManager.fieldsMap = response.data.fields;\n\t\t\t\tresolve(response.data.fields);\n\t\t\t}).catch((response) =>\n\t\t\t{\n\t\t\t\treject(response.errors);\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic getPageUrl(pageId, entities, context = null): ?String\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif (!Type.isInteger(pageId))\n\t\t\t{\n\t\t\t\tresolve(null);\n\t\t\t}\n\n\t\t\tif (!Type.isPlainObject(entities) || entities.length <= 0)\n\t\t\t{\n\t\t\t\tresolve(null);\n\t\t\t}\n\n\t\t\tAjax.runAction('salescenter.manager.getPageUrl', {\n\t\t\t\tdata: {\n\t\t\t\t\tpageId: pageId,\n\t\t\t\t\tentities: entities\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: 'salescenterGetPageUrlWithParameters',\n\t\t\t\tgetParameters: {\n\t\t\t\t\tcontext: context\n\t\t\t\t}\n\t\t\t}).then((response) =>\n\t\t\t{\n\t\t\t\tresolve(response.data.pageUrl);\n\t\t\t}).catch((response) =>\n\t\t\t{\n\t\t\t\treject(response.errors);\n\t\t\t});\n\t\t});\n\t}\n}\n"],"names":["FeedbackType","Manager","options","connectedSiteId","parseInt","sessionId","Type","isString","siteTemplateCode","connectPath","isBoolean","isSitePublished","isSiteExists","isOrderPublicUrlAvailable","isPullInited","Event","ready","initPull","top","BX","Landing","PageObject","Main","Promise","resolve","reject","Rest","callMethod","then","result","init","answer","reason","params","url","Uri","isPlainObject","analyticsLabel","setQueryParams","openSlider","toString","width","tpl","id","firePublicConnectedSiteEvent","onCustomEvent","title","text","buttons","popup","PopupWindowManager","getPopupById","content","setContent","setButtons","PopupWindow","zIndex","className","autoHide","closeByEsc","padding","closeIcon","overlay","lightShadow","getPopup","message","PopupWindowButton","events","click","openConnectedSite","close","show","event","clipboard","copy","target","showCopyLinkPopup","page","getAddUrlPopup","templateEngine","$emit","addUrlResolve","addingCustomPage","pageId","isSaved","isFunction","showNotification","loadExt","Vue","create","el","document","createElement","template","mounted","popupNode","$el","$app","addUrlPopup","getPopupContainer","contains","urlFieldsPopupWindow","urlFieldsPopupMenu","PopupMenu","getMenuById","popupWindow","dataset","parentNode","classList","initPopupTemplate","contentPadding","titleBar","contentColor","autoHideHandler","handleAddUrlPopupAutoHide","onPopupClose","newPageId","getElementById","value","resolveAddPopup","onPopupDestroy","fields","method","source","landingId","siteId","addAnalyticAction","type","isWebform","code","Env","getInstance","setOptions","site_id","UI","Panel","URLList","addPage","hidden","Notification","Center","notify","data","window","open","isStringFilled","startsWith","feedbackType","slice","FEEDBACK","PAYSYSTEM_OFFER","DELIVERY_OFFER","formConfig","feedback_type","sender_page","cacheable","allowChangeHistory","length","onClose","getSlider","SidePanel","Instance","getOrdersListUrl","getPaymentsListUrl","getOrderAddUrl","orderId","ordersListUrl","listSlider","orderAddUrl","addSlider","destroy","showOrdersList","getFrameWindow","PULL","subscribe","moduleId","command","callback","formId","ACTIVE","RELOAD_LIST","getFormAddUrl","slider","getData","get","addNewFormPage","popupId","editLandingPage","error","isRecycle","apply_filter","DELETED","clear_filter","InfoHelper","openHelper","analyticsArticle","preventDefault","article","Helper","openFeedbackFormParams","PAY_ORDER","INTEGRATION_REQUEST","sliderOptions","hasOwnProperty","action","sessid","bitrix_sessid","request","XMLHttpRequest","onload","onerror","send","fieldsMap","Ajax","runAction","response","errors","entities","context","isInteger","getParameters","pageUrl","runComponentAction","mode","Runtime","loadExtension","Form","formIdNumber","Math","round","random","console","settings","split","inx","name","e","node","isDomNode","button","isObject","managerOpenintegrationrequestformParams","popupOuterLink","hideCopyLinkTimeout","clearTimeout","destroyCopyLinkTimeout","darkMode","setTimeout","hide","uniquePopupId"],"mappings":"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"}