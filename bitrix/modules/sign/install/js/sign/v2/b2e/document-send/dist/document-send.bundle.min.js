this.BX=this.BX||{};this.BX.Sign=this.BX.Sign||{};this.BX.Sign.V2=this.BX.Sign.V2||{};(function(e,t,i,r,a,n,s,l,o,c,d,u,p,v,b,h,f){"use strict";var g,y,m,T,H;function _(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_=function t(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,r=Object.defineProperty||function(e,t,i){e[t]=i.value},a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function o(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function e(t,i,r){return t[i]=r}}function c(e,t,i,a){var n=t&&t.prototype instanceof p?t:p,s=Object.create(n.prototype),l=new S(a||[]);return r(s,"_invoke",{value:H(e,i,l)}),s}function d(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function p(){}function v(){}function b(){}var h={};o(h,n,(function(){return this}));var f=Object.getPrototypeOf,g=f&&f(f(G([])));g&&g!==t&&i.call(g,n)&&(h=g);var y=b.prototype=p.prototype=Object.create(h);function m(e){["next","throw","return"].forEach((function(t){o(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(r,n,s,l){var o=d(e[r],e,n);if("throw"!==o.type){var c=o.arg,u=c.value;return u&&"object"==babelHelpers["typeof"](u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){a("next",e,s,l)}),(function(e){a("throw",e,s,l)})):t.resolve(u).then((function(e){c.value=e,s(c)}),(function(e){return a("throw",e,s,l)}))}l(o.arg)}var n;r(this,"_invoke",{value:function e(i,r){function s(){return new t((function(e,t){a(i,r,e,t)}))}return n=n?n.then(s,s):s()}})}function H(e,t,i){var r="suspendedStart";return function(a,n){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw n;return E()}for(i.method=a,i.arg=n;;){var s=i.delegate;if(s){var l=w(s,i);if(l){if(l===u)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===r)throw r="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r="executing";var o=d(e,t,i);if("normal"===o.type){if(r=i.done?"completed":"suspendedYield",o.arg===u)continue;return{value:o.arg,done:i.done}}"throw"===o.type&&(r="completed",i.method="throw",i.arg=o.arg)}}}function w(e,t){var i=t.method,r=e.iterator[i];if(undefined===r)return t.delegate=null,"throw"===i&&e.iterator["return"]&&(t.method="return",t.arg=undefined,w(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),u;var a=d(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var n=a.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,u):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function G(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=undefined,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:undefined,done:!0}}return v.prototype=b,r(y,"constructor",{value:b,configurable:!0}),r(b,"constructor",{value:v,configurable:!0}),v.displayName=o(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,o(e,l,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},m(T.prototype),o(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,i,r,a,n){void 0===n&&(n=Promise);var s=new T(c(t,i,r,a),n);return e.isGeneratorFunction(i)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},m(y),o(y,l,"Generator"),o(y,n,(function(){return this})),o(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var r in t)i.push(r);return i.reverse(),function e(){for(;i.length;){var r=i.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=G,S.prototype={constructor:S,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var r=this;function a(e,i){return l.type="throw",l.arg=t,r.next=e,i&&(r.method="next",r.arg=undefined),!!i}for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n],l=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var o=i.call(s,"catchLoc"),c=i.call(s,"finallyLoc");if(o&&c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function e(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=r&&r<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=t,l.arg=r,s?(this.method="next",this.next=s.finallyLoc,u):this.complete(l)},complete:function e(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),u},finish:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),u}},catch:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc===t){var a=r.completion;if("throw"===a.type){var n=a.arg;P(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function e(t,i,r){return this.delegate={iterator:G(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=undefined),u}},e}function w(e,t){P(e,t);t.add(e)}function I(e,t,i){P(e,t);t.set(e,i)}function P(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function S(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var G=Object.freeze({User:"user",Company:"company",Role:"structure-node-role"});var E=new WeakMap;var L=new WeakMap;var F=new WeakMap;var N=new WeakMap;var k=new WeakMap;var M=new WeakMap;var D=new WeakSet;var x=new WeakSet;var O=new WeakSet;var z=new WeakSet;var A=new WeakSet;var C=new WeakSet;var W=new WeakSet;var R=new WeakSet;var U=function(){function e(t){babelHelpers.classCallCheck(this,e);w(this,R);w(this,W);w(this,C);w(this,A);w(this,z);w(this,O);w(this,x);w(this,D);I(this,E,{writable:true,value:void 0});I(this,L,{writable:true,value:{container:HTMLDivElement=null,avatar:HTMLDivElement=null,title:{container:HTMLDivElement=null,header:HTMLDivElement=null,footer:HTMLDivElement=null}}});I(this,F,{writable:true,value:null});I(this,N,{writable:true,value:null});I(this,k,{writable:true,value:null});I(this,M,{writable:true,value:null});babelHelpers.classPrivateFieldSet(this,E,new d.Api);babelHelpers.classPrivateFieldSet(this,k,t);babelHelpers.classPrivateFieldGet(this,L).container=this.getLayout();if(l.Type.isStringFilled(t===null||t===void 0?void 0:t.entityType)&&l.Type.isInteger(t===null||t===void 0?void 0:t.entityId)){S(this,D,B).call(this)}}babelHelpers.createClass(e,[{key:"setItemData",value:function e(t){if(babelHelpers.classPrivateFieldGet(this,k).entityId===t.entityId&&babelHelpers.classPrivateFieldGet(this,k).entityType===t.entityType){return}babelHelpers.classPrivateFieldSet(this,k,t);if(l.Type.isStringFilled(t===null||t===void 0?void 0:t.entityType)&&l.Type.isInteger(t===null||t===void 0?void 0:t.entityId)){S(this,D,B).call(this)}}},{key:"getLayout",value:function e(){if(babelHelpers.classPrivateFieldGet(this,L).container){return babelHelpers.classPrivateFieldGet(this,L).container}var t=babelHelpers.classPrivateFieldGet(this,k).entityType===G.User?" --user":"";babelHelpers.classPrivateFieldGet(this,L).avatar=l.Tag.render(g||(g=babelHelpers.taggedTemplateLiteral(['<div class="sign-b2e-send__party_item-info-avatar','"></div>'])),t);babelHelpers.classPrivateFieldGet(this,L).title.header=l.Tag.render(y||(y=babelHelpers.taggedTemplateLiteral(['<div class="sign-b2e-send__party_item-info-header"></div>'])));babelHelpers.classPrivateFieldGet(this,L).title.footer=l.Tag.render(m||(m=babelHelpers.taggedTemplateLiteral(['<div class="sign-b2e-send__party_item-info-footer"></div>'])));babelHelpers.classPrivateFieldGet(this,L).title.container=l.Tag.render(T||(T=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sign-b2e-send__party_item-info-title">\n\t\t\t\t',"\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),babelHelpers.classPrivateFieldGet(this,L).title.header,babelHelpers.classPrivateFieldGet(this,L).title.footer);babelHelpers.classPrivateFieldGet(this,L).container=l.Tag.render(H||(H=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sign-b2e-send__party_item-info">\n\t\t\t\t',"\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),babelHelpers.classPrivateFieldGet(this,L).avatar,babelHelpers.classPrivateFieldGet(this,L).title.container);return babelHelpers.classPrivateFieldGet(this,L).container}}]);return e}();function B(){return j.apply(this,arguments)}function j(){j=babelHelpers.asyncToGenerator(_().mark((function e(){return _().wrap((function e(t){while(1)switch(t.prev=t.next){case 0:S(this,R,J).call(this);t.t0=babelHelpers.classPrivateFieldGet(this,k).entityType;t.next=t.t0===G.Company?4:t.t0===G.User?7:t.t0===G.Role?10:13;break;case 4:t.next=6;return S(this,x,V).call(this);case 6:return t.abrupt("break",14);case 7:t.next=9;return S(this,O,X).call(this);case 9:return t.abrupt("break",14);case 10:t.next=12;return S(this,z,Y).call(this);case 12:return t.abrupt("break",14);case 13:return t.abrupt("break",14);case 14:S(this,A,q).call(this);S(this,W,$).call(this);case 16:case"end":return t.stop()}}),e,this)})));return j.apply(this,arguments)}function V(){var e=this;return babelHelpers.classPrivateFieldGet(this,E).loadB2eCompanyList().then((function(t){if(l.Type.isObject(t.companies)&&l.Type.isArray(t.companies)){var i;var r=(i=t.companies.filter((function(t){return t.id===babelHelpers.classPrivateFieldGet(e,k).entityId}))[0])!==null&&i!==void 0?i:null;if(r===null){return}var a=l.Type.isBoolean(t===null||t===void 0?void 0:t.showTaxId)&&t!==null&&t!==void 0&&t.showTaxId&&r!==null&&r!==void 0&&r.rqInn?l.Loc.getMessage("SIGN_DOCUMENT_SUMMARY_COMPANY_INN",{"%innValue%":l.Text.encode(r===null||r===void 0?void 0:r.rqInn)}):null;babelHelpers.classPrivateFieldSet(e,M,{header:r===null||r===void 0?void 0:r.title,footer:a,avatar:null});S(e,A,q).call(e)}S(e,W,$).call(e)}))["catch"]((function(e){console.log(e)}))}function X(){var e=this;return new Promise((function(t){babelHelpers.classPrivateFieldSet(e,F,new c.Dialog({entities:[{id:G.User}],events:{onLoad:function i(r){var a;var n=(a=babelHelpers.classPrivateFieldGet(e,F).getSelectedItems()[0])!==null&&a!==void 0?a:null;if(l.Type.isObject(n)){var s,o,c,d,u,p;var v=(s=n===null||n===void 0?void 0:(o=n.customData)===null||o===void 0?void 0:o.get("lastName"))!==null&&s!==void 0?s:"";babelHelpers.classPrivateFieldSet(e,M,{header:(n===null||n===void 0?void 0:(c=n.customData)===null||c===void 0?void 0:c.get("name"))+" "+v,footer:(d=n===null||n===void 0?void 0:(u=n.customData)===null||u===void 0?void 0:u.get("position"))!==null&&d!==void 0?d:"",avatar:(p=n===null||n===void 0?void 0:n.avatar)!==null&&p!==void 0?p:null});S(e,A,q).call(e)}S(e,W,$).call(e);t()}},preselectedItems:[[G.User,babelHelpers.classPrivateFieldGet(e,k).entityId]]}));babelHelpers.classPrivateFieldGet(e,F).load()}))}function Y(){var e=this;return new Promise((function(t){babelHelpers.classPrivateFieldSet(e,F,new c.Dialog({entities:[{id:G.Role,dynamicLoad:true}],events:{onLoad:function i(r){var a;var n=(a=babelHelpers.classPrivateFieldGet(e,F).getSelectedItems()[0])!==null&&a!==void 0?a:null;if(l.Type.isObject(n)){var s,o;babelHelpers.classPrivateFieldSet(e,M,{header:(s=n.title)!==null&&s!==void 0?s:"",footer:"",avatar:(o=n===null||n===void 0?void 0:n.avatar)!==null&&o!==void 0?o:null});S(e,A,q).call(e)}S(e,W,$).call(e);t()}},preselectedItems:[[G.Role,babelHelpers.classPrivateFieldGet(e,k).entityId]]}));babelHelpers.classPrivateFieldGet(e,F).load()}))}function q(){var e;if((e=babelHelpers.classPrivateFieldGet(this,M))!==null&&e!==void 0&&e.avatar){babelHelpers.classPrivateFieldGet(this,L).avatar.style.backgroundImage='url("'.concat(babelHelpers.classPrivateFieldGet(this,M).avatar,'")')}babelHelpers.classPrivateFieldGet(this,L).title.header.innerText=babelHelpers.classPrivateFieldGet(this,M).header;babelHelpers.classPrivateFieldGet(this,L).title.header.title=babelHelpers.classPrivateFieldGet(this,M).header;babelHelpers.classPrivateFieldGet(this,L).title.footer.innerText=babelHelpers.classPrivateFieldGet(this,M).footer;babelHelpers.classPrivateFieldGet(this,L).title.footer.title=babelHelpers.classPrivateFieldGet(this,M).footer}function K(){if(babelHelpers.classPrivateFieldGet(this,N)){return babelHelpers.classPrivateFieldGet(this,N)}babelHelpers.classPrivateFieldSet(this,N,new BX.Loader({target:babelHelpers.classPrivateFieldGet(this,L).container,mode:"inline",size:40}));return babelHelpers.classPrivateFieldGet(this,N)}function $(){babelHelpers.classPrivateFieldGet(this,L).title.container.style.display="flex";babelHelpers.classPrivateFieldGet(this,L).avatar.style.display="block";S(this,C,K).call(this).hide()}function J(){babelHelpers.classPrivateFieldGet(this,L).avatar.style.display="none";babelHelpers.classPrivateFieldGet(this,L).title.container.style.display="none";S(this,C,K).call(this).show(babelHelpers.classPrivateFieldGet(this,L).container)}var Q,Z,ee,te,ie,re,ae,ne,se,le,oe,ce,de,ue,pe,ve,be,he,fe,ge,ye,me;function Te(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Te=function t(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,r=Object.defineProperty||function(e,t,i){e[t]=i.value},a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function o(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function e(t,i,r){return t[i]=r}}function c(e,t,i,a){var n=t&&t.prototype instanceof p?t:p,s=Object.create(n.prototype),l=new P(a||[]);return r(s,"_invoke",{value:H(e,i,l)}),s}function d(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function p(){}function v(){}function b(){}var h={};o(h,n,(function(){return this}));var f=Object.getPrototypeOf,g=f&&f(f(S([])));g&&g!==t&&i.call(g,n)&&(h=g);var y=b.prototype=p.prototype=Object.create(h);function m(e){["next","throw","return"].forEach((function(t){o(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(r,n,s,l){var o=d(e[r],e,n);if("throw"!==o.type){var c=o.arg,u=c.value;return u&&"object"==babelHelpers["typeof"](u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){a("next",e,s,l)}),(function(e){a("throw",e,s,l)})):t.resolve(u).then((function(e){c.value=e,s(c)}),(function(e){return a("throw",e,s,l)}))}l(o.arg)}var n;r(this,"_invoke",{value:function e(i,r){function s(){return new t((function(e,t){a(i,r,e,t)}))}return n=n?n.then(s,s):s()}})}function H(e,t,i){var r="suspendedStart";return function(a,n){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw n;return G()}for(i.method=a,i.arg=n;;){var s=i.delegate;if(s){var l=_(s,i);if(l){if(l===u)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===r)throw r="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r="executing";var o=d(e,t,i);if("normal"===o.type){if(r=i.done?"completed":"suspendedYield",o.arg===u)continue;return{value:o.arg,done:i.done}}"throw"===o.type&&(r="completed",i.method="throw",i.arg=o.arg)}}}function _(e,t){var i=t.method,r=e.iterator[i];if(undefined===r)return t.delegate=null,"throw"===i&&e.iterator["return"]&&(t.method="return",t.arg=undefined,_(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),u;var a=d(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var n=a.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,u):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function S(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=undefined,t.done=!0,t};return a.next=a}}return{next:G}}function G(){return{value:undefined,done:!0}}return v.prototype=b,r(y,"constructor",{value:b,configurable:!0}),r(b,"constructor",{value:v,configurable:!0}),v.displayName=o(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,o(e,l,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},m(T.prototype),o(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,i,r,a,n){void 0===n&&(n=Promise);var s=new T(c(t,i,r,a),n);return e.isGeneratorFunction(i)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},m(y),o(y,l,"Generator"),o(y,n,(function(){return this})),o(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var r in t)i.push(r);return i.reverse(),function e(){for(;i.length;){var r=i.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=S,P.prototype={constructor:P,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var r=this;function a(e,i){return l.type="throw",l.arg=t,r.next=e,i&&(r.method="next",r.arg=undefined),!!i}for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n],l=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var o=i.call(s,"catchLoc"),c=i.call(s,"finallyLoc");if(o&&c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function e(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=r&&r<=s.finallyLoc&&(s=null);var l=s?s.completion:{};return l.type=t,l.arg=r,s?(this.method="next",this.next=s.finallyLoc,u):this.complete(l)},complete:function e(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),u},finish:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),u}},catch:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc===t){var a=r.completion;if("throw"===a.type){var n=a.arg;I(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function e(t,i,r){return this.delegate={iterator:S(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=undefined),u}},e}function He(e,t){var i=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=_e(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var r=0;var a=function e(){};return{s:a,n:function t(){if(r>=e.length)return{done:true};return{done:false,value:e[r++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n=true,s=false,l;return{s:function t(){i=i.call(e)},n:function e(){var t=i.next();n=t.done;return t},e:function e(t){s=true;l=t},f:function e(){try{if(!n&&i["return"]!=null)i["return"]()}finally{if(s)throw l}}}}function _e(e,t){if(!e)return;if(typeof e==="string")return we(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return we(e,t)}function we(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function Ie(e,t){Se(e,t);t.add(e)}function Pe(e,t,i){Se(e,t);t.set(e,i)}function Se(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Ge(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Ee=(Q={},babelHelpers.defineProperty(Q,s.MemberRole.assignee,{preSelectedType:s.Reminder.oncePerDay}),babelHelpers.defineProperty(Q,s.MemberRole.signer,{preSelectedType:s.Reminder.twicePerDay}),Q);var Le="idle";var Fe=new WeakMap;var Ne=new WeakMap;var ke=new WeakMap;var Me=new WeakMap;var De=new WeakMap;var xe=new WeakMap;var Oe=new WeakMap;var ze=new WeakMap;var Ae=new WeakMap;var Ce=new WeakMap;var We=new WeakMap;var Re=new WeakMap;var Ue=new WeakMap;var Be=new WeakMap;var je=new WeakMap;var Ve=new WeakMap;var Xe=new WeakMap;var Ye=new WeakMap;var qe=new WeakMap;var Ke=new WeakMap;var $e=new WeakSet;var Je=new WeakSet;var Qe=new WeakSet;var Ze=new WeakSet;var et=new WeakSet;var tt=new WeakSet;var it=new WeakSet;var rt=new WeakSet;var at=new WeakSet;var nt=new WeakSet;var st=new WeakSet;var lt=new WeakSet;var ot=new WeakSet;var ct=new WeakSet;var dt=new WeakSet;var ut=new WeakSet;var pt=new WeakSet;var vt=new WeakSet;var bt=new WeakSet;var ht=new WeakSet;var ft=new WeakSet;var gt=new WeakSet;var yt=new WeakSet;var mt=new WeakSet;var Tt=new WeakSet;var Ht=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Ie(babelHelpers.assertThisInitialized(i),Tt);Ie(babelHelpers.assertThisInitialized(i),mt);Ie(babelHelpers.assertThisInitialized(i),yt);Ie(babelHelpers.assertThisInitialized(i),gt);Ie(babelHelpers.assertThisInitialized(i),ft);Ie(babelHelpers.assertThisInitialized(i),ht);Ie(babelHelpers.assertThisInitialized(i),bt);Ie(babelHelpers.assertThisInitialized(i),vt);Ie(babelHelpers.assertThisInitialized(i),pt);Ie(babelHelpers.assertThisInitialized(i),ut);Ie(babelHelpers.assertThisInitialized(i),dt);Ie(babelHelpers.assertThisInitialized(i),ct);Ie(babelHelpers.assertThisInitialized(i),ot);Ie(babelHelpers.assertThisInitialized(i),lt);Ie(babelHelpers.assertThisInitialized(i),st);Ie(babelHelpers.assertThisInitialized(i),nt);Ie(babelHelpers.assertThisInitialized(i),at);Ie(babelHelpers.assertThisInitialized(i),rt);Ie(babelHelpers.assertThisInitialized(i),it);Ie(babelHelpers.assertThisInitialized(i),tt);Ie(babelHelpers.assertThisInitialized(i),et);Ie(babelHelpers.assertThisInitialized(i),Ze);Ie(babelHelpers.assertThisInitialized(i),Qe);Ie(babelHelpers.assertThisInitialized(i),Je);Ie(babelHelpers.assertThisInitialized(i),$e);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(i),"events",Object.freeze({onTemplateComplete:"onTemplateComplete"}));Pe(babelHelpers.assertThisInitialized(i),Fe,{writable:true,value:{container:HTMLDivElement=null,employeesTitle:HTMLParagraphElement}});Pe(babelHelpers.assertThisInitialized(i),Ne,{writable:true,value:{company:{id:"company",option:Le},employee:{id:"employee",option:Le},validation:{id:"validation",option:Le}}});Pe(babelHelpers.assertThisInitialized(i),ke,{writable:true,value:{company:U,representative:U,employees:a.UserParty,reviewers:a.UserParty,editor:U}});Pe(babelHelpers.assertThisInitialized(i),Me,{writable:true,value:null});Pe(babelHelpers.assertThisInitialized(i),De,{writable:true,value:void 0});Pe(babelHelpers.assertThisInitialized(i),xe,{writable:true,value:void 0});Pe(babelHelpers.assertThisInitialized(i),Oe,{writable:true,value:void 0});Pe(babelHelpers.assertThisInitialized(i),ze,{writable:true,value:null});Pe(babelHelpers.assertThisInitialized(i),Ae,{writable:true,value:void 0});Pe(babelHelpers.assertThisInitialized(i),Ce,{writable:true,value:void 0});Pe(babelHelpers.assertThisInitialized(i),We,{writable:true,value:void 0});Pe(babelHelpers.assertThisInitialized(i),Re,{writable:true,value:[]});Pe(babelHelpers.assertThisInitialized(i),Ue,{writable:true,value:{}});Pe(babelHelpers.assertThisInitialized(i),Be,{writable:true,value:void 0});Pe(babelHelpers.assertThisInitialized(i),je,{writable:true,value:false});Pe(babelHelpers.assertThisInitialized(i),Ve,{writable:true,value:false});Pe(babelHelpers.assertThisInitialized(i),Xe,{writable:true,value:0});Pe(babelHelpers.assertThisInitialized(i),Ye,{writable:true,value:void 0});Pe(babelHelpers.assertThisInitialized(i),qe,{writable:true,value:null});Pe(babelHelpers.assertThisInitialized(i),Ke,{writable:true,value:null});i.setEventNamespace("BX.Sign.V2.B2e.DocumentSend");babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),ke).company=new U({entityType:G.Company});babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),ke).representative=new U({entityType:G.User});babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),ke).editor=new U({entityType:G.User});babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),ke).employees=new a.UserParty({mode:"view",role:s.MemberRole.signer});babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),ke).reviewers=new a.UserParty({mode:"view",role:s.MemberRole.reviewer});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),De,new u.DocumentSummary({events:{changeTitle:function e(t){var r=t.getData();i.emit("changeTitle",r)},showEditor:function e(t){var r=t.getData();i.emit("showEditor",r)}}}));var r=e.region,n=e.languages,o=e.documentMode,c=e.isOpenedFromRobot,b=e.analytics,g=e.templateFolderId;babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Ve,c);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Oe,new p.LangSelector(r,n));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),xe,{});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Ye,b);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Be,o);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Xe,g);babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),Fe).employeesTitle=l.Tag.render(Z||(Z=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<p class="sign-b2e-send__party_signing-employees">\n\t\t\t\t',"\n\t\t\t</p>\n\t\t"])),l.Loc.getMessage("SIGN_SEND_SIGNING_EMPLOYEES",{"#CNT#":0}));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Ae,new h.ProgressBar({maxValue:100,value:0,colorTrack:"#dfe3e6"}));[s.MemberRole.assignee,s.MemberRole.signer].forEach((function(e){Ge(babelHelpers.assertThisInitialized(i),bt,Ut).call(babelHelpers.assertThisInitialized(i),e)}));if(!Ge(babelHelpers.assertThisInitialized(i),gt,Vt).call(babelHelpers.assertThisInitialized(i))){babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),qe,new f.HcmLinkPartyChecker({api:new d.Api}));babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),qe).subscribe("updateValidation",(function(e){return Ge(babelHelpers.assertThisInitialized(i),Tt,qt).call(babelHelpers.assertThisInitialized(i),e)}))}if(!Ge(babelHelpers.assertThisInitialized(i),gt,Vt).call(babelHelpers.assertThisInitialized(i))){babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),ze,new v.DatetimeLimitSelector);babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),ze).subscribe("beforeDateModify",(function(){i.emit("disableComplete")})).subscribe("afterDateModify",(function(){i.emit("enableComplete")}))}return i}babelHelpers.createClass(t,[{key:"getLayout",value:function e(){var t=this;var i=l.Tag.render(ee||(ee=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sign-b2e-send">\n\t\t\t\t<h1 class="sign-b2e-settings__header">',"</h1>\n\t\t\t</div>\n\t\t"])),l.Loc.getMessage("SIGN_DOCUMENT_SEND_HEADER_1"));var r=Ge(this,gt,Vt).call(this)?l.Loc.getMessage("SIGN_DOCUMENT_SUMMARY_TEMPLATE_TITLE"):l.Loc.getMessage("SIGN_DOCUMENT_SUMMARY_TITLE");babelHelpers.classPrivateFieldSet(this,Re,[]);var a=l.Tag.render(te||(te=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sign-b2e-settings__item">\n\t\t\t\t<p class="sign-b2e-settings__item_title">\n\t\t\t\t\t',"\n\t\t\t\t</p>\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),r,babelHelpers.classPrivateFieldGet(this,De).getLayout(),Ge(this,Qe,It).call(this));babelHelpers.classPrivateFieldGet(this,Re).push(a);var n=null;if(!Ge(this,gt,Vt).call(this)){n=l.Tag.render(ie||(ie=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="sign-b2e-settings__item">\n\t\t\t\t\t<p class="sign-b2e-settings__item_title">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</p>\n\t\t\t\t\t","\n\t\t\t\t\t",'\n\t\t\t\t\t<div class="sign-b2e-send__config-container">\n\t\t\t\t\t\t',"\n\t\t\t\t\t\t","\n\t\t\t\t\t</div>\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t"])),l.Loc.getMessage("SIGN_DOCUMENT_SEND_SECOND_PARTY"),babelHelpers.classPrivateFieldGet(this,Fe).employeesTitle,babelHelpers.classPrivateFieldGet(this,ke).employees.getLayout(),Ge(this,dt,At).call(this,"employee"),Ge(this,vt,Rt).call(this,s.MemberRole.signer),babelHelpers.classPrivateFieldGet(this,qe).render());babelHelpers.classPrivateFieldGet(this,Re).push(n)}var o=Ge(this,gt,Vt).call(this)?l.Loc.getMessage("SIGN_DOCUMENT_SEND_FIRST_PARTY_TEMPLATE"):l.Loc.getMessage("SIGN_DOCUMENT_SEND_FIRST_PARTY");var c=l.Tag.render(re||(re=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sign-b2e-settings__item">\n\t\t\t\t<p class="sign-b2e-settings__item_title">\n\t\t\t\t\t','\n\t\t\t\t</p>\n\t\t\t\t<div class="sign-b2e-send__company-items">\n\t\t\t\t\t<div class="sign-b2e-send__company-items_flex">\n\t\t\t\t\t\t<p class="sign-b2e-send__company-items_item-title">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<span class="sign-b2e-send__company-items_shrunk"></span>\n\t\t\t\t\t\t<p class="sign-b2e-send__company-items_item-title">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="sign-b2e-send__company-items_flex">\n\t\t\t\t\t\t','\n\t\t\t\t\t\t<span class="sign-b2e-send__company-items_shrunk sign-b2e-send__party-item-separator">\n\t\t\t\t\t\t\t&#43;\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="sign-b2e-send__config-container">\n\t\t\t\t\t',"\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),o,l.Loc.getMessage("SIGN_SEND_SIGNING_COMPANY"),l.Loc.getMessage("SIGN_SEND_SIGNING_REPRESENTATIVE"),babelHelpers.classPrivateFieldGet(this,ke).company.getLayout(),babelHelpers.classPrivateFieldGet(this,ke).representative.getLayout(),Ge(this,dt,At).call(this,"company"),Ge(this,vt,Rt).call(this,s.MemberRole.assignee));babelHelpers.classPrivateFieldGet(this,Re).push(c);l.Dom.append(a,i);var d=Ge(this,gt,Vt).call(this)?l.Loc.getMessage("SIGN_SEND_SIGNING_VALIDATION_HEAD_REVIEWER_TEMPLATE"):l.Loc.getMessage("SIGN_SEND_SIGNING_VALIDATION_HEAD_REVIEWER");var u=babelHelpers.defineProperty({},s.MemberRole.editor,{header:l.Loc.getMessage("SIGN_SEND_SIGNING_VALIDATION_HEAD_EDITOR"),hint:l.Loc.getMessage("SIGN_SEND_SIGNING_VALIDATION_TITLE_EDITOR")});babelHelpers.classPrivateFieldGet(this,Me).validation.forEach((function(e){var r=e.role;if(r===s.MemberRole.reviewer){return}var a=babelHelpers.classPrivateFieldGet(t,ke)[r].getLayout();if(!a){return}var n=u[r],o=n.hint,c=n.header;var d=Ge(t,Je,wt).call(t,c,o,a);babelHelpers.classPrivateFieldGet(t,Re).push(d);l.Dom.append(d,i)}));if(babelHelpers.classPrivateFieldGet(this,ke).reviewers.getPreselectedUserData().length>0){var p=l.Tag.render(ae||(ae=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="sign-b2e-document-send-reviewers">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t"])),babelHelpers.classPrivateFieldGet(this,ke).reviewers.getLayout());var v=Ge(this,Je,wt).call(this,d,l.Loc.getMessage("SIGN_SEND_SIGNING_VALIDATION_TITLE_REVIEWER_MSGVER_1"),p);babelHelpers.classPrivateFieldGet(this,Re).push(v);l.Dom.append(v,i)}l.Dom.append(c,i);if(!l.Type.isNull(n)){l.Dom.append(n,i)}babelHelpers.classPrivateFieldSet(this,We,l.Tag.render(ne||(ne=babelHelpers.taggedTemplateLiteral(['<div class="send-b2e-progress-container"></div>']))));babelHelpers.classPrivateFieldGet(this,Ae).renderTo(babelHelpers.classPrivateFieldGet(this,We));babelHelpers.classPrivateFieldSet(this,Ce,Ge(this,gt,Vt).call(this)?Ge(this,rt,Lt).call(this):Ge(this,it,Et).call(this));l.Dom.style(babelHelpers.classPrivateFieldGet(this,Ce),"display","none");this.emit("appendOverlay",{overlay:babelHelpers.classPrivateFieldGet(this,Ce)});b.Hint.create(i);return i}},{key:"setExistingTemplate",value:function e(){babelHelpers.classPrivateFieldSet(this,je,true)}},{key:"resetUserPartyPopup",value:function e(){babelHelpers.classPrivateFieldGet(this,ke).employees.resetUserPartyPopup();babelHelpers.classPrivateFieldGet(this,ke).reviewers.resetUserPartyPopup();return this}},{key:"setProvider",value:function e(t){babelHelpers.classPrivateFieldSet(this,Ke,t);return this}},{key:"setPartiesData",value:function e(t){var i,r,a=this;babelHelpers.classPrivateFieldSet(this,Me,t);if(l.Type.isNumber(t===null||t===void 0?void 0:(i=t.company)===null||i===void 0?void 0:i.entityId)){var n,o;babelHelpers.classPrivateFieldGet(this,ke).company.setItemData({entityId:t===null||t===void 0?void 0:(n=t.company)===null||n===void 0?void 0:n.entityId,entityType:t===null||t===void 0?void 0:(o=t.company)===null||o===void 0?void 0:o.entityType})}if(l.Type.isNumber(t===null||t===void 0?void 0:(r=t.representative)===null||r===void 0?void 0:r.entityId)){var c,d;babelHelpers.classPrivateFieldGet(this,ke).representative.setItemData({entityId:t===null||t===void 0?void 0:(c=t.representative)===null||c===void 0?void 0:c.entityId,entityType:t===null||t===void 0?void 0:(d=t.representative)===null||d===void 0?void 0:d.entityType})}if(l.Type.isArrayFilled(t===null||t===void 0?void 0:t.employees)){babelHelpers.classPrivateFieldGet(this,ke).employees.setUserIds(t===null||t===void 0?void 0:t.employees.map((function(e){return{entityId:e.entityId,entityType:e.entityType}})))}if(l.Type.isArrayFilled(t===null||t===void 0?void 0:t.validation)){var u=[];t.validation.forEach((function(e){var t=e.entityId,i=e.entityType,r=e.role;if(r===s.MemberRole.reviewer){u.push({entityId:t,entityType:i});return}babelHelpers.classPrivateFieldGet(a,ke)[r].setItemData({entityId:t,entityType:i})}));if(u.length>0){babelHelpers.classPrivateFieldGet(this,ke).reviewers.setUserIds(u)}}Ge(this,ct,zt).call(this);return this}},{key:"sendForSign",value:function(){var e=babelHelpers.asyncToGenerator(Te().mark((function e(){var t,i,r,a,n,s,l,o,c,u,p,v,b;return Te().wrap((function e(h){while(1)switch(h.prev=h.next){case 0:t=new d.Api;h.prev=1;this.emit("disableBack");h.next=5;return Ge(this,ht,Bt).call(this);case 5:if(!babelHelpers.classPrivateFieldGet(this,ze)){h.next=8;break}h.next=8;return babelHelpers.classPrivateFieldGet(this,ze).saveSelectedDateForUids();case 8:Ge(this,ut,Ct).call(this);if(!Ge(this,gt,Vt).call(this)){h.next=18;break}i=this.documentData.values().next().value.templateUid;h.next=13;return t.template.completeTemplate(i,babelHelpers.classPrivateFieldGet(this,Xe));case 13:r=h.sent;a=r.template.id;this.emit("onTemplateComplete",{templateId:a});h.next=45;break;case 18:if(!Ge(this,yt,Xt).call(this)){h.next=26;break}n=Ge(this,mt,Yt).call(this);s=t.configureDocumentGroup(n);l=Ge(this,lt,Dt).call(this,n);h.next=24;return Promise.all([s,l]);case 24:h.next=45;break;case 26:o=He(this.documentData);h.prev=27;o.s();case 29:if((c=o.n()).done){h.next=37;break}u=babelHelpers.slicedToArray(c.value,1),p=u[0];v=t.configureDocument(p);b=Ge(this,st,kt).call(this,p);h.next=35;return Promise.all([v,b]);case 35:h.next=29;break;case 37:h.next=42;break;case 39:h.prev=39;h.t0=h["catch"](27);o.e(h.t0);case 42:h.prev=42;o.f();return h.finish(42);case 45:return h.abrupt("return",true);case 48:h.prev=48;h.t1=h["catch"](1);console.error(h.t1);Ge(this,pt,Wt).call(this);this.emit("enableBack");return h.abrupt("return",false);case 54:case"end":return h.stop()}}),e,this,[[1,48],[27,39,42,45]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"deleteDocument",value:function e(t){babelHelpers.classPrivateFieldGet(this,De).deleteItem(t)}},{key:"setDocumentsBlock",value:function e(t){var i=Object.fromEntries(t);babelHelpers.classPrivateFieldGet(this,De).setItems(i)}},{key:"isDateTimeLimitSelectorValid",value:function e(){return babelHelpers.classPrivateFieldGet(this,ze)?babelHelpers.classPrivateFieldGet(this,ze).isValid():true}},{key:"documentData",get:function e(){return babelHelpers.classPrivateFieldGet(this,xe)},set:function e(t){var i=this,r,a;t.forEach((function(e){var t=e.uid,r=e.id,a=e.title,n=e.blocks,s=e.externalId,l=e.isTemplate,o=e.entityId,c=e.urls;babelHelpers.classPrivateFieldGet(i,De).addItem(t,{uid:t,id:r,title:a,blocks:n,externalId:s,isTemplate:l,entityId:o,urls:c})}));babelHelpers.classPrivateFieldSet(this,xe,t);var n=babelHelpers.toConsumableArray(t.values()).map((function(e){return e.uid}));var s=babelHelpers.toConsumableArray(t.values()).pop().uid;var o=babelHelpers.toConsumableArray(t.keys());babelHelpers.classPrivateFieldGet(this,Oe).setDocumentUids(n);if(!l.Type.isNull(babelHelpers.classPrivateFieldGet(this,ze))){var c;babelHelpers.classPrivateFieldGet(this,ze).setDocumentUids(n);var d=t===null||t===void 0?void 0:(c=t.values().next().value)===null||c===void 0?void 0:c.dateSignUntilUserTime;if(d){babelHelpers.classPrivateFieldGet(this,ze).setDate(new Date(d))}}babelHelpers.classPrivateFieldGet(this,ke).employees.setDocumentUid(s);babelHelpers.classPrivateFieldGet(this,ke).reviewers.setDocumentUid(s);(r=babelHelpers.classPrivateFieldGet(this,qe))===null||r===void 0?void 0:r.setDocumentGroupUids(o);void((a=babelHelpers.classPrivateFieldGet(this,qe))===null||a===void 0?void 0:a.check())}},{key:"hcmLinkEnabled",set:function e(t){var i;(i=babelHelpers.classPrivateFieldGet(this,qe))===null||i===void 0?void 0:i.setEnabled(t)}}]);return t}(t.EventEmitter);function _t(){var e=function e(t){return l.Tag.render(se||(se=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="sign-b2e-overlay__overlap-docs">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t"])),Array.from({length:t}).map((function(){return l.Tag.render(le||(le=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t\t\t<div class="sign-b2e-overlay__overlap-doc"></div>\n\t\t\t\t\t\t'])))})))};return l.Tag.render(oe||(oe=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sign-b2e-overlay__animate-layout">\n\t\t\t\t',"\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),e(4),e(3))}function wt(e,t,i){return l.Tag.render(ce||(ce=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sign-b2e-settings__item">\n\t\t\t\t<p class="sign-b2e-settings__item_title">\n\t\t\t\t\t','\n\t\t\t\t</p>\n\t\t\t\t<div class="sign-b2e-send__party_item">\n\t\t\t\t\t<p class="sign-b2e-send__company-items_item-title">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</p>\n\t\t\t\t\t","\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),e,t,i,Ge(this,dt,At).call(this,"validation"))}function It(){var e;var t=!l.Type.isNull(babelHelpers.classPrivateFieldGet(this,ze));var i=t?Ge(this,et,St).call(this):null;var r=t&&((e=babelHelpers.classPrivateFieldGet(this,Ke))===null||e===void 0?void 0:e.code)===s.ProviderCode.goskey?Ge(this,tt,Gt).call(this):null;return l.Tag.render(de||(de=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sign-b2e-send__lang-dt-container">\n\t\t\t\t',"\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),Ge(this,Ze,Pt).call(this),i,r)}function Pt(){return l.Tag.render(ue||(ue=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sign-b2e-send__lang-selector">\n\t\t\t\t','\n\t\t\t\t<span\n\t\t\t\t\tdata-hint="','"\n\t\t\t\t></span>\n\t\t\t</div>\n\t\t'])),babelHelpers.classPrivateFieldGet(this,Oe).getLayout(),l.Loc.getMessage("SIGN_DOCUMENT_SEND_LANG_SELECTOR_HINT"))}function St(){return l.Tag.render(pe||(pe=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sign-b2e-send__datetime-limit-selector">\n\t\t\t\t','\n\t\t\t\t<span\n\t\t\t\t\tdata-hint="','"\n\t\t\t\t></span>\n\t\t\t</div>\n\t\t'])),babelHelpers.classPrivateFieldGet(this,ze).getLayout(),l.Loc.getMessage("SIGN_DOCUMENT_SEND_DATETIME_LIMIT_SELECTOR_HINT"))}function Gt(){return l.Tag.render(ve||(ve=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<p class="sign-wizard__notice">\n\t\t\t\t',"\n\t\t\t</p>\n\t\t"])),l.Loc.getMessage("SIGN_DOCUMENT_SEND_DATETIME_LIMIT_SELECTOR_GOSKEY_ALERT"))}function Et(){var e=l.Loc.getMessage("SIGN_SEND_CLOSE_DESCRIPTION");return l.Tag.render(be||(be=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="send-b2e-overlay">\n\t\t\t\t<div class="sign-b2e-overlay-content">\n\t\t\t\t\t','\n\t\t\t\t\t<div class="sign-b2e-overlay-progress-title">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="sign-b2e-overlay-close-description">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t","\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),Ge(this,$e,_t).call(this),l.Loc.getMessage("SIGN_SEND_PROGRESS_TITLE"),e,Ge(this,at,Ft).call(this),babelHelpers.classPrivateFieldGet(this,We))}function Lt(){var e=babelHelpers.classPrivateFieldGet(this,je)?l.Loc.getMessage("SIGN_SETTINGS_TEMPLATE_CHANGED"):l.Loc.getMessage("SIGN_SETTINGS_TEMPLATE_CREATED");return l.Tag.render(he||(he=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sign-b2e-template-status">\n\t\t\t\t<div class="sign-b2e-template-status-inner">\n\t\t\t\t\t<div class="sign-b2e-template-status-img"></div>\n\t\t\t\t\t<div class="sign-b2e-template-status-title">','</div>\n\t\t\t\t\t<div class="sign-b2e-template-status-info">',"</div>\n\t\t\t\t\t","\n\t\t\t\t\t</div>\n\t\t\t </div>\n\t\t"])),e,l.Loc.getMessage("SIGN_SETTINGS_TEMPLATE_CREATED_INFO"),Ge(this,nt,Nt).call(this))}function Ft(){var e=this;return l.Tag.render(fe||(fe=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button\n\t\t\t\tclass="ui-btn ui-btn-light-border ui-btn-round"\n\t\t\t\tonclick="','">\n\t\t\t\t',"\n\t\t\t</button>\n\t\t"])),(function(){return e.emit("close")}),l.Loc.getMessage("SIGN_SEND_CLOSE_BTN"))}function Nt(){if(babelHelpers.classPrivateFieldGet(this,Ve)){return null}return l.Tag.render(ge||(ge=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="ui-btn ui-btn-light-border ui-btn-round" onclick="BX.SidePanel.Instance.close();">\n\t\t\t\t',"\n\t\t\t</button>\n\t\t"])),l.Loc.getMessage("SIGN_SETTINGS_TEMPLATES_LIST"))}function kt(e){return Mt.apply(this,arguments)}function Mt(){Mt=babelHelpers.asyncToGenerator(Te().mark((function e(t){var i,r,a;return Te().wrap((function e(n){while(1)switch(n.prev=n.next){case 0:i=new d.Api;r=false;case 2:if(r){n.next=12;break}n.next=5;return i.getDocumentFillAndStartProgress(t);case 5:a=n.sent;r=a.completed;babelHelpers.classPrivateFieldGet(this,Ae).update(Math.round(a.progress));n.next=10;return Ge(this,ot,Ot).call(this,1e3);case 10:n.next=2;break;case 12:case"end":return n.stop()}}),e,this)})));return Mt.apply(this,arguments)}function Dt(e){return xt.apply(this,arguments)}function xt(){xt=babelHelpers.asyncToGenerator(Te().mark((function e(t){var i,r,a;return Te().wrap((function e(n){while(1)switch(n.prev=n.next){case 0:i=new d.Api;r=false;case 2:if(r){n.next=12;break}n.next=5;return i.getDocumentGroupFillAndStartProgress(t);case 5:a=n.sent;r=a.completed;babelHelpers.classPrivateFieldGet(this,Ae).update(Math.round(a.progress));n.next=10;return Ge(this,ot,Ot).call(this,2e3);case 10:n.next=2;break;case 12:case"end":return n.stop()}}),e,this)})));return xt.apply(this,arguments)}function Ot(e){return new Promise((function(t){setTimeout(t,e)}))}function zt(){var e,t,i;babelHelpers.classPrivateFieldGet(this,Fe).employeesTitle.innerText=l.Loc.getMessage("SIGN_SEND_SIGNING_EMPLOYEES",{"#CNT#":(e=(t=babelHelpers.classPrivateFieldGet(this,Me))===null||t===void 0?void 0:(i=t.employees)===null||i===void 0?void 0:i.length)!==null&&e!==void 0?e:0})}function At(e){return l.Tag.render(ye||(ye=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sign-b2e-send__communications">\n\t\t\t\t<span class="sign-b2e-send__communications_title">\n\t\t\t\t\t','\n\t\t\t\t</span>\n\t\t\t\t<div class="sign-b2e-send__communications_communication-type">\n\t\t\t\t\t<span class="sign-b2e-send__communications_communication-type-text">\n\t\t\t\t\t\t','\n\t\t\t\t\t</span>\n\t\t\t\t\t<span\n\t\t\t\t\t\tdata-hint="','"\n\t\t\t\t\t></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'])),l.Loc.getMessage("SIGN_DOCUMENT_SEND_COMMUNICATION_TITLE_MSGVER_1"),l.Loc.getMessage("SIGN_DOCUMENT_SEND_COMMUNICATION_CHANEL_IDLE"),l.Loc.getMessage("SIGN_DOCUMENT_SEND_COMMUNICATION_CHANEL_HINT"))}function Ct(){babelHelpers.classPrivateFieldGet(this,Ae).update(0);this.emit("hidePreview");babelHelpers.classPrivateFieldGet(this,Re).forEach((function(e){return l.Dom.hide(e)}));l.Dom.style(babelHelpers.classPrivateFieldGet(this,Ce),"display","flex");this.emit("showOverlay")}function Wt(){babelHelpers.classPrivateFieldGet(this,Re).forEach((function(e){return l.Dom.show(e)}));this.emit("hideOverlay");l.Dom.style(babelHelpers.classPrivateFieldGet(this,Ce),"display","none");this.emit("showPreview")}function Rt(e){return l.Tag.render(me||(me=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sign-b2e-send__reminder-selector">\n\t\t\t\t','\n\t\t\t\t<span\n\t\t\t\t\tdata-hint="','"\n\t\t\t\t></span>\n\t\t\t</div>\n\t\t'])),Ge(this,bt,Ut).call(this,e).getLayout(),l.Loc.getMessage("SIGN_DOCUMENT_SEND_REMINDER_TYPE_SELECTOR_HINT"))}function Ut(e){var t,i,r;(i=(t=babelHelpers.classPrivateFieldGet(this,Ue))[e])!==null&&i!==void 0?i:t[e]=new n.ReminderSelector((r=Ee[e])!==null&&r!==void 0?r:{});return babelHelpers.classPrivateFieldGet(this,Ue)[e]}function Bt(){var e=Ge(this,ft,jt).call(this);var t=Object.entries(babelHelpers.classPrivateFieldGet(this,Ue)).map((function(t){var i=babelHelpers.slicedToArray(t,2),r=i[0],a=i[1];return a.save(e,r)}));return Promise.all(t)}function jt(){return this.documentData.keys().next().value}function Vt(){return r.isTemplateMode(babelHelpers.classPrivateFieldGet(this,Be))}function Xt(){return this.documentData.size>1}function Yt(){return this.documentData.values().next().value.groupId}function qt(e){var t;var i=(t=e===null||e===void 0?void 0:e.data)!==null&&t!==void 0?t:false;this.emit(i?"enableComplete":"disableComplete")}e.DocumentSend=Ht})(this.BX.Sign.V2.B2e=this.BX.Sign.V2.B2e||{},BX.Event,BX.Main,BX.Sign.V2,BX.Sign.V2.B2e,BX.Sign.V2.B2e,BX.Sign,BX,BX,BX.UI.EntitySelector,BX.Sign.V2,BX.Sign.V2,BX.Sign.V2,BX.Sign.V2,BX.Sign.V2,BX.UI,BX.Sign.V2.B2e);
//# sourceMappingURL=document-send.bundle.map.js