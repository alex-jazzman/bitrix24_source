this.BX=this.BX||{};this.BX.Sign=this.BX.Sign||{};this.BX.Sign.V2=this.BX.Sign.V2||{};(function(e,t,r,n,a,i,s,o,l,c,u,h,p,f,d,v,b){"use strict";var g=v.defineStore("sign-b2e-document-template-filling-store",{state:function e(){return{documents:[],settings:{},createdDocuments:[],sendProgress:0,configured:false}},actions:{setDocuments:function e(t){this.documents=t},setSettings:function e(t){this.settings=t},setCreatedDocuments:function e(t){this.createdDocuments=t},setSendProgress:function e(t){this.sendProgress=t},setConfigured:function e(t){this.configured=t}}});var m,w,S;function y(e,t){var r=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=T(e))||t&&e&&typeof e.length==="number"){if(r)e=r;var n=0;var a=function e(){};return{s:a,n:function t(){if(n>=e.length)return{done:true};return{done:false,value:e[n++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=true,s=false,o;return{s:function t(){r=r.call(e)},n:function e(){var t=r.next();i=t.done;return t},e:function e(t){s=true;o=t},f:function e(){try{if(!i&&r["return"]!=null)r["return"]()}finally{if(s)throw o}}}}function T(e,t){if(!e)return;if(typeof e==="string")return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}function P(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){babelHelpers.defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_=function t(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function e(t,r,n){return t[r]=n}}function c(e,t,r,a){var i=t&&t.prototype instanceof p?t:p,s=Object.create(i.prototype),o=new k(a||[]);return n(s,"_invoke",{value:y(e,r,o)}),s}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var h={};function p(){}function f(){}function d(){}var v={};l(v,i,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(x([])));g&&g!==t&&r.call(g,i)&&(v=g);var m=d.prototype=p.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function a(n,i,s,o){var l=u(e[n],e,i);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==babelHelpers["typeof"](h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){a("next",e,s,o)}),(function(e){a("throw",e,s,o)})):t.resolve(h).then((function(e){c.value=e,s(c)}),(function(e){return a("throw",e,s,o)}))}o(l.arg)}var i;n(this,"_invoke",{value:function e(r,n){function s(){return new t((function(e,t){a(r,n,e,t)}))}return i=i?i.then(s,s):s()}})}function y(e,t,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return G()}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var o=T(s,r);if(o){if(o===h)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function T(e,t){var r=t.method,n=e.iterator[r];if(undefined===n)return t.delegate=null,"throw"===r&&e.iterator["return"]&&(t.method="return",t.arg=undefined,T(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,h;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function x(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=undefined,t.done=!0,t};return a.next=a}}return{next:G}}function G(){return{value:undefined,done:!0}}return f.prototype=d,n(m,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:f,configurable:!0}),f.displayName=l(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},w(S.prototype),l(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var s=new S(c(t,r,n,a),i);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},w(m),l(m,o,"Generator"),l(m,i,(function(){return this})),l(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,k.prototype={constructor:k,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var n=this;function a(e,r){return o.type="throw",o.arg=t,n.next=e,r&&(n.method="next",n.arg=undefined),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var l=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function e(t,n){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=n&&n<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=n,s?(this.method="next",this.next=s.finallyLoc,h):this.complete(o)},complete:function e(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function e(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function e(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===t){var a=n.completion;if("throw"===a.type){var i=a.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function e(t,r,n){return this.delegate={iterator:x(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),h}},e}function x(e,t){L(e,t);t.add(e)}function G(e,t,r){L(e,t);t.set(e,r)}function L(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function H(e,t,r){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return r}var I=new WeakMap;var O=new WeakMap;var M=new WeakMap;var F=new WeakMap;var N=new WeakMap;var D=new WeakMap;var B=new WeakMap;var C=new WeakMap;var W=new WeakMap;var A=new WeakMap;var j=new WeakMap;var X=new WeakMap;var U=new WeakMap;var R=new WeakMap;var V=new WeakSet;var z=new WeakSet;var Y=new WeakSet;var K=new WeakSet;var $=new WeakSet;var q=new WeakSet;var J=new WeakSet;var Q=new WeakSet;var Z=new WeakSet;var ee=new WeakSet;var te=new WeakSet;var re=new WeakSet;var ne=new WeakSet;var ae=new WeakSet;var ie=new WeakSet;var se=new WeakSet;var oe=new WeakSet;var le=new WeakSet;var ce=new WeakSet;var ue=new WeakSet;var he=new WeakSet;var pe=new WeakSet;var fe=new WeakSet;var de=new WeakSet;var ve=new WeakSet;var be=new WeakSet;var ge=new WeakSet;var me=new WeakSet;var we=new WeakSet;var Se=new WeakSet;var ye=new WeakSet;var Te=new WeakSet;var Pe=new WeakSet;var Ee=new WeakSet;var ke=new WeakSet;var _e=new WeakSet;var xe=new WeakSet;var Ge=new WeakSet;var Le=new WeakSet;var He=new WeakSet;var Ie=new WeakSet;var Oe=function(){function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";babelHelpers.classCallCheck(this,e);x(this,Ie);x(this,He);x(this,Le);x(this,Ge);x(this,xe);x(this,_e);x(this,ke);x(this,Ee);x(this,Pe);x(this,Te);x(this,ye);x(this,Se);x(this,we);x(this,me);x(this,ge);x(this,be);x(this,ve);x(this,de);x(this,fe);x(this,pe);x(this,he);x(this,ue);x(this,ce);x(this,le);x(this,oe);x(this,se);x(this,ie);x(this,ae);x(this,ne);x(this,re);x(this,te);x(this,ee);x(this,Z);x(this,Q);x(this,J);x(this,q);x(this,$);x(this,K);x(this,Y);x(this,z);x(this,V);G(this,I,{writable:true,value:new r.MemoryCache});G(this,O,{writable:true,value:void 0});G(this,M,{writable:true,value:void 0});G(this,F,{writable:true,value:void 0});G(this,N,{writable:true,value:void 0});G(this,D,{writable:true,value:void 0});G(this,B,{writable:true,value:void 0});G(this,C,{writable:true,value:void 0});G(this,W,{writable:true,value:void 0});G(this,A,{writable:true,value:void 0});G(this,j,{writable:true,value:void 0});G(this,X,{writable:true,value:false});G(this,U,{writable:true,value:null});G(this,R,{writable:true,value:null});babelHelpers.classPrivateFieldSet(this,N,n);babelHelpers.classPrivateFieldSet(this,D,v.createPinia());babelHelpers.classPrivateFieldSet(this,B,new f.Api);babelHelpers.classPrivateFieldSet(this,A,i.BitrixVue.createApp({}));babelHelpers.classPrivateFieldGet(this,A).use(babelHelpers.classPrivateFieldGet(this,D));babelHelpers.classPrivateFieldSet(this,F,new h.DocumentTemplateSend(babelHelpers.classPrivateFieldGet(this,D)));babelHelpers.classPrivateFieldGet(this,F).subscribe("close",(function(){return H(t,pe,ct).call(t)}));babelHelpers.classPrivateFieldSet(this,O,new d.DocumentTemplateFilling({store:babelHelpers.classPrivateFieldGet(this,D)}));babelHelpers.classPrivateFieldSet(this,M,new p.DocumentTemplateUserParty);babelHelpers.classPrivateFieldSet(this,j,a);H(this,xe,_t).call(this)}babelHelpers.createClass(e,[{key:"renderToContainer",value:function(){var e=babelHelpers.asyncToGenerator(_().mark((function e(r){var n=this;var a;return _().wrap((function e(i){while(1)switch(i.prev=i.next){case 0:if(!t.Type.isNull(r)){i.next=2;break}return i.abrupt("return");case 2:babelHelpers.classPrivateFieldSet(this,U,r);i.next=5;return H(this,ae,Je).call(this);case 5:a=new b.Wizard(H(this,q,je).call(this),{back:{className:"ui-btn-light-border"},next:{className:"ui-btn-success"},complete:{className:"ui-btn-success",title:t.Loc.getMessage("SIGN_SETTINGS_TEMPLATES_COMPLETE_TITLE"),onComplete:function e(){return H(n,pe,ct).call(n)}},cancel:{className:"ui-btn-light-border",onCancel:function e(){return H(n,pe,ct).call(n)}},swapButtons:true});t.Dom.append(H(this,J,Xe).call(this,a),r);a.moveOnStep(0);case 8:case"end":return i.stop()}}),e,this)})));function r(t){return e.apply(this,arguments)}return r}()}]);return e}();function Me(){var e=babelHelpers.classPrivateFieldGet(this,O);return{get content(){return e.getLayout()},title:t.Loc.getMessage("SIGN_SETTINGS_TEMPLATES_STEP_DOCUMENT_TITLE"),beforeCompletion:function t(){return e.validate()}}}function Fe(){return Ne.apply(this,arguments)}function Ne(){Ne=babelHelpers.asyncToGenerator(_().mark((function e(){var t,r,n,a,i;return _().wrap((function e(s){while(1)switch(s.prev=s.next){case 0:t=g();if(!(t.createdDocuments.length>0)){s.next=3;break}return s.abrupt("return");case 3:r=t.documents;n=r.map((function(e){return e.templateId}));s.next=7;return babelHelpers.classPrivateFieldGet(this,B).template.registerDocuments(n);case 7:a=s.sent;i=a.items;t.setCreatedDocuments(i);case 10:case"end":return s.stop()}}),e,this)})));return Ne.apply(this,arguments)}function De(){return Be.apply(this,arguments)}function Be(){Be=babelHelpers.asyncToGenerator(_().mark((function e(){var t=this;var r,n,a,i,s,o,l;return _().wrap((function e(c){while(1)switch(c.prev=c.next){case 0:r=g();n=r.documents;a=r.settings;i=r.createdDocuments;s=_().mark((function e(){var r,a,s,c,u,h;return _().wrap((function e(p){while(1)switch(p.prev=p.next){case 0:r=babelHelpers.slicedToArray(l[o],2),a=r[0],s=r[1];c=n.find((function(e){return e.uid===a}));u=c===null||c===void 0?void 0:c.templateId;if(u){p.next=5;break}throw new Error("templateId not found");case 5:h=i.find((function(e){return e.templateId===u}));if(h){p.next=8;break}throw new Error("templateCreatedDocument not found");case 8:p.next=10;return H(t,K,Ce).call(t,h.document,s);case 10:case"end":return p.stop()}}),e)}));o=0,l=Object.entries(a);case 6:if(!(o<l.length)){c.next=11;break}return c.delegateYield(s(),"t0",8);case 8:o++;c.next=6;break;case 11:case"end":return c.stop()}}),e)})));return Be.apply(this,arguments)}function Ce(e,t){return We.apply(this,arguments)}function We(){We=babelHelpers.asyncToGenerator(_().mark((function e(t,r){var n,i;return _().wrap((function e(s){while(1)switch(s.prev=s.next){case 0:n=t.uid;if(!(r.registrationNumber.length>0&&t.externalIdSourceType!=="hcmlink")){s.next=4;break}s.next=4;return babelHelpers.classPrivateFieldGet(this,B).changeExternalId(n,r.registrationNumber);case 4:if(!(t.externalDateCreateSourceType!=="hcmlink")){s.next=8;break}i=a.DateTimeFormat.format(a.DateTimeFormat.getFormat("SHORT_DATE_FORMAT"),r.creationDate);s.next=8;return babelHelpers.classPrivateFieldGet(this,B).changeExternalDate(n,i);case 8:s.next=10;return babelHelpers.classPrivateFieldGet(this,B).modifyDateSignUntil(n,Math.round(r.signingDate.getTime()/1e3));case 10:case"end":return s.stop()}}),e,this)})));return We.apply(this,arguments)}function Ae(){var e=this;var r=babelHelpers.classPrivateFieldGet(this,M);return{get content(){return r.getLayout()},title:t.Loc.getMessage("SIGN_SETTINGS_TEMPLATES_STEP_EMPLOYEES_TITLE"),beforeCompletion:function(){var t=babelHelpers.asyncToGenerator(_().mark((function t(){return _().wrap((function t(n){while(1)switch(n.prev=n.next){case 0:if(r.validate()){n.next=2;break}return n.abrupt("return",false);case 2:n.prev=2;H(e,Z,Re).call(e);n.next=6;return H(e,z,Fe).call(e);case 6:n.next=8;return H(e,Y,De).call(e);case 8:n.next=10;return babelHelpers.classPrivateFieldGet(e,M).syncMembers();case 10:n.next=12;return H(e,le,nt).call(e);case 12:n.next=14;return H(e,ge,dt).call(e);case 14:n.next=16;return H(e,te,ze).call(e);case 16:H(e,de,ht).call(e);n.next=19;return H(e,re,Ke).call(e);case 19:H(e,se,tt).call(e);H(e,oe,rt).call(e);return n.abrupt("return",true);case 24:n.prev=24;n.t0=n["catch"](2);if(n.t0){console.error(n.t0)}if(!H(e,be,ft).call(e)){n.next=29;break}return n.abrupt("return",true);case 29:H(e,ee,Ve).call(e);return n.abrupt("return",false);case 31:case"end":return n.stop()}}),t,null,[[2,24]])})));function n(){return t.apply(this,arguments)}return n}()}}function je(){return{documentFillingStep:H(this,V,Me).call(this),employeeSelectionStep:H(this,$,Ae).call(this)}}function Xe(e){babelHelpers.classPrivateFieldSet(this,W,e.getLayout());babelHelpers.classPrivateFieldSet(this,C,babelHelpers.classPrivateFieldGet(this,F).getLayout());t.Dom.hide(babelHelpers.classPrivateFieldGet(this,C));return t.Tag.render(m||(m=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sign-settings__scope sign-settings --no-background --b2e --templates">\n\t\t\t\t<div class="sign-settings__sidebar">\n\t\t\t\t\t',"\n\t\t\t\t\t","\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),H(this,Q,Ue).call(this),babelHelpers.classPrivateFieldGet(this,W),babelHelpers.classPrivateFieldGet(this,C))}function Ue(){return babelHelpers.classPrivateFieldGet(this,I).remember("headLayout",(function(){return t.Tag.render(w||(w=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="sign-settings__head">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p class="sign-settings__head_title">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"])),t.Loc.getMessage("SIGN_SETTINGS_TEMPLATES_HEAD_TITLE"))}))}function Re(){H(this,he,lt).call(this,0);t.Dom.style(babelHelpers.classPrivateFieldGet(this,W),"display","none");t.Dom.show(babelHelpers.classPrivateFieldGet(this,C))}function Ve(){t.Dom.hide(babelHelpers.classPrivateFieldGet(this,C));t.Dom.style(babelHelpers.classPrivateFieldGet(this,W),"display","block")}function ze(){return Ye.apply(this,arguments)}function Ye(){Ye=babelHelpers.asyncToGenerator(_().mark((function e(){var t,r,n,a;return _().wrap((function e(i){while(1)switch(i.prev=i.next){case 0:t=g().createdDocuments;r=y(t);i.prev=2;r.s();case 4:if((n=r.n()).done){i.next=10;break}a=n.value;i.next=8;return babelHelpers.classPrivateFieldGet(this,B).configureDocument(a.document.uid);case 8:i.next=4;break;case 10:i.next=15;break;case 12:i.prev=12;i.t0=i["catch"](2);r.e(i.t0);case 15:i.prev=15;r.f();return i.finish(15);case 18:case"end":return i.stop()}}),e,this,[[2,12,15,18]])})));return Ye.apply(this,arguments)}function Ke(){return $e.apply(this,arguments)}function $e(){$e=babelHelpers.asyncToGenerator(_().mark((function e(){var t,r,n,a;return _().wrap((function e(i){while(1)switch(i.prev=i.next){case 0:t=g().createdDocuments;r=t.map((function(e){return e.document.id}));n=false;case 3:if(n){i.next=13;break}i.next=6;return babelHelpers.classPrivateFieldGet(this,B).getManyDocumentFillAndStartProgress(r);case 6:a=i.sent;n=a.completed;H(this,he,lt).call(this,Math.round(a.progress));i.next=11;return H(this,ne,qe).call(this,1e3);case 11:i.next=3;break;case 13:case"end":return i.stop()}}),e,this)})));return $e.apply(this,arguments)}function qe(e){return new Promise((function(t){setTimeout(t,e)}))}function Je(){return Qe.apply(this,arguments)}function Qe(){Qe=babelHelpers.asyncToGenerator(_().mark((function e(){var t;return _().wrap((function e(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return H(this,ie,Ze).call(this,babelHelpers.classPrivateFieldGet(this,N));case 2:t=r.sent;g().setDocuments(t);case 4:case"end":return r.stop()}}),e,this)})));return Qe.apply(this,arguments)}function Ze(e){return et.apply(this,arguments)}function et(){et=babelHelpers.asyncToGenerator(_().mark((function e(t){return _().wrap((function e(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",babelHelpers.classPrivateFieldGet(this,B).loadDocumentsByTemplateIds(t));case 1:case"end":return r.stop()}}),e,this)})));return et.apply(this,arguments)}function tt(){var e=window.top.BX.SidePanel.Instance.getPreviousSlider();if(e&&e.getUrl().indexOf("templates/folder/?folderId=")){e.close()}}function rt(){var e=babelHelpers.classPrivateFieldGet(this,N).length>1?t.Loc.getMessage("SIGN_SETTINGS_COMPLETE_NOTIFICATION_TEXT_GROUP"):t.Loc.getMessage("SIGN_SETTINGS_COMPLETE_NOTIFICATION_TEXT");window.top.BX.UI.Notification.Center.notify({content:e,autoHideDelay:4e3})}function nt(){return at.apply(this,arguments)}function at(){at=babelHelpers.asyncToGenerator(_().mark((function e(){var t;return _().wrap((function e(r){while(1)switch(r.prev=r.next){case 0:r.next=3;return H(this,ce,it).call(this);case 3:t=r.sent;if(!t){r.next=9;break}r.next=7;return H(this,ue,ot).call(this,t);case 7:r.next=10;break;case 9:return r.abrupt("break",12);case 10:r.next=0;break;case 12:case"end":return r.stop()}}),e,this)})));return at.apply(this,arguments)}function it(){return st.apply(this,arguments)}function st(){st=babelHelpers.asyncToGenerator(_().mark((function e(){var t,r;return _().wrap((function e(n){while(1)switch(n.prev=n.next){case 0:if(H(this,we,mt).call(this)){n.next=2;break}return n.abrupt("return",null);case 2:t=H(this,Se,wt).call(this);n.next=5;return babelHelpers.classPrivateFieldGet(this,B).checkNotMappedMembersHrIntegrationByDocuments(t);case 5:r=n.sent;return n.abrupt("return",r.find((function(e){return e.userIds.length>0})));case 7:case"end":return n.stop()}}),e,this)})));return st.apply(this,arguments)}function ot(e){var t=this;return new Promise((function(r,n){H(t,ve,pt).call(t,r,n,e)}))}function lt(e){g().setSendProgress(e)}function ct(){var e=BX.SidePanel.Instance.getTopSlider();if(e&&H(this,fe,ut).call(this,e)){e.close()}}function ut(e){return/sign-b2e-templates-settings-\d+-(template|folder)/.test(e.getUrl())}function ht(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;g().setConfigured(e)}function pt(e,r,n){var a=true;var i=o.MessageBox.create({message:H(this,_e,kt).call(this,t.Loc.getMessage("SIGN_SETTINGS_TEMPLATES_NOT_MAPPED_POPUP_TITLE"),t.Loc.getMessage("SIGN_SETTINGS_TEMPLATES_NOT_MAPPED_POPUP_DESCRIPTION")),buttons:[new c.Button({text:t.Loc.getMessage("SIGN_SETTINGS_TEMPLATES_NOT_MAPPED_POPUP_OK"),size:c.ButtonSize.S,color:c.ButtonColor.PRIMARY,round:true,onclick:function t(){a=false;i.close();l.Mapper.openSlider({companyId:n.integrationId,userIds:new Set(n.allUserIds),mode:l.Mapper.MODE_DIRECT},{onCloseHandler:function t(){return e()}})}}),new c.Button({text:t.Loc.getMessage("SIGN_SETTINGS_TEMPLATES_NOT_MAPPED_POPUP_CANCEL"),size:c.ButtonSize.S,color:c.ButtonColor.LIGHT_BORDER,round:true,onclick:function e(){return i.close()}})],modal:false,popupOptions:k({events:{onPopupClose:function e(){if(a){r()}}}},H(this,ke,Et).call(this))});i.show()}function ft(){return g().configured}function dt(){return vt.apply(this,arguments)}function vt(){vt=babelHelpers.asyncToGenerator(_().mark((function e(){var t;return _().wrap((function e(r){while(1)switch(r.prev=r.next){case 0:r.next=3;return H(this,me,bt).call(this);case 3:t=r.sent;if(!t){r.next=9;break}r.next=7;return H(this,ye,St).call(this,t);case 7:r.next=10;break;case 9:return r.abrupt("break",12);case 10:r.next=0;break;case 12:case"end":return r.stop()}}),e,this)})));return vt.apply(this,arguments)}function bt(){return gt.apply(this,arguments)}function gt(){gt=babelHelpers.asyncToGenerator(_().mark((function e(){var t,r;return _().wrap((function e(n){while(1)switch(n.prev=n.next){case 0:if(H(this,we,mt).call(this)){n.next=2;break}return n.abrupt("return",null);case 2:t=H(this,Se,wt).call(this);n.next=5;return babelHelpers.classPrivateFieldGet(this,B).loadBulkMultipleVacancyMemberHrIntegrations(t);case 5:r=n.sent;return n.abrupt("return",r.find((function(e){return e.employees.length>0})));case 7:case"end":return n.stop()}}),e,this)})));return gt.apply(this,arguments)}function mt(){var e=g();var t=e.createdDocuments;return t.some((function(e){return e.document.hcmLinkCompanyId>0}))}function wt(){var e=g();var t=e.createdDocuments;return t.map((function(e){return e.document.uid}))}function St(e){var t=this;return new Promise((function(r,n){H(t,Te,yt).call(t,r,n,e)}))}function yt(e,r,n){var a=this;var i=true;var s=o.MessageBox.create({message:H(this,_e,kt).call(this,t.Loc.getMessage("SIGN_SETTINGS_TEMPLATES_EMPLOYEES_NOT_SELECTED_POPUP_TITLE"),t.Loc.getMessage("SIGN_SETTINGS_TEMPLATES_EMPLOYEES_NOT_SELECTED_POPUP_DESCRIPTION")),buttons:[new c.Button({text:t.Loc.getMessage("SIGN_SETTINGS_TEMPLATES_EMPLOYEES_NOT_SELECTED_POPUP_OK"),size:c.ButtonSize.S,color:c.ButtonColor.PRIMARY,round:true,onclick:function t(){i=false;s.close();u.HcmLinkVacancyChooser.openSlider({api:babelHelpers.classPrivateFieldGet(a,B),documentGroupUids:H(a,Ee,Pt).call(a,n.company.id),employees:H(a,Pe,Tt).call(a,n.employees),companyTitle:n.company.title},{onCloseHandler:function t(){return e()}})}}),new c.Button({text:t.Loc.getMessage("SIGN_SETTINGS_TEMPLATES_EMPLOYEES_NOT_SELECTED_POPUP_CANCEL"),size:c.ButtonSize.S,color:c.ButtonColor.LIGHT_BORDER,round:true,onclick:function e(){return s.close()}})],modal:false,popupOptions:k({events:{onPopupClose:function e(){if(i){r()}}}},H(this,ke,Et).call(this))});s.show()}function Tt(e){var t=new Map;e.forEach((function(e){t.set(e.userId,e)}));return t}function Pt(e){var t=g();var r=t.createdDocuments;return r.filter((function(t){return t.document.hcmLinkCompanyId===e})).map((function(e){return e.document.uid}))}function Et(){return{targetContainer:babelHelpers.classPrivateFieldGet(this,U),borderRadius:"20px",padding:0,contentPadding:24}}function kt(e,r){return t.Tag.render(S||(S=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div>\n\t\t\t\t<div class="sign-settings-templates-hcm-popup-warning"></div>\n\t\t\t\t<div class="sign-settings-templates-hcm-popup-title">\n\t\t\t\t\t','\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div class="sign-settings-templates-hcm-popup-description">\n\t\t\t\t\t',"\t\t\t\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),t.Text.encode(e),t.Text.encode(r))}function _t(){var e=this;if(!babelHelpers.classPrivateFieldGet(this,j)){return}var t=function t(r){var a=r.getData(),i=babelHelpers.slicedToArray(a,1),s=i[0];var o=s===null||s===void 0?void 0:s.getSlider();if(o.getUrl()!==babelHelpers.classPrivateFieldGet(e,j)){return}if(H(e,Le,Gt).call(e)){s.denyAction();H(e,He,Lt).call(e,o);return}n.EventEmitter.unsubscribe("SidePanel.Slider:onClose",t);H(e,Ge,xt).call(e);H(e,Ie,Ht).call(e)};n.EventEmitter.subscribe("SidePanel.Slider:onClose",t)}function xt(){babelHelpers.classPrivateFieldGet(this,O).unmount();babelHelpers.classPrivateFieldGet(this,F).unmount();babelHelpers.classPrivateFieldGet(this,M).unmount()}function Gt(){if(babelHelpers.classPrivateFieldGet(this,X)){return false}return H(this,Se,wt).call(this).length===0}function Lt(e){var r=this;if(babelHelpers.classPrivateFieldGet(this,R)===null){babelHelpers.classPrivateFieldSet(this,R,new o.MessageBox({message:t.Loc.getMessage("SIGN_SETTINGS_TEMPLATES_CLOSE_CONFIRM"),buttons:o.MessageBoxButtons.OK_CANCEL,okCaption:t.Loc.getMessage("SIGN_SETTINGS_TEMPLATES_CLOSE_CONFIRM_OK"),onOk:function t(n){n.close();babelHelpers.classPrivateFieldSet(r,X,true);e.close();babelHelpers.classPrivateFieldSet(r,X,false)}}))}babelHelpers.classPrivateFieldGet(this,R).show()}function Ht(){var e;(e=babelHelpers.classPrivateFieldGet(this,R))===null||e===void 0?void 0:e.close()}e.useDocumentTemplateFillingStore=g;e.B2ETemplatesSignSettings=Oe})(this.BX.Sign.V2.B2e=this.BX.Sign.V2.B2e||{},BX,BX.Cache,BX.Event,BX.Main,BX.Vue3,BX.SidePanel,BX.UI.Dialogs,BX.Humanresources.Hcmlink,BX.UI,BX.Sign.V2.B2e,BX.Sign.V2.B2e,BX.Sign.V2.B2e,BX.Sign.V2,BX.Sign.V2.B2e,BX.Vue3.Pinia,BX.Ui);
//# sourceMappingURL=sign-settings-templates.bundle.map.js