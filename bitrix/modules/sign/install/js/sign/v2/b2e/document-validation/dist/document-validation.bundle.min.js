this.BX=this.BX||{};this.BX.Sign=this.BX.Sign||{};this.BX.Sign.V2=this.BX.Sign.V2||{};(function(e,t,i,r,a){"use strict";var n,l,s,o;function v(e,t){u(e,t);t.add(e)}function c(e,t,i){u(e,t);t.set(e,i)}function u(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function d(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var p=Object.freeze({EditorRoleDetails:"19740766"});var h=t.Extension.getSettings("sign.v2.b2e.document-validation").get("currentUserId");var b=20;var g=new WeakMap;var f=new WeakMap;var y=new WeakMap;var R=new WeakSet;var S=new WeakSet;var w=new WeakSet;var _=function(){function e(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;babelHelpers.classCallCheck(this,e);v(this,w);v(this,S);v(this,R);c(this,g,{writable:true,value:void 0});c(this,f,{writable:true,value:void 0});c(this,y,{writable:true,value:null});babelHelpers.classPrivateFieldSet(this,f,r);babelHelpers.classPrivateFieldSet(this,g,[]);babelHelpers.classPrivateFieldSet(this,y,n);this.addReviewerRepresentativeSelector();this.editorRepresentativeSelector=new i.RepresentativeSelector({context:"sign_b2e_representative_selector_editor_".concat(h),description:"\n\t\t\t\t<span>\n\t\t\t\t\t".concat(a.Helpdesk.replaceLink(t.Loc.getMessage("SIGN_B2E_DOCUMENT_VALIDATION_HINT_EDITOR"),p.EditorRoleDetails),"\n\t\t\t\t</span>\n\t\t\t"),roleEnabled:r})}babelHelpers.createClass(e,[{key:"addReviewerRepresentativeSelector",value:function e(){var r=this;if(this.getReviewerRepresentativeSelectorCount()>=b){return null}var a=t.Text.getRandom();var l=d(this,w,m).call(this);var s=new i.RepresentativeSelector({cacheable:false,context:"sign_b2e_representative_selector_reviewer_".concat(h,"_").concat(a),roleEnabled:babelHelpers.classPrivateFieldGet(this,f),isDescriptionVisible:false,isMenuButtonVisible:Object.keys(babelHelpers.classPrivateFieldGet(this,g)).length>0,onDelete:function e(t){return d(r,R,H).call(r,t)},onHide:function e(){return d(r,S,T).call(r)},excludedEntityList:l});s.formatSelectButton("ui-btn-xs ui-btn-round ui-btn-light-border");babelHelpers.classPrivateFieldGet(this,g)[s.getContainerId()]=s;return t.Tag.render(n||(n=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sign_b2e_representative_selector_reviewer">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),s.getLayout())}},{key:"getReviewerLayoutList",value:function e(){var i=t.Tag.render(l||(l=babelHelpers.taggedTemplateLiteral(["<span></span>"])));for(var r=0,a=Object.values(babelHelpers.classPrivateFieldGet(this,g));r<a.length;r++){var n=a[r];var o=n.getLayout();var v=t.Tag.render(s||(s=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="sign_b2e_representative_selector_reviewer">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t"])),o);t.Dom.append(v,i)}return i}},{key:"getEditorLayout",value:function e(){var i=this.editorRepresentativeSelector.getLayout();this.editorRepresentativeSelector.formatSelectButton("ui-btn-xs ui-btn-round ui-btn-light-border");return t.Tag.render(o||(o=babelHelpers.taggedTemplateLiteral(["\n\t\t\t<div>\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),i)}},{key:"getValidationData",value:function e(){var t=d(this,w,m).call(this);var i=this.editorRepresentativeSelector.getRepresentativeId();var a=this.editorRepresentativeSelector.getRepresentativeItemType();if(i&&a){t.push({entityId:i,entityType:a,role:r.MemberRole.editor})}return t}},{key:"loadReviewers",value:function e(t){if(t.length===0){return}if(t.length>this.getReviewerRepresentativeSelectorCount()){for(var i=1;i<t.length;i++){this.addReviewerRepresentativeSelector()}}var r=0;for(var a=0,n=Object.values(babelHelpers.classPrivateFieldGet(this,g));a<n.length;a++){var l;var s=n[a];var o=(l=t[r])!==null&&l!==void 0?l:null;if(o===null){continue}s.load(o.entityId,o.entityType);r++}d(this,S,T).call(this)}},{key:"loadEditors",value:function e(t){if(t.length===0){return}var i=t[0];this.editorRepresentativeSelector.load(i.entityId,i.entityType)}},{key:"getReviewerRepresentativeSelectorCount",value:function e(){return Object.keys(babelHelpers.classPrivateFieldGet(this,g)).length}}]);return e}();function H(e){if(!Object.hasOwn(babelHelpers.classPrivateFieldGet(this,g),e)){return}delete babelHelpers.classPrivateFieldGet(this,g)[e];d(this,S,T).call(this);babelHelpers.classPrivateFieldGet(this,y).call(this,e)}function T(){var e=d(this,w,m).call(this);var t=function t(){var a=r[i];var n=e.filter((function(e){return!(e.entityId===a.getRepresentativeId()&&e.entityType===a.getRepresentativeItemType())}));a.setExcludedEntityList(n)};for(var i=0,r=Object.values(babelHelpers.classPrivateFieldGet(this,g));i<r.length;i++){t()}}function m(){var e=[];for(var t=0,i=Object.values(babelHelpers.classPrivateFieldGet(this,g));t<i.length;t++){var a=i[t];var n=a.getRepresentativeId();if(!n){continue}var l=a.getRepresentativeItemType();if(!l){continue}e.push({entityId:n,entityType:l,role:r.MemberRole.reviewer})}return e}e.maxReviewersCount=b;e.DocumentValidation=_})(this.BX.Sign.V2.B2e=this.BX.Sign.V2.B2e||{},BX,BX.Sign.V2.B2e,BX.Sign,BX.Sign.V2);
//# sourceMappingURL=document-validation.bundle.map.js