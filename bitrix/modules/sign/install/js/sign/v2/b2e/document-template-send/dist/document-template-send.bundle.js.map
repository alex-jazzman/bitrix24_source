{"version":3,"file":"document-template-send.bundle.js","sources":["../src/app.js","../src/document-template-send.js"],"sourcesContent":["import { useDocumentTemplateFillingStore } from 'sign.v2.b2e.sign-settings-templates';\nimport { LocMixin } from 'sign.v2.b2e.vue-util';\nimport { ProgressBar } from 'ui.progressbar';\nimport { mapState } from 'ui.vue3.pinia';\nimport { Popup } from 'ui.vue3.components.popup';\n\n// @vue/component\nexport const TemplateSendApp = {\n\tname: 'TemplateSendApp',\n\tcomponents: {\n\t\tPopup,\n\t},\n\tmixins: [LocMixin],\n\tcomputed: {\n\t\tprogress(): number\n\t\t{\n\t\t\treturn mapState(useDocumentTemplateFillingStore, ['sendProgress']).sendProgress();\n\t\t},\n\t\tconfigured(): boolean\n\t\t{\n\t\t\treturn mapState(useDocumentTemplateFillingStore, ['configured']).configured();\n\t\t},\n\t\ttitle(): string\n\t\t{\n\t\t\treturn this.loc('SIGN_DOCUMENT_TEMPLATE_SEND_TITLE');\n\t\t},\n\t\tdescription(): string\n\t\t{\n\t\t\treturn this.configured\n\t\t\t\t? this.loc('SIGN_DOCUMENT_TEMPLATE_SEND_DESCRIPTION_ALLOW_CLOSE')\n\t\t\t\t: this.loc('SIGN_DOCUMENT_TEMPLATE_SEND_DESCRIPTION')\n\t\t\t;\n\t\t},\n\t},\n\twatch: {\n\t\tprogress: {\n\t\t\thandler(newValue: number): void\n\t\t\t{\n\t\t\t\tthis.progressBar.update(newValue);\n\t\t\t},\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tthis.progressBar = new ProgressBar({\n\t\t\tmaxValue: 100,\n\t\t\tvalue: 0,\n\t\t\tcolorTrack: '#dfe3e6',\n\t\t});\n\t},\n\tmounted(): void\n\t{\n\t\tthis.progressBar.renderTo(this.$refs.progressContainer);\n\t},\n\tmethods: {\n\t\tonClose(): void\n\t\t{\n\t\t\tthis.$Bitrix.eventEmitter.emit('sign:document-template-send:close');\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"send-b2e-overlay\">\n\t\t\t<div class=\"sign-b2e-overlay-content\">\n\t\t\t\t<div class=\"sign-b2e-overlay__animate-layout\">\n\t\t\t\t\t<div class=\"sign-b2e-overlay__overlap-docs\">\n\t\t\t\t\t\t<div class=\"sign-b2e-overlay__overlap-doc\"></div>\n\t\t\t\t\t\t<div class=\"sign-b2e-overlay__overlap-doc\"></div>\n\t\t\t\t\t\t<div class=\"sign-b2e-overlay__overlap-doc\"></div>\n\t\t\t\t\t\t<div class=\"sign-b2e-overlay__overlap-doc\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"sign-b2e-overlay__overlap-docs\">\n\t\t\t\t\t\t<div class=\"sign-b2e-overlay__overlap-doc\"></div>\n\t\t\t\t\t\t<div class=\"sign-b2e-overlay__overlap-doc\"></div>\n\t\t\t\t\t\t<div class=\"sign-b2e-overlay__overlap-doc\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sign-b2e-overlay-progress-title\">\n\t\t\t\t\t{{ title }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sign-b2e-overlay-close-description\">\n\t\t\t\t\t{{ description }}\n\t\t\t\t</div>\n\t\t\t\t<button v-if=\"configured\" class=\"ui-btn ui-btn-md ui-btn-light-border ui-btn-round\" @click=\"onClose\">\n\t\t\t\t\t{{ loc('SIGN_DOCUMENT_TEMPLATE_SEND_CLOSE') }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class=\"send-b2e-progress-container\" ref=\"progressContainer\"></div>\n\t\t</div>\n\t`,\n};\n","import { EventEmitter } from 'main.core.events';\nimport { BitrixVue, VueCreateAppResult } from 'ui.vue3';\nimport { TemplateSendApp } from './app';\n\nimport './style.css';\n\nexport class DocumentTemplateSend extends EventEmitter\n{\n\t#app: VueCreateAppResult | null;\n\t#vueApp: Object | null;\n\t#container: HTMLElement;\n\t#store: Object;\n\n\tconstructor(store: Object)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.V2.B2e.DocumentTemplateSend');\n\t\tthis.#store = store;\n\t}\n\n\t#createApp(container: HTMLElement): void\n\t{\n\t\tthis.#app = BitrixVue.createApp(TemplateSendApp, {});\n\t\tthis.#app.use(this.#store);\n\t\tthis.#vueApp = this.#app.mount(container);\n\t\tthis.#vueApp.$Bitrix.eventEmitter.subscribe('sign:document-template-send:close', () => this.emit('close'));\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\tif (this.#container)\n\t\t{\n\t\t\treturn this.#container;\n\t\t}\n\n\t\tthis.#container = BX.Tag.render`<div class=\"sign-settings_templates_send\"></div>`;\n\t\tthis.#createApp(this.#container);\n\n\t\treturn this.#container;\n\t}\n\n\tunmount(): void\n\t{\n\t\tthis.#app.unmount();\n\t}\n}\n"],"names":["TemplateSendApp","name","components","Popup","mixins","LocMixin","computed","progress","mapState","useDocumentTemplateFillingStore","sendProgress","configured","title","loc","description","watch","handler","newValue","progressBar","update","created","ProgressBar","maxValue","value","colorTrack","mounted","renderTo","$refs","progressContainer","methods","onClose","$Bitrix","eventEmitter","emit","template","DocumentTemplateSend","EventEmitter","constructor","store","setEventNamespace","getLayout","BX","Tag","render","unmount","container","BitrixVue","createApp","use","mount","subscribe"],"mappings":";;;;;;;CAMA;AACA,CAAO,MAAMA,eAAe,GAAG;GAC9BC,IAAI,EAAE,iBAAiB;GACvBC,UAAU,EAAE;YACXC;IACA;GACDC,MAAM,EAAE,CAACC,4BAAQ,CAAC;GAClBC,QAAQ,EAAE;KACTC,QAAQ,GACR;OACC,OAAOC,sBAAQ,CAACC,iEAA+B,EAAE,CAAC,cAAc,CAAC,CAAC,CAACC,YAAY,EAAE;MACjF;KACDC,UAAU,GACV;OACC,OAAOH,sBAAQ,CAACC,iEAA+B,EAAE,CAAC,YAAY,CAAC,CAAC,CAACE,UAAU,EAAE;MAC7E;KACDC,KAAK,GACL;OACC,OAAO,IAAI,CAACC,GAAG,CAAC,mCAAmC,CAAC;MACpD;KACDC,WAAW,GACX;OACC,OAAO,IAAI,CAACH,UAAU,GACnB,IAAI,CAACE,GAAG,CAAC,qDAAqD,CAAC,GAC/D,IAAI,CAACA,GAAG,CAAC,yCAAyC,CAAC;;IAGvD;GACDE,KAAK,EAAE;KACNR,QAAQ,EAAE;OACTS,OAAO,CAACC,QAAgB,EACxB;SACC,IAAI,CAACC,WAAW,CAACC,MAAM,CAACF,QAAQ,CAAC;;;IAGnC;GACDG,OAAO,GACP;KACC,IAAI,CAACF,WAAW,GAAG,IAAIG,0BAAW,CAAC;OAClCC,QAAQ,EAAE,GAAG;OACbC,KAAK,EAAE,CAAC;OACRC,UAAU,EAAE;MACZ,CAAC;IACF;GACDC,OAAO,GACP;KACC,IAAI,CAACP,WAAW,CAACQ,QAAQ,CAAC,IAAI,CAACC,KAAK,CAACC,iBAAiB,CAAC;IACvD;GACDC,OAAO,EAAE;KACRC,OAAO,GACP;OACC,IAAI,CAACC,OAAO,CAACC,YAAY,CAACC,IAAI,CAAC,mCAAmC,CAAC;;IAEpE;GACDC,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA6BZ,CAAC;;;;ACzFD,CAIqB;CAAA;CAAA;CAAA;CAAA;AAErB,CAAO,MAAMC,oBAAoB,SAASC,6BAAY,CACtD;GAMCC,WAAW,CAACC,KAAa,EACzB;KACC,KAAK,EAAE;KAAC;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KACR,IAAI,CAACC,iBAAiB,CAAC,gCAAgC,CAAC;KACxD,4CAAI,oBAAUD,KAAK;;GAWpBE,SAAS,GACT;KACC,4CAAI,IAAI,2BACR;OACC,+CAAO,IAAI;;KAGZ,4CAAI,4BAAcC,EAAE,CAACC,GAAG,CAACC,MAAM,cAAC,kDAAgD,EAAC;KACjF,4CAAI,kEAAY,IAAI;KAEpB,+CAAO,IAAI;;GAGZC,OAAO,GACP;KACC,4CAAI,cAAMA,OAAO,EAAE;;CAErB;CAAC,qBAzBWC,SAAsB,EACjC;GACC,4CAAI,gBAAQC,iBAAS,CAACC,SAAS,CAAC/C,eAAe,EAAE,EAAE,CAAC;GACpD,4CAAI,cAAMgD,GAAG,yCAAC,IAAI,kBAAQ;GAC1B,4CAAI,sBAAW,4CAAI,cAAMC,KAAK,CAACJ,SAAS,CAAC;GACzC,4CAAI,oBAASd,OAAO,CAACC,YAAY,CAACkB,SAAS,CAAC,mCAAmC,EAAE,MAAM,IAAI,CAACjB,IAAI,CAAC,OAAO,CAAC,CAAC;CAC3G;;;;;;;;"}