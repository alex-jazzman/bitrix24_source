this.BX=this.BX||{};this.BX.Sign=this.BX.Sign||{};this.BX.Sign.V2=this.BX.Sign.V2||{};(function(e,t,s,i,a,l,o,n,r,c,d,u,b){"use strict";var p="/bitrix/js/sign/v2/b2e/document-setup/dist/images/components/reupload-files-popup/icon.svg";let h=e=>e,v;const P=Object.freeze({upload:"upload",select:"select"});var m=babelHelpers.classPrivateFieldLooseKey("instances");var _=babelHelpers.classPrivateFieldLooseKey("isUploadPopupCompleted");var L=babelHelpers.classPrivateFieldLooseKey("isSelectBlankPopupCompleted");var g=babelHelpers.classPrivateFieldLooseKey("cache");var B=babelHelpers.classPrivateFieldLooseKey("createPopupContent");var T=babelHelpers.classPrivateFieldLooseKey("createSelectPopupButtons");var y=babelHelpers.classPrivateFieldLooseKey("getSelectBlankPopup");var S=babelHelpers.classPrivateFieldLooseKey("createUploadPopupButtons");var D=babelHelpers.classPrivateFieldLooseKey("getUploadPopup");class E extends d.EventEmitter{constructor(){super();Object.defineProperty(this,D,{value:C});Object.defineProperty(this,S,{value:f});Object.defineProperty(this,y,{value:O});Object.defineProperty(this,T,{value:H});Object.defineProperty(this,B,{value:F});this.events={uploadPopup:{onConfirm:"onUploadFilePopupConfirm",onCancel:"onUploadFilePopupCancel"},selectBlankPopup:{onConfirm:"onSelectBlankPopupConfirm",onCancel:"onSelectBlankPopupCancel"}};Object.defineProperty(this,_,{writable:true,value:false});Object.defineProperty(this,L,{writable:true,value:false});Object.defineProperty(this,g,{writable:true,value:new c.MemoryCache});this.setEventNamespace("BX.Sign.B2e.DocumentSetup.ReuploadFilesPopup")}static getOrCreateForObject(e){if(!babelHelpers.classPrivateFieldLooseBase(E,m)[m].has(e)){babelHelpers.classPrivateFieldLooseBase(E,m)[m].set(e,new E)}return babelHelpers.classPrivateFieldLooseBase(E,m)[m].get(e)}showSelectBlankPopup(){babelHelpers.classPrivateFieldLooseBase(this,y)[y]().show()}showUploadPopup(){babelHelpers.classPrivateFieldLooseBase(this,D)[D]().show()}isUploadPopupCompletedOnce(){return babelHelpers.classPrivateFieldLooseBase(this,_)[_]}isSelectBlankPopupCompletedOnce(){return babelHelpers.classPrivateFieldLooseBase(this,L)[L]}}function F(e){const t=e==="upload"?r.Loc.getMessage("SIGN_V2_B2E_DOCUMENT_SETUP_COMPONENTS_POPUP_UPLOAD_DESCRIPTION"):r.Loc.getMessage("SIGN_V2_B2E_DOCUMENT_SETUP_COMPONENTS_POPUP_SELECT_DESCRIPTION");return r.Tag.render(v||(v=h`
			<div class="sign-b2e-document-setup__reupload__wrapper">
				<div class="sign-b2e-document-setup__reupload__icon-container">
					<img class="sign-b2e-document-setup__reupload__icon" src="${0}" alt="Icon"/>
				</div>
				<div class="sign-b2e-document-setup__reupload__text">
					<div class="sign-b2e-document-setup__reupload__title">
						${0}
					</div>
					<div class="sign-b2e-document-setup__reupload__description">
						${0}
					</div>
				</div>
			</div>
		`),p,r.Loc.getMessage("SIGN_V2_B2E_DOCUMENT_SETUP_COMPONENTS_POPUP_TITLE"),t)}function H(){const e=new b.Button({text:r.Loc.getMessage("SIGN_V2_B2E_DOCUMENT_SETUP_COMPONENTS_POPUP_SELECT_CONFIRM"),color:b.Button.Color.PRIMARY,round:true,events:{click:()=>{babelHelpers.classPrivateFieldLooseBase(this,y)[y]().close();babelHelpers.classPrivateFieldLooseBase(this,L)[L]=true;this.emit(this.events.selectBlankPopup.onConfirm)}}});const t=new b.Button({text:r.Loc.getMessage("SIGN_V2_B2E_DOCUMENT_SETUP_COMPONENTS_POPUP_CANCEL"),color:b.Button.Color.LIGHT_BORDER,round:true,events:{click:()=>{babelHelpers.classPrivateFieldLooseBase(this,y)[y]().close();this.emit(this.events.selectBlankPopup.onCancel)}}});return[e,t]}function O(){return babelHelpers.classPrivateFieldLooseBase(this,g)[g].remember("selectBlankPopup",(()=>new u.Popup({disableScroll:true,className:"sign-b2e-document-setup__reupload__popup",content:babelHelpers.classPrivateFieldLooseBase(this,B)[B](P.select),width:386,overlay:true,closeByEsc:false,buttons:babelHelpers.classPrivateFieldLooseBase(this,T)[T]()})))}function f(){const e=new b.Button({text:r.Loc.getMessage("SIGN_V2_B2E_DOCUMENT_SETUP_COMPONENTS_POPUP_UPLOAD_CONFIRM"),color:b.Button.Color.PRIMARY,round:true,closeByEsc:false,events:{click:()=>{babelHelpers.classPrivateFieldLooseBase(this,D)[D]().close();babelHelpers.classPrivateFieldLooseBase(this,_)[_]=true;this.emit(this.events.uploadPopup.onConfirm)}}});const t=new b.Button({text:r.Loc.getMessage("SIGN_V2_B2E_DOCUMENT_SETUP_COMPONENTS_POPUP_CANCEL"),color:b.Button.Color.LIGHT_BORDER,round:true,events:{click:()=>{babelHelpers.classPrivateFieldLooseBase(this,D)[D]().close();this.emit(this.events.uploadPopup.onCancel)}}});return[e,t]}function C(){return babelHelpers.classPrivateFieldLooseBase(this,g)[g].remember("uploadPopup",(()=>new u.Popup({disableScroll:true,className:"sign-b2e-document-setup__reupload__popup",content:babelHelpers.classPrivateFieldLooseBase(this,B)[B](P.upload),width:386,overlay:true,buttons:babelHelpers.classPrivateFieldLooseBase(this,S)[S]()})))}Object.defineProperty(E,m,{writable:true,value:new WeakMap});let N=e=>e,M,U,I,k,A,w,j,K,$,G,x,R,X,V,W,Y;const q=Object.freeze({HowToWorkWithTemplates:"23174934"});var z=babelHelpers.classPrivateFieldLooseKey("cache");var J=babelHelpers.classPrivateFieldLooseKey("api");var Q=babelHelpers.classPrivateFieldLooseKey("region");var Z=babelHelpers.classPrivateFieldLooseKey("senderDocumentTypes");var ee=babelHelpers.classPrivateFieldLooseKey("documentSenderTypeDropdown");var te=babelHelpers.classPrivateFieldLooseKey("documentTitleInput");var se=babelHelpers.classPrivateFieldLooseKey("b2eDocumentLimitCount");var ie=babelHelpers.classPrivateFieldLooseKey("currentEditedId");var ae=babelHelpers.classPrivateFieldLooseKey("currentEditButton");var le=babelHelpers.classPrivateFieldLooseKey("currentEditBlock");var oe=babelHelpers.classPrivateFieldLooseKey("isOpenedFromRobot");var ne=babelHelpers.classPrivateFieldLooseKey("isOpenedFromTemplateFolder");var re=babelHelpers.classPrivateFieldLooseKey("init");var ce=babelHelpers.classPrivateFieldLooseKey("subscribeOnEvents");var de=babelHelpers.classPrivateFieldLooseKey("onBlankSelectorAddFile");var ue=babelHelpers.classPrivateFieldLooseKey("onBlankSelectorToggleSelection");var be=babelHelpers.classPrivateFieldLooseKey("onBlankSelectorBeforeAddFileSuccessfully");var pe=babelHelpers.classPrivateFieldLooseKey("initDocumentSenderType");var he=babelHelpers.classPrivateFieldLooseKey("getDocumentSenderTypeLayout");var ve=babelHelpers.classPrivateFieldLooseKey("getHelpLink");var Pe=babelHelpers.classPrivateFieldLooseKey("getDocumentTitleLayout");var me=babelHelpers.classPrivateFieldLooseKey("getAddDocumentLayout");var _e=babelHelpers.classPrivateFieldLooseKey("getAddDocumentButtonText");var Le=babelHelpers.classPrivateFieldLooseKey("setDocumentLimitNoticeText");var ge=babelHelpers.classPrivateFieldLooseKey("setAddDocumentNoticeText");var Be=babelHelpers.classPrivateFieldLooseKey("onClickAddDocument");var Te=babelHelpers.classPrivateFieldLooseKey("createDocumentBlock");var ye=babelHelpers.classPrivateFieldLooseKey("getDocumentHintLayout");var Se=babelHelpers.classPrivateFieldLooseKey("onClickDeleteDocument");var De=babelHelpers.classPrivateFieldLooseKey("onClickEditDocument");var Ee=babelHelpers.classPrivateFieldLooseKey("sendDocumentSenderType");var Fe=babelHelpers.classPrivateFieldLooseKey("validateInput");var He=babelHelpers.classPrivateFieldLooseKey("disableDocumentInputs");class Oe extends o.DocumentSetup{constructor(e){super(e);Object.defineProperty(this,He,{value:ze});Object.defineProperty(this,Fe,{value:qe});Object.defineProperty(this,Ee,{value:Ye});Object.defineProperty(this,De,{value:We});Object.defineProperty(this,Se,{value:Ve});Object.defineProperty(this,ye,{value:Xe});Object.defineProperty(this,Te,{value:Re});Object.defineProperty(this,Be,{value:xe});Object.defineProperty(this,ge,{value:Ge});Object.defineProperty(this,Le,{value:$e});Object.defineProperty(this,_e,{value:Ke});Object.defineProperty(this,me,{value:je});Object.defineProperty(this,Pe,{value:we});Object.defineProperty(this,ve,{value:Ae});Object.defineProperty(this,he,{value:ke});Object.defineProperty(this,pe,{value:Ie});Object.defineProperty(this,be,{value:Ue});Object.defineProperty(this,ue,{value:Me});Object.defineProperty(this,de,{value:Ne});Object.defineProperty(this,ce,{value:Ce});Object.defineProperty(this,re,{value:fe});Object.defineProperty(this,z,{writable:true,value:new c.MemoryCache});Object.defineProperty(this,J,{writable:true,value:void 0});Object.defineProperty(this,Q,{writable:true,value:void 0});Object.defineProperty(this,Z,{writable:true,value:void 0});Object.defineProperty(this,ee,{writable:true,value:void 0});Object.defineProperty(this,te,{writable:true,value:void 0});this.documentCounters=null;Object.defineProperty(this,se,{writable:true,value:void 0});Object.defineProperty(this,ie,{writable:true,value:void 0});Object.defineProperty(this,ae,{writable:true,value:void 0});Object.defineProperty(this,le,{writable:true,value:void 0});Object.defineProperty(this,oe,{writable:true,value:false});Object.defineProperty(this,ne,{writable:true,value:false});const{region:t,b2eDocumentLimitCount:a,isOpenedFromRobot:l,isOpenedFromTemplateFolder:o}=e;babelHelpers.classPrivateFieldLooseBase(this,J)[J]=new i.Api;babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]=t;babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]=Object.values(s.DocumentInitiated);babelHelpers.classPrivateFieldLooseBase(this,se)[se]=a;this.editMode=false;this.onClickShowHintPopup=this.showHintPopup.bind(this);babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]=l;babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]=o;babelHelpers.classPrivateFieldLooseBase(this,te)[te]=r.Tag.render(M||(M=N`
			<input
				type="text"
				class="ui-ctl-element"
				maxlength="255"
				oninput="${0}"
			/>
		`),(({target:e})=>this.setDocumentTitle(e.value)));babelHelpers.classPrivateFieldLooseBase(this,He)[He]();this.disableAddButton();babelHelpers.classPrivateFieldLooseBase(this,re)[re]()}isRuRegion(){return babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]==="ru"}getAddDocumentButton(){return babelHelpers.classPrivateFieldLooseBase(this,z)[z].remember("addDocumentButton",(()=>r.Tag.render(U||(U=N`
				<button type="button" class="sign-b2e-document-setup__add-button" onclick="${0}">
					${0}
				</button>
			`),babelHelpers.classPrivateFieldLooseBase(this,Be)[Be].bind(this),babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]())))}getAddDocumentNotice(){return babelHelpers.classPrivateFieldLooseBase(this,z)[z].remember("addDocumentNotice",(()=>r.Tag.render(I||(I=N`
				<p class="sign-wizard__notice">${0}</p>
			`),r.Loc.getMessage("SIGN_DOCUMENT_SETUP_ADD_DOCUMENT_NOTICE"))))}switchAddDocumentButtonLoadingState(e){if(e){r.Dom.addClass(this.getAddDocumentButton(),"ui-btn-wait")}else{r.Dom.removeClass(this.getAddDocumentButton(),"ui-btn-wait")}}disableAddButton(){r.Dom.addClass(this.getAddDocumentButton(),"--disabled")}enableAddButton(){r.Dom.removeClass(this.getAddDocumentButton(),"--disabled")}toggleDeleteBtnLoadingState(e){r.Dom.toggleClass(e,"ui-btn-wait")}renderDocumentBlock(e){if(!e){return}r.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,Te)[Te](e),this.headerLayout)}updateDocumentBlock(e){const t=this.layout.querySelector(`[data-id="document-id-${e}"]`);const s=t.querySelector(".sign-b2e-document-setup__document-block_title");s.textContent=babelHelpers.classPrivateFieldLooseBase(this,te)[te].title}replaceDocumentBlock(e,t){const s=this.layout.querySelector(`[data-id="document-id-${e.id}"]`);r.Dom.replace(s,babelHelpers.classPrivateFieldLooseBase(this,Te)[Te](t))}toggleEditMode(e,t){if(babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]!==e){this.resetEditMode()}const s=t.closest(`[data-id="document-id-${e}"]`);r.Dom.toggleClass(s,"--edit");if(this.editMode){t.textContent=r.Loc.getMessage("SIGN_DOCUMENT_SETUP_DOCUMENT_EDIT_BUTTON");babelHelpers.classPrivateFieldLooseBase(this,He)[He]();this.disableAddButton();this.editMode=false}else{t.textContent=r.Loc.getMessage("SIGN_DOCUMENT_SETUP_DOCUMENT_CANCEL_BUTTON");this.editMode=true;this.enableDocumentInputs();this.enableAddButton();babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]=e;babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]=t;babelHelpers.classPrivateFieldLooseBase(this,le)[le]=s}}resetEditMode(){if(!babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]){return}babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].textContent=r.Loc.getMessage("SIGN_DOCUMENT_SETUP_DOCUMENT_EDIT_BUTTON");r.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,le)[le],"--edit");this.editMode=false;babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]=null;babelHelpers.classPrivateFieldLooseBase(this,le)[le]=null;babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]=null}getHeaderLayout(){const e=this.isTemplateMode()?r.Loc.getMessage("SIGN_DOCUMENT_SETUP_TEMPLATE_HEADER"):r.Loc.getMessage("SIGN_DOCUMENT_SETUP_HEADER");this.headerLayout=r.Tag.render(k||(k=N`
			<h1 class="sign-b2e-settings__header">${0}</h1>
		`),e);return this.headerLayout}setDocumentTitle(e=""){babelHelpers.classPrivateFieldLooseBase(this,te)[te].value=e;babelHelpers.classPrivateFieldLooseBase(this,te)[te].title=e}setDocumentSenderType(e){if(!this.isTemplateMode()||!this.isSenderTypeAvailable()){return}const t=babelHelpers.classPrivateFieldLooseBase(this,Z)[Z].includes(e)?e:"employee";babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].selectItem(t)}initLayout(){this.layout=r.Tag.render(A||(A=N`
			<div class="sign-document-setup">
				${0}
				${0}
			</div>
		`),this.getHeaderLayout(),this.getDocumentSectionLayout())}getDocumentSectionLayout(){if(!this.documentSectionLayout){this.documentSectionLayout=r.Tag.render(w||(w=N`
				<div class="sign-b2e-settings__item">
					${0}
				</div>
			`),this.getDocumentSectionInnerLayout());this.createHintPopup()}return this.documentSectionLayout}getDocumentSectionInnerLayout(){const e=this.isTemplateMode()?r.Loc.getMessage("SIGN_DOCUMENT_SETUP_ADD_TEMPLATE_TITLE"):r.Loc.getMessage("SIGN_DOCUMENT_SETUP_ADD_TITLE");this.documentSectionInnerLayout=r.Tag.render(j||(j=N`
			<div class="sign-b2e-settings__item-inner">
				<p class="sign-b2e-settings__item_title">
					${0}
				</p>
				${0}
			</div>
		`),e,this.blankSelector.getLayout());return this.documentSectionInnerLayout}createHintPopup(){this.hintPopup=new u.Popup({content:r.Loc.getMessage("SIGN_DOCUMENT_SETUP_DOCUMENT_LIMIT_POPUP"),autoHide:true,darkMode:true})}setAvailabilityDocumentSection(e){if(e){r.Dom.removeClass(this.documentSectionInnerLayout,"--disabled");r.Event.unbind(this.documentSectionLayout,"click",this.onClickShowHintPopup);this.hintPopup.close();return}r.Dom.addClass(this.documentSectionInnerLayout,"--disabled");r.Event.bind(this.documentSectionLayout,"click",this.onClickShowHintPopup)}showHintPopup(e){this.hintPopup.setBindElement(e);this.hintPopup.show()}async setup(e){try{const t=this.isEditActionMode()&&this.isTemplateMode()&&this.blankSelector.isFilesReadyForUpload();await super.setup(e,this.isTemplateMode(),t);if(!this.setupData||this.blankIsNotSelected){this.ready=true;return}if(e){const{title:e,initiatedByType:t}=this.setupData;this.setDocumentTitle(e);this.setDocumentSenderType(t);return}this.ready=false;this.setupData=await this.updateDocumentData(this.setupData)}catch{const{blankId:e}=this.setupData;this.handleError(e)}this.ready=true}async updateDocumentData(e){if(!e){return}await Promise.all([babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee](e.uid)]);const{value:t}=babelHelpers.classPrivateFieldLooseBase(this,te)[te];const{templateUid:s}=this.setupData;const i=await babelHelpers.classPrivateFieldLooseBase(this,J)[J].modifyTitle(e.uid,t);const{blankTitle:a}=i;if(a){const{blankId:t}=e;this.blankSelector.modifyBlankTitle(t,a)}return{...e,title:t,templateUid:s}}validate(){return babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe](babelHelpers.classPrivateFieldLooseBase(this,te)[te])}isSenderTypeAvailable(){const e=r.Extension.getSettings("sign.v2.b2e.document-setup");return e.get("isSenderTypeAvailable")}resetDocument(){this.blankSelector.resetSelectedBlank();this.setDocumentTitle("");this.isFileAdded=false;babelHelpers.classPrivateFieldLooseBase(this,He)[He]();this.disableAddButton()}enableDocumentInputs(){babelHelpers.classPrivateFieldLooseBase(this,te)[te].disabled=false;this.blankIsNotSelected=false}}function fe(){babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]();const e=this.isTemplateMode()?r.Loc.getMessage("SIGN_DOCUMENT_SETUP_TITLE_TEMPLATE_HEAD_LABEL"):r.Loc.getMessage("SIGN_DOCUMENT_SETUP_TITLE_HEAD_LABEL");const s=r.Tag.render(K||(K=N`
			<div class="sign-b2e-settings__item">
				<p class="sign-b2e-settings__item_title">
					${0}
				</p>
				${0}
			</div>
		`),e,babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe]());if(!babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]){r.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,he)[he](),this.layout)}r.Dom.append(s,this.layout);if(!this.isTemplateMode()&&t.FeatureStorage.isGroupSendingEnabled()){this.documentCounters=new a.DocumentCounters({documentCountersLimit:babelHelpers.classPrivateFieldLooseBase(this,se)[se]});r.Dom.append(this.documentCounters.getLayout(),this.layout);const e=babelHelpers.classPrivateFieldLooseBase(this,me)[me]();r.Dom.append(e,this.layout)}n.Hint.create(this.layout);babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]()}function Ce(){const e=this.blankSelector;e.subscribe(e.events.toggleSelection,babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].bind(this));e.subscribe(e.events.addFile,babelHelpers.classPrivateFieldLooseBase(this,de)[de].bind(this));e.subscribe(e.events.beforeAddFileSuccessfully,babelHelpers.classPrivateFieldLooseBase(this,be)[be].bind(this));if(!this.isTemplateMode()&&t.FeatureStorage.isGroupSendingEnabled()){this.documentCounters.subscribe("limitNotExceeded",(()=>{this.enableAddButton();babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]();this.emit("documentsLimitNotExceeded")}));this.documentCounters.subscribe("limitExceeded",(()=>{this.disableAddButton();babelHelpers.classPrivateFieldLooseBase(this,Le)[Le]();this.emit("documentsLimitExceeded")}))}}function Ne(e){const t=e.getData();this.isFileAdded=true;this.enableDocumentInputs();this.enableAddButton();if(!this.isTemplateMode()||!this.isEditActionMode()){this.setDocumentTitle(t.title)}const s=E.getOrCreateForObject(this);if(s.isUploadPopupCompletedOnce()){this.setDocumentTitle(t.title)}}function Me(e){if(this.blankIsNotSelected&&this.editMode){return}const t=e.getData();const s=()=>{this.setDocumentTitle(t.title);if(t.selected){this.enableDocumentInputs();this.enableAddButton()}};if(!this.isEditActionMode()||!this.isTemplateMode()){s();return}const i=E.getOrCreateForObject(this);if(i.isSelectBlankPopupCompletedOnce()){s();return}const a=t.extra;if(!t.selected||a!=null&&a.isInitial||a!=null&&a.skipSelectPopupShow){return}const l=t.previousSelectedBlankId;i.showSelectBlankPopup();i.subscribeOnce(i.events.selectBlankPopup.onConfirm,s);i.subscribeOnce(i.events.selectBlankPopup.onCancel,(()=>{i.unsubscribe(i.events.selectBlankPopup.onConfirm,s);if(r.Type.isNumber(l)&&l>0){this.blankSelector.selectBlank(l,{skipSelectPopupShow:true})}}))}function Ue(e){if(!this.isTemplateMode()||!this.isEditActionMode()){return}const t=E.getOrCreateForObject(this);const s=this.blankSelector.selectedBlankId;if(t.isUploadPopupCompletedOnce()){return}t.showUploadPopup();const i=()=>{this.blankSelector.clearFiles();this.blankSelector.selectBlank(s,{skipSelectPopupShow:true})};const a=()=>{this.blankSelector.getBlank();const e=this.blankSelector.getUploadedFileName(0);if(r.Type.isStringFilled(e)){this.setDocumentTitle(e)}};const l=(e,s)=>i=>{e(i);t.unsubscribe(t.events.uploadPopup.onCancel,s);t.unsubscribe(t.events.uploadPopup.onConfirm,s)};t.subscribeOnce(t.events.uploadPopup.onCancel,l(i,a));t.subscribeOnce(t.events.uploadPopup.onConfirm,l(a,i))}function Ie(){var e;if(!this.isTemplateMode()||!this.isSenderTypeAvailable()){return}babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]=new l.SignDropdown({tabs:[{id:"b2e-document-sender-types",title:" "}],entities:[{id:"b2e-document-sender-type",searchFields:[{name:"caption",system:true}]}],className:"sign-b2e-document-setup__sender-type-selector",withCaption:true,isEnableSearch:false,height:110,width:350});babelHelpers.classPrivateFieldLooseBase(this,Z)[Z].forEach((e=>{if(r.Type.isStringFilled(e)){const t=`SIGN_DOCUMENT_SETUP_SENDER_TYPE_${e.toUpperCase()}`;babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].addItem({id:e,title:r.Loc.getMessage(t),entityId:"b2e-document-sender-type",tabs:"b2e-document-sender-types",deselectable:false})}}));const t=babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]?1:0;const s=(e=babelHelpers.classPrivateFieldLooseBase(this,Z)[Z][t])!=null?e:null;if(s){babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].selectItem(s)}}function ke(){if(!this.isTemplateMode()||!this.isSenderTypeAvailable()||babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]){return null}return r.Tag.render($||($=N`
			<div class="sign-b2e-settings__item">
				<p class="sign-b2e-settings__item_title">
					<span>${0}</span>
				</p>
				${0}
				${0}
			</div>
		`),r.Loc.getMessage("SIGN_DOCUMENT_SETUP_SENDER_TYPE_TITLE"),babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].getLayout(),babelHelpers.classPrivateFieldLooseBase(this,ve)[ve]())}function Ae(){return n.Helpdesk.replaceLink(r.Loc.getMessage("SIGN_DOCUMENT_SETUP_SENDER_TYPE_HELP_LINK"),q.HowToWorkWithTemplates,"detail",["ui-link"])}function we(){return r.Tag.render(G||(G=N`
			<div>
				<div class="sign-b2e-document-setup__title-item --full">
					<div class="ui-ctl ui-ctl-textbox">
						${0}
					</div>
				</div>
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,te)[te],babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]())}function je(){return babelHelpers.classPrivateFieldLooseBase(this,z)[z].remember("addDocumentLayout",(()=>r.Tag.render(x||(x=N`
				<div class="sign-b2e-settings__item --add">
					<div class="sign-b2e-settings__item_title">
						<span>${0}</span>
						${0}
					</div>
					${0}
					${0}
				</div>
			`),r.Loc.getMessage("SIGN_DOCUMENT_SETUP_ADD_DOCUMENT"),this.documentCounters.getLayout(),this.getAddDocumentButton(),this.getAddDocumentNotice())))}function Ke(){return babelHelpers.classPrivateFieldLooseBase(this,z)[z].remember("addDocumentButtonText",(()=>r.Tag.render(R||(R=N`
				<span class="sign-b2e-document-setup__add-button_text">${0}</span>
			`),r.Loc.getMessage("SIGN_DOCUMENT_SETUP_ADD_ANOTHER_DOCUMENT"))))}function $e(){r.Dom.addClass(this.getAddDocumentNotice(),"--warning");this.getAddDocumentNotice().textContent=r.Loc.getMessage("SIGN_DOCUMENT_SETUP_DOCUMENT_LIMIT_NOTICE")}function Ge(){r.Dom.removeClass(this.getAddDocumentNotice(),"--warning");this.getAddDocumentNotice().textContent=r.Loc.getMessage("SIGN_DOCUMENT_SETUP_ADD_DOCUMENT_NOTICE")}function xe(){this.emit("addDocument")}function Re(e){const t=r.Tag.render(X||(X=N`
			<button class="sign-b2e-document-setup__document-block_delete" type="button"></button>
		`));const s=r.Tag.render(V||(V=N`
			<button class="ui-btn ui-btn-round ui-btn-sm ui-btn-light-border" type="button">
				${0}
			</button>
		`),r.Loc.getMessage("SIGN_DOCUMENT_SETUP_DOCUMENT_EDIT_BUTTON"));r.Event.bind(t,"click",(t=>{babelHelpers.classPrivateFieldLooseBase(this,Se)[Se](e,t)}));r.Event.bind(s,"click",(t=>{babelHelpers.classPrivateFieldLooseBase(this,De)[De](e,t)}));return r.Tag.render(W||(W=N`
			<div class="sign-b2e-document-setup__document-block" data-id="document-id-${0}">
				<div class="sign-b2e-document-setup__document-block_inner">
					<div class="sign-b2e-document-setup__document-block_title">${0}</div>
				</div>
				<div class="sign-b2e-document-setup__document-block_btn">
					${0}
					${0}
				</div>
				<div class="sign-b2e-document-setup__document-block_hint">
					${0}
				</div>
			</div>
		`),e.id,e.title,s,t,r.Loc.getMessage("SIGN_DOCUMENT_SETUP_ADD_DOCUMENT_HINT"))}function Xe(){if(this.isTemplateMode()){return null}return babelHelpers.classPrivateFieldLooseBase(this,z)[z].remember("documentHintLayout",(()=>r.Tag.render(Y||(Y=N`
				<p class="sign-b2e-document-setup__title-text">
					${0}
				</p>
			`),r.Loc.getMessage("SIGN_DOCUMENT_SETUP_TITLE_HINT"))))}function Ve(e,t){this.setupData=null;const{id:s,uid:i,blankId:a}=e;const l=t.target;this.toggleDeleteBtnLoadingState(l);this.emit("deleteDocument",{id:s,uid:i,blankId:a,deleteButton:l})}function We(e,t){const{id:s,uid:i}=e;this.toggleEditMode(s,t.target);this.emit("editDocument",{uid:i})}function Ye(e){if(!this.isTemplateMode()||!this.isSenderTypeAvailable()){return Promise.resolve()}const t=babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].getSelectedId();this.setupData.initiatedByType=t;return babelHelpers.classPrivateFieldLooseBase(this,J)[J].changeSenderDocumentType(e,t)}function qe(e){if(!e){return true}const{parentNode:t,value:s}=e;if(s.trim()!==""){r.Dom.removeClass(t,"ui-ctl-warning");return true}r.Dom.addClass(t,"ui-ctl-warning");e.focus();return false}function ze(){babelHelpers.classPrivateFieldLooseBase(this,te)[te].disabled=true;this.blankIsNotSelected=true}e.DocumentSetup=Oe})(this.BX.Sign.V2.B2e=this.BX.Sign.V2.B2e||{},BX.Sign,BX.Sign,BX.Sign.V2,BX.Sign.V2.B2e,BX.Sign.V2.B2e,BX.Sign.V2,BX.Sign.V2,BX,BX.Cache,BX.Event,BX.Main,BX.UI);
//# sourceMappingURL=document-setup.bundle.map.js