this.BX=this.BX||{};this.BX.Sign=this.BX.Sign||{};this.BX.Sign.V2=this.BX.Sign.V2||{};(function(e,t,s,i,a,o,l,r,n,d,c,u,p,b,h,m,v){"use strict";let y=e=>e,P,S,f,L,F,B;const g=new Set(["jpg","jpeg","png","pdf","doc","docx","rtf","odt"]);var H=babelHelpers.classPrivateFieldLooseKey("companyParty");var D=babelHelpers.classPrivateFieldLooseKey("regionalSettings");var I=babelHelpers.classPrivateFieldLooseKey("userParty");var T=babelHelpers.classPrivateFieldLooseKey("api");var _=babelHelpers.classPrivateFieldLooseKey("maxDocumentCount");var E=babelHelpers.classPrivateFieldLooseKey("cache");var w=babelHelpers.classPrivateFieldLooseKey("saveButton");var G=babelHelpers.classPrivateFieldLooseKey("isMultiDocumentSaveProcessGone");var O=babelHelpers.classPrivateFieldLooseKey("needSkipEditorStep");var M=babelHelpers.classPrivateFieldLooseKey("previewDocumentDropdown");var C=babelHelpers.classPrivateFieldLooseKey("prepareConfig");var k=babelHelpers.classPrivateFieldLooseKey("editDocumentData");var A=babelHelpers.classPrivateFieldLooseKey("createPreviewDocumentDropdown");var j=babelHelpers.classPrivateFieldLooseKey("setPreviewDocumentDropdownItems");var N=babelHelpers.classPrivateFieldLooseKey("handleEditedDocument");var K=babelHelpers.classPrivateFieldLooseKey("removeDocumentElement");var U=babelHelpers.classPrivateFieldLooseKey("attachGroupToDocument");var R=babelHelpers.classPrivateFieldLooseKey("saveUpdatedDocumentData");var x=babelHelpers.classPrivateFieldLooseKey("togglePreviewDocumentDropdown");var V=babelHelpers.classPrivateFieldLooseKey("deleteDocument");var X=babelHelpers.classPrivateFieldLooseKey("setupParties");var z=babelHelpers.classPrivateFieldLooseKey("isTemplateModeForCompany");var $=babelHelpers.classPrivateFieldLooseKey("syncMembersWithDepartments");var W=babelHelpers.classPrivateFieldLooseKey("sleep");var Y=babelHelpers.classPrivateFieldLooseKey("documentUid");var Z=babelHelpers.classPrivateFieldLooseKey("isDocumentInitiatedByEmployee");var q=babelHelpers.classPrivateFieldLooseKey("getAssignee");var J=babelHelpers.classPrivateFieldLooseKey("getSigner");var Q=babelHelpers.classPrivateFieldLooseKey("makeSetupMembers");var ee=babelHelpers.classPrivateFieldLooseKey("parseMembers");var te=babelHelpers.classPrivateFieldLooseKey("getMemberEntityTypeByRole");var se=babelHelpers.classPrivateFieldLooseKey("getSetupStep");var ie=babelHelpers.classPrivateFieldLooseKey("getCompanyStep");var ae=babelHelpers.classPrivateFieldLooseKey("getRegionalSettingsStep");var oe=babelHelpers.classPrivateFieldLooseKey("getEmployeeStep");var le=babelHelpers.classPrivateFieldLooseKey("executeDocumentSendActions");var re=babelHelpers.classPrivateFieldLooseKey("executeEditorActions");var ne=babelHelpers.classPrivateFieldLooseKey("getSendStep");var de=babelHelpers.classPrivateFieldLooseKey("isRegionalSettingsStepEnabled");var ce=babelHelpers.classPrivateFieldLooseKey("setSecondPartySectionVisibility");var ue=babelHelpers.classPrivateFieldLooseKey("setHcmLinkIntegrationSectionVisibility");var pe=babelHelpers.classPrivateFieldLooseKey("isInitiatedByEmployee");var be=babelHelpers.classPrivateFieldLooseKey("decorateStepsBeforeCompletionWithAnalytics");var he=babelHelpers.classPrivateFieldLooseKey("sendAnalyticsOnSetupStep");var me=babelHelpers.classPrivateFieldLooseKey("sendAnalyticsOnSetupError");var ve=babelHelpers.classPrivateFieldLooseKey("sendAnalyticsOnCompanyStepSuccess");var ye=babelHelpers.classPrivateFieldLooseKey("sendAnalyticsOnCompanyStepError");var Pe=babelHelpers.classPrivateFieldLooseKey("sendAnalyticsOnSendStepSuccess");var Se=babelHelpers.classPrivateFieldLooseKey("sendAnalyticsOnSendStepError");var fe=babelHelpers.classPrivateFieldLooseKey("sendAnalyticsOnStart");var Le=babelHelpers.classPrivateFieldLooseKey("processSetupData");var Fe=babelHelpers.classPrivateFieldLooseKey("addDocumentInGroup");var Be=babelHelpers.classPrivateFieldLooseKey("scrollToTop");var ge=babelHelpers.classPrivateFieldLooseKey("scrollToDown");var He=babelHelpers.classPrivateFieldLooseKey("resetDocument");var De=babelHelpers.classPrivateFieldLooseKey("disableDocumentSectionIfLimitReached");var Ie=babelHelpers.classPrivateFieldLooseKey("onBeforePreviewBtnClick");var Te=babelHelpers.classPrivateFieldLooseKey("getMultiDocumentAddSidePanelContent");var _e=babelHelpers.classPrivateFieldLooseKey("getUploader");var Ee=babelHelpers.classPrivateFieldLooseKey("resetAfterPreviewSidePanel");var we=babelHelpers.classPrivateFieldLooseKey("getUploadFileButton");var Ge=babelHelpers.classPrivateFieldLooseKey("getUploadFileFromDirButton");var Oe=babelHelpers.classPrivateFieldLooseKey("onInputFileChange");var Me=babelHelpers.classPrivateFieldLooseKey("onFileAdd");var Ce=babelHelpers.classPrivateFieldLooseKey("onBeforePreviewSaveBtnClick");var ke=babelHelpers.classPrivateFieldLooseKey("onUploadComplete");var Ae=babelHelpers.classPrivateFieldLooseKey("onBeforeFilesAdd");var je=babelHelpers.classPrivateFieldLooseKey("isIntegrationEnabled");var Ne=babelHelpers.classPrivateFieldLooseKey("executeTemplateSetupPartyActions");class Ke extends b.SignSettings{constructor(e,t){super(e,t,{next:{className:"ui-btn-success"},complete:{className:"ui-btn-success"},swapButtons:true});Object.defineProperty(this,Ne,{value:Xt});Object.defineProperty(this,je,{value:Vt});Object.defineProperty(this,Ae,{value:xt});Object.defineProperty(this,ke,{value:Rt});Object.defineProperty(this,Ce,{value:Ut});Object.defineProperty(this,Me,{value:Kt});Object.defineProperty(this,Oe,{value:Nt});Object.defineProperty(this,Ge,{value:jt});Object.defineProperty(this,we,{value:At});Object.defineProperty(this,Ee,{value:kt});Object.defineProperty(this,_e,{value:Ct});Object.defineProperty(this,Te,{value:Mt});Object.defineProperty(this,Ie,{value:Ot});Object.defineProperty(this,De,{value:Gt});Object.defineProperty(this,He,{value:wt});Object.defineProperty(this,ge,{value:Et});Object.defineProperty(this,Be,{value:_t});Object.defineProperty(this,Fe,{value:Tt});Object.defineProperty(this,Le,{value:It});Object.defineProperty(this,fe,{value:Dt});Object.defineProperty(this,Se,{value:Ht});Object.defineProperty(this,Pe,{value:gt});Object.defineProperty(this,ye,{value:Bt});Object.defineProperty(this,ve,{value:Ft});Object.defineProperty(this,me,{value:Lt});Object.defineProperty(this,he,{value:ft});Object.defineProperty(this,be,{value:St});Object.defineProperty(this,pe,{value:Pt});Object.defineProperty(this,ue,{value:yt});Object.defineProperty(this,ce,{value:vt});Object.defineProperty(this,de,{value:mt});Object.defineProperty(this,ne,{value:ht});Object.defineProperty(this,re,{value:bt});Object.defineProperty(this,le,{value:pt});Object.defineProperty(this,oe,{value:ut});Object.defineProperty(this,ae,{value:ct});Object.defineProperty(this,ie,{value:dt});Object.defineProperty(this,se,{value:nt});Object.defineProperty(this,te,{value:rt});Object.defineProperty(this,ee,{value:lt});Object.defineProperty(this,Q,{value:ot});Object.defineProperty(this,J,{value:at});Object.defineProperty(this,q,{value:it});Object.defineProperty(this,Z,{get:st,set:void 0});Object.defineProperty(this,Y,{get:tt,set:void 0});Object.defineProperty(this,W,{value:et});Object.defineProperty(this,$,{value:Qe});Object.defineProperty(this,z,{value:Je});Object.defineProperty(this,X,{value:qe});Object.defineProperty(this,V,{value:Ze});Object.defineProperty(this,x,{value:Ye});Object.defineProperty(this,R,{value:We});Object.defineProperty(this,U,{value:$e});Object.defineProperty(this,K,{value:ze});Object.defineProperty(this,N,{value:Xe});Object.defineProperty(this,j,{value:Ve});Object.defineProperty(this,A,{value:xe});Object.defineProperty(this,k,{value:Re});Object.defineProperty(this,C,{value:Ue});Object.defineProperty(this,H,{writable:true,value:void 0});Object.defineProperty(this,D,{writable:true,value:void 0});Object.defineProperty(this,I,{writable:true,value:void 0});Object.defineProperty(this,T,{writable:true,value:void 0});Object.defineProperty(this,_,{writable:true,value:void 0});Object.defineProperty(this,E,{writable:true,value:new s.MemoryCache});Object.defineProperty(this,w,{writable:true,value:void 0});Object.defineProperty(this,G,{writable:true,value:false});Object.defineProperty(this,O,{writable:true,value:void 0});Object.defineProperty(this,M,{writable:true,value:null});const{b2eFeatureConfig:i,blankSelectorConfig:p,documentSendConfig:b,userPartyConfig:h}=babelHelpers.classPrivateFieldLooseBase(this,C)[C](t);this.documentSetup=new r.DocumentSetup(p);this.documentSend=new l.DocumentSend(b);babelHelpers.classPrivateFieldLooseBase(this,H)[H]=new n.Parties({...p,documentInitiatedType:t.initiatedByType,documentMode:t.documentMode},i.hcmLinkAvailable);babelHelpers.classPrivateFieldLooseBase(this,D)[D]=new d.RegionalSettings({templateMode:this.isTemplateMode(),regionDocumentTypes:p.regionDocumentTypes});babelHelpers.classPrivateFieldLooseBase(this,D)[D].isIntegrationVisible=!(this.isTemplateMode()&&t.initiatedByType===a.DocumentInitiated.employee);babelHelpers.classPrivateFieldLooseBase(this,T)[T]=new o.Api;babelHelpers.classPrivateFieldLooseBase(this,_)[_]=t.b2eDocumentLimitCount;babelHelpers.classPrivateFieldLooseBase(this,I)[I]=new c.UserParty({mode:"edit",...h});this.subscribeOnEvents();babelHelpers.classPrivateFieldLooseBase(this,O)[O]=b.needSkipEditorStep;this.editor.setIsB2eDocumentSectionDisabled(!this.documentSetup.isRuRegion());this.editor.setSectionVisibilityByType(u.SectionType.HcmLinkIntegration,false);babelHelpers.classPrivateFieldLooseBase(this,H)[H].subscribe("onCompanySelect",(e=>{var t,s;this.documentSend.setProvider(e.data.provider);babelHelpers.classPrivateFieldLooseBase(this,D)[D].isIntegrationEnabled=babelHelpers.classPrivateFieldLooseBase(this,je)[je]((t=e.data)==null?void 0:(s=t.provider)==null?void 0:s.code)}));babelHelpers.classPrivateFieldLooseBase(this,H)[H].subscribe("onProviderSelect",(e=>{var t,s;this.documentSend.setProvider(e.data.provider);babelHelpers.classPrivateFieldLooseBase(this,D)[D].isIntegrationEnabled=babelHelpers.classPrivateFieldLooseBase(this,je)[je]((t=e.data)==null?void 0:(s=t.provider)==null?void 0:s.code)}));babelHelpers.classPrivateFieldLooseBase(this,A)[A]()}subscribeOnEvents(){super.subscribeOnEvents();this.documentSend.subscribe("changeTitle",(({data:e})=>{const s=e==null?void 0:e.title;if(!s){return}const i=e==null?void 0:e.uid;if(!i){return}const a=t.Text.encode(s);this.documentSetup.setDocumentTitle(a);if(!this.isGroupDocuments()){return}if(this.documentsGroup.has(i)===false){return}const o=this.documentsGroup.get(i);o.title=a;this.documentsGroup.set(i,o);this.documentSetup.updateDocumentBlock(o.id);this.addInDocumentsGroupUids(o.uid);babelHelpers.classPrivateFieldLooseBase(this,D)[D].documentsGroup=this.documentsGroup;const l=babelHelpers.classPrivateFieldLooseBase(this,M)[M].getSelectedId();babelHelpers.classPrivateFieldLooseBase(this,j)[j]();if(!l){return}babelHelpers.classPrivateFieldLooseBase(this,M)[M].setItemSelected(l)}));this.documentSend.subscribe("disableBack",(()=>{this.wizard.toggleBtnActiveState("back",true)}));this.documentSend.subscribe("enableBack",(()=>{this.wizard.toggleBtnActiveState("back",false)}));this.documentSetup.subscribe("addDocument",(()=>{this.setDocumentsGroup()}));this.documentSetup.subscribe("deleteDocument",(({data:e})=>{babelHelpers.classPrivateFieldLooseBase(this,V)[V](e)}));this.documentSetup.subscribe("editDocument",(({data:e})=>{babelHelpers.classPrivateFieldLooseBase(this,k)[k](e.uid)}));this.documentSend.subscribe("enableComplete",(()=>{this.wizard.toggleBtnActiveState("complete",false)}));this.documentSend.subscribe("disableComplete",(()=>{this.wizard.toggleBtnActiveState("complete",true)}));this.documentSetup.subscribe("documentsLimitExceeded",(()=>{this.documentSetup.setAvailabilityDocumentSection(false)}));this.documentSetup.subscribe("documentsLimitNotExceeded",(()=>{this.documentSetup.setAvailabilityDocumentSection(true)}));this.documentSend.subscribe(this.documentSend.events.onTemplateComplete,(e=>{if(this.isTemplateMode()&&!this.isEditMode()){const t=e.getData().templateId;this.getAnalytics().send({event:"turn_on_off_template",type:"auto",c_element:"on",p5:`templateId_${t}`});this.getAnalytics().send({event:"click_save_template",c_element:"create_button",p5:`templateId_${t}`,status:"success"})}}));this.editor.subscribe("save",(({data:e})=>{const t=e.uid;if(this.documentsGroup.has(t)===false){return}babelHelpers.classPrivateFieldLooseBase(this,M)[M].selectItem(t)}))}getLayoutTemplate(e,s,i){const a=babelHelpers.classPrivateFieldLooseBase(this,M)[M].getLayout();babelHelpers.classPrivateFieldLooseBase(this,x)[x]();return t.Tag.render(P||(P=y`
			<div class="sign-settings__scope sign-settings --b2e">
				<div class="sign-settings__sidebar">
					${0}
					${0}
				</div>
				<div class="sing-settings-preview-block">
					${0}
					${0}
				</div>
			</div>
		`),e,s,a,i)}async setDocumentsGroup(){if(this.documentSetup.blankIsNotSelected||!this.documentSetup.validate()){return}this.documentSetup.switchAddDocumentButtonLoadingState(true);try{const e=await this.setupDocument();this.documentsGroup.set(e.uid,e);this.addInDocumentsGroupUids(e.uid);this.documentSetup.blankSelector.disableSelectedBlank(e.blankId);await babelHelpers.classPrivateFieldLooseBase(this,U)[U](e);this.documentSetup.switchAddDocumentButtonLoadingState(false);if(this.editedDocument){let t=e.uid;if((this.documentSetup.blankIsNotSelected||e.blankId===this.editedDocument.blankId)&&!this.documentSetup.isFileAdded){t=this.editedDocument.uid}await babelHelpers.classPrivateFieldLooseBase(this,N)[N](e).then((()=>{babelHelpers.classPrivateFieldLooseBase(this,M)[M].selectItem(t)})).catch((()=>{}))}else{this.documentSetup.renderDocumentBlock(e);if(this.isGroupDocuments()){babelHelpers.classPrivateFieldLooseBase(this,j)[j]()}babelHelpers.classPrivateFieldLooseBase(this,x)[x]()}}catch{this.documentSetup.switchAddDocumentButtonLoadingState(false)}babelHelpers.classPrivateFieldLooseBase(this,Be)[Be]();this.documentSetup.documentCounters.update(this.documentsGroup.size);babelHelpers.classPrivateFieldLooseBase(this,He)[He]();this.wizard.toggleBtnActiveState("next",false)}addInDocumentsGroupUids(e){if(!this.documentsGroupUids.includes(e)){this.documentsGroupUids.push(e)}}replaceInDocumentsGroupUids(e,t){const s=this.documentsGroupUids.indexOf(e);if(s!==-1){this.documentsGroupUids.splice(s,1,t)}}deleteFromDocumentsGroupUids(e){const t=this.documentsGroupUids.indexOf(e);if(t===-1){return}this.documentsGroupUids.splice(t,1)}async applyDocumentData(e){const t=await this.setupDocument(e,true);if(!t){return false}if(t.groupId){var s;const e=await babelHelpers.classPrivateFieldLooseBase(this,T)[T].getDocumentListInGroup(t.groupId);for(const t of e){this.addInDocumentsGroupUids(t.uid);const e=await babelHelpers.classPrivateFieldLooseBase(this,T)[T].loadBlocksByDocument(t.uid);const s={...t,blocks:e};this.documentsGroup.set(t.uid,s);this.documentSetup.renderDocumentBlock(s);this.documentSetup.blankSelector.disableSelectedBlank(s.blankId)}this.groupId=t.groupId;(s=this.documentSetup.documentCounters)==null?void 0:s.update(this.documentsGroup.size);babelHelpers.classPrivateFieldLooseBase(this,He)[He]()}else{this.documentsGroup.set(t.uid,t);this.addInDocumentsGroupUids(t.uid)}const i=this.getFirstDocumentDataFromGroup();const{entityId:o,representativeId:l,companyUid:r,companyEntityId:n,hcmLinkCompanyId:d}=i;this.documentSend.documentData=this.documentsGroup;babelHelpers.classPrivateFieldLooseBase(this,De)[De]();if(this.isSingleDocument()){this.editor.documentData=i}const c=await babelHelpers.classPrivateFieldLooseBase(this,T)[T].loadMembers(e);if(l){const e=babelHelpers.classPrivateFieldLooseBase(this,te)[te](c,a.MemberRole.assignee);babelHelpers.classPrivateFieldLooseBase(this,H)[H].loadRepresentative(l,e)}const u=babelHelpers.classPrivateFieldLooseBase(this,ee)[ee](c);const{signers:p=[],assignees:b=[]}=u;babelHelpers.classPrivateFieldLooseBase(this,H)[H].setEntityId(o);if(r){var h;babelHelpers.classPrivateFieldLooseBase(this,D)[D].setLastSavedHcmLinkCompanyId(d);babelHelpers.classPrivateFieldLooseBase(this,H)[H].loadCompany(r,(h=n!=null?n:b[0])!=null?h:null)}if(p.length>0){babelHelpers.classPrivateFieldLooseBase(this,I)[I].load(p)}babelHelpers.classPrivateFieldLooseBase(this,H)[H].loadValidator(c);return true}async applyTemplateData(e){super.applyTemplateData(e);this.documentSetup.setupData.templateUid=e;this.documentSend.setExistingTemplate();return true}getStepsMetadata(e,t,s){babelHelpers.classPrivateFieldLooseBase(this,fe)[fe](t);const i={setup:babelHelpers.classPrivateFieldLooseBase(this,se)[se](e,t),company:babelHelpers.classPrivateFieldLooseBase(this,ie)[ie](e)};if(babelHelpers.classPrivateFieldLooseBase(this,de)[de]()){i.regionalSettings=babelHelpers.classPrivateFieldLooseBase(this,ae)[ae](e,t)}if(this.isDocumentMode()){i.employees=babelHelpers.classPrivateFieldLooseBase(this,oe)[oe](e)}i.send=babelHelpers.classPrivateFieldLooseBase(this,ne)[ne](e);babelHelpers.classPrivateFieldLooseBase(this,be)[be](i,t);return i}async init(e,s){await super.init(e,s);babelHelpers.classPrivateFieldLooseBase(this,j)[j]();if(this.isEditMode()&&!t.Type.isNull(this.getAfterPreviewLayout())){BX.hide(this.getAfterPreviewLayout())}if(this.isEditMode()){this.documentSetup.setDocumentTitle(this.documentSetup.setupData.title);this.documentSetup.enableDocumentInputs()}}onComplete(e=true){if(this.isTemplateMode()){return}super.onComplete(e)}isTemplateCreateMode(){return b.isTemplateMode(this.documentMode)&&!this.isEditMode()}getAfterPreviewLayout(){if(!this.isDocumentMode()||!i.FeatureStorage.isMultiDocumentLoadingEnabled()){return null}return babelHelpers.classPrivateFieldLooseBase(this,E)[E].remember("beforePreviewLayout",(()=>t.Tag.render(S||(S=y`
			<button class="ui-btn ui-btn-light-border ui-btn-md" style="margin-top: 20px;" onclick="${0}">
				${0}
			</button>
		`),(()=>babelHelpers.classPrivateFieldLooseBase(this,Ie)[Ie]()),t.Loc.getMessage("SIGN_SETTINGS_B2E_BEFORE_PREVIEW"))))}}function Ue(e){const{config:t,documentMode:s,fromRobot:i,fromTemplateFolder:a,b2eDocumentLimitCount:o,templateFolderId:l,isOpenedAsFolder:r,initiatedByType:n}=e;const{blankSelectorConfig:d,documentSendConfig:c}=t;d.documentMode=s;d.isOpenedFromRobot=i;d.b2eDocumentLimitCount=o;d.isOpenedFromTemplateFolder=a;d.templateFolderId=l;d.isOpenedAsFolder=r;d.initiatedByType=n;c.documentMode=s;c.isOpenedFromRobot=i;c.templateFolderId=l;return t}async function Re(e){if(this.documentsGroup.has(e)===false){return}if(!this.documentSetup.editMode){babelHelpers.classPrivateFieldLooseBase(this,De)[De]();babelHelpers.classPrivateFieldLooseBase(this,He)[He]();return}if(this.editedDocument&&this.isGroupDocuments()){babelHelpers.classPrivateFieldLooseBase(this,j)[j]()}this.editedDocument=this.documentsGroup.get(e);this.documentSetup.setAvailabilityDocumentSection(true);babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]();this.documentSetup.setDocumentTitle(this.editedDocument.title);if(this.isGroupDocuments()===false){return}await this.renderPages(this.editedDocument,true,false);babelHelpers.classPrivateFieldLooseBase(this,M)[M].setItemSelected(e)}function xe(){babelHelpers.classPrivateFieldLooseBase(this,M)[M]=new v.SignDropdown({tabs:[{id:"sign-preview-document-dropdown",title:" "}],entities:[],className:"sign-preview-document-dropdown",withCaption:true,isEnableSearch:false,width:444});babelHelpers.classPrivateFieldLooseBase(this,x)[x]();babelHelpers.classPrivateFieldLooseBase(this,M)[M].subscribe("onSelect",(e=>{var t,s;const i=(t=e.data)==null?void 0:(s=t.item)==null?void 0:s.id;if(i===null){return}if(this.documentsGroup.has(i)===false){return}const a=this.documentsGroup.get(i);this.documentSetup.resetEditMode();babelHelpers.classPrivateFieldLooseBase(this,He)[He]();this.documentSetup.setDocumentTitle(a.title);this.renderPages(a,true,false)}))}function Ve(){var e,t;const s=(e=this.documentSetup)==null?void 0:(t=e.setupData)==null?void 0:t.uid;if(s===null){return}babelHelpers.classPrivateFieldLooseBase(this,M)[M].removeItems();this.documentsGroupUids.forEach((e=>{if(this.documentsGroup.has(e)===false){return}const t=this.documentsGroup.get(e);babelHelpers.classPrivateFieldLooseBase(this,M)[M].addItem({id:t.uid,title:t.title,entityId:"b2e-document-detail",tabs:"sign-preview-document-dropdown",deselectable:false})}));babelHelpers.classPrivateFieldLooseBase(this,M)[M].setItemSelected(s)}async function Xe(e){if((this.documentSetup.blankIsNotSelected||e.blankId===this.editedDocument.blankId)&&!this.documentSetup.isFileAdded){this.documentSetup.resetEditMode();await babelHelpers.classPrivateFieldLooseBase(this,R)[R](this.editedDocument.uid);if(this.isGroupDocuments()){await babelHelpers.classPrivateFieldLooseBase(this,j)[j]()}return}this.deleteFromDocumentsGroupUids(e.uid);this.replaceInDocumentsGroupUids(this.editedDocument.uid,e.uid);this.documentSetup.replaceDocumentBlock(this.editedDocument,e);await babelHelpers.classPrivateFieldLooseBase(this,V)[V](this.editedDocument);await babelHelpers.classPrivateFieldLooseBase(this,U)[U](e);this.editor.setUrls([])}function ze(e){const t=this.documentSetup.layout.querySelector(`[data-id="document-id-${e}"]`);t==null?void 0:t.remove()}async function $e(e){if(!this.groupId){const{groupId:e}=await babelHelpers.classPrivateFieldLooseBase(this,T)[T].createDocumentsGroup();this.groupId=e}try{const t=this.documentsGroup.get(e.uid);if(t&&!t.groupId){await babelHelpers.classPrivateFieldLooseBase(this,T)[T].attachGroupToDocument(e.uid,this.groupId);t.groupId=this.groupId}}catch(e){console.error(e)}}async function We(e){const t=await this.documentSetup.updateDocumentData(this.editedDocument);this.documentSetup.updateDocumentBlock(this.editedDocument.id);if(e){this.documentsGroup.set(this.editedDocument.uid,t);this.addInDocumentsGroupUids(this.editedDocument.uid);this.documentSend.setDocumentsBlock(this.documentsGroup);babelHelpers.classPrivateFieldLooseBase(this,D)[D].documentsGroup=this.documentsGroup}}function Ye(){if(this.isGroupDocuments()){babelHelpers.classPrivateFieldLooseBase(this,M)[M].show();return}babelHelpers.classPrivateFieldLooseBase(this,M)[M].hide()}async function Ze(e){const{id:t,uid:s,blankId:i,deleteButton:a}=e;this.documentSetup.ready=false;if(this.documentsGroup.has(s)===false){return}try{var o;await babelHelpers.classPrivateFieldLooseBase(this,T)[T].removeDocument(s);this.documentSetup.ready=true;if(this.isFirstDocumentSelected(s)){this.resetPreview();this.hasPreviewUrls=false}babelHelpers.classPrivateFieldLooseBase(this,K)[K](t);this.documentSend.deleteDocument(s);this.documentsGroup.delete(s);this.deleteFromDocumentsGroupUids(s);this.documentSetup.blankSelector.enableSelectedBlank(i);this.documentSetup.deleteDocumentFromList(i);(o=this.documentSetup.documentCounters)==null?void 0:o.update(this.documentsGroup.size);this.documentSetup.resetEditMode();if(this.documentsGroup.size===0){this.wizard.toggleBtnActiveState("next",true)}else{this.documentSetup.setupData=this.getFirstDocumentDataFromGroup()}if(this.documentsGroup.size===0){return}const e=[...this.documentsGroup.values()].pop();await this.renderPages(e,false,false);if(this.isGroupDocuments()){babelHelpers.classPrivateFieldLooseBase(this,j)[j]()}babelHelpers.classPrivateFieldLooseBase(this,x)[x]();babelHelpers.classPrivateFieldLooseBase(this,He)[He]()}catch{this.documentSetup.toggleDeleteBtnLoadingState(a);this.documentSetup.ready=true}}async function qe(){const{representative:e}=babelHelpers.classPrivateFieldLooseBase(this,H)[H].getParties();const{members:s,signerParty:i}=babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]();const a=[...this.documentsGroup.keys()];for(const t of a){await babelHelpers.classPrivateFieldLooseBase(this,T)[T].setupB2eParties(t,e.entityId,s)}const o=babelHelpers.classPrivateFieldLooseBase(this,Y)[Y];const l=await babelHelpers.classPrivateFieldLooseBase(this,T)[T].loadMembers(o);if(!t.Type.isArrayFilled(l)){throw new Error("Members are empty")}const r=a.map((e=>babelHelpers.classPrivateFieldLooseBase(this,$)[$](e,i)));await Promise.all(r);return l.map((e=>{var t,s,i;return{presetId:e==null?void 0:e.presetId,part:e==null?void 0:e.party,uid:e==null?void 0:e.uid,entityTypeId:(t=e==null?void 0:e.entityTypeId)!=null?t:null,entityId:(s=e==null?void 0:e.entityId)!=null?s:null,role:(i=e==null?void 0:e.role)!=null?i:null}}))}function Je(){const e=this.documentSetup.setupData.initiatedByType===a.DocumentInitiated.company;return b.isTemplateMode(this.documentMode)&&e}async function Qe(e,t){let s=false;while(!s){const i=await babelHelpers.classPrivateFieldLooseBase(this,T)[T].syncB2eMembersWithDepartments(e,t);s=i.syncFinished;await babelHelpers.classPrivateFieldLooseBase(this,W)[W](1e3)}}function et(e){return new Promise((t=>{setTimeout(t,e)}))}function tt(){return this.documentSetup.setupData.uid}function st(){return this.documentSetup.setupData.initiatedByType===a.DocumentInitiated.employee}function it(e,t){const{representative:s}=babelHelpers.classPrivateFieldLooseBase(this,H)[H].getParties();let i=a.EntityType.COMPANY;if(s.entityType!==a.EntityType.USER){i=s.entityType}return{entityType:i,entityId:t,party:e,role:a.MemberRole.assignee}}function at(e,t){return{entityType:t.entityType,entityId:t.entityId,party:e,role:a.MemberRole.signer}}function ot(){const{company:e,validation:t}=babelHelpers.classPrivateFieldLooseBase(this,H)[H].getParties();const s=babelHelpers.classPrivateFieldLooseBase(this,I)[I].getEntities();let i=babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]?2:1;const a=t.map((e=>{const t={...e,party:i};i++;return t}));a.push(babelHelpers.classPrivateFieldLooseBase(this,q)[q](i,e.entityId));let o=i;if(this.isDocumentMode()){o=babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]?1:i+1;const e=s.map((e=>babelHelpers.classPrivateFieldLooseBase(this,J)[J](o,e)));a.push(...e)}return{members:a,signerParty:o}}function lt(e){return e.reduce(((e,t)=>{var s;const{entityType:i,entityId:o}=t;if(i!==a.EntityType.USER&&i!==a.EntityType.STRUCTURE_NODE_ROLE){return e}const l=`${t.role}s`;return{...e,[l]:[...(s=e[l])!=null?s:[],o]}}),{})}function rt(e,t){const s=e.find((e=>e.role===t));return(s==null?void 0:s.entityType)===a.EntityType.STRUCTURE_NODE_ROLE?a.EntityType.STRUCTURE_NODE_ROLE:a.EntityType.USER}function nt(e,s){return{get content(){const s=e.documentSetup.layout;p.SignSettingsItemCounter.numerate(s);if(!t.Type.isNull(e.getAfterPreviewLayout())){BX.show(e.getAfterPreviewLayout())}return s},title:t.Loc.getMessage("SIGN_SETTINGS_B2B_LOAD_DOCUMENT"),beforeCompletion:async()=>{const e=this.documentSetup.blankSelector.selectedBlankId!==0;if(e||this.documentSetup.isFileAdded){const e=this.documentSetup.validate();if(!e){return false}}const s=await this.setupDocument();if(!s){return false}await babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe](s).then((()=>{if(this.isGroupDocuments()){babelHelpers.classPrivateFieldLooseBase(this,j)[j]()}babelHelpers.classPrivateFieldLooseBase(this,x)[x]()})).catch((()=>{}));if(this.editedDocument){let e=s.uid;if((this.documentSetup.blankIsNotSelected||s.blankId===this.editedDocument.blankId)&&!this.documentSetup.isFileAdded){e=this.editedDocument.uid}await babelHelpers.classPrivateFieldLooseBase(this,N)[N](s).then((()=>{babelHelpers.classPrivateFieldLooseBase(this,M)[M].selectItem(e)})).catch((()=>{}))}babelHelpers.classPrivateFieldLooseBase(this,He)[He]();babelHelpers.classPrivateFieldLooseBase(this,Le)[Le]();babelHelpers.classPrivateFieldLooseBase(this,De)[De]();if(!t.Type.isNull(this.getAfterPreviewLayout())){BX.hide(this.getAfterPreviewLayout())}return true}}}function dt(e){const s=this.isTemplateMode()?"SIGN_SETTINGS_B2E_ROUTES":"SIGN_SETTINGS_B2E_COMPANY";return{get content(){const t=babelHelpers.classPrivateFieldLooseBase(e,H)[H].getLayout();const s=babelHelpers.classPrivateFieldLooseBase(e,z)[z]();if(e.isTemplateMode()){babelHelpers.classPrivateFieldLooseBase(e,H)[H].setEditorAvailability(s)}p.SignSettingsItemCounter.numerate(t);if(!e.isEditMode()){if(!babelHelpers.classPrivateFieldLooseBase(e,H)[H].isRepresentativeSelected()){babelHelpers.classPrivateFieldLooseBase(e,H)[H].loadFirstRepresentative()}if(!babelHelpers.classPrivateFieldLooseBase(e,H)[H].isProviderSelected()){babelHelpers.classPrivateFieldLooseBase(e,H)[H].loadFirstCompany()}}return t},title:t.Loc.getMessage(s),beforeCompletion:async()=>{const{initiatedByType:e}=this.documentSetup.setupData;try{for(const[e]of this.documentsGroup){await babelHelpers.classPrivateFieldLooseBase(this,H)[H].save(e)}babelHelpers.classPrivateFieldLooseBase(this,D)[D].companyId=babelHelpers.classPrivateFieldLooseBase(this,H)[H].getSelectedCompanyId();babelHelpers.classPrivateFieldLooseBase(this,D)[D].documentsGroup=this.documentsGroup;this.editor.setSenderType(e);babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]();if(this.isTemplateMode()){babelHelpers.classPrivateFieldLooseBase(this,le)[le]();babelHelpers.classPrivateFieldLooseBase(this,D)[D].isIntegrationVisible=!babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]();if(!babelHelpers.classPrivateFieldLooseBase(this,de)[de]()){await babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne]()}}}catch(e){console.warn(e);return false}return true}}}function ct(e,s){return{get content(){return babelHelpers.classPrivateFieldLooseBase(e,D)[D].getLayout()},title:t.Loc.getMessage("SIGN_SETTINGS_B2E_REGIONAL_SETTINGS_SHORT"),beforeCompletion:async()=>{try{await babelHelpers.classPrivateFieldLooseBase(this,D)[D].save()}catch{return false}this.documentSetup.setupData.hcmLinkCompanyId=babelHelpers.classPrivateFieldLooseBase(this,D)[D].getSelectedHcmLinkCompanyId();this.documentSend.hcmLinkEnabled=this.documentSetup.setupData.hcmLinkCompanyId>0;await babelHelpers.classPrivateFieldLooseBase(this,ue)[ue]();if(this.isTemplateMode()){await babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne]()}return true}}}function ut(e){return{get content(){const t=babelHelpers.classPrivateFieldLooseBase(e,I)[I].getLayout();p.SignSettingsItemCounter.numerate(t);return t},title:t.Loc.getMessage("SIGN_SETTINGS_B2E_EMPLOYEES"),beforeCompletion:async()=>{try{const e=babelHelpers.classPrivateFieldLooseBase(this,I)[I].validate();if(!e){return e}this.editor.entityData=await babelHelpers.classPrivateFieldLooseBase(this,X)[X]();const{uid:t,isTemplate:s,entityId:i}=this.documentSetup.setupData;const a=await this.documentSetup.loadBlocks(t);babelHelpers.classPrivateFieldLooseBase(this,le)[le]();const o={isTemplate:s,uid:t,blocks:a,entityId:i};await babelHelpers.classPrivateFieldLooseBase(this,re)[re](o);return true}catch(e){console.error(e);return false}}}}async function pt(){const e=babelHelpers.classPrivateFieldLooseBase(this,H)[H].getParties();Object.assign(e,{employees:babelHelpers.classPrivateFieldLooseBase(this,I)[I].getEntities().map((e=>({entityType:e.entityType,entityId:e.entityId})))});this.documentSend.documentData=this.documentsGroup;this.documentSend.resetUserPartyPopup();this.documentSend.setPartiesData(e)}async function bt(e){if(this.isTemplateCreateMode()){this.editor.setAnalytics(this.getAnalytics())}this.wizard.toggleBtnLoadingState("next",false);if(this.isSingleDocument()){this.editor.documentData=e;await this.editor.renderDocument();if(!babelHelpers.classPrivateFieldLooseBase(this,O)[O]||this.isTemplateMode()){await this.editor.show()}}}function ht(e){const s=this.isTemplateMode()?"SIGN_SETTINGS_SEND_DOCUMENT_CREATE":"SIGN_SETTINGS_SEND_DOCUMENT";return{get content(){const t=e.documentSend.getLayout();p.SignSettingsItemCounter.numerate(t);if(!e.documentSend.isDateTimeLimitSelectorValid()){e.wizard.toggleBtnActiveState("complete",true)}return t},title:t.Loc.getMessage(s),beforeCompletion:async()=>this.documentSend.sendForSign()}}function mt(){return this.documentSetup.isRuRegion()}function vt(){const e=babelHelpers.classPrivateFieldLooseBase(this,H)[H].getSelectedProvider();const t=e.code!==a.ProviderCode.sesRu;const s=t||b.isTemplateMode(this.documentMode)&&babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]();this.editor.setSectionVisibilityByType(u.SectionType.SecondParty,s)}async function yt(){const e=this.documentSetup.setupData.initiatedByType===a.DocumentInitiated.company;if(babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]()&&this.documentSetup.isRuRegion()){await babelHelpers.classPrivateFieldLooseBase(this,T)[T].changeIntegrationId(this.documentSetup.setupData.uid,null)}const t=this.documentSetup.setupData.hcmLinkCompanyId>0&&e;this.editor.setSectionVisibilityByType(u.SectionType.HcmLinkIntegration,t)}function Pt(){return this.documentSetup.setupData.initiatedByType===a.DocumentInitiated.employee}function St(e,s){const i=this.getAnalytics();if(t.Type.isPlainObject(e.setup)){e.setup.beforeCompletion=b.decorateResultBeforeCompletion(e.setup.beforeCompletion,(()=>babelHelpers.classPrivateFieldLooseBase(this,he)[he](i,s)),(()=>babelHelpers.classPrivateFieldLooseBase(this,me)[me](i)))}if(t.Type.isPlainObject(e.company)){e.company.beforeCompletion=b.decorateResultBeforeCompletion(e.company.beforeCompletion,(()=>babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](i)),(()=>babelHelpers.classPrivateFieldLooseBase(this,ye)[ye](i)))}if(t.Type.isPlainObject(e.send)){e.send.beforeCompletion=b.decorateResultBeforeCompletion(e.send.beforeCompletion,(()=>babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe](i,this.documentSetup.setupData.uid)),(()=>babelHelpers.classPrivateFieldLooseBase(this,Se)[Se](i,this.documentSetup.setupData.uid)))}}function ft(e,t){if(this.isTemplateCreateMode()){e.send({event:"proceed_step_document",c_element:"create_button",status:"success"});e.send({event:"turn_on_off_template",type:"auto",c_element:"off",p5:`templateId_${this.documentSetup.setupData.templateId}`})}}function Lt(e){if(this.isTemplateCreateMode()){e.send({event:"proceed_step_document",status:"error",c_element:"create_button"})}}function Ft(e){if(this.isTemplateCreateMode()){e.send({event:"proceed_step_route",status:"success",c_element:"create_button"})}}function Bt(e){if(this.isTemplateCreateMode()){e.send({event:"proceed_step_route",status:"error",c_element:"create_button"})}}async function gt(e,t){if(this.isDocumentMode()){e.sendWithProviderTypeAndDocId({event:"sent_document_to_sign",c_element:"create_button",status:"success"},t)}}async function Ht(e,t){if(this.isTemplateCreateMode()){this.getAnalytics().send({event:"click_save_template",status:"error",c_element:"create_button"})}if(this.isDocumentMode()){e.sendWithProviderTypeAndDocId({event:"sent_document_to_sign",c_element:"create_button",status:"error"},t)}}function Dt(e){const s=this.getAnalytics();if(this.isTemplateCreateMode()){s.send({event:"open_wizard",c_element:"create_button"})}else if(this.isDocumentMode()){const i={event:"click_create_document",c_element:"create_button"};if(this.isEditMode()&&t.Type.isStringFilled(e)){s.sendWithDocId(i,e)}else{s.send(i)}}}async function It(){const e=this.getDocumentSetupData();babelHelpers.classPrivateFieldLooseBase(this,H)[H].setInitiatedByType(e.initiatedByType);babelHelpers.classPrivateFieldLooseBase(this,H)[H].setEntityId(e.entityId);if(this.isTemplateMode()){babelHelpers.classPrivateFieldLooseBase(this,H)[H].reloadCompanyProviders()}this.editedDocument=null;if(this.hasPreviewUrls){this.wizard.toggleBtnActiveState("next",false)}}async function Tt(e){if(this.documentSetup.blankIsNotSelected){return}if(this.documentsGroup.has(e.uid)){return}if(this.isTemplateMode()||!i.FeatureStorage.isGroupSendingEnabled()){this.setSingleDocument(e);return}this.documentsGroup.set(e.uid,e);this.addInDocumentsGroupUids(e.uid);this.documentSetup.blankSelector.disableSelectedBlank(e.blankId);if(!e.groupId&&!this.editedDocument){await babelHelpers.classPrivateFieldLooseBase(this,U)[U](e)}if(!this.isTemplateMode()){this.documentSetup.documentCounters.update(this.documentsGroup.size)}if(!this.editedDocument){this.documentSetup.renderDocumentBlock(e)}}function _t(){window.scrollTo({top:0,behavior:"smooth"})}function Et(){window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})}function wt(){if(this.isTemplateMode()||!i.FeatureStorage.isGroupSendingEnabled()){return}this.documentSetup.resetDocument();this.editedDocument=null}function Gt(){if(this.documentsGroup.size>=babelHelpers.classPrivateFieldLooseBase(this,_)[_]){this.documentSetup.setAvailabilityDocumentSection(false)}}function Ot(){const e=this;BX.SidePanel.Instance.open("sign-settings:afterPreviewSidePanel",{cacheable:false,width:750,contentCallback:()=>{babelHelpers.classPrivateFieldLooseBase(e,Ee)[Ee]();return h.Layout.createContent({extensions:["ui.forms"],title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0430\u043f\u043a\u0443 \u0441 \u0444\u0430\u0439\u043b\u0430\u043c\u0438",content(){babelHelpers.classPrivateFieldLooseBase(e,_e)[_e]();return babelHelpers.classPrivateFieldLooseBase(e,Te)[Te]()},buttons({cancelButton:t,SaveButton:s}){babelHelpers.classPrivateFieldLooseBase(e,w)[w]=new s({onclick:()=>babelHelpers.classPrivateFieldLooseBase(e,Ce)[Ce]()});return[babelHelpers.classPrivateFieldLooseBase(e,w)[w]]}})},events:{onClose:e=>{if(babelHelpers.classPrivateFieldLooseBase(this,G)[G]){e.denyAction()}babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee]()}}})}function Mt(){return babelHelpers.classPrivateFieldLooseBase(this,E)[E].remember("multiDocumentAddSidePanelContent",(()=>t.Tag.render(f||(f=y`
			<div id="multiple-document-add-container" style="display: flex; flex-direction: column;">
				<div style="flex-direction: row;">
					${0}
					${0}
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge]().root,babelHelpers.classPrivateFieldLooseBase(this,we)[we]())))}function Ct(){return babelHelpers.classPrivateFieldLooseBase(this,E)[E].remember("uploader",(()=>new m.Uploader({id:"sign-settings-uploader",controller:"sign.upload.blankUploadController",acceptedFileTypes:[...g.values()].map((e=>`.${e}`)),multiple:true,autoUpload:false,maxFileSize:52428800,imageMaxFileSize:10485760,maxTotalFileSize:52428800,events:{[m.UploaderEvent.BEFORE_FILES_ADD]:e=>babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae](e),[m.UploaderEvent.FILE_ADD]:e=>babelHelpers.classPrivateFieldLooseBase(this,Me)[Me](e.getData().file),[m.UploaderEvent.UPLOAD_COMPLETE]:e=>babelHelpers.classPrivateFieldLooseBase(this,ke)[ke](e)}})))}function kt(){babelHelpers.classPrivateFieldLooseBase(this,E)[E].delete("uploader");babelHelpers.classPrivateFieldLooseBase(this,E)[E].delete("uploadButton");babelHelpers.classPrivateFieldLooseBase(this,E)[E].delete("uploadFromDirButton");babelHelpers.classPrivateFieldLooseBase(this,E)[E].delete("multiDocumentAddSidePanelContent")}function At(){return babelHelpers.classPrivateFieldLooseBase(this,E)[E].remember("uploadButton",(()=>{const e=t.Tag.render(L||(L=y`
				<div>
					<button class="ui-btn ui-btn-light-border" style="margin-top: 15px;" onclick="${0}">${0}</button>
					<input ref="fileInput" hidden type="file" multiple ref="fileInput" onchange="${0}"
						accept="${0}"
					>
				</div>
			`),(()=>e.fileInput.click()),t.Loc.getMessage("SIGN_V2_B2E_SIGN_SETTINGS_ADD_FILE"),(e=>{babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe](e);e.target.value=""}),[...g.values()].map((e=>`.${e}`)).join(", "));return e.root}))}function jt(){return babelHelpers.classPrivateFieldLooseBase(this,E)[E].remember("uploadFromDirButton",(()=>{const e=t.Tag.render(F||(F=y`
				<div>
					<button class="ui-btn ui-btn-primary" style="margin-top: 15px;" onclick="${0}">${0}</button>
					<input hidden type="file" webkitdirectory multiple ref="fileInput" onchange="${0}">
				</div>
			`),(()=>e.fileInput.click()),t.Loc.getMessage("SIGN_V2_B2E_SIGN_SETTINGS_LOAD_FROM_DIRS"),(e=>{babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe](e);e.target.value=""}));return e}))}function Nt(e){const t=e.target;const s=t.files;const i=[...s].filter((e=>g.has(e.name.split(".").at(-1))));babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]().addFiles(i)}function Kt(e){t.Dom.insertAfter(t.Tag.render(B||(B=y`<p style="color: #666">${0}</p>`),t.Loc.getMessage("SIGN_V2_B2E_SIGN_SETTINGS_LOADED_FILE_NAME",{"#FILENAME#":t.Text.encode(e.getName())})),babelHelpers.classPrivateFieldLooseBase(this,we)[we]())}function Ut(){if(babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]().getFiles().length===0){alert(t.Loc.getMessage("SIGN_V2_B2E_SIGN_SETTINGS_NO_FILES_SELECTED"));return}t.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,Te)[Te](),{opacity:.6,"pointer-events":"none"});babelHelpers.classPrivateFieldLooseBase(this,G)[G]=true;babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]().start();babelHelpers.classPrivateFieldLooseBase(this,w)[w].setClocking(true)}async function Rt(e){const s=babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]();for(const e of s.getFiles()){try{const t=await this.documentSetup.blankSelector.createBlankFromOuterUploaderFiles([e]);this.documentSetup.blankSelector.selectBlank(t);await this.setDocumentsGroup()}catch(t){console.error(`Error while add file with name ${e.getName()}`,t)}}t.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,Te)[Te](),{opacity:1,"pointer-events":"auto"});babelHelpers.classPrivateFieldLooseBase(this,G)[G]=false;babelHelpers.classPrivateFieldLooseBase(this,w)[w].setClocking(false);BX.SidePanel.Instance.close()}function xt(e){const s={maxFileSize:52428800,imageMaxFileSize:10485760,maxTotalFileSize:52428800};const i=e.getData();const a=i.files;const o=babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]();const l=[...a,...o.getFiles()];if(l.length+this.documentsGroup.size>babelHelpers.classPrivateFieldLooseBase(this,_)[_]){alert(t.Loc.getMessage("SIGN_V2_B2E_SIGN_SETTINGS_MAX_DOCUMENTS_COUNT_EXCEEDED_NOTICE"));e.preventDefault();return}for(const i of a){if(i.getSize()>s.maxFileSize){alert(t.Loc.getMessage("SIGN_V2_B2E_SIGN_SETTINGS_INVALID_FILE_SIZE"));e.preventDefault();return}if(i.isImage()&&i.getSize()>s.imageMaxFileSize){alert(t.Loc.getMessage("SIGN_V2_B2E_SIGN_SETTINGS_INVALID_IMAGE_FILE_SIZE"));e.preventDefault();return}}const r=l.reduce(((e,t)=>e+t.getSize()),0);if(r>s.maxTotalFileSize){alert(t.Loc.getMessage("SIGN_V2_B2E_SIGN_SETTINGS_MAX_TOTAL_FILE_SIZE_EXCEEDED"));e.preventDefault()}}function Vt(e){return e&&e!==a.ProviderCode.sesRu}async function Xt(){const{uid:e}=this.documentSetup.setupData;const t=!this.documentSetup.isRuRegion()||babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]();this.editor.setIsB2eDocumentSectionDisabled(t);this.editor.entityData=await babelHelpers.classPrivateFieldLooseBase(this,X)[X]();const{isTemplate:s,entityId:i}=this.documentSetup.setupData;const a=await this.documentSetup.loadBlocks(e);const o={isTemplate:s,uid:e,blocks:a,entityId:i};babelHelpers.classPrivateFieldLooseBase(this,re)[re](o)}e.B2ESignSettings=Ke})(this.BX.Sign.V2.B2e=this.BX.Sign.V2.B2e||{},BX,BX.Cache,BX.Sign,BX.Sign,BX.Sign.V2,BX.Sign.V2.B2e,BX.Sign.V2.B2e,BX.Sign.V2.B2e,BX.Sign.V2.B2e,BX.Sign.V2.B2e,BX.Sign.V2,BX.Sign.V2,BX.Sign.V2,BX.UI.SidePanel,BX.UI.Uploader,BX.Sign.V2.B2e);
//# sourceMappingURL=sign-settings.bundle.map.js