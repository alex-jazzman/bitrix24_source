{"version":3,"file":"document-send.bundle.js","sources":["../src/item.js","../src/index.js"],"sourcesContent":["import { Tag, Type, Dom, Loc, Text as TextFormat } from 'main.core';\nimport { Loader } from 'main.loader';\nimport type { MemberRoleType } from 'sign.type';\nimport { Dialog } from 'ui.entity-selector';\nimport { Api } from 'sign.v2.api';\n\nexport type ItemData = {\n\tentityType: string,\n\tentityId: number,\n\trole?: MemberRoleType,\n};\n\ntype ItemViewData = {\n\theader: string,\n\tfooter: string,\n\tavatar: ?string,\n};\n\nexport const EntityTypes = Object.freeze({\n\tUser: 'user',\n\tCompany: 'company',\n\tRole: 'structure-node-role',\n});\n\nexport class Item\n{\n\t#api: Api;\n\t#ui = {\n\t\tcontainer: HTMLDivElement = null,\n\t\tavatar: HTMLDivElement = null,\n\t\ttitle: {\n\t\t\tcontainer: HTMLDivElement = null,\n\t\t\theader: HTMLDivElement = null,\n\t\t\tfooter: HTMLDivElement = null,\n\t\t},\n\t};\n\n\t#dataDialog: ?Dialog = null;\n\t#loader: ?Loader = null;\n\n\t#data: ?ItemData = null;\n\t#viewData: ?ItemViewData = null;\n\n\tconstructor(data: ItemData)\n\t{\n\t\tthis.#api = new Api();\n\t\tthis.#data = data;\n\t\tthis.#ui.container = this.getLayout();\n\t\tif (Type.isStringFilled(data?.entityType) && Type.isInteger(data?.entityId))\n\t\t{\n\t\t\tthis.#load();\n\t\t}\n\t}\n\n\tsetItemData(data: ItemData): void\n\t{\n\t\tif (this.#data.entityId === data.entityId && this.#data.entityType === data.entityType)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#data = data;\n\t\tif (Type.isStringFilled(data?.entityType) && Type.isInteger(data?.entityId))\n\t\t{\n\t\t\tthis.#load();\n\t\t}\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\tif (this.#ui.container)\n\t\t{\n\t\t\treturn this.#ui.container;\n\t\t}\n\n\t\tconst modifier = this.#data.entityType === EntityTypes.User ? ' --user' : '';\n\t\tthis.#ui.avatar = Tag.render`<div class=\"sign-b2e-send__party_item-info-avatar${modifier}\"></div>`;\n\t\tthis.#ui.title.header = Tag.render`<div class=\"sign-b2e-send__party_item-info-header\"></div>`;\n\t\tthis.#ui.title.footer = Tag.render`<div class=\"sign-b2e-send__party_item-info-footer\"></div>`;\n\t\tthis.#ui.title.container = Tag.render`\n\t\t\t<div class=\"sign-b2e-send__party_item-info-title\">\n\t\t\t\t${this.#ui.title.header}\n\t\t\t\t${this.#ui.title.footer}\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#ui.container = Tag.render`\n\t\t\t<div class=\"sign-b2e-send__party_item-info\">\n\t\t\t\t${this.#ui.avatar}\n\t\t\t\t${this.#ui.title.container}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#ui.container;\n\t}\n\n\tasync #load(): Promise<void>\n\t{\n\t\tthis.#showLoader();\n\t\tswitch (this.#data.entityType)\n\t\t{\n\t\t\tcase EntityTypes.Company:\n\t\t\t{\n\t\t\t\tawait this.#loadCompany();\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase EntityTypes.User:\n\t\t\t{\n\t\t\t\tawait this.#loadUser();\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase EntityTypes.Role:\n\t\t\t{\n\t\t\t\tawait this.#loadRole();\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tthis.#refreshView();\n\t\tthis.#hideLoader();\n\t}\n\n\t#loadCompany(): Promise<void>\n\t{\n\t\treturn this.#api.loadB2eCompanyList()\n\t\t\t.then(data => {\n\t\t\t\tif (Type.isObject(data.companies) && Type.isArray(data.companies))\n\t\t\t\t{\n\t\t\t\t\tconst company = data.companies.filter(company => company.id === this.#data.entityId)[0] ?? null;\n\t\t\t\t\tif (company === null)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst footer = Type.isBoolean(data?.showTaxId) && data?.showTaxId && company?.rqInn\n\t\t\t\t\t\t? Loc.getMessage('SIGN_DOCUMENT_SUMMARY_COMPANY_INN',\n\t\t\t\t\t\t\t{ '%innValue%': TextFormat.encode(company?.rqInn) },\n\t\t\t\t\t\t)\n\t\t\t\t\t\t: null\n\t\t\t\t\t;\n\n\t\t\t\t\tthis.#viewData = {\n\t\t\t\t\t\theader: company?.title,\n\t\t\t\t\t\tfooter: footer,\n\t\t\t\t\t\tavatar: null,\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.#refreshView();\n\t\t\t\t}\n\n\t\t\t\tthis.#hideLoader();\n\t\t\t}).catch((response) => {\n\t\t\t\tconsole.log(response);\n\t\t\t})\n\t\t;\n\t}\n\n\t#loadUser(): Promise<void>\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.#dataDialog = new Dialog({\n\t\t\t\tentities: [\n\t\t\t\t\t{ id: EntityTypes.User },\n\t\t\t\t],\n\t\t\t\tevents: {\n\t\t\t\t\t'onLoad': (event) => {\n\t\t\t\t\t\tconst user = this.#dataDialog.getSelectedItems()[0] ?? null;\n\t\t\t\t\t\tif (Type.isObject(user))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst lastName = user?.customData?.get('lastName') ?? '';\n\t\t\t\t\t\t\tthis.#viewData = {\n\t\t\t\t\t\t\t\theader: user?.customData?.get('name') + ' ' + lastName,\n\t\t\t\t\t\t\t\tfooter: user?.customData?.get('position') ?? '',\n\t\t\t\t\t\t\t\tavatar: user?.avatar ?? null,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tthis.#refreshView();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.#hideLoader();\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tpreselectedItems: [[EntityTypes.User, this.#data.entityId]],\n\t\t\t});\n\n\t\t\tthis.#dataDialog.load();\n\t\t});\n\t}\n\n\t#loadRole(): Promise<void>\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.#dataDialog = new Dialog({\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: EntityTypes.Role,\n\t\t\t\t\t\tdynamicLoad: true,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tevents: {\n\t\t\t\t\t'onLoad': (event) => {\n\t\t\t\t\t\tconst data = this.#dataDialog.getSelectedItems()[0] ?? null;\n\t\t\t\t\t\tif (Type.isObject(data))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.#viewData = {\n\t\t\t\t\t\t\t\theader: data.title ?? '',\n\t\t\t\t\t\t\t\tfooter: '',\n\t\t\t\t\t\t\t\tavatar: data?.avatar ?? null,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tthis.#refreshView();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.#hideLoader();\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tpreselectedItems: [[EntityTypes.Role, this.#data.entityId]],\n\t\t\t});\n\n\t\t\tthis.#dataDialog.load();\n\t\t});\n\t}\n\n\t#refreshView(): void\n\t{\n\t\tif (this.#viewData?.avatar)\n\t\t{\n\t\t\tthis.#ui.avatar.style.backgroundImage = `url(\"${this.#viewData.avatar}\")`;\n\t\t}\n\n\t\tthis.#ui.title.header.innerText = this.#viewData.header;\n\t\tthis.#ui.title.header.title = this.#viewData.header;\n\t\tthis.#ui.title.footer.innerText = this.#viewData.footer;\n\t\tthis.#ui.title.footer.title = this.#viewData.footer;\n\t}\n\n\t#getLoader(): Loader\n\t{\n\t\tif (this.#loader)\n\t\t{\n\t\t\treturn this.#loader;\n\t\t}\n\n\t\tthis.#loader = new BX.Loader({\n\t\t\ttarget: this.#ui.container,\n\t\t\tmode: 'inline',\n\t\t\tsize: 40,\n\t\t});\n\n\t\treturn this.#loader;\n\t}\n\n\t#hideLoader(): void\n\t{\n\t\tthis.#ui.title.container.style.display = 'flex';\n\t\tthis.#ui.avatar.style.display = 'block';\n\t\tthis.#getLoader().hide();\n\t}\n\n\t#showLoader(): void\n\t{\n\t\tthis.#ui.avatar.style.display = 'none';\n\t\tthis.#ui.title.container.style.display = 'none';\n\t\tthis.#getLoader().show(this.#ui.container);\n\t}\n}\n","import { Tag, Loc, Type, Dom } from 'main.core';\nimport { EventEmitter, type BaseEvent } from 'main.core.events';\nimport { Timezone } from 'main.date';\nimport { type DocumentDetails } from 'sign.v2.document-setup';\nimport { isTemplateMode } from 'sign.v2.sign-settings';\nimport { UserParty } from 'sign.v2.b2e.user-party';\nimport { ReminderSelector, type Options as ReminderOptions } from 'sign.v2.b2e.reminder-selector';\nimport type { MemberRoleType, DocumentModeType } from 'sign.type';\nimport { MemberRole, Reminder, ProviderCode } from 'sign.type';\nimport { Item, EntityTypes } from './item';\nimport { Api, type Provider } from 'sign.v2.api';\nimport { DocumentSummary } from 'sign.v2.document-summary';\nimport { LangSelector } from 'sign.v2.lang-selector';\nimport { DatetimeLimitSelector } from 'sign.v2.datetime-limit-selector';\nimport type { PartiesData, DocumentData } from './type';\nimport type { DocumentSendConfig } from 'sign.v2.b2b.document-send';\nimport { Hint } from 'sign.v2.helper';\nimport { ProgressBar } from 'ui.progressbar';\nimport { HcmLinkPartyChecker } from 'sign.v2.b2e.hcm-link-party-checker';\nimport type { Analytics } from 'sign.v2.analytics';\n\nimport 'sign.v2.ui.notice';\nimport './style.css';\n\nexport type CommunicationType = 'idle' | 'phone' | 'email';\n\ntype CommunicationSelectedData = {\n\t[key: string]: {\n\t\tid: string,\n\t\toption: CommunicationType,\n\t}\n};\n\nconst ReminderSelectorOptionsByRole: Record<MemberRoleType, ReminderOptions> = {\n\t[MemberRole.assignee]: { preSelectedType: Reminder.oncePerDay },\n\t[MemberRole.signer]: { preSelectedType: Reminder.twicePerDay },\n};\n\nconst idleCommunication: CommunicationType = 'idle';\n\nexport class DocumentSend extends EventEmitter\n{\n\tevents = Object.freeze({\n\t\tonTemplateComplete: 'onTemplateComplete',\n\t});\n\n\t#ui = {\n\t\tcontainer: HTMLDivElement = null,\n\t\temployeesTitle: HTMLParagraphElement,\n\t};\n\n\t#communicationSelectedOption: CommunicationSelectedData = {\n\t\tcompany: {\n\t\t\tid: 'company',\n\t\t\toption: idleCommunication,\n\t\t},\n\t\temployee: {\n\t\t\tid: 'employee',\n\t\t\toption: idleCommunication,\n\t\t},\n\t\tvalidation: {\n\t\t\tid: 'validation',\n\t\t\toption: idleCommunication,\n\t\t},\n\t};\n\n\t#items = {\n\t\tcompany: Item,\n\t\trepresentative: Item,\n\t\temployees: UserParty,\n\t\treviewers: UserParty,\n\t\teditor: Item,\n\t};\n\n\t#partiesData: ?PartiesData = null;\n\t#documentSummary: DocumentSummary;\n\t#documentData: Map<string, DocumentDetails>;\n\t#langSelector: LangSelector;\n\t#dateTimeLimitSelector: DatetimeLimitSelector | null = null;\n\t#progress: ProgressBar;\n\t#progressOverlay: ?HTMLElement;\n\t#progressContainer: ?HTMLElement;\n\t#itemsToHide: Array<HTMLElement> = [];\n\t#reminderSelectorByRole: Record<MemberRoleType, ReminderSelector> = {};\n\t#documentMode: DocumentModeType;\n\t#isExistingTemplate: boolean = false;\n\t#isOpenedFromRobot: boolean = false;\n\t#templateFolderId: number = 0;\n\n\t#analytics: ?Analytics;\n\n\t#hcmLinkPartyChecker: HcmLinkPartyChecker | null = null;\n\n\t#provider: Provider | null = null;\n\n\tconstructor(documentSendConfig: DocumentSendConfig)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Sign.V2.B2e.DocumentSend');\n\t\tthis.#items.company = new Item({ entityType: EntityTypes.Company });\n\t\tthis.#items.representative = new Item({ entityType: EntityTypes.User });\n\t\tthis.#items.editor = new Item({ entityType: EntityTypes.User });\n\t\tthis.#items.employees = new UserParty({ mode: 'view', role: MemberRole.signer });\n\t\tthis.#items.reviewers = new UserParty({ mode: 'view', role: MemberRole.reviewer });\n\t\tthis.#documentSummary = new DocumentSummary({\n\t\t\tevents: {\n\t\t\t\tchangeTitle: (event: BaseEvent) => {\n\t\t\t\t\tconst data = event.getData();\n\t\t\t\t\tthis.emit('changeTitle', data);\n\t\t\t\t},\n\t\t\t\tshowEditor: (event: BaseEvent) => {\n\t\t\t\t\tconst data = event.getData();\n\t\t\t\t\tthis.emit('showEditor', data);\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tconst { region, languages, documentMode, isOpenedFromRobot, analytics, templateFolderId } = documentSendConfig;\n\t\tthis.#isOpenedFromRobot = isOpenedFromRobot;\n\t\tthis.#langSelector = new LangSelector(region, languages);\n\t\tthis.#documentData = {};\n\t\tthis.#analytics = analytics;\n\t\tthis.#documentMode = documentMode;\n\t\tthis.#templateFolderId = templateFolderId;\n\t\tthis.#ui.employeesTitle = Tag.render`\n\t\t\t<p class=\"sign-b2e-send__party_signing-employees\">\n\t\t\t\t${Loc.getMessage('SIGN_SEND_SIGNING_EMPLOYEES', { '#CNT#': 0 })}\n\t\t\t</p>\n\t\t`;\n\t\tthis.#progress = new ProgressBar({\n\t\t\tmaxValue: 100,\n\t\t\tvalue: 0,\n\t\t\tcolorTrack: '#dfe3e6',\n\t\t});\n\n\t\t[MemberRole.assignee, MemberRole.signer].forEach((role: MemberRoleType) => {\n\t\t\tthis.#getOrCreateReminderSelectorForRole(role);\n\t\t});\n\n\t\tif (!this.#isTemplateMode())\n\t\t{\n\t\t\tthis.#hcmLinkPartyChecker = new HcmLinkPartyChecker({\n\t\t\t\tapi: new Api(),\n\t\t\t});\n\n\t\t\tthis.#hcmLinkPartyChecker.subscribe(\n\t\t\t\t'updateValidation',\n\t\t\t\t(event) => this.#onHcmLinkCheckerUpdateValidation(event),\n\t\t\t);\n\t\t}\n\n\t\tif (!this.#isTemplateMode())\n\t\t{\n\t\t\tthis.#dateTimeLimitSelector = new DatetimeLimitSelector();\n\n\t\t\tthis.#dateTimeLimitSelector\n\t\t\t\t.subscribe('beforeDateModify', () => {\n\t\t\t\t\tthis.emit('disableComplete');\n\t\t\t\t})\n\t\t\t\t.subscribe('afterDateModify', () => {\n\t\t\t\t\tthis.emit('enableComplete');\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t}\n\n\tget documentData(): DocumentData\n\t{\n\t\treturn this.#documentData;\n\t}\n\n\tset hcmLinkEnabled(value: boolean): void\n\t{\n\t\tthis.#hcmLinkPartyChecker?.setEnabled(value);\n\t}\n\n\tset documentData(documentData: Map<string, DocumentDetails>)\n\t{\n\t\tdocumentData.forEach((data) => {\n\t\t\tconst { uid, id, title, blocks, externalId, isTemplate, entityId, urls } = data;\n\t\t\tthis.#documentSummary.addItem(uid, { uid, id, title, blocks, externalId, isTemplate, entityId, urls });\n\t\t});\n\n\t\tthis.#documentData = documentData;\n\n\t\tconst uids = [...documentData.values()].map((data) => data.uid);\n\t\tconst lastUid = [...documentData.values()].pop().uid;\n\t\tconst documentGroupUids = [...documentData.keys()];\n\n\t\tthis.#langSelector.setDocumentUids(uids);\n\n\t\tif (!Type.isNull(this.#dateTimeLimitSelector))\n\t\t{\n\t\t\tthis.#dateTimeLimitSelector.setDocumentUids(uids);\n\n\t\t\tconst untilDate = documentData?.values().next().value?.dateSignUntilUserTime;\n\t\t\tif (untilDate)\n\t\t\t{\n\t\t\t\tthis.#dateTimeLimitSelector.setDate(new Date(untilDate));\n\t\t\t}\n\t\t}\n\n\t\tthis.#items.employees.setDocumentUid(lastUid);\n\t\tthis.#items.reviewers.setDocumentUid(lastUid);\n\n\t\tthis.#hcmLinkPartyChecker?.setDocumentGroupUids(documentGroupUids);\n\t\tvoid this.#hcmLinkPartyChecker?.check();\n\t}\n\n\t#getProgressAnimateLayout(): HTMLElement\n\t{\n\t\tconst createDocumentOverlapLayout = (docsCount: number) => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"sign-b2e-overlay__overlap-docs\">\n\t\t\t\t\t${Array.from({ length: docsCount }).map(() => {\n\t\t\t\t\t\treturn Tag.render`\n\t\t\t\t\t\t\t<div class=\"sign-b2e-overlay__overlap-doc\"></div>\n\t\t\t\t\t\t`;\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t};\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"sign-b2e-overlay__animate-layout\">\n\t\t\t\t${createDocumentOverlapLayout(4)}\n\t\t\t\t${createDocumentOverlapLayout(3)}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\tconst layout = Tag.render`\n\t\t\t<div class=\"sign-b2e-send\">\n\t\t\t\t<h1 class=\"sign-b2e-settings__header\">${Loc.getMessage('SIGN_DOCUMENT_SEND_HEADER_1')}</h1>\n\t\t\t</div>\n\t\t`;\n\n\t\tconst summaryTitle = this.#isTemplateMode()\n\t\t\t? Loc.getMessage('SIGN_DOCUMENT_SUMMARY_TEMPLATE_TITLE')\n\t\t\t: Loc.getMessage('SIGN_DOCUMENT_SUMMARY_TITLE')\n\t\t;\n\n\t\tthis.#itemsToHide = [];\n\t\tconst summaryLayout = Tag.render`\n\t\t\t<div class=\"sign-b2e-settings__item\">\n\t\t\t\t<p class=\"sign-b2e-settings__item_title\">\n\t\t\t\t\t${summaryTitle}\n\t\t\t\t</p>\n\t\t\t\t${this.#documentSummary.getLayout()}\n\t\t\t\t${this.#renderLangAndDateContainer()}\n\t\t\t</div>\n\t\t`;\n\t\tthis.#itemsToHide.push(summaryLayout);\n\n\t\tlet usersLayout = null;\n\t\tif (!this.#isTemplateMode())\n\t\t{\n\t\t\tusersLayout = Tag.render`\n\t\t\t\t<div class=\"sign-b2e-settings__item\">\n\t\t\t\t\t<p class=\"sign-b2e-settings__item_title\">\n\t\t\t\t\t\t${Loc.getMessage('SIGN_DOCUMENT_SEND_SECOND_PARTY')}\n\t\t\t\t\t</p>\n\t\t\t\t\t${this.#ui.employeesTitle}\n\t\t\t\t\t${this.#items.employees.getLayout()}\n\t\t\t\t\t<div class=\"sign-b2e-send__config-container\">\n\t\t\t\t\t\t${this.#getCommunicationsLayout('employee')}\n\t\t\t\t\t\t${this.#getReminderSelectorLayout(MemberRole.signer)}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.#hcmLinkPartyChecker.render()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tthis.#itemsToHide.push(usersLayout);\n\t\t}\n\t\tconst itemTitleText = this.#isTemplateMode()\n\t\t\t? Loc.getMessage('SIGN_DOCUMENT_SEND_FIRST_PARTY_TEMPLATE')\n\t\t\t: Loc.getMessage('SIGN_DOCUMENT_SEND_FIRST_PARTY')\n\t\t;\n\t\tconst companyLayout = Tag.render`\n\t\t\t<div class=\"sign-b2e-settings__item\">\n\t\t\t\t<p class=\"sign-b2e-settings__item_title\">\n\t\t\t\t\t${itemTitleText}\n\t\t\t\t</p>\n\t\t\t\t<div class=\"sign-b2e-send__company-items\">\n\t\t\t\t\t<div class=\"sign-b2e-send__company-items_flex\">\n\t\t\t\t\t\t<p class=\"sign-b2e-send__company-items_item-title\">\n\t\t\t\t\t\t\t${Loc.getMessage('SIGN_SEND_SIGNING_COMPANY')}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<span class=\"sign-b2e-send__company-items_shrunk\"></span>\n\t\t\t\t\t\t<p class=\"sign-b2e-send__company-items_item-title\">\n\t\t\t\t\t\t\t${Loc.getMessage('SIGN_SEND_SIGNING_REPRESENTATIVE')}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"sign-b2e-send__company-items_flex\">\n\t\t\t\t\t\t${this.#items.company.getLayout()}\n\t\t\t\t\t\t<span class=\"sign-b2e-send__company-items_shrunk sign-b2e-send__party-item-separator\">\n\t\t\t\t\t\t\t&#43;\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t${this.#items.representative.getLayout()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sign-b2e-send__config-container\">\n\t\t\t\t\t${this.#getCommunicationsLayout('company')}\n\t\t\t\t\t${this.#getReminderSelectorLayout(MemberRole.assignee)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\tthis.#itemsToHide.push(companyLayout);\n\t\tDom.append(summaryLayout, layout);\n\t\tconst reviewerHeaderText = this.#isTemplateMode()\n\t\t\t? Loc.getMessage('SIGN_SEND_SIGNING_VALIDATION_HEAD_REVIEWER_TEMPLATE')\n\t\t\t: Loc.getMessage('SIGN_SEND_SIGNING_VALIDATION_HEAD_REVIEWER')\n\t\t;\n\t\tconst validationTitles = {\n\t\t\t[MemberRole.editor]: {\n\t\t\t\theader: Loc.getMessage('SIGN_SEND_SIGNING_VALIDATION_HEAD_EDITOR'),\n\t\t\t\thint: Loc.getMessage('SIGN_SEND_SIGNING_VALIDATION_TITLE_EDITOR'),\n\t\t\t},\n\t\t};\n\n\t\tthis.#partiesData.validation.forEach(({ role }): void => {\n\t\t\tif (role === MemberRole.reviewer)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst roleBlockLayout = this.#items[role].getLayout();\n\t\t\tif (!roleBlockLayout)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { hint, header } = validationTitles[role];\n\t\t\tconst validationLayout = this.#getPartyLayout(header, hint, roleBlockLayout);\n\t\t\tthis.#itemsToHide.push(validationLayout);\n\t\t\tDom.append(validationLayout, layout);\n\t\t});\n\n\t\tif (this.#items.reviewers.getPreselectedUserData().length > 0)\n\t\t{\n\t\t\tconst reviewerListLayout = Tag.render`\n\t\t\t\t<div class=\"sign-b2e-document-send-reviewers\">\n\t\t\t\t\t${this.#items.reviewers.getLayout()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tconst reviewersLayout = this.#getPartyLayout(\n\t\t\t\treviewerHeaderText,\n\t\t\t\tLoc.getMessage('SIGN_SEND_SIGNING_VALIDATION_TITLE_REVIEWER_MSGVER_1'),\n\t\t\t\treviewerListLayout,\n\t\t\t);\n\t\t\tthis.#itemsToHide.push(reviewersLayout);\n\t\t\tDom.append(reviewersLayout, layout);\n\t\t}\n\n\t\tDom.append(companyLayout, layout);\n\t\tif (!Type.isNull(usersLayout))\n\t\t{\n\t\t\tDom.append(usersLayout, layout);\n\t\t}\n\n\t\tthis.#progressContainer = Tag.render`<div class=\"send-b2e-progress-container\"></div>`;\n\t\tthis.#progress.renderTo(this.#progressContainer);\n\n\t\tthis.#progressOverlay = this.#isTemplateMode() ? this.#getTemplateProgressOverlay()\n\t\t\t: this.#getProgressOverlay();\n\n\t\tDom.style(this.#progressOverlay, 'display', 'none');\n\t\tthis.emit('appendOverlay', { overlay: this.#progressOverlay });\n\t\tHint.create(layout);\n\n\t\treturn layout;\n\t}\n\n\t#getPartyLayout(header: string, hint: string, layout: HTMLDivElement): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"sign-b2e-settings__item\">\n\t\t\t\t<p class=\"sign-b2e-settings__item_title\">\n\t\t\t\t\t${header}\n\t\t\t\t</p>\n\t\t\t\t<div class=\"sign-b2e-send__party_item\">\n\t\t\t\t\t<p class=\"sign-b2e-send__company-items_item-title\">\n\t\t\t\t\t\t${hint}\n\t\t\t\t\t</p>\n\t\t\t\t\t${layout}\n\t\t\t\t\t${this.#getCommunicationsLayout('validation')}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderLangAndDateContainer(): HTMLElement\n\t{\n\t\tconst showSignUntil = !Type.isNull(this.#dateTimeLimitSelector);\n\n\t\tconst dateSignUntilLayout = showSignUntil\n\t\t\t? this.#renderDateSignUntilSelectorLayout()\n\t\t\t: null\n\t\t;\n\n\t\tconst goskeySignUntilNotice = showSignUntil && this.#provider?.code === ProviderCode.goskey\n\t\t\t? this.#renderGoskeyAlertForSignUntilSelector()\n\t\t\t: null\n\t\t;\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"sign-b2e-send__lang-dt-container\">\n\t\t\t\t${this.#renderLangSelectorLayout()}\n\t\t\t\t${dateSignUntilLayout}\n\t\t\t\t${goskeySignUntilNotice}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderLangSelectorLayout(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"sign-b2e-send__lang-selector\">\n\t\t\t\t${this.#langSelector.getLayout()}\n\t\t\t\t<span\n\t\t\t\t\tdata-hint=\"${Loc.getMessage('SIGN_DOCUMENT_SEND_LANG_SELECTOR_HINT')}\"\n\t\t\t\t></span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderDateSignUntilSelectorLayout(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"sign-b2e-send__datetime-limit-selector\">\n\t\t\t\t${this.#dateTimeLimitSelector.getLayout()}\n\t\t\t\t<span\n\t\t\t\t\tdata-hint=\"${Loc.getMessage('SIGN_DOCUMENT_SEND_DATETIME_LIMIT_SELECTOR_HINT')}\"\n\t\t\t\t></span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderGoskeyAlertForSignUntilSelector(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<p class=\"sign-wizard__notice\">\n\t\t\t\t${Loc.getMessage('SIGN_DOCUMENT_SEND_DATETIME_LIMIT_SELECTOR_GOSKEY_ALERT')}\n\t\t\t</p>\n\t\t`;\n\t}\n\n\t#getProgressOverlay(): HTMLElement\n\t{\n\t\tconst closeDescriptionText = Loc.getMessage('SIGN_SEND_CLOSE_DESCRIPTION');\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"send-b2e-overlay\">\n\t\t\t\t<div class=\"sign-b2e-overlay-content\">\n\t\t\t\t\t${this.#getProgressAnimateLayout()}\n\t\t\t\t\t<div class=\"sign-b2e-overlay-progress-title\">\n\t\t\t\t\t\t${Loc.getMessage('SIGN_SEND_PROGRESS_TITLE')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"sign-b2e-overlay-close-description\">\n\t\t\t\t\t\t${closeDescriptionText}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t${this.#getCloseBtn()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.#progressContainer}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#getTemplateProgressOverlay(): HTMLElement\n\t{\n\t\tconst templateTitle = this.#isExistingTemplate ? Loc.getMessage('SIGN_SETTINGS_TEMPLATE_CHANGED')\n\t\t\t: Loc.getMessage('SIGN_SETTINGS_TEMPLATE_CREATED');\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"sign-b2e-template-status\">\n\t\t\t\t<div class=\"sign-b2e-template-status-inner\">\n\t\t\t\t\t<div class=\"sign-b2e-template-status-img\"></div>\n\t\t\t\t\t<div class=\"sign-b2e-template-status-title\">${templateTitle}</div>\n\t\t\t\t\t<div class=\"sign-b2e-template-status-info\">${Loc.getMessage('SIGN_SETTINGS_TEMPLATE_CREATED_INFO')}</div>\n\t\t\t\t\t${this.#getAllTemplatesBtn()}\n\t\t\t\t\t</div>\n\t\t\t </div>\n\t\t`;\n\t}\n\n\tsetExistingTemplate(): void\n\t{\n\t\tthis.#isExistingTemplate = true;\n\t}\n\n\t#getCloseBtn(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<button\n\t\t\t\tclass=\"ui-btn ui-btn-light-border ui-btn-round\"\n\t\t\t\tonclick=\"${() => this.emit('close')}\">\n\t\t\t\t${Loc.getMessage('SIGN_SEND_CLOSE_BTN')}\n\t\t\t</button>\n\t\t`;\n\t}\n\n\t#getAllTemplatesBtn(): HTMLElement | null\n\t{\n\t\tif (this.#isOpenedFromRobot)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-light-border ui-btn-round\" onclick=\"BX.SidePanel.Instance.close();\">\n\t\t\t\t${Loc.getMessage('SIGN_SETTINGS_TEMPLATES_LIST')}\n\t\t\t</button>\n\t\t`;\n\t}\n\n\tresetUserPartyPopup(): DocumentSend\n\t{\n\t\tthis.#items.employees.resetUserPartyPopup();\n\t\tthis.#items.reviewers.resetUserPartyPopup();\n\n\t\treturn this;\n\t}\n\n\tsetProvider(provider: Provider | null): DocumentSend\n\t{\n\t\tthis.#provider = provider;\n\n\t\treturn this;\n\t}\n\n\tsetPartiesData(parties: PartiesData): DocumentSend\n\t{\n\t\tthis.#partiesData = parties;\n\n\t\tif (Type.isNumber(parties?.company?.entityId))\n\t\t{\n\t\t\tthis.#items.company.setItemData({\n\t\t\t\tentityId: parties?.company?.entityId,\n\t\t\t\tentityType: parties?.company?.entityType,\n\t\t\t});\n\t\t}\n\n\t\tif (Type.isNumber(parties?.representative?.entityId))\n\t\t{\n\t\t\tthis.#items.representative.setItemData({\n\t\t\t\tentityId: parties?.representative?.entityId,\n\t\t\t\tentityType: parties?.representative?.entityType,\n\t\t\t});\n\t\t}\n\n\t\tif (Type.isArrayFilled(parties?.employees))\n\t\t{\n\t\t\tthis.#items.employees.setUserIds(parties?.employees.map((employee) => {\n\t\t\t\treturn { entityId: employee.entityId, entityType: employee.entityType };\n\t\t\t}));\n\t\t}\n\n\t\tif (Type.isArrayFilled(parties?.validation))\n\t\t{\n\t\t\tconst reviewerIdList = [];\n\t\t\tparties.validation.forEach((party) => {\n\t\t\t\tconst { entityId, entityType, role } = party;\n\t\t\t\tif (role === MemberRole.reviewer)\n\t\t\t\t{\n\t\t\t\t\treviewerIdList.push({ entityId, entityType });\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.#items[role].setItemData({ entityId, entityType });\n\t\t\t});\n\n\t\t\tif (reviewerIdList.length > 0)\n\t\t\t{\n\t\t\t\tthis.#items.reviewers.setUserIds(reviewerIdList);\n\t\t\t}\n\t\t}\n\n\t\tthis.#refreshView();\n\n\t\treturn this;\n\t}\n\n\tasync sendForSign(): Promise<boolean>\n\t{\n\t\tconst api = new Api();\n\n\t\ttry\n\t\t{\n\t\t\tthis.emit('disableBack');\n\t\t\tawait this.#saveReminderTypesForRoles();\n\n\t\t\tif (this.#dateTimeLimitSelector)\n\t\t\t{\n\t\t\t\tawait this.#dateTimeLimitSelector.saveSelectedDateForUids();\n\t\t\t}\n\t\t\tthis.#showProgressOverlay();\n\t\t\tif (this.#isTemplateMode())\n\t\t\t{\n\t\t\t\tconst documentTemplateId = this.documentData.values().next().value.templateUid;\n\t\t\t\tconst {\n\t\t\t\t\ttemplate:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: templateId,\n\t\t\t\t\t\t},\n\t\t\t\t} = await api.template.completeTemplate(documentTemplateId, this.#templateFolderId);\n\t\t\t\tthis.emit('onTemplateComplete', { templateId });\n\t\t\t}\n\t\t\telse if (this.#isGroupDocuments())\n\t\t\t{\n\t\t\t\tconst groupId = this.#getGroupIdFromGroup();\n\t\t\t\tconst configureDocumentGroupPromise = api.configureDocumentGroup(groupId);\n\t\t\t\tconst groupCheckFillAndStartProgressPromise = this.#groupCheckFillAndStartProgress(groupId);\n\n\t\t\t\tawait Promise.all([configureDocumentGroupPromise, groupCheckFillAndStartProgressPromise]);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfor (const [uid] of this.documentData)\n\t\t\t\t{\n\t\t\t\t\tconst configureDocumentPromise = api.configureDocument(uid);\n\t\t\t\t\tconst checkFillAndStartProgressPromise = this.#checkFillAndStartProgress(uid);\n\n\t\t\t\t\tawait Promise.all([configureDocumentPromise, checkFillAndStartProgressPromise]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\t\tcatch (ex)\n\t\t{\n\t\t\tconsole.error(ex);\n\t\t\tthis.#hideProgressOverlay();\n\t\t\tthis.emit('enableBack');\n\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tdeleteDocument(uid: string): void\n\t{\n\t\tthis.#documentSummary.deleteItem(uid);\n\t}\n\n\tsetDocumentsBlock(documents): void\n\t{\n\t\tconst documentsObject = Object.fromEntries(documents);\n\t\tthis.#documentSummary.setItems(documentsObject);\n\t}\n\n\tasync #checkFillAndStartProgress(uid: string): Promise<void>\n\t{\n\t\tconst api = new Api();\n\t\tlet completed = false;\n\t\twhile (!completed)\n\t\t{\n\t\t\t// eslint-disable-next-line no-await-in-loop\n\t\t\tconst result = await api.getDocumentFillAndStartProgress(uid);\n\t\t\tcompleted = result.completed;\n\t\t\tthis.#progress.update(Math.round(result.progress));\n\t\t\t// eslint-disable-next-line no-await-in-loop\n\t\t\tawait this.#sleep(1000);\n\t\t}\n\t}\n\n\tasync #groupCheckFillAndStartProgress(groupId: number): Promise<void>\n\t{\n\t\tconst api = new Api();\n\t\tlet completed = false;\n\t\twhile (!completed)\n\t\t{\n\t\t\t// eslint-disable-next-line no-await-in-loop\n\t\t\tconst result = await api.getDocumentGroupFillAndStartProgress(groupId);\n\t\t\tcompleted = result.completed;\n\t\t\tthis.#progress.update(Math.round(result.progress));\n\t\t\t// eslint-disable-next-line no-await-in-loop\n\t\t\tawait this.#sleep(2000);\n\t\t}\n\t}\n\n\tisDateTimeLimitSelectorValid(): boolean\n\t{\n\t\treturn this.#dateTimeLimitSelector ? this.#dateTimeLimitSelector.isValid() : true;\n\t}\n\n\t#sleep(ms: Number): Promise\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tsetTimeout(resolve, ms);\n\t\t});\n\t}\n\n\t#refreshView(): void\n\t{\n\t\tthis.#ui.employeesTitle.innerText = Loc.getMessage(\n\t\t\t'SIGN_SEND_SIGNING_EMPLOYEES',\n\t\t\t{ '#CNT#': this.#partiesData?.employees?.length ?? 0 },\n\t\t);\n\t}\n\n\t#getCommunicationsLayout(communicationChannelId: string): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"sign-b2e-send__communications\">\n\t\t\t\t<span class=\"sign-b2e-send__communications_title\">\n\t\t\t\t\t${Loc.getMessage('SIGN_DOCUMENT_SEND_COMMUNICATION_TITLE_MSGVER_1')}\n\t\t\t\t</span>\n\t\t\t\t<div class=\"sign-b2e-send__communications_communication-type\">\n\t\t\t\t\t<span class=\"sign-b2e-send__communications_communication-type-text\">\n\t\t\t\t\t\t${Loc.getMessage('SIGN_DOCUMENT_SEND_COMMUNICATION_CHANEL_IDLE')}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span\n\t\t\t\t\t\tdata-hint=\"${Loc.getMessage('SIGN_DOCUMENT_SEND_COMMUNICATION_CHANEL_HINT')}\"\n\t\t\t\t\t></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#showProgressOverlay(): void\n\t{\n\t\tthis.#progress.update(0);\n\t\tthis.emit('hidePreview');\n\t\tthis.#itemsToHide.forEach((item) => Dom.hide(item));\n\t\tDom.style(this.#progressOverlay, 'display', 'flex');\n\t\tthis.emit('showOverlay');\n\t}\n\n\t#hideProgressOverlay(): void\n\t{\n\t\tthis.#itemsToHide.forEach((item) => Dom.show(item));\n\t\tthis.emit('hideOverlay');\n\t\tDom.style(this.#progressOverlay, 'display', 'none');\n\t\tthis.emit('showPreview');\n\t}\n\n\t#getReminderSelectorLayout(role: MemberRoleType): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"sign-b2e-send__reminder-selector\">\n\t\t\t\t${this.#getOrCreateReminderSelectorForRole(role).getLayout()}\n\t\t\t\t<span\n\t\t\t\t\tdata-hint=\"${Loc.getMessage('SIGN_DOCUMENT_SEND_REMINDER_TYPE_SELECTOR_HINT')}\"\n\t\t\t\t></span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#getOrCreateReminderSelectorForRole(role: MemberRoleType): ReminderSelector\n\t{\n\t\tthis.#reminderSelectorByRole[role] ??= new ReminderSelector(ReminderSelectorOptionsByRole[role] ?? {});\n\n\t\treturn this.#reminderSelectorByRole[role];\n\t}\n\n\t#saveReminderTypesForRoles(): Promise<void>\n\t{\n\t\tconst uid = this.#getFirstDocumentUidFromGroup();\n\t\tconst promises: Array<Promise> = Object.entries(this.#reminderSelectorByRole)\n\t\t\t.map(([role, selector]) => selector.save(uid, role))\n\t\t;\n\n\t\treturn Promise.all(promises);\n\t}\n\n\t#getFirstDocumentUidFromGroup(): string\n\t{\n\t\treturn this.documentData.keys().next().value;\n\t}\n\n\t#isTemplateMode(): boolean\n\t{\n\t\treturn isTemplateMode(this.#documentMode);\n\t}\n\n\t#isGroupDocuments(): boolean\n\t{\n\t\treturn this.documentData.size > 1;\n\t}\n\n\t#getGroupIdFromGroup(): string\n\t{\n\t\treturn this.documentData.values().next().value.groupId;\n\t}\n\n\t#onHcmLinkCheckerUpdateValidation(event: BaseEvent): void\n\t{\n\t\tconst enableComplete = event?.data ?? false;\n\n\t\tthis.emit(\n\t\t\tenableComplete\n\t\t\t\t? 'enableComplete'\n\t\t\t\t: 'disableComplete',\n\t\t);\n\t}\n}\n"],"names":["EntityTypes","Object","freeze","User","Company","Role","Item","data","container","HTMLDivElement","avatar","title","header","footer","Api","getLayout","Type","isStringFilled","entityType","isInteger","entityId","modifier","Tag","render","loadB2eCompanyList","then","isObject","companies","isArray","company","filter","id","isBoolean","showTaxId","rqInn","Loc","getMessage","TextFormat","encode","response","console","log","Promise","resolve","Dialog","entities","events","event","user","getSelectedItems","lastName","customData","get","preselectedItems","load","dynamicLoad","style","backgroundImage","innerText","BX","Loader","target","mode","size","display","hide","show","ReminderSelectorOptionsByRole","MemberRole","assignee","preSelectedType","Reminder","oncePerDay","signer","twicePerDay","idleCommunication","DocumentSend","documentSendConfig","_classPrivateMethodInitSpec","onTemplateComplete","_classPrivateFieldInitSpec","employeesTitle","HTMLParagraphElement","option","employee","validation","representative","employees","UserParty","reviewers","editor","setEventNamespace","role","reviewer","DocumentSummary","changeTitle","getData","emit","showEditor","region","languages","documentMode","isOpenedFromRobot","analytics","templateFolderId","LangSelector","ProgressBar","maxValue","value","colorTrack","forEach","_classPrivateMethodGet","HcmLinkPartyChecker","api","subscribe","DatetimeLimitSelector","layout","summaryTitle","summaryLayout","push","usersLayout","itemTitleText","companyLayout","Dom","append","reviewerHeaderText","validationTitles","hint","roleBlockLayout","validationLayout","getPreselectedUserData","length","reviewerListLayout","reviewersLayout","isNull","renderTo","overlay","Hint","create","resetUserPartyPopup","provider","parties","isNumber","setItemData","isArrayFilled","setUserIds","map","reviewerIdList","party","saveSelectedDateForUids","documentTemplateId","documentData","values","next","templateUid","template","completeTemplate","templateId","groupId","configureDocumentGroupPromise","configureDocumentGroup","groupCheckFillAndStartProgressPromise","all","uid","configureDocumentPromise","configureDocument","checkFillAndStartProgressPromise","error","deleteItem","documents","documentsObject","fromEntries","setItems","isValid","blocks","externalId","isTemplate","urls","addItem","uids","lastUid","pop","documentGroupUids","keys","setDocumentUids","untilDate","dateSignUntilUserTime","setDate","Date","setDocumentUid","setDocumentGroupUids","check","setEnabled","EventEmitter","createDocumentOverlapLayout","docsCount","Array","from","showSignUntil","dateSignUntilLayout","goskeySignUntilNotice","code","ProviderCode","goskey","closeDescriptionText","templateTitle","completed","getDocumentFillAndStartProgress","result","update","Math","round","progress","getDocumentGroupFillAndStartProgress","ms","setTimeout","communicationChannelId","item","ReminderSelector","promises","entries","selector","save","isTemplateMode","enableComplete"],"mappings":"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"}