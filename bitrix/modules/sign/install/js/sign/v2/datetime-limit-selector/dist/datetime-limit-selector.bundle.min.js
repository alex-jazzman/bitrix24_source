this.BX=this.BX||{};this.BX.Sign=this.BX.Sign||{};(function(e,s,t,a,i){"use strict";let l=e=>e,r,o;var d=babelHelpers.classPrivateFieldLooseKey("api");var n=babelHelpers.classPrivateFieldLooseKey("documentUids");var c=babelHelpers.classPrivateFieldLooseKey("documentDateField");var b=babelHelpers.classPrivateFieldLooseKey("selectedDate");var v=babelHelpers.classPrivateFieldLooseKey("getDateField");var m=babelHelpers.classPrivateFieldLooseKey("saveSelectedDate");class p extends t.EventEmitter{constructor(e=new Date){super();Object.defineProperty(this,m,{value:F});Object.defineProperty(this,v,{value:h});Object.defineProperty(this,d,{writable:true,value:void 0});Object.defineProperty(this,n,{writable:true,value:void 0});Object.defineProperty(this,c,{writable:true,value:void 0});Object.defineProperty(this,b,{writable:true,value:null});this.setEventNamespace("BX.Sign.V2.DatetimeLimitSelector");babelHelpers.classPrivateFieldLooseBase(this,n)[n]=[];babelHelpers.classPrivateFieldLooseBase(this,d)[d]=new i.Api;babelHelpers.classPrivateFieldLooseBase(this,c)[c]=babelHelpers.classPrivateFieldLooseBase(this,v)[v]();this.setDate(e)}getLayout(){return s.Tag.render(r||(r=l`
			<div class="sign-datetime-limit-selector">
				<span class="sign-datetime-limit-selector__label">
					${0}
				</span>
				${0}
			</div>
		`),s.Loc.getMessage("SIGN_BLANK_DATETIME_SELECTOR_LABEL"),babelHelpers.classPrivateFieldLooseBase(this,c)[c])}setDocumentUids(e){babelHelpers.classPrivateFieldLooseBase(this,n)[n]=e}getSelectedDate(){return babelHelpers.classPrivateFieldLooseBase(this,b)[b]}setDate(e){babelHelpers.classPrivateFieldLooseBase(this,b)[b]=e;const t=a.DateTimeFormat.format(a.DateTimeFormat.getFormat("MEDIUM_DATE_FORMAT"),e);const i=a.DateTimeFormat.format(a.DateTimeFormat.getFormat("SHORT_TIME_FORMAT"),e);const l=s.Loc.getMessage("SIGN_BLANK_DATETIME_SELECTOR_DATE",{"#MEDIUM_DATE#":t,"#SHORT_TIME#":i});const r=babelHelpers.classPrivateFieldLooseBase(this,c)[c].firstElementChild;r.textContent=l}isValid(){return!s.Dom.hasClass(babelHelpers.classPrivateFieldLooseBase(this,c)[c],"--invalid")}}function h(){return s.Tag.render(o||(o=l`
			<div
				class="sign-datetime-limit-selector_field"
				onclick="${0}"
			>
				<span class="sign-datetime-limit-selector_field-text"></span>
			</div>
		`),(()=>{BX.calendar({node:babelHelpers.classPrivateFieldLooseBase(this,c)[c],field:babelHelpers.classPrivateFieldLooseBase(this,c)[c],currentTime:babelHelpers.classPrivateFieldLooseBase(this,b)[b].getTime()/1e3,value:a.DateTimeFormat.format(a.DateTimeFormat.getFormat("FORMAT_DATETIME"),babelHelpers.classPrivateFieldLooseBase(this,b)[b].getTime()/1e3),bTime:true,bHideTime:false,callback:e=>{this.emit("beforeDateModify");babelHelpers.classPrivateFieldLooseBase(this,m)[m](e).then((()=>{s.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,c)[c],"--invalid");this.emit("afterDateModify",new s.Event.BaseEvent({data:{isValid:true}}))}),(()=>{s.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,c)[c],"--invalid");this.emit("afterDateModify",new s.Event.BaseEvent({data:{isValid:false}}))}));return true},callback_after:e=>{this.setDate(e)}})}))}function F(e){const s=a.Timezone.UserTime.toUTCTimestamp(e);return Promise.all(babelHelpers.classPrivateFieldLooseBase(this,n)[n].map((e=>babelHelpers.classPrivateFieldLooseBase(this,d)[d].modifyDateSignUntil(e,s))))}e.DatetimeLimitSelector=p})(this.BX.Sign.V2=this.BX.Sign.V2||{},BX,BX.Event,BX.Main,BX.Sign.V2);
//# sourceMappingURL=datetime-limit-selector.bundle.map.js