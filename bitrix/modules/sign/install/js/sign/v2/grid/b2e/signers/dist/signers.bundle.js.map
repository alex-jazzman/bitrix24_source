{"version":3,"file":"signers.bundle.js","sources":["../src/popup/create-list.js","../src/index.js"],"sourcesContent":["import { Tag, Dom, Loc, Text, Event } from 'main.core';\nimport { CancelButton, CreateButton } from 'ui.buttons';\nimport { Popup } from 'main.popup';\nimport './create-list.css';\n\nexport class CreateListPopup\n{\n\tasync show(inputText: string = null): Promise<any>\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst inputId = `listNameInput_${Date.now()}`;\n\t\t\tconst input = Tag.render`\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tid=\"${inputId}\"\n\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\tplaceholder=\"${Loc.getMessage('SIGN_SIGNERS_GRID_CREATE_LIST_POPUP_INPUT_PLACEHOLDER')}\"\n\t\t\t\t\tvalue=\"${inputText === null ? '' : Text.encode(inputText)}\"\n\t\t\t\t>\n\t\t\t`;\n\n\t\t\tconst popup = new Popup(`listNamePopup_${inputId}`, null, {\n\t\t\t\tdraggable: false,\n\t\t\t\toverlay: true,\n\t\t\t\twidth: 500,\n\t\t\t\theight: 280,\n\t\t\t\tpadding: 0,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tcloseIcon: true,\n\t\t\t\tclassName: 'sign-signers-grid-create-list-popup',\n\n\t\t\t\tcontent: Tag.render`\n\t\t\t\t\t<div class=\"sign-create-list-popup-item-container-wrapper\">\n\t\t\t\t\t\t<span class=\"sign-create-list-title-titlebar\">${Loc.getMessage('SIGN_SIGNERS_GRID_CREATE_LIST_POPUP_TITLE')}</span>\n\t\t\t\t\t\t<div class=\"sign-create-list-popup-item-container\">\n\t\t\t\t\t\t\t<div class=\"sign-create-list-title-input-container\">\n\t\t\t\t\t\t\t\t${input}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<span style=\"text-align: left; width: 100%\">${Loc.getMessage('SIGN_SIGNERS_GRID_CREATE_LIST_DESCRIPTION')}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\n\t\t\t\tbuttons: [\n\t\t\t\t\tnew CreateButton({\n\t\t\t\t\t\ttext: inputText === null\n\t\t\t\t\t\t\t? Loc.getMessage('SIGN_SIGNERS_GRID_CREATE_LIST_CREATE_BUTTON_TEXT')\n\t\t\t\t\t\t\t: Loc.getMessage('SIGN_SIGNERS_GRID_CREATE_LIST_SAVE_BUTTON_TEXT'),\n\t\t\t\t\t\tround: true,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: async () => {\n\t\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tconst listName = await this.#handleSave(input);\n\t\t\t\t\t\t\t\t\tresolve(listName);\n\t\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcatch (error)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.#showError(error);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t\tnew CancelButton({\n\t\t\t\t\t\ttext: Loc.getMessage('SIGN_SIGNERS_GRID_CREATE_LIST_CANCEL_BUTTON_TEXT'),\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t],\n\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupShow() {\n\t\t\t\t\t\tDom.style(this.popupContainer, 'backgroundColor', 'rgba(255, 255, 255)');\n\t\t\t\t\t},\n\t\t\t\t\tonAfterShow: () => {\n\t\t\t\t\t\tinput.focus();\n\n\t\t\t\t\t\tif (inputText !== null && inputText.length > 1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tinput.setSelectionRange(input.value.length, input.value.length);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tEvent.bind(input, 'keydown', async (event) => {\n\t\t\t\t\t\t\tif (event.key === 'Enter')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tconst listName = await this.#handleSave(input);\n\t\t\t\t\t\t\t\t\tresolve(listName);\n\t\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcatch (error)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.#showError(error);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tpopup.show();\n\t\t});\n\t}\n\n\tasync #handleSave(input: HTMLElement): Promise<string>\n\t{\n\t\tconst listName = input ? input.value : '';\n\n\t\tif (!listName)\n\t\t{\n\t\t\tthrow new Error(Loc.getMessage('SIGN_SIGNERS_GRID_CREATE_LIST_HINT_TITLE_NOT_EMPTY'));\n\t\t}\n\n\t\treturn listName;\n\t}\n\n\t#showError(error: Error): void\n\t{\n\t\tBX.UI.Notification.Center.notify({\n\t\t\tcontent: error.message,\n\t\t});\n\t}\n}\n","import { Dom, Event, Loc, Type, Tag } from 'main.core';\nimport { Api } from 'sign.v2.api';\nimport { MessageBox } from 'ui.dialogs.messagebox';\nimport { CreateListPopup } from './popup/create-list';\nimport { type UserParty } from 'sign.v2.b2e.user-party';\n\nconst GRID_SIGNERS_LISTS = 'SIGN_B2E_SIGNERS_LIST_GRID';\nconst GRID_SIGNERS = 'SIGN_B2E_SIGNERS_LIST_GRID_EDIT';\n\nexport class Signers\n{\n\t#api = new Api();\n\n\treloadSigners(): void\n\t{\n\t\tconst gridManager = this.#getGridManager();\n\n\t\tEvent.ready(() => {\n\t\t\tconst grid = gridManager?.getById(GRID_SIGNERS)?.instance;\n\t\t\tif (Type.isObject(grid))\n\t\t\t{\n\t\t\t\tgrid.reload();\n\t\t\t}\n\t\t});\n\t}\n\n\treloadLists(): void\n\t{\n\t\tconst gridManager = this.#getGridManager();\n\n\t\tEvent.ready(() => {\n\t\t\tconst grid = gridManager?.getById(GRID_SIGNERS_LISTS)?.instance;\n\t\t\tif (Type.isObject(grid))\n\t\t\t{\n\t\t\t\tgrid.reload();\n\t\t\t}\n\t\t});\n\t}\n\n\tasync deleteList(listId: number): Promise<void>\n\t{\n\t\tconst messageContent = Tag.render`\n\t\t\t<div>\n\t\t\t\t${Loc.getMessage('SIGN_SIGNERS_DELETE_CONFIRMATION_MESSAGE')}\n\t\t\t</div>\n\t\t`;\n\t\tDom.style(messageContent, 'margin-top', '5%');\n\t\tDom.style(messageContent, 'color', '#535c69');\n\n\t\tMessageBox.show({\n\t\t\ttitle: Loc.getMessage('SIGN_SIGNERS_DELETE_CONFIRMATION_TITLE'),\n\t\t\tmessage: messageContent.outerHTML,\n\t\t\tmodal: true,\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('SIGN_SIGNERS_GRID_DELETE_POPUP_YES'),\n\t\t\t\t\tcolor: BX.UI.Button.Color.PRIMARY,\n\t\t\t\t\tonclick: async (button) => {\n\t\t\t\t\t\tbutton.setDisabled(true);\n\t\t\t\t\t\tbutton.setState(BX.UI.Button.State.WAITING);\n\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst api = this.#api;\n\t\t\t\t\t\t\tawait api.signersList.deleteSignersList(listId);\n\n\t\t\t\t\t\t\twindow.top.BX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\t\tcontent: Loc.getMessage('SIGN_SIGNERS_GRID_DELETE_HINT_SUCCESS'),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twindow.top.BX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\t\tcontent: Loc.getMessage('SIGN_SIGNERS_GRID_DELETE_HINT_FAIL'),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tawait this.reloadLists();\n\t\t\t\t\t\tbutton.getContext().close();\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('SIGN_SIGNERS_GRID_DELETE_POPUP_NO'),\n\t\t\t\t\tcolor: BX.UI.Button.Color.LINK,\n\t\t\t\t\tonclick: (button) => {\n\t\t\t\t\t\tbutton.getContext().close();\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t}\n\n\tasync copyList(listId: number): Promise<void>\n\t{\n\t\ttry\n\t\t{\n\t\t\tawait this.#api.signersList.copySignersList(listId);\n\t\t\tawait this.reloadLists();\n\t\t\twindow.top.BX.UI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('SIGN_SIGNERS_GRID_COPY_HINT_SUCCESS'),\n\t\t\t});\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error('Error copying list:', error);\n\t\t\twindow.top.BX.UI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('SIGN_SIGNERS_GRID_COPY_HINT_FAIL'),\n\t\t\t});\n\t\t}\n\t}\n\n\tasync deleteSelectedSigners(listId: number): Promise<void>\n\t{\n\t\tconst gridManager = this.#getGridManager();\n\t\tconst grid = gridManager?.getById(GRID_SIGNERS)?.instance;\n\t\tif (!grid)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst selectedIds = grid.getRows().getSelectedIds();\n\n\t\tif (selectedIds.length === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tawait this.deleteSigners(listId, selectedIds);\n\t}\n\n\tasync deleteSigners(listId: number, userIds: number[]): Promise<void>\n\t{\n\t\tconst messageContent = Tag.render`\n\t\t\t<div>\n\t\t\t\t${Loc.getMessage('SIGN_SIGNERS_SIGNER_DELETE_CONFIRMATION_MESSAGE')}\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.style(messageContent, 'margin-top', '5%');\n\t\tDom.style(messageContent, 'color', '#535c69');\n\n\t\tBX.UI.Dialogs.MessageBox.show({\n\t\t\ttitle: Loc.getMessage('SIGN_SIGNERS_SIGNER_DELETE_CONFIRMATION_TITLE'),\n\t\t\tmessage: messageContent.outerHTML,\n\t\t\tmodal: true,\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('SIGN_SIGNERS_GRID_DELETE_POPUP_YES'),\n\t\t\t\t\tcolor: BX.UI.Button.Color.PRIMARY,\n\t\t\t\t\tonclick: async (button) => {\n\t\t\t\t\t\tbutton.setDisabled(true);\n\t\t\t\t\t\tbutton.setState(BX.UI.Button.State.WAITING);\n\n\t\t\t\t\t\tconst isSingle = userIds.length === 1;\n\t\t\t\t\t\tconst successMsg = isSingle\n\t\t\t\t\t\t\t? Loc.getMessage('SIGN_SIGNERS_SIGNER_GRID_DELETE_HINT_SUCCESS')\n\t\t\t\t\t\t\t: Loc.getMessage('SIGN_SIGNERS_SIGNERS_GRID_DELETE_HINT_SUCCESS');\n\t\t\t\t\t\tconst failMsg = isSingle\n\t\t\t\t\t\t\t? Loc.getMessage('SIGN_SIGNERS_SIGNER_GRID_DELETE_HINT_FAIL')\n\t\t\t\t\t\t\t: Loc.getMessage('SIGN_SIGNERS_SIGNERS_GRID_DELETE_HINT_FAIL');\n\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tawait this.#api.signersList.deleteSignersFromList(listId, userIds);\n\t\t\t\t\t\t\twindow.top.BX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\t\tcontent: successMsg,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twindow.top.BX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\t\tcontent: failMsg,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tawait this.reloadSigners();\n\t\t\t\t\t\tbutton.getContext().close();\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('SIGN_SIGNERS_GRID_DELETE_POPUP_NO'),\n\t\t\t\t\tcolor: BX.UI.Button.Color.LINK,\n\t\t\t\t\tonclick: (button) => button.getContext().close(),\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t}\n\n\tasync createList(): void\n\t{\n\t\ttry\n\t\t{\n\t\t\tconst createListPopup = new CreateListPopup();\n\t\t\tconst title = await createListPopup.show();\n\t\t\tawait this.#api.signersList.createList(title);\n\t\t\twindow.top.BX.UI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('SIGN_SIGNERS_GRID_LIST_CREATE_SUCCESS'),\n\t\t\t});\n\t\t}\n\t\tcatch\n\t\t{\n\t\t\twindow.top.BX.UI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('SIGN_SIGNERS_GRID_LIST_CREATE_FAIL'),\n\t\t\t});\n\t\t}\n\n\t\tawait this.reloadLists();\n\t}\n\n\tasync renameList(listId: number, title: string): void\n\t{\n\t\ttry\n\t\t{\n\t\t\tconst createListPopup = new CreateListPopup();\n\t\t\tconst newTitle = await createListPopup.show(title);\n\t\t\tawait this.#api.signersList.renameList(listId, newTitle);\n\t\t\twindow.top.BX.UI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('SIGN_SIGNERS_GRID_LIST_CREATE_SUCCESS'),\n\t\t\t});\n\t\t}\n\t\tcatch\n\t\t{\n\t\t\twindow.top.BX.UI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('SIGN_SIGNERS_GRID_LIST_CREATE_FAIL'),\n\t\t\t});\n\t\t}\n\n\t\tawait this.reloadLists();\n\t}\n\n\tasync addSigners(listId: number, entities: Array, excludeRejected: boolean = true): void\n\t{\n\t\tconst members = entities.map((entity) => ({ ...entity, party: 2 }));\n\t\tawait this.#api.signersList.addSignersToList(listId, members, excludeRejected);\n\t\tBX.SidePanel.Instance.close();\n\t\tawait this.reloadSigners();\n\t}\n\n\tasync handleAddSignersButtonClick(listId: number, userParty: UserParty): Promise<void>\n\t{\n\t\tif (userParty.validate())\n\t\t{\n\t\t\tconst listGrid = new BX.Sign.V2.Grid.B2e.Signers();\n\t\t\tawait listGrid.addSigners(listId, userParty.getEntities(), userParty.isRejectExcludedEnabled());\n\t\t}\n\t}\n\n\t#getGridManager(): ?Object\n\t{\n\t\tif (BX.Main.gridManager)\n\t\t{\n\t\t\treturn BX.Main.gridManager;\n\t\t}\n\n\t\tconst previousSlider = BX.SidePanel.Instance.getPreviousSlider(BX.SidePanel.Instance.getSliderByWindow(window));\n\t\tconst gridWindow = previousSlider ? previousSlider.getWindow() : window.top;\n\n\t\treturn gridWindow?.BX.Main.gridManager;\n\t}\n}\n"],"names":["CreateListPopup","show","inputText","Promise","resolve","inputId","Date","now","input","Tag","render","Loc","getMessage","Text","encode","popup","Popup","draggable","overlay","width","height","padding","closeByEsc","closeIcon","className","content","buttons","CreateButton","text","round","events","click","listName","close","error","CancelButton","onPopupShow","Dom","style","popupContainer","onAfterShow","focus","length","setSelectionRange","value","Event","bind","event","key","Error","BX","UI","Notification","Center","notify","message","GRID_SIGNERS_LISTS","GRID_SIGNERS","Signers","Api","reloadSigners","gridManager","ready","grid","getById","instance","Type","isObject","reload","reloadLists","deleteList","listId","messageContent","MessageBox","title","outerHTML","modal","Button","color","Color","PRIMARY","onclick","button","setDisabled","setState","State","WAITING","api","signersList","deleteSignersList","window","top","getContext","LINK","copyList","copySignersList","console","deleteSelectedSigners","selectedIds","getRows","getSelectedIds","deleteSigners","userIds","Dialogs","isSingle","successMsg","failMsg","deleteSignersFromList","createList","createListPopup","renameList","newTitle","addSigners","entities","excludeRejected","members","map","entity","party","addSignersToList","SidePanel","Instance","handleAddSignersButtonClick","userParty","validate","listGrid","Sign","V2","Grid","B2e","getEntities","isRejectExcludedEnabled","Main","previousSlider","getPreviousSlider","getSliderByWindow","gridWindow","getWindow"],"mappings":"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"}