this.BX=this.BX||{};(function(e,n,t,s,i,o,a,r,l){"use strict";var c="/bitrix/js/sign/onboarding/dist/video/b2e_welcome.gif";let _=e=>e,g,d,b,p,u;const B=16571388;const v=20338910;const N=24354462;const E="sign-b2e-onboarding-tour-id";const P="sign-b2e-onboarding-tour-id-test-signing";var T=babelHelpers.classPrivateFieldLooseKey("api");var O=babelHelpers.classPrivateFieldLooseKey("backend");var I=babelHelpers.classPrivateFieldLooseKey("showCloseOnboardingSigningWarningPopup");var S=babelHelpers.classPrivateFieldLooseKey("getB2eWelcomeGuide");var L=babelHelpers.classPrivateFieldLooseKey("createB2eWelcomePopupWithTestSigning");var h=babelHelpers.classPrivateFieldLooseKey("createB2eWelcomePopup");var G=babelHelpers.classPrivateFieldLooseKey("renderIcon");var f=babelHelpers.classPrivateFieldLooseKey("openSigningSlider");var A=babelHelpers.classPrivateFieldLooseKey("createB2eNewDocumentButtonStep");var R=babelHelpers.classPrivateFieldLooseKey("createB2eTemplatesStep");var y=babelHelpers.classPrivateFieldLooseKey("createB2eKanbanRouteStep");var m=babelHelpers.classPrivateFieldLooseKey("shouldStartB2eOnboarding");var w=babelHelpers.classPrivateFieldLooseKey("isTemplateBtnVisible");class M{constructor(){Object.defineProperty(this,w,{value:$});Object.defineProperty(this,m,{value:x});Object.defineProperty(this,y,{value:K});Object.defineProperty(this,R,{value:j});Object.defineProperty(this,A,{value:W});Object.defineProperty(this,f,{value:U});Object.defineProperty(this,G,{value:X});Object.defineProperty(this,h,{value:H});Object.defineProperty(this,L,{value:F});Object.defineProperty(this,S,{value:C});Object.defineProperty(this,I,{value:D});Object.defineProperty(this,T,{writable:true,value:new o.Api});Object.defineProperty(this,O,{writable:true,value:new s.Backend})}async startB2eWelcomeOnboarding(e){const n=E;const t=await babelHelpers.classPrivateFieldLooseBase(this,m)[m](n);if(!t){return}a.BannerDispatcher.high.toQueue((t=>{const s=babelHelpers.classPrivateFieldLooseBase(this,S)[S](n,e,t);const i=babelHelpers.classPrivateFieldLooseBase(this,h)[h](s);babelHelpers.classPrivateFieldLooseBase(this,O)[O].saveVisit(n);i.show()}))}async startB2eWelcomeOnboardingWithTestSigning(e){const n=P;const t=await babelHelpers.classPrivateFieldLooseBase(this,m)[m](n,true);if(!t){return}a.BannerDispatcher.high.toQueue((t=>{const s=babelHelpers.classPrivateFieldLooseBase(this,S)[S](n,e,t);const i=babelHelpers.classPrivateFieldLooseBase(this,L)[L](s,e);babelHelpers.classPrivateFieldLooseBase(this,O)[O].saveVisit(n);i.show()}))}showTestSigningBanner(e){const t=document.querySelector("header.page__header");if(t){const s=new l.Button({color:l.Button.Color.PRIMARY,size:l.Button.Size.MEDIUM,round:true,noCaps:true,useAirDesign:true,style:l.Button.AirStyle.FILL,text:n.Loc.getMessage("SIGN_ONBOARDING_B2E_BANNER_BTN_SIGN_TEST_TEXT"),className:`sign__b2e-onboarding-signing-test-banner-button ${e.showTariffSlider?"sign-b2e-js-tarriff-slider-trigger":""}`,events:e.showTariffSlider?{}:{click:()=>{babelHelpers.classPrivateFieldLooseBase(this,f)[f](e)}}});const i=n.Tag.render(g||(g=_`
				<div class="sign__b2e-onboarding-signing-test-banner">
					<div class="sign__onboarding-banner-content_img"></div>
					<div class="sign__b2e-onboarding-signing-test-banner_content">
						<div class="sign__b2e-onboarding-signing-test-banner-title-container">
							<div class="sign__b2e-onboarding-signing-test-banner-title">
								${0}
							</div>
							<button
									class="sign__b2e-onboarding-signing-test-banner_close_btn"
									onclick="${0}">
							</button>
						</div>
						<div class="sign__b2e-onboarding-signing-test-banner-title-description">
						${0}
						</div>
					</div>
				</div>
			`),n.Loc.getMessage("SIGN_ONBOARDING_B2E_BANNER_TITLE_SIGN_TEST_TEXT"),(()=>babelHelpers.classPrivateFieldLooseBase(this,I)[I]()),n.Loc.getMessage("SIGN_ONBOARDING_B2E_BANNER_DESCRIPTION_SIGN_TEST_TEXT"));n.Dom.append(s.render(),i.querySelector(".sign__b2e-onboarding-signing-test-banner_content"));t.insertAdjacentElement("afterend",i)}}getB2bGuide(e){return new s.Guide({id:"sign-tour-guide-sign-start-kanban",autoSave:true,simpleMode:true,steps:[{target:e,title:n.Loc.getMessage("SIGN_ONBOARDING_B2B_BTN_TITLE"),text:n.Loc.getMessage("SIGN_ONBOARDING_B2B_BTN_TEXT"),article:B}]})}}function D(){const e=n.Tag.render(d||(d=_`
			<div class="sign__b2e-close-onboarding-signing-warning-popup-content">
				${0}
			</div>
		`),n.Loc.getMessage("SIGN_ONBOARDING_B2E_CLOSE_BANNER_WARNING_POPUP_CONTENT"));const s=new t.Popup({id:"sign__b2e-close-onboarding-signing-banner-warning-popup",content:e,minHeigh:180,width:480,padding:20,contentColor:"white",overlay:true,closeByEsc:true,closeIcon:true,buttons:[new l.Button({id:"sign__b2e-close-onboarding-signing-banner-warning-popup-confirm-button",text:n.Loc.getMessage("SIGN_ONBOARDING_B2E_CLOSE_BANNER_WARNING_POPUP_CONFIRM_BUTTON"),color:l.Button.Color.PRIMARY,events:{click:()=>{s.close();const e=document.querySelector(".sign__b2e-onboarding-signing-test-banner");if(e){e.remove();babelHelpers.classPrivateFieldLooseBase(this,T)[T].hideOnboardingSigningBanner()}}}}),new l.Button({id:"sign__b2e-close-onboarding-signing-banner-warning-popup-cancel-button",text:n.Loc.getMessage("SIGN_ONBOARDING_B2E_CLOSE_BANNER_WARNING_POPUP_CANCEL_BUTTON"),color:l.Button.Color.LINK,events:{click(){s.close()}}})]});s.show()}function C(e,n,t){return new s.Guide({id:e,autoSave:true,simpleMode:false,events:{onFinish:t},steps:[babelHelpers.classPrivateFieldLooseBase(this,A)[A](".ui-toolbar-after-title-buttons > .sign-b2e-onboarding-create",n.region),...n.byEmployeeEnabled?[babelHelpers.classPrivateFieldLooseBase(this,y)[y](".ui-toolbar-after-title-buttons > .sign-b2e-onboarding-route")]:[],babelHelpers.classPrivateFieldLooseBase(this,R)[R](babelHelpers.classPrivateFieldLooseBase(this,w)[w]()?"div#sign_sign_b2e_employee_template_list":"div#sign_more_button")]})}function F(e,s){const i=n.Loc.getMessage("SIGN_ONBOARDING_B2E_WELCOME_POPUP_TITLE");const o=[];if(s.canEditDocument&&s.canCreateDocument){o.push(new l.Button({id:"sign__b2e-onboarding-welcome-popup_sign__onboarding-signing-popup-button",color:l.Button.Color.PRIMARY,size:l.Button.Size.MEDIUM,round:true,noCaps:true,useAirDesign:true,style:l.Button.AirStyle.FILL,text:n.Loc.getMessage("SIGN_ONBOARDING_B2E_WELCOME_POPUP_BTN_SIGN_TEST_TEXT"),className:`sign__b2e-onboarding-welcome-popup_sign__onboarding-popup-button ${s.showTariffSlider?"sign-b2e-js-tarriff-slider-trigger":""}`,events:s.showTariffSlider?{}:{click:()=>{a.close();babelHelpers.classPrivateFieldLooseBase(this,f)[f](s)}}}))}o.push(new l.Button({id:"sign__b2e-onboarding-welcome-popup_sign__onboarding-tour-popup-button",color:l.Button.Color.PRIMARY,size:l.Button.Size.MEDIUM,round:true,noCaps:true,useAirDesign:true,style:l.Button.AirStyle.OUTLINE,text:n.Loc.getMessage("SIGN_ONBOARDING_B2E_WELCOME_POPUP_BTN_TEXT_RU"),className:"sign__b2e-onboarding-welcome-popup_sign__onboarding-popup-button",events:{click(){a.close();e.start()}}}));const a=new t.Popup({id:"sign__b2e-onboarding-welcome-popup",className:"sign__b2e-onboarding-welcome-popup",closeIcon:true,width:690,height:322,padding:20,overlay:true,buttons:o,content:n.Tag.render(b||(b=_`
				<div class="sign__onboarding-popup-content">
					<div class="sign__onboarding-popup-content_header">
						<div class="sign__onboarding-popup-content_header-title">
							${0}
						</div>
					</div>
					<div class="sign__onboarding-popup-content_body">
						<div class="sign__onboarding-popup-content_img"></div>
						<div class="sign__onboarding-popup-content_text_container">
							<div class="sign__onboarding-popup-content_text">
								${0}
							</div>
						</div>
					</div>
				</div>
			`),i,n.Loc.getMessage("SIGN_ONBOARDING_B2E_WELCOME_POPUP_TEXT"))});return a}function H(e){const s=n.Loc.getMessage("SIGN_ONBOARDING_B2E_WELCOME_POPUP_TITLE_WEST");const i=new t.Popup({className:"sign__b2e-onboarding-welcome-popup",closeIcon:false,width:500,height:517,padding:20,buttons:[new l.Button({color:l.Button.Color.PRIMARY,size:l.Button.Size.SMALL,round:true,noCaps:true,text:n.Loc.getMessage("SIGN_ONBOARDING_B2E_WELCOME_POPUP_BTN_TEXT"),className:"sign__b2e-onboarding-welcome-popup_start-guide",events:{click(){i.close();e.start()}}})],content:n.Tag.render(p||(p=_`
				<div class="sign__onboarding-popup-content">
					<div class="sign__onboarding-popup-content_header">
						<div class="sign__onboarding-popup-content_header-icon">
							${0}
						</div>
						<div class="sign__onboarding-popup-content_header-title">
							${0}
						</div>
					</div>
					<div class="sign__onboarding-popup-content_promo-video-wrapper">
						<img src="${0}" alt="video">
					</div>
					<div class="sign__onboarding-popup-content_footer">
						${0}
					</div>
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,G)[G](),s,c,n.Loc.getMessage("SIGN_ONBOARDING_B2E_WELCOME_POPUP_TEXT"))});return i}function X(){const e=getComputedStyle(document.body).getPropertyValue("--ui-color-on-primary");const n=new r.Icon({color:e,size:18,icon:r.Actions.PENCIL_DRAW});return n.render()}function U(e){BX.SidePanel.Instance.open("onboarding-signing-slider",{width:750,contentCallback:()=>{const t="onboarding-signing-slider-container";const s=n.Tag.render(u||(u=_`<div id="${0}"></div>`),t);const o=new i.B2EOnboardingSignSettings(t,Boolean(e.hasCompanies));o.renderToContainer(s);return s}})}function W(e,t){const s=t==="ru"?n.Loc.getMessage("SIGN_ONBOARDING_B2E_STEP_CREATE_TITLE_RU"):n.Loc.getMessage("SIGN_ONBOARDING_B2E_STEP_CREATE_TITLE");const i=t==="ru"?n.Loc.getMessage("SIGN_ONBOARDING_B2E_STEP_CREATE_TEXT_RU"):n.Loc.getMessage("SIGN_ONBOARDING_B2E_STEP_CREATE_TEXT");return{target:e,title:s,text:i,article:v}}function j(e){return{target:e,title:n.Loc.getMessage("SIGN_ONBOARDING_B2E_STEP_TEMPLATES_TITLE_V1"),text:n.Loc.getMessage("SIGN_ONBOARDING_B2E_STEP_TEMPLATES_TEXT_V1"),article:N}}function K(e){return{target:e,title:n.Loc.getMessage("SIGN_ONBOARDING_B2E_STEP_ROUTE_TITLE"),text:n.Loc.getMessage("SIGN_ONBOARDING_B2E_STEP_ROUTE_TEXT")}}async function x(e,t=false){const{lastVisitDate:s}=await babelHelpers.classPrivateFieldLooseBase(this,O)[O].getLastVisitDate(e);if(n.Type.isNull(s)&&t){const{hasSignedDocuments:e}=await babelHelpers.classPrivateFieldLooseBase(this,T)[T].hasSignedDocuments();if(e){return false}}return n.Type.isNull(s)}function $(){var e;return((e=document.querySelector("div#sign_sign_b2e_employee_template_list"))==null?void 0:e.offsetParent)!==null}e.Onboarding=M})(this.BX.Sign=this.BX.Sign||{},BX,BX.Main,BX.Sign.Tour,BX.Sign.V2.B2e,BX.Sign.V2,BX.UI,BX.UI.IconSet,BX.UI);
//# sourceMappingURL=onboarding.bundle.map.js