{"version":3,"file":"onboarding.bundle.js","sources":["../src/video/b2e_welcome.gif","../src/onboarding.js"],"sourcesContent":["export default \"/bitrix/js/sign/onboarding/dist/video/b2e_welcome.gif\"","import { Dom, Loc, Tag, Type } from 'main.core';\nimport { Popup } from 'main.popup';\nimport { Guide, Backend, type StepOption } from 'sign.tour';\nimport { B2EOnboardingSignSettings } from 'sign.v2.b2e.sign-settings-onboarding';\nimport { Api } from 'sign.v2.api';\nimport { BannerDispatcher } from 'ui.banner-dispatcher';\nimport { Icon, Actions as ActionsIconSet } from 'ui.icon-set.api.core';\nimport { Button } from 'ui.buttons';\nimport 'ui.design-tokens';\nimport './style.css';\nimport b2eWelcomeGif from './video/b2e_welcome.gif';\n\ntype WelcomeGuideOptions = {\n\tregion: string,\n\tbyEmployeeEnabled: boolean,\n\thasCompanies?: boolean,\n\tshowTariffSlider?: boolean,\n\tcanEditDocument?: boolean,\n\tcanCreateDocument?: boolean,\n}\n\ntype BannerOptions = {\n\thasCompanies: boolean,\n\tshowTariffSlider: boolean,\n}\n\nconst b2bHelpdeskCode = 16571388;\nconst b2eCreateHelpdeskCode = 20338910;\nconst b2eTemplatesHelpdeskCode = 24354462;\n\nconst b2eWelcomeTourId = 'sign-b2e-onboarding-tour-id';\nconst b2eTestSigningWelcomeTourId = 'sign-b2e-onboarding-tour-id-test-signing';\n\nexport class Onboarding\n{\n\t#api: Api = new Api();\n\t#backend: Backend = new Backend();\n\n\tasync startB2eWelcomeOnboarding(options: WelcomeGuideOptions): Promise<void>\n\t{\n\t\tconst tourId = b2eWelcomeTourId;\n\n\t\tconst startOnboarding = await this.#shouldStartB2eOnboarding(tourId);\n\t\tif (!startOnboarding)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBannerDispatcher.high.toQueue((onDone) => {\n\t\t\tconst guide = this.#getB2eWelcomeGuide(tourId, options, onDone);\n\t\t\tconst welcomePopup = this.#createB2eWelcomePopup(guide);\n\t\t\tthis.#backend.saveVisit(tourId);\n\t\t\twelcomePopup.show();\n\t\t});\n\t}\n\n\tasync startB2eWelcomeOnboardingWithTestSigning(options: WelcomeGuideOptions): Promise<void>\n\t{\n\t\tconst tourId = b2eTestSigningWelcomeTourId;\n\n\t\tconst startOnboarding = await this.#shouldStartB2eOnboarding(tourId, true);\n\t\tif (!startOnboarding)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBannerDispatcher.high.toQueue((onDone) => {\n\t\t\tconst guide = this.#getB2eWelcomeGuide(tourId, options, onDone);\n\t\t\tconst welcomePopup = this.#createB2eWelcomePopupWithTestSigning(guide, options);\n\t\t\tthis.#backend.saveVisit(tourId);\n\t\t\twelcomePopup.show();\n\t\t});\n\t}\n\n\tshowTestSigningBanner(options: BannerOptions): void\n\t{\n\t\tconst header = document.querySelector('header.page__header');\n\t\tif (header)\n\t\t{\n\t\t\tconst signButton = new Button({\n\t\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\t\tsize: Button.Size.MEDIUM,\n\t\t\t\tround: true,\n\t\t\t\tnoCaps: true,\n\t\t\t\tuseAirDesign: true,\n\t\t\t\tstyle: Button.AirStyle.FILL,\n\t\t\t\ttext: Loc.getMessage('SIGN_ONBOARDING_B2E_BANNER_BTN_SIGN_TEST_TEXT'),\n\t\t\t\tclassName: `sign__b2e-onboarding-signing-test-banner-button ${options.showTariffSlider\n\t\t\t\t\t? 'sign-b2e-js-tarriff-slider-trigger'\n\t\t\t\t\t: ''\n\t\t\t\t}`,\n\t\t\t\tevents: options.showTariffSlider ? {} : {\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tthis.#openSigningSlider(options);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tconst onboardingBanner = Tag.render`\n\t\t\t\t<div class=\"sign__b2e-onboarding-signing-test-banner\">\n\t\t\t\t\t<div class=\"sign__onboarding-banner-content_img\"></div>\n\t\t\t\t\t<div class=\"sign__b2e-onboarding-signing-test-banner_content\">\n\t\t\t\t\t\t<div class=\"sign__b2e-onboarding-signing-test-banner-title-container\">\n\t\t\t\t\t\t\t<div class=\"sign__b2e-onboarding-signing-test-banner-title\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SIGN_ONBOARDING_B2E_BANNER_TITLE_SIGN_TEST_TEXT')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"sign__b2e-onboarding-signing-test-banner_close_btn\"\n\t\t\t\t\t\t\t\t\tonclick=\"${() => this.#showCloseOnboardingSigningWarningPopup()}\">\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"sign__b2e-onboarding-signing-test-banner-title-description\">\n\t\t\t\t\t\t${Loc.getMessage('SIGN_ONBOARDING_B2E_BANNER_DESCRIPTION_SIGN_TEST_TEXT')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tDom.append(signButton.render(), onboardingBanner.querySelector('.sign__b2e-onboarding-signing-test-banner_content'));\n\t\t\theader.insertAdjacentElement('afterend', onboardingBanner);\n\t\t}\n\t}\n\n\t#showCloseOnboardingSigningWarningPopup(): void\n\t{\n\t\tconst popupContent = Tag.render`\n\t\t\t<div class=\"sign__b2e-close-onboarding-signing-warning-popup-content\">\n\t\t\t\t${Loc.getMessage('SIGN_ONBOARDING_B2E_CLOSE_BANNER_WARNING_POPUP_CONTENT')}\n\t\t\t</div>\n\t\t`;\n\n\t\tconst popup = new Popup({\n\t\t\tid: 'sign__b2e-close-onboarding-signing-banner-warning-popup',\n\t\t\tcontent: popupContent,\n\t\t\tminHeigh: 180,\n\t\t\twidth: 480,\n\t\t\tpadding: 20,\n\t\t\tcontentColor: 'white',\n\t\t\toverlay: true,\n\t\t\tcloseByEsc: true,\n\t\t\tcloseIcon: true,\n\t\t\tbuttons: [\n\t\t\t\tnew Button({\n\t\t\t\t\tid: 'sign__b2e-close-onboarding-signing-banner-warning-popup-confirm-button',\n\t\t\t\t\ttext: Loc.getMessage('SIGN_ONBOARDING_B2E_CLOSE_BANNER_WARNING_POPUP_CONFIRM_BUTTON'),\n\t\t\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\tconst banner = document.querySelector('.sign__b2e-onboarding-signing-test-banner');\n\t\t\t\t\t\t\tif (banner)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tbanner.remove();\n\t\t\t\t\t\t\t\tthis.#api.hideOnboardingSigningBanner();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tnew Button({\n\t\t\t\t\tid: 'sign__b2e-close-onboarding-signing-banner-warning-popup-cancel-button',\n\t\t\t\t\ttext: Loc.getMessage('SIGN_ONBOARDING_B2E_CLOSE_BANNER_WARNING_POPUP_CANCEL_BUTTON'),\n\t\t\t\t\tcolor: Button.Color.LINK,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t\tpopup.show();\n\t}\n\n\t#getB2eWelcomeGuide(tourId: string, options: OnboardingOptions, onFinish: ?Function): Guide\n\t{\n\t\treturn new Guide({\n\t\t\tid: tourId,\n\t\t\tautoSave: true,\n\t\t\tsimpleMode: false,\n\t\t\tevents: {\n\t\t\t\tonFinish,\n\t\t\t},\n\t\t\tsteps: [\n\t\t\t\tthis.#createB2eNewDocumentButtonStep('.ui-toolbar-after-title-buttons > .sign-b2e-onboarding-create', options.region),\n\t\t\t\t...(options.byEmployeeEnabled ? [this.#createB2eKanbanRouteStep('.ui-toolbar-after-title-buttons > .sign-b2e-onboarding-route')] : []),\n\t\t\t\tthis.#createB2eTemplatesStep(\n\t\t\t\t\tthis.#isTemplateBtnVisible()\n\t\t\t\t\t\t? 'div#sign_sign_b2e_employee_template_list'\n\t\t\t\t\t\t: 'div#sign_more_button',\n\t\t\t\t),\n\t\t\t],\n\t\t});\n\t}\n\n\tgetB2bGuide(target: string | HTMLElement): Guide\n\t{\n\t\treturn new Guide({\n\t\t\tid: 'sign-tour-guide-sign-start-kanban',\n\t\t\tautoSave: true,\n\t\t\tsimpleMode: true,\n\t\t\tsteps: [\n\t\t\t\t{\n\t\t\t\t\ttarget,\n\t\t\t\t\ttitle: Loc.getMessage('SIGN_ONBOARDING_B2B_BTN_TITLE'),\n\t\t\t\t\ttext: Loc.getMessage('SIGN_ONBOARDING_B2B_BTN_TEXT'),\n\t\t\t\t\tarticle: b2bHelpdeskCode,\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\n\t#createB2eWelcomePopupWithTestSigning(guide: Guide, options: OnboardingOptions): Popup\n\t{\n\t\tconst popupTitle = Loc.getMessage('SIGN_ONBOARDING_B2E_WELCOME_POPUP_TITLE');\n\t\tconst buttons = [];\n\n\t\tif (options.canEditDocument && options.canCreateDocument)\n\t\t{\n\t\t\tbuttons.push(new Button({\n\t\t\t\tid: 'sign__b2e-onboarding-welcome-popup_sign__onboarding-signing-popup-button',\n\t\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\t\tsize: Button.Size.MEDIUM,\n\t\t\t\tround: true,\n\t\t\t\tnoCaps: true,\n\t\t\t\tuseAirDesign: true,\n\t\t\t\tstyle: Button.AirStyle.FILL,\n\t\t\t\ttext: Loc.getMessage('SIGN_ONBOARDING_B2E_WELCOME_POPUP_BTN_SIGN_TEST_TEXT'),\n\t\t\t\tclassName: `sign__b2e-onboarding-welcome-popup_sign__onboarding-popup-button ${options.showTariffSlider ? 'sign-b2e-js-tarriff-slider-trigger' : ''}`,\n\t\t\t\tevents: options.showTariffSlider ? {} : {\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\tthis.#openSigningSlider(options);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}));\n\t\t}\n\n\t\tbuttons.push(new Button({\n\t\t\tid: 'sign__b2e-onboarding-welcome-popup_sign__onboarding-tour-popup-button',\n\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\tsize: Button.Size.MEDIUM,\n\t\t\tround: true,\n\t\t\tnoCaps: true,\n\t\t\tuseAirDesign: true,\n\t\t\tstyle: Button.AirStyle.OUTLINE,\n\t\t\ttext: Loc.getMessage('SIGN_ONBOARDING_B2E_WELCOME_POPUP_BTN_TEXT_RU'),\n\t\t\tclassName: 'sign__b2e-onboarding-welcome-popup_sign__onboarding-popup-button',\n\t\t\tevents: {\n\t\t\t\tclick() {\n\t\t\t\t\tpopup.close();\n\t\t\t\t\tguide.start();\n\t\t\t\t},\n\t\t\t},\n\t\t}));\n\n\t\tconst popup = new Popup({\n\t\t\tid: 'sign__b2e-onboarding-welcome-popup',\n\t\t\tclassName: 'sign__b2e-onboarding-welcome-popup',\n\t\t\tcloseIcon: true,\n\t\t\twidth: 690,\n\t\t\theight: 322,\n\t\t\tpadding: 20,\n\t\t\toverlay: true,\n\t\t\tbuttons,\n\t\t\tcontent: Tag.render`\n\t\t\t\t<div class=\"sign__onboarding-popup-content\">\n\t\t\t\t\t<div class=\"sign__onboarding-popup-content_header\">\n\t\t\t\t\t\t<div class=\"sign__onboarding-popup-content_header-title\">\n\t\t\t\t\t\t\t${popupTitle}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"sign__onboarding-popup-content_body\">\n\t\t\t\t\t\t<div class=\"sign__onboarding-popup-content_img\"></div>\n\t\t\t\t\t\t<div class=\"sign__onboarding-popup-content_text_container\">\n\t\t\t\t\t\t\t<div class=\"sign__onboarding-popup-content_text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SIGN_ONBOARDING_B2E_WELCOME_POPUP_TEXT')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t});\n\n\t\treturn popup;\n\t}\n\n\t#createB2eWelcomePopup(guide: Guide): Popup\n\t{\n\t\tconst popupTitle = Loc.getMessage('SIGN_ONBOARDING_B2E_WELCOME_POPUP_TITLE_WEST');\n\t\tconst popup = new Popup({\n\t\t\tclassName: 'sign__b2e-onboarding-welcome-popup',\n\t\t\tcloseIcon: false,\n\t\t\twidth: 500,\n\t\t\theight: 517,\n\t\t\tpadding: 20,\n\t\t\tbuttons: [\n\t\t\t\tnew Button({\n\t\t\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\t\t\tsize: Button.Size.SMALL,\n\t\t\t\t\tround: true,\n\t\t\t\t\tnoCaps: true,\n\t\t\t\t\ttext: Loc.getMessage('SIGN_ONBOARDING_B2E_WELCOME_POPUP_BTN_TEXT'),\n\t\t\t\t\tclassName: 'sign__b2e-onboarding-welcome-popup_start-guide',\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\tguide.start();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t\tcontent: Tag.render`\n\t\t\t\t<div class=\"sign__onboarding-popup-content\">\n\t\t\t\t\t<div class=\"sign__onboarding-popup-content_header\">\n\t\t\t\t\t\t<div class=\"sign__onboarding-popup-content_header-icon\">\n\t\t\t\t\t\t\t${this.#renderIcon()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"sign__onboarding-popup-content_header-title\">\n\t\t\t\t\t\t\t${popupTitle}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"sign__onboarding-popup-content_promo-video-wrapper\">\n\t\t\t\t\t\t<img src=\"${b2eWelcomeGif}\" alt=\"video\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"sign__onboarding-popup-content_footer\">\n\t\t\t\t\t\t${Loc.getMessage('SIGN_ONBOARDING_B2E_WELCOME_POPUP_TEXT')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t});\n\n\t\treturn popup;\n\t}\n\n\t#renderIcon(): HTMLElement\n\t{\n\t\tconst color = getComputedStyle(document.body).getPropertyValue('--ui-color-on-primary');\n\n\t\tconst icon = new Icon({\n\t\t\tcolor,\n\t\t\tsize: 18,\n\t\t\ticon: ActionsIconSet.PENCIL_DRAW,\n\t\t});\n\n\t\treturn icon.render();\n\t}\n\n\t#openSigningSlider(options: OnboardingOptions): void\n\t{\n\t\tBX.SidePanel.Instance.open('onboarding-signing-slider', {\n\t\t\twidth: 750,\n\t\t\tcontentCallback: () => {\n\t\t\t\tconst containerId = 'onboarding-signing-slider-container';\n\t\t\t\tconst container = Tag.render`<div id=\"${containerId}\"></div>`;\n\t\t\t\tconst onboardingSignSettings = new B2EOnboardingSignSettings(containerId, Boolean(options.hasCompanies));\n\t\t\t\tonboardingSignSettings.renderToContainer(container);\n\n\t\t\t\treturn container;\n\t\t\t},\n\t\t});\n\t}\n\n\t#createB2eNewDocumentButtonStep(target: string | HTMLElement, region: string): StepOption\n\t{\n\t\tconst firstStepMsgTitle = region === 'ru'\n\t\t\t? Loc.getMessage('SIGN_ONBOARDING_B2E_STEP_CREATE_TITLE_RU')\n\t\t\t: Loc.getMessage('SIGN_ONBOARDING_B2E_STEP_CREATE_TITLE')\n\t\t;\n\n\t\tconst firstStepMsgText = region === 'ru'\n\t\t\t? Loc.getMessage('SIGN_ONBOARDING_B2E_STEP_CREATE_TEXT_RU')\n\t\t\t: Loc.getMessage('SIGN_ONBOARDING_B2E_STEP_CREATE_TEXT')\n\t\t;\n\n\t\treturn {\n\t\t\ttarget,\n\t\t\ttitle: firstStepMsgTitle,\n\t\t\ttext: firstStepMsgText,\n\t\t\tarticle: b2eCreateHelpdeskCode,\n\t\t};\n\t}\n\n\t#createB2eTemplatesStep(target: string | HTMLElement): StepOption\n\t{\n\t\treturn {\n\t\t\ttarget,\n\t\t\ttitle: Loc.getMessage('SIGN_ONBOARDING_B2E_STEP_TEMPLATES_TITLE_V1'),\n\t\t\ttext: Loc.getMessage('SIGN_ONBOARDING_B2E_STEP_TEMPLATES_TEXT_V1'),\n\t\t\tarticle: b2eTemplatesHelpdeskCode,\n\t\t};\n\t}\n\n\t#createB2eKanbanRouteStep(target: string | HTMLElement): StepOption\n\t{\n\t\treturn {\n\t\t\ttarget,\n\t\t\ttitle: Loc.getMessage('SIGN_ONBOARDING_B2E_STEP_ROUTE_TITLE'),\n\t\t\ttext: Loc.getMessage('SIGN_ONBOARDING_B2E_STEP_ROUTE_TEXT'),\n\t\t};\n\t}\n\n\tasync #shouldStartB2eOnboarding(tourId: string, checkDocuments: boolean = false): Promise<boolean>\n\t{\n\t\tconst { lastVisitDate } = await this.#backend.getLastVisitDate(tourId);\n\n\t\tif (Type.isNull(lastVisitDate) && checkDocuments)\n\t\t{\n\t\t\tconst { hasSignedDocuments } = await this.#api.hasSignedDocuments();\n\n\t\t\tif (hasSignedDocuments)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn Type.isNull(lastVisitDate);\n\t}\n\n\t#isTemplateBtnVisible(): boolean\n\t{\n\t\treturn document.querySelector('div#sign_sign_b2e_employee_template_list')?.offsetParent !== null;\n\t}\n}\n"],"names":["b2bHelpdeskCode","b2eCreateHelpdeskCode","b2eTemplatesHelpdeskCode","b2eWelcomeTourId","b2eTestSigningWelcomeTourId","Onboarding","Api","Backend","startB2eWelcomeOnboarding","options","tourId","startOnboarding","BannerDispatcher","high","toQueue","onDone","guide","welcomePopup","saveVisit","show","startB2eWelcomeOnboardingWithTestSigning","showTestSigningBanner","header","document","querySelector","signButton","Button","color","Color","PRIMARY","size","Size","MEDIUM","round","noCaps","useAirDesign","style","AirStyle","FILL","text","Loc","getMessage","className","showTariffSlider","events","click","onboardingBanner","Tag","render","Dom","append","insertAdjacentElement","getB2bGuide","target","Guide","id","autoSave","simpleMode","steps","title","article","popupContent","popup","Popup","content","minHeigh","width","padding","contentColor","overlay","closeByEsc","closeIcon","buttons","close","banner","remove","hideOnboardingSigningBanner","LINK","onFinish","region","byEmployeeEnabled","popupTitle","canEditDocument","canCreateDocument","push","OUTLINE","start","height","SMALL","b2eWelcomeGif","getComputedStyle","body","getPropertyValue","icon","Icon","ActionsIconSet","PENCIL_DRAW","BX","SidePanel","Instance","open","contentCallback","containerId","container","onboardingSignSettings","B2EOnboardingSignSettings","Boolean","hasCompanies","renderToContainer","firstStepMsgTitle","firstStepMsgText","checkDocuments","lastVisitDate","getLastVisitDate","Type","isNull","hasSignedDocuments","offsetParent"],"mappings":"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"}