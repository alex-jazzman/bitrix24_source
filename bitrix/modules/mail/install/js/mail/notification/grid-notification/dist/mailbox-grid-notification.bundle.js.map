{"version":3,"file":"mailbox-grid-notification.bundle.js","sources":["../src/mailbox-grid-notification.js"],"sourcesContent":["import { Type, Dom, Event } from 'main.core';\nimport { BannerDispatcher } from 'ui.banner-dispatcher';\nimport { Popup, PopupManager } from 'main.popup';\nimport './style.css';\n\nexport type NotificationOptions = {\n\ttitle: ?string;\n\tdescription: ?string;\n\ttype: number;\n}\n\nexport class MailboxGridNotification\n{\n\t#popup: Popup = null;\n\t#options: NotificationOptions = null;\n\tmailboxGridButton: ?Element = null;\n\n\tconstructor(options: NotificationOptions)\n\t{\n\t\tif (Type.isObject(options))\n\t\t{\n\t\t\tthis.#options = options;\n\t\t}\n\n\t\tthis.mailboxGridButton = document.querySelector('[data-id=\"mailboxGridButton\"]');\n\t}\n\n\tcreateNotificationBalloon(onDone: Function): BX.UI.Notification.Balloon\n\t{\n\t\treturn PopupManager.create({\n\t\t\tid: 'push-mailbox-grid',\n\t\t\tclassName: 'popup-window-dark',\n\t\t\tbackground: 'rgb(8, 93, 193)',\n\t\t\tcloseIcon: true,\n\t\t\tautoHide: false,\n\t\t\tcloseByEsc: true,\n\t\t\tpadding: 12,\n\t\t\tborderRadius: 20,\n\t\t\tcontentPadding: 0,\n\t\t\toffsetTop: 10,\n\t\t\toffsetLeft: -78,\n\t\t\tangle: {\n\t\t\t\toffset: 205,\n\t\t\t\tposition: 'top',\n\t\t\t},\n\t\t\tbindElement: this.mailboxGridButton,\n\t\t\tbindOptions: {\n\t\t\t\tforceBindPosition: false,\n\t\t\t},\n\t\t\twidth: 372,\n\t\t\tminHeight: 120,\n\t\t\tcontent: this.getContent(),\n\t\t\tevents: {\n\t\t\t\tonClose: () => {\n\t\t\t\t\tonDone();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\tgetContent(): HTMLElement\n\t{\n\t\tconst title = this.#options?.title;\n\t\tconst description = this.#options?.description;\n\n\t\treturn Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: 'mail-notification-container',\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tDom.create('div', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'mail-notification-container__image-wrapper',\n\t\t\t\t\t},\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tthis.#renderImage(),\n\t\t\t\t\t],\n\t\t\t\t}),\n\t\t\t\tDom.create('div', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'mail-notification-content',\n\t\t\t\t\t},\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tthis.#getMessageContainer(title, description),\n\t\t\t\t\t],\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t}\n\n\t#renderImage(): HTMLElement\n\t{\n\t\treturn Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: 'mail-notification-container__image',\n\t\t\t},\n\t\t});\n\t}\n\n\t#getMessageContainer(title: ?string, description: ?string): HTMLElement\n\t{\n\t\tconst children = [];\n\n\t\tif (title)\n\t\t{\n\t\t\tchildren.push(Dom.create('h4', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'mail-notification-content__title',\n\t\t\t\t},\n\t\t\t\thtml: title,\n\t\t\t}));\n\t\t}\n\n\t\tif (description)\n\t\t{\n\t\t\tchildren.push(Dom.create('span', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'mail-notification-content__description',\n\t\t\t\t},\n\t\t\t\thtml: description,\n\t\t\t}));\n\t\t}\n\n\t\treturn Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: 'mail-notification-content-wrapper',\n\t\t\t},\n\t\t\tchildren,\n\t\t});\n\t}\n\n\tshow(): void\n\t{\n\t\tif (!this.mailboxGridButton)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBannerDispatcher.critical.toQueue((onDone) => {\n\t\t\tthis.#popup = this.createNotificationBalloon(onDone);\n\t\t\tthis.#popup.show();\n\t\t\tthis.#popup.zIndexComponent.setZIndex(400);\n\n\t\t\tBX.userOptions.save('mail.tour', 'mailbox_grid_hint_shown', null, 'Y');\n\n\t\t\tEvent.bind(this.mailboxGridButton, 'click', () => {\n\t\t\t\tthis.#popup?.close();\n\t\t\t});\n\t\t});\n\t}\n}\n"],"names":["MailboxGridNotification","options","babelHelpers","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","writable","value","Type","isObject","this","mailboxGridButton","document","querySelector","key","onDone","PopupManager","create","id","className","background","closeIcon","autoHide","closeByEsc","padding","borderRadius","contentPadding","offsetTop","offsetLeft","angle","offset","position","bindElement","bindOptions","forceBindPosition","width","minHeight","content","getContent","events","onClose","title","_babelHelpers$classPr","description","_babelHelpers$classPr2","Dom","props","children","BannerDispatcher","critical","toQueue","createNotificationBalloon","show","zIndexComponent","setZIndex","BX","userOptions","save","Event","bind","_babelHelpers$classPr3","close","push","html"],"mappings":"uVAGqB,gEAQRA,aAMZ,WAAYC,GACZC,oCAAAC,UAAAA,UAAAC,UAAAC,YAAAC,MALgB,OAAIF,UAAAC,YAAAC,MACY,OAAIJ,qDACN,MAIzBK,OAAKC,SAASP,IAEjBC,yCAAgBD,GAGjBQ,KAAKC,kBAAoBC,SAASC,cAAc,iCA6HhD,OA5HAV,6BAAAW,gCAAAP,eAEyBQ,GAEzB,OAAOC,eAAaC,OAAO,CAC1BC,GAAI,oBACJC,UAAW,oBACXC,WAAY,kBACZC,WAAW,EACXC,UAAU,EACVC,YAAY,EACZC,QAAS,GACTC,aAAc,GACdC,eAAgB,EAChBC,UAAW,GACXC,YAAa,GACbC,MAAO,CACNC,OAAQ,IACRC,SAAU,OAEXC,YAAatB,KAAKC,kBAClBsB,YAAa,CACZC,mBAAmB,GAEpBC,MAAO,IACPC,UAAW,IACXC,QAAS3B,KAAK4B,aACdC,OAAQ,CACPC,QAAS,KACRzB,WAIHD,iBAAAP,iBAGD,QACC,MAAMkC,8CAAQ/B,4BAAAgC,EAAeD,MACvBE,8CAAcjC,4BAAAkC,EAAeD,YAEnC,OAAOE,MAAI5B,OAAO,MAAO,CACxB6B,MAAO,CACN3B,UAAW,+BAEZ4B,SAAU,CACTF,MAAI5B,OAAO,MAAO,CACjB6B,MAAO,CACN3B,UAAW,8CAEZ4B,SAAU,GACTrC,eAAAA,SAGFmC,MAAI5B,OAAO,MAAO,CACjB6B,MAAO,CACN3B,UAAW,6BAEZ4B,SAAU,GACTrC,eAAAA,KAA0B+B,EAAOE,YAKrC7B,WAAAP,iBA6CKG,KAAKC,mBAKVqC,mBAAiBC,SAASC,QAASnC,IAClCZ,yCAAcO,KAAKyC,0BAA0BpC,IAC7CZ,0CAAYiD,OACZjD,0CAAYkD,gBAAgBC,UAAU,KAEtCC,GAAGC,YAAYC,KAAK,YAAa,0BAA2B,KAAM,KAElEC,QAAMC,KAAKjD,KAAKC,kBAAmB,QAAS,KAAM,wEACjDiD,EAAaC,qBAIhB,aA1DC,OAAOhB,MAAI5B,OAAO,MAAO,CACxB6B,MAAO,CACN3B,UAAW,wCAGb,WAEoBsB,EAAgBE,GAEpC,MAAMI,EAAW,GAsBjB,OApBIN,GAEHM,EAASe,KAAKjB,MAAI5B,OAAO,KAAM,CAC9B6B,MAAO,CACN3B,UAAW,oCAEZ4C,KAAMtB,KAIJE,GAEHI,EAASe,KAAKjB,MAAI5B,OAAO,OAAQ,CAChC6B,MAAO,CACN3B,UAAW,0CAEZ4C,KAAMpB,KAIDE,MAAI5B,OAAO,MAAO,CACxB6B,MAAO,CACN3B,UAAW,qCAEZ4B,SAAAA"}