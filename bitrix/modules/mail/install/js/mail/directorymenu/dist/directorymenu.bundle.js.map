{"version":3,"file":"directorymenu.bundle.js","sources":["../src/item.js","../src/directorymenu.js"],"sourcesContent":["import { Tag } from 'main.core';\n\nexport class Item\n{\n\t#count = 0;\n\t#nameOriginal = '';\n\t#name = '';\n\t#counterElement: null;\n\t#itemElement: null;\n\t#isActive: false;\n\t#path : '';\n\t#shiftWidthInPixels = 10;\n\t#zeroLevelShiftWidth = 29;\n\n\tsetCount(number)\n\t{\n\t\tthis.#count = number;\n\t\tthis.#counterElement.textContent = number;\n\n\t\tif (number === 0)\n\t\t{\n\t\t\tthis.#counterElement.classList.add('ui-sidepanel-menu-link-text-counter-hidden');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#counterElement.classList.remove('ui-sidepanel-menu-link-text-counter-hidden');\n\t\t}\n\t}\n\n\tgetCount()\n\t{\n\t\treturn Number(this.#count);\n\t}\n\n\tdisableActivity()\n\t{\n\t\tthis.#isActive = false;\n\t\tthis.#itemElement.classList.remove('ui-sidepanel-menu-active');\n\t}\n\n\tgetPath()\n\t{\n\t\treturn this.#path;\n\t}\n\n\tenableActivity()\n\t{\n\t\tthis.#isActive = true;\n\t\tthis.#itemElement.classList.add('ui-sidepanel-menu-active');\n\t}\n\n\tisActive()\n\t{\n\t\treturn this.#isActive;\n\t}\n\n\t/**\n\t * So as not to break the menu with incorrectly synchronized directories.\n\t *\n\t * @param directory (directory structure).\n\t * @returns {boolean}\n\t */\n\tstatic checkProperties(directory) {\n\t\tif(directory['path'] === undefined || directory['name'] === undefined || directory['name'] === undefined)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tconstructor(directory, menu, nestingLevel = 0, systemDirs)\n\t{\n\t\tthis.#path = directory['path'];\n\n\t\tlet iconClass = 'default';\n\t\tif(systemDirs['inbox'] === this.#path)\n\t\t{\n\t\t\ticonClass = 'inbox';\n\t\t}\n\t\telse if(systemDirs['spam'] === this.#path)\n\t\t{\n\t\t\ticonClass = 'spam';\n\t\t}\n\t\telse if(systemDirs['outcome'] === this.#path)\n\t\t{\n\t\t\ticonClass = 'outcome';\n\t\t}\n\t\telse if(systemDirs['trash'] === this.#path)\n\t\t{\n\t\t\ticonClass = 'trash';\n\t\t}\n\t\telse if(systemDirs['drafts'] === this.#path)\n\t\t{\n\t\t\ticonClass = 'drafts';\n\t\t}\n\n\t\tthis.#nameOriginal = directory['name'];\n\n\t\tthis.#name = this.#nameOriginal.charAt(0).toUpperCase() + this.#nameOriginal.slice(1);\n\n\t\tconst itemContainer = Tag.render`<div title=\"${this.#name}\" class=\"mail-menu-directory-item-container\"></div>`;\n\t\tconst itemElement = Tag.render`<li class=\"ui-sidepanel-menu-item ui-sidepanel-menu-counter-white mail-menu-directory-item-${iconClass}\">\n\t\t\t\t<a style=\"padding-left: ${this.#zeroLevelShiftWidth + (this.#shiftWidthInPixels*nestingLevel)}px\" class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t<span class=\"ui-sidepanel-menu-link-text-item\">${this.#name}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span class=\"ui-sidepanel-menu-link-text-counter\">${directory['count']}</span>\n\t\t\t\t</a>\n\t\t\t</li>`;\n\t\titemContainer.append(itemElement);\n\n\t\titemElement.onclick = ()=>\n\t\t{\n\t\t\tif(!itemContainer.isActive())\n\t\t\t{\n\t\t\t\tmenu.chooseFunction(directory['path']);\n\t\t\t\titemContainer.enableActivity();\n\t\t\t}\n\t\t}\n\n\t\tconst counterElement = itemElement.querySelector(\".ui-sidepanel-menu-link-text-counter\");\n\n\t\tthis.#counterElement = counterElement;\n\t\tthis.#itemElement = itemElement;\n\n\t\titemContainer.getCount = () => this.getCount();\n\t\titemContainer.setCount = number => this.setCount(number);\n\t\titemContainer.enableActivity = () => this.enableActivity();\n\t\titemContainer.disableActivity = () => this.disableActivity();\n\t\titemContainer.isActive = () => this.isActive();\n\t\titemContainer.setIconClass = name => this.setIconClass(name);\n\n\t\tthis.setCount(directory['count']);\n\n\t\tfor(let i=0; i<directory['items'].length; i++)\n\t\t{\n\t\t\tif(!Item.checkProperties(directory['items'][i]))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst subdirectory = new Item(directory['items'][i],menu,nestingLevel+1,systemDirs);\n\t\t\titemContainer.append(subdirectory);\n\t\t}\n\n\t\tmenu.includeItem(itemContainer, this.#path);\n\n\t\treturn itemContainer;\n\t}\n}","import { Tag } from 'main.core';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\nimport { Item } from './item.js';\n\nimport 'ui.design-tokens';\nimport 'ui.fonts.opensans';\nimport './css/ui-wrappermenu.css';\nimport './css/style.css';\n\n\nexport class DirectoryMenu\n{\n\t#activeDir = '';\n\t#menu = Tag.render`<ul class=\"ui-mail-left-directory-menu\"></ul>`;\n\t#directoryCounters = new Map();\n\t#items = new Map();\n\t#systemDirs = [];\n\n\tgetActiveDir()\n\t{\n\t\treturn this.#activeDir;\n\t}\n\n\tsetActiveDir(path)\n\t{\n\t\tthis.#activeDir = path;\n\t}\n\n\tclearActiveMenuButtons()\n\t{\n\t\tfor (let item of this.#items.values())\n\t\t{\n\t\t\titem.disableActivity();\n\t\t}\n\t}\n\n\trebuildMenu(dirsWithUnseenMailCounters)\n\t{\n\t\tthis.#directoryCounters = dirsWithUnseenMailCounters;\n\t\tthis.cleanItems();\n\t\tthis.buildMenu();\n\t\tthis.setDirectory(this.getActiveDir());\n\t}\n\n\tcleanItems()\n\t{\n\t\tfor (let item of this.#items.values())\n\t\t{\n\t\t\tthis.#menu.removeChild(item);\n\t\t}\n\t\tthis.#items.clear();\n\t}\n\n\tincludeItem(domItem, directoryPath)\n\t{\n\t\tthis.#items.set(directoryPath, domItem);\n\t\tthis.#menu.append(domItem);\n\t}\n\n\tchooseFunction(path)\n\t{\n\t\tthis.clearActiveMenuButtons();\n\t\tthis.setActiveDir(path);\n\t\tthis.setFilterDir(path);\n\t}\n\n\tbuildMenu(firstBuild = false)\n\t{\n\t\tfor (let i = 0; i < this.#directoryCounters.length; i++)\n\t\t{\n\t\t\tconst directory = this.#directoryCounters[i];\n\t\t\tconst path = directory['path'];\n\t\t\tif(!Item.checkProperties(directory))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(this.#systemDirs['inbox'] === path && firstBuild)\n\t\t\t{\n\t\t\t\tBX.Mail.Home.FilterToolbar.setCount(directory['count']);\n\t\t\t}\n\n\t\t\tnew Item(directory,this,0,this.#systemDirs);\n\t\t}\n\t}\n\n\tsetFilterDir(name)\n\t{\n\t\tconst event = new BaseEvent({ data: { directory: name } });\n\t\tEventEmitter.emit('BX.DirectoryMenu:onChangeFilter', event);\n\n\t\tname = BX.Mail.Home.Counters.getShortcut(name);\n\n\t\tconst filter = this.filter;\n\t\tif (!!filter && (filter instanceof BX.Main.Filter))\n\t\t{\n\t\t\tconst FilterApi = filter.getApi();\n\t\t\tFilterApi.setFields({\n\t\t\t\t'DIR': name,\n\t\t\t});\n\t\t\tFilterApi.apply();\n\t\t}\n\t}\n\n\tchangeCounter(dirPath, number, mode)\n\t{\n\t\tconst item = this.#items.get(dirPath);\n\n\t\tif(item === undefined) return;\n\n\t\tif (mode !== 'set')\n\t\t{\n\t\t\titem.setCount(item.getCount() + Number(number));\n\t\t}\n\t\telse\n\t\t{\n\t\t\titem.setCount(Number(number));\n\t\t}\n\t}\n\n\tsetCounters(counters)\n\t{\n\t\tfor (let path in counters)\n\t\t{\n\t\t\tif (counters.hasOwnProperty(path))\n\t\t\t{\n\t\t\t\tthis.changeCounter(path, counters[path], 'set');\n\t\t\t}\n\t\t}\n\t}\n\n\tsetDirectory(path)\n\t{\n\t\tthis.clearActiveMenuButtons();\n\t\tif(path === undefined) return;\n\t\tconst item = this.#items.get(path);\n\t\tif(item)\n\t\t{\n\t\t\tthis.setActiveDir(path)\n\t\t\titem.enableActivity();\n\t\t}\n\t}\n\n\tconstructor(config = {\n\t\tdirsWithUnseenMailCounters: {},\n\t\tfilterId: '',\n\t\tsystemDirs :\n\t\t{\n\t\t\tspam: 'Spam',\n\t\t\ttrash: 'Trash',\n\t\t\toutcome: 'Outcome',\n\t\t\tdrafts: 'Drafts',\n\t\t\tinbox: 'Inbox',\n\t\t}\n\t})\n\t{\n\t\tthis.filter = BX.Main.filterManager.getById(config['filterId']);\n\t\tthis.#systemDirs = config['systemDirs'];\n\n\t\tEventEmitter.subscribe('BX.Main.Filter:apply', (event) => {\n\n\t\t\tlet dir = BX.Mail.Home.Counters.getDirPath(this.filter.getFilterFieldsValues()['DIR']);\n\n\t\t\tEventEmitter.emit('BX.DirectoryMenu:onChangeFilter', new BaseEvent({ data: { directory: dir } }));\n\t\t\tthis.setDirectory(dir)\n\t\t});\n\n\t\tthis.#directoryCounters = config['dirsWithUnseenMailCounters'];\n\n\t\tthis.buildMenu(true);\n\t}\n\n\tgetNode()\n\t{\n\t\treturn this.#menu;\n\t}\n}"],"names":["Item","number","textContent","classList","add","remove","Number","directory","undefined","menu","nestingLevel","systemDirs","iconClass","charAt","toUpperCase","slice","itemContainer","Tag","render","itemElement","append","onclick","isActive","chooseFunction","enableActivity","counterElement","querySelector","getCount","setCount","disableActivity","setIconClass","name","i","length","checkProperties","subdirectory","includeItem","DirectoryMenu","path","values","item","dirsWithUnseenMailCounters","cleanItems","buildMenu","setDirectory","getActiveDir","removeChild","clear","domItem","directoryPath","set","clearActiveMenuButtons","setActiveDir","setFilterDir","firstBuild","BX","Mail","Home","FilterToolbar","event","BaseEvent","data","EventEmitter","emit","Counters","getShortcut","filter","Main","Filter","FilterApi","getApi","setFields","apply","dirPath","mode","get","counters","hasOwnProperty","changeCounter","config","filterId","spam","trash","outcome","drafts","inbox","_classPrivateFieldInitSpec","Map","filterManager","getById","subscribe","dir","getDirPath","getFilterFieldsValues"],"mappings":"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"}