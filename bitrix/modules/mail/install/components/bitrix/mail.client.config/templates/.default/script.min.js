BX.namespace("BX.MailClientConfig");BX.MailClientConfig.Edit={isForbiddenToShare:false,smtp:{switcherChecked:false,switcherDisabled:false},crm:{integrationAvailable:false,switcherChecked:false},isCrmIntegrationAvailable:false,isCrmSwitcherChecked:false,init:function(e){if(BX.type.isNotEmptyObject(e)){this.isForbiddenToShare=e.isForbiddenToShare||false;this.smtp.switcherChecked=e.isSmtpSwitcherChecked||false;this.smtp.switcherDisabled=e.isSmtpSwitcherDisabled||false;this.crm.switcherChecked=e.isCrmSwitcherChecked||false;this.crm.integrationAvailable=e.isCrmIntegrationAvailable||false}var i=BX.findChildrenByClassName(document,"mail-set-singleselect",true);for(var t in i){if(!i.hasOwnProperty(t)){continue}this.singleselect(i[t])}BX.bind(BX("mail_connect_mb_crm_new_lead_for_link"),"click",(function(e){var i=BX("mail_connect_mb_crm_new_lead_for");var t=i.offsetHeight>0;i.style.display=t?"none":"";BX[t?"removeClass":"addClass"](this,"mail-set-textarea-show-open")}));this.setSmtpSwitcher();this.setCrmSwitcher()},singleselect:function(e){var i=BX.findChildren(e,{tag:"input",attr:{type:"radio"}},true);for(var t in i){if(!i.hasOwnProperty(t)){continue}BX.bind(i[t],"change",(function(){if(this.checked){if(this.value==0){var i=BX(e.getAttribute("data-checked"));if(i){var t=BX.findNextSibling(this,{tag:"label",attr:{for:this.id}});var s=BX.findNextSibling(i,{tag:"label",attr:{for:i.id}});if(t&&s)BX.adjust(t,{text:s.innerHTML})}}else{e.setAttribute("data-checked",this.id)}}}))}BX.bind(e,"click",(function(i){i=i||window.event;i.skip_singleselect=e}));BX.bind(document,"click",(function(i){i=i||window.event;if(i.skip_singleselect!==e){BX(e.getAttribute("data-checked")).checked=true}}))},beforeOpenDialog:function(){return new Promise((function(e,i){if(BX.MailClientConfig.Edit.isForbiddenToShare){BX.MailClientConfig.Edit.alertForbiddenToShare();return i()}return e()}))},alertForbiddenToShare:function(){B24.licenseInfoPopup.show("mail-shared-mailbox-limit",BX.message("MAIL_MAILBOX_LICENSE_SHARED_LIMIT_TITLE"),BX.message("MAIL_MAILBOX_LICENSE_SHARED_LIMIT_BODY"))},setBlockSwitcher(e,i,t,s,n=false){const c=BX(e);const l=BX(t);if(!c||!l){return}const a=l.querySelector(".mail-connect-form-items");const r=l.querySelector(".mail-connect-title-block");if(!a||!r){return}const o=()=>{BX.Dom.hide(a);BX.Dom.addClass(r,"mail-connect-title-hidden-block");BX.Dom.removeClass(l,"mail-connect-section-block")};const h=()=>{BX.Dom.show(a);BX.Dom.removeClass(r,"mail-connect-title-hidden-block");BX.Dom.addClass(l,"mail-connect-section-block")};const d=BX(i);const m=new BX.UI.Switcher({node:c,checked:s,size:"small",disabled:n??false,handlers:{toggled:()=>{if(m.checked===true){h()}else{o()}if(d){d.click()}}}});if(!s){o()}},setSmtpSwitcher(){this.setBlockSwitcher("mail-connect-smtp-settings-title","mail_connect_mb_server_smtp_switch","mail-connect-section-smtp-block",this.smtp.switcherChecked,this.smtp.switcherDisabled)},setCrmSwitcher(){if(!this.crm.integrationAvailable){return}this.setBlockSwitcher("mail-connect-crm-settings-title","mail_connect_mb_crm_switch","mail-connect-section-crm-block",this.crm.switcherChecked)}};
//# sourceMappingURL=script.map.js