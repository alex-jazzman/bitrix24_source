this.BX=this.BX||{},function(e,s,a,t,l,i,r,o,n){"use strict";r=r&&r.hasOwnProperty("default")?r.default:r;let c,b=e=>e;var d=babelHelpers.classPrivateFieldLooseKey("options"),p=babelHelpers.classPrivateFieldLooseKey("content"),v=babelHelpers.classPrivateFieldLooseKey("departmentIds"),P=babelHelpers.classPrivateFieldLooseKey("parent"),h=babelHelpers.classPrivateFieldLooseKey("renderBlock"),u=babelHelpers.classPrivateFieldLooseKey("getAvatar");class L{constructor(e,s,a){Object.defineProperty(this,u,{value:H}),Object.defineProperty(this,h,{value:F}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,P,{writable:!0,value:void 0}),babelHelpers.classPrivateFieldLooseBase(this,d)[d]=e,babelHelpers.classPrivateFieldLooseBase(this,v)[v]=s,babelHelpers.classPrivateFieldLooseBase(this,P)[P]=a}send(){const e=Date.now(),s={departmentId:babelHelpers.classPrivateFieldLooseBase(this,v)[v],isEmail:"N"};BX.ajax.runComponentAction(babelHelpers.classPrivateFieldLooseBase(this,d)[d].componentName,"moveToIntranet",{signedParameters:babelHelpers.classPrivateFieldLooseBase(this,d)[d].signedParameters,mode:"ajax",data:s}).then(s=>{const a=Date.now()-e,t=0;a<=2500&&(t=2500-a),setTimeout(()=>{babelHelpers.classPrivateFieldLooseBase(this,P)[P].emit("changestate",{success:!0,response:s})},t)},e=>{babelHelpers.classPrivateFieldLooseBase(this,P)[P].emit("changestate",{success:!1,response:e})})}render(){return babelHelpers.classPrivateFieldLooseBase(this,p)[p]||(babelHelpers.classPrivateFieldLooseBase(this,p)[p]=babelHelpers.classPrivateFieldLooseBase(this,h)[h]()),babelHelpers.classPrivateFieldLooseBase(this,p)[p]}}function F(){return l.Tag.render(c||(c=b`
			<div class="transfer-processing">
				<div class="transfer-processing__avatar transfer-processing__avatar-animate">
					${0}
				</div>
				<div class="transfer-result__avatar-bg">
					${0}
				</div>
				<div class="transfer-processing__content">
					<div class="transfer-processing__title">
						${0}
					</div>
					<div class="transfer-processing__description">
						${0}
					</div>
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,u)[u](babelHelpers.classPrivateFieldLooseBase(this,d)[d].userType).getContainer(),babelHelpers.classPrivateFieldLooseBase(this,u)[u]().getContainer(),l.Loc.getMessage("INTRANET_EXTRANET_TO_INTRANET_POPUP_PROCESSING_TITLE"),l.Loc.getMessage("INTRANET_EXTRANET_TO_INTRANET_POPUP_PROCESSING_DESCRIPTION"))}function H(e=null){const s={size:null===e?85:102,userpicPath:babelHelpers.classPrivateFieldLooseBase(this,d)[d].userPhoto};let a=null;switch(e){case"extranet":a=new o.AvatarRoundExtranet(s);break;case"collaber":a=new o.AvatarRoundGuest(s);break;default:a=new o.AvatarRound(s)}return a}let B,T,_,f,y=e=>e;var g=babelHelpers.classPrivateFieldLooseKey("options"),E=babelHelpers.classPrivateFieldLooseKey("content"),O=babelHelpers.classPrivateFieldLooseKey("isSuccess"),N=babelHelpers.classPrivateFieldLooseKey("parent"),R=babelHelpers.classPrivateFieldLooseKey("setAnimation"),m=babelHelpers.classPrivateFieldLooseKey("setConfetti"),A=babelHelpers.classPrivateFieldLooseKey("renderBlock"),I=babelHelpers.classPrivateFieldLooseKey("getImageBlock"),w=babelHelpers.classPrivateFieldLooseKey("getAvatar"),S=babelHelpers.classPrivateFieldLooseKey("getCloseButton");class j{constructor(e,s,a){Object.defineProperty(this,S,{value:U}),Object.defineProperty(this,w,{value:X}),Object.defineProperty(this,I,{value:D}),Object.defineProperty(this,A,{value:x}),Object.defineProperty(this,m,{value:C}),Object.defineProperty(this,R,{value:K}),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,O,{writable:!0,value:void 0}),Object.defineProperty(this,N,{writable:!0,value:void 0}),babelHelpers.classPrivateFieldLooseBase(this,g)[g]=e,babelHelpers.classPrivateFieldLooseBase(this,O)[O]=s,babelHelpers.classPrivateFieldLooseBase(this,N)[N]=a}render(){return babelHelpers.classPrivateFieldLooseBase(this,E)[E]||(babelHelpers.classPrivateFieldLooseBase(this,E)[E]=babelHelpers.classPrivateFieldLooseBase(this,A)[A]()),babelHelpers.classPrivateFieldLooseBase(this,R)[R](),babelHelpers.classPrivateFieldLooseBase(this,E)[E]}}function K(){if(!babelHelpers.classPrivateFieldLooseBase(this,O)[O])return;const e=babelHelpers.classPrivateFieldLooseBase(this,E)[E].querySelector(".transfer-result__img");e.classList.contains("transfer-result__animation")&&e.classList.remove("transfer-result__animation"),setTimeout(()=>{e.classList.add("transfer-result__animation")},500),setTimeout(()=>{babelHelpers.classPrivateFieldLooseBase(this,m)[m]()},2e3)}function C(){if(l.Browser.isFirefox()){const e=l.Tag.render(B||(B=y`
				<canvas></canvas>
			`));l.Dom.style(e,"position","fixed"),l.Dom.style(e,"top","0px"),l.Dom.style(e,"left","0px"),l.Dom.style(e,"pointer-events","none"),l.Dom.style(e,"z-index","11111"),l.Dom.style(e,"width","100%"),l.Dom.style(e,"height","100%"),l.Dom.append(e,document.body);const s=t.Confetti.create(e,{resize:!0,useWorker:!0});s({particleCount:250,origin:{y:.5,x:.33},spread:100}),s({particleCount:250,origin:{y:.5,x:.66},spread:100})}else t.Confetti.fire({particleCount:250,spread:100,origin:{y:.5,x:.33},zIndex:111111}),t.Confetti.fire({particleCount:250,spread:100,origin:{y:.5,x:.66},zIndex:111111})}function x(){const e=babelHelpers.classPrivateFieldLooseBase(this,O)[O]?l.Loc.getMessage("INTRANET_EXTRANET_TO_INTRANET_POPUP_RESULT_TITLE"):l.Loc.getMessage("INTRANET_EXTRANET_TO_INTRANET_POPUP_RESULT_TITLE_ERROR"),s=babelHelpers.classPrivateFieldLooseBase(this,O)[O]?l.Loc.getMessage("INTRANET_EXTRANET_TO_INTRANET_POPUP_RESULT_DESCRIPTION",{"[USER_NAME]":`<b>${babelHelpers.classPrivateFieldLooseBase(this,g)[g].userName}</b>`}):l.Loc.getMessage("INTRANET_EXTRANET_TO_INTRANET_POPUP_RESULT_DESCRIPTION_ERROR");return l.Tag.render(T||(T=y`
			<div class="transfer-result">
				${0}
				<div class="transfer-result__content">
					<div class="transfer-result__title">
						${0}
					</div>
					<div class="transfer-result__description">
						${0}
					</div>
				</div>
				<div class="transfer-result__action">
					${0}
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,I)[I](),e,s,babelHelpers.classPrivateFieldLooseBase(this,S)[S]())}function D(){return babelHelpers.classPrivateFieldLooseBase(this,O)[O]?l.Tag.render(_||(_=y`
				<div class="transfer-result__img">
					<div class="transfer-result__img-check-sign check-sign-part1"></div>
					<div class="transfer-result__img-check-sign check-sign-part2"></div>
				</div>
			`)):l.Tag.render(f||(f=y`
				<div class="transfer-result__avatar-result">
					${0}
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,w)[w]().getContainer())}function X(){const e={size:102,userpicPath:babelHelpers.classPrivateFieldLooseBase(this,g)[g].userPhoto};let s=null;switch(babelHelpers.classPrivateFieldLooseBase(this,g)[g].userType){case"extranet":s=new o.AvatarRoundExtranet(e);break;case"collaber":s=new o.AvatarRoundGuest(e);break;default:s=new o.AvatarRound(e)}return s}function U(){return new i.Button({className:"transfer-result__action-close",text:l.Loc.getMessage("INTRANET_EXTRANET_TO_INTRANET_POPUP_RESULT_CLOSE"),size:i.Button.Size.LARGE,style:"--style-filled",useAirDesign:!0,noCaps:!0,isDependOnTheme:!0,onclick:()=>{babelHelpers.classPrivateFieldLooseBase(this,N)[N].emit("changestate")}}).render()}let k,$=e=>e;var M=babelHelpers.classPrivateFieldLooseKey("options"),z=babelHelpers.classPrivateFieldLooseKey("content"),G=babelHelpers.classPrivateFieldLooseKey("department"),V=babelHelpers.classPrivateFieldLooseKey("parent"),q=babelHelpers.classPrivateFieldLooseKey("renderBlock"),W=babelHelpers.classPrivateFieldLooseKey("getAvatar"),J=babelHelpers.classPrivateFieldLooseKey("getDepartmentControl"),Q=babelHelpers.classPrivateFieldLooseKey("getSendButton"),Y=babelHelpers.classPrivateFieldLooseKey("getCancelButton");class Z{constructor(e,s){Object.defineProperty(this,Y,{value:le}),Object.defineProperty(this,Q,{value:te}),Object.defineProperty(this,J,{value:ae}),Object.defineProperty(this,W,{value:se}),Object.defineProperty(this,q,{value:ee}),Object.defineProperty(this,M,{writable:!0,value:void 0}),Object.defineProperty(this,z,{writable:!0,value:void 0}),Object.defineProperty(this,G,{writable:!0,value:void 0}),Object.defineProperty(this,V,{writable:!0,value:void 0}),babelHelpers.classPrivateFieldLooseBase(this,M)[M]=e,babelHelpers.classPrivateFieldLooseBase(this,V)[V]=s}render(){return babelHelpers.classPrivateFieldLooseBase(this,z)[z]||(babelHelpers.classPrivateFieldLooseBase(this,z)[z]=babelHelpers.classPrivateFieldLooseBase(this,q)[q]()),babelHelpers.classPrivateFieldLooseBase(this,z)[z]}}function ee(){const e="collaber"===babelHelpers.classPrivateFieldLooseBase(this,M)[M].userType,s=e?"collaber":"extranet",a=e?l.Loc.getMessage("INTRANET_EXTRANET_TO_INTRANET_POPUP_POSITION_COLLABER"):l.Loc.getMessage("INTRANET_EXTRANET_TO_INTRANET_POPUP_POSITION_EXTRANET");return l.Tag.render(k||(k=$`
			<div class="transfer-start">
				<div class="transfer-start__title">
					${0}
				</div>
				<div class="transfer-start__account">
					<div class="transfer-account transfer-account_${0}">
						<div class="transfer-account-avatar">
							${0}
						</div>
						<div class="transfer-account-data">
							<div class="account-data__name">
								${0}
							</div>
							<div class="account-data__position account-data__position_${0}">
								${0}
							</div>
						</div>
					</div>
				</div>
				<div class="transfer-start__department">
					${0}
				</div>
				<div class="transfer-start__action">
					${0}
					${0}
				</div>
			</div>
		`),l.Loc.getMessage("INTRANET_EXTRANET_TO_INTRANET_POPUP_TITLE"),s,babelHelpers.classPrivateFieldLooseBase(this,W)[W]().getContainer(),babelHelpers.classPrivateFieldLooseBase(this,M)[M].userName,s,a,babelHelpers.classPrivateFieldLooseBase(this,J)[J]().render(),babelHelpers.classPrivateFieldLooseBase(this,Q)[Q](),babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]())}function se(){const e={size:40,userpicPath:babelHelpers.classPrivateFieldLooseBase(this,M)[M].userPhoto};let s=null;switch(babelHelpers.classPrivateFieldLooseBase(this,M)[M].userType){case"extranet":s=new o.AvatarRoundExtranet(e);break;case"collaber":s=new o.AvatarRoundGuest(e);break;default:s=new o.AvatarRound(e)}return s}function ae(){if(!babelHelpers.classPrivateFieldLooseBase(this,G)[G]){var e,s;const a=l.Type.isArray(null==(e=babelHelpers.classPrivateFieldLooseBase(this,M)[M].department)?void 0:e.departmentList)?babelHelpers.classPrivateFieldLooseBase(this,M)[M].department.departmentList:[],t=null==(s=babelHelpers.classPrivateFieldLooseBase(this,M)[M].department)?void 0:s.rootDepartment;babelHelpers.classPrivateFieldLooseBase(this,G)[G]=new r({departmentList:a,rootDepartment:l.Type.isObject(t)?t:null})}return babelHelpers.classPrivateFieldLooseBase(this,G)[G]}function te(){return new i.Button({className:"transfer-start__action-send",text:l.Loc.getMessage("INTRANET_EXTRANET_TO_INTRANET_POPUP_TRANSFER"),size:i.Button.Size.LARGE,style:"--style-filled",useAirDesign:!0,noCaps:!0,isDependOnTheme:!0,onclick:()=>{babelHelpers.classPrivateFieldLooseBase(this,V)[V].emit("changestate",{departmentValues:babelHelpers.classPrivateFieldLooseBase(this,G)[G].getValues()})}}).render()}function le(){return new i.Button({useAirDesign:!0,text:l.Loc.getMessage("INTRANET_EXTRANET_TO_INTRANET_POPUP_CANCEL"),size:i.Button.Size.LARGE,style:i.AirButtonStyle.OUTLINE,onclick:()=>{babelHelpers.classPrivateFieldLooseBase(this,V)[V].emit("closepopup")},noCaps:!0}).render()}let ie,re=e=>e;const oe=Object.freeze({START:"start",PROCESSING:"processing",RESULT:"result"});var ne=babelHelpers.classPrivateFieldLooseKey("popup"),ce=babelHelpers.classPrivateFieldLooseKey("popupState"),be=babelHelpers.classPrivateFieldLooseKey("startStep"),de=babelHelpers.classPrivateFieldLooseKey("processingStep"),pe=babelHelpers.classPrivateFieldLooseKey("resultStep"),ve=babelHelpers.classPrivateFieldLooseKey("options"),Pe=babelHelpers.classPrivateFieldLooseKey("departmentIds"),he=babelHelpers.classPrivateFieldLooseKey("success"),ue=babelHelpers.classPrivateFieldLooseKey("loader"),Le=babelHelpers.classPrivateFieldLooseKey("loaded"),Fe=babelHelpers.classPrivateFieldLooseKey("onClosePopup"),He=babelHelpers.classPrivateFieldLooseKey("clearPopupData"),Be=babelHelpers.classPrivateFieldLooseKey("onChangeState"),Te=babelHelpers.classPrivateFieldLooseKey("loadData"),_e=babelHelpers.classPrivateFieldLooseKey("createPopup"),fe=babelHelpers.classPrivateFieldLooseKey("getPopupContent"),ye=babelHelpers.classPrivateFieldLooseKey("getStartStep"),ge=babelHelpers.classPrivateFieldLooseKey("getProcessingStep"),Ee=babelHelpers.classPrivateFieldLooseKey("getResultStep"),Oe=babelHelpers.classPrivateFieldLooseKey("showLoader"),Ne=babelHelpers.classPrivateFieldLooseKey("removeLoader");class Re extends a.EventEmitter{constructor(e){super(),Object.defineProperty(this,Ne,{value:Xe}),Object.defineProperty(this,Oe,{value:De}),Object.defineProperty(this,Ee,{value:xe}),Object.defineProperty(this,ge,{value:Ce}),Object.defineProperty(this,ye,{value:Ke}),Object.defineProperty(this,fe,{value:je}),Object.defineProperty(this,_e,{value:Se}),Object.defineProperty(this,Te,{value:we}),Object.defineProperty(this,Be,{value:Ie}),Object.defineProperty(this,He,{value:Ae}),Object.defineProperty(this,Fe,{value:me}),Object.defineProperty(this,ne,{writable:!0,value:null}),Object.defineProperty(this,ce,{writable:!0,value:void 0}),Object.defineProperty(this,be,{writable:!0,value:void 0}),Object.defineProperty(this,de,{writable:!0,value:void 0}),Object.defineProperty(this,pe,{writable:!0,value:void 0}),Object.defineProperty(this,ve,{writable:!0,value:void 0}),Object.defineProperty(this,Pe,{writable:!0,value:void 0}),Object.defineProperty(this,he,{writable:!0,value:void 0}),Object.defineProperty(this,ue,{writable:!0,value:null}),Object.defineProperty(this,Le,{writable:!0,value:!1}),this.setEventNamespace("BX.Intranet.ExtranetToIntranet"),babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]=oe.START,babelHelpers.classPrivateFieldLooseBase(this,ve)[ve]=e,this.subscribe("closePopup",babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe].bind(this)),this.subscribe("changeState",babelHelpers.classPrivateFieldLooseBase(this,Be)[Be].bind(this)),babelHelpers.classPrivateFieldLooseBase(this,Te)[Te]()}destroy(){babelHelpers.classPrivateFieldLooseBase(this,ne)[ne].destroy(),babelHelpers.classPrivateFieldLooseBase(this,He)[He]()}show(){babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]=babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](),babelHelpers.classPrivateFieldLooseBase(this,ne)[ne].show()}}function me(){babelHelpers.classPrivateFieldLooseBase(this,He)[He](),babelHelpers.classPrivateFieldLooseBase(this,ne)[ne].destroy()}function Ae(){babelHelpers.classPrivateFieldLooseBase(this,be)[be]=null,babelHelpers.classPrivateFieldLooseBase(this,de)[de]=null,babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]=null,this.unsubscribe("closePopup",babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe].bind(this)),this.unsubscribe("changeState",babelHelpers.classPrivateFieldLooseBase(this,Be)[Be].bind(this))}function Ie(e){var s;let a=357;switch(babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]){case oe.START:a=245,"departmentValues"in e.getData()&&(babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe]=e.getData().departmentValues),babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]=oe.PROCESSING;break;case oe.PROCESSING:a=307,babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]=oe.RESULT,null!=(s=e.getData())&&s.success&&(babelHelpers.classPrivateFieldLooseBase(this,he)[he]=e.getData().success);break;case oe.RESULT:return babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]=oe.START,babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe](),void(babelHelpers.classPrivateFieldLooseBase(this,he)[he]&&location.reload());default:throw new Error("Popup state is not defined")}babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]!==oe.START&&(babelHelpers.classPrivateFieldLooseBase(this,ne)[ne].setHeight(a),babelHelpers.classPrivateFieldLooseBase(this,ne)[ne].setContent(babelHelpers.classPrivateFieldLooseBase(this,fe)[fe]()))}function we(){BX.ajax.runComponentAction(babelHelpers.classPrivateFieldLooseBase(this,ve)[ve].componentName,"getDapartmentData",{signedParameters:babelHelpers.classPrivateFieldLooseBase(this,ve)[ve].signedParameters,mode:"ajax"}).then(e=>{babelHelpers.classPrivateFieldLooseBase(this,Le)[Le]=!0,babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne](),e&&e.data&&(babelHelpers.classPrivateFieldLooseBase(this,ve)[ve].department=e.data,this.show())},e=>{babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne]()})}function Se(){const e=s.PopupManager.create({id:"extranet-to-intranet-popup",className:"extranet-to-intranet-container",closeIcon:!0,autoHide:!1,closeByEsc:!0,padding:0,width:542,height:357,events:{onClose:()=>{babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe]()}}}),a=babelHelpers.classPrivateFieldLooseBase(this,fe)[fe]();return!babelHelpers.classPrivateFieldLooseBase(this,Le)[Le]&&babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe](a),e.setContent(a),e}function je(){let e="";if(babelHelpers.classPrivateFieldLooseBase(this,Le)[Le])switch(babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]){case oe.START:e=babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]().render();break;case oe.PROCESSING:babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]().send(),e=babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]().render();break;case oe.RESULT:e=babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee]().render();break;default:throw new Error("Popup state is not defined")}return l.Tag.render(ie||(ie=re`
			<div class="extranet-to-intranet-wrapper">
				${0}
			</div>
		`),e)}function Ke(){return babelHelpers.classPrivateFieldLooseBase(this,be)[be]||(babelHelpers.classPrivateFieldLooseBase(this,be)[be]=new Z(babelHelpers.classPrivateFieldLooseBase(this,ve)[ve],this)),babelHelpers.classPrivateFieldLooseBase(this,be)[be]}function Ce(){return babelHelpers.classPrivateFieldLooseBase(this,de)[de]||(babelHelpers.classPrivateFieldLooseBase(this,de)[de]=new L(babelHelpers.classPrivateFieldLooseBase(this,ve)[ve],babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe],this)),babelHelpers.classPrivateFieldLooseBase(this,de)[de]}function xe(){return babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]||(babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]=new j(babelHelpers.classPrivateFieldLooseBase(this,ve)[ve],babelHelpers.classPrivateFieldLooseBase(this,he)[he],this)),babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]}function De(e){babelHelpers.classPrivateFieldLooseBase(this,ue)[ue]=new n.Loader({target:e,color:"rgba(82, 92, 105, 0.9)"}),babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].show().then(()=>{console.log("The loader is shown")})}function Xe(){babelHelpers.classPrivateFieldLooseBase(this,ue)[ue]&&(babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].destroy(),babelHelpers.classPrivateFieldLooseBase(this,ue)[ue]=null)}e.PopupState=oe,e.ExtranetToIntranet=Re}(this.BX.Intranet=this.BX.Intranet||{},BX.Main,BX.Event,BX.UI,BX,BX.UI,BX.Intranet,BX.UI,BX);
//# sourceMappingURL=extranet-to-intranet.bundle.js.map
