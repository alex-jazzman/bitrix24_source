{"version":3,"file":"transfer-to-intranet.bundle.js","sources":["../src/step/processing-step.js","../src/step/result-step.js","../src/step/start-step.js","../src/transfer-to-intranet-popup.js"],"sourcesContent":["import { Loc, Tag } from 'main.core';\nimport { TransferToIntranetPopup } from '../transfer-to-intranet-popup';\nimport type { TransferToIntranetPopupType } from '../transfer-to-intranet-popup';\nimport { Lottie } from 'ui.lottie';\nimport GuestAnimationData from './../lottie-animations/guest.json';\nimport ExtranetAnimationData from './../lottie-animations/extranet.json';\n\nexport class ProcessingStep\n{\n\t#options: TransferToIntranetPopupType;\n\t#content: HTMLElement;\n\t#departmentIds: Array;\n\t#parent: TransferToIntranetPopup;\n\n\tconstructor(options: TransferToIntranetPopupType, departmentIds, parent: TransferToIntranetPopup)\n\t{\n\t\tthis.#options = options;\n\t\tthis.#departmentIds = departmentIds;\n\t\tthis.#parent = parent;\n\t}\n\n\tsend(): void\n\t{\n\t\tconst start = Date.now();\n\n\t\tconst data = {\n\t\t\tdepartmentId: this.#departmentIds,\n\t\t\tisEmail: 'N',\n\t\t};\n\n\t\tBX.ajax.runComponentAction(this.#options.componentName, 'moveToIntranet', {\n\t\t\tsignedParameters: this.#options.signedParameters,\n\t\t\tmode: 'ajax',\n\t\t\tdata,\n\t\t}).then((response) => {\n\t\t\tconst time = (Date.now() - start);\n\t\t\tlet delay = 0;\n\t\t\tif (time <= 2500)\n\t\t\t{\n\t\t\t\tdelay = 2500 - time;\n\t\t\t}\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.#parent.emit('changestate', {\n\t\t\t\t\tsuccess: true,\n\t\t\t\t\tresponse,\n\t\t\t\t});\n\t\t\t}, delay);\n\t\t}, (response) => {\n\t\t\tthis.#parent.emit('changestate', {\n\t\t\t\tsuccess: false,\n\t\t\t\tresponse,\n\t\t\t});\n\t\t});\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (!this.#content)\n\t\t{\n\t\t\tthis.#content = this.#renderBlock();\n\t\t}\n\n\t\treturn this.#content;\n\t}\n\n\t#renderBlock(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"transfer-processing\">\n\t\t\t\t${this.renderLottieAnimation()}\n\t\t\t\t<div class=\"transfer-processing__content\">\n\t\t\t\t\t<div class=\"transfer-processing__title\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_EXTRANET_TO_INTRANET_POPUP_PROCESSING_TITLE')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"transfer-processing__description\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_EXTRANET_TO_INTRANET_POPUP_PROCESSING_DESCRIPTION')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderLottieAnimation(): HTMLElement\n\t{\n\t\tconst container = Tag.render`<div class=\"transfer-processing__animate\"></div>`;\n\n\t\tconst mainAnimation = Lottie.loadAnimation({\n\t\t\tcontainer,\n\t\t\trenderer: 'svg',\n\t\t\tloop: true,\n\t\t\tautoplay: true,\n\t\t\tanimationData: this.#options.userType === 'collaber' ? GuestAnimationData : ExtranetAnimationData,\n\t\t});\n\n\t\tmainAnimation.setSpeed(0.75);\n\n\t\treturn container;\n\t}\n}\n","import { Browser, Loc, Tag, Dom } from 'main.core';\nimport { Button } from 'ui.buttons';\nimport { AvatarRound, AvatarRoundExtranet, AvatarRoundGuest, AvatarBase } from 'ui.avatar';\nimport { TransferToIntranetPopup } from '../transfer-to-intranet-popup';\nimport type { TransferToIntranetPopupType } from '../transfer-to-intranet-popup';\nimport { Confetti } from 'ui.confetti';\n\nexport class ResultStep\n{\n\t#options: TransferToIntranetPopupType;\n\t#content: HTMLElement;\n\t#isSuccess: boolean;\n\t#parent: TransferToIntranetPopup;\n\n\tconstructor(options: TransferToIntranetPopupType, isSuccess: boolean, parent: TransferToIntranetPopup)\n\t{\n\t\tthis.#options = options;\n\t\tthis.#isSuccess = isSuccess;\n\t\tthis.#parent = parent;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (!this.#content)\n\t\t{\n\t\t\tthis.#content = this.#renderBlock();\n\t\t}\n\t\tthis.#setAnimation();\n\n\t\treturn this.#content;\n\t}\n\n\t#setAnimation(): void\n\t{\n\t\tif (!this.#isSuccess)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst container = this.#content.querySelector('.transfer-result__img');\n\t\tif (container.classList.contains('transfer-result__animation'))\n\t\t{\n\t\t\tcontainer.classList.remove('transfer-result__animation');\n\t\t}\n\t\tsetTimeout(() => {\n\t\t\tcontainer.classList.add('transfer-result__animation');\n\t\t}, 500);\n\n\t\tsetTimeout(() => {\n\t\t\tthis.#setConfetti();\n\t\t}, 2000);\n\t}\n\n\t#setConfetti(): void\n\t{\n\t\tif (Browser.isFirefox())\n\t\t{\n\t\t\tconst canvas = Tag.render`\n\t\t\t\t<canvas></canvas>\n\t\t\t`;\n\t\t\tDom.style(canvas, 'position', 'fixed');\n\t\t\tDom.style(canvas, 'top', '0px');\n\t\t\tDom.style(canvas, 'left', '0px');\n\t\t\tDom.style(canvas, 'pointer-events', 'none');\n\t\t\tDom.style(canvas, 'z-index', '11111');\n\t\t\tDom.style(canvas, 'width', '100%');\n\t\t\tDom.style(canvas, 'height', '100%');\n\t\t\tDom.append(canvas, document.body);\n\t\t\tconst confetti = Confetti.create(canvas, {\n\t\t\t\tresize: true,\n\t\t\t\tuseWorker: true,\n\t\t\t});\n\t\t\tconfetti({\n\t\t\t\tparticleCount: 250,\n\t\t\t\torigin: { y: 0.5, x: 0.33 },\n\t\t\t\tspread: 100,\n\t\t\t});\n\t\t\tconfetti({\n\t\t\t\tparticleCount: 250,\n\t\t\t\torigin: { y: 0.5, x: 0.66 },\n\t\t\t\tspread: 100,\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tConfetti.fire({\n\t\t\t\tparticleCount: 250,\n\t\t\t\tspread: 100,\n\t\t\t\torigin: { y: 0.5, x: 0.33 },\n\t\t\t\tzIndex: 111_111,\n\t\t\t});\n\t\t\tConfetti.fire({\n\t\t\t\tparticleCount: 250,\n\t\t\t\tspread: 100,\n\t\t\t\torigin: { y: 0.5, x: 0.66 },\n\t\t\t\tzIndex: 111_111,\n\t\t\t});\n\t\t}\n\t}\n\n\t#renderBlock(): HTMLElement\n\t{\n\t\tconst title = this.#isSuccess\n\t\t\t? Loc.getMessage('INTRANET_EXTRANET_TO_INTRANET_POPUP_RESULT_TITLE')\n\t\t\t: Loc.getMessage('INTRANET_EXTRANET_TO_INTRANET_POPUP_RESULT_TITLE_ERROR');\n\n\t\tconst description = this.#isSuccess\n\t\t\t? Loc.getMessage(\n\t\t\t\t'INTRANET_EXTRANET_TO_INTRANET_POPUP_RESULT_DESCRIPTION',\n\t\t\t\t{\n\t\t\t\t\t'[USER_NAME]': `<b>${this.#options.userName}</b>`,\n\t\t\t\t},\n\t\t\t)\n\t\t\t: Loc.getMessage('INTRANET_EXTRANET_TO_INTRANET_POPUP_RESULT_DESCRIPTION_ERROR');\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"transfer-result\">\n\t\t\t\t${this.#getImageBlock()}\n\t\t\t\t<div class=\"transfer-result__content\">\n\t\t\t\t\t<div class=\"transfer-result__title\">\n\t\t\t\t\t\t${title}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"transfer-result__description\">\n\t\t\t\t\t\t${description}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"transfer-result__action\">\n\t\t\t\t\t${this.#getCloseButton()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#getImageBlock(): HTMLElement\n\t{\n\t\tif (this.#isSuccess)\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"transfer-result__img\">\n\t\t\t\t\t<div class=\"transfer-result__img-check-sign check-sign-part1\"></div>\n\t\t\t\t\t<div class=\"transfer-result__img-check-sign check-sign-part2\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"transfer-result__avatar-result\">\n\t\t\t\t\t${this.#getAvatar().getContainer()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t}\n\n\t#getAvatar(): AvatarBase\n\t{\n\t\tconst options = {\n\t\t\tsize: 102,\n\t\t\tuserpicPath: this.#options.userPhoto,\n\t\t};\n\t\tlet avatar = null;\n\n\t\tswitch (this.#options.userType)\n\t\t{\n\t\t\tcase 'extranet':\n\t\t\t\tavatar = new AvatarRoundExtranet(options);\n\t\t\t\tbreak;\n\t\t\tcase 'collaber':\n\t\t\t\tavatar = new AvatarRoundGuest(options);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tavatar = new AvatarRound(options);\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn avatar;\n\t}\n\n\t#getCloseButton(): HTMLElement\n\t{\n\t\treturn new Button({\n\t\t\tclassName: 'transfer-result__action-close',\n\t\t\ttext: Loc.getMessage('INTRANET_EXTRANET_TO_INTRANET_POPUP_RESULT_CLOSE'),\n\t\t\tsize: Button.Size.LARGE,\n\t\t\tstyle: '--style-filled',\n\t\t\tuseAirDesign: true,\n\t\t\tnoCaps: true,\n\t\t\tisDependOnTheme: true,\n\t\t\tonclick: () => {\n\t\t\t\tthis.#parent.emit('changestate');\n\t\t\t},\n\t\t}).render();\n\t}\n}\n","import { Type, Loc, Tag } from 'main.core';\nimport { AirButtonStyle, Button } from 'ui.buttons';\nimport DepartmentControl from 'intranet.department-control';\nimport { AvatarRound, AvatarRoundExtranet, AvatarRoundGuest, AvatarBase } from 'ui.avatar';\nimport { TransferToIntranetPopup } from '../transfer-to-intranet-popup';\nimport type { TransferToIntranetPopupType } from '../transfer-to-intranet-popup';\nimport { BaseEvent } from 'main.core.events';\n\nexport class StartStep\n{\n\t#options: TransferToIntranetPopupType;\n\t#content: HTMLElement;\n\t#department: DepartmentControl;\n\t#parent: TransferToIntranetPopup;\n\t#sendButton: ?Button;\n\n\tconstructor(options: TransferToIntranetPopupType, parent: TransferToIntranetPopup)\n\t{\n\t\tthis.#options = options;\n\t\tthis.#parent = parent;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (!this.#content)\n\t\t{\n\t\t\tthis.#content = this.#renderBlock();\n\t\t}\n\n\t\treturn this.#content;\n\t}\n\n\t#renderBlock(): HTMLElement\n\t{\n\t\tconst isCollaber = this.#options.userType === 'collaber';\n\t\tconst modificator = isCollaber ? 'collaber' : 'extranet';\n\t\tconst title = isCollaber\n\t\t\t? Loc.getMessage('INTRANET_EXTRANET_TO_INTRANET_POPUP_COLLABA_TITLE')\n\t\t\t: Loc.getMessage('INTRANET_EXTRANET_TO_INTRANET_POPUP_TITLE');\n\t\tconst position = isCollaber\n\t\t\t? Loc.getMessage('INTRANET_EXTRANET_TO_INTRANET_POPUP_POSITION_COLLABER')\n\t\t\t: Loc.getMessage('INTRANET_EXTRANET_TO_INTRANET_POPUP_POSITION_EXTRANET');\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"transfer-start\">\n\t\t\t\t<div class=\"transfer-start__title\">\n\t\t\t\t\t${title}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"transfer-start__account\">\n\t\t\t\t\t<div class=\"transfer-account transfer-account_${modificator}\">\n\t\t\t\t\t\t<div class=\"transfer-account-avatar\">\n\t\t\t\t\t\t\t${this.#getAvatar().getContainer()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"transfer-account-data\">\n\t\t\t\t\t\t\t<div class=\"account-data__name\">\n\t\t\t\t\t\t\t\t${this.#options.userName}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"account-data__position account-data__position_${modificator}\">\n\t\t\t\t\t\t\t\t${position}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"transfer-start__department\">\n\t\t\t\t\t${this.#getDepartmentControl().render()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"transfer-start__action\">\n\t\t\t\t\t${this.#getSendButton().render()}\n\t\t\t\t\t${this.#getCancelButton().render()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#getAvatar(): AvatarBase\n\t{\n\t\tconst options = {\n\t\t\tsize: 40,\n\t\t\tuserpicPath: this.#options.userPhoto,\n\t\t};\n\t\tlet avatar = null;\n\n\t\tswitch (this.#options.userType)\n\t\t{\n\t\t\tcase 'extranet':\n\t\t\t\tavatar = new AvatarRoundExtranet(options);\n\t\t\t\tbreak;\n\t\t\tcase 'collaber':\n\t\t\t\tavatar = new AvatarRoundGuest(options);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tavatar = new AvatarRound(options);\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn avatar;\n\t}\n\n\t#getDepartmentControl(): DepartmentControl\n\t{\n\t\tif (!this.#department)\n\t\t{\n\t\t\tconst rootDepartment = this.#options.rootDepartment;\n\n\t\t\tthis.#department = new DepartmentControl({\n\t\t\t\trootDepartment: Type.isObject(rootDepartment) ? rootDepartment : null,\n\t\t\t\tdescription: Loc.getMessage('INTRANET_EXTRANET_TO_INTRANET_POPUP_DEPARTMENT_DESCRIPTION'),\n\t\t\t});\n\n\t\t\tthis.#department.subscribe('onChange', this.#onChangeDepartments.bind(this));\n\t\t}\n\n\t\treturn this.#department;\n\t}\n\n\t#getSendButton(): Button\n\t{\n\t\tthis.#sendButton ??= new Button({\n\t\t\tclassName: 'transfer-start__action-send',\n\t\t\ttext: Loc.getMessage('INTRANET_EXTRANET_TO_INTRANET_POPUP_TRANSFER'),\n\t\t\tsize: Button.Size.LARGE,\n\t\t\tstyle: '--style-filled',\n\t\t\tuseAirDesign: true,\n\t\t\tnoCaps: true,\n\t\t\tisDependOnTheme: true,\n\t\t\tstate: this.#getDepartmentControl().getValues().length > 0 ? null : Button.State.DISABLED,\n\t\t\tonclick: () => {\n\t\t\t\tif (this.#sendButton.getState() === Button.State.DISABLED)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.#parent.emit('changestate', {\n\t\t\t\t\tdepartmentValues: this.#department.getValues(),\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\n\t\treturn this.#sendButton;\n\t}\n\n\t#getCancelButton(): Button\n\t{\n\t\treturn new Button({\n\t\t\tuseAirDesign: true,\n\t\t\ttext: Loc.getMessage('INTRANET_EXTRANET_TO_INTRANET_POPUP_CANCEL'),\n\t\t\tsize: Button.Size.LARGE,\n\t\t\tstyle: AirButtonStyle.OUTLINE,\n\t\t\tonclick: () => {\n\t\t\t\tthis.#parent.emit('closepopup');\n\t\t\t},\n\t\t\tnoCaps: true,\n\t\t});\n\t}\n\n\t#onChangeDepartments(event: BaseEvent): void\n\t{\n\t\tconst { tags } = event.data;\n\t\tconst state = tags?.length > 0 ? null : Button.State.DISABLED;\n\t\tthis.#getSendButton().setState(state);\n\t}\n}\n","import { Tag } from 'main.core';\nimport { Popup, PopupManager } from 'main.popup';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\nimport { ProcessingStep } from './step/processing-step';\nimport { ResultStep } from './step/result-step';\nimport { StartStep } from './step/start-step';\nimport 'ui.fonts.inter';\nimport './style.css';\n\nexport const PopupState = Object.freeze({\n\tSTART: 'start',\n\tPROCESSING: 'processing',\n\tRESULT: 'result',\n});\n\nexport type DepartmentType = {\n\tid: string,\n\tname: string,\n\taccessCode: string,\n}\n\nexport type TransferToIntranetPopupType = {\n\tuserType: string,\n\tuserName: string,\n\tuserPhoto: string,\n\tcomponentName: string,\n\tsignedParameters: string,\n\trootDepartment: DepartmentType,\n}\n\nexport class TransferToIntranetPopup extends EventEmitter\n{\n\t#popup: Popup = null;\n\t#popupState: PopupState;\n\t#startStep: StartStep;\n\t#processingStep: ProcessingStep;\n\t#resultStep: ResultStep;\n\t#options: TransferToIntranetPopupType;\n\t#departmentIds: Array;\n\t#success: boolean;\n\n\tconstructor(options: TransferToIntranetPopupType)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Intranet.TransferToIntranet');\n\t\tthis.#popupState = PopupState.START;\n\t\tthis.#options = options;\n\n\t\tthis.subscribe('closePopup', this.#onClosePopup.bind(this));\n\t\tthis.subscribe('changeState', this.#onChangeState.bind(this));\n\t}\n\n\t#onClosePopup(): void\n\t{\n\t\tthis.#clearPopupData();\n\t\tthis.#popup.destroy();\n\t}\n\n\t#clearPopupData(): void\n\t{\n\t\tthis.#startStep = null;\n\t\tthis.#processingStep = null;\n\t\tthis.#resultStep = null;\n\t\tthis.unsubscribe('closePopup', this.#onClosePopup.bind(this));\n\t\tthis.unsubscribe('changeState', this.#onChangeState.bind(this));\n\t}\n\n\tdestroy(): void\n\t{\n\t\tthis.#popup.destroy();\n\t\tthis.#clearPopupData();\n\t}\n\n\t#onChangeState(event: BaseEvent): void\n\t{\n\t\tlet height = 357;\n\t\tswitch (this.#popupState)\n\t\t{\n\t\t\tcase PopupState.START:\n\t\t\t\theight = 245;\n\t\t\t\tif ('departmentValues' in event.getData())\n\t\t\t\t{\n\t\t\t\t\tthis.#departmentIds = event.getData().departmentValues;\n\t\t\t\t}\n\t\t\t\tthis.#popupState = PopupState.PROCESSING;\n\t\t\t\tbreak;\n\t\t\tcase PopupState.PROCESSING:\n\t\t\t\theight = 307;\n\t\t\t\tthis.#popupState = PopupState.RESULT;\n\t\t\t\tif (event.getData()?.success)\n\t\t\t\t{\n\t\t\t\t\tthis.#success = event.getData().success;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase PopupState.RESULT:\n\t\t\t\tthis.#popupState = PopupState.START;\n\t\t\t\tthis.#onClosePopup();\n\t\t\t\tif (this.#success)\n\t\t\t\t{\n\t\t\t\t\tlocation.reload();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\tdefault:\n\t\t\t\tthrow new Error('Popup state is not defined');\n\t\t}\n\n\t\tif (this.#popupState !== PopupState.START)\n\t\t{\n\t\t\tthis.#popup.setHeight(height);\n\t\t\tthis.#popup.setContent(this.#getPopupContent());\n\t\t}\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#popup = this.#createPopup();\n\t\tthis.#popup.show();\n\t}\n\n\t#createPopup(): Popup\n\t{\n\t\tconst popup = PopupManager.create({\n\t\t\tid: 'extranet-to-intranet-popup',\n\t\t\tclassName: 'extranet-to-intranet-container',\n\t\t\tcloseIcon: false,\n\t\t\tautoHide: false,\n\t\t\tcloseByEsc: true,\n\t\t\tpadding: 0,\n\t\t\twidth: 542,\n\t\t\theight: 357,\n\t\t\tevents: {\n\t\t\t\tonClose: () => {\n\t\t\t\t\tthis.#onClosePopup();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tpopup.setContent(this.#getPopupContent());\n\n\t\treturn popup;\n\t}\n\n\t#getPopupContent(): HTMLElement\n\t{\n\t\tlet content = '';\n\t\tswitch (this.#popupState)\n\t\t{\n\t\t\tcase PopupState.START:\n\t\t\t\tcontent = this.#getStartStep().render();\n\t\t\t\tbreak;\n\t\t\tcase PopupState.PROCESSING:\n\t\t\t\tthis.#getProcessingStep().send();\n\t\t\t\tcontent = this.#getProcessingStep().render();\n\t\t\t\tbreak;\n\t\t\tcase PopupState.RESULT:\n\t\t\t\tcontent = this.#getResultStep().render();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error('Popup state is not defined');\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"extranet-to-intranet-wrapper\">\n\t\t\t\t${this.#renderCloseIcon()}\n\t\t\t\t${content}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderCloseIcon(): HTMLElement\n\t{\n\t\tif (this.#popupState !== PopupState.START)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\tconst onClick = () => {\n\t\t\tthis.#popup.close();\n\t\t};\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"extranet-to-intranet__close-icon ui-icon-set --cross-30\" onclick=\"${onClick}\"></div>\n\t\t`;\n\t}\n\n\t#getStartStep(): StartStep\n\t{\n\t\tif (!this.#startStep)\n\t\t{\n\t\t\tthis.#startStep = new StartStep(this.#options, this);\n\t\t}\n\n\t\treturn this.#startStep;\n\t}\n\n\t#getProcessingStep(): ProcessingStep\n\t{\n\t\tif (!this.#processingStep)\n\t\t{\n\t\t\tthis.#processingStep = new ProcessingStep(this.#options, this.#departmentIds, this);\n\t\t}\n\n\t\treturn this.#processingStep;\n\t}\n\n\t#getResultStep(): ResultStep\n\t{\n\t\tif (!this.#resultStep)\n\t\t{\n\t\t\tthis.#resultStep = new ResultStep(this.#options, this.#success, this);\n\t\t}\n\n\t\treturn this.#resultStep;\n\t}\n}\n"],"names":["ProcessingStep","constructor","options","departmentIds","parent","Object","value","writable","babelHelpers","send","start","Date","now","data","departmentId","this","isEmail","BX","ajax","runComponentAction","componentName","signedParameters","mode","then","response","time","delay","setTimeout","emit","success","render","renderLottieAnimation","container","Tag","Lottie","loadAnimation","renderer","loop","autoplay","animationData","userType","GuestAnimationData","ExtranetAnimationData","setSpeed","Loc","getMessage","ResultStep","isSuccess","querySelector","classList","contains","remove","add","Browser","isFirefox","canvas","Dom","style","append","document","body","confetti","Confetti","create","resize","useWorker","particleCount","origin","y","x","spread","fire","zIndex","title","description","[USER_NAME]","userName","getContainer","size","userpicPath","userPhoto","avatar","AvatarRoundExtranet","AvatarRoundGuest","AvatarRound","Button","className","text","Size","LARGE","useAirDesign","noCaps","isDependOnTheme","onclick","StartStep","isCollaber","modificator","position","rootDepartment","DepartmentControl","Type","isObject","subscribe","bind","state","getValues","length","State","DISABLED","getState","departmentValues","AirButtonStyle","OUTLINE","event","tags","setState","PopupState","freeze","START","PROCESSING","RESULT","TransferToIntranetPopup","EventEmitter","super","setEventNamespace","destroy","show","unsubscribe","height","getData","_event$getData","location","reload","Error","setHeight","setContent","popup","PopupManager","id","closeIcon","autoHide","closeByEsc","padding","width","events","onClose","content","close"],"mappings":"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"}