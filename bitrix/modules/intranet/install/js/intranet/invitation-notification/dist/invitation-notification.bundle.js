this.BX=this.BX||{},function(t,e,i,n,a,o){"use strict";function s(t,e){r(t,e),e.add(t)}function l(t,e,i){r(t,e),e.set(t,i)}function r(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function c(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var p=new WeakMap,h=new WeakMap,u=new WeakMap,d=new WeakSet,v=new WeakSet,b=new WeakSet,f=new WeakSet;let m=function(){function t(i){babelHelpers.classCallCheck(this,t),s(this,f),s(this,b),s(this,v),s(this,d),l(this,p,{writable:!0,value:null}),l(this,h,{writable:!0,value:null}),l(this,u,{writable:!0,value:null}),babelHelpers.defineProperty(this,"invitationButton",null),e.Type.isObject(i)&&babelHelpers.classPrivateFieldSet(this,h,i),babelHelpers.classPrivateFieldSet(this,u,e.Extension.getSettings("intranet.invitation-notification").inviteWidgetLink),this.invitationButton=document.querySelector('[data-id="invitationButton"]')}return babelHelpers.createClass(t,[{key:"createNotificationBalloon",value:function(t){const e=null!==BX.Reflection.getClass("BX.Intranet.Bitrix24.Template");return n.PopupManager.create({id:"push-invitations",className:"popup-window-dark",background:"rgb(8, 93, 193)",closeIcon:!0,autoHide:!1,closeByEsc:!0,padding:12,borderRadius:20,contentPadding:0,offsetTop:10,offsetLeft:e?-310:-277,angle:{offset:360,position:"top"},bindElement:this.invitationButton,bindOptions:{forceBindPosition:!1},width:440,minHeight:120,content:this.getContent(),events:{onClose:()=>{t(),BX.userOptions.save("intranet.invitation","invitationNotificationTransitionBalloonTs",null,Math.floor(Date.now()/1e3))}}})}},{key:"getContent",value:function(){const t=babelHelpers.classPrivateFieldGet(this,h).title,i=babelHelpers.classPrivateFieldGet(this,h).description;return e.Dom.create("div",{props:{className:"intranet-notification-container"},children:[e.Dom.create("div",{props:{className:"intranet-notification-container__image-wrapper"},children:[c(this,d,N).call(this)]}),e.Dom.create("div",{props:{className:"intranet-notification-content"},children:[c(this,v,B).call(this,t,i),c(this,b,I).call(this)]})]})}},{key:"show",value:function(){this.invitationButton&&i.BannerDispatcher.critical.toQueue(t=>{babelHelpers.classPrivateFieldSet(this,p,this.createNotificationBalloon(t)),babelHelpers.classPrivateFieldGet(this,p).show(),babelHelpers.classPrivateFieldGet(this,p).zIndexComponent.setZIndex(400),c(this,f,w).call(this,"push_show"),this.invitationButton.addEventListener("click",()=>{var t;null===(t=babelHelpers.classPrivateFieldGet(this,p))||void 0===t||t.close()})})}}]),t}();function N(){return e.Dom.create("div",{props:{className:"intranet-notification-container__image"}})}function B(t,i){return e.Dom.create("div",{props:{className:"intranet-notification-content-wrapper"},children:[e.Dom.create("h4",{props:{className:"intranet-notification-content__title"},html:t}),e.Dom.create("span",{props:{className:"intranet-notification-content__description"},html:i})]})}function I(){const t=7===babelHelpers.classPrivateFieldGet(this,h).type,i=t?e.Loc.getMessage("INTRANET_INVITATION_NOTIFICATION_BALLON_BUTTON_REINVITE"):e.Loc.getMessage("INTRANET_INVITATION_NOTIFICATION_BALLON_BUTTON_INVITE");return new a.Button({text:i,round:!0,noCaps:!0,className:"intranet-notification-content__action",onclick:()=>{if(babelHelpers.classPrivateFieldGet(this,p).close(),c(this,f,w).call(this,"button_click"),t)window.location.href="/company/?INVITED=Y";else{const t=document.createElement("a");t.setAttribute("onclick",babelHelpers.classPrivateFieldGet(this,u)),t.click()}}}).render()}function w(t){const e={tool:"invitation",category:"onboarding",event:t,type:{1:"common",3:"tasks",4:"crm",5:"automatization",6:"common",7:"repeat_invite"}[babelHelpers.classPrivateFieldGet(this,h).type]||"unknown"};o.sendData(e)}t.InvitationNotification=m}(this.BX.Intranet=this.BX.Intranet||{},BX,BX.UI,BX.Main,BX.UI,BX.UI.Analytics);
//# sourceMappingURL=invitation-notification.bundle.js.map
