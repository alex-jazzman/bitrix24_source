{"version":3,"file":"avatar-widget.bundle.js","sources":["../src/content/content.js","../src/analytics.js","../src/tools/base-tool.js","../src/tools/base-main-tool.js","../src/tools/extension-tool.js","../src/tools/security-tool.js","../src/tools/my-documents-tool.js","../src/tools/salary-vacation-tool.js","../src/content/main-content.js","../src/tools/base-footer-tool.js","../src/tools/theme-tool.js","../src/tools/pulse-tool.js","../src/tools/logout-tool.js","../src/content/footer-content.js","../src/tools/base-secondary-tool.js","../src/tools/account-changer-tool.js","../src/tools/administration-tool.js","../src/tools/performance-review-tool.js","../src/content/secondary-content.js","../src/tools/install-mobile-tool.js","../src/tools/fast-mobile-auth-tool.js","../src/tools/applications-installer-tool.js","../src/content/application-content.js","../src/content/header-subsection-content.js","../src/content/mobile-auth-content.js","../src/tools/security-secondary-tool.js","../src/tools/theme-secondary-tool.js","../src/content/extranet-secondary-content.js","../src/popup.js","../src/avatar-widget.js"],"sourcesContent":["import { EventEmitter } from 'main.core.events';\nimport { Cache } from 'main.core';\nimport type { ConfigOptions, BaseContentOptions } from '../types';\n\nexport class Content extends EventEmitter\n{\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options: BaseContentOptions)\n\t{\n\t\tsuper();\n\t\tthis.setOptions(options);\n\t\tthis.setEventNamespace('BX.Intranet.AvatarWidget.Content');\n\t}\n\n\tsetOptions(options: BaseContentOptions): Content\n\t{\n\t\tthis.cache.set('options', options);\n\n\t\treturn this;\n\t}\n\n\tgetOptions(): BaseContentOptions\n\t{\n\t\treturn this.cache.get('options', {});\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\tthrow new Error('Must be implemented in a child class');\n\t}\n\n\tgetConfig(): ConfigOptions\n\t{\n\t\treturn {\n\t\t\thtml: this.getLayout(),\n\t\t\tminHeight: '50px',\n\t\t\tmargin: '0 13px',\n\t\t};\n\t}\n}\n","import { sendData } from 'ui.analytics';\n\nexport class Analytics\n{\n\tstatic TOOLS = 'intranet';\n\tstatic CATEGORY = 'ava_menu';\n\tstatic CATEGORY_PROFILE = 'user_profile';\n\tstatic EVENT_OPEN_WIDGET = 'menu_open';\n\tstatic EVENT_PROFILE_VIEW = 'profile_view';\n\tstatic EVENT_CLICK_SALARY = 'click_salary';\n\tstatic EVENT_CLICK_INSTALL_DESKTOP_APP = 'click_install_desktop_app';\n\tstatic EVENT_CLICK_INSTALL_MOBILE_APP = 'click_install_mobile_app';\n\tstatic EVENT_CLICK_FAST_MOBILE_AUTH = 'click_fast_mobile_auth';\n\tstatic EVENT_CLICK_2FA_SETUP = 'click_2fa_setup';\n\tstatic EVENT_CLICK_EXTENSION = 'click_extension';\n\tstatic EVENT_CLICK_LOGOUT = 'click_logout';\n\tstatic EVENT_CLICK_CHANGE_PORTAL_THEME = 'click_change_portal_theme';\n\tstatic EVENT_CLICK_NETWORK = 'click_network';\n\tstatic EVENT_CLICK_ACTIVITY_PORTAL_LIST = 'click_activity_portal_list';\n\tstatic EVENT_CLICK_PULSE = 'click_open_pulse';\n\tstatic EVENT_CLICK_MY_DOCUMENTS = 'click_open_my_documents';\n\n\tstatic send(event: string): void\n\t{\n\t\tsendData({\n\t\t\ttool: Analytics.TOOLS,\n\t\t\tcategory: Analytics.CATEGORY,\n\t\t\tevent,\n\t\t});\n\t}\n\n\tstatic sendOpenProfile(): void\n\t{\n\t\tsendData({\n\t\t\ttool: Analytics.TOOLS,\n\t\t\tcategory: Analytics.CATEGORY_PROFILE,\n\t\t\tevent: Analytics.EVENT_PROFILE_VIEW,\n\t\t\tc_section: Analytics.CATEGORY,\n\t\t});\n\t}\n\n\tstatic sendOpenCommonSecurity(): void\n\t{\n\t\tsendData({\n\t\t\ttool: 'settings',\n\t\t\tcategory: 'common_security',\n\t\t\tevent: 'start_page',\n\t\t\tc_section: Analytics.CATEGORY,\n\t\t});\n\t}\n}\n","import { Cache } from 'main.core';\n\nexport class BaseTool\n{\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options = {})\n\t{\n\t\tthis.options = options;\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\tthrow new Error('Must be implemented in a child class');\n\t}\n\n\tgetIconClass(): string\n\t{\n\t\tthrow new Error('Must be implemented in a child class');\n\t}\n\n\tonClick(): void\n\t{\n\t\tthrow new Error('Must be implemented in a child class');\n\t}\n\n\tgetIconElement(): HTMLElement\n\t{\n\t\tthrow new Error('Must be implemented in a child class');\n\t}\n\n\tgetTitle(): string\n\t{\n\t\treturn this.options.title || this.options.text || '';\n\t}\n}\n","import { Tag } from 'main.core';\nimport { BaseTool } from './base-tool';\n\nexport class BaseMainTool extends BaseTool\n{\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div data-testid=\"bx-avatar-widget-main-tool-${this.getId()}\" onclick=\"${this.onClick.bind(this)}\" class=\"intranet-avatar-widget-main-tool__wrapper\">\n\t\t\t\t\t<div class=\"intranet-avatar-widget-main-tool-icon__wrapper\">\n\t\t\t\t\t\t${this.getIconElement()}\n\t\t\t\t\t\t${this.#getCounterWrapper()}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"intranet-avatar-widget-main-tool__title\">\n\t\t\t\t\t\t${this.getTitle()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetIconElement(): HTMLElement\n\t{\n\t\treturn this.cache.remember('icon', () => {\n\t\t\treturn Tag.render`<i class=\"ui-icon-set ${this.getIconClass()} intranet-avatar-widget-main-tool__icon\"/>`;\n\t\t});\n\t}\n\n\tgetCounter(): ?Counter\n\t{\n\t\treturn null;\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn '';\n\t}\n\n\t#getCounterWrapper(): ?HTMLElement\n\t{\n\t\treturn this.cache.remember('counterWrapper', () => {\n\t\t\tconst counter = this.getCounter();\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-avatar-widget-main-tool__counter-wrapper\">\n\t\t\t\t\t${counter?.render()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}\n","import { BaseMainTool } from './base-main-tool';\nimport { Menu } from 'main.popup';\nimport { EventEmitter } from 'main.core.events';\nimport { Analytics } from '../analytics';\n\nexport class ExtensionTool extends BaseMainTool\n{\n\tgetIconClass(): string\n\t{\n\t\treturn '--o-box';\n\t}\n\n\tonClick(): void\n\t{\n\t\tAnalytics.send(Analytics.EVENT_CLICK_EXTENSION);\n\t\tthis.#getMenu().toggle();\n\t}\n\n\t#getMenu(): Menu\n\t{\n\t\treturn this.cache.remember('menu', () => {\n\t\t\tconst menu = new Menu({\n\t\t\t\tbindElement: this.getIconElement(),\n\t\t\t\titems: this.options.items,\n\t\t\t\tangle: true,\n\t\t\t\tcachable: false,\n\t\t\t\toffsetLeft: 10,\n\t\t\t\tfixed: true,\n\t\t\t});\n\t\t\tEventEmitter.subscribe('SidePanel.Slider:onOpenStart', () => {\n\t\t\t\tmenu.close();\n\t\t\t});\n\n\t\t\treturn menu;\n\t\t});\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn 'extension';\n\t}\n}\n","import { BaseMainTool } from './base-main-tool';\nimport { SidePanel } from 'main.sidepanel';\nimport { Analytics } from '../analytics';\n\nexport class SecurityTool extends BaseMainTool\n{\n\tgetIconClass(): string\n\t{\n\t\treturn '--o-shield-checked';\n\t}\n\n\tonClick(): void\n\t{\n\t\tAnalytics.send(Analytics.EVENT_CLICK_2FA_SETUP);\n\t\tSidePanel.Instance.open(this.options.url, { width: 1100 });\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn 'security';\n\t}\n}\n","import { FeaturePromotersRegistry } from 'ui.info-helper';\nimport { Dom, Loc, Type } from 'main.core';\nimport { Router } from 'crm.router';\nimport { Counter, CounterStyle } from 'ui.cnt';\nimport { PULL } from 'pull.client';\nimport { BaseMainTool } from './base-main-tool';\nimport { Analytics } from '../analytics';\n\nexport class MyDocumentsTool extends BaseMainTool\n{\n\tgetIconClass(): string\n\t{\n\t\treturn '--o-file';\n\t}\n\n\tonClick(): void\n\t{\n\t\tAnalytics.send(Analytics.EVENT_CLICK_MY_DOCUMENTS);\n\t\tif (this.options.isLocked)\n\t\t{\n\t\t\tFeaturePromotersRegistry.getPromoter({ code: 'limit_office_e_signature' }).show();\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst userId = Number(Loc.getMessage('USER_ID'));\n\n\t\tif (userId > 0)\n\t\t{\n\t\t\tRouter.openSlider(\n\t\t\t\t`${Loc.getMessage('SITE_DIR')}company/personal/user/${userId}/sign?noRedirect=Y`,\n\t\t\t\t{ width: 1000, cacheable: false },\n\t\t\t);\n\t\t}\n\t}\n\n\tgetCounter(): ?Counter\n\t{\n\t\treturn this.cache.remember('counter', () => {\n\t\t\tif (Number(this.options.counter) < 1)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tPULL.subscribe({\n\t\t\t\tmoduleId: 'sign',\n\t\t\t\tcommand: this.options.counterEventName,\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tif (!Type.isNumber(params?.needActionCount))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.options.counter = params.needActionCount;\n\n\t\t\t\t\tif (params?.needActionCount > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getCounter().update(params.needActionCount);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getCounter().destroy();\n\t\t\t\t\t\tconst icon = this.getLayout().querySelector('.intranet-avatar-widget-item__icon');\n\t\t\t\t\t\tDom.removeClass(icon, '--active');\n\t\t\t\t\t\tthis.cache.delete('counter');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treturn new Counter({\n\t\t\t\tcolor: Counter.Color.DANGER,\n\t\t\t\tsize: Counter.Size.MEDIUM,\n\t\t\t\tvalue: this.options.counter,\n\t\t\t\tstyle: CounterStyle.FILLED_ALERT,\n\t\t\t\tuseAirDesign: true,\n\t\t\t});\n\t\t});\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn 'my-documents';\n\t}\n}\n","import { BaseMainTool } from './base-main-tool';\nimport { Event, Dom } from 'main.core';\nimport { SalaryVacationMenu } from 'humanresources.hcmlink.salary-vacation-menu';\nimport { Analytics } from '../analytics';\n\nexport class SalaryVacationTool extends BaseMainTool\n{\n\tgetIconClass(): string\n\t{\n\t\treturn '--o-favorite';\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\tconst container = super.getLayout();\n\n\t\tif (this.#getMenu().isHidden())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this.#getMenu().isDisabled())\n\t\t{\n\t\t\tDom.attr(container, 'data-hint', '');\n\t\t\tDom.attr(container, 'data-hint-interactivity', '');\n\t\t\tEvent.bind(container, 'mouseenter', () => {\n\t\t\t\tthis.#getHintInstance().show(container, this.options.disabledHint);\n\t\t\t});\n\n\t\t\tEvent.bind(container, 'mouseleave', () => {\n\t\t\t\tthis.#getHintInstance().hide(container);\n\t\t\t});\n\t\t}\n\n\t\treturn super.getLayout();\n\t}\n\n\tonClick(): void\n\t{\n\t\tAnalytics.send(Analytics.EVENT_CLICK_SALARY);\n\t\tif (!this.#getMenu().isHidden() && !this.#getMenu().isDisabled())\n\t\t{\n\t\t\tthis.#getMenu().show(this.getLayout());\n\t\t}\n\t}\n\n\t#getMenu(): SalaryVacationMenu\n\t{\n\t\treturn this.cache.remember('salaryMenu', () => {\n\t\t\treturn new SalaryVacationMenu();\n\t\t});\n\t}\n\n\t#getHintInstance(): Manager\n\t{\n\t\treturn this.cache.remember('hint', () => {\n\t\t\treturn BX.UI.Hint.createInstance({\n\t\t\t\tpopupParameters: {\n\t\t\t\t\tfixed: true,\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn 'salary-vacation';\n\t}\n}\n","import { Tag, Dom } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { AvatarRound, AvatarRoundExtranet, AvatarRoundGuest, AvatarBase } from 'ui.avatar';\nimport { WorkStatusControlPanel } from 'timeman.work-status-control-panel';\nimport { Content } from './content';\nimport { Analytics } from '../analytics';\nimport type { MainContentOptions } from '../types';\nimport { ExtensionTool } from '../tools/extension-tool';\nimport { SecurityTool } from '../tools/security-tool';\nimport type { BaseMainTool } from '../tools/base-main-tool';\nimport { MyDocumentsTool } from '../tools/my-documents-tool';\nimport { SalaryVacationTool } from '../tools/salary-vacation-tool';\n\nexport class MainContent extends Content\n{\n\t#activeOnclick: boolean = true;\n\n\tgetConfig(): Object\n\t{\n\t\treturn {\n\t\t\thtml: this.getLayout(),\n\t\t};\n\t}\n\n\tgetOptions(): MainContentOptions\n\t{\n\t\treturn super.getOptions();\n\t}\n\n\t#handleClickTaskStatus(event): void\n\t{\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tthis.#setEventHandlers();\n\t\t\tconst onclick = () => {\n\t\t\t\tif (this.#activeOnclick)\n\t\t\t\t{\n\t\t\t\t\tBX.SidePanel.Instance.open(this.getOptions().url);\n\t\t\t\t\tAnalytics.sendOpenProfile();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-avatar-widget-item__wrapper\" data-testid=\"bx-avatar-widget-content-main\">\n\t\t\t\t\t<div onclick=\"${onclick}\" class=\"intranet-avatar-widget-item-main__wrapper-head\">\n\t\t\t\t\t\t<div class=\"intranet-avatar-widget-item__avatar\">\n\t\t\t\t\t\t\t${this.#getAvatar().getContainer()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"intranet-avatar-widget-item__info-wrapper\">\n\t\t\t\t\t\t\t${this.#getFullName()}\n\t\t\t\t\t\t\t${this.#getWorkPosition()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.#getStatus()}\n\t\t\t\t\t${this.#getWorkStatusBlock()}\n\t\t\t\t\t${this.#getToolsContainer()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getFullName(): HTMLElement\n\t{\n\t\treturn this.cache.remember('title', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"intranet-avatar-widget-item__title\">\n\t\t\t\t\t<span>${this.getOptions().fullName}</span>\n\t\t\t\t\t<i class=\"ui-icon-set --chevron-right-s intranet-avatar-widget-item__chevron\"/>\n\t\t\t\t</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getWorkPosition(): ?HTMLElement\n\t{\n\t\treturn this.cache.remember('workPosition', () => {\n\t\t\tif (!this.getOptions().workPosition)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"intranet-avatar-widget-item__description\">${this.getOptions().workPosition}</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getAvatar(): AvatarBase\n\t{\n\t\treturn this.cache.remember('avatar', () => {\n\t\t\tconst options = {\n\t\t\t\tsize: 48,\n\t\t\t\tuserpicPath: encodeURI(this.getOptions().userPhotoSrc),\n\t\t\t};\n\t\t\tlet avatar = null;\n\n\t\t\tif (this.getOptions().role === 'extranet')\n\t\t\t{\n\t\t\t\tavatar = new AvatarRoundExtranet(options);\n\t\t\t}\n\t\t\telse if (this.getOptions().role === 'collaber')\n\t\t\t{\n\t\t\t\tavatar = new AvatarRoundGuest(options);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tavatar = new AvatarRound(options);\n\t\t\t}\n\n\t\t\treturn avatar;\n\t\t});\n\t}\n\n\t#getStatus(): ?HTMLElement\n\t{\n\t\treturn this.cache.remember('status', () => {\n\t\t\tif (!this.getOptions().status && !this.getOptions().vacation)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst wrapper = Tag.render`\n\t\t\t\t<div class=\"intranet-avatar-widget-main__status-wrapper\"></div>\n\t\t\t`;\n\n\t\t\tif (this.getOptions().vacation)\n\t\t\t{\n\t\t\t\tDom.append(Tag.render`\n\t\t\t\t\t<span class=\"intranet-avatar-widget-main__status --vacation\">\n\t\t\t\t\t\t${this.getOptions().vacation}\n\t\t\t\t\t</span>\n\t\t\t\t`, wrapper);\n\t\t\t}\n\n\t\t\tif (this.getOptions().status)\n\t\t\t{\n\t\t\t\tconst status = Tag.render`\n\t\t\t\t\t<span class=\"intranet-avatar-widget-main__status\">\n\t\t\t\t\t\t${this.getOptions().status}\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\n\t\t\t\tif (this.getOptions().role === 'collaber')\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(status, '--collaber');\n\t\t\t\t}\n\t\t\t\telse if (this.getOptions().role === 'extranet')\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(status, '--extranet');\n\t\t\t\t}\n\n\t\t\t\tDom.append(status, wrapper);\n\t\t\t}\n\n\t\t\treturn wrapper;\n\t\t});\n\t}\n\n\t#getWorkStatusBlock(): ?HTMLElement\n\t{\n\t\treturn this.cache.remember('worktime', () => {\n\t\t\tif (!this.getOptions().isTimemanAvailable)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (!this.#getWorkStatusControlPanel())\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div\n\t\t\t\t\tclass=\"intranet-avatar-widget-item__task-status task-status\"\n\t\t\t\t\tonclick=\"${this.#handleClickTaskStatus}\"\n\t\t\t\t>\n\t\t\t\t\t${this.#getWorkStatusControlPanel()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getWorkStatusControlPanel(): ?HTMLElement\n\t{\n\t\treturn this.cache.remember('taskStatusActions', () => {\n\t\t\ttry\n\t\t\t{\n\t\t\t\treturn (new WorkStatusControlPanel()).renderWorkStatusControlPanel();\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tconsole.error(error);\n\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\t}\n\n\t#getToolsContainer(): ?HTMLElement\n\t{\n\t\treturn this.cache.remember('tools-container', () => {\n\t\t\tif (!this.getOptions().tools || Object.keys(this.getOptions().tools).length === 0)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst container = Tag.render`\n\t\t\t\t<div class=\"intranet-avatar-widget-main-tools__wrapper\"></div>\n\t\t\t`;\n\t\t\tconst tools = this.#getTools();\n\n\t\t\ttools.forEach((tool) => {\n\t\t\t\tDom.append(tool.getLayout(), container);\n\t\t\t});\n\n\t\t\treturn container;\n\t\t});\n\t}\n\n\t#getTools(): Array<BaseMainTool>\n\t{\n\t\treturn this.cache.remember('tools', () => {\n\t\t\tconst tools = this.getOptions().tools;\n\n\t\t\treturn [\n\t\t\t\ttools.myDocuments ? new MyDocumentsTool(tools.myDocuments) : null,\n\t\t\t\ttools.salaryVacation ? new SalaryVacationTool(tools.salaryVacation) : null,\n\t\t\t\ttools.security ? new SecurityTool(tools.security) : null,\n\t\t\t\ttools.extension ? new ExtensionTool(tools.extension) : null,\n\t\t\t].filter(Boolean);\n\t\t});\n\t}\n\n\t#setEventHandlers(): void\n\t{\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Intranet.UserProfile:Avatar:changed',\n\t\t\t({ data: [{ url, userId }] }) => {\n\t\t\t\tif (this.getOptions().id > 0 && userId && this.getOptions().id.toString() === userId.toString())\n\t\t\t\t{\n\t\t\t\t\tconst preparedUrl = encodeURI(url);\n\t\t\t\t\tthis.getOptions().userPhotoSrc = preparedUrl;\n\t\t\t\t\tthis.#getAvatar().setUserPic(preparedUrl);\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Intranet.UserProfile:Name:changed',\n\t\t\t({ data: [{ fullName }] }) => {\n\t\t\t\tthis.getOptions().fullName = fullName;\n\t\t\t\tthis.#getFullName().querySelector('span').innerHTML = fullName;\n\t\t\t},\n\t\t);\n\t\tEventEmitter.subscribe('BX.Intranet.AvatarWidget.Popup:enabledAutoHide', () => {\n\t\t\tthis.#activeOnclick = true;\n\t\t});\n\t\tEventEmitter.subscribe('BX.Intranet.AvatarWidget.Popup:disabledAutoHide', () => {\n\t\t\tthis.#activeOnclick = false;\n\t\t});\n\t}\n}\n","import { Cache, Tag } from 'main.core';\n\nexport class BaseFooterTool\n{\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options = {})\n\t{\n\t\tthis.options = options;\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div data-testid=\"bx-avatar-widget-footer-tool-${this.getId()}\" onclick=\"${this.onClick.bind(this)}\" class=\"intranet-avatar-widget-footer__item\">\n\t\t\t\t${this.getTitle()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonClick(): void\n\t{\n\t\tthrow new Error('Must be implemented in a child class');\n\t}\n\n\tgetTitle(): string\n\t{\n\t\treturn this.options.title || this.options.text || '';\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn '';\n\t}\n}\n","import { BaseFooterTool } from './base-footer-tool';\nimport { Analytics } from '../analytics';\nimport { EventEmitter } from 'main.core.events';\n\nexport class ThemeTool extends BaseFooterTool\n{\n\tonClick(): void\n\t{\n\t\tAnalytics.send(Analytics.EVENT_CLICK_CHANGE_PORTAL_THEME);\n\t\tEventEmitter.emit('BX.Intranet.AvatarWidget.Popup:openChild');\n\t\tBX.Intranet.Bitrix24.ThemePicker.Singleton.showDialog(false);\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn 'theme';\n\t}\n}\n","import { ajax, Runtime } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { BaseFooterTool } from './base-footer-tool';\nimport { Analytics } from '../analytics';\n\nexport class PulseTool extends BaseFooterTool\n{\n\tonClick(): void\n\t{\n\t\tAnalytics.send(Analytics.EVENT_CLICK_PULSE);\n\t\tajax.runAction('intranet.user.widget.getUserStatComponent', {\n\t\t\tmode: 'class',\n\t\t}).then((response) => {\n\t\t\tRuntime.html(null, response.data.html).then(() => {\n\t\t\t\tif (window.openIntranetUStat)\n\t\t\t\t{\n\t\t\t\t\tEventEmitter.emit('BX.Intranet.AvatarWidget.Popup:openChild');\n\t\t\t\t\topenIntranetUStat();\n\t\t\t\t}\n\t\t\t}).catch(() => {});\n\t\t}).catch(() => {});\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn 'pulse';\n\t}\n}\n","import { BaseFooterTool } from './base-footer-tool';\nimport { Type, Uri } from 'main.core';\nimport { DesktopApi } from 'im.v2.lib.desktop-api';\nimport { Analytics } from '../analytics';\n\nexport class LogoutTool extends BaseFooterTool\n{\n\tonClick(): void\n\t{\n\t\tAnalytics.send(Analytics.EVENT_CLICK_LOGOUT);\n\t\tif (!Type.isNil(DesktopApi) && DesktopApi.isDesktop())\n\t\t{\n\t\t\tDesktopApi.logout();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst backUrl = new Uri(window.location.pathname);\n\t\t\tbackUrl.removeQueryParam(this.options.removeQueryParam);\n\t\t\tconst newUrl = new Uri(this.options.path);\n\t\t\tnewUrl.setQueryParam('sessid', BX.bitrix_sessid());\n\t\t\tnewUrl.setQueryParam('backurl', encodeURIComponent(backUrl.toString()));\n\t\t\tdocument.location.href = newUrl;\n\t\t}\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn 'logout';\n\t}\n}\n","import { Dom, Tag } from 'main.core';\nimport { Content } from './content';\nimport { BaseFooterTool } from '../tools/base-footer-tool';\nimport { ThemeTool } from '../tools/theme-tool';\nimport { PulseTool } from '../tools/pulse-tool';\nimport { LogoutTool } from '../tools/logout-tool';\n\nexport class FooterContent extends Content\n{\n\tgetConfig(): Object\n\t{\n\t\treturn {\n\t\t\thtml: this.getLayout(),\n\t\t\twithoutBackground: true,\n\t\t\tmargin: '0 0 16px 0',\n\t\t};\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst container = Tag.render`\n\t\t\t\t<div data-testid=\"bx-avatar-widget-content-footer\" class=\"intranet-avatar-widget-footer__wrapper\"/>\n\t\t\t`;\n\t\t\tconst tools = this.#getTools();\n\n\t\t\ttools.forEach((tool) => {\n\t\t\t\tDom.append(tool.getLayout(), container);\n\t\t\t});\n\n\t\t\treturn container;\n\t\t});\n\t}\n\n\t#getTools(): Array<BaseFooterTool>\n\t{\n\t\treturn this.cache.remember('tools', () => {\n\t\t\tconst tools = this.getOptions().tools;\n\n\t\t\treturn [\n\t\t\t\ttools.theme ? new ThemeTool(tools.theme) : null,\n\t\t\t\ttools.pulse ? new PulseTool(tools.pulse) : null,\n\t\t\t\ttools.logout ? new LogoutTool(tools.logout) : null,\n\t\t\t].filter(Boolean);\n\t\t});\n\t}\n}\n","import { BaseTool } from './base-tool';\nimport { Tag } from 'main.core';\nimport { Counter } from 'ui.cnt';\n\nexport class BaseSecondaryTool extends BaseTool\n{\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div data-testid=\"bx-avatar-widget-tool-${this.getId()}\" onclick=\"${this.onClick.bind(this)}\" class=\"intranet-avatar-widget-secondary-tool__wrapper\">\n\t\t\t\t\t${this.getIconElement()}\n\t\t\t\t\t<div class=\"intranet-avatar-widget-item__info-wrapper\">\n\t\t\t\t\t\t<span class=\"intranet-avatar-widget-item__title\">\n\t\t\t\t\t\t\t${this.getTitle()}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.#getCounterWrapper()}\n\t\t\t\t\t${this.getActionElement()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetIconElement(): HTMLElement\n\t{\n\t\treturn this.cache.remember('icon', () => {\n\t\t\treturn Tag.render`<i class=\"ui-icon-set ${this.getIconClass()} intranet-avatar-widget-secondary-tool__icon\"/>`;\n\t\t});\n\t}\n\n\tgetActionElement(): HTMLElement\n\t{\n\t\treturn this.cache.remember('actionElement', () => {\n\t\t\treturn Tag.render`<i class=\"ui-icon-set --chevron-right-m intranet-avatar-widget-item__chevron\"/>`;\n\t\t});\n\t}\n\n\tgetCounter(): ?Counter\n\t{\n\t\treturn null;\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn '';\n\t}\n\n\t#getCounterWrapper(): HTMLElement\n\t{\n\t\treturn this.cache.remember('counterWrapper', () => {\n\t\t\tconst counter = this.getCounter();\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-avatar-widget-item__counter\">\n\t\t\t\t\t${counter?.render()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}\n","import { BaseSecondaryTool } from './base-secondary-tool';\nimport { DesktopAccountList } from 'intranet.desktop-account-list';\nimport { EventEmitter } from 'main.core.events';\nimport { Analytics } from '../analytics';\nimport string from \"../../../../../../../salescenter/install/js/salescenter/deliveryselector/src/properties/string\";\n\nexport class AccountChangerTool extends BaseSecondaryTool\n{\n\tgetIconClass(): string\n\t{\n\t\treturn '--o-structure-vertical';\n\t}\n\n\tonClick(): void\n\t{\n\t\tif (this.options.type === 'desktop')\n\t\t{\n\t\t\tAnalytics.send(Analytics.EVENT_CLICK_ACTIVITY_PORTAL_LIST);\n\t\t\tEventEmitter.emit('BX.Intranet.AvatarWidget.Popup:openChild');\n\t\t\t(new DesktopAccountList({ bindElement: document.querySelector('[data-id=\"bx-avatar-widget\"]') })).show();\n\t\t}\n\t\telse if (this.options.type === 'network')\n\t\t{\n\t\t\tAnalytics.send(Analytics.EVENT_CLICK_NETWORK);\n\t\t\twindow.open(this.options.path, '_blank');\n\t\t}\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn 'account-changer';\n\t}\n}\n","import { BaseSecondaryTool } from './base-secondary-tool';\n\nexport class AdministrationTool extends BaseSecondaryTool\n{\n\tgetIconClass(): string\n\t{\n\t\treturn '--o-filter-2-lines';\n\t}\n\n\tonClick(): void\n\t{\n\t\twindow.open(this.options.path, '_blank');\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn 'administration';\n\t}\n}\n","import { BaseSecondaryTool } from './base-secondary-tool';\n\nexport class PerformanceReviewTool extends BaseSecondaryTool\n{\n\tgetIconClass(): string\n\t{\n\t\treturn '--o-feedback';\n\t}\n\n\tonClick(): void\n\t{\n\t\tdocument.location.href = this.options.path;\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn 'performance-review';\n\t}\n}\n","import { Content } from './content';\nimport { Tag, Dom } from 'main.core';\nimport { AccountChangerTool } from '../tools/account-changer-tool';\nimport type { BaseSecondaryTool } from '../tools/base-secondary-tool';\nimport { AdministrationTool } from '../tools/administration-tool';\nimport { PerformanceReviewTool } from '../tools/performance-review-tool';\n\nexport class SecondaryContent extends Content\n{\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst container = Tag.render`\n\t\t\t\t<div data-testid=\"bx-avatar-widget-content-${this.getId()}\" class=\"intranet-avatar-widget-item__wrapper\"></div>\n\t\t\t`;\n\t\t\tthis.getTools().forEach((tool) => {\n\t\t\t\tDom.append(tool.getLayout(), container);\n\t\t\t});\n\n\t\t\treturn container;\n\t\t});\n\t}\n\n\tgetTools(): Array<BaseSecondaryTool>\n\t{\n\t\treturn this.cache.remember('tools', () => {\n\t\t\tconst tools = this.getOptions().tools;\n\n\t\t\treturn [\n\t\t\t\ttools.accountChanger ? new AccountChangerTool(tools.accountChanger) : null,\n\t\t\t\ttools.admin ? new AdministrationTool(tools.admin) : null,\n\t\t\t\ttools.perfReview ? new PerformanceReviewTool(tools.perfReview) : null,\n\t\t\t].filter(Boolean);\n\t\t});\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn 'secondary';\n\t}\n}\n","import { BaseSecondaryTool } from './base-secondary-tool';\nimport { EventEmitter } from 'main.core.events';\nimport { Analytics } from '../analytics';\n\nexport class InstallMobileTool extends BaseSecondaryTool\n{\n\tgetIconClass(): string\n\t{\n\t\treturn '--o-mobile';\n\t}\n\n\tonClick(): void\n\t{\n\t\tAnalytics.send(Analytics.EVENT_CLICK_INSTALL_MOBILE_APP);\n\t\tEventEmitter.emit('BX.Intranet.AvatarWidget.FastMobileAuthTool:onClick');\n\t}\n}\n","import { BaseSecondaryTool } from './base-secondary-tool';\nimport { EventEmitter } from 'main.core.events';\nimport { Analytics } from '../analytics';\n\nexport class FastMobileAuthTool extends BaseSecondaryTool\n{\n\tgetIconClass(): string\n\t{\n\t\treturn '--o-qr-code';\n\t}\n\n\tonClick(): void\n\t{\n\t\tAnalytics.send(Analytics.EVENT_CLICK_FAST_MOBILE_AUTH);\n\t\tEventEmitter.emit('BX.Intranet.AvatarWidget.FastMobileAuthTool:onClick');\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn 'fast-mobile-auth';\n\t}\n}\n","import { Tag } from 'main.core';\nimport { Button, AirButtonStyle } from 'ui.buttons';\nimport { BaseSecondaryTool } from './base-secondary-tool';\nimport { Menu } from 'main.popup';\nimport { EventEmitter } from 'main.core.events';\nimport { Analytics } from '../analytics';\n\nexport class ApplicationsInstallerTool extends BaseSecondaryTool\n{\n\tgetIconElement(): HTMLElement\n\t{\n\t\treturn this.cache.remember('icon', () => {\n\t\t\tif (this.options.mobile.installed)\n\t\t\t{\n\t\t\t\treturn Tag.render`\n\t\t\t\t\t<span class=\"intranet-avatar-widget-secondary-tool-icons__wrapper\">\n\t\t\t\t\t\t${this.#getMobileIcon()}\n\t\t\t\t\t\t<div class=\"intranet-avatar-widget-secondary-tool-icons__seporator\"></div>\n\t\t\t\t\t\t${this.#getDesktopIcon()}\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\t\t\t}\n\n\t\t\treturn this.#getDesktopIcon();\n\t\t});\n\t}\n\n\tgetActionElement(): HTMLElement\n\t{\n\t\treturn this.cache.remember('actionElement', () => {\n\t\t\tif (this.options.desktop.installed && this.options.menu)\n\t\t\t{\n\t\t\t\tconst onclick = (element) => {\n\t\t\t\t\tthis.#getInstallMenu(element.target).toggle();\n\t\t\t\t};\n\n\t\t\t\treturn Tag.render`\n\t\t\t\t\t<i onclick=\"${onclick}\" class=\"ui-icon-set --more-m intranet-avatar-widget-item__more\"/>\n\t\t\t\t`;\n\t\t\t}\n\n\t\t\tconst button = (new Button({\n\t\t\t\ttag: Button.Tag.LINK,\n\t\t\t\tsize: Button.Size.EXTRA_SMALL,\n\t\t\t\ttext: this.options.desktop.buttonName,\n\t\t\t\tuseAirDesign: true,\n\t\t\t\tstyle: AirButtonStyle.FILLED,\n\t\t\t\tnoCaps: true,\n\t\t\t\tlink: this.options.desktop.installLink,\n\t\t\t\twide: true,\n\t\t\t})).render();\n\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"intranet-avatar-widget-secondary-tool-application__button-wrapper\">\n\t\t\t\t\t${button}\n\t\t\t\t</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getMobileIcon(): HTMLElement\n\t{\n\t\treturn this.cache.remember('mobileIcon', () => {\n\t\t\tlet className = 'ui-icon-set --mobile-selected intranet-avatar-widget-secondary-tool-application__icon';\n\n\t\t\tif (this.options.mobile.installed)\n\t\t\t{\n\t\t\t\tclassName += ' --installed';\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<i class=\"${className}\"/>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getDesktopIcon(): HTMLElement\n\t{\n\t\treturn this.cache.remember('desktopIcon', () => {\n\t\t\tlet className = 'ui-icon-set intranet-avatar-widget-secondary-tool-application__icon';\n\n\t\t\tif (this.options.desktop.installed)\n\t\t\t{\n\t\t\t\tclassName += ' --screen-selected --installed';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tclassName += ' --o-screen';\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<i class=\"${className}\"/>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getInstallMenu(bindElement: HTMLElement): Menu\n\t{\n\t\treturn this.cache.remember('installMenu', () => {\n\t\t\tconst items = this.#getInstallMenuItems();\n\n\t\t\tif (items.length === 0)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn new Menu({\n\t\t\t\tbindElement,\n\t\t\t\titems,\n\t\t\t\toffsetLeft: 5,\n\t\t\t\tangle: true,\n\t\t\t\tfixed: true,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getInstallMenuItems(): Array\n\t{\n\t\tconst items = [];\n\n\t\tthis.options.menu.forEach((item) => {\n\t\t\tif (item.type === 'desktop')\n\t\t\t{\n\t\t\t\titems.push({\n\t\t\t\t\ttext: item.title,\n\t\t\t\t\thref: this.options.desktop.installLink,\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tAnalytics.send(Analytics.EVENT_CLICK_INSTALL_DESKTOP_APP);\n\t\t\t\t\t\tthis.#getInstallMenu().close();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (item.type === 'mobile')\n\t\t\t{\n\t\t\t\titems.push({\n\t\t\t\t\ttext: item.title,\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tAnalytics.send(Analytics.EVENT_CLICK_INSTALL_MOBILE_APP);\n\t\t\t\t\t\tthis.#getInstallMenu().close();\n\t\t\t\t\t\tEventEmitter.emit('BX.Intranet.AvatarWidget.ApplicationInstallerTool:onClick');\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn items;\n\t}\n\n\tonClick(): void\n\t{}\n\n\tgetId(): string\n\t{\n\t\treturn 'applications-installer';\n\t}\n}\n","import { Content } from './content';\nimport { Tag, Dom } from 'main.core';\nimport type { BaseSecondaryTool } from '../tools/base-secondary-tool';\nimport type { BaseTool } from '../tools/base-tool';\nimport { InstallMobileTool } from '../tools/install-mobile-tool';\nimport { FastMobileAuthTool } from '../tools/fast-mobile-auth-tool';\nimport { ApplicationsInstallerTool } from '../tools/applications-installer-tool';\n\nexport class ApplicationContent extends Content\n{\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst container = Tag.render`\n\t\t\t\t<div data-testid=\"bx-avatar-widget-content-application\" class=\"intranet-avatar-widget-item__wrapper\"></div>\n\t\t\t`;\n\t\t\tthis.#getTools().forEach((tool) => {\n\t\t\t\tDom.append(tool.getLayout(), container);\n\t\t\t});\n\n\t\t\treturn container;\n\t\t});\n\t}\n\n\t#getTools(): Array<BaseSecondaryTool | BaseTool>\n\t{\n\t\treturn this.cache.remember('tools', () => {\n\t\t\tconst tools = this.getOptions().tools;\n\n\t\t\treturn [\n\t\t\t\ttools.installMobile ? new InstallMobileTool(tools.installMobile) : null,\n\t\t\t\ttools.fastMobileAuth ? new FastMobileAuthTool(tools.fastMobileAuth) : null,\n\t\t\t\ttools.applicationsInstaller ? new ApplicationsInstallerTool(tools.applicationsInstaller) : null,\n\t\t\t].filter(Boolean);\n\t\t});\n\t}\n}\n","import { Content } from './content';\nimport { Tag } from 'main.core';\nimport { AirButtonStyle, Button } from 'ui.buttons';\nimport { EventEmitter } from 'main.core.events';\n\nexport class HeaderSubsectionContent extends Content\n{\n\tgetConfig(): Object\n\t{\n\t\treturn {\n\t\t\thtml: this.getLayout(),\n\t\t};\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div data-testid=\"bx-avatar-widget-content-${this.getId()}\" class=\"intranet-avatar-widget-item__wrapper\">\n\t\t\t\t\t<div class=\"intranet-avatar-widget-item-subsection__header\">\n\t\t\t\t\t\t${this.#getBackButton().render()}\n\t\t\t\t\t\t<span class=\"intranet-avatar-widget-item-subsection__title\">\n\t\t\t\t\t\t\t${this.getOptions().title}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.getContentWrapper()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getBackButton(): Button\n\t{\n\t\treturn this.cache.remember('backButton', () => {\n\t\t\tconst button = new Button({\n\t\t\t\ticon: 'chevron-left-l',\n\t\t\t\tsize: Button.Size.EXTRA_EXTRA_SMALL,\n\t\t\t\tstyle: AirButtonStyle.OUTLINE,\n\t\t\t\tuseAirDesign: true,\n\t\t\t\tonclick: () => {\n\t\t\t\t\tEventEmitter.emit('BX.Intranet.AvatarWidget.Subsection:back');\n\t\t\t\t},\n\t\t\t});\n\t\t\tbutton.setCollapsed(true);\n\n\t\t\treturn button;\n\t\t});\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn '';\n\t}\n}\n","import { Tag } from 'main.core';\nimport { ShortQrAuth } from 'ui.short-qr-auth';\nimport { HeaderSubsectionContent } from './header-subsection-content';\n\nexport class MobileAuthContent extends HeaderSubsectionContent\n{\n\tgetContentWrapper(): HTMLElement\n\t{\n\t\treturn this.cache.remember('content', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-avatar-widget-fast-mobile-auth__wrapper\">\n\t\t\t\t\t${this.#getQR().render()}\n\t\t\t\t\t${this.#getWarning()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn 'mobile-auth';\n\t}\n\n\t#getQR(): ShortQrAuth\n\t{\n\t\treturn this.cache.remember('qr', () => {\n\t\t\treturn new ShortQrAuth({ intent: 'profile', small: false, stub: false });\n\t\t});\n\t}\n\n\t#getWarning(): HTMLElement\n\t{\n\t\treturn this.cache.remember('warning', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-avatar-widget-fast-mobile-auth-tool__warning\">\n\t\t\t\t\t${this.getOptions().warning}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}\n","import { BaseSecondaryTool } from './base-secondary-tool';\nimport { SidePanel } from 'main.sidepanel';\nimport { Analytics } from '../analytics';\n\nexport class SecuritySecondaryTool extends BaseSecondaryTool\n{\n\tgetIconClass(): string\n\t{\n\t\treturn '--o-shield-checked';\n\t}\n\n\tonClick(): void\n\t{\n\t\tAnalytics.send(Analytics.EVENT_CLICK_2FA_SETUP);\n\t\tSidePanel.Instance.open(this.options.url, { width: 1100 });\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn 'security';\n\t}\n}\n","import { BaseSecondaryTool } from './base-secondary-tool';\nimport { Analytics } from '../analytics';\nimport { EventEmitter } from 'main.core.events';\n\nexport class ThemeSecondaryTool extends BaseSecondaryTool\n{\n\tgetIconClass(): string\n\t{\n\t\treturn '--o-palette';\n\t}\n\n\tonClick(): void\n\t{\n\t\tAnalytics.send(Analytics.EVENT_CLICK_CHANGE_PORTAL_THEME);\n\t\tEventEmitter.emit('BX.Intranet.AvatarWidget.Popup:openChild');\n\t\tBX.Intranet.Bitrix24.ThemePicker.Singleton.showDialog(false);\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn 'theme';\n\t}\n}\n","import { SecondaryContent } from './secondary-content';\nimport type { BaseSecondaryTool } from '../tools/base-secondary-tool';\nimport { SecuritySecondaryTool } from '../tools/security-secondary-tool';\nimport { ThemeSecondaryTool } from '../tools/theme-secondary-tool';\n\nexport class ExtranetSecondaryContent extends SecondaryContent\n{\n\tgetTools(): Array<BaseSecondaryTool>\n\t{\n\t\treturn this.cache.remember('tools', () => {\n\t\t\tconst tools = this.getOptions().tools;\n\n\t\t\treturn [\n\t\t\t\ttools.security ? new SecuritySecondaryTool(tools.security) : null,\n\t\t\t\ttools.theme ? new ThemeSecondaryTool(tools.theme) : null,\n\t\t\t].filter(Boolean);\n\t\t});\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn 'extranet-secondary';\n\t}\n}\n","import { Cache, Dom } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { PopupComponentsMaker } from 'ui.popupcomponentsmaker';\nimport { MainContent } from './content/main-content';\nimport { FooterContent } from './content/footer-content';\nimport { SecondaryContent } from './content/secondary-content';\nimport { ApplicationContent } from './content/application-content';\nimport { MobileAuthContent } from './content/mobile-auth-content';\nimport { Analytics } from './analytics';\nimport type { ConfigOptions, PopupOptions } from './types';\nimport { ExtranetSecondaryContent } from './content/extranet-secondary-content';\n\nexport class Popup extends EventEmitter\n{\n\t#cache = new Cache.MemoryCache();\n\t#popupsShowAfterBasePopup: Array<Popup> = [];\n\n\tconstructor(options: PopupOptions)\n\t{\n\t\tsuper();\n\t\tthis.setOptions(options);\n\t\tthis.setEventNamespace('BX.Intranet.AvatarWidget.Popup');\n\t\tthis.setEventHandlers();\n\t}\n\n\tsetOptions(options: PopupOptions): void\n\t{\n\t\tthis.#cache.set('options', options);\n\t}\n\n\tgetOptions(): PopupOptions\n\t{\n\t\treturn this.#cache.get('options', {});\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.getBasePopup().show();\n\t\tthis.emit('show');\n\t\tAnalytics.send(Analytics.EVENT_OPEN_WIDGET);\n\t}\n\n\tclose(): void\n\t{\n\t\tthis.getBasePopup().close();\n\t}\n\n\tgetBasePopup(): PopupComponentsMaker\n\t{\n\t\treturn this.#cache.remember('popup', () => {\n\t\t\tthis.emit('beforeInit');\n\n\t\t\tconst popup = new PopupComponentsMaker({\n\t\t\t\ttarget: this.getOptions().target,\n\t\t\t\twidth: 390,\n\t\t\t\tcontent: this.#getContent(),\n\t\t\t\tpopupLoader: this.getOptions().loader,\n\t\t\t\tpadding: 0,\n\t\t\t\toffsetTop: -50,\n\t\t\t\toffsetLeft: 0,\n\t\t\t});\n\t\t\tpopup.getPopup().setFixed(true);\n\t\t\tconst setOverlay = () => {\n\t\t\t\tif (BX.SidePanel.Instance.isOpen())\n\t\t\t\t{\n\t\t\t\t\tpopup.getPopup().setOverlay({\n\t\t\t\t\t\tbackgroundColor: 'transparent',\n\t\t\t\t\t});\n\t\t\t\t\tpopup.getPopup().showOverlay();\n\t\t\t\t}\n\t\t\t};\n\t\t\tsetOverlay();\n\t\t\tpopup.getPopup().subscribe('onClose', () => {\n\t\t\t\tthis.#popupsShowAfterBasePopup = [];\n\t\t\t\tpopup.getPopup().removeOverlay();\n\t\t\t});\n\t\t\tpopup.getPopup().subscribe('onBeforeShow', setOverlay);\n\t\t\tthis.#cache.set('popup', popup);\n\t\t\tthis.#cache.set('contentWrapper', popup.getContentWrapper());\n\n\t\t\tthis.emit('afterInit');\n\n\t\t\treturn popup;\n\t\t});\n\t}\n\n\t#getContent(): Array<ConfigOptions>\n\t{\n\t\treturn this.#cache.remember('content', () => {\n\t\t\tconst content = [\n\t\t\t\tthis.#getMainContent().getConfig(),\n\t\t\t];\n\n\t\t\tcontent.push(this.#getApplicationContent().getConfig());\n\n\t\t\tif (this.getOptions().content.extranetSecondary)\n\t\t\t{\n\t\t\t\tcontent.push(this.#getExtranetSecondaryContent().getConfig());\n\t\t\t}\n\n\t\t\tif (this.getOptions().content.secondary)\n\t\t\t{\n\t\t\t\tcontent.push(this.#getSecondaryContent().getConfig());\n\t\t\t}\n\n\t\t\tcontent.push(this.#getFooterContent().getConfig());\n\n\t\t\treturn content;\n\t\t});\n\t}\n\n\t#getMainContent(): MainContent\n\t{\n\t\treturn this.#cache.remember('mainContent', () => {\n\t\t\treturn new MainContent({\n\t\t\t\t...this.getOptions().content.main,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getSecondaryContent(): SecondaryContent\n\t{\n\t\treturn this.#cache.remember('secondaryContent', () => {\n\t\t\treturn new SecondaryContent({\n\t\t\t\t...this.getOptions().content.secondary,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getApplicationContent(): ApplicationContent\n\t{\n\t\treturn this.#cache.remember('applicationContent', () => {\n\t\t\treturn new ApplicationContent({\n\t\t\t\t...this.getOptions().content.application,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getFooterContent(): FooterContent\n\t{\n\t\treturn this.#cache.remember('footerContent', () => {\n\t\t\treturn new FooterContent({\n\t\t\t\t...this.getOptions().content.footer,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getMobileAuthContent(): MobileAuthContent\n\t{\n\t\treturn this.#cache.remember('mobileAuthContent', () => {\n\t\t\treturn new MobileAuthContent({\n\t\t\t\t...this.getOptions().content.mobileAuth.tools.fastMobileAuth,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getFastMobileAuthSubsection(): HTMLElement\n\t{\n\t\treturn this.#cache.remember('fastMobileAuthSubsection', () => {\n\t\t\treturn (new PopupComponentsMaker(\n\t\t\t\t{ content: [this.#getMobileAuthContent().getConfig()] },\n\t\t\t)).getContentWrapper();\n\t\t});\n\t}\n\n\t#getExtranetSecondaryContent(): ExtranetSecondaryContent\n\t{\n\t\treturn this.#cache.remember('extranetSecondaryContent', () => {\n\t\t\treturn new ExtranetSecondaryContent({\n\t\t\t\t...this.getOptions().content.extranetSecondary,\n\t\t\t});\n\t\t});\n\t}\n\n\tsetEventHandlers(): void\n\t{\n\t\tthis.subscribe('beforeInit', () => {\n\t\t\tEventEmitter.subscribe('BX.Intranet.AvatarWidget.Popup:makeWithHint', () => {\n\t\t\t\tthis.subscribe('afterInit', () => {\n\t\t\t\t\tBX.UI.Hint.init(this.getBasePopup().getPopup().getPopupContainer());\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.subscribe('afterInit', () => {\n\t\t\t\tthis.#setAutoHideEventHandlers();\n\t\t\t\tthis.#setSubsectionEventHandlers();\n\n\t\t\t\tconst close = () => {\n\t\t\t\t\tthis.close();\n\t\t\t\t};\n\n\t\t\t\tEventEmitter.subscribe('SidePanel.Slider:onOpenStart', close);\n\t\t\t\tEventEmitter.subscribe('BX.Intranet.AvatarWidget.Popup:openChild', close);\n\t\t\t});\n\t\t});\n\t}\n\n\t#setAutoHideEventHandlers(): void\n\t{\n\t\tEventEmitter.subscribe('BX.Main.Popup:onShow', (event) => {\n\t\t\tif (!this.getBasePopup().getPopup().isShown())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tDom.style(this.getBasePopup().getPopup().getPopupContainer(), 'overflow-y', 'hidden');\n\n\t\t\tconst popup = event.getTarget();\n\n\t\t\tif (popup && popup.getId() === this.getBasePopup().getPopup().getId())\n\t\t\t{\n\t\t\t\tthis.getBasePopup().getPopup().setAutoHide(true);\n\t\t\t\tEventEmitter.emit('BX.Intranet.AvatarWidget.Popup:enabledAutoHide');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.getBasePopup().getPopup().setAutoHide(false);\n\t\t\t\tEventEmitter.emit('BX.Intranet.AvatarWidget.Popup:disabledAutoHide');\n\n\t\t\t\tif (!this.#popupsShowAfterBasePopup.includes(popup))\n\t\t\t\t{\n\t\t\t\t\tthis.#popupsShowAfterBasePopup.push(popup);\n\t\t\t\t}\n\n\t\t\t\tconst handler = () => {\n\t\t\t\t\tthis.#popupsShowAfterBasePopup = this.#popupsShowAfterBasePopup.filter((item) => item !== popup);\n\n\t\t\t\t\tif (this.#popupsShowAfterBasePopup.length === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getBasePopup().getPopup().setAutoHide(true);\n\t\t\t\t\t\tDom.style(this.getBasePopup().getPopup().getPopupContainer(), 'overflow-y', 'auto');\n\t\t\t\t\t\tEventEmitter.emit('BX.Intranet.AvatarWidget.Popup:enabledAutoHide');\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tpopup.subscribeOnce('onClose', handler);\n\t\t\t\tpopup.subscribeOnce('onDestroy', handler);\n\t\t\t}\n\t\t});\n\t}\n\n\t#setSubsectionEventHandlers(): void\n\t{\n\t\tconst openFastMobileAuthSubsection = () => {\n\t\t\tconst subsection = this.#getFastMobileAuthSubsection();\n\t\t\tthis.getBasePopup().getPopup().setContent(subsection);\n\t\t};\n\t\tEventEmitter.subscribe('BX.Intranet.AvatarWidget.FastMobileAuthTool:onClick', openFastMobileAuthSubsection);\n\t\tEventEmitter.subscribe('BX.Intranet.AvatarWidget.ApplicationInstallerTool:onClick', openFastMobileAuthSubsection);\n\t\tEventEmitter.subscribe('BX.Intranet.AvatarWidget.Subsection:back', () => {\n\t\t\tthis.getBasePopup().getPopup().setContent(this.getBasePopup().getContentWrapper());\n\t\t});\n\t}\n}\n","import { Cache } from 'main.core';\nimport { Popup } from './popup';\nimport type { GeneralOptions } from './types';\nimport './style.css';\n\nexport class AvatarWidget\n{\n\t#cache = new Cache.MemoryCache();\n\tstatic #instance: AvatarWidget;\n\n\tstatic getInstance(): AvatarWidget\n\t{\n\t\tif (!this.#instance)\n\t\t{\n\t\t\tthis.#instance = new this();\n\t\t}\n\n\t\treturn this.#instance;\n\t}\n\n\tshow(): void\n\t{\n\t\tif (this.#getPopup().getBasePopup().isShown())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#getPopup().show();\n\t}\n\n\tsetOptions(options: GeneralOptions): AvatarWidget\n\t{\n\t\tthis.#cache.set('options', options);\n\n\t\treturn this;\n\t}\n\n\tgetOptions(): GeneralOptions\n\t{\n\t\treturn this.#cache.get('options', {});\n\t}\n\n\t#getPopup(): Popup\n\t{\n\t\treturn this.#cache.remember('popup', () => {\n\t\t\treturn new Popup({\n\t\t\t\ttarget: this.getOptions().buttonWrapper,\n\t\t\t\tloader: this.getOptions().loader,\n\t\t\t\tcontent: {\n\t\t\t\t\t...this.getOptions().data,\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n}\n"],"names":["Content","EventEmitter","constructor","options","super","this","cache","Cache","MemoryCache","setOptions","setEventNamespace","set","getOptions","get","getLayout","Error","getConfig","html","minHeight","margin","Analytics","[object Object]","event","sendData","tool","TOOLS","category","CATEGORY","CATEGORY_PROFILE","EVENT_PROFILE_VIEW","c_section","EVENT_OPEN_WIDGET","EVENT_CLICK_SALARY","EVENT_CLICK_INSTALL_DESKTOP_APP","EVENT_CLICK_INSTALL_MOBILE_APP","EVENT_CLICK_FAST_MOBILE_AUTH","EVENT_CLICK_2FA_SETUP","EVENT_CLICK_EXTENSION","EVENT_CLICK_LOGOUT","EVENT_CLICK_CHANGE_PORTAL_THEME","EVENT_CLICK_NETWORK","EVENT_CLICK_ACTIVITY_PORTAL_LIST","EVENT_CLICK_PULSE","EVENT_CLICK_MY_DOCUMENTS","BaseTool","getIconClass","onClick","getIconElement","getTitle","title","text","BaseMainTool","Object","value","remember","Tag","render","getId","bind","getCounter","counter","ExtensionTool","send","babelHelpers","toggle","menu","Menu","bindElement","items","angle","cachable","offsetLeft","fixed","subscribe","close","SecurityTool","SidePanel","Instance","open","url","width","MyDocumentsTool","isLocked","FeaturePromotersRegistry","getPromoter","code","show","userId","Number","Loc","getMessage","Router","openSlider","cacheable","PULL","moduleId","command","counterEventName","callback","params","Type","isNumber","needActionCount","update","destroy","icon","querySelector","Dom","removeClass","delete","Counter","color","Color","DANGER","size","Size","MEDIUM","style","CounterStyle","FILLED_ALERT","useAirDesign","SalaryVacationTool","container","isHidden","isDisabled","attr","Event","disabledHint","hide","SalaryVacationMenu","BX","UI","Hint","createInstance","popupParameters","MainContent","writable","sendOpenProfile","getContainer","stopPropagation","preventDefault","fullName","workPosition","userpicPath","encodeURI","userPhotoSrc","avatar","role","AvatarRoundExtranet","AvatarRoundGuest","AvatarRound","status","vacation","wrapper","append","addClass","isTimemanAvailable","WorkStatusControlPanel","renderWorkStatusControlPanel","error","console","tools","keys","length","forEach","myDocuments","salaryVacation","security","extension","filter","Boolean","data","id","toString","preparedUrl","setUserPic","innerHTML","BaseFooterTool","ThemeTool","emit","Intranet","Bitrix24","ThemePicker","Singleton","showDialog","PulseTool","ajax","runAction","mode","then","response","Runtime","window","openIntranetUStat","catch","LogoutTool","isNil","DesktopApi","isDesktop","logout","backUrl","Uri","location","pathname","removeQueryParam","newUrl","path","setQueryParam","bitrix_sessid","encodeURIComponent","document","href","FooterContent","withoutBackground","theme","pulse","BaseSecondaryTool","getActionElement","AccountChangerTool","type","DesktopAccountList","AdministrationTool","PerformanceReviewTool","SecondaryContent","getTools","accountChanger","admin","perfReview","InstallMobileTool","FastMobileAuthTool","ApplicationsInstallerTool","mobile","installed","desktop","onclick","element","target","button","Button","tag","LINK","EXTRA_SMALL","buttonName","AirButtonStyle","FILLED","noCaps","link","installLink","wide","className","item","push","ApplicationContent","installMobile","fastMobileAuth","applicationsInstaller","HeaderSubsectionContent","getContentWrapper","EXTRA_EXTRA_SMALL","OUTLINE","setCollapsed","MobileAuthContent","ShortQrAuth","intent","small","stub","warning","SecuritySecondaryTool","ThemeSecondaryTool","ExtranetSecondaryContent","Popup","setEventHandlers","getBasePopup","popup","PopupComponentsMaker","content","popupLoader","loader","padding","offsetTop","getPopup","setFixed","setOverlay","isOpen","backgroundColor","showOverlay","removeOverlay","init","getPopupContainer","extranetSecondary","secondary","main","application","footer","mobileAuth","isShown","getTarget","setAutoHide","includes","handler","subscribeOnce","openFastMobileAuthSubsection","subsection","setContent","AvatarWidget","buttonWrapper"],"mappings":"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"}