this.BX=this.BX||{},function(e,t,s,i,a,r,n,o,l,c,p,d,b,u,v,h,g){"use strict";class m extends u.EventEmitter{constructor(e){super(),this.cache=new h.Cache.MemoryCache,this.setOptions(e),this.setEventNamespace("BX.Intranet.AvatarWidget.Content")}setOptions(e){return this.cache.set("options",e),this}getOptions(){return this.cache.get("options",{})}getLayout(){throw new Error("Must be implemented in a child class")}getConfig(){return{html:this.getLayout(),minHeight:"58px"}}}class P{static send(e){a.sendData({tool:P.TOOLS,category:P.CATEGORY,event:e})}static sendOpenProfile(){a.sendData({tool:P.TOOLS,category:P.CATEGORY_PROFILE,event:P.EVENT_PROFILE_VIEW,c_section:P.CATEGORY})}static sendOpenCommonSecurity(){a.sendData({tool:"settings",category:"common_security",event:"start_page",c_section:P.CATEGORY})}}P.TOOLS="intranet",P.CATEGORY="ava_menu",P.CATEGORY_PROFILE="user_profile",P.EVENT_OPEN_WIDGET="menu_open",P.EVENT_PROFILE_VIEW="profile_view",P.EVENT_CLICK_SALARY="click_salary",P.EVENT_CLICK_INSTALL_DESKTOP_APP="click_install_desktop_app",P.EVENT_CLICK_2FA_SETUP="click_2fa_setup",P.EVENT_CLICK_EXTENSION="click_extension",P.EVENT_CLICK_LOGOUT="click_logout",P.EVENT_CLICK_CHANGE_PORTAL_THEME="click_change_portal_theme",P.EVENT_CLICK_LOGIN_HISTORY="click_login_history",P.EVENT_CLICK_NETWORK="click_network",P.EVENT_CLICK_ACTIVITY_PORTAL_LIST="click_activity_portal_list";let L,_,w,O,f,H=e=>e;var y=babelHelpers.classPrivateFieldLooseKey("activeOnclick"),B=babelHelpers.classPrivateFieldLooseKey("getFullName"),F=babelHelpers.classPrivateFieldLooseKey("getStatus"),E=babelHelpers.classPrivateFieldLooseKey("getAvatar"),C=babelHelpers.classPrivateFieldLooseKey("getMoreMenuElement"),T=babelHelpers.classPrivateFieldLooseKey("getMoreMenu"),I=babelHelpers.classPrivateFieldLooseKey("getMoreMenuActionByItem"),S=babelHelpers.classPrivateFieldLooseKey("getWorkTime"),A=babelHelpers.classPrivateFieldLooseKey("getWorkTimeButton"),K=babelHelpers.classPrivateFieldLooseKey("setEventHandlers");class k extends m{constructor(...e){super(...e),Object.defineProperty(this,K,{value:V}),Object.defineProperty(this,A,{value:D}),Object.defineProperty(this,S,{value:M}),Object.defineProperty(this,I,{value:R}),Object.defineProperty(this,T,{value:X}),Object.defineProperty(this,C,{value:$}),Object.defineProperty(this,E,{value:N}),Object.defineProperty(this,F,{value:j}),Object.defineProperty(this,B,{value:x}),Object.defineProperty(this,y,{writable:!0,value:!0})}getOptions(){return super.getOptions()}getLayout(){return this.cache.remember("layout",(()=>{babelHelpers.classPrivateFieldLooseBase(this,K)[K]();return h.Tag.render(L||(L=H`
				<div onclick="${0}" class="intranet-avatar-widget-item__wrapper --column-format" data-id="bx-avatar-widget-content-main">
					<div class="intranet-avatar-widget-item-main__wrapper-head">
						<div class="intranet-avatar-widget-item__avatar">
							${0}
						</div>
						<div class="intranet-avatar-widget-item__info-wrapper">
							${0}
							${0}
						</div>
						<i class="ui-icon-set --chevron-right-m intranet-avatar-widget-item__chevron"/>
						${0}
					</div>
					${0}
				</div>
			`),(()=>{babelHelpers.classPrivateFieldLooseBase(this,y)[y]&&(BX.SidePanel.Instance.open(this.getOptions().url),P.sendOpenProfile())}),babelHelpers.classPrivateFieldLooseBase(this,E)[E]().getContainer(),babelHelpers.classPrivateFieldLooseBase(this,B)[B](),babelHelpers.classPrivateFieldLooseBase(this,F)[F](),babelHelpers.classPrivateFieldLooseBase(this,C)[C](),babelHelpers.classPrivateFieldLooseBase(this,S)[S]())}))}}function x(){return this.cache.remember("title",(()=>h.Tag.render(_||(_=H`
				<span class="intranet-avatar-widget-item__title">${0}</span>
			`),this.getOptions().fullName)))}function j(){return this.cache.remember("status",(()=>h.Tag.render(w||(w=H`
				<span class="intranet-avatar-widget-item__description">${0}</span>
			`),this.getOptions().status)))}function N(){return this.cache.remember("avatar",(()=>{const e={size:36,userpicPath:encodeURI(this.getOptions().userPhotoSrc)};let t=null;return t="extranet"===this.getOptions().role?new s.AvatarRoundExtranet(e):"collaber"===this.getOptions().role?new s.AvatarRoundGuest(e):new s.AvatarRound(e),t}))}function $(){return this.cache.remember("moreMenuElement",(()=>{const e=h.Tag.render(O||(O=H`
				<i class="ui-icon-set --more-l intranet-avatar-widget-item__more"/>
			`));return h.Event.bind(e,"click",(e=>{e.preventDefault(),e.stopPropagation(),babelHelpers.classPrivateFieldLooseBase(this,y)[y]&&babelHelpers.classPrivateFieldLooseBase(this,T)[T](e.target).toggle()})),e}))}function X(e){return this.cache.remember("moreMenu",(()=>{const t=[];return this.getOptions().menuItems.forEach((s=>{t.push({html:`\n\t\t\t\t\t\t<div class="intranet-avatar-widget-item-more-menu__wrapper" data-id="bx-avatar-widget-more-menu-item-${s.type}">\n\t\t\t\t\t\t\t<span class="intranet-avatar-widget-item-more-menu__title">${s.title}</span>\n\t\t\t\t\t\t\t<i class="intranet-avatar-widget-item-more-menu__icon ui-icon-set ${s.icon}"></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,onclick:()=>{babelHelpers.classPrivateFieldLooseBase(this,I)[I](s,e),babelHelpers.classPrivateFieldLooseBase(this,T)[T](e).close(),u.EventEmitter.emit("BX.Intranet.AvatarWidget.Popup:openChild")}})})),new g.Menu({bindElement:e,items:t,fixed:!0})}))}function R(e){switch(e.type){case"settings":P.sendOpenCommonSecurity(),BX.SidePanel.Instance.open(e.url,{width:1100});break;case"admin":case"network":P.send(P.EVENT_CLICK_NETWORK),window.open(e.url,"_blank");break;case"desktop":P.send(P.EVENT_CLICK_ACTIVITY_PORTAL_LIST),new r.DesktopAccountList({bindElement:document.querySelector('[data-id="bx-avatar-widget"]')}).show();break;case"login-history":P.send(P.EVENT_CLICK_LOGIN_HISTORY),e.isAvailable?e.isConfigured?BX.SidePanel.Instance.open(e.url,{allowedChangeHistory:!1}):BX.Helper.show("redirect=detail&code=16615982"):p.FeaturePromotersRegistry.getPromoter({code:"limit_office_login_history"}).show();break;case"pulse":h.ajax.runAction("intranet.user.widget.getUserStatComponent",{mode:"class"}).then((e=>{h.Runtime.html(null,e.data.html).then((()=>{window.openIntranetUStat&&openIntranetUStat()}))}))}}function M(){return this.cache.remember("worktime",(()=>this.getOptions().isTimemanAvailable&&babelHelpers.classPrivateFieldLooseBase(this,A)[A]()?h.Tag.render(f||(f=H`
				<div class="intranet-avatar-widget-item__worktime">
					${0}
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,A)[A]()):null))}function D(){return this.cache.remember("button",(()=>{try{return(new i.WorkTimeButton).render()}catch(e){return console.error(e),null}}))}function V(){u.EventEmitter.subscribe("BX.Intranet.UserProfile:Avatar:changed",(({data:[{url:e,userId:t}]})=>{if(this.getOptions().id>0&&t&&this.getOptions().id.toString()===t.toString()){const t=encodeURI(e);this.getOptions().userPhotoSrc=t,babelHelpers.classPrivateFieldLooseBase(this,E)[E]().setUserPic(t)}})),u.EventEmitter.subscribe("BX.Intranet.UserProfile:Name:changed",(({data:[{fullName:e}]})=>{this.getOptions().fullName=e,babelHelpers.classPrivateFieldLooseBase(this,B)[B]().innerHTML=e})),u.EventEmitter.subscribe("BX.Intranet.AvatarWidget.Popup:enabledAutoHide",(()=>{babelHelpers.classPrivateFieldLooseBase(this,y)[y]=!0})),u.EventEmitter.subscribe("BX.Intranet.AvatarWidget.Popup:disabledAutoHide",(()=>{babelHelpers.classPrivateFieldLooseBase(this,y)[y]=!1}))}let U,W,G=e=>e;var q=babelHelpers.classPrivateFieldLooseKey("getFullState"),Y=babelHelpers.classPrivateFieldLooseKey("getSmallState"),z=babelHelpers.classPrivateFieldLooseKey("getButton");class Q extends m{constructor(...e){super(...e),Object.defineProperty(this,z,{value:ee}),Object.defineProperty(this,Y,{value:Z}),Object.defineProperty(this,q,{value:J})}getOptions(){return super.getOptions()}getConfig(){return this.getOptions().isSmall?{html:this.getLayout()}:{html:this.getLayout(),minHeight:"190px",flex:.5}}getLayout(){return this.cache.remember("layout",(()=>this.getOptions().isSmall?babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]():babelHelpers.classPrivateFieldLooseBase(this,q)[q]()))}}function J(){return this.cache.remember("fullState",(()=>h.Tag.render(U||(U=G`
				<div class="intranet-avatar-widget-item__wrapper --column-format" data-id="bx-avatar-widget-content-qr-auth">
					<span class="intranet-avatar-widget-item__title --qr-auth-full">${0}</span>
					<div class="intranet-avatar-widget-item-qr-auth__wrapper">
						<i class="intranet-avatar-widget-item-qr-auth__icon ui-icon-set --o-qr-code"></i>
					</div>
					${0}
				</div>
			`),this.getOptions().title,babelHelpers.classPrivateFieldLooseBase(this,z)[z]())))}function Z(){return this.cache.remember("smallState",(()=>h.Tag.render(W||(W=G`
				<div class="intranet-avatar-widget-item__wrapper --column-format" data-id="bx-avatar-widget-content-qr-auth">
					<div class="intranet-avatar-widget-item__wrapper-title">
						<i class="ui-icon-set --o-qr-code intranet-avatar-widget-item__icon"/>
						<span class="intranet-avatar-widget-item__title --qr-auth-small">${0}</span>
					</div>
					${0}
				</div>
			`),this.getOptions().title,babelHelpers.classPrivateFieldLooseBase(this,z)[z]())))}function ee(){return this.cache.remember("button",(()=>new o.Button({size:o.Button.Size.EXTRA_EXTRA_SMALL,text:this.getOptions().buttonTitle,useAirDesign:!0,style:o.AirButtonStyle.OUTLINE,noCaps:!0,wide:!0,onclick:()=>{var e,t;u.EventEmitter.emit("BX.Intranet.AvatarWidget.Popup:openChild"),new n.QrAuthorization({title:null==(e=this.getOptions().popup)?void 0:e.title,content:null==(t=this.getOptions().popup)?void 0:t.description,intent:"profile"}).show()}}).render()))}let te,se,ie,ae,re=e=>e;var ne=babelHelpers.classPrivateFieldLooseKey("isLinux"),oe=babelHelpers.classPrivateFieldLooseKey("isMac"),le=babelHelpers.classPrivateFieldLooseKey("isWindows"),ce=babelHelpers.classPrivateFieldLooseKey("getInstalledState"),pe=babelHelpers.classPrivateFieldLooseKey("getDefaultState"),de=babelHelpers.classPrivateFieldLooseKey("isInstalledState"),be=babelHelpers.classPrivateFieldLooseKey("getTitle"),ue=babelHelpers.classPrivateFieldLooseKey("getLink"),ve=babelHelpers.classPrivateFieldLooseKey("getButton"),he=babelHelpers.classPrivateFieldLooseKey("onClick"),ge=babelHelpers.classPrivateFieldLooseKey("getLinuxMenu");class me extends m{constructor(e){super(e),Object.defineProperty(this,ge,{value:ye}),Object.defineProperty(this,he,{value:He}),Object.defineProperty(this,ve,{value:fe}),Object.defineProperty(this,ue,{value:Oe}),Object.defineProperty(this,be,{value:we}),Object.defineProperty(this,de,{value:_e}),Object.defineProperty(this,pe,{value:Le}),Object.defineProperty(this,ce,{value:Pe}),Object.defineProperty(this,ne,{writable:!0,value:void 0}),Object.defineProperty(this,oe,{writable:!0,value:void 0}),Object.defineProperty(this,le,{writable:!0,value:void 0}),babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]=h.Browser.isLinux(),babelHelpers.classPrivateFieldLooseBase(this,le)[le]=h.Browser.isWin(),babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]=h.Browser.isMac()}getConfig(){return{html:this.getLayout(),displayBlock:!this.getOptions().isSmall}}getLayout(){return this.cache.remember("layout",(()=>babelHelpers.classPrivateFieldLooseBase(this,de)[de]()?babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]():babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]()))}}function Pe(){return this.cache.remember("installedState",(()=>h.Tag.render(te||(te=re`
				<div class="intranet-avatar-widget-item__wrapper --column-format" data-id="bx-avatar-widget-content-desktop">
					<div class="intranet-avatar-widget-item__wrapper-title">
						<i class="ui-icon-set --o-screen intranet-avatar-widget-item__icon"/>
						<div class="intranet-avatar-widget-item__info-wrapper">
							${0}
							${0}
						</div>
					</div>
					<div class="intranet-avatar-widget-item__status">
						<i class="ui-icon-set --check-s"></i>
						${0}
					</div>
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,be)[be](),babelHelpers.classPrivateFieldLooseBase(this,ue)[ue](),this.getOptions().statusName)))}function Le(){return this.cache.remember("defaultState",(()=>h.Tag.render(se||(se=re`
				<div class="intranet-avatar-widget-item__wrapper --column-format" data-id="bx-avatar-widget-content-desktop">
					<div class="intranet-avatar-widget-item__wrapper-title">
						<i class="ui-icon-set --o-screen intranet-avatar-widget-item__icon --active"/>
						${0}
					</div>
					${0}
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,be)[be](),babelHelpers.classPrivateFieldLooseBase(this,ve)[ve]())))}function _e(){var e,t,s;return!(!babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]||null==(e=this.getOptions().installInfo)||!e.linux)||(!(!babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]||null==(t=this.getOptions().installInfo)||!t.mac)||babelHelpers.classPrivateFieldLooseBase(this,le)[le]&&(null==(s=this.getOptions().installInfo)?void 0:s.windows))}function we(){return this.cache.remember("title",(()=>{let e="";return babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]?e=this.getOptions().title.linux:babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]?e=this.getOptions().title.mac:babelHelpers.classPrivateFieldLooseBase(this,le)[le]&&(e=this.getOptions().title.windows),h.Tag.render(ie||(ie=re`
				<div class="intranet-avatar-widget-item__title">
					<span class="intranet-avatar-widget-item__title-text">${0}</span>
				</div>
			`),e)}))}function Oe(){return this.cache.remember("link",(()=>h.Tag.render(ae||(ae=re`
				<span onclick="${0}" class="intranet-avatar-widget-item__link">
					${0}
				</span>
			`),(e=>babelHelpers.classPrivateFieldLooseBase(this,he)[he](e)),this.getOptions().linkName)))}function fe(){return this.cache.remember("button",(()=>new o.Button({size:o.Button.Size.SMALL,text:this.getOptions().buttonName,useAirDesign:!0,style:o.AirButtonStyle.OUTLINE_ACCENT_2,noCaps:!0,wide:!0,onclick:e=>{babelHelpers.classPrivateFieldLooseBase(this,he)[he](e)}}).render()))}function He(e){var t,s;P.send(P.EVENT_CLICK_INSTALL_DESKTOP_APP),babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]?babelHelpers.classPrivateFieldLooseBase(this,ge)[ge](e).toggle():babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]&&null!=(t=this.getOptions().downloadLinks)&&t.macos?document.location.href=this.getOptions().downloadLinks.macos:babelHelpers.classPrivateFieldLooseBase(this,le)[le]&&null!=(s=this.getOptions().downloadLinks)&&s.windows&&(document.location.href=this.getOptions().downloadLinks.windows)}function ye(e){return this.cache.remember("linuxMenu",(()=>{let t=null,s=0,i=0;return e instanceof o.Button?(t=e.getContainer(),s=83):(t=e,s=5,i=10),new g.Menu({bindElement:t,items:[{text:this.getOptions().linuxMenuTitles.deb,href:this.getOptions().downloadLinks.linuxDeb,onclick:()=>{babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]().close()}},{text:this.getOptions().linuxMenuTitles.rpm,href:this.getOptions().downloadLinks.linuxRpm,onclick:()=>{babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]().close()}}],angle:!0,offsetLeft:s,offsetTop:i,fixed:!0})}))}let Be,Fe,Ee=e=>e;var Ce=babelHelpers.classPrivateFieldLooseKey("getCanConnectState"),Te=babelHelpers.classPrivateFieldLooseKey("getConnectedState"),Ie=babelHelpers.classPrivateFieldLooseKey("getButton"),Se=babelHelpers.classPrivateFieldLooseKey("openSettingsSlider");class Ae extends m{constructor(...e){super(...e),Object.defineProperty(this,Se,{value:je}),Object.defineProperty(this,Ie,{value:xe}),Object.defineProperty(this,Te,{value:ke}),Object.defineProperty(this,Ce,{value:Ke})}getOptions(){return super.getOptions()}getLayout(){return this.cache.remember("layout",(()=>this.getOptions().isActive?babelHelpers.classPrivateFieldLooseBase(this,Te)[Te]():babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce]()))}}function Ke(){return this.cache.remember("canConnectState",(()=>h.Tag.render(Be||(Be=Ee`
				<div class="intranet-avatar-widget-item__wrapper --column-format" data-id="bx-avatar-widget-content-otp">
					<div class="intranet-avatar-widget-item__wrapper-title">
						<i class="ui-icon-set --o-shield intranet-avatar-widget-item__icon --active"/>
						<span class="intranet-avatar-widget-item__title">${0}</span>
					</div>
					${0}
				</div>
			`),this.getOptions().title,babelHelpers.classPrivateFieldLooseBase(this,Ie)[Ie]())))}function ke(){return this.cache.remember("canConnectState",(()=>h.Tag.render(Fe||(Fe=Ee`
				<div class="intranet-avatar-widget-item__wrapper --column-format" data-id="bx-avatar-widget-content-otp">
					<div class="intranet-avatar-widget-item__wrapper-title">
						<i class="ui-icon-set --o-shield intranet-avatar-widget-item__icon"/>
						<div class="intranet-avatar-widget-item__info-wrapper">
							<span class="intranet-avatar-widget-item__title">${0}</span>
							<span onclick="${0}" class="intranet-avatar-widget-item__link">${0}</span>
						</div>
					</div>
					<div class="intranet-avatar-widget-item__status">
						<i class="ui-icon-set --check-s"></i>
						${0}
					</div>
				</div>
			`),this.getOptions().title,(()=>{babelHelpers.classPrivateFieldLooseBase(this,Se)[Se]()}),this.getOptions().settingsButtonTitle,this.getOptions().connectStatus)))}function xe(){return this.cache.remember("button",(()=>new o.Button({size:o.Button.Size.SMALL,text:this.getOptions().connectButtonTitle,useAirDesign:!0,style:o.AirButtonStyle.OUTLINE_ACCENT_2,noCaps:!0,wide:!0,onclick:()=>{babelHelpers.classPrivateFieldLooseBase(this,Se)[Se]()}}).render()))}function je(){P.send(P.EVENT_CLICK_2FA_SETUP),BX.SidePanel.Instance.open(this.getOptions().settingsPath,{width:1100})}let Ne,$e,Xe=e=>e;var Re=babelHelpers.classPrivateFieldLooseKey("getCounter"),Me=babelHelpers.classPrivateFieldLooseKey("getCounterWrapper"),De=babelHelpers.classPrivateFieldLooseKey("onClick");class Ve extends m{constructor(...e){super(...e),Object.defineProperty(this,De,{value:Ge}),Object.defineProperty(this,Me,{value:We}),Object.defineProperty(this,Re,{value:Ue})}getOptions(){return super.getOptions()}getLayout(){return this.cache.remember("layout",(()=>h.Tag.render(Ne||(Ne=Xe`
				<div onclick="${0}" class="intranet-avatar-widget-item__wrapper" data-id="bx-avatar-widget-content-sign-documents">
					<i class="ui-icon-set ${0} --o-file intranet-avatar-widget-item__icon"/>
					<div class="intranet-avatar-widget-item__info-wrapper">
						<span class="intranet-avatar-widget-item__title">
							${0}
						</span>
						<span class="intranet-avatar-widget-item__description">
							${0}
						</span>
					</div>
					${0}
					<i class="ui-icon-set --chevron-right-m intranet-avatar-widget-item__chevron"/>
				</div>
			`),(()=>{babelHelpers.classPrivateFieldLooseBase(this,De)[De]()}),babelHelpers.classPrivateFieldLooseBase(this,Re)[Re]()?"--active":"",this.getOptions().title,this.getOptions().description,babelHelpers.classPrivateFieldLooseBase(this,Me)[Me]())))}}function Ue(){return this.cache.remember("counter",(()=>Number(this.getOptions().counter)<1?null:(l.PULL.subscribe({moduleId:"sign",command:this.getOptions().counterEventName,callback:e=>{if(h.Type.isNumber(null==e?void 0:e.needActionCount))if(this.getOptions().counter=e.needActionCount,(null==e?void 0:e.needActionCount)>0)babelHelpers.classPrivateFieldLooseBase(this,Re)[Re]().update(e.needActionCount);else{babelHelpers.classPrivateFieldLooseBase(this,Re)[Re]().destroy();const e=this.getLayout().querySelector(".intranet-avatar-widget-item__icon");h.Dom.removeClass(e,"--active"),this.cache.delete("counter")}}}),new c.Counter({color:c.Counter.Color.DANGER,size:c.Counter.Size.MEDIUM,value:this.getOptions().counter}))))}function We(){return this.cache.remember("counterWrapper",(()=>{const e=babelHelpers.classPrivateFieldLooseBase(this,Re)[Re]();return h.Tag.render($e||($e=Xe`
				<div class="intranet-avatar-widget-item__counter">
					${0}
				</div>
			`),null==e?void 0:e.render())}))}function Ge(){if(this.getOptions().isLocked)return void p.FeaturePromotersRegistry.getPromoter({code:"limit_office_e_signature"}).show();const e=Number(h.Loc.getMessage("USER_ID"));e>0&&d.Router.openSlider(`${h.Loc.getMessage("SITE_DIR")}company/personal/user/${e}/sign?noRedirect=Y`,{width:1e3,cacheable:!1})}let qe,Ye,ze,Qe=e=>e;var Je=babelHelpers.classPrivateFieldLooseKey("salaryVacationMenu"),Ze=babelHelpers.classPrivateFieldLooseKey("getDisabledState"),et=babelHelpers.classPrivateFieldLooseKey("getHintInstance"),tt=babelHelpers.classPrivateFieldLooseKey("getActiveState"),st=babelHelpers.classPrivateFieldLooseKey("getChevron");class it extends m{constructor(e){super(e),Object.defineProperty(this,st,{value:ot}),Object.defineProperty(this,tt,{value:nt}),Object.defineProperty(this,et,{value:rt}),Object.defineProperty(this,Ze,{value:at}),Object.defineProperty(this,Je,{writable:!0,value:void 0}),babelHelpers.classPrivateFieldLooseBase(this,Je)[Je]=new b.SalaryVacationMenu}getOptions(){return super.getOptions()}getLayout(){return this.cache.remember("layout",(()=>babelHelpers.classPrivateFieldLooseBase(this,Je)[Je].isHidden()?null:babelHelpers.classPrivateFieldLooseBase(this,Je)[Je].isDisabled()?babelHelpers.classPrivateFieldLooseBase(this,Ze)[Ze]():babelHelpers.classPrivateFieldLooseBase(this,tt)[tt]()))}}function at(){return this.cache.remember("disabledState",(()=>{const e=h.Tag.render(qe||(qe=Qe`
				<div
					class="intranet-avatar-widget-item__wrapper"
					data-id="bx-avatar-widget-content-salary-vacation"
					data-hint
					data-hint-interactivity
				 >
					<i class="ui-icon-set --o-favorite intranet-avatar-widget-item__icon"/>
					<span class="intranet-avatar-widget-item__title">${0}</span>
					${0}
				</div>
			`),this.getOptions().title,babelHelpers.classPrivateFieldLooseBase(this,st)[st]());return h.Event.bind(e,"mouseenter",(()=>{babelHelpers.classPrivateFieldLooseBase(this,et)[et]().show(e,this.getOptions().disabledHint,!0)})),h.Event.bind(e,"mouseleave",(()=>{babelHelpers.classPrivateFieldLooseBase(this,et)[et]().hide(e)})),e}))}function rt(){return this.cache.remember("hint",(()=>BX.UI.Hint.createInstance({popupParameters:{fixed:!0,offsetTop:-20}})))}function nt(){return this.cache.remember("activeState",(()=>h.Tag.render(Ye||(Ye=Qe`
				<div onclick="${0}" class="intranet-avatar-widget-item__wrapper" data-id="bx-avatar-widget-content-salary-vacation">
					<i class="ui-icon-set --o-favorite intranet-avatar-widget-item__icon"/>
					<span class="intranet-avatar-widget-item__title">${0}</span>
					${0}
				</div>
			`),(()=>{babelHelpers.classPrivateFieldLooseBase(this,Je)[Je].show(babelHelpers.classPrivateFieldLooseBase(this,st)[st]()),P.send(P.EVENT_CLICK_SALARY)}),this.getOptions().title,babelHelpers.classPrivateFieldLooseBase(this,st)[st]())))}function ot(){return this.cache.remember("chevron",(()=>h.Tag.render(ze||(ze=Qe`<i class="ui-icon-set --chevron-right-m intranet-avatar-widget-item__chevron"/>`))))}let lt,ct=e=>e;var pt=babelHelpers.classPrivateFieldLooseKey("bindElementDataId"),dt=babelHelpers.classPrivateFieldLooseKey("getMenu");class bt extends m{constructor(...e){super(...e),Object.defineProperty(this,dt,{value:ut}),Object.defineProperty(this,pt,{writable:!0,value:"intranet-avatar-widget-extensions"})}getOptions(){return super.getOptions()}getLayout(){return this.cache.remember("layout",(()=>h.Tag.render(lt||(lt=ct`
				<div onclick="${0}" class="intranet-avatar-widget-item__wrapper" data-id="bx-avatar-widget-content-extension">
					<i class="ui-icon-set --o-box intranet-avatar-widget-item__icon"/>
					<span class="intranet-avatar-widget-item__title">${0}</span>
					<i data-id="${0}" class="ui-icon-set --chevron-right-m intranet-avatar-widget-item__chevron"/>
				</div>
			`),(()=>{P.send(P.EVENT_CLICK_EXTENSION),babelHelpers.classPrivateFieldLooseBase(this,dt)[dt]().toggle()}),h.Text.encode(this.getOptions().text),babelHelpers.classPrivateFieldLooseBase(this,pt)[pt])))}}function ut(){return this.cache.remember("menu",(()=>{const e=new g.Menu({bindElement:document.querySelector(`[data-id="${babelHelpers.classPrivateFieldLooseBase(this,pt)[pt]}"]`),items:this.getOptions().items,angle:!0,cachable:!1,offsetLeft:10,fixed:!0});return u.EventEmitter.subscribe("SidePanel.Slider:onOpenStart",(()=>{e.close()})),e}))}let vt,ht=e=>e;class gt extends m{getOptions(){return super.getOptions()}getLayout(){return this.cache.remember("layout",(()=>h.Tag.render(vt||(vt=ht`
				<div onclick="${0}" class="intranet-avatar-widget-item__wrapper --pointer" data-id="bx-avatar-widget-content-logout">
					<i class="ui-icon-set --o-log-out intranet-avatar-widget-item__icon"/>
					<span class="intranet-avatar-widget-item__title">${0}</span>
				</div>
			`),(()=>{if(P.send(P.EVENT_CLICK_LOGOUT),v.DesktopApi.isDesktop())v.DesktopApi.logout();else{const e=new h.Uri(window.location.pathname);e.removeQueryParam(this.getOptions().removeQueryParam);const t=new h.Uri(this.getOptions().path);t.setQueryParam("sessid",BX.bitrix_sessid()),t.setQueryParam("backurl",encodeURIComponent(e.toString())),document.location.href=t}}),this.getOptions().title)))}}let mt,Pt=e=>e;class Lt extends m{getOptions(){return super.getOptions()}getLayout(){return this.cache.remember("layout",(()=>h.Tag.render(mt||(mt=Pt`
				<div onclick="${0}" class="intranet-avatar-widget-item__wrapper --pointer" data-id="bx-avatar-widget-content-settings">
					<i class="ui-icon-set --o-image intranet-avatar-widget-item__icon"/>
					<span class="intranet-avatar-widget-item__title">${0}</span>
				</div>
			`),(()=>{P.send(P.EVENT_CLICK_CHANGE_PORTAL_THEME),BX.Intranet.Bitrix24.ThemePicker.Singleton.showDialog(!1)}),this.getOptions().title)))}}let _t,wt=e=>e;var Ot=babelHelpers.classPrivateFieldLooseKey("onClick");class ft extends m{constructor(...e){super(...e),Object.defineProperty(this,Ot,{value:Ht})}getOptions(){return super.getOptions()}getLayout(){return this.cache.remember("layout",(()=>h.Tag.render(_t||(_t=wt`
				<div onclick="${0}" class="intranet-avatar-widget-item__wrapper" data-id="bx-avatar-widget-content-perf-review">
					<i class="ui-icon-set --o-form intranet-avatar-widget-item__icon"/>
					<div class="intranet-avatar-widget-item__info-wrapper">
						<span class="intranet-avatar-widget-item__title">
							${0}
						</span>
					</div>
					<i class="ui-icon-set --chevron-right-m intranet-avatar-widget-item__chevron"/>
				</div>
			`),(()=>{babelHelpers.classPrivateFieldLooseBase(this,Ot)[Ot]()}),this.getOptions().title)))}}function Ht(){document.location.href=h.Loc.getMessage("SITE_DIR")+"company/stafftools/performance_review/passing/"}var yt=babelHelpers.classPrivateFieldLooseKey("cache"),Bt=babelHelpers.classPrivateFieldLooseKey("popupsShowAfterBasePopup"),Ft=babelHelpers.classPrivateFieldLooseKey("getContent"),Et=babelHelpers.classPrivateFieldLooseKey("getMainContent"),Ct=babelHelpers.classPrivateFieldLooseKey("getSignDocumentsContent"),Tt=babelHelpers.classPrivateFieldLooseKey("getSalaryVacationContent"),It=babelHelpers.classPrivateFieldLooseKey("getPerfReviewContent"),St=babelHelpers.classPrivateFieldLooseKey("getQrAuthContent"),At=babelHelpers.classPrivateFieldLooseKey("getDesktopContent"),Kt=babelHelpers.classPrivateFieldLooseKey("getOtpContent"),kt=babelHelpers.classPrivateFieldLooseKey("getExtensionContent"),xt=babelHelpers.classPrivateFieldLooseKey("getThemeContent"),jt=babelHelpers.classPrivateFieldLooseKey("getLogoutContent"),Nt=babelHelpers.classPrivateFieldLooseKey("setAutoHideEventHandlers");class $t extends u.EventEmitter{constructor(e){super(),Object.defineProperty(this,Nt,{value:Qt}),Object.defineProperty(this,jt,{value:zt}),Object.defineProperty(this,xt,{value:Yt}),Object.defineProperty(this,kt,{value:qt}),Object.defineProperty(this,Kt,{value:Gt}),Object.defineProperty(this,At,{value:Wt}),Object.defineProperty(this,St,{value:Ut}),Object.defineProperty(this,It,{value:Vt}),Object.defineProperty(this,Tt,{value:Dt}),Object.defineProperty(this,Ct,{value:Mt}),Object.defineProperty(this,Et,{value:Rt}),Object.defineProperty(this,Ft,{value:Xt}),Object.defineProperty(this,yt,{writable:!0,value:new h.Cache.MemoryCache}),Object.defineProperty(this,Bt,{writable:!0,value:[]}),this.setOptions(e),this.setEventNamespace("BX.Intranet.AvatarWidget.Popup"),this.setEventHandlers()}setOptions(e){babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].set("options",e)}getOptions(){return babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].get("options",{})}show(){this.getBasePopup().show(),this.emit("show"),P.send(P.EVENT_OPEN_WIDGET)}close(){this.getBasePopup().close()}getBasePopup(){return babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].remember("popup",(()=>{this.emit("beforeInit");const e=new t.PopupComponentsMaker({target:this.getOptions().target,width:450,content:babelHelpers.classPrivateFieldLooseBase(this,Ft)[Ft](),popupLoader:this.getOptions().loader,offsetLeft:-392,offsetTop:-50});e.getPopup().setFixed(!0);const s=()=>{BX.SidePanel.Instance.isOpen()&&(e.getPopup().setOverlay({backgroundColor:"transparent"}),e.getPopup().showOverlay())};return s(),e.getPopup().subscribe("onClose",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt]=[],e.getPopup().removeOverlay()})),e.getPopup().subscribe("onBeforeShow",s),babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].set("popup",e),this.emit("afterInit"),e}))}setEventHandlers(){this.subscribe("beforeInit",(()=>{u.EventEmitter.subscribe("BX.Intranet.AvatarWidget.Popup:makeWithHint",(()=>{this.subscribe("afterInit",(()=>{BX.UI.Hint.init(this.getBasePopup().getPopup().getPopupContainer())}))})),this.subscribe("afterInit",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Nt)[Nt]();const e=()=>{this.close()};u.EventEmitter.subscribe("SidePanel.Slider:onOpenStart",e),u.EventEmitter.subscribe("BX.Intranet.AvatarWidget.Popup:openChild",e)}))}))}}function Xt(){return babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].remember("content",(()=>{var e,t,s,i,a,r,n,o;const l=[babelHelpers.classPrivateFieldLooseBase(this,Et)[Et]().getConfig()];return null!=(e=this.getOptions().content)&&null!=(t=e.signDocuments)&&t.isAvailable&&l.push(babelHelpers.classPrivateFieldLooseBase(this,Ct)[Ct]().getConfig(),babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt]().getConfig()),null!=(s=this.getOptions().content)&&null!=(i=s.perfReview)&&i.isAvailable&&l.push(babelHelpers.classPrivateFieldLooseBase(this,It)[It]().getConfig()),null!=(a=this.getOptions().content)&&null!=(r=a.otp)&&r.isAvailable?l.push({html:[babelHelpers.classPrivateFieldLooseBase(this,St)[St]().getConfig(),{html:[babelHelpers.classPrivateFieldLooseBase(this,At)[At]().getConfig(),babelHelpers.classPrivateFieldLooseBase(this,Kt)[Kt]().getConfig()]}]}):l.push({html:[babelHelpers.classPrivateFieldLooseBase(this,St)[St]().getConfig(),babelHelpers.classPrivateFieldLooseBase(this,At)[At]().getConfig()]}),null!=(n=this.getOptions().content)&&null!=(o=n.extension)&&o.isAvailable&&l.push(babelHelpers.classPrivateFieldLooseBase(this,kt)[kt]().getConfig()),l.push({html:[babelHelpers.classPrivateFieldLooseBase(this,xt)[xt]().getConfig(),babelHelpers.classPrivateFieldLooseBase(this,jt)[jt]().getConfig()]}),l}))}function Rt(){return babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].remember("mainContent",(()=>new k({...this.getOptions().content.main})))}function Mt(){return babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].remember("myDocumentsContent",(()=>new Ve({...this.getOptions().content.signDocuments})))}function Dt(){return babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].remember("salaryVacationContent",(()=>new it({...this.getOptions().content.salaryVacation})))}function Vt(){return babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].remember("perfReviewContent",(()=>new ft({...this.getOptions().content.perfReview})))}function Ut(){return babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].remember("qrAuthContent",(()=>{var e;return new Q({isSmall:!(null!=(e=this.getOptions().content.otp)&&e.isAvailable),...this.getOptions().content.qrAuth})}))}function Wt(){return babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].remember("desktopContent",(()=>{var e;return new me({isSmall:!(null!=(e=this.getOptions().content.otp)&&e.isAvailable),...this.getOptions().content.desktop})}))}function Gt(){return babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].remember("otpContent",(()=>new Ae({...this.getOptions().content.otp})))}function qt(){return babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].remember("extensionContent",(()=>new bt({...this.getOptions().content.extension})))}function Yt(){return babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].remember("settingsContent",(()=>new Lt({...this.getOptions().content.theme})))}function zt(){return babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].remember("logoutContent",(()=>new gt({...this.getOptions().content.logout})))}function Qt(){u.EventEmitter.subscribe("BX.Main.Popup:onShow",(e=>{if(!this.getBasePopup().getPopup().isShown())return;h.Dom.style(this.getBasePopup().getPopup().getPopupContainer(),"overflow-y","hidden");const t=e.getTarget();if(t&&t.getId()===this.getBasePopup().getPopup().getId())this.getBasePopup().getPopup().setAutoHide(!0),u.EventEmitter.emit("BX.Intranet.AvatarWidget.Popup:enabledAutoHide");else{this.getBasePopup().getPopup().setAutoHide(!1),u.EventEmitter.emit("BX.Intranet.AvatarWidget.Popup:disabledAutoHide"),babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt].includes(t)||babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt].push(t);const e=()=>{babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt]=babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt].filter((e=>e!==t)),0===babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt].length&&(this.getBasePopup().getPopup().setAutoHide(!0),h.Dom.style(this.getBasePopup().getPopup().getPopupContainer(),"overflow-y","auto"),u.EventEmitter.emit("BX.Intranet.AvatarWidget.Popup:enabledAutoHide"))};t.subscribeOnce("onClose",e),t.subscribeOnce("onDestroy",e)}}))}var Jt=babelHelpers.classPrivateFieldLooseKey("cache"),Zt=babelHelpers.classPrivateFieldLooseKey("instance"),es=babelHelpers.classPrivateFieldLooseKey("getPopup");class ts{constructor(){Object.defineProperty(this,es,{value:ss}),Object.defineProperty(this,Jt,{writable:!0,value:new h.Cache.MemoryCache})}static getInstance(){return babelHelpers.classPrivateFieldLooseBase(this,Zt)[Zt]||(babelHelpers.classPrivateFieldLooseBase(this,Zt)[Zt]=new this),babelHelpers.classPrivateFieldLooseBase(this,Zt)[Zt]}show(){babelHelpers.classPrivateFieldLooseBase(this,es)[es]().getBasePopup().isShown()||babelHelpers.classPrivateFieldLooseBase(this,es)[es]().show()}setOptions(e){return babelHelpers.classPrivateFieldLooseBase(this,Jt)[Jt].set("options",e),this}getOptions(){return babelHelpers.classPrivateFieldLooseBase(this,Jt)[Jt].get("options",{})}}function ss(){return babelHelpers.classPrivateFieldLooseBase(this,Jt)[Jt].remember("popup",(()=>new $t({target:this.getOptions().buttonWrapper,loader:this.getOptions().loader,content:{...this.getOptions().data}})))}Object.defineProperty(ts,Zt,{writable:!0,value:void 0}),e.AvatarWidget=ts}(this.BX.Intranet=this.BX.Intranet||{},BX.UI,BX.UI,BX.Timeman,BX.UI.Analytics,BX.Intranet,BX.UI,BX.UI,BX,BX.UI,BX.UI,BX.Crm,BX.HumanResources.HcmLink,BX.Event,BX.Messenger.v2.Lib,BX,BX.Main);
//# sourceMappingURL=avatar-widget.bundle.map.js