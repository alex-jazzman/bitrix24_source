this.BX=this.BX||{},function(e,s,t){"use strict";let l,a,i,r,o=e=>e;var n=babelHelpers.classPrivateFieldLooseKey("tagSelector"),d=babelHelpers.classPrivateFieldLooseKey("rootDepartment"),c=babelHelpers.classPrivateFieldLooseKey("departmentList"),b=babelHelpers.classPrivateFieldLooseKey("title"),p=babelHelpers.classPrivateFieldLooseKey("description"),v=babelHelpers.classPrivateFieldLooseKey("initTagSelector"),u=babelHelpers.classPrivateFieldLooseKey("isRootItem");function g(e){return new t.TagSelector({tagTextColor:"#1E8D36",tagBgColor:"#D4FDB0",items:this.getDefaultItems(),events:{onBeforeTagRemove:e=>{const s=e.getTarget(),{tag:t}=e.getData();1===s.getTags().length&&babelHelpers.classPrivateFieldLooseBase(this,u)[u](t)&&e.preventDefault()}},dialogOptions:{context:"INVITATION_STRUCTURE",width:350,enableSearch:!0,multiple:!0,entities:[{id:"structure-node",options:{selectMode:"departmentsOnly",restricted:"inviteUser"}}],events:{"Item:onBeforeDeselect":e=>{const s=e.getTarget().getSelectedItems();1===s.length&&babelHelpers.classPrivateFieldLooseBase(this,u)[u](s[0])&&e.preventDefault()},"Item:onDeselect":s=>{const t=s.getTarget();if(t.getSelectedItems().length<=0){const s=t.getItem(["structure-node",null==e?void 0:e.rootDepartment.id]);null==s||s.select()}}}}})}function h(e){var t,l;const a=s.Type.isNil(null==e?void 0:e.id)?null:parseInt(null==e?void 0:e.id,10),i=s.Type.isNil(null==(t=babelHelpers.classPrivateFieldLooseBase(this,d)[d])?void 0:t.id)?null:parseInt(null==(l=babelHelpers.classPrivateFieldLooseBase(this,d)[d])?void 0:l.id,10);return!s.Type.isNil(a)&&!s.Type.isNil(i)&&a===i}e.default=class{constructor(e){var t,l;Object.defineProperty(this,u,{value:h}),Object.defineProperty(this,v,{value:g}),Object.defineProperty(this,n,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,b,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),babelHelpers.classPrivateFieldLooseBase(this,d)[d]=s.Type.isNil(null==e?void 0:e.rootDepartment)?null:null==e?void 0:e.rootDepartment,babelHelpers.classPrivateFieldLooseBase(this,c)[c]=s.Type.isArray(null==e?void 0:e.departmentList)?null==e?void 0:e.departmentList:[],babelHelpers.classPrivateFieldLooseBase(this,b)[b]=null!=(t=e.title)?t:s.Loc.getMessage("INTRANET_INVITE_DIALOG_DEPARTMENT_CONTROL_LABEL"),babelHelpers.classPrivateFieldLooseBase(this,p)[p]=null!=(l=e.description)?l:s.Loc.getMessage("INTRANET_INVITE_DIALOG_DEPARTMENT_CONTROL_DESCRIPTION"),babelHelpers.classPrivateFieldLooseBase(this,n)[n]=babelHelpers.classPrivateFieldLooseBase(this,v)[v](e)}getDefaultItems(){let e=[];if(!s.Type.isNil(babelHelpers.classPrivateFieldLooseBase(this,d)[d])&&s.Type.isArray(babelHelpers.classPrivateFieldLooseBase(this,c)[c]))e=babelHelpers.classPrivateFieldLooseBase(this,c)[c].map(e=>({id:parseInt(e.id,10),avatar:"/bitrix/js/humanresources/entity-selector/src/images/company.svg",entityId:"structure-node",textColor:"#006E7C",bgColor:"#DDF6F9",title:e.name,customData:{accessCode:e.accessCode}}));else if(!s.Type.isNil(babelHelpers.classPrivateFieldLooseBase(this,d)[d])){const s={id:parseInt(babelHelpers.classPrivateFieldLooseBase(this,d)[d].id,10),avatar:"/bitrix/js/humanresources/entity-selector/src/images/company.svg",entityId:"structure-node",textColor:"#006E7C",bgColor:"#DDF6F9",title:babelHelpers.classPrivateFieldLooseBase(this,d)[d].name,customData:{accessCode:babelHelpers.classPrivateFieldLooseBase(this,d)[d].accessCode}};e.push(s)}return e}reset(){babelHelpers.classPrivateFieldLooseBase(this,n)[n].removeTags(),this.getDefaultItems().forEach(e=>{babelHelpers.classPrivateFieldLooseBase(this,n)[n].addTag(e)})}renderTo(e){s.Dom.append(this.render(),e)}getValues(){const e=babelHelpers.classPrivateFieldLooseBase(this,n)[n].getDialog().getSelectedItems(),s=[];return e.forEach(e=>{const t=parseInt(null==e?void 0:e.id,10);t>0&&s.push(t)}),s}render(){const e=s.Tag.render(l||(l=o`<label class="department-control__dialog-title">${0}</label>`),babelHelpers.classPrivateFieldLooseBase(this,b)[b]),t=s.Tag.render(a||(a=o`<div class="department-control__dialog-description">${0}</div>`),babelHelpers.classPrivateFieldLooseBase(this,p)[p]),d=s.Tag.render(i||(i=o`<div></div>`));return babelHelpers.classPrivateFieldLooseBase(this,n)[n].renderTo(d),s.Tag.render(r||(r=o`<div>${0}${0}${0}</div>`),e,t,d)}}}(this.BX.Intranet=this.BX.Intranet||{},BX,BX.UI.EntitySelector);
//# sourceMappingURL=department-control.bundle.js.map
