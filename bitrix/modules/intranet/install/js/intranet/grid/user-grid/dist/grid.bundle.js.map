{"version":3,"file":"grid.bundle.js","sources":["../src/field/base-field.js","../src/field/photo-field.js","../src/field/full-name-field.js","../src/field/employee-field.js","../src/grid-manager.js","../src/field/activity-field.js","../src/field/department-field.js","../src/group-actions/base-action.js","../src/group-actions/fire-action.js","../src/group-actions/delete-action.js","../src/group-actions/confirm-action.js","../src/group-actions/decline-action.js","../src/group-actions/reinvite-action.js","../src/group-actions/create-chat-action.js","../src/group-actions/change-department-action.js","../src/group-actions/group-action-factory.js","../src/panel.js"],"sourcesContent":["import { Dom } from 'main.core';\n\nexport class BaseField\n{\n\t#fieldId: string;\n\t#gridId: ?string;\n\n\tconstructor(params: {\n\t\tfieldId: string,\n\t\tgridId: string,\n\t}) {\n\t\tthis.#fieldId = params.fieldId;\n\t\tthis.#gridId = params.gridId ?? null;\n\t}\n\n\tgetGridId(): string\n\t{\n\t\treturn this.#gridId;\n\t}\n\n\tgetFieldId(): string\n\t{\n\t\treturn this.#fieldId;\n\t}\n\n\tgetGrid(): any | null\n\t{\n\t\tlet grid = null;\n\n\t\tif (this.#gridId)\n\t\t{\n\t\t\tgrid = BX.Main.gridManager.getById(this.#gridId);\n\t\t}\n\n\t\treturn grid?.instance;\n\t}\n\n\tgetFieldNode(): HTMLElement\n\t{\n\t\treturn document.getElementById(this.getFieldId());\n\t}\n\n\tappendToFieldNode(element: HTMLElement): void\n\t{\n\t\tDom.append(element, this.getFieldNode());\n\t}\n}","import { BaseField } from './base-field';\nimport { Dom } from 'main.core';\nimport { AvatarRound, AvatarRoundGuest, AvatarRoundExtranet } from 'ui.avatar';\n\nexport type PhotoFieldType = {\n\tphotoUrl: string,\n\trole: string,\n}\n\nexport class PhotoField extends BaseField\n{\n\trender(params: PhotoFieldType): void\n\t{\n\t\tconst avatarOptions = {\n\t\t\tsize: 40,\n\t\t\tuserpicPath: params.photoUrl ? params.photoUrl : null,\n\t\t};\n\n\t\tlet avatar = null;\n\n\t\tif (params.role === 'collaber')\n\t\t{\n\t\t\tavatar = new AvatarRoundGuest(avatarOptions);\n\t\t}\n\t\telse if (params.role === 'extranet')\n\t\t{\n\t\t\tavatar = new AvatarRoundExtranet(avatarOptions);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tavatar = new AvatarRound(avatarOptions);\n\t\t}\n\n\t\tavatar?.renderTo(this.getFieldNode());\n\n\t\tDom.addClass(this.getFieldNode(), 'user-grid_user-photo');\n\t}\n}","import { BaseField } from './base-field';\nimport { Dom, Tag, Loc, Text } from 'main.core';\nimport { Label, LabelColor } from 'ui.label';\n\nexport type FullNameFieldType = {\n\tfullName: string,\n\tprofileLink: string,\n\tposition: ?string,\n\tphotoUrl: string,\n\trole: string,\n\tinviteStatus: string,\n}\n\nexport class FullNameField extends BaseField\n{\n\trender(params: FullNameFieldType): void\n\t{\n\t\tconst fullNameContainer = Tag.render`\n\t\t\t<div class=\"user-grid_full-name-container\">${this.#getFullNameLink(params.fullName, params.profileLink)}</div>\n\t\t`;\n\n\t\tif (params.position)\n\t\t{\n\t\t\tDom.append(this.#getPositionLabelContainer(Text.encode(params.position)), fullNameContainer);\n\t\t}\n\n\t\tswitch (params.role)\n\t\t{\n\t\t\tcase 'integrator':\n\t\t\t\tDom.append(this.#getIntegratorBalloonContainer(), fullNameContainer);\n\t\t\t\tbreak;\n\t\t\tcase 'admin':\n\t\t\t\tDom.append(this.#getAdminBalloonContainer(), fullNameContainer);\n\t\t\t\tbreak;\n\t\t\tcase 'extranet':\n\t\t\t\tDom.append(this.#getExtranetBalloonContainer(), fullNameContainer);\n\t\t\t\tbreak;\n\t\t\tcase 'collaber':\n\t\t\t\tDom.append(this.#getCollaberBalloonContainer(), fullNameContainer);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tswitch (params.inviteStatus)\n\t\t{\n\t\t\tcase 'INVITE_AWAITING_APPROVE':\n\t\t\t\tDom.append(this.#getWaitingConfirmationLabelContainer(), fullNameContainer);\n\t\t\t\tbreak;\n\t\t\tcase 'INVITED':\n\t\t\t\tDom.append(this.#getInvitedLabelContainer(), fullNameContainer);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.appendToFieldNode(fullNameContainer);\n\t}\n\n\t#getFullNameLink(fullName: string, profileLink: string): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<a class=\"user-grid_full-name-label\" href=\"${profileLink}\">\n\t\t\t\t${fullName}\n\t\t\t</a>\n\t\t`;\n\t}\n\n\t#getInvitedLabelContainer(): HTMLElement\n\t{\n\t\tconst label = new Label({\n\t\t\ttext: Loc.getMessage('INTRANET_JS_CONTROL_BALLOON_INVITATION_NOT_ACCEPTED'),\n\t\t\tcolor: LabelColor.LIGHT_BLUE,\n\t\t\tfill: true,\n\t\t\tsize: Label.Size.MD,\n\t\t\tcustomClass: 'user-grid_label',\n\t\t});\n\n\t\treturn label.render();\n\t}\n\n\t#getWaitingConfirmationLabelContainer(): HTMLElement\n\t{\n\t\tconst label = new Label({\n\t\t\ttext: Loc.getMessage('INTRANET_JS_CONTROL_BALLOON_NOT_CONFIRMED'),\n\t\t\tcolor: LabelColor.YELLOW,\n\t\t\tfill: true,\n\t\t\tsize: Label.Size.MD,\n\t\t\tcustomClass: 'user-grid_label',\n\t\t});\n\n\t\treturn label.render();\n\t}\n\n\t#getPositionLabelContainer(position: string): HTMLElement\n\t{\n\t\treturn Tag.render`<div class=\"user-grid_position-label\">${position}</div>`;\n\t}\n\n\t#getIntegratorBalloonContainer(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<span class=\"user-grid_role-label --integrator\">\n\t\t\t\t${Loc.getMessage('INTRANET_JS_CONTROL_BALLOON_INTEGRATOR')}\n\t\t\t</span>\n\t\t`;\n\t}\n\n\t#getAdminBalloonContainer(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<span class=\"user-grid_role-label --admin\">\n\t\t\t\t${Loc.getMessage('INTRANET_JS_CONTROL_BALLOON_ADMIN')}\n\t\t\t</span>\n\t\t`;\n\t}\n\n\t#getExtranetBalloonContainer(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<span class=\"user-grid_role-label --extranet\">\n\t\t\t\t${Loc.getMessage('INTRANET_JS_CONTROL_BALLOON_EXTRANET')}\n\t\t\t</span>\n\t\t`;\n\t}\n\n\t#getCollaberBalloonContainer(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<span class=\"user-grid_role-label --collaber\">\n\t\t\t\t${Loc.getMessage('INTRANET_JS_CONTROL_BALLOON_COLLABER')}\n\t\t\t</span>\n\t\t`;\n\t}\n}\n","import { BaseField } from './base-field';\nimport { Tag, Text, Dom } from 'main.core';\nimport { PhotoField } from './photo-field';\nimport { FullNameField } from './full-name-field';\n\nexport type EmployeeFieldType = {\n\tfullName: string,\n\tprofileLink: string,\n\tisConfirmed: boolean,\n\tisAdmin: boolean,\n\tposition: ?string,\n\tisInvited: boolean,\n\tisIntegrator: boolean,\n}\n\nexport class EmployeeField extends BaseField\n{\n\trender(params: EmployeeFieldType): void\n\t{\n\t\tconst photoFieldId = Text.getRandom(6);\n\t\tconst fullNameFieldId = Text.getRandom(6);\n\t\tthis.appendToFieldNode(Tag.render`<span id=\"${photoFieldId}\"></span>`);\n\t\tthis.appendToFieldNode(Tag.render`<span class=\"user-grid_full-name-wrapper\" id=\"${fullNameFieldId}\"></span>`);\n\n\t\t(new PhotoField({ fieldId: photoFieldId })).render(params);\n\t\t(new FullNameField({ fieldId: fullNameFieldId })).render(params);\n\n\t\tDom.addClass(this.getFieldNode(), 'user-grid_employee-card-container');\n\t}\n}","import { Type, Loc, ajax } from 'main.core';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport { ErrorCollection } from 'ui.form-elements.field';\n\nexport type SetSortType = {\n\tmenuId: ?string,\n\tgridId: string,\n\tsortBy: string,\n\torder: 'ASC' | 'DESC',\n}\n\nexport type SetFilterType = {\n\tgridId: string,\n\tfilter: Object,\n}\n\nexport class GridManager\n{\n\tstatic instances: Array<GridManager> = [];\n\t#grid: BX.Main.grid;\n\n\tconstructor(gridId: string)\n\t{\n\t\tthis.#grid = BX.Main.gridManager.getById(gridId)?.instance;\n\t}\n\n\tstatic getInstance(gridId: string): GridManager\n\t{\n\t\tif (!this.instances[gridId])\n\t\t{\n\t\t\tthis.instances[gridId] = new GridManager(gridId);\n\t\t}\n\n\t\treturn this.instances[gridId];\n\t}\n\n\tstatic setSort(options: SetSortType): void\n\t{\n\t\tconst grid = BX.Main.gridManager.getById(options.gridId)?.instance;\n\n\t\tif (Type.isObject(grid))\n\t\t{\n\t\t\tgrid.tableFade();\n\t\t\tgrid.getUserOptions().setSort(options.sortBy, options.order, () => {\n\t\t\t\tgrid.reload();\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic setFilter(options: SetFilterType): void\n\t{\n\t\tconst grid = BX.Main.gridManager.getById(options.gridId)?.instance;\n\t\tconst filter = BX.Main.filterManager.getById(options.gridId);\n\n\t\tif (Type.isObject(grid) && Type.isObject(filter))\n\t\t{\n\t\t\tfilter.getApi().extendFilter(options.filter);\n\t\t}\n\t}\n\n\tstatic reinviteCloudAction(data): Promise\n\t{\n\t\treturn ajax.runAction('intranet.invite.reinviteWithChangeContact', {\n\t\t\tdata,\n\t\t}).then((response) => {\n\t\t\tif (response.data.result)\n\t\t\t{\n\t\t\t\tconst InviteAccessPopup = new BX.PopupWindow({\n\t\t\t\t\tcontent: `<p>${Loc.getMessage('INTRANET_USER_LIST_ACTION_REINVITE_SUCCESS')}</p>`,\n\t\t\t\t\tautoHide: true,\n\t\t\t\t});\n\n\t\t\t\tInviteAccessPopup.show();\n\t\t\t}\n\n\t\t\treturn response;\n\t\t}, (response) => {\n\t\t\tconst errors = response.errors.map((error) => error.message);\n\t\t\tErrorCollection.showSystemError(errors.join('<br>'));\n\n\t\t\treturn response;\n\t\t});\n\t}\n\n\tstatic reinviteAction(userId, isExtranetUser): Promise\n\t{\n\t\treturn ajax.runAction('intranet.controller.invite.reinvite', {\n\t\t\tdata: {\n\t\t\t\tparams: {\n\t\t\t\t\tuserId,\n\t\t\t\t\textranet: (isExtranetUser ? 'Y' : 'N'),\n\t\t\t\t},\n\t\t\t},\n\t\t}).then((response) => {\n\t\t\tif (response.data.result)\n\t\t\t{\n\t\t\t\tconst InviteAccessPopup = new BX.PopupWindow({\n\t\t\t\t\tcontent: `<p>${Loc.getMessage('INTRANET_USER_LIST_ACTION_REINVITE_SUCCESS')}</p>`,\n\t\t\t\t\tautoHide: true,\n\t\t\t\t});\n\n\t\t\t\tInviteAccessPopup.show();\n\t\t\t}\n\n\t\t\treturn response;\n\t\t});\n\t}\n\n\tgetGrid(): BX.Main.grid\n\t{\n\t\treturn this.#grid;\n\t}\n\n\tconfirmAction(params: {\n\t\tuserId: number,\n\t\tisAccept: boolean,\n\t}): void\n\t{\n\t\tif (params.userId)\n\t\t{\n\t\t\tthis.confirmUser(params.isAccept ? 'confirm' : 'decline', () => {\n\t\t\t\tconst row = this.#grid.getRows().getById(params.userId);\n\t\t\t\trow?.stateLoad();\n\t\t\t\tajax.runAction('intranet.controller.invite.confirmUserRequest', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tuserId: params.userId,\n\t\t\t\t\t\tisAccept: params.isAccept ? 'Y' : 'N',\n\t\t\t\t\t},\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tif (response.data === true)\n\t\t\t\t\t{\n\t\t\t\t\t\trow?.update();\n\t\t\t\t\t}\n\t\t\t\t\telse if (params.isAccept)\n\t\t\t\t\t{\n\t\t\t\t\t\trow?.stateUnload();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.activityAction({\n\t\t\t\t\t\t\tuserId: params.userId,\n\t\t\t\t\t\t\taction: 'deleteOrFire',\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tif (params.isAccept)\n\t\t\t\t\t{\n\t\t\t\t\t\trow?.stateUnload();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.activityAction({\n\t\t\t\t\t\t\tuserId: params.userId,\n\t\t\t\t\t\t\taction: 'deleteOrFire',\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tactivityAction(params: {\n\t\tuserId: number,\n\t\taction: string,\n\t}): void\n\t{\n\t\tconst userId = params.userId ?? null;\n\t\tconst action = params.action ?? null;\n\n\t\tif (userId)\n\t\t{\n\t\t\tthis.confirmUser(action, () => {\n\t\t\t\tconst row = this.#grid.getRows().getById(params.userId);\n\t\t\t\trow?.stateLoad();\n\n\t\t\t\tif (['fire', 'restore', 'deleteOrFire'].includes(action))\n\t\t\t\t{\n\t\t\t\t\tajax.runAction(`intranet.v2.User.${action}`, {\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t},\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\trow?.update();\n\t\t\t\t\t}).catch((response) => {\n\t\t\t\t\t\trow?.stateUnload();\n\t\t\t\t\t\tconst errors = response.errors.map((error) => error.message);\n\t\t\t\t\t\tErrorCollection.showSystemError(errors.join('<br>'));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tconfirmUser(action: ?string, callBack: function)\n\t{\n\t\tMessageBox.show({\n\t\t\ttitle: this.getConfirmTitle(action) ?? '',\n\t\t\tmessage: this.getConfirmMessage(action) ?? '',\n\t\t\tbuttons: MessageBoxButtons.YES_CANCEL,\n\t\t\tyesCaption: this.getConfirmButtonText(action),\n\t\t\tonYes: (messageBox) => {\n\t\t\t\tcallBack();\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t});\n\t}\n\n\tgetConfirmTitle(action: ?string): ?string\n\t{\n\t\tswitch (action)\n\t\t{\n\t\t\tcase 'restore':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_RESTORE_TITLE');\n\t\t\tcase 'confirm':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_CONFIRM_TITLE');\n\t\t\tcase 'delete':\n\t\t\tcase 'deleteOrFire':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DELETE_TITLE');\n\t\t\tcase 'fire':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DEACTIVATE_TITLE');\n\t\t\tcase 'deactivateInvited':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DEACTIVATE_INVITED_TITLE');\n\t\t\tcase 'decline':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DECLINE_TITLE');\n\t\t\tdefault:\n\t\t\t\treturn '';\n\t\t}\n\t}\n\n\tgetConfirmMessage(action: ?string): ?string\n\t{\n\t\tswitch (action)\n\t\t{\n\t\t\tcase 'restore':\n\t\t\tcase 'confirm':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_CONFIRM_MESSAGE');\n\t\t\tcase 'delete':\n\t\t\tcase 'deleteOrFire':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DELETE_MESSAGE');\n\t\t\tcase 'fire':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DEACTIVATE_MESSAGE');\n\t\t\tcase 'deactivateInvited':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DEACTIVATE_INVITED_MESSAGE');\n\t\t\tcase 'decline':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DECLINE_MESSAGE');\n\t\t\tdefault:\n\t\t\t\treturn '';\n\t\t}\n\t}\n\n\tgetConfirmButtonText(action: ?string): ?string\n\t{\n\t\tswitch (action)\n\t\t{\n\t\t\tcase 'restore':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_RESTORE_BUTTON');\n\t\t\tcase 'confirm':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_CONFIRM_BUTTON');\n\t\t\tcase 'delete':\n\t\t\tcase 'deleteOrFire':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DELETE_BUTTON');\n\t\t\tcase 'fire':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DEACTIVATE_BUTTON');\n\t\t\tcase 'deactivateInvited':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DEACTIVATE_INVITED_BUTTON');\n\t\t\tcase 'decline':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DECLINE_BUTTON');\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n}\n","import { BaseField } from './base-field';\nimport { Loc, Tag, Dom, Type } from 'main.core';\nimport { GridManager } from '../grid-manager';\nimport 'ui.cnt';\nimport { ReinvitePopup, FormType } from 'intranet.reinvite';\n\nexport type ActivityFieldType = {\n\tgridId: string,\n\tuserId: number,\n\taction: string,\n\tenabled: boolean,\n\temail: ?string,\n\tphoneNumber: ?string,\n\tisExtranet: boolean,\n\tisCloud: boolean,\n}\n\nexport class ActivityField extends BaseField\n{\n\trender(params: ActivityFieldType): void\n\t{\n\t\tlet title = '';\n\t\tlet color = '';\n\n\t\tswitch (params.action ?? 'invite')\n\t\t{\n\t\t\tcase 'accept':\n\t\t\t\ttitle = Loc.getMessage('INTRANET_JS_CONTROL_BUTTON_ACCEPT_ENTER');\n\t\t\t\tcolor = BX.UI.Button.Color.PRIMARY;\n\t\t\t\tbreak;\n\t\t\tcase 'invite':\n\t\t\tdefault:\n\t\t\t\ttitle = Loc.getMessage('INTRANET_JS_CONTROL_BUTTON_INVITE_AGAIN');\n\t\t\t\tcolor = BX.UI.Button.Color.LIGHT_BORDER;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst counter = Tag.render`\n\t\t\t<div class=\"ui-counter user-grid_invitation-counter\">\n\t\t\t\t<div class=\"ui-counter-inner\">1</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(counter, this.getFieldNode());\n\n\t\tconst button = new BX.UI.Button({\n\t\t\ttext: title,\n\t\t\tcolor,\n\t\t\tnoCaps: true,\n\t\t\tsize: BX.UI.Button.Size.EXTRA_SMALL,\n\t\t\ttag: BX.UI.Button.Tag.INPUT,\n\t\t\tround: true,\n\t\t\tonclick: () => {\n\t\t\t\tthis.#onClick(params, button);\n\t\t\t},\n\t\t});\n\n\t\tbutton.renderTo(this.getFieldNode());\n\t}\n\n\t#updateData(data): void\n\t{\n\t\tif (!Type.isStringFilled(data.get('newEmail')) && !Type.isBoolean(data.get('newPhone'))) {\n\t\t\ttop.console.error('Empty new email or phone');\n\t\t\treturn;\n\t\t}\n\n\t\tconst row = GridManager.getInstance(this.gridId).getGrid()?.getRows().getById(this.userId);\n\t\trow?.stateLoad();\n\t\tGridManager.reinviteCloudAction(data).then((response) => {\n\t\t\trow?.update();\n\t\t\trow?.stateUnload();\n\t\t});\n\t}\n\n\t#onClick(params: ActivityFieldType, button: BX.UI.Button): void\n\t{\n\t\tif (!params.enabled)\n\t\t{\n\t\t\tconst popup = BX.PopupWindowManager.create(\n\t\t\t\t'intranet-user-grid-invitation-disabled',\n\t\t\t\tnull,\n\t\t\t\t{\n\t\t\t\t\tdarkMode: true,\n\t\t\t\t\tcontent: Loc.getMessage('INTRANET_USER_LIST_ACTION_REINVITE_DISABLED'),\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tangle: true,\n\t\t\t\t\toffsetLeft: 40,\n\t\t\t\t\tmaxWidth: 300,\n\t\t\t\t\toverlay: false,\n\t\t\t\t\tautoHide: true,\n\t\t\t\t},\n\t\t\t);\n\t\t\tpopup.setBindElement(button.getContainer());\n\t\t\tpopup.show();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#actionFactory(params.action).call(this, params, button);\n\t\t}\n\t}\n\n\t#actionFactory(action: string): function\n\t{\n\t\tswitch (action)\n\t\t{\n\t\t\tcase 'accept':\n\t\t\t\treturn this.#acceptAction;\n\t\t\t\tbreak;\n\t\t\tcase 'invite':\n\t\t\t\treturn this.#inviteAction;\n\t\t\tdefault:\n\t\t\t\treturn this.#inviteAction;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t#inviteAction(params, button): void\n\t{\n\t\tif (params.isCloud === true)\n\t\t{\n\t\t\tconst reinvitePopup = new ReinvitePopup({\n\t\t\t\tuserId: params.userId,\n\t\t\t\tformType: params.email ? FormType.EMAIL : FormType.PHONE,\n\t\t\t\tbindElement: button.getContainer(),\n\t\t\t\tinputValue: params.email ?? params.phoneNumber ?? '',\n\t\t\t\ttransport: this.#updateData.bind(params),\n\t\t\t\t// transport: (data) => {\n\t\t\t\t// \tif (!Type.isStringFilled(data.get('newEmail')) && !Type.isBoolean(data.get('newPhone'))) {\n\t\t\t\t// \t\ttop.console.error('Empty new email or phone');\n\t\t\t\t// \t\treturn;\n\t\t\t\t// \t}\n\t\t\t\t// \tif ((data.get('newEmail') === '' || data.get('newEmail') === null) && (data.get('newPhone') === '' || data.get('newPhone') === null)) {\n\t\t\t\t// \t\ttop.console.error('Empty new email or phone');\n\t\t\t\t// \t\treturn;\n\t\t\t\t// \t}\n\t\t\t\t// \tthis.#updateData(data);\n\t\t\t\t// },\n\t\t\t});\n\t\t\t//This is a hack. When the row is updated, a new button is created.\n\t\t\treinvitePopup.getPopup().setBindElement(button.getContainer());\n\t\t\treinvitePopup.show();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tbutton.setWaiting(true);\n\t\t\tGridManager.reinviteAction(params.userId, params.isExtranet).then(() => {\n\t\t\t\tbutton.setWaiting(false);\n\t\t\t});\n\t\t}\n\t}\n\n\t#acceptAction(params, button): void\n\t{\n\t\tGridManager.getInstance(params.gridId).confirmAction({\n\t\t\tisAccept: true,\n\t\t\tuserId: params.userId,\n\t\t});\n\t}\n}\n","import { BaseField } from './base-field';\nimport { Tag, Dom, Loc } from 'main.core';\nimport 'ui.icon-set.main';\nimport { Dialog } from 'ui.entity-selector';\nimport { GridManager } from '../grid-manager';\n\nexport type DepartmentFieldType = {\n\tdepartments: Object,\n\tcanEdit: boolean,\n\tselectedDepartment: number,\n}\n\nexport class DepartmentField extends BaseField\n{\n\trender(params: DepartmentFieldType): void\n\t{\n\t\tDom.addClass(this.getFieldNode(), 'user-grid_department-container');\n\n\t\tif (params.departments.length === 0 && params.canEdit)\n\t\t{\n\t\t\t// TODO: add department button\n\t\t\treturn;\n\t\t\tconst onclick = () => {\n\t\t\t\tconst dialog = new Dialog({\n\t\t\t\t\twidth: 300,\n\t\t\t\t\theight: 300,\n\t\t\t\t\ttargetNode: addButton,\n\t\t\t\t\tcompactView: true,\n\t\t\t\t\tmultiple: false,\n\t\t\t\t\tentities: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'department',\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tselectMode: 'departmentsOnly',\n\t\t\t\t\t\t\t\tallowSelectRootDepartment: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t});\n\n\t\t\t\tdialog.show();\n\t\t\t};\n\n\t\t\tconst addButton = Tag.render`\n\t\t\t\t<div class=\"user-grid_department-btn\" onclick=\"${onclick}\">\n\t\t\t\t\t<div class=\"user-grid_department-icon-container\">\n\t\t\t\t\t\t<div class=\"ui-icon-set --plus-30\" style=\"--ui-icon-set__icon-size: 18px; --ui-icon-set__icon-color: #2fc6f6;\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"user-grid_department-name-container\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_JS_CONTROL_BALLOON_ADD_DEPARTMENT')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tthis.appendToFieldNode(addButton);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tObject.values(params.departments).forEach((department) => {\n\t\t\t\tconst isSelected = department.id === params.selectedDepartment;\n\t\t\t\tconst onclick = () => {\n\t\t\t\t\tGridManager.setFilter({\n\t\t\t\t\t\tgridId: this.getGridId(),\n\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\tDEPARTMENT: isSelected ? '' : department.id,\n\t\t\t\t\t\t\tDEPARTMENT_label: isSelected ? '' : department.name,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tconst button = Tag.render`\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"user-grid_department-btn ${isSelected ? '--selected' : ''}\"\n\t\t\t\t\t\tonclick=\"${onclick}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"user-grid_department-name-container\">\n\t\t\t\t\t\t\t${department.name}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\t\tif (isSelected)\n\t\t\t\t{\n\t\t\t\t\tDom.append(Tag.render`\n\t\t\t\t\t\t<div class=\"user-grid_department-btn-remove ui-icon-set --cross-60\"></div>\n\t\t\t\t\t`, button);\n\t\t\t\t}\n\n\t\t\t\tthis.appendToFieldNode(button);\n\t\t\t});\n\t\t}\n\t}\n}\n","import { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport { Loc } from 'main.core';\n\nexport type BaseActionType = {\n\tgrid: ?BX.Main.grid,\n\tfilter: Array,\n\tselectedUsers: ?Array,\n\tshowPopups: ?boolean,\n\tisCloud: ?boolean,\n};\n\n/**\n * @abstract\n */\nexport class BaseAction\n{\n\t/**\n\t * @abstract\n\t */\n\tstatic getActionId(): string\n\t{\n\t\tthrow new Error('not implemented');\n\t}\n\n\t/**\n\t * @abstract\n\t */\n\tgetAjaxMethod(): string\n\t{\n\t\tthrow new Error('not implemented');\n\t}\n\n\tconstructor(params: BaseActionType)\n\t{\n\t\tthis.grid = params.grid;\n\t\tthis.userFilter = params.filter;\n\t\tthis.selectedUsers = params.selectedUsers;\n\t\tthis.showPopups = params.showPopups ?? true;\n\t\tthis.isCloud = params.isCloud;\n\t}\n\n\texecute(): void\n\t{\n\t\tconst confirmationPopup = this.showPopups\n\t\t\t? this.getConfirmationPopup()\n\t\t\t: null;\n\n\t\tif (confirmationPopup)\n\t\t{\n\t\t\tconfirmationPopup.setOkCallback(() => {\n\t\t\t\tthis.sendActionRequest();\n\t\t\t\tconfirmationPopup.close();\n\t\t\t});\n\t\t\tconfirmationPopup.show();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.sendActionRequest();\n\t\t}\n\t}\n\n\tgetConfirmationPopup(): ?MessageBox\n\t{\n\t\treturn null;\n\t}\n\n\tsendActionRequest(): void\n\t{\n\t\tthis.grid.tableFade();\n\t\tconst selectedRows = this.selectedUsers ?? this.grid.getRows().getSelectedIds();\n\t\tconst isSelectedAllRows = this.grid.getRows().isAllSelected() ? 'Y' : 'N';\n\n\t\tBX.ajax.runAction(this.getAjaxMethod(), {\n\t\t\tdata: {\n\t\t\t\tfields: {\n\t\t\t\t\tuserIds: selectedRows,\n\t\t\t\t\tisSelectedAllRows,\n\t\t\t\t\tfilter: this.userFilter,\n\t\t\t\t},\n\t\t\t},\n\t\t})\n\t\t\t.then((result) => this.handleSuccess(result))\n\t\t\t.catch((result) => this.handleError(result));\n\t}\n\n\thandleSuccess(result: Result): void\n\t{\n\t\tthis.grid.reload();\n\n\t\tif (this.showPopups)\n\t\t{\n\t\t\tconst { skippedActiveUsers, skippedFiredUsers } = result.data;\n\n\t\t\tif (skippedActiveUsers && Object.keys(skippedActiveUsers).length > 0)\n\t\t\t{\n\t\t\t\tthis.showActiveUsersPopup(skippedActiveUsers);\n\t\t\t}\n\t\t\telse if (skippedFiredUsers && Object.keys(skippedFiredUsers).length > 0)\n\t\t\t{\n\t\t\t\tthis.showFiredUsersPopup(skippedFiredUsers);\n\t\t\t}\n\t\t}\n\t}\n\n\thandleError(result: Result): void\n\t{\n\t\tthis.grid.tableUnfade();\n\t\tthis.unselectRows(this.grid);\n\t\tconsole.error(result);\n\n\t\tif (this.showPopups && result.errors && result.errors.length > 0)\n\t\t{\n\t\t\tconst errorMessage = result.errors.map((item) => {\n\t\t\t\treturn item.message;\n\t\t\t}).join(', ');\n\t\t\tMessageBox.show({\n\t\t\t\tmessage: errorMessage,\n\t\t\t\tbuttons: MessageBoxButtons.YES,\n\t\t\t\tyesCaption: Loc.getMessage('INTRANET_USER_LIST_ACTION_UNDERSTOOD_BUTTON'),\n\t\t\t\tonYes: (messageBox) => {\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tshowActiveUsersPopup(activeUsers: Array): void\n\t{\n\t\tMessageBox.show({\n\t\t\ttitle: Loc.getMessage(this.getSkippedUsersTitleCode()),\n\t\t\tmessage: this.getMessageWithProfileNames(this.getSkippedUsersMessageCode(), activeUsers),\n\t\t\tbuttons: MessageBoxButtons.YES,\n\t\t\tyesCaption: Loc.getMessage('INTRANET_USER_LIST_ACTION_UNDERSTOOD_BUTTON'),\n\t\t\tonYes: (messageBox) => {\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t});\n\t}\n\n\tshowFiredUsersPopup(firedUsers: Array): void\n\t{\n\t\tMessageBox.show({\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_FIRE_SKIPPED_TITLE'),\n\t\t\tmessage: this.getMessageWithProfileNames('INTRANET_USER_LIST_GROUP_ACTION_FIRE_SKIPPED_MESSAGE', firedUsers),\n\t\t\tbuttons: MessageBoxButtons.YES,\n\t\t\tyesCaption: Loc.getMessage('INTRANET_USER_LIST_ACTION_UNDERSTOOD_BUTTON'),\n\t\t\tonYes: (messageBox) => {\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t});\n\t}\n\n\tgetMessageWithProfileNames(messageCode: string, users: Array): string\n\t{\n\t\tconst maxDisplayCount = 5;\n\t\tconst userValues = Object.values(users);\n\t\tconst displayedNames = userValues.slice(0, maxDisplayCount).map((user) => user.fullName);\n\t\tconst remainingCount = userValues.length - maxDisplayCount;\n\t\tconst namesString = displayedNames.join(', ');\n\n\t\tif (displayedNames.length < 2 && remainingCount < 1)\n\t\t{\n\t\t\treturn Loc.getMessage(`${messageCode}_SINGLE`, {\n\t\t\t\t'#USER#': namesString,\n\t\t\t});\n\t\t}\n\n\t\tif (remainingCount > 0)\n\t\t{\n\t\t\treturn Loc.getMessage(`${messageCode}_REMAINING`, {\n\t\t\t\t'#USER_LIST#': namesString,\n\t\t\t\t'#USER_REMAINING#': remainingCount,\n\t\t\t});\n\t\t}\n\n\t\treturn Loc.getMessage(messageCode, {\n\t\t\t'#USER_LIST#': namesString,\n\t\t});\n\t}\n\n\tgetSkippedUsersTitleCode(): string\n\t{\n\t\treturn '';\n\t}\n\n\tgetSkippedUsersMessageCode(): string\n\t{\n\t\treturn '';\n\t}\n\n\tunselectRows(grid: BX.Main.grid): void\n\t{\n\t\tgrid.getRows().unselectAll();\n\t\tgrid.updateCounterDisplayed();\n\t\tgrid.updateCounterSelected();\n\t\tgrid.disableActionsPanel();\n\t\tBX.onCustomEvent(window, 'Grid::allRowsUnselected', []);\n\t}\n}\n","import { BaseAction } from './base-action';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport { Loc } from 'main.core';\n\nexport class FireAction extends BaseAction\n{\n\tstatic getActionId(): string\n\t{\n\t\treturn 'fire';\n\t}\n\n\tgetConfirmationPopup(): ?MessageBox\n\t{\n\t\treturn new MessageBox({\n\t\t\tmessage: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_FIRE_MESSAGE'),\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_FIRE_MESSAGE_TITLE'),\n\t\t\tbuttons: MessageBoxButtons.OK_CANCEL,\n\t\t\tokCaption: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_FIRE_MESSAGE_BUTTON'),\n\t\t});\n\t}\n\n\tgetAjaxMethod(): string\n\t{\n\t\treturn 'intranet.controller.user.userlist.groupFire';\n\t}\n\n\tgetSkippedUsersMessageCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_FIRE_SKIPPED_MESSAGE';\n\t}\n\n\tgetSkippedUsersTitleCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_FIRE_SKIPPED_TITLE';\n\t}\n}\n","import { BaseAction } from './base-action';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport { Loc } from 'main.core';\nimport { FireAction } from './fire-action';\n\nexport class DeleteAction extends BaseAction\n{\n\tstatic getActionId(): string\n\t{\n\t\treturn 'delete';\n\t}\n\n\tgetAjaxMethod(): string\n\t{\n\t\treturn 'intranet.controller.user.userlist.groupDelete';\n\t}\n\n\tgetConfirmationPopup(): ?MessageBox\n\t{\n\t\treturn new MessageBox({\n\t\t\tmessage: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_DELETE_MESSAGE'),\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_DELETE_MESSAGE_TITLE'),\n\t\t\tbuttons: MessageBoxButtons.OK_CANCEL,\n\t\t\tokCaption: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_DELETE_MESSAGE_BUTTON'),\n\t\t});\n\t}\n\n\tshowActiveUsersPopup(activeUsers: Array)\n\t{\n\t\tMessageBox.show({\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_DELETE_SKIPPED_TITLE'),\n\t\t\tmessage: this.getMessageWithProfileNames('INTRANET_USER_LIST_GROUP_ACTION_DELETE_SKIPPED_MESSAGE', activeUsers),\n\t\t\tbuttons: MessageBoxButtons.YES_CANCEL,\n\t\t\tyesCaption: Loc.getMessage('INTRANET_USER_LIST_ACTION_DEACTIVATE_INVITED_BUTTON'),\n\t\t\tonYes: (messageBox) => {\n\t\t\t\tmessageBox.close();\n\t\t\t\t(new FireAction({\n\t\t\t\t\tselectedUsers: Object.keys(activeUsers),\n\t\t\t\t\tgrid: this.grid,\n\t\t\t\t\tfilter: this.userFilter,\n\t\t\t\t\tshowPopups: false,\n\t\t\t\t})).execute();\n\t\t\t},\n\t\t\tonNo: () => {\n\t\t\t\tthis.grid.reload();\n\t\t\t},\n\t\t});\n\t}\n\n\tshowFiredUsersPopup(firedUsers: Array): void\n\t{\n\t\tMessageBox.show({\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_DELETE_FIRED_TITLE'),\n\t\t\tmessage: this.getMessageWithProfileNames('INTRANET_USER_LIST_GROUP_ACTION_DELETE_FIRED_MESSAGE', firedUsers),\n\t\t\tbuttons: MessageBoxButtons.YES,\n\t\t\tyesCaption: Loc.getMessage('INTRANET_USER_LIST_ACTION_UNDERSTOOD_BUTTON'),\n\t\t\tonYes: (messageBox) => {\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t});\n\t}\n\n\tgetSkippedUsersTitleCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_DELETE_SKIPPED_TITLE';\n\t}\n\n\tgetSkippedUsersMessageCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_DELETE_SKIPPED_MESSAGE';\n\t}\n}\n","import { BaseAction } from './base-action';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport { Loc } from 'main.core';\n\nexport class ConfirmAction extends BaseAction\n{\n\tstatic getActionId(): string\n\t{\n\t\treturn 'confirm';\n\t}\n\n\tgetConfirmationPopup(): ?MessageBox\n\t{\n\t\treturn new MessageBox({\n\t\t\tmessage: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_CONFIRM_MESSAGE'),\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_CONFIRM_MESSAGE_TITLE'),\n\t\t\tbuttons: MessageBoxButtons.OK_CANCEL,\n\t\t\tokCaption: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_CONFIRM_MESSAGE_BUTTON'),\n\t\t});\n\t}\n\n\thandleSuccess(result: Result): void\n\t{\n\t\tthis.grid.reload();\n\n\t\tif (this.showPopups)\n\t\t{\n\t\t\tconst { skippedFiredUsers } = result.data;\n\n\t\t\tif (skippedFiredUsers && Object.keys(skippedFiredUsers).length > 0)\n\t\t\t{\n\t\t\t\tthis.showFiredUsersPopup(skippedFiredUsers);\n\t\t\t}\n\t\t}\n\t}\n\n\tshowFiredUsersPopup(firedUsers: Array): void\n\t{\n\t\tMessageBox.show({\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_ACCEPT_FIRED_TITLE'),\n\t\t\tmessage: this.getMessageWithProfileNames('INTRANET_USER_LIST_GROUP_ACTION_ACCEPT_FIRED_MESSAGE', firedUsers),\n\t\t\tbuttons: MessageBoxButtons.YES,\n\t\t\tyesCaption: Loc.getMessage('INTRANET_USER_LIST_ACTION_UNDERSTOOD_BUTTON'),\n\t\t\tonYes: (messageBox) => {\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t});\n\t}\n\n\tgetAjaxMethod(): string\n\t{\n\t\treturn 'intranet.controller.user.userlist.groupConfirm';\n\t}\n\n\tgetSkippedUsersMessageCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_CONFIRM_SKIPPED_MESSAGE';\n\t}\n\n\tgetSkippedUsersTitleCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_CONFIRM_SKIPPED_TITLE';\n\t}\n}\n","import { BaseAction } from './base-action';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport { Loc } from 'main.core';\nimport {FireAction} from \"./fire-action\";\n\nexport class DeclineAction extends BaseAction\n{\n\tstatic getActionId(): string\n\t{\n\t\treturn 'decline';\n\t}\n\n\tgetConfirmationPopup(): ?MessageBox\n\t{\n\t\treturn new MessageBox({\n\t\t\tmessage: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_DECLINE_MESSAGE'),\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_DECLINE_MESSAGE_TITLE'),\n\t\t\tbuttons: MessageBoxButtons.OK_CANCEL,\n\t\t\tokCaption: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_DECLINE_MESSAGE_BUTTON'),\n\t\t});\n\t}\n\n\tshowActiveUsersPopup(activeUsers: Array): void\n\t{\n\t\tMessageBox.show({\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_DELETE_SKIPPED_TITLE'),\n\t\t\tmessage: this.getMessageWithProfileNames('INTRANET_USER_LIST_GROUP_ACTION_DELETE_SKIPPED_MESSAGE', activeUsers),\n\t\t\tbuttons: MessageBoxButtons.YES_CANCEL,\n\t\t\tyesCaption: Loc.getMessage('INTRANET_USER_LIST_ACTION_DEACTIVATE_INVITED_BUTTON'),\n\t\t\tonYes: (messageBox) => {\n\t\t\t\tmessageBox.close();\n\t\t\t\t(new FireAction({\n\t\t\t\t\tselectedUsers: Object.keys(activeUsers),\n\t\t\t\t\tgrid: this.grid,\n\t\t\t\t\tfilter: this.userFilter,\n\t\t\t\t\tshowPopups: false,\n\t\t\t\t})).execute();\n\t\t\t},\n\t\t});\n\t}\n\n\tgetAjaxMethod(): string\n\t{\n\t\treturn 'intranet.controller.user.userlist.groupDecline';\n\t}\n\n\tgetSkippedUsersMessageCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_CONFIRM_SKIPPED_MESSAGE';\n\t}\n\n\tgetSkippedUsersTitleCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_CONFIRM_SKIPPED_TITLE';\n\t}\n}\n","import { BaseAction } from './base-action';\nimport { Loc } from 'main.core';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport { ConfirmAction } from './confirm-action';\n\nexport class ReinviteAction extends BaseAction\n{\n\tstatic getActionId(): string\n\t{\n\t\treturn 'reInvite';\n\t}\n\n\tgetAjaxMethod(): string\n\t{\n\t\treturn 'intranet.controller.user.userlist.groupReInvite';\n\t}\n\n\thandleSuccess(result)\n\t{\n\t\tthis.grid.tableUnfade();\n\t\tconst { skippedActiveUsers, skippedFiredUsers, skippedWaitingUsers } = result.data;\n\n\t\tif (skippedActiveUsers && Object.keys(skippedActiveUsers).length > 0)\n\t\t{\n\t\t\tthis.showActiveUsersPopup(skippedActiveUsers);\n\t\t}\n\t\telse if (skippedWaitingUsers && Object.keys(skippedWaitingUsers).length > 0)\n\t\t{\n\t\t\tthis.showWaitingUsersPopup(skippedWaitingUsers);\n\t\t}\n\t\telse if (skippedFiredUsers && Object.keys(skippedFiredUsers).length > 0)\n\t\t{\n\t\t\tthis.showFiredUsersPopup(skippedFiredUsers);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_REINVITE_SUCCESS'),\n\t\t\t\tautoHide: true,\n\t\t\t\tposition: 'bottom-right',\n\t\t\t\tcategory: 'menu-self-item-popup',\n\t\t\t\tautoHideDelay: 3000,\n\t\t\t});\n\t\t\tBX.Bitrix24?.EmailConfirmation?.showPopupDispatched();\n\t\t}\n\n\t\tthis.unselectRows(this.grid);\n\t}\n\n\tshowWaitingUsersPopup(waitingUsers: Array): void\n\t{\n\t\tMessageBox.show({\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_ALREADY_ACCEPT_INVITE_TITLE'),\n\t\t\tmessage: this.getMessageWithProfileNames('INTRANET_USER_LIST_GROUP_ACTION_ALREADY_ACCEPT_INVITE_MESSAGE', waitingUsers),\n\t\t\tbuttons: MessageBoxButtons.YES_CANCEL,\n\t\t\tyesCaption: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_CONFIRM_MESSAGE_BUTTON'),\n\t\t\tonYes: (messageBox) => {\n\t\t\t\tmessageBox.close();\n\t\t\t\t(new ConfirmAction({\n\t\t\t\t\tgrid: this.grid,\n\t\t\t\t\tfilter: this.userFilter,\n\t\t\t\t\tselectedUsers: Object.keys(waitingUsers),\n\t\t\t\t\tshowPopups: false,\n\t\t\t\t})).execute();\n\t\t\t},\n\t\t});\n\t}\n\n\tshowFiredUsersPopup(firedUsers: Array): void\n\t{\n\t\tMessageBox.show({\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_ACCEPT_FIRED_TITLE'),\n\t\t\tmessage: this.getMessageWithProfileNames('INTRANET_USER_LIST_GROUP_ACTION_ACCEPT_FIRED_MESSAGE', firedUsers),\n\t\t\tbuttons: MessageBoxButtons.YES,\n\t\t\tyesCaption: Loc.getMessage('INTRANET_USER_LIST_ACTION_UNDERSTOOD_BUTTON'),\n\t\t\tonYes: (messageBox) => {\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t});\n\t}\n\n\tgetSkippedUsersMessageCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_CONFIRM_SKIPPED_MESSAGE';\n\t}\n\n\tgetSkippedUsersTitleCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_CONFIRM_SKIPPED_TITLE';\n\t}\n}\n","import { BaseAction } from './base-action';\nimport { Messenger } from 'im.public';\n\nexport class CreateChatAction extends BaseAction\n{\n\tstatic getActionId(): string\n\t{\n\t\treturn 'createChat';\n\t}\n\n\tgetAjaxMethod(): string\n\t{\n\t\treturn 'intranet.controller.user.userlist.createChat';\n\t}\n\n\thandleSuccess(result)\n\t{\n\t\tthis.grid.tableUnfade();\n\t\tconst chatId = result.data;\n\t\tMessenger.openChat(`chat${chatId}`);\n\t\tthis.unselectRows(this.grid);\n\t}\n}\n","import { BaseAction } from './base-action';\nimport { Dialog } from 'ui.entity-selector';\nimport { Tag } from 'main.core';\n\nexport class ChangeDepartmentAction extends BaseAction\n{\n\tstatic getActionId(): string\n\t{\n\t\treturn 'changeDepartment';\n\t}\n\n\tgetAjaxMethod(): string\n\t{\n\t\treturn 'intranet.controller.user.userlist.groupChangeDepartment';\n\t}\n\n\texecute(): void\n\t{\n\t\tconst saveButton = new BX.UI.SaveButton({\n\t\t\tonclick: () => {\n\t\t\t\tconst selectedIds = dialog.getSelectedItems().map((item) => item.id);\n\t\t\t\tdialog.hide();\n\n\t\t\t\tif (selectedIds.length > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.sendChangeDepartmentRequest(selectedIds);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.unselectRows(this.grid);\n\t\t\t\t}\n\t\t\t},\n\t\t\tsize: BX.UI.Button.Size.SMALL,\n\t\t});\n\t\tconst cancelButton = new BX.UI.CancelButton({\n\t\t\tonclick: () => {\n\t\t\t\tdialog.hide();\n\t\t\t},\n\t\t\tsize: BX.UI.Button.Size.SMALL,\n\t\t});\n\t\tconst footer = Tag.render`<span></span>`;\n\t\tsaveButton.renderTo(footer);\n\t\tcancelButton.renderTo(footer);\n\n\t\tconst dialog = new Dialog({\n\t\t\tdropdownMode: true,\n\t\t\tenableSearch: true,\n\t\t\tcompactView: true,\n\t\t\tmultiple: true,\n\t\t\tfooter,\n\t\t\tentities: [\n\t\t\t\t{\n\t\t\t\t\tid: 'department',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tselectMode: 'departmentsOnly',\n\t\t\t\t\t\tallowSelectRootDepartment: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\n\t\tdialog.show();\n\t}\n\n\tsendChangeDepartmentRequest(departmentIds: Array): void\n\t{\n\t\tthis.grid.tableFade();\n\t\tconst selectedRows = this.selectedUsers ?? this.grid.getRows().getSelectedIds();\n\t\tconst isSelectedAllRows = this.grid.getRows().isAllSelected() ? 'Y' : 'N';\n\n\t\tBX.ajax.runAction(this.getAjaxMethod(), {\n\t\t\tdata: {\n\t\t\t\tfields: {\n\t\t\t\t\tuserIds: selectedRows,\n\t\t\t\t\tisSelectedAllRows,\n\t\t\t\t\tfilter: this.userFilter,\n\t\t\t\t\tdepartmentIds,\n\t\t\t\t},\n\t\t\t},\n\t\t})\n\t\t\t.then((result) => this.handleSuccess(result))\n\t\t\t.catch((result) => this.handleError(result));\n\t}\n\n\tgetSkippedUsersTitleCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_EXTRANET_CHANGE_DEPARTMENT_TITLE';\n\t}\n\n\tgetSkippedUsersMessageCode(): string\n\t{\n\t\treturn this.isCloud\n\t\t\t? 'INTRANET_USER_LIST_GROUP_ACTION_EXTRANET_CHANGE_DEPARTMENT_MESSAGE_CLOUD'\n\t\t\t: 'INTRANET_USER_LIST_GROUP_ACTION_EXTRANET_CHANGE_DEPARTMENT_MESSAGE';\n\t}\n}\n","import { DeleteAction } from './delete-action';\nimport { FireAction } from './fire-action';\nimport { ConfirmAction } from './confirm-action';\nimport { DeclineAction } from './decline-action';\nimport { ReinviteAction } from './reinvite-action';\nimport { CreateChatAction } from './create-chat-action';\nimport { ChangeDepartmentAction } from './change-department-action';\nimport { BaseAction, BaseActionType } from './base-action';\n\nconst ACTIONS = [\n\tDeleteAction,\n\tFireAction,\n\tConfirmAction,\n\tDeclineAction,\n\tReinviteAction,\n\tCreateChatAction,\n\tChangeDepartmentAction,\n];\n\nexport class ActionFactory\n{\n\tstatic createAction(actionId: string, params: BaseActionType): BaseAction\n\t{\n\t\tconst ActionClass = ACTIONS.find((action) => action.getActionId() === actionId);\n\n\t\tif (!ActionClass)\n\t\t{\n\t\t\tthrow new Error(`Unknown actionId: ${actionId}`);\n\t\t}\n\n\t\treturn new ActionClass(params);\n\t}\n}\n","import { ActionFactory } from './group-actions/group-action-factory';\n\nexport type ActionParamsType = {\n\tactionId: string,\n\tgridId: string,\n\tfilter: Array,\n\tisCloud: boolean,\n}\n\nexport class Panel\n{\n\tstatic executeAction(params: ActionParamsType) {\n\t\ttry\n\t\t{\n\t\t\tconst action = ActionFactory.createAction(params.actionId, {\n\t\t\t\tgrid: BX.Main.gridManager.getById(params.gridId)?.instance,\n\t\t\t\tfilter: params.filter,\n\t\t\t\tisCloud: params.isCloud,\n\t\t\t});\n\t\t\taction.execute();\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error('Error executing action:', error);\n\t\t}\n\t}\n}"],"names":["BaseField","constructor","params","fieldId","gridId","getGridId","getFieldId","getGrid","grid","BX","Main","gridManager","getById","instance","getFieldNode","document","getElementById","appendToFieldNode","element","Dom","append","PhotoField","render","avatarOptions","size","userpicPath","photoUrl","avatar","role","AvatarRoundGuest","AvatarRoundExtranet","AvatarRound","renderTo","addClass","FullNameField","fullNameContainer","Tag","fullName","profileLink","position","Text","encode","inviteStatus","label","Label","text","Loc","getMessage","color","LabelColor","LIGHT_BLUE","fill","Size","MD","customClass","YELLOW","EmployeeField","photoFieldId","getRandom","fullNameFieldId","GridManager","getInstance","instances","setSort","options","Type","isObject","tableFade","getUserOptions","sortBy","order","reload","setFilter","filter","filterManager","getApi","extendFilter","reinviteCloudAction","data","ajax","runAction","then","response","result","InviteAccessPopup","PopupWindow","content","autoHide","show","errors","map","error","message","ErrorCollection","showSystemError","join","reinviteAction","userId","isExtranetUser","extranet","confirmAction","confirmUser","isAccept","row","getRows","stateLoad","update","stateUnload","activityAction","action","catch","includes","callBack","MessageBox","title","getConfirmTitle","getConfirmMessage","buttons","MessageBoxButtons","YES_CANCEL","yesCaption","getConfirmButtonText","onYes","messageBox","close","ActivityField","UI","Button","Color","PRIMARY","LIGHT_BORDER","counter","button","noCaps","EXTRA_SMALL","tag","INPUT","round","onclick","isStringFilled","get","isBoolean","top","console","enabled","popup","PopupWindowManager","create","darkMode","closeByEsc","angle","offsetLeft","maxWidth","overlay","setBindElement","getContainer","call","isCloud","reinvitePopup","ReinvitePopup","formType","email","FormType","EMAIL","PHONE","bindElement","inputValue","phoneNumber","transport","bind","getPopup","setWaiting","isExtranet","DepartmentField","departments","length","canEdit","dialog","Dialog","width","height","targetNode","addButton","compactView","multiple","entities","id","selectMode","allowSelectRootDepartment","Object","values","forEach","department","isSelected","selectedDepartment","DEPARTMENT","DEPARTMENT_label","name","BaseAction","getActionId","Error","getAjaxMethod","userFilter","selectedUsers","showPopups","execute","confirmationPopup","getConfirmationPopup","setOkCallback","sendActionRequest","selectedRows","getSelectedIds","isSelectedAllRows","isAllSelected","fields","userIds","handleSuccess","handleError","skippedActiveUsers","skippedFiredUsers","keys","showActiveUsersPopup","showFiredUsersPopup","tableUnfade","unselectRows","errorMessage","item","YES","activeUsers","getSkippedUsersTitleCode","getMessageWithProfileNames","getSkippedUsersMessageCode","firedUsers","messageCode","users","maxDisplayCount","userValues","displayedNames","slice","user","remainingCount","namesString","unselectAll","updateCounterDisplayed","updateCounterSelected","disableActionsPanel","onCustomEvent","window","FireAction","OK_CANCEL","okCaption","DeleteAction","onNo","ConfirmAction","DeclineAction","ReinviteAction","skippedWaitingUsers","showWaitingUsersPopup","Notification","Center","notify","category","autoHideDelay","Bitrix24","EmailConfirmation","showPopupDispatched","waitingUsers","CreateChatAction","chatId","Messenger","openChat","ChangeDepartmentAction","saveButton","SaveButton","selectedIds","getSelectedItems","hide","sendChangeDepartmentRequest","SMALL","cancelButton","CancelButton","footer","dropdownMode","enableSearch","departmentIds","ACTIONS","ActionFactory","createAction","actionId","ActionClass","find","Panel","executeAction"],"mappings":"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"}