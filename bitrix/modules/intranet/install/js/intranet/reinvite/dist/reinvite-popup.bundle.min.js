this.BX=this.BX||{};this.BX.Intranet=this.BX.Intranet||{};(function(e,s,t,i){"use strict";let a=e=>e,l;var r=babelHelpers.classPrivateFieldLooseKey("id");var o=babelHelpers.classPrivateFieldLooseKey("value");var n=babelHelpers.classPrivateFieldLooseKey("userId");var d=babelHelpers.classPrivateFieldLooseKey("content");var b=babelHelpers.classPrivateFieldLooseKey("formNode");class p{constructor(e){Object.defineProperty(this,r,{writable:true,value:void 0});Object.defineProperty(this,o,{writable:true,value:void 0});Object.defineProperty(this,n,{writable:true,value:void 0});Object.defineProperty(this,d,{writable:true,value:void 0});Object.defineProperty(this,b,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,r)[r]=`form-${e.id}`;babelHelpers.classPrivateFieldLooseBase(this,o)[o]=e.inputValue;babelHelpers.classPrivateFieldLooseBase(this,n)[n]=e.userId}getTitleRender(){return new HTMLElement}getFieldRender(){return new HTMLElement}getFormNode(){return this.render().querySelector("form#"+babelHelpers.classPrivateFieldLooseBase(this,r)[r])}render(){if(babelHelpers.classPrivateFieldLooseBase(this,d)[d]){return babelHelpers.classPrivateFieldLooseBase(this,d)[d]}babelHelpers.classPrivateFieldLooseBase(this,d)[d]=i.Tag.render(l||(l=a`
		<div class="intranet-reinvite-popup-wrapper">
			<form method="POST" id="${0}">
				<input type="hidden" name="userId" value="${0}">
				${0}
				${0}
			</form>
		</div>`),babelHelpers.classPrivateFieldLooseBase(this,r)[r],babelHelpers.classPrivateFieldLooseBase(this,n)[n],this.getTitleRender(),this.getFieldRender());return babelHelpers.classPrivateFieldLooseBase(this,d)[d]}getValue(){return babelHelpers.classPrivateFieldLooseBase(this,o)[o]}getData(){return new FormData(this.getFormNode())}}let c=e=>e,u,v;class P extends p{getTitleRender(){return i.Tag.render(u||(u=c`<div class="intranet-reinvite-popup-title">
			${0}
		</div>`),i.Loc.getMessage("INTRANET_JS_PHONE_POPUP_TITLE",{"#CODE#":"redirect=detail&code=17729332"}))}getFieldRender(){const e=i.Tag.render(v||(v=c`
			<div class="ui-ctl ui-ctl-textbox ui-ctl-before-icon ui-ctl-after-icon intranet-reinvite-popup-field-row">
				<div class="intranet-reinvite-popup-field-label">
					<label>${0}</label>
				</div>
				<div class="ui-ctl ui-ctl-textbox">
					<div id="intranet_reinvite_phone_flag" class="ui-ctl-before --flag"></div>
					<input id="intranet_reinvite_phone_input" type="text" name="newPhone" value="${0}" class="ui-ctl-element">
				</div>
			</div>`),i.Loc.getMessage("INTRANET_JS_PHONE_FIELD_LABEL"),this.getValue());new BX.PhoneNumber.Input({node:e.querySelector("#intranet_reinvite_phone_input"),defaultCountry:"ru",flagNode:e.querySelector("#intranet_reinvite_phone_flag"),flagSize:24,onChange:function(e){}});return e}}let h=e=>e,L,F;var B=babelHelpers.classPrivateFieldLooseKey("onButtonStateChange");class H extends p{constructor(e){super(e);Object.defineProperty(this,B,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,B)[B]=i.Type.isFunction(e.onButtonStateChange)?e.onButtonStateChange:null}getTitleRender(){return i.Tag.render(L||(L=h`<div class="intranet-reinvite-popup-title">
			${0}
			</div>`),i.Loc.getMessage("INTRANET_JS_EMAIL_POPUP_TITLE",{"#CODE#":"redirect=detail&code=17729332"}))}getFieldRender(){const e=i.Tag.render(F||(F=h`
			<div class="intranet-reinvite-popup-field-row">
				<div class="intranet-reinvite-popup-field-label">
					<label>${0}</label>
				</div>
				<div class="ui-ctl ui-ctl-textbox">
					<input type="text" name="newEmail" value="${0}" class="ui-ctl-element"> 
				</div>
			</div>`),i.Loc.getMessage("INTRANET_JS_EMAIL_FIELD_LABEL"),this.getValue());const s=e.querySelector('input[name="newEmail"]');if(s&&babelHelpers.classPrivateFieldLooseBase(this,B)[B]){i.Event.bind(s,"input",(e=>{const s=e.target.value.trim();babelHelpers.classPrivateFieldLooseBase(this,B)[B](i.Type.isStringFilled(s))}))}return e}}const f={EMAIL:"email",PHONE:"phone"};class g{constructor(){}static create(e,s){switch(e){case f.EMAIL:return new H(s);case f.PHONE:return new P(s);default:throw new Error("Unknown ContextType value: "+e)}}}var y=babelHelpers.classPrivateFieldLooseKey("popup");var w=babelHelpers.classPrivateFieldLooseKey("transport");var E=babelHelpers.classPrivateFieldLooseKey("userId");var T=babelHelpers.classPrivateFieldLooseKey("id");var _=babelHelpers.classPrivateFieldLooseKey("inputValue");var I=babelHelpers.classPrivateFieldLooseKey("bindElement");var m=babelHelpers.classPrivateFieldLooseKey("form");var O=babelHelpers.classPrivateFieldLooseKey("width");var N=babelHelpers.classPrivateFieldLooseKey("sendButton");var R=babelHelpers.classPrivateFieldLooseKey("handleButtonStateChange");var S=babelHelpers.classPrivateFieldLooseKey("createPopup");class j{constructor(e){Object.defineProperty(this,S,{value:C});Object.defineProperty(this,R,{value:K});Object.defineProperty(this,y,{writable:true,value:void 0});Object.defineProperty(this,w,{writable:true,value:void 0});Object.defineProperty(this,E,{writable:true,value:void 0});Object.defineProperty(this,T,{writable:true,value:void 0});Object.defineProperty(this,_,{writable:true,value:void 0});Object.defineProperty(this,I,{writable:true,value:void 0});Object.defineProperty(this,m,{writable:true,value:void 0});Object.defineProperty(this,O,{writable:true,value:void 0});Object.defineProperty(this,N,{writable:true,value:void 0});if(e.userId<=0){throw new Error('Invalide "userId" parameter')}babelHelpers.classPrivateFieldLooseBase(this,E)[E]=e.userId;babelHelpers.classPrivateFieldLooseBase(this,T)[T]="reinvite-popup-"+e.userId;babelHelpers.classPrivateFieldLooseBase(this,I)[I]=i.Type.isElementNode(e.bindElement)?e.bindElement:null;babelHelpers.classPrivateFieldLooseBase(this,w)[w]=i.Type.isFunction(e.transport)?e.transport:null;babelHelpers.classPrivateFieldLooseBase(this,O)[O]=348;babelHelpers.classPrivateFieldLooseBase(this,m)[m]=g.create(e.formType,{id:babelHelpers.classPrivateFieldLooseBase(this,T)[T],userId:babelHelpers.classPrivateFieldLooseBase(this,E)[E],inputValue:e.inputValue,onButtonStateChange:babelHelpers.classPrivateFieldLooseBase(this,R)[R].bind(this)})}show(){this.getPopup().show()}getPopup(){if(babelHelpers.classPrivateFieldLooseBase(this,y)[y]){return babelHelpers.classPrivateFieldLooseBase(this,y)[y]}babelHelpers.classPrivateFieldLooseBase(this,y)[y]=babelHelpers.classPrivateFieldLooseBase(this,S)[S]();return babelHelpers.classPrivateFieldLooseBase(this,y)[y]}send(){babelHelpers.classPrivateFieldLooseBase(this,w)[w](babelHelpers.classPrivateFieldLooseBase(this,m)[m].getData())}}function K(e){if(babelHelpers.classPrivateFieldLooseBase(this,N)[N]){babelHelpers.classPrivateFieldLooseBase(this,N)[N].setDisabled(!e)}}function C(e){var a;if(s.PopupManager.isPopupExists(babelHelpers.classPrivateFieldLooseBase(this,T)[T])){return s.PopupManager.getPopupById(babelHelpers.classPrivateFieldLooseBase(this,T)[T])}const l=new s.Popup(babelHelpers.classPrivateFieldLooseBase(this,T)[T],babelHelpers.classPrivateFieldLooseBase(this,I)[I],{content:babelHelpers.classPrivateFieldLooseBase(this,m)[m].render(),autoHide:true,angle:{offset:babelHelpers.classPrivateFieldLooseBase(this,O)[O]/2-16.5},width:babelHelpers.classPrivateFieldLooseBase(this,O)[O],padding:18,offsetLeft:(babelHelpers.classPrivateFieldLooseBase(this,I)[I].offsetWidth/2-babelHelpers.classPrivateFieldLooseBase(this,O)[O]/2)/2-10,closeIcon:false,closeByEsc:true,overlay:false,className:"reinvite-popup-container",bindOptions:{position:"top"},animation:"fading-slide",buttons:[babelHelpers.classPrivateFieldLooseBase(this,N)[N]=new t.Button({text:i.Loc.getMessage("INTRANET_JS_BTN_SEND"),color:t.Button.Color.PRIMARY,round:true,noCaps:true,onclick:e=>{this.send();this.getPopup().close()}}),new t.Button({text:i.Loc.getMessage("INTRANET_JS_BTN_CANCEL"),color:t.Button.Color.LIGHT_BORDER,round:true,noCaps:true,onclick:e=>{this.getPopup().close()}})]});const r=((a=babelHelpers.classPrivateFieldLooseBase(this,m)[m].getValue())==null?void 0:a.trim())||"";babelHelpers.classPrivateFieldLooseBase(this,R)[R](r!=="");return l}e.ReinvitePopup=j;e.FormType=f})(this.BX.Intranet.Reinvite=this.BX.Intranet.Reinvite||{},BX.Main,BX.UI,BX);
//# sourceMappingURL=reinvite-popup.bundle.map.js