{"version":3,"file":"air-sidepanel.bundle.js","sources":["../src/chat-menu-bar.js","../src/slider.js","../src/index.js"],"sourcesContent":["import { Dom, Reflection } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { type Slider, SidePanel } from 'main.sidepanel';\n\nexport class ChatMenuBar\n{\n\t#slider: Slider = null;\n\t#container: HTMLElement = null;\n\t#loaded: boolean = false;\n\n\tconstructor(slider: Slider)\n\t{\n\t\tthis.#slider = slider;\n\n\t\tthis.#container = document.getElementById('im-chat-menu');\n\t\tif (!this.#container)\n\t\t{\n\t\t\tconsole.warn('ChatMenu: container not found');\n\n\t\t\treturn;\n\t\t}\n\n\t\tDom.append(this.#container, document.body);\n\n\t\tEventEmitter.subscribeOnce(this.#slider, 'SidePanel.Slider:onOpenStart', this.#handleSliderOpenStartOnce.bind(this));\n\t\tEventEmitter.subscribe(this.#slider, 'SidePanel.Slider:onOpening', this.#handleSliderOpening.bind(this));\n\t\tEventEmitter.subscribe(this.#slider, 'SidePanel.Slider:onClosing', this.#handleSliderClosing.bind(this));\n\t\tEventEmitter.subscribe(this.#slider, 'SidePanel.Slider:onCloseComplete', this.#handleSliderCloseComplete.bind(this));\n\t\tEventEmitter.subscribe(this.#slider, 'SidePanel.Slider:onDestroy', this.#handleSliderDestroy.bind(this));\n\n\t\tif (!this.canUseBlurry())\n\t\t{\n\t\t\tEventEmitter.subscribe('SidePanel.Slider:onOpening', (event: BaseEvent) => {\n\t\t\t\tconst [sliderEvent] = event.getData();\n\t\t\t\tif (sliderEvent.getSlider() !== this.#slider)\n\t\t\t\t{\n\t\t\t\t\tDom.style(this.getContainer(), 'visibility', 'hidden');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tEventEmitter.subscribe('SidePanel.Slider:onCloseComplete', () => {\n\t\t\t\tif (this.#slider === SidePanel.Instance.getTopSlider())\n\t\t\t\t{\n\t\t\t\t\tDom.style(this.getContainer(), 'visibility', null);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tEventEmitter.subscribe('IM.Layout:onLayoutChange', () => {\n\t\t\tif (!this.#loaded)\n\t\t\t{\n\t\t\t\tthis.#loaded = true;\n\t\t\t\tDom.addClass(this.getContainer(), '--loaded');\n\t\t\t}\n\t\t});\n\t}\n\n\tcanUseBlurry(): boolean\n\t{\n\t\treturn !Dom.hasClass(document.documentElement, 'bx-integrated-gpu');\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn this.#container;\n\t}\n\n\tsetZIndex(zIndex: number): void\n\t{\n\t\tDom.style(this.getContainer(), 'z-index', zIndex);\n\t}\n\n\treset(): void\n\t{\n\t\tthis.getMenu()?.reset();\n\t}\n\n\tgetMenu(): typeof(BX.Main.interfaceButtons) | null\n\t{\n\t\t/**\n\t\t *\n\t\t * @type {BX.Main.interfaceButtonsManager}\n\t\t */\n\t\tconst menuManager = Reflection.getClass('BX.Main.interfaceButtonsManager');\n\t\tif (menuManager)\n\t\t{\n\t\t\treturn menuManager.getById('chat-menu');\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t#handleSliderOpenStartOnce(): void\n\t{\n\t\tEventEmitter.subscribe(this.#slider.getZIndexComponent(), 'onZIndexChange', this.#handleZIndexChange.bind(this));\n\t}\n\n\t#handleSliderOpening(): void\n\t{\n\t\tthis.setZIndex(this.#slider.getZIndexComponent().getZIndex() + 1);\n\t\tDom.style(this.getContainer(), 'display', 'block');\n\t\tDom.style(this.getContainer(), 'visibility', null);\n\n\t\trequestAnimationFrame(() => {\n\t\t\tDom.addClass(this.getContainer(), '--open');\n\t\t});\n\t}\n\n\t#handleSliderClosing(): void\n\t{\n\t\tthis.reset();\n\t\tDom.removeClass(this.getContainer(), '--open');\n\t}\n\n\t#handleSliderCloseComplete(): void\n\t{\n\t\tDom.style(this.getContainer(), 'display', 'none');\n\t\tDom.style(this.getContainer(), 'visibility', null);\n\t}\n\n\t#handleSliderDestroy(): void\n\t{\n\t\tthis.reset();\n\t}\n\n\t#handleZIndexChange(): void\n\t{\n\t\tconst sliderZIndex = this.#slider.getZIndexComponent().getZIndex();\n\n\t\tthis.setZIndex(sliderZIndex + 1);\n\t}\n}\n","import { Reflection, Dom, Event, Type, Browser, ZIndexManager } from 'main.core';\nimport { Slider as BaseSlider, type OuterBoundary, type SliderOptions } from 'main.sidepanel';\nimport { ChatMenuBar } from './chat-menu-bar';\n\nconst MENU_COLLAPSED_WIDTH = 65;\nconst MENU_EXPANDED_WIDTH = 240;\n\nexport class Slider extends BaseSlider\n{\n\t#onWindowResize: Function = null;\n\t#chatMenuBar: ChatMenuBar = null;\n\tstatic #verticalScrollWidth: number = null;\n\n\tconstructor(url: string, sliderOptions: SliderOptions)\n\t{\n\t\tconst options: SliderOptions = Type.isPlainObject(sliderOptions) ? { ...sliderOptions } : {};\n\t\tconst isMessenger = url.startsWith('im:slider');\n\n\t\tif (isMessenger)\n\t\t{\n\t\t\toptions.hideControls = false;\n\t\t\toptions.autoOffset = false;\n\n\t\t\tconst canUseBlurry = !Dom.hasClass(document.documentElement, 'bx-integrated-gpu');\n\t\t\tif (!canUseBlurry)\n\t\t\t{\n\t\t\t\toptions.overlayOpacity = 85;\n\t\t\t}\n\t\t}\n\n\t\tsuper(url, options);\n\n\t\tthis.#chatMenuBar = isMessenger ? new ChatMenuBar(this) : null;\n\t\tthis.#onWindowResize = this.#handleWindowResize.bind(this);\n\t}\n\n\tapplyHacks(): void\n\t{\n\t\tSlider.#verticalScrollWidth = window.innerWidth - document.documentElement.clientWidth;\n\n\t\tthis.adjustBackgroundSize();\n\t\tEvent.bind(window, 'resize', this.#onWindowResize);\n\n\t\tif (this.getRightBar() && !this.isMessengerSlider())\n\t\t{\n\t\t\tconst stack = ZIndexManager.getOrAddStack(document.body);\n\t\t\tstack.register(this.getRightBar());\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tresetHacks(): void\n\t{\n\t\tthis.resetBackgroundSize();\n\t\tEvent.unbind(window, 'resize', this.#onWindowResize);\n\n\t\tif (this.getRightBar())\n\t\t{\n\t\t\tconst stack = ZIndexManager.getOrAddStack(document.body);\n\t\t\tstack.unregister(this.getRightBar());\n\t\t\tDom.style(this.getRightBar(), 'z-index', null); // ZIndexManager may not remove z-index, so we do it manually\n\t\t}\n\t}\n\n\topen(): boolean\n\t{\n\t\tconst opened = super.open();\n\t\tif (this.getRightBar() && opened)\n\t\t{\n\t\t\tconst stack = ZIndexManager.getOrAddStack(document.body);\n\t\t\tif (!this.isMessengerSlider() && !Slider.isMessengerOpen())\n\t\t\t{\n\t\t\t\tstack.bringToFront(this.getRightBar());\n\t\t\t}\n\t\t}\n\n\t\treturn opened;\n\t}\n\n\tstatic isMessengerOpen(): boolean\n\t{\n\t\tconst MessengerSlider = Reflection.getClass('BX.Messenger.v2.Lib.MessengerSlider');\n\t\tif (MessengerSlider && MessengerSlider.getInstance().isOpened())\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tconst LayoutManager = Reflection.getClass('BX.Messenger.v2.Lib.LayoutManager');\n\n\t\treturn LayoutManager && LayoutManager.getInstance().isEmbeddedMode();\n\t}\n\n\tisMessengerSlider(): boolean\n\t{\n\t\treturn this.#chatMenuBar !== null;\n\t}\n\n\tgetRightBar(): HTMLElement\n\t{\n\t\treturn document.getElementById('right-bar');\n\t}\n\n\tgetLeftBoundary(): number\n\t{\n\t\tconst windowWidth = Browser.isMobile() ? window.innerWidth : document.documentElement.clientWidth;\n\t\tif (windowWidth < 1260)\n\t\t{\n\t\t\treturn this.getMinLeftBoundary();\n\t\t}\n\n\t\tconst LeftMenu = Reflection.getClass('BX.Intranet.LeftMenu');\n\n\t\treturn (\n\t\t\tLeftMenu?.isCollapsed() || this.isMessengerSlider()\n\t\t\t\t? MENU_COLLAPSED_WIDTH\n\t\t\t\t: MENU_EXPANDED_WIDTH\n\t\t);\n\t}\n\n\tgetRightBoundary(): number\n\t{\n\t\treturn 0;\n\t}\n\n\tgetTopBoundary(): number\n\t{\n\t\treturn 0;\n\t}\n\n\tcalculateOuterBoundary(): OuterBoundary\n\t{\n\t\tif (this.isMessengerSlider() || Slider.isMessengerOpen())\n\t\t{\n\t\t\treturn {\n\t\t\t\ttop: this.isMessengerSlider() ? 58 : 18,\n\t\t\t\tright: 18,\n\t\t\t};\n\t\t}\n\n\t\tconst rightBarWidth = this.getRightBar()?.offsetWidth || 0;\n\t\tconst rightMargin = Slider.#verticalScrollWidth + rightBarWidth;\n\n\t\treturn {\n\t\t\ttop: 18,\n\t\t\tright: rightMargin,\n\t\t};\n\t}\n\n\tadjustBackgroundSize(): void\n\t{\n\t\tconst themePicker = Reflection.getClass('BX.Intranet.Bitrix24.ThemePicker.Singleton');\n\t\tif (!themePicker)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst theme = themePicker.getAppliedTheme();\n\t\tif (theme && theme.resizable === true)\n\t\t{\n\t\t\tif (theme.video)\n\t\t\t{\n\t\t\t\tthis.adjustVideoSize();\n\t\t\t}\n\t\t\telse if (theme.width > 0 && theme.height > 0)\n\t\t\t{\n\t\t\t\tthis.adjustImageSize(theme.width, theme.height);\n\t\t\t}\n\t\t}\n\t}\n\n\tadjustImageSize(imgWidth: number, imgHeight: number): void\n\t{\n\t\tconst containerWidth = document.documentElement.clientWidth;\n\t\tconst containerHeight = document.documentElement.clientHeight;\n\n\t\tconst imgRatio = imgHeight / imgWidth;\n\t\tconst containerRatio = containerHeight / containerWidth;\n\t\tconst width = containerRatio > imgRatio ? containerHeight / imgRatio : containerWidth;\n\t\tconst height = containerRatio > imgRatio ? containerHeight : containerWidth * imgRatio;\n\n\t\tDom.style(document.body, 'background-size', `${width}px ${height}px`);\n\t}\n\n\tadjustVideoSize(): void\n\t{\n\t\tconst themePicker = Reflection.getClass('BX.Intranet.Bitrix24.ThemePicker.Singleton');\n\t\tif (!themePicker)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst videoContainer: HTMLElement = themePicker.getVideoContainer();\n\t\tif (videoContainer)\n\t\t{\n\t\t\tDom.style(videoContainer, 'right', `${window.innerWidth - document.documentElement.clientWidth}px`);\n\t\t}\n\t}\n\n\tresetBackgroundSize(): void\n\t{\n\t\tDom.style(document.body, 'background-size', null);\n\n\t\tconst themePicker = Reflection.getClass('BX.Intranet.Bitrix24.ThemePicker.Singleton');\n\t\tif (themePicker)\n\t\t{\n\t\t\tconst videoContainer: HTMLElement = themePicker.getVideoContainer();\n\t\t\tif (videoContainer)\n\t\t\t{\n\t\t\t\tDom.style(videoContainer, 'right', null);\n\t\t\t}\n\t\t}\n\t}\n\n\t#handleWindowResize(): void\n\t{\n\t\tthis.adjustBackgroundSize();\n\t}\n}\n","import { Reflection } from 'main.core';\nimport { SliderManager, SidePanel } from 'main.sidepanel';\nimport { Slider } from './slider';\n\nSliderManager.registerSliderClass(\n\t'BX.Intranet.Bitrix24.Slider',\n\t{\n\t\tstartPosition: 'bottom',\n\t\toverlayBgColor: '#00204E',\n\t\toverlayOpacity: 52,\n\t},\n\t{\n\t\tanimationDuration: 200,\n\t\tlabel: {\n\t\t\ttext: '',\n\t\t\tbgColor: '#0075FF',\n\t\t},\n\t},\n);\n\nconst namespace = Reflection.namespace('BX.Bitrix24');\n\nObject.defineProperty(namespace, 'Slider', {\n\tget: () => {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.warn('Don\\'t use BX.Bitrix24.Slider.');\n\n\t\treturn SidePanel.Instance;\n\t},\n});\n\nObject.defineProperty(namespace, 'PageSlider', {\n\tget: () => {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.warn('Don\\'t use BX.Bitrix24.PageSlider.');\n\n\t\treturn SidePanel.Instance;\n\t},\n});\n\nexport {\n\tSlider,\n};\n"],"names":["ChatMenuBar","constructor","slider","document","getElementById","console","warn","Dom","append","body","EventEmitter","subscribeOnce","bind","subscribe","canUseBlurry","event","sliderEvent","getData","getSlider","style","getContainer","SidePanel","Instance","getTopSlider","addClass","hasClass","documentElement","setZIndex","zIndex","reset","getMenu","menuManager","Reflection","getClass","getById","getZIndexComponent","getZIndex","requestAnimationFrame","removeClass","sliderZIndex","MENU_COLLAPSED_WIDTH","MENU_EXPANDED_WIDTH","Slider","BaseSlider","url","sliderOptions","options","Type","isPlainObject","isMessenger","startsWith","hideControls","autoOffset","overlayOpacity","applyHacks","window","innerWidth","clientWidth","adjustBackgroundSize","Event","getRightBar","isMessengerSlider","stack","ZIndexManager","getOrAddStack","register","resetHacks","resetBackgroundSize","unbind","unregister","open","opened","isMessengerOpen","bringToFront","MessengerSlider","getInstance","isOpened","LayoutManager","isEmbeddedMode","getLeftBoundary","windowWidth","Browser","isMobile","getMinLeftBoundary","LeftMenu","isCollapsed","getRightBoundary","getTopBoundary","calculateOuterBoundary","top","right","rightBarWidth","offsetWidth","rightMargin","themePicker","theme","getAppliedTheme","resizable","video","adjustVideoSize","width","height","adjustImageSize","imgWidth","imgHeight","containerWidth","containerHeight","clientHeight","imgRatio","containerRatio","videoContainer","getVideoContainer","SliderManager","registerSliderClass","startPosition","overlayBgColor","animationDuration","label","text","bgColor","namespace","Object","defineProperty","get"],"mappings":"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"}