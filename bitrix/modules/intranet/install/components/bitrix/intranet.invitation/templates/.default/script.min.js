this.BX=this.BX||{};this.BX.Intranet=this.BX.Intranet||{};(function(e,t,s,i,a,l,r,o,n,c,d,v){"use strict";c=c&&c.hasOwnProperty("default")?c["default"]:c;let b=e=>e,u;class p{constructor(){this.count=0;this.index=0;this.maxCount=5;this.inputStack=[]}renderPhoneRow(e){if(this.count>=this.maxCount){return}if(!d.Type.isDomNode(e)){return}const t=e.getAttribute("data-num");if(e.parentNode.querySelector(`#phone_number_${t}`)){return}const s=d.Tag.render(u||(u=b`
			<span style="z-index: 3;" class="ui-ctl-before" data-role="phone-block">
				<input type="hidden" name="PHONE_COUNTRY[]" id="phone_country_${0}" value="">
				<input type="hidden" name="PHONE[]" id="phone_number_${0}" value="">
				<div class="invite-dialog-phone-flag-block" data-role="flag">
					<span data-role="phone_flag_${0}" style="pointer-events: none;"></span>
				</div>
				<input class="invite-dialog-phone-input" type="hidden" id="phone_input_${0}" value="">&nbsp;
			</span>
		`),t,t,t,t);e.style.paddingLeft="57px";d.Dom.append(s,e.parentNode);const i=e.parentNode.querySelector("[data-role='flag']");if(d.Type.isDomNode(i)){d.Event.bind(e.parentNode.querySelector("[data-role='flag']"),"click",(()=>{this.showCountrySelector(t)}))}const a=function(e,t){return function(s){if(d.Type.isDomNode(t.parentNode)){t.parentNode.querySelector(`#phone_number_${e}`).value=s.value;t.parentNode.querySelector(`#phone_country_${e}`).value=s.country}}};this.inputStack[t]=new BX.PhoneNumber.Input({node:e,flagNode:e.parentNode.querySelector(`[data-role='phone_flag_${t}']`),flagSize:16,onChange:a(t,e)});const l=setInterval((()=>{var s,i;if(!((s=e.parentNode)!=null&&s.querySelector(`#phone_number_${t}`).value)||!((i=e.parentNode)!=null&&i.querySelector(`#phone_country_${t}`).value)){a(t,e)({value:this.inputStack[t].getValue(),country:this.inputStack[t].formatter?this.inputStack[t].getCountry():null})}else{clearInterval(l)}}),1e3)}showCountrySelector(e){this.inputStack[e]._onFlagClick()}}let h=e=>e,L,I;const P=Object.freeze({PHONE:"phone",EMAIL:"email",ALL:"all"});var _=babelHelpers.classPrivateFieldLooseKey("inputRowType");var E=babelHelpers.classPrivateFieldLooseKey("isPhoneEnabled");var T=babelHelpers.classPrivateFieldLooseKey("isEmailEnabled");var g=babelHelpers.classPrivateFieldLooseKey("checkPhoneInput");var m=babelHelpers.classPrivateFieldLooseKey("bindPhoneChecker");var y=babelHelpers.classPrivateFieldLooseKey("renderDefaultRow");var B=babelHelpers.classPrivateFieldLooseKey("getDialogInputMessage");class A{constructor(e){var t;Object.defineProperty(this,B,{value:f});Object.defineProperty(this,y,{value:N});Object.defineProperty(this,m,{value:H});Object.defineProperty(this,g,{value:F});Object.defineProperty(this,_,{writable:true,value:void 0});Object.defineProperty(this,E,{writable:true,value:void 0});Object.defineProperty(this,T,{writable:true,value:void 0});this.inputNum=0;babelHelpers.classPrivateFieldLooseBase(this,_)[_]=(t=e.inputRowType)!=null?t:P.ALL;babelHelpers.classPrivateFieldLooseBase(this,E)[E]=[P.ALL,P.PHONE].includes(babelHelpers.classPrivateFieldLooseBase(this,_)[_]);babelHelpers.classPrivateFieldLooseBase(this,T)[T]=[P.ALL,P.EMAIL].includes(babelHelpers.classPrivateFieldLooseBase(this,_)[_]);if(babelHelpers.classPrivateFieldLooseBase(this,E)[E]){this.phoneObj=new p}}bindCloseIcons(e){const t=Array.prototype.slice.call(e.querySelectorAll("input"));(t||[]).forEach((e=>{const t=e.nextElementSibling;d.Event.bind(e,"input",(()=>{d.Dom.style(t,"display",e.value===""?"none":"block")}));d.Event.bind(t,"click",(s=>{s.preventDefault();if(d.Type.isDomNode(e.parentNode)){babelHelpers.classPrivateFieldLooseBase(this,y)[y](e)}d.Dom.style(t,"display","none")}))}))}renderInputRowTo(e,t=false){const s=this.renderEmailInputsRow(t);d.Dom.append(s,e)}renderInputRowsTo(e,t=3){for(let s=0;s<t;s++){this.renderInputRowTo(e,s===0)}}renderEmailInputsRow(e){let t="";let s="";let i="";if(e){t=`\n\t\t\t\t<div class="invite-content__field-lable">\n\t\t\t\t\t${babelHelpers.classPrivateFieldLooseBase(this,B)[B]()}\n\t\t\t\t</div>\n\t\t\t`;s=`\n\t\t\t\t<div class="invite-content__field-lable">\n\t\t\t\t\t${d.Loc.getMessage("BX24_INVITE_DIALOG_ADD_NAME_TITLE")}\n\t\t\t\t</div>\n\t\t\t`;i=`\n\t\t\t\t<div class="invite-content__field-lable">\n\t\t\t\t\t${d.Loc.getMessage("BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE")}\n\t\t\t\t</div>\n\t\t\t`}const a=d.Tag.render(L||(L=h`
			<div class="invite-form-row js-form-row">
				<div class="invite-form-col">
					${0}
					<div class="ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon">
						<input 
							name="EMAIL[]" 
							type="text" 
							maxlength="50"
							data-num="${0}" 
							class="ui-ctl-element js-email-phone-input" 
							placeholder="${0}"
						/>
						<button type="button" class="ui-ctl-after ui-ctl-icon-clear" style="display: none"></button>
					</div>
				</div>
				<div class="invite-form-col">
					${0}
					<div class="ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon">
						<input name="NAME[]" type="text" class="ui-ctl-element js-email-name-input" placeholder="${0}">
						<button type="button" class="ui-ctl-after ui-ctl-icon-clear" style="display: none"></button>
					</div>
				</div>
				<div class="invite-form-col">
					${0}
					<div class="ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon">
						<input name="LAST_NAME[]" type="text" class="ui-ctl-element js-email-last-name-input" placeholder="${0}">
						<button type="button" class="ui-ctl-after ui-ctl-icon-clear" style="display: none"></button>
					</div>
				</div>
			</div>
		`),e?t:"",this.inputNum++,babelHelpers.classPrivateFieldLooseBase(this,B)[B](),e?s:"",d.Loc.getMessage("BX24_INVITE_DIALOG_ADD_NAME_TITLE"),e?i:"",d.Loc.getMessage("BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE"));this.bindCloseIcons(a);babelHelpers.classPrivateFieldLooseBase(this,m)[m](a);return a}parseEmailAndPhone(e){if(!d.Type.isDomNode(e)){return}const t=[];const s=[];const i=/^[\d+][\d ()-]{4,22}\d$/;const a=Array.prototype.slice.call(e.querySelectorAll(".js-form-row"));(a||[]).forEach((e=>{const a=e.querySelector("input[name='EMAIL[]']");const l=e.querySelector("input[name='PHONE[]']");const r=e.querySelector("input[name='NAME[]']");const o=e.querySelector("input[name='LAST_NAME[]']");const n=a.value.trim();if(babelHelpers.classPrivateFieldLooseBase(this,E)[E]&&d.Type.isDomNode(l)){const a=l.value.trim();if(a){if(i.test(String(a).toLowerCase())){const t=e.querySelector("input[name='PHONE_COUNTRY[]']");s.push({PHONE:a,PHONE_COUNTRY:t.value.trim(),NAME:r.value,LAST_NAME:o.value})}else{t.push(a)}}}else if(babelHelpers.classPrivateFieldLooseBase(this,T)[T]&&n){if(d.Validation.isEmail(n)){s.push({EMAIL:n,NAME:r.value,LAST_NAME:o.value})}else{t.push(n)}}else if(babelHelpers.classPrivateFieldLooseBase(this,E)[E]&&!babelHelpers.classPrivateFieldLooseBase(this,T)[T]&&n){t.push(n)}}));return[s,t]}}function F(e){const t=/^[\d+][\d ()-]{2,14}\d$/;if(e.value&&t.test(String(e.value).toLowerCase())){this.phoneObj.renderPhoneRow(e)}else if(e.value.length===0){var s;(s=babelHelpers.classPrivateFieldLooseBase(this,y)[y](e))==null?void 0:s.focus()}}function H(e){if(babelHelpers.classPrivateFieldLooseBase(this,E)[E]&&d.Type.isDomNode(e)){const t=Array.prototype.slice.call(e.querySelectorAll(".js-email-phone-input"));if(t){t.forEach((e=>{d.Event.bind(e,"input",(()=>{babelHelpers.classPrivateFieldLooseBase(this,g)[g](e)}))}))}}}function N(e){const t=e.parentNode.querySelector('[data-role="phone-block"]');if(d.Type.isDomNode(t)){d.Dom.remove(t)}const s=e.parentNode.querySelector("input.ui-ctl-element");if(d.Type.isDomNode(s)){const t=d.Tag.render(I||(I=h`
				<input
					name="${0}"
					type="text"
					maxlength="50"
					data-num="${0}"
					class="ui-ctl-element js-email-phone-input"
					placeholder="${0}"
				/>
			`),s.name,e.getAttribute("data-num"),s.placeholder);d.Dom.replace(s,t);this.bindCloseIcons(t.parentNode);babelHelpers.classPrivateFieldLooseBase(this,m)[m](t.parentNode);d.Dom.remove(s);return t}return s}function f(){if(babelHelpers.classPrivateFieldLooseBase(this,E)[E]&&babelHelpers.classPrivateFieldLooseBase(this,T)[T]){return d.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_INPUT")}else if(babelHelpers.classPrivateFieldLooseBase(this,E)[E]){return d.Loc.getMessage("INTRANET_INVITE_DIALOG_PHONE_INPUT")}else{return d.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_INPUT")}}let O=e=>e,S;var D=babelHelpers.classPrivateFieldLooseKey("errorContainer");var w=babelHelpers.classPrivateFieldLooseKey("successContainer");var R=babelHelpers.classPrivateFieldLooseKey("wrapMessage");class C{constructor(e){Object.defineProperty(this,R,{value:M});Object.defineProperty(this,D,{writable:true,value:void 0});Object.defineProperty(this,w,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,D)[D]=d.Type.isDomNode(e.errorContainer)?e.errorContainer:null;babelHelpers.classPrivateFieldLooseBase(this,w)[w]=d.Type.isDomNode(e.successContainer)?e.successContainer:null;this.hideAll()}showError(e){if(!babelHelpers.classPrivateFieldLooseBase(this,D)[D]||!d.Type.isStringFilled(e)){return}d.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,D)[D]);d.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,D)[D],"display","block");d.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,R)[R](e),babelHelpers.classPrivateFieldLooseBase(this,D)[D])}showSuccess(e){if(!babelHelpers.classPrivateFieldLooseBase(this,w)[w]||!d.Type.isStringFilled(e)){return}d.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,w)[w]);d.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,w)[w],"display","block");d.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,R)[R](e),babelHelpers.classPrivateFieldLooseBase(this,w)[w])}hideAll(){if(babelHelpers.classPrivateFieldLooseBase(this,D)[D]){d.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,D)[D],"display","none");d.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,D)[D])}if(babelHelpers.classPrivateFieldLooseBase(this,w)[w]){d.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,w)[w],"display","none");d.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,w)[w])}}}function M(e){return d.Tag.render(S||(S=O`<span class="ui-alert-message">${0}</span>`),BX.util.htmlspecialchars(e))}var j=babelHelpers.classPrivateFieldLooseKey("container");var V=babelHelpers.classPrivateFieldLooseKey("disableSubmitButton");class G extends v.EventEmitter{constructor(e){var t;super();Object.defineProperty(this,V,{value:k});Object.defineProperty(this,j,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,j)[j]=e.node;this.setEventNamespace("BX.Intranet.Invitation.Submit");d.Event.unbindAll(babelHelpers.classPrivateFieldLooseBase(this,j)[j]);if(d.Type.isFunction((t=e.events)==null?void 0:t.click)){d.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,j)[j],"click",e.events.click)}}wait(){babelHelpers.classPrivateFieldLooseBase(this,V)[V](true)}isWaiting(){return d.Dom.hasClass(babelHelpers.classPrivateFieldLooseBase(this,j)[j],"ui-btn-wait")}ready(){babelHelpers.classPrivateFieldLooseBase(this,V)[V](false)}disable(){d.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,j)[j],"ui-btn-disabled")}enable(){d.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,j)[j],"ui-btn-disabled")}isEnabled(){return!d.Dom.hasClass(babelHelpers.classPrivateFieldLooseBase(this,j)[j],"ui-btn-disabled")}setLabel(e){babelHelpers.classPrivateFieldLooseBase(this,j)[j].innerText=e}sendSuccessEvent(e){BX.SidePanel.Instance.postMessageAll(window,"BX.Intranet.Invitation:onAdd",{users:e})}}function k(e){if(!d.Type.isDomNode(babelHelpers.classPrivateFieldLooseBase(this,j)[j])||!d.Type.isBoolean(e)){return}if(e){d.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,j)[j],["ui-btn-wait","invite-cursor-auto"])}else{d.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,j)[j],["ui-btn-wait","invite-cursor-auto"])}}G.ENABLED_STATE="enabled";G.DISABLED_STATE="disabled";class x{constructor(){v.EventEmitter.subscribe(this,"BX.Intranet.Invitation:submit",this.onSubmit.bind(this));v.EventEmitter.subscribe("BX.Intranet.Invitation:onInviteRequestSuccess",this.onInviteSuccess.bind(this))}render(){return new HTMLElement}onSubmit(e){}onInviteSuccess(e){}getSubmitButtonText(){return null}getButtonState(){return G.ENABLED_STATE}}var K=babelHelpers.classPrivateFieldLooseKey("pages");var X=babelHelpers.classPrivateFieldLooseKey("container");var $=babelHelpers.classPrivateFieldLooseKey("first");var U=babelHelpers.classPrivateFieldLooseKey("current");var q=babelHelpers.classPrivateFieldLooseKey("history");class Y extends v.EventEmitter{constructor(e){super();Object.defineProperty(this,K,{writable:true,value:void 0});Object.defineProperty(this,X,{writable:true,value:void 0});Object.defineProperty(this,$,{writable:true,value:void 0});Object.defineProperty(this,U,{writable:true,value:void 0});Object.defineProperty(this,q,{writable:true,value:[]});this.setEventNamespace("BX.Intranet.Navigation");babelHelpers.classPrivateFieldLooseBase(this,X)[X]=d.Type.isDomNode(e.container)?e.container:null;if(d.Type.isMap(e.pages)){babelHelpers.classPrivateFieldLooseBase(this,K)[K]=new Map([...e.pages].filter((([e,t])=>t instanceof x)))}else{babelHelpers.classPrivateFieldLooseBase(this,K)[K]=new Map}babelHelpers.classPrivateFieldLooseBase(this,$)[$]=d.Type.isStringFilled(e.first)&&this.has(e.first)?e.first:babelHelpers.classPrivateFieldLooseBase(this,K)[K].next().value}show(e){if(!babelHelpers.classPrivateFieldLooseBase(this,X)[X]||!this.has(e)){return}const t=this.get(e);this.emit("onBeforeChangePage",{current:this.current(),new:t});d.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,X)[X]);d.Dom.append(t.render(),babelHelpers.classPrivateFieldLooseBase(this,X)[X]);if(babelHelpers.classPrivateFieldLooseBase(this,U)[U]){babelHelpers.classPrivateFieldLooseBase(this,q)[q].push(babelHelpers.classPrivateFieldLooseBase(this,U)[U])}babelHelpers.classPrivateFieldLooseBase(this,U)[U]=e;this.emit("onAfterChangePage",{current:this.current(),previous:this.prev()})}showFirst(){this.show(babelHelpers.classPrivateFieldLooseBase(this,$)[$])}get(e){return babelHelpers.classPrivateFieldLooseBase(this,K)[K].get(e)}has(e){return babelHelpers.classPrivateFieldLooseBase(this,K)[K].has(e)}current(){return this.get(babelHelpers.classPrivateFieldLooseBase(this,U)[U])}getCurrentCode(){return babelHelpers.classPrivateFieldLooseBase(this,U)[U]}prev(){if(babelHelpers.classPrivateFieldLooseBase(this,q)[q].length>0){const e=babelHelpers.classPrivateFieldLooseBase(this,q)[q][babelHelpers.classPrivateFieldLooseBase(this,q)[q].length-1];return this.get(e)}return null}add(e,t){if(t instanceof x){babelHelpers.classPrivateFieldLooseBase(this,K)[K].set(e,t)}}delete(e){babelHelpers.classPrivateFieldLooseBase(this,K)[K].delete(e)}}var W=babelHelpers.classPrivateFieldLooseKey("cSection");var z=babelHelpers.classPrivateFieldLooseKey("isAdmin");var J=babelHelpers.classPrivateFieldLooseKey("getAdminAllowMode");var Q=babelHelpers.classPrivateFieldLooseKey("getIsAdmin");var Z=babelHelpers.classPrivateFieldLooseKey("getCSection");class ee{constructor(e,t){Object.defineProperty(this,Z,{value:ie});Object.defineProperty(this,Q,{value:se});Object.defineProperty(this,J,{value:te});Object.defineProperty(this,W,{writable:true,value:void 0});Object.defineProperty(this,z,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,W)[W]=e;babelHelpers.classPrivateFieldLooseBase(this,z)[z]=t}send(){t.sendData({tool:ee.TOOLS,category:ee.CATEGORY_INVITATION,event:ee.EVENT_COPY,c_section:babelHelpers.classPrivateFieldLooseBase(this,Z)[Z](),p1:babelHelpers.classPrivateFieldLooseBase(this,Q)[Q](),p2:babelHelpers.classPrivateFieldLooseBase(this,J)[J]()})}sendTabData(e,s){if(!e){return}t.sendData({tool:ee.TOOLS,category:ee.CATEGORY_INVITATION,event:ee.EVENT_TAB_VIEW,c_section:e,c_sub_section:s})}sendOpenSliderData(e){t.sendData({tool:ee.TOOLS,category:ee.CATEGORY_INVITATION,event:ee.EVENT_OPEN_SLIDER_INVITATION,c_section:e})}sendOpenLocalEmailPopup(){t.sendData({tool:ee.TOOLS,category:ee.CATEGORY_INVITATION,event:ee.EVENT_TAB_VIEW,c_sub_section:ee.TAB_EMAIL})}sendLocalEmailProgram(){t.sendData({tool:ee.TOOLS,category:ee.CATEGORY_INVITATION,event:ee.EVENT_LOCAL_MAIL})}}function te(){var e;return(e=document.querySelector("#allow_register_confirm"))!=null&&e.checked?ee.ADMIN_ALLOW_MODE_Y:ee.ADMIN_ALLOW_MODE_N}function se(){return babelHelpers.classPrivateFieldLooseBase(this,z)[z]?ee.IS_ADMIN_Y:ee.IS_ADMIN_N}function ie(){return babelHelpers.classPrivateFieldLooseBase(this,W)[W].source}ee.TOOLS="Invitation";ee.TOOLS_HEADER="headerPopup";ee.EVENT_OPEN_SLIDER_INVITATION="drawer_open";ee.CATEGORY_INVITATION="invitation";ee.EVENT_COPY="copy_invitation_link";ee.ADMIN_ALLOW_MODE_Y="askAdminToAllow_Y";ee.ADMIN_ALLOW_MODE_N="askAdminToAllow_N";ee.IS_ADMIN_Y="isAdmin_Y";ee.IS_ADMIN_N="isAdmin_N";ee.EVENT_TAB_VIEW="tab_view";ee.EVENT_LOCAL_MAIL="invitation_local_mail";ee.TAB_EMAIL="tab_by_email";ee.TAB_MASS="tab_mass";ee.TAB_DEPARTMENT="tab_department";ee.TAB_INTEGRATOR="tab_integrator";ee.TAB_LINK="by_link";ee.TAB_REGISTRATION="registration";ee.TAB_EXTRANET="extranet";ee.TAB_AD="AD";ee.TAB_LOCAL_EMAIL="tab_by_local_email";ee.TAB_PHONE="tab_by_phone";var ae=babelHelpers.classPrivateFieldLooseKey("componentName");var le=babelHelpers.classPrivateFieldLooseKey("signedParameters");class re{constructor(e){Object.defineProperty(this,ae,{writable:true,value:void 0});Object.defineProperty(this,le,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]=e.componentName;babelHelpers.classPrivateFieldLooseBase(this,le)[le]=e.signedParameters}send(e){return BX.ajax.runComponentAction(babelHelpers.classPrivateFieldLooseBase(this,ae)[ae],e.action,{signedParameters:babelHelpers.classPrivateFieldLooseBase(this,le)[le],mode:d.Type.isStringFilled(e.mode)?e.mode:"ajax",method:d.Type.isStringFilled(e.method)?e.method:"post",data:e.data,analyticsLabel:e.analyticsLabel})}}let oe=e=>e,ne;var ce=babelHelpers.classPrivateFieldLooseKey("input");class de{constructor(){Object.defineProperty(this,ce,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]=new o.InvitationInput({inputType:o.InvitationInputType.EMAIL});babelHelpers.classPrivateFieldLooseBase(this,ce)[ce].getTagSelector().setPlaceholder(d.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_EMAIL_PLACEHOLDER"));Event.bind(babelHelpers.classPrivateFieldLooseBase(this,ce)[ce].getTagSelector().getContainer(),"click",(()=>{babelHelpers.classPrivateFieldLooseBase(this,ce)[ce].getTagSelector().focusTextBox()}));v.EventEmitter.subscribe("BX.Intranet.Invitation:InviteSuccess",(()=>{this.clearTags()}))}onReadySaveInputHandler(e){babelHelpers.classPrivateFieldLooseBase(this,ce)[ce].unsubscribe("onReadySave",e);babelHelpers.classPrivateFieldLooseBase(this,ce)[ce].subscribe("onReadySave",e)}onUnreadySaveInputHandler(e){babelHelpers.classPrivateFieldLooseBase(this,ce)[ce].unsubscribe("onUnreadySave",e);babelHelpers.classPrivateFieldLooseBase(this,ce)[ce].subscribe("onUnreadySave",e)}getContent(e=null){this.clearTags();return d.Tag.render(ne||(ne=oe`
			<div class="email-popup-container">
				<div class="email-popup-container__title">
					${0}
				</div>
				<div class="email-popup-container__description">
					${0}
				</div>
				<div class="email-popup-container__input">
					${0}
				</div>
				${0}
			</div>
		`),d.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_EMAIL_TITLE"),d.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_EMAIL_DESCRIPTION"),babelHelpers.classPrivateFieldLooseBase(this,ce)[ce].render(),e!=null?e:"")}clearTags(){babelHelpers.classPrivateFieldLooseBase(this,ce)[ce].getTagSelector().removeTags()}getValues(){const e=babelHelpers.classPrivateFieldLooseBase(this,ce)[ce].getTagSelector();const t=e.getTags();const s=[];const i=[];t.forEach((e=>{if(e.getEntityType()==="email"){s.push({EMAIL:e.getTitle()})}else{i.push(e.getTitle())}}));return{emails:s,errorElements:i}}}let ve=e=>e,be;var ue=babelHelpers.classPrivateFieldLooseKey("sendButton");var pe=babelHelpers.classPrivateFieldLooseKey("popup");var he=babelHelpers.classPrivateFieldLooseKey("input");var Le=babelHelpers.classPrivateFieldLooseKey("actionContent");var Ie=babelHelpers.classPrivateFieldLooseKey("getActionContent");var Pe=babelHelpers.classPrivateFieldLooseKey("getSendButton");var _e=babelHelpers.classPrivateFieldLooseKey("getCancelButton");class Ee{constructor(e){Object.defineProperty(this,_e,{value:me});Object.defineProperty(this,Pe,{value:ge});Object.defineProperty(this,Ie,{value:Te});Object.defineProperty(this,ue,{writable:true,value:void 0});Object.defineProperty(this,pe,{writable:true,value:null});Object.defineProperty(this,he,{writable:true,value:null});Object.defineProperty(this,Le,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,he)[he]=e;babelHelpers.classPrivateFieldLooseBase(this,he)[he].onReadySaveInputHandler(this.onReadySaveInputHandler.bind(this));babelHelpers.classPrivateFieldLooseBase(this,he)[he].onUnreadySaveInputHandler(this.onUnreadySaveInputHandler.bind(this));v.EventEmitter.subscribe("BX.Intranet.Invitation:InviteSuccess",(()=>{var e;(e=babelHelpers.classPrivateFieldLooseBase(this,pe)[pe])==null?void 0:e.close();this.onReadySaveInputHandler();v.EventEmitter.emit("BX.Intranet.Invitation:onSubmitReady");v.EventEmitter.emit("BX.Intranet.Invitation:onChangeForm")}));v.EventEmitter.subscribe("BX.Intranet.Invitation:InviteFailed",(()=>{this.onReadySaveInputHandler()}))}show(){if(!babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]){babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]=l.PopupManager.create({id:"email-invitation-email",className:"email-invitation-container",closeIcon:true,autoHide:false,closeByEsc:true,width:515,height:310})}babelHelpers.classPrivateFieldLooseBase(this,pe)[pe].setContent(babelHelpers.classPrivateFieldLooseBase(this,he)[he].getContent(babelHelpers.classPrivateFieldLooseBase(this,Ie)[Ie]()));babelHelpers.classPrivateFieldLooseBase(this,he)[he].clearTags();babelHelpers.classPrivateFieldLooseBase(this,pe)[pe].show()}onReadySaveInputHandler(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,ue)[ue])==null?void 0:e.setState(null)}onUnreadySaveInputHandler(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,ue)[ue])==null?void 0:e.setState(a.ButtonState.DISABLED)}submitData(){this.onUnreadySaveInputHandler();v.EventEmitter.emit("BX.Intranet.Invitation.EmailPopup:onSubmit")}}function Te(){if(!babelHelpers.classPrivateFieldLooseBase(this,Le)[Le]){babelHelpers.classPrivateFieldLooseBase(this,Le)[Le]=d.Tag.render(be||(be=ve`
				<div class="email-popup-container__action">
					${0}
					${0}
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe](),babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]())}return babelHelpers.classPrivateFieldLooseBase(this,Le)[Le]}function ge(){babelHelpers.classPrivateFieldLooseBase(this,ue)[ue]=new a.Button({className:"email-popup-container__action-send",text:d.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_EMAIL_ACTION_SEND"),state:a.ButtonState.DISABLED,size:a.Button.Size.SMALL,color:a.Button.Color.PRIMARY,noCaps:true,onclick:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].isDisabled()){return}this.submitData()}});return babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].render()}function me(){return new a.CancelButton({text:d.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_EMAIL_ACTION_CANCEL"),size:a.Button.Size.SMALL,onclick:()=>babelHelpers.classPrivateFieldLooseBase(this,pe)[pe].close(),noCaps:true}).render()}let ye=e=>e,Be;var Ae=babelHelpers.classPrivateFieldLooseKey("departmentControl");var Fe=babelHelpers.classPrivateFieldLooseKey("linkRegisterEnabled");var He=babelHelpers.classPrivateFieldLooseKey("transport");var Ne=babelHelpers.classPrivateFieldLooseKey("input");var fe=babelHelpers.classPrivateFieldLooseKey("analytics");var Oe=babelHelpers.classPrivateFieldLooseKey("onSubmitWithLocalEmailProgram");var Se=babelHelpers.classPrivateFieldLooseKey("openLocalMailProgram");var De=babelHelpers.classPrivateFieldLooseKey("onSubmitWithMailService");var we=babelHelpers.classPrivateFieldLooseKey("showNotification");var Re=babelHelpers.classPrivateFieldLooseKey("getNotificationContent");var Ce=babelHelpers.classPrivateFieldLooseKey("openInvitationPageWithFilter");class Me{constructor(e,t){Object.defineProperty(this,Ce,{value:Ke});Object.defineProperty(this,Re,{value:xe});Object.defineProperty(this,we,{value:ke});Object.defineProperty(this,De,{value:Ge});Object.defineProperty(this,Se,{value:Ve});Object.defineProperty(this,Oe,{value:je});Object.defineProperty(this,Ae,{writable:true,value:void 0});Object.defineProperty(this,Fe,{writable:true,value:void 0});Object.defineProperty(this,He,{writable:true,value:null});Object.defineProperty(this,Ne,{writable:true,value:null});Object.defineProperty(this,fe,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,He)[He]=e.transport;babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe]=e.linkRegisterEnabled;babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae]=e.departmentControl instanceof c?e.departmentControl:null;babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne]=t;babelHelpers.classPrivateFieldLooseBase(this,fe)[fe]=e.analytics;v.EventEmitter.subscribe("BX.Intranet.Invitation:selfChange",(e=>{babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe]=e.getData().selfEnabled}));v.EventEmitter.subscribe("BX.Intranet.Invitation:InviteSuccess",(()=>{babelHelpers.classPrivateFieldLooseBase(this,we)[we](true)}));v.EventEmitter.subscribe("BX.Intranet.Invitation:InviteFailed",(()=>{babelHelpers.classPrivateFieldLooseBase(this,we)[we](false)}));v.EventEmitter.subscribe("BX.Intranet.Invitation.EmailPopup:onSubmit",babelHelpers.classPrivateFieldLooseBase(this,De)[De].bind(this))}onSubmit(){if(babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe]){babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe]()}else{babelHelpers.classPrivateFieldLooseBase(this,De)[De]()}}}function je(){const e=babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae].getValues();babelHelpers.classPrivateFieldLooseBase(this,He)[He].send({action:"getInviteLink",data:{departmentsId:e}}).then((e=>{var t;v.EventEmitter.emit("BX.Intranet.Invitation:onSubmitReady");v.EventEmitter.emit("BX.Intranet.Invitation:onChangeForm");const s=(t=e.data)==null?void 0:t.invitationLink;if(d.Type.isStringFilled(s)){babelHelpers.classPrivateFieldLooseBase(this,Se)[Se](s)}}),(e=>{v.EventEmitter.emit("BX.Intranet.Invitation:onSubmitReady");v.EventEmitter.emit("BX.Intranet.Invitation:onChangeForm")}))}function Ve(e){babelHelpers.classPrivateFieldLooseBase(this,fe)[fe].sendLocalEmailProgram();const t=`subject=${encodeURIComponent(d.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_EMAIL_SUBJECT"))}`;const s=`body=${encodeURIComponent(d.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_EMAIL_BODY"))} ${e}`;window.location=`mailto:?${t}&${s}`}function Ge(){const{emails:e,errorElements:t}=babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne].getValues();const s=[];if(e.length<=0){s.push(d.Loc.getMessage("INTRANET_INVITE_DIALOG_EMPTY_ERROR_EMAIL"))}if(t.length>0){s.push(d.Loc.getMessage("INTRANET_INVITE_DIALOG_VALIDATE_ERROR_EMAIL"))}if(s.length>0){v.EventEmitter.emit(window.invitationForm,"BX.Intranet.Invitation:onSendData",{errors:s});return}const i={invitations:e,departmentIds:babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae].getValues(),tab:"email"};const a={INVITATION_TYPE:"invite",INVITATION_COUNT:e.length};v.EventEmitter.emit(window.invitationForm,"BX.Intranet.Invitation:onSendData",{action:"invite",type:"invite-email",data:i,analyticsLabel:a})}function ke(e){const t={id:"invite-notification-result",closeButton:true,autoHideDelay:4e3,autoHide:true,content:babelHelpers.classPrivateFieldLooseBase(this,Re)[Re](e)};const s=BX.UI.Notification.Center.notify(t);s.show();s.activateAutoHide()}function xe(e){const t=e?d.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_SUCCESS_TITLE"):d.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_FAILED_TITLE");const s=e?d.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_SUCCESS_DESCRIPTION",{"[LINK]":'<a class="intranet-invitation-dialog-link">',"[/LINK]":"</a>"}):d.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_FAILED_DESCRIPTION");const i=d.Tag.render(Be||(Be=ye`
			<div class="invite-email-notification">
				<div class="invite-email-notification__title">
					${0}
				</div>
				<div class="invite-email-notification__description">
					${0}
				</div>
			</div>
		`),t,s);const a=i.querySelector(".intranet-invitation-dialog-link");if(d.Type.isDomNode(a)){d.Event.unbindAll(a);d.Event.bind(a,"click",babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce].bind(this))}return i}function Ke(){window.top.location="/company/?apply_filter=Y&INVITED=Y"}let Xe=e=>e,$e,Ue,qe,Ye,We,ze;var Je=babelHelpers.classPrivateFieldLooseKey("container");var Qe=babelHelpers.classPrivateFieldLooseKey("departmentControl");var Ze=babelHelpers.classPrivateFieldLooseKey("inviteEmailPopup");var et=babelHelpers.classPrivateFieldLooseKey("linkRegisterEnabled");var tt=babelHelpers.classPrivateFieldLooseKey("input");var st=babelHelpers.classPrivateFieldLooseKey("process");var it=babelHelpers.classPrivateFieldLooseKey("analytics");var at=babelHelpers.classPrivateFieldLooseKey("titleRender");var lt=babelHelpers.classPrivateFieldLooseKey("renderForm");var rt=babelHelpers.classPrivateFieldLooseKey("getNotifyBlock");var ot=babelHelpers.classPrivateFieldLooseKey("getDepartmentBlock");var nt=babelHelpers.classPrivateFieldLooseKey("getMailServiceBlock");var ct=babelHelpers.classPrivateFieldLooseKey("openEmailInputPopup");class dt extends x{constructor(e){super();Object.defineProperty(this,ct,{value:Lt});Object.defineProperty(this,nt,{value:ht});Object.defineProperty(this,ot,{value:pt});Object.defineProperty(this,rt,{value:ut});Object.defineProperty(this,lt,{value:bt});Object.defineProperty(this,at,{value:vt});Object.defineProperty(this,Je,{writable:true,value:void 0});Object.defineProperty(this,Qe,{writable:true,value:void 0});Object.defineProperty(this,Ze,{writable:true,value:null});Object.defineProperty(this,et,{writable:true,value:void 0});Object.defineProperty(this,tt,{writable:true,value:null});Object.defineProperty(this,st,{writable:true,value:null});Object.defineProperty(this,it,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,et)[et]=e.linkRegisterEnabled;babelHelpers.classPrivateFieldLooseBase(this,Qe)[Qe]=e.departmentControl instanceof c?e.departmentControl:null;babelHelpers.classPrivateFieldLooseBase(this,it)[it]=e.analytics;babelHelpers.classPrivateFieldLooseBase(this,tt)[tt]=new de;babelHelpers.classPrivateFieldLooseBase(this,st)[st]=new Me(e,babelHelpers.classPrivateFieldLooseBase(this,tt)[tt]);v.EventEmitter.subscribe("BX.Intranet.Invitation:selfChange",(e=>{babelHelpers.classPrivateFieldLooseBase(this,et)[et]=e.getData().selfEnabled}))}render(){if(babelHelpers.classPrivateFieldLooseBase(this,Je)[Je]){return babelHelpers.classPrivateFieldLooseBase(this,Je)[Je]}return d.Tag.render($e||($e=Xe`
			<div class="invite-wrap js-intranet-invitation-block" data-role="invite-block">
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,at)[at](),babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]())}onReadySaveInputHandler(){v.EventEmitter.emit("BX.Intranet.Invitation:onSubmitReady");v.EventEmitter.emit("BX.Intranet.Invitation:onChangeForm")}onUnreadySaveInputHandler(){v.EventEmitter.emit("BX.Intranet.Invitation:onSubmitDisabled")}onSubmit(e){babelHelpers.classPrivateFieldLooseBase(this,st)[st].onSubmit()}getAnalyticTab(){return ee.TAB_LOCAL_EMAIL}getSubmitButtonText(){return d.Loc.getMessage("BX24_INVITE_DIALOG_ACTION_INVITE")}}function vt(){return d.Tag.render(Ue||(Ue=Xe`
			<div class="invite-title-container">
				<div class="invite-title-icon invite-title-icon-message">
					<div class="ui-icon-set --person-letter"></div>
				</div>
				<div class="invite-title-text">
					${0}
				</div>
				<div class="invite-title-helper" onclick="top.BX.Helper.show('redirect=detail&code=25375678');"></div>
			</div>
		`),d.Loc.getMessage("INTRANET_INVITE_DIALOG_TITLE_EMAIL_MSGVER_1"))}function bt(){let e=null;if(babelHelpers.classPrivateFieldLooseBase(this,et)[et]){e=babelHelpers.classPrivateFieldLooseBase(this,rt)[rt]()}else{e=babelHelpers.classPrivateFieldLooseBase(this,tt)[tt].getContent();babelHelpers.classPrivateFieldLooseBase(this,tt)[tt].onReadySaveInputHandler(this.onReadySaveInputHandler);babelHelpers.classPrivateFieldLooseBase(this,tt)[tt].onUnreadySaveInputHandler(this.onUnreadySaveInputHandler)}return d.Tag.render(qe||(qe=Xe`
			<div class="invite-content-container">
				${0}
				${0}
				${0}
			</div>
		`),e,babelHelpers.classPrivateFieldLooseBase(this,ot)[ot](),babelHelpers.classPrivateFieldLooseBase(this,et)[et]&&babelHelpers.classPrivateFieldLooseBase(this,nt)[nt]())}function ut(){return d.Tag.render(Ye||(Ye=Xe`
			<div class="invite-content-notify">
				<div class="invite-content-notify-wrapper">
					<div class="invite-content-notify__image"></div>
				</div>
				<div class="invite-content-notify-content">
					<div class="invite-content-notify-content__description"> 
						${0}
					</div>
					<div class="invite-content-notify-content__step">
						${0}
					</div>
				</div>
			</div>
		`),d.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_MAIL_CONTENT_DESCRIPTION"),d.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_MAIL_CONTENT_STEPS"))}function pt(){return d.Tag.render(We||(We=Xe`
			<div class="invite-content-department">
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Qe)[Qe].render())}function ht(){const e=d.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_MAIL_SERVICE",{"[LINK]":'<a class="invite-content-mail-service__link">',"[/LINK]":"</a>"});const t=d.Tag.render(ze||(ze=Xe`
			<div class="invite-content-mail-service">
				${0}
			</div>
		`),e);const s=t.querySelector(".invite-content-mail-service__link");if(d.Type.isDomNode(s)){d.Event.unbindAll(s);d.Event.bind(s,"click",babelHelpers.classPrivateFieldLooseBase(this,ct)[ct].bind(this))}return t}function Lt(){if(!babelHelpers.classPrivateFieldLooseBase(this,Ze)[Ze]){babelHelpers.classPrivateFieldLooseBase(this,Ze)[Ze]=new Ee(babelHelpers.classPrivateFieldLooseBase(this,tt)[tt])}babelHelpers.classPrivateFieldLooseBase(this,it)[it].sendOpenLocalEmailPopup();babelHelpers.classPrivateFieldLooseBase(this,Ze)[Ze].show()}var It=babelHelpers.classPrivateFieldLooseKey("prepareOptions");class Pt{constructor(e){Object.defineProperty(this,It,{value:_t});this.options=e.options;this.entities=[];babelHelpers.classPrivateFieldLooseBase(this,It)[It]()}renderTo(e){this.tagSelector=this.renderTagSelector();if(d.Type.isDomNode(e)){this.tagSelector.renderTo(e)}}renderTagSelector(){var e;const t=[];if(((e=this.options)==null?void 0:e.projectId)>0){t.push(["project",this.options.projectId])}return new n.TagSelector({dialogOptions:{preselectedItems:t,entities:this.entities,context:"INTRANET_INVITATION"}})}getItems(){let e=[];let t=[];const s=this.tagSelector.getDialog().getSelectedItems();s.forEach((s=>{const i=parseInt(s.getId());const a=s.getEntityId();if(a==="department"){e.push(i)}else if(a==="project"){t.push(i)}}));return{departments:e,projects:t}}}function _t(){for(const t in this.options){if(!this.options.hasOwnProperty(t)){continue}if(t==="project"&&!!this.options[t]){var e;const s={fillRecentTab:true,"!type":["collab"],createProjectLink:(e=this.options.showCreateButton)!=null?e:true};if(Object.prototype.hasOwnProperty.call(this.options,"projectLimitExceeded")&&Object.prototype.hasOwnProperty.call(this.options,"projectLimitFeatureId")){s.lockProjectLink=this.options.projectLimitExceeded;s.lockProjectLinkFeatureId=this.options.projectLimitFeatureId}const i={id:"project",options:s};if(this.options[t]==="extranet"){i["options"]["extranet"]=true}this.entities.push(i)}}}let Et=e=>e,Tt,gt,mt;var yt=babelHelpers.classPrivateFieldLooseKey("container");var Bt=babelHelpers.classPrivateFieldLooseKey("inputsFactory");var At=babelHelpers.classPrivateFieldLooseKey("smsAvailable");var Ft=babelHelpers.classPrivateFieldLooseKey("useOnlyPhone");var Ht=babelHelpers.classPrivateFieldLooseKey("onClickSwitchMode");var Nt=babelHelpers.classPrivateFieldLooseKey("onClickAddInputRow");var ft=babelHelpers.classPrivateFieldLooseKey("departmentControl");var Ot=babelHelpers.classPrivateFieldLooseKey("titleRender");var St=babelHelpers.classPrivateFieldLooseKey("renderForm");var Dt=babelHelpers.classPrivateFieldLooseKey("getValidateError");var wt=babelHelpers.classPrivateFieldLooseKey("getEmptyError");class Rt extends x{constructor(e){super();Object.defineProperty(this,wt,{value:Vt});Object.defineProperty(this,Dt,{value:jt});Object.defineProperty(this,St,{value:Mt});Object.defineProperty(this,Ot,{value:Ct});Object.defineProperty(this,yt,{writable:true,value:void 0});Object.defineProperty(this,Bt,{writable:true,value:void 0});Object.defineProperty(this,At,{writable:true,value:void 0});Object.defineProperty(this,Ft,{writable:true,value:void 0});Object.defineProperty(this,Ht,{writable:true,value:void 0});Object.defineProperty(this,Nt,{writable:true,value:void 0});Object.defineProperty(this,ft,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt]=e.inputsFactory instanceof A?e.inputsFactory:null;babelHelpers.classPrivateFieldLooseBase(this,At)[At]=e.smsAvailable===true;babelHelpers.classPrivateFieldLooseBase(this,Ft)[Ft]=e.useLocalEmailProgram===true;babelHelpers.classPrivateFieldLooseBase(this,Ht)[Ht]=d.Type.isFunction(e.onClickSwitchMode)?e.onClickSwitchMode:null;babelHelpers.classPrivateFieldLooseBase(this,Nt)[Nt]=d.Type.isFunction(e.onClickAddInputRow)?e.onClickAddInputRow:null;babelHelpers.classPrivateFieldLooseBase(this,ft)[ft]=e.departmentControl instanceof c?e.departmentControl:null}render(){if(babelHelpers.classPrivateFieldLooseBase(this,yt)[yt]){return babelHelpers.classPrivateFieldLooseBase(this,yt)[yt]}const e=babelHelpers.classPrivateFieldLooseBase(this,Ot)[Ot]();const t=babelHelpers.classPrivateFieldLooseBase(this,St)[St]();babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt].renderInputRowsTo(t.querySelector('div[data-role="rows-container"]'),5);babelHelpers.classPrivateFieldLooseBase(this,ft)[ft].renderTo(t.querySelector("form"));babelHelpers.classPrivateFieldLooseBase(this,yt)[yt]=d.Tag.render(Tt||(Tt=Et`
			<div class="invite-wrap js-intranet-invitation-block" data-role="invite-block">
				${0}
				${0}
			</div>
		`),e,t);return babelHelpers.classPrivateFieldLooseBase(this,yt)[yt]}getAnalyticTab(){return babelHelpers.classPrivateFieldLooseBase(this,Ft)[Ft]?ee.TAB_PHONE:ee.TAB_EMAIL}onSubmit(e){var t;const s=this.render().querySelector("form");const[i,a]=babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt].parseEmailAndPhone(s);const l=[];if(a.length>0){l.push(`${babelHelpers.classPrivateFieldLooseBase(this,Dt)[Dt]()}: ${a.join(", ")}`)}if(i.length<=0){l.push(babelHelpers.classPrivateFieldLooseBase(this,wt)[wt]())}const r=(t=e.getData())==null?void 0:t.context;if(l.length>0){v.EventEmitter.emit(r,"BX.Intranet.Invitation:onSendData",{errors:l});return}const o={invitations:i,departmentIds:babelHelpers.classPrivateFieldLooseBase(this,ft)[ft].getValues(),tab:"email"};const n={INVITATION_TYPE:"invite",INVITATION_COUNT:i.length};v.EventEmitter.emit(r,"BX.Intranet.Invitation:onSendData",{action:"invite",data:o,analyticsLabel:n})}onInviteSuccess(e){var t;(t=this.render().querySelector("form"))==null?void 0:t.reset();babelHelpers.classPrivateFieldLooseBase(this,ft)[ft].reset()}getSubmitButtonText(){return d.Loc.getMessage("BX24_INVITE_DIALOG_ACTION_INVITE")}}function Ct(){const e=babelHelpers.classPrivateFieldLooseBase(this,Ft)[Ft]?"PHONE_MSGVER_1":babelHelpers.classPrivateFieldLooseBase(this,At)[At]?"EMAIL_AND_PHONE":"EMAIL";const t=babelHelpers.classPrivateFieldLooseBase(this,Ft)[Ft]||babelHelpers.classPrivateFieldLooseBase(this,At)[At]?"21141922":"25375678";return d.Tag.render(gt||(gt=Et`
			<div class="invite-title-container">
				<div class="invite-title-icon invite-title-icon-message">
					<div class="ui-icon-set --person-letter"></div>
				</div>
				<div class="invite-title-text">
					${0}
				</div>
				<div class="invite-title-helper" onclick="top.BX.Helper.show('redirect=detail&code=${0}');"></div>
			</div>
		`),d.Loc.getMessage(`INTRANET_INVITE_DIALOG_TITLE_${e}`),t)}function Mt(){const e=d.Tag.render(mt||(mt=Et`
			<div class="invite-content-container">
				<form method="POST" name="INVITE_DIALOG_FORM" class="invite-form-container">
					<div data-role="rows-container"></div>
					<div class="invite-form-buttons --border-bottom --pt-3">
							<span class="ui-btn ui-btn-sm ui-btn-light-border ui-btn-icon-add ui-btn-round"
								  data-role="invite-more"
							>
								${0}
							</span>
						<span style="padding: 0 10px;">${0}</span>
						<span
							class="invite-content__switch_button swith-email-invitation-persons-mode"
						>
								${0}
							</span>
					</div>
				</form>
			</div>
		`),d.Loc.getMessage("INTRANET_INVITE_DIALOG_ADD_MORE"),d.Loc.getMessage("INTRANET_INVITE_DIALOG_OR"),d.Loc.getMessage("INTRANET_INVITE_DIALOG_ADD_MASSIVE"));const t=e.querySelector("[data-role='invite-more']");if(d.Type.isDomNode(t)){d.Event.unbindAll(t);d.Event.bind(t,"click",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt].renderInputRowTo(e.querySelector('div[data-role="rows-container"]'));if(babelHelpers.classPrivateFieldLooseBase(this,Nt)[Nt]){babelHelpers.classPrivateFieldLooseBase(this,Nt)[Nt]()}}))}const s=e.querySelector(".swith-email-invitation-persons-mode");if(d.Type.isDomNode(s)){d.Event.unbindAll(s);d.Event.bind(s,"click",babelHelpers.classPrivateFieldLooseBase(this,Ht)[Ht])}return e}function jt(){if(babelHelpers.classPrivateFieldLooseBase(this,Ft)[Ft]){return d.Loc.getMessage("INTRANET_INVITE_DIALOG_PHONE_VALIDATE_ERROR")}else if(babelHelpers.classPrivateFieldLooseBase(this,At)[At]){return d.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR")}return d.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_VALIDATE_ERROR")}function Vt(){if(babelHelpers.classPrivateFieldLooseBase(this,Ft)[Ft]){return d.Loc.getMessage("INTRANET_INVITE_DIALOG_PHONE_EMPTY_ERROR")}else if(babelHelpers.classPrivateFieldLooseBase(this,At)[At]){return d.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR")}return d.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_EMPTY_ERROR")}let Gt=e=>e,kt;var xt=babelHelpers.classPrivateFieldLooseKey("container");var Kt=babelHelpers.classPrivateFieldLooseKey("inputsFactory");var Xt=babelHelpers.classPrivateFieldLooseKey("tagSelectorGroup");var $t=babelHelpers.classPrivateFieldLooseKey("onClickAddInputRow");class Ut extends x{constructor(e){super();Object.defineProperty(this,xt,{writable:true,value:void 0});Object.defineProperty(this,Kt,{writable:true,value:void 0});Object.defineProperty(this,Xt,{writable:true,value:void 0});Object.defineProperty(this,$t,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Kt)[Kt]=e.inputsFactory instanceof A?e.inputsFactory:null;babelHelpers.classPrivateFieldLooseBase(this,Xt)[Xt]=e.tagSelectorGroup instanceof n.TagSelector?e.tagSelectorGroup:null;babelHelpers.classPrivateFieldLooseBase(this,$t)[$t]=d.Type.isFunction(e.onClickAddInputRow)?e.onClickAddInputRow:null}render(){var e;if(babelHelpers.classPrivateFieldLooseBase(this,xt)[xt]){return babelHelpers.classPrivateFieldLooseBase(this,xt)[xt]}babelHelpers.classPrivateFieldLooseBase(this,xt)[xt]=d.Tag.render(kt||(kt=Gt`
			<div class="invite-wrap js-intranet-invitation-block" data-role="extranet-block">
				<div class="invite-title-container">
					<div class="invite-title-icon invite-title-icon-message">
						<div class="ui-icon-set --earth"></div>
					</div>
					<div class="invite-title-text">${0}</div>
				</div>
				<div class="invite-content-container">
					<form method="POST" name="EXTRANET_DIALOG_FORM" class="invite-form-container">
						<div class="invite-form-row" style="margin-bottom: 15px;">
							<div class="invite-form-col">
								<div class="ui-ctl-label-text">${0}</div>
								<div data-role="entity-selector-container"></div>
							</div>
						</div>
						<div data-role="rows-container"></div>
						<div class="invite-form-buttons">
							<span class="ui-btn ui-btn-sm ui-btn-light-border ui-btn-icon-add ui-btn-round" data-role="invite-more">
								${0}
							</span>
						</div>
					</form>
				</div>
			</div>
		`),d.Loc.getMessage("INTRANET_INVITE_DIALOG_EXTRANET_TITLE"),d.Loc.getMessage("INTRANET_INVITE_DIALOG_EXTRANET_GROUP"),d.Loc.getMessage("INTRANET_INVITE_DIALOG_ADD_MORE"));(e=babelHelpers.classPrivateFieldLooseBase(this,Xt)[Xt])==null?void 0:e.renderTo(babelHelpers.classPrivateFieldLooseBase(this,xt)[xt].querySelector('[data-role="entity-selector-container"]'));babelHelpers.classPrivateFieldLooseBase(this,Kt)[Kt].renderInputRowsTo(babelHelpers.classPrivateFieldLooseBase(this,xt)[xt].querySelector('div[data-role="rows-container"]'),3);const t=babelHelpers.classPrivateFieldLooseBase(this,xt)[xt].querySelector("[data-role='invite-more']");if(d.Type.isDomNode(t)){d.Event.unbindAll(t);d.Event.bind(t,"click",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Kt)[Kt].renderInputRowTo(babelHelpers.classPrivateFieldLooseBase(this,xt)[xt].querySelector('div[data-role="rows-container"]'));if(babelHelpers.classPrivateFieldLooseBase(this,$t)[$t]){babelHelpers.classPrivateFieldLooseBase(this,$t)[$t]()}}))}return babelHelpers.classPrivateFieldLooseBase(this,xt)[xt]}getAnalyticTab(){return ee.TAB_EXTRANET}onSubmit(e){var t;const s=this.render().querySelector("form");const[i,a]=babelHelpers.classPrivateFieldLooseBase(this,Kt)[Kt].parseEmailAndPhone(s);const l=[];if(a.length>0){l.push(`${d.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR")}: ${a.join(", ")}`)}if(i.length<=0){l.push(d.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR"))}const r=(t=e.getData())==null?void 0:t.context;if(l.length>0){v.EventEmitter.emit(r,"BX.Intranet.Invitation:onSendData",{errors:l});return}const o=babelHelpers.classPrivateFieldLooseBase(this,Xt)[Xt].getDialog().getSelectedItems();const n=[];o.forEach((e=>{const t=parseInt(e.getId(),10);n.push(t)}));const c={invitations:i,workgroupIds:n,tab:"email"};const b={INVITATION_TYPE:"extranet",INVITATION_COUNT:i.length};v.EventEmitter.emit(r,"BX.Intranet.Invitation:onSendData",{action:"extranet",data:c,analyticsLabel:b})}onInviteSuccess(e){var t;(t=this.render().querySelector("form"))==null?void 0:t.reset()}getSubmitButtonText(){return d.Loc.getMessage("BX24_INVITE_DIALOG_ACTION_INVITE")}}let qt=e=>e,Yt;var Wt=babelHelpers.classPrivateFieldLooseKey("container");var zt=babelHelpers.classPrivateFieldLooseKey("inputsFactory");var Jt=babelHelpers.classPrivateFieldLooseKey("tagSelectorGroup");var Qt=babelHelpers.classPrivateFieldLooseKey("onClickAddInputRow");var Zt=babelHelpers.classPrivateFieldLooseKey("departmentControl");class es extends x{constructor(e){super();Object.defineProperty(this,Wt,{writable:true,value:void 0});Object.defineProperty(this,zt,{writable:true,value:void 0});Object.defineProperty(this,Jt,{writable:true,value:void 0});Object.defineProperty(this,Qt,{writable:true,value:void 0});Object.defineProperty(this,Zt,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,zt)[zt]=e.inputsFactory instanceof A?e.inputsFactory:null;babelHelpers.classPrivateFieldLooseBase(this,Jt)[Jt]=e.tagSelectorGroup instanceof n.TagSelector?e.tagSelectorGroup:null;babelHelpers.classPrivateFieldLooseBase(this,Qt)[Qt]=d.Type.isFunction(e.onClickAddInputRow)?e.onClickAddInputRow:null;babelHelpers.classPrivateFieldLooseBase(this,Zt)[Zt]=e.departmentControl instanceof c?e.departmentControl:null}render(){if(babelHelpers.classPrivateFieldLooseBase(this,Wt)[Wt]){return babelHelpers.classPrivateFieldLooseBase(this,Wt)[Wt]}babelHelpers.classPrivateFieldLooseBase(this,Wt)[Wt]=d.Tag.render(Yt||(Yt=qt`
			<div class="invite-wrap js-intranet-invitation-block" data-role="invite-with-group-dp-block">
				<div class="invite-title-container">
					<div class="invite-title-icon invite-title-icon-message">
						<div class="ui-icon-set --group"></div>
					</div>
					<div class="invite-title-text">
						${0}
					</div>
				</div>
				<div class="invite-content-container">
					<form method="POST" name="INVITE_WITH_GROUP_DP_DIALOG_FORM" class="invite-form-container">
						<div data-role="rows-container"></div>
						<div class="invite-form-buttons --border-bottom --pt-3 --mb-17">
							<span class="ui-btn ui-btn-sm ui-btn-light-border ui-btn-icon-add ui-btn-round" data-role="invite-more">
								${0}
							</span>
						</div>
						<div class="invite-form-row">
							<div class="invite-form-col">
								<div class="invite-content__field-lable">${0}</div>
								<div data-role="entity-selector-container"></div>
							</div>
						</div>
						<div class="invite-form-row" id="intranet-invitation__department-control-palce">
						</div>
					</form>
				</div>
			</div>
		`),d.Loc.getMessage("INTRANET_INVITE_DIALOG_GROUP_TITLE"),d.Loc.getMessage("INTRANET_INVITE_DIALOG_ADD_MORE"),d.Loc.getMessage("INTRANET_INVITE_DIALOG_GROUP_INPUT"));babelHelpers.classPrivateFieldLooseBase(this,zt)[zt].renderInputRowsTo(babelHelpers.classPrivateFieldLooseBase(this,Wt)[Wt].querySelector('div[data-role="rows-container"]'),3);babelHelpers.classPrivateFieldLooseBase(this,Jt)[Jt].renderTo(babelHelpers.classPrivateFieldLooseBase(this,Wt)[Wt].querySelector('[data-role="entity-selector-container"]'));babelHelpers.classPrivateFieldLooseBase(this,Zt)[Zt].renderTo(babelHelpers.classPrivateFieldLooseBase(this,Wt)[Wt].querySelector("#intranet-invitation__department-control-palce"));const e=babelHelpers.classPrivateFieldLooseBase(this,Wt)[Wt].querySelector("[data-role='invite-more']");if(d.Type.isDomNode(e)){d.Event.unbindAll(e);d.Event.bind(e,"click",(()=>{babelHelpers.classPrivateFieldLooseBase(this,zt)[zt].renderInputRowTo(babelHelpers.classPrivateFieldLooseBase(this,Wt)[Wt].querySelector('div[data-role="rows-container"]'));if(babelHelpers.classPrivateFieldLooseBase(this,Qt)[Qt]){babelHelpers.classPrivateFieldLooseBase(this,Qt)[Qt]()}}))}return babelHelpers.classPrivateFieldLooseBase(this,Wt)[Wt]}getAnalyticTab(){return ee.TAB_DEPARTMENT}onSubmit(e){var t;const s=this.render().querySelector("form");const[i,a]=babelHelpers.classPrivateFieldLooseBase(this,zt)[zt].parseEmailAndPhone(s);const l=[];if(a.length>0){l.push(`${d.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR")}: ${a.join(", ")}`)}if(i.length<=0){l.push(d.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR"))}const r=(t=e.getData())==null?void 0:t.context;if(l.length>0){v.EventEmitter.emit(r,"BX.Intranet.Invitation:onSendData",{errors:l});return}const o=babelHelpers.classPrivateFieldLooseBase(this,Jt)[Jt].getDialog().getSelectedItems();const n=[];o.forEach((e=>{const t=parseInt(e.getId(),10);n.push(t)}));const c={invitations:i,departmentIds:babelHelpers.classPrivateFieldLooseBase(this,Zt)[Zt].getValues(),workgroupIds:n,tab:"group"};const b={INVITATION_TYPE:"withGroupOrDepartment",INVITATION_COUNT:i.length};v.EventEmitter.emit(r,"BX.Intranet.Invitation:onSendData",{action:"inviteWithGroupDp",data:c,analyticsLabel:b})}onInviteSuccess(e){var t;(t=this.render().querySelector("form"))==null?void 0:t.reset();babelHelpers.classPrivateFieldLooseBase(this,Zt)[Zt].reset();babelHelpers.classPrivateFieldLooseBase(this,Jt)[Jt].removeTags()}getSubmitButtonText(){return d.Loc.getMessage("BX24_INVITE_DIALOG_ACTION_INVITE")}}let ts=e=>e,ss,is;var as=babelHelpers.classPrivateFieldLooseKey("container");class ls extends x{constructor(e){super();Object.defineProperty(this,as,{writable:true,value:void 0})}render(){if(babelHelpers.classPrivateFieldLooseBase(this,as)[as]){return babelHelpers.classPrivateFieldLooseBase(this,as)[as]}babelHelpers.classPrivateFieldLooseBase(this,as)[as]=d.Tag.render(ss||(ss=ts`
			<div class="invite-wrap js-intranet-invitation-block" data-role="integrator-block">
				<form method="POST" name="INTEGRATOR_DIALOG_FORM">
					<div class="invite-title-container">
						<div class="invite-title-icon invite-title-icon-mass">
							<div class="ui-icon-set --persons-3"></div>
						</div>
					<div class="invite-title-text">${0}</div>
					<div class="invite-title-helper" onclick="top.BX.Helper.show('redirect=detail&code=7725333');"></div>
					</div>
					<div class="invite-content-container">
						<div class="invite-form-container">
							<div data-role="rows-container">
								<div class="invite-form-row">
									<div class="invite-form-col">
										<div class="invite-content__field-lable">${0}</div>
										<div class="ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon">
											<input 
												type="text" 
												class="ui-ctl-element" 
												value="" 
												maxlength="50"
												name="integrator_email" 
												id="integrator_email" 
												placeholder="${0}"
											/>
											<button type="button" class="ui-ctl-after ui-ctl-icon-clear" style="display: none"></button>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>
		`),d.Loc.getMessage("BX24_INVITE_DIALOG_TAB_INTEGRATOR_TITLE"),d.Loc.getMessage("INTRANET_INVITE_DIALOG_INTEGRATOR_EMAIL"),d.Loc.getMessage("INTRANET_INVITE_DIALOG_INTEGRATOR_EMAIL"));const e=babelHelpers.classPrivateFieldLooseBase(this,as)[as].querySelector("input");const t=e.nextElementSibling;d.Event.bind(e,"input",(()=>{d.Dom.style(t,"display",e.value===""?"none":"block")}));d.Event.bind(t,"click",(e=>{e.preventDefault();d.Dom.style(t,"display","none")}));return babelHelpers.classPrivateFieldLooseBase(this,as)[as]}getAnalyticTab(){return ee.TAB_INTEGRATOR}onSubmit(e){const t=this.render().querySelector("form");const s={integrator_email:t.integrator_email.value};const i={INVITATION_TYPE:"integrator"};const r=d.Tag.render(is||(is=ts`
			<div class="invite-integrator-confirm-message">
				${0}
			</div>
		`),d.Loc.getMessage("INTRANET_INVITE_DIALOG_CONFIRM_INTEGRATOR_DESCRIPTION"));const o=r.querySelector("span");d.Event.bind(o,"click",(()=>{top.BX.Helper.show("redirect=detail&code=20682986")}));const n={action:"inviteIntegrator",data:s,analyticsLabel:i};const c=new l.Popup({id:"integrator-confirm-invitation-popup",maxWidth:500,closeIcon:false,overlay:true,contentPadding:10,titleBar:d.Loc.getMessage("INTRANET_INVITE_DIALOG_CONFIRM_INTEGRATOR_TITLE"),content:r,offsetLeft:100,buttons:[new a.CreateButton({text:d.Loc.getMessage("INTRANET_INVITE_DIALOG_CONFIRM_INTEGRATOR_BUTTON_YES"),onclick:()=>{var t;const s=(t=e.getData())==null?void 0:t.context;v.EventEmitter.emit(s,"BX.Intranet.Invitation:onSendData",n);c.close()}}),new a.CancelButton({text:d.Loc.getMessage("INTRANET_INVITE_DIALOG_CONFIRM_INTEGRATOR_BUTTON_NO"),onclick:()=>{c.close()}})],events:{onClose:()=>{c.destroy()}}});c.show()}getSubmitButtonText(){return d.Loc.getMessage("BX24_INVITE_DIALOG_ACTION_INVITE")}onInviteSuccess(e){var t;(t=this.render().querySelector("form"))==null?void 0:t.reset()}}var rs=babelHelpers.classPrivateFieldLooseKey("container");var os=babelHelpers.classPrivateFieldLooseKey("isEnabled");var ns=babelHelpers.classPrivateFieldLooseKey("analytics");var cs=babelHelpers.classPrivateFieldLooseKey("transport");var ds=babelHelpers.classPrivateFieldLooseKey("departmentControl");var vs=babelHelpers.classPrivateFieldLooseKey("page");class bs{constructor(e){Object.defineProperty(this,rs,{writable:true,value:void 0});Object.defineProperty(this,os,{writable:true,value:void 0});Object.defineProperty(this,ns,{writable:true,value:void 0});Object.defineProperty(this,cs,{writable:true,value:void 0});Object.defineProperty(this,ds,{writable:true,value:void 0});Object.defineProperty(this,vs,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,rs)[rs]=e.container;babelHelpers.classPrivateFieldLooseBase(this,os)[os]=e.isSelfRegisterEnabled;babelHelpers.classPrivateFieldLooseBase(this,ns)[ns]=e.analytics;babelHelpers.classPrivateFieldLooseBase(this,cs)[cs]=e.transport;babelHelpers.classPrivateFieldLooseBase(this,ds)[ds]=e.departmentControl;babelHelpers.classPrivateFieldLooseBase(this,vs)[vs]=e.page;if(d.Type.isDomNode(babelHelpers.classPrivateFieldLooseBase(this,rs)[rs])){this.bindActions();const e=babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].querySelector(".invite-dialog-fast-reg-control-switcher");this.switcher=new r.Switcher({inputName:"allow_register",id:"allow_register",checked:babelHelpers.classPrivateFieldLooseBase(this,os)[os],node:e,size:r.SwitcherSize.small,handlers:{toggled:this.toggleSettings.bind(this)}})}const t=babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].querySelector("[data-role='selfRegenerateSecretButton']");this.generateLinkHint=null;d.Event.bind(t,"mouseover",(e=>{this.generateLinkHint=this.showHintPopup(d.Loc.getMessage("INTRANET_INVITE_DIALOG_LINK_UPDATE_WARNING_MSGVER_1"),t)}));d.Event.bind(t,"mouseout",(()=>{var e;(e=this.generateLinkHint)==null?void 0:e.destroy();this.generateLinkHint=null}));v.EventEmitter.subscribe("BX.Intranet.Invitation:confirmShutdown",(e=>{const t=e.getData();this.showNotificationPopup(t)}))}bindActions(){const e=babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].querySelector("[data-role='selfRegenerateSecretButton']");if(d.Type.isDomNode(e)){d.Event.bind(e,"click",(()=>{this.regenerateSecret()}))}const t=babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].querySelector("[data-role='copyRegisterUrlButton']");if(d.Type.isDomNode(t)){d.Event.bind(t,"click",(()=>{this.copyRegisterUrl()}))}const s=babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].querySelector("[data-role='allowRegisterConfirm']");if(d.Type.isDomNode(s)){d.Event.bind(s,"change",(()=>{v.EventEmitter.emit("BX.Intranet.Invitation:onChangeForm");babelHelpers.classPrivateFieldLooseBase(this,vs)[vs].setButtonState(G.ENABLED_STATE);this.toggleWhiteList(s)}))}const i=babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].querySelector("[data-role='selfWhiteList']");if(d.Type.isDomNode(i)){d.Event.bind(i,"input",(()=>{babelHelpers.classPrivateFieldLooseBase(this,vs)[vs].setButtonState(G.ENABLED_STATE);v.EventEmitter.emit("BX.Intranet.Invitation:onChangeForm")}))}}regenerateSecret(){babelHelpers.classPrivateFieldLooseBase(this,cs)[cs].send({action:"self",data:{allow_register_secret:d.Text.getRandom(8)}}).then((e=>{top.BX.UI.Notification.Center.notify({content:d.Loc.getMessage("INTRANET_INVITE_DIALOG_LINK_UPDATE_SUCCESS"),autoHideDelay:2500})}),(e=>{top.BX.UI.Notification.Center.notify({content:d.Loc.getMessage("INTRANET_INVITE_DIALOG_LINK_UPDATE_ERROR"),autoHideDelay:2500})}))}copyRegisterUrl(){const e=babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].querySelector("[data-role='copyRegisterUrlButton']");if(d.Dom.hasClass(e,"ui-btn-wait")){return}d.Dom.addClass(e,"ui-btn-wait");babelHelpers.classPrivateFieldLooseBase(this,cs)[cs].send({action:"getInviteLink",data:{departmentsId:babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].getValues()}}).then((t=>{var s;d.Dom.removeClass(e,"ui-btn-wait");const i=(s=t.data)==null?void 0:s.invitationLink;if(d.Type.isStringFilled(i)){this.copyToClipboard(i).then((e=>{top.BX.UI.Notification.Center.notify({content:d.Loc.getMessage("BX24_INVITE_DIALOG_COPY_URL"),autoHideDelay:2500})})).catch((e=>{console.log(e)}));babelHelpers.classPrivateFieldLooseBase(this,ns)[ns].send()}}),(t=>{d.Dom.removeClass(e,"ui-btn-wait")}))}async copyToClipboard(e){var t;if(!d.Type.isString(e)){return Promise.reject()}if(window.isSecureContext&&navigator.clipboard){return new Promise(((t,s)=>{setTimeout((()=>navigator.clipboard.writeText(e).then((()=>t())).catch((e=>s(e)))),0)}))}return(t=BX.clipboard)!=null&&t.copy(e)?Promise.resolve():Promise.reject()}showHintPopup(e,t){if(!d.Type.isDomNode(t)||!e){return}const s=new BX.PopupWindow("inviteHint"+d.Text.getRandom(8),t,{content:e,zIndex:15e3,angle:true,offsetTop:0,offsetLeft:50,closeIcon:false,autoHide:true,darkMode:true,overlay:false,maxWidth:400,events:{onAfterPopupShow(){setTimeout((()=>{this.close()}),4e3)}}});s.show();return s}showNotificationPopup(e){const t=new BX.PopupWindow({className:"confirm-self-register",titleBar:d.Loc.getMessage("INTRANET_INVITE_DIALOG_SELF_CONFIRM_POPUP_TITLE"),content:d.Loc.getMessage("INTRANET_INVITE_DIALOG_SELF_CONFIRM_POPUP_TEXT"),width:364,height:188,closeIcon:true,buttons:[new BX.UI.Button({text:d.Loc.getMessage("INTRANET_INVITE_DIALOG_SELF_CONFIRM_POPUP_OK"),color:BX.UI.Button.Color.PRIMARY,round:true,events:{click(){t.close();v.EventEmitter.emit(e.page,"BX.Intranet.Invitation:submit",{context:e.context,isConfirm:true})}}}),new BX.UI.ApplyButton({text:d.Loc.getMessage("INTRANET_INVITE_DIALOG_SELF_CONFIRM_POPUP_CANCEL"),round:true,events:{click(){t.close()}}})],events:{onClose:()=>{v.EventEmitter.emit("BX.Intranet.Invitation:onSubmitReady")}}});t.show()}toggleSettings(){v.EventEmitter.emit("BX.Intranet.Invitation:onChangeForm");babelHelpers.classPrivateFieldLooseBase(this,vs)[vs].setButtonState(G.ENABLED_STATE);const e=babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].querySelector(".js-invite-dialog-fast-reg-control-container");if(d.Type.isDomNode(e)){d.Dom.toggleClass(e,"disallow-registration")}const t=babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].querySelector("[data-role='selfSettingsBlock']");if(d.Type.isDomNode(t)){d.Dom.style(t,"display",this.switcher.checked?"block":"none")}}toggleWhiteList(e){const t=babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].querySelector("[data-role='selfWhiteList']");if(d.Type.isDomNode(t)){d.Dom.style(t,"display",e.checked?"block":"none")}}}let us=e=>e,ps,hs,Ls,Is,Ps,_s,Es;var Ts=babelHelpers.classPrivateFieldLooseKey("container");var gs=babelHelpers.classPrivateFieldLooseKey("isAdmin");var ms=babelHelpers.classPrivateFieldLooseKey("isCloud");var ys=babelHelpers.classPrivateFieldLooseKey("fastRegistrationAvailable");var Bs=babelHelpers.classPrivateFieldLooseKey("needConfirmRegistration");var As=babelHelpers.classPrivateFieldLooseKey("wishlist");var Fs=babelHelpers.classPrivateFieldLooseKey("departmentControl");var Hs=babelHelpers.classPrivateFieldLooseKey("linkRegisterEnabled");var Ns=babelHelpers.classPrivateFieldLooseKey("analytics");var fs=babelHelpers.classPrivateFieldLooseKey("transport");var Os=babelHelpers.classPrivateFieldLooseKey("btnState");var Ss=babelHelpers.classPrivateFieldLooseKey("renderCopyBtnDescription");var Ds=babelHelpers.classPrivateFieldLooseKey("renderUpdateLinkBtn");var ws=babelHelpers.classPrivateFieldLooseKey("renderFastRegistrationSwitcher");var Rs=babelHelpers.classPrivateFieldLooseKey("renderConfirmRegistrationCheckbox");var Cs=babelHelpers.classPrivateFieldLooseKey("renderWhiteListField");var Ms=babelHelpers.classPrivateFieldLooseKey("renderWarningContainer");class js extends x{constructor(e){super();Object.defineProperty(this,Ms,{value:Xs});Object.defineProperty(this,Cs,{value:Ks});Object.defineProperty(this,Rs,{value:xs});Object.defineProperty(this,ws,{value:ks});Object.defineProperty(this,Ds,{value:Gs});Object.defineProperty(this,Ss,{value:Vs});Object.defineProperty(this,Ts,{writable:true,value:void 0});Object.defineProperty(this,gs,{writable:true,value:void 0});Object.defineProperty(this,ms,{writable:true,value:void 0});Object.defineProperty(this,ys,{writable:true,value:void 0});Object.defineProperty(this,Bs,{writable:true,value:void 0});Object.defineProperty(this,As,{writable:true,value:void 0});Object.defineProperty(this,Fs,{writable:true,value:void 0});Object.defineProperty(this,Hs,{writable:true,value:void 0});Object.defineProperty(this,Ns,{writable:true,value:void 0});Object.defineProperty(this,fs,{writable:true,value:void 0});Object.defineProperty(this,Os,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,gs)[gs]=e.isAdmin===true;babelHelpers.classPrivateFieldLooseBase(this,ms)[ms]=e.isCloud===true;babelHelpers.classPrivateFieldLooseBase(this,ys)[ys]=e.fastRegistrationAvailable===true;babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]=e.needConfirmRegistration===true;babelHelpers.classPrivateFieldLooseBase(this,As)[As]=d.Type.isStringFilled(e.wishlist)?e.wishlist:"";babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs]=e.departmentControl instanceof c?e.departmentControl:null;babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs]=e.linkRegisterEnabled;babelHelpers.classPrivateFieldLooseBase(this,Ns)[Ns]=e.analytics;babelHelpers.classPrivateFieldLooseBase(this,fs)[fs]=e.transport;babelHelpers.classPrivateFieldLooseBase(this,Os)[Os]=G.DISABLED_STATE}render(){if(babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts]){return babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts]}babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts]=d.Tag.render(ps||(ps=us`
			<div class="invite-wrap js-intranet-invitation-block" data-role="self-block">
				<div class="invite-title-container">
					<div class="invite-title-icon invite-title-icon-link">
						<div class="ui-icon-set --link-3"></div>
					</div>
					<div class="invite-title-text">${0}</div>
					<div class="invite-title-helper" onclick="top.BX.Helper.show('redirect=detail&code=6546149');"></div>
				</div>
				<form method="POST" name="SELF_DIALOG_FORM">
					${0}
					<div class="invite-content-container --department-bg">
						<div class="invite-form-container">
							<div 
								style="border-top: none; ${0}" 
								data-role="selfSettingsBlock" 
								id="intranet-dialog-tab-content-self-block" 
								class="invite-dialog-inv-link-block"
							>
								<div id="invitation-department-status" class="invitation-department__status"></div>
								<div>
									${0}
									<div class="intranet-invitation__link-department-control"></div>
									<div class="invite-form-container-reg-row">
										<span class="ui-btn ui-btn-primary ui-btn-themes ui-btn-icon-copy invite-form-btn-copy" data-role="copyRegisterUrlButton">
											${0}
										</span>
										${0}
									</div>
									${0}
									${0}
								</div>
							</div>
						</div>
					</div>
				</form>
				${0}
			</div>
		`),d.Loc.getMessage("INTRANET_INVITE_DIALOG_FAST_REG_TITLE"),babelHelpers.classPrivateFieldLooseBase(this,gs)[gs]?babelHelpers.classPrivateFieldLooseBase(this,ws)[ws]():"",babelHelpers.classPrivateFieldLooseBase(this,ys)[ys]?"":"display: none;",babelHelpers.classPrivateFieldLooseBase(this,gs)[gs]?"":babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss](),d.Loc.getMessage("BX24_INVITE_DIALOG_COPY_LINK"),babelHelpers.classPrivateFieldLooseBase(this,gs)[gs]?babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds]():"",babelHelpers.classPrivateFieldLooseBase(this,gs)[gs]&&babelHelpers.classPrivateFieldLooseBase(this,ms)[ms]?babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs]():"",babelHelpers.classPrivateFieldLooseBase(this,ms)[ms]?babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs]():"",!babelHelpers.classPrivateFieldLooseBase(this,gs)[gs]&&!babelHelpers.classPrivateFieldLooseBase(this,ys)[ys]?babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms]():"");d.Dom.prepend(babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs].render(),babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts].querySelector(".intranet-invitation__link-department-control"));new bs({container:babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts],isSelfRegisterEnabled:babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs],analytics:babelHelpers.classPrivateFieldLooseBase(this,Ns)[Ns],transport:babelHelpers.classPrivateFieldLooseBase(this,fs)[fs],departmentControl:babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs],page:this});return babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts]}getAnalyticTab(){return ee.TAB_LINK}onSubmit(e){var t,s,i,a,l;const r=this.render().querySelector("form");const o={allow_register:r.allow_register.value,allow_register_confirm:r!=null&&(t=r.allow_register_confirm)!=null&&t.checked?"Y":"N",allow_register_whitelist:(s=r==null?void 0:(i=r.allow_register_whitelist)==null?void 0:i.value)!=null?s:""};const n=(a=e.getData())==null?void 0:a.context;const c=(l=e.getData())==null?void 0:l.isConfirm;if(r.allow_register.value==="N"&&!c){v.EventEmitter.emit("BX.Intranet.Invitation:confirmShutdown",{page:this,context:n});return}v.EventEmitter.emit(n,"BX.Intranet.Invitation:onSendData",{action:"self",data:o})}getSubmitButtonText(){return d.Loc.getMessage("BX24_INVITE_DIALOG_ACTION_SAVE")}getButtonState(){return babelHelpers.classPrivateFieldLooseBase(this,Os)[Os]}setButtonState(e){babelHelpers.classPrivateFieldLooseBase(this,Os)[Os]=e}}function Vs(){return d.Tag.render(hs||(hs=us`
			<div class="invite-form__copy-button-description">
				${0}
			</div>
		`),d.Loc.getMessage("INTRANET_INVITE_COPY_BUTTON_DESCRIPTION"))}function Gs(){return d.Tag.render(Ls||(Ls=us`
			<span data-role="selfRegenerateSecretButton">
				<a
				href="javascript:void(0)"
				class="invite-dialog-update-link"
				>
					${0}
				</a>
			</span>
		`),d.Loc.getMessage("BX24_INVITE_DIALOG_REGISTER_NEW_LINK"))}function ks(){return d.Tag.render(Is||(Is=us`
			<label class="invite-dialog-fast-reg-control-container js-invite-dialog-fast-reg-control-container ${0}" for="allow_register">
				<div class="invite-dialog-fast-reg-control-switcher" data-role="self-switcher"></div>
				<span class="invite-dialog-fast-reg-control-label">
					<div class="invite-dialog-fast-reg-control-label-title">${0}</div>
				</span>
			</label>
		`),babelHelpers.classPrivateFieldLooseBase(this,ys)[ys]?"":"disallow-registration",d.Loc.getMessage("INTRANET_INVITE_ALLOW_INVITATION_LINK"))}function xs(){return d.Tag.render(Ps||(Ps=us`
			<div style="padding-top: 12px;">
				<label class="ui-ctl ui-ctl-w100 ui-ctl-checkbox invite-form-check-box">
					<input
					type="checkbox"
					class="ui-ctl-element"
					name="allow_register_confirm"
					id="allow_register_confirm"
					data-role="allowRegisterConfirm"
					${0}
					${0}
					/>
					<div class="ui-ctl-label-text">${0}</div>
				</label>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]?"checked":"",babelHelpers.classPrivateFieldLooseBase(this,gs)[gs]?"":"disabled",d.Loc.getMessage("INTRANET_INVITE_DIALOG_FAST_REG_TYPE"))}function Ks(){return d.Tag.render(_s||(_s=us`
		<div id="intranet-dialog-tab-content-self-whitelist" data-role="selfWhiteList" ${0}>
			<span class="invite-form-ctl-title">
				${0}
			</span>
			<label class="ui-ctl ui-ctl-w75 ui-ctl-textbox">
				<input
				type="text"
				${0}
				class="ui-ctl-element"
				name="allow_register_whitelist"
				value="${0}"
				placeholder="${0}"
				/>
			</label>
		</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]?"":'style="display: none"',d.Loc.getMessage("INTRANET_INVITE_DIALOG_FAST_REG_DOMAINS"),babelHelpers.classPrivateFieldLooseBase(this,gs)[gs]?"":"disabled",babelHelpers.classPrivateFieldLooseBase(this,As)[As],d.Loc.getMessage("BX24_INVITE_DIALOG_REGISTER_TYPE_DOMAINS_PLACEHOLDER"))}function Xs(){return d.Tag.render(Es||(Es=us`
			<div class="intranet-invitation__error-box">
				<div class="intranet-invitation__error-icon"></div>
				<div class="intranet-invitation__error-title">${0}</div>
				<div class="intranet-invitation__error-desc">${0}</div>
			</div>
		`),d.Loc.getMessage("INTRANET_INVITE_ALERT_INVITATION_LINK_DISABLED"),d.Loc.getMessage("INTRANET_INVITE_ALERT_INVITATION_LINK_DISABLED_DESCRIPTION"))}var $s=babelHelpers.classPrivateFieldLooseKey("input");var Us=babelHelpers.classPrivateFieldLooseKey("invitationType");var qs=babelHelpers.classPrivateFieldLooseKey("isPhoneEnabled");var Ys=babelHelpers.classPrivateFieldLooseKey("isEmailEnabled");var Ws=babelHelpers.classPrivateFieldLooseKey("getDialogInputMessage");class zs{constructor(e){Object.defineProperty(this,Ws,{value:Js});Object.defineProperty(this,$s,{writable:true,value:void 0});Object.defineProperty(this,Us,{writable:true,value:void 0});Object.defineProperty(this,qs,{writable:true,value:void 0});Object.defineProperty(this,Ys,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Us)[Us]=e.useOnlyPhone?o.InvitationInputType.PHONE:e.smsAvailable?o.InvitationInputType.ALL:o.InvitationInputType.EMAIL;babelHelpers.classPrivateFieldLooseBase(this,qs)[qs]=[o.InvitationInputType.ALL,o.InvitationInputType.PHONE].includes(babelHelpers.classPrivateFieldLooseBase(this,Us)[Us]);babelHelpers.classPrivateFieldLooseBase(this,Ys)[Ys]=[o.InvitationInputType.ALL,o.InvitationInputType.EMAIL].includes(babelHelpers.classPrivateFieldLooseBase(this,Us)[Us]);babelHelpers.classPrivateFieldLooseBase(this,$s)[$s]=new o.InvitationInput({inputType:babelHelpers.classPrivateFieldLooseBase(this,Us)[Us]});babelHelpers.classPrivateFieldLooseBase(this,$s)[$s].getTagSelector().setPlaceholder(d.Type.isStringFilled(e.placeholder)?e.placeholder:babelHelpers.classPrivateFieldLooseBase(this,Ws)[Ws]());BX.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,$s)[$s].getTagSelector().getContainer(),"height","103px");BX.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,$s)[$s].getTagSelector().getContainer(),"cursor","text");d.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,$s)[$s].getTagSelector().getContainer(),"click",(()=>{babelHelpers.classPrivateFieldLooseBase(this,$s)[$s].getTagSelector().focusTextBox()}))}reset(){babelHelpers.classPrivateFieldLooseBase(this,$s)[$s].getTagSelector().removeTags()}renderTo(e){babelHelpers.classPrivateFieldLooseBase(this,$s)[$s].renderTo(e)}getValue(){const e=babelHelpers.classPrivateFieldLooseBase(this,$s)[$s].getTagSelector();const t=e.getTags();const s=[];const i=[];t.forEach((e=>{if(babelHelpers.classPrivateFieldLooseBase(this,qs)[qs]&&e.getEntityType()==="phone"){s.push(e.getTitle())}else if(babelHelpers.classPrivateFieldLooseBase(this,Ys)[Ys]&&e.getEntityType()==="email"){s.push(e.getTitle())}else{i.push(e.getTitle())}}));return{values:s,errorElements:i}}}function Js(){if(babelHelpers.classPrivateFieldLooseBase(this,qs)[qs]&&babelHelpers.classPrivateFieldLooseBase(this,Ys)[Ys]){return d.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_INPUT")}else if(babelHelpers.classPrivateFieldLooseBase(this,qs)[qs]){return d.Loc.getMessage("INTRANET_INVITE_DIALOG_PHONE_INPUT")}else{return d.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_INPUT")}}let Qs=e=>e,Zs,ei;var ti=babelHelpers.classPrivateFieldLooseKey("container");var si=babelHelpers.classPrivateFieldLooseKey("smsAvailable");var ii=babelHelpers.classPrivateFieldLooseKey("useOnlyPhone");var ai=babelHelpers.classPrivateFieldLooseKey("onClickSwitchMode");var li=babelHelpers.classPrivateFieldLooseKey("massInvitationField");var ri=babelHelpers.classPrivateFieldLooseKey("departmentControl");var oi=babelHelpers.classPrivateFieldLooseKey("getEmptyError");var ni=babelHelpers.classPrivateFieldLooseKey("getValidateError");class ci extends x{constructor(e){super();Object.defineProperty(this,ni,{value:vi});Object.defineProperty(this,oi,{value:di});Object.defineProperty(this,ti,{writable:true,value:void 0});Object.defineProperty(this,si,{writable:true,value:void 0});Object.defineProperty(this,ii,{writable:true,value:void 0});Object.defineProperty(this,ai,{writable:true,value:void 0});Object.defineProperty(this,li,{writable:true,value:void 0});Object.defineProperty(this,ri,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,si)[si]=e.smsAvailable===true;babelHelpers.classPrivateFieldLooseBase(this,ii)[ii]=e.useOnlyPhone===true;babelHelpers.classPrivateFieldLooseBase(this,ai)[ai]=d.Type.isFunction(e.onClickSwitchMode)?e.onClickSwitchMode:null;babelHelpers.classPrivateFieldLooseBase(this,li)[li]=new zs({placeholder:"",useOnlyPhone:babelHelpers.classPrivateFieldLooseBase(this,ii)[ii],smsAvailable:babelHelpers.classPrivateFieldLooseBase(this,si)[si]});babelHelpers.classPrivateFieldLooseBase(this,ri)[ri]=e.departmentControl instanceof c?e.departmentControl:null}render(){var e;if(babelHelpers.classPrivateFieldLooseBase(this,ti)[ti]){return babelHelpers.classPrivateFieldLooseBase(this,ti)[ti]}const t=d.Tag.render(Zs||(Zs=Qs`
			<div class="invite-title-helper"
				 data-hint="${0}"
				 data-hint-no-icon
			>
			</div>
		`),d.Loc.getMessage("INTRANET_INVITE_DIALOG_MASS_INVITE_HINT"));const s=babelHelpers.classPrivateFieldLooseBase(this,ii)[ii]?"PHONE":babelHelpers.classPrivateFieldLooseBase(this,si)[si]?"EMAIL_AND_PHONE":"EMAIL";babelHelpers.classPrivateFieldLooseBase(this,ti)[ti]=d.Tag.render(ei||(ei=Qs`
			<div class="invite-wrap js-intranet-invitation-block" data-role="mass-invite-block">
				<div class="invite-title-container">
					<div class="invite-title-icon invite-title-icon-mass">
						<div class="ui-icon-set --person-letter"></div>
					</div>
					<div class="invite-title-text">${0}</div>
					${0}
				</div>
				<div class="invite-content-container">
					<div class="invite-form-container">
						<form method="POST" name="MASS_INVITE_DIALOG_FORM" class="invite-form-container">
							<div class="invite-content__field-lable">
								${0}
							</div>
							<div id="invite-content__mass-field">
							</div>
							<div class="invite-form-ctl-description --border-bottom">
								<span href="javascript:void(0)"
								   class="invite-content__switch_button swith-email-invitation-mass-mode"
								>
									${0}
								</span>
							</div>
							<div class="invite-form-row" id="intranet-invitation__department-control-palce"></div>
						</form>
					</div>
				</div>
			</div>
		`),d.Loc.getMessage("INTRANET_INVITE_DIALOG_MASS_TITLE"),babelHelpers.classPrivateFieldLooseBase(this,si)[si]?t:"",d.Loc.getMessage(`INTRANET_INVITE_DIALOG_MASS_TITLE_${s}`),d.Loc.getMessage("INTRANET_INVITE_DIALOG_ADD_PERSONAL"));(e=babelHelpers.classPrivateFieldLooseBase(this,li)[li])==null?void 0:e.renderTo(babelHelpers.classPrivateFieldLooseBase(this,ti)[ti].querySelector("#invite-content__mass-field"));babelHelpers.classPrivateFieldLooseBase(this,ri)[ri].renderTo(babelHelpers.classPrivateFieldLooseBase(this,ti)[ti].querySelector("#intranet-invitation__department-control-palce"));d.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,ti)[ti].querySelector(".swith-email-invitation-mass-mode"),"click",babelHelpers.classPrivateFieldLooseBase(this,ai)[ai]);return babelHelpers.classPrivateFieldLooseBase(this,ti)[ti]}getAnalyticTab(){return ee.TAB_MASS}onSubmit(e){var t;const{values:s,errorElements:i}=babelHelpers.classPrivateFieldLooseBase(this,li)[li].getValue();const a=[];if(s.length<=0){a.push(babelHelpers.classPrivateFieldLooseBase(this,oi)[oi]())}if(i.length>0){a.push(babelHelpers.classPrivateFieldLooseBase(this,ni)[ni]())}if(a.length>0){v.EventEmitter.emit(window.invitationForm,"BX.Intranet.Invitation:onSendData",{errors:a});return}const l={invitationText:s.join(" "),departmentIds:babelHelpers.classPrivateFieldLooseBase(this,ri)[ri].getValues(),tab:"mass"};const r={INVITATION_TYPE:"mass"};const o=(t=e.getData())==null?void 0:t.context;v.EventEmitter.emit(o,"BX.Intranet.Invitation:onSendData",{action:"massInvite",data:l,analyticsLabel:r})}onInviteSuccess(e){babelHelpers.classPrivateFieldLooseBase(this,li)[li].reset();babelHelpers.classPrivateFieldLooseBase(this,ri)[ri].reset()}getSubmitButtonText(){return d.Loc.getMessage("BX24_INVITE_DIALOG_ACTION_INVITE")}}function di(){if(babelHelpers.classPrivateFieldLooseBase(this,ii)[ii]){return d.Loc.getMessage("INTRANET_INVITE_DIALOG_EMPTY_ERROR_PHONE")}else if(babelHelpers.classPrivateFieldLooseBase(this,si)[si]){return d.Loc.getMessage("INTRANET_INVITE_DIALOG_EMPTY_ERROR_EMAIL_AND_PHONE")}return d.Loc.getMessage("INTRANET_INVITE_DIALOG_EMPTY_ERROR_EMAIL")}function vi(){if(babelHelpers.classPrivateFieldLooseBase(this,ii)[ii]){return d.Loc.getMessage("INTRANET_INVITE_DIALOG_VALIDATE_ERROR_PHONE")}else if(babelHelpers.classPrivateFieldLooseBase(this,si)[si]){return d.Loc.getMessage("INTRANET_INVITE_DIALOG_VALIDATE_ERROR_EMAIL_AND_PHONE")}return d.Loc.getMessage("INTRANET_INVITE_DIALOG_VALIDATE_ERROR_EMAIL")}let bi=e=>e,ui,pi;var hi=babelHelpers.classPrivateFieldLooseKey("container");var Li=babelHelpers.classPrivateFieldLooseKey("inputsFactory");var Ii=babelHelpers.classPrivateFieldLooseKey("isCloud");var Pi=babelHelpers.classPrivateFieldLooseKey("withoutConfirm");var _i=babelHelpers.classPrivateFieldLooseKey("tagSelectorGroup");var Ei=babelHelpers.classPrivateFieldLooseKey("departmentControl");var Ti=babelHelpers.classPrivateFieldLooseKey("renderFields");class gi extends x{constructor(e){super();Object.defineProperty(this,Ti,{value:mi});Object.defineProperty(this,hi,{writable:true,value:void 0});Object.defineProperty(this,Li,{writable:true,value:void 0});Object.defineProperty(this,Ii,{writable:true,value:void 0});Object.defineProperty(this,Pi,{writable:true,value:void 0});Object.defineProperty(this,_i,{writable:true,value:void 0});Object.defineProperty(this,Ei,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Ii)[Ii]=e.isCloud===true;babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi]=e.withoutConfirm===true;babelHelpers.classPrivateFieldLooseBase(this,Li)[Li]=e.inputsFactory instanceof A?e.inputsFactory:null;babelHelpers.classPrivateFieldLooseBase(this,_i)[_i]=e.tagSelectorGroup instanceof n.TagSelector?e.tagSelectorGroup:null;babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei]=e.departmentControl instanceof c?e.departmentControl:null}render(){if(babelHelpers.classPrivateFieldLooseBase(this,hi)[hi]){return babelHelpers.classPrivateFieldLooseBase(this,hi)[hi]}babelHelpers.classPrivateFieldLooseBase(this,hi)[hi]=d.Tag.render(ui||(ui=bi`
			<div class="invite-wrap js-intranet-invitation-block" data-role="add-block">
				<form method="POST" name="ADD_DIALOG_FORM">
					<div class="invite-title-container">
						<div class="invite-title-icon invite-title-icon-registration">
							<div class="ui-icon-set --person-plus"></div>
						</div>
						<div class="invite-title-text">${0}</div>
					</div>
					<div class="invite-content-container">
						<div class="invite-form-container">
							<div data-role="rows-container">
								${0}
							</div>
							<div class="invite-form-row">
								<div class="invite-form-col">
									<div class="invite-content__field-lable">${0}</div>
									<div data-role="entity-selector-container"></div>
								</div>
							</div>
							<div class="invite-form-row" id="intranet-invitation__department-control-palce"></div>
							<div class="invite-form-row">
								<div class="invite-form-col">
									<div class="invite-dialog-inv-form-checkbox-wrap">
										<input
										type="checkbox"
										name="ADD_SEND_PASSWORD"
										id="ADD_SEND_PASSWORD"
										value="Y"
										class="invite-dialog-inv-form-checkbox"
										${0}
										>
										<label class="invite-dialog-inv-form-checkbox-label" for="ADD_SEND_PASSWORD">
											${0}
											${0}
										</label>
									</div>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>
		`),d.Loc.getMessage("INTRANET_INVITE_DIALOG_ADD_TITLE"),babelHelpers.classPrivateFieldLooseBase(this,Ti)[Ti](),d.Loc.getMessage("INTRANET_INVITE_DIALOG_GROUP_INPUT"),babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi]?"checked":"",d.Loc.getMessage(babelHelpers.classPrivateFieldLooseBase(this,Ii)[Ii]?"BX24_INVITE_DIALOG_ADD_WO_CONFIRMATION_TITLE":"BX24_INVITE_DIALOG_ADD_SEND_PASSWORD_TITLE"),babelHelpers.classPrivateFieldLooseBase(this,Ii)[Ii]?"":'<span id="ADD_SEND_PASSWORD_EMAIL"></span>');babelHelpers.classPrivateFieldLooseBase(this,_i)[_i].renderTo(babelHelpers.classPrivateFieldLooseBase(this,hi)[hi].querySelector('[data-role="entity-selector-container"]'));babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei].renderTo(babelHelpers.classPrivateFieldLooseBase(this,hi)[hi].querySelector("#intranet-invitation__department-control-palce"));return babelHelpers.classPrivateFieldLooseBase(this,hi)[hi]}getAnalyticTab(){return ee.TAB_REGISTRATION}onSubmit(e){var t;const s=this.render().querySelector("form");const i=babelHelpers.classPrivateFieldLooseBase(this,_i)[_i].getDialog().getSelectedItems();const a=[];i.forEach((e=>{const t=parseInt(e.getId(),10);a.push(t)}));const l={ADD_EMAIL:s.ADD_EMAIL.value,ADD_NAME:s.ADD_NAME.value,ADD_LAST_NAME:s.ADD_LAST_NAME.value,ADD_POSITION:s.ADD_POSITION.value,ADD_SEND_PASSWORD:s.ADD_SEND_PASSWORD&&Boolean(s.ADD_SEND_PASSWORD.checked)?s.ADD_SEND_PASSWORD.value:"N",departmentIds:babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei].getValues(),SONET_GROUPS_CODE:a};const r={INVITATION_TYPE:"add"};const o=(t=e.getData())==null?void 0:t.context;v.EventEmitter.emit(o,"BX.Intranet.Invitation:onSendData",{action:"add",data:l,analyticsLabel:r})}getSubmitButtonText(){return d.Loc.getMessage("BX24_INVITE_DIALOG_ACTION_ADD")}onInviteSuccess(e){var t;(t=this.render().querySelector("form"))==null?void 0:t.reset();babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei].reset();babelHelpers.classPrivateFieldLooseBase(this,_i)[_i].removeTags()}}function mi(){const e=d.Tag.render(pi||(pi=bi`
			<div>
				<div class="invite-form-row">
					<div class="invite-form-col">
						<div class="invite-content__field-lable">${0}</div>
						<div class="ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon">
							<input type="text" name="ADD_NAME" placeholder="${0}" id="ADD_NAME" class="ui-ctl-element">
							<button type="button" class="ui-ctl-after ui-ctl-icon-clear" style="display: none"></button>
						</div>
					</div>
				</div>
				<div class="invite-form-row">
					<div class="invite-form-col">
						<div class="invite-content__field-lable">${0}</div>
						<div class="ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon">
							<input type="text" name="ADD_LAST_NAME" placeholder="${0}" id="ADD_LAST_NAME" class="ui-ctl-element">
							<button type="button" class="ui-ctl-after ui-ctl-icon-clear" style="display: none"></button>
						</div>
					</div>
				</div>
				<div class="invite-form-row">
					<div class="invite-form-col">
						<div class="invite-content__field-lable">${0}</div>
						<div class="ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon">
							<input type="text" name="ADD_EMAIL" placeholder="${0}" id="ADD_EMAIL" class="ui-ctl-element" maxlength="50">
							<button type="button" class="ui-ctl-after ui-ctl-icon-clear" style="display: none"></button>
						</div>
					</div>
				</div>
				<div class="invite-form-row">
					<div class="invite-form-col">
						<div class="invite-content__field-lable">${0}</div>
						<div class="ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon">
							<input type="text" name="ADD_POSITION" placeholder="${0}" id="ADD_POSITION" class="ui-ctl-element">
							<button type="button" class="ui-ctl-after ui-ctl-icon-clear" style="display: none"></button>
						</div>			
					</div>
				</div>
			</div>
		`),d.Loc.getMessage("BX24_INVITE_DIALOG_ADD_NAME_TITLE"),d.Loc.getMessage("INTRANET_INVITE_DIALOG_PLACEHOLDER_NAME"),d.Loc.getMessage("BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE"),d.Loc.getMessage("INTRANET_INVITE_DIALOG_PLACEHOLDER_LAST_NAME"),d.Loc.getMessage("BX24_INVITE_DIALOG_ADD_EMAIL_TITLE"),d.Loc.getMessage("INTRANET_INVITE_DIALOG_PLACEHOLDER_EMAIL"),d.Loc.getMessage("BX24_INVITE_DIALOG_ADD_POSITION_TITLE"),d.Loc.getMessage("INTRANET_INVITE_DIALOG_PLACEHOLDER_POSITION"));babelHelpers.classPrivateFieldLooseBase(this,Li)[Li].bindCloseIcons(e);return e}let yi=e=>e,Bi;var Ai=babelHelpers.classPrivateFieldLooseKey("container");class Fi extends x{constructor(...e){super(...e);Object.defineProperty(this,Ai,{writable:true,value:void 0})}render(){if(babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai]){return babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai]}babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai]=d.Tag.render(Bi||(Bi=yi`
			<div class="invite-wrap js-intranet-invitation-block" data-role="success-block" style="position: fixed; left: 0; right: 0; top: 0; bottom: 0; background: #fff; z-index: 90;">
				<div style="height: 78vh;" class="invite-send-success-wrap">
					<div class="invite-send-success-text">${0}</div>
					<div class="invite-send-success-decal-1"></div>
					<div class="invite-send-success-decal-2"></div>
					<div class="invite-send-success-decal-3"></div>
					<div class="invite-send-success-decal-4"></div>
					<div class="invite-send-success-decal-5"></div>
				</div>
			</div>
		`),d.Loc.getMessage("INTRANET_INVITE_DIALOG_SUCCESS_SEND"));return babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai]}getAnalyticTab(){return null}onSubmit(e){var t,s,i,a,l,r,o,n,c,d,v,b;(t=e.getData())==null?void 0:(s=t.context)==null?void 0:s.submitButton.enable();(i=e.getData())==null?void 0:(a=i.context)==null?void 0:a.submitButton.ready();(l=e.getData())==null?void 0:(r=l.context)==null?void 0:r.changeContent((o=e.getData())==null?void 0:(n=o.context)==null?void 0:n.firstInvitationBlock);(c=e.getData())==null?void 0:(d=c.context)==null?void 0:d.activeMenuItem((v=e.getData())==null?void 0:(b=v.context)==null?void 0:b.firstInvitationBlock)}getSubmitButtonText(){return d.Loc.getMessage("BX24_INVITE_DIALOG_ACTION_INVITE_MORE")}}class Hi{createLocalEmailPage(){return new dt({departmentControl:this.createDepartmentControl(),transport:this.transport,linkRegisterEnabled:this.isSelfRegisterEnabled,analytics:this.analytics})}createEmailPage(){return new Rt({departmentControl:this.createDepartmentControl(),inputsFactory:this.createInputRowFactory(this.useLocalEmailProgram),smsAvailable:this.isInvitationBySmsAvailable,useLocalEmailProgram:this.useLocalEmailProgram,onClickSwitchMode:()=>{this.changeContent("mass-invite")},onClickAddInputRow:()=>{this.getSetupArrow();this.updateArrow()}})}createGroupPage(){var e;const t=(e=this.userOptions)!=null&&e.groupId?parseInt(this.userOptions.groupId,10):0;const s=new Pt({options:{project:true,projectId:t,isAdmin:this.isAdmin,projectLimitExceeded:this.projectLimitExceeded,projectLimitFeatureId:this.projectLimitFeatureId}});return new es({departmentControl:this.createDepartmentControl(),inputsFactory:this.createInputRowFactory(),tagSelectorGroup:s.renderTagSelector(),onClickAddInputRow:()=>{this.getSetupArrow();this.updateArrow()}})}createExtranetPage(){var e;const t=(e=this.userOptions)!=null&&e.groupId?parseInt(this.userOptions.groupId,10):0;const s={options:{project:"extranet",projectId:t,isAdmin:this.isAdmin,projectLimitExceeded:this.projectLimitExceeded,projectLimitFeatureId:this.projectLimitFeatureId,showCreateButton:!this.isCollabEnabled}};return new Ut({inputsFactory:this.createInputRowFactory(),tagSelectorGroup:new Pt(s).renderTagSelector(),onClickAddInputRow:()=>{this.getSetupArrow();this.updateArrow()}})}createRegisterPage(){var e;const t=(e=this.userOptions)!=null&&e.groupId?parseInt(this.userOptions.groupId,10):0;const s=new Pt({options:{project:true,projectId:t,isAdmin:this.isAdmin,projectLimitExceeded:this.projectLimitExceeded,projectLimitFeatureId:this.projectLimitFeatureId}});return new gi({departmentControl:this.createDepartmentControl(),isCloud:this.isCloud,inputsFactory:this.createInputRowFactory(),withoutConfirm:!this.registerNeedeConfirm,tagSelectorGroup:s.renderTagSelector()})}createIntegratorPage(){return new ls}createLinkPage(){return new js({departmentControl:this.createDepartmentControl(),isAdmin:this.isAdmin,fastRegistrationAvailable:this.isSelfRegisterEnabled,needConfirmRegistration:this.registerNeedeConfirm,wishlist:this.wishlistValue,isCloud:this.isCloud,linkRegisterEnabled:this.isSelfRegisterEnabled,analytics:this.analytics,transport:this.transport})}createMassPage(){return new ci({departmentControl:this.createDepartmentControl(),smsAvailable:this.isInvitationBySmsAvailable,useOnlyPhone:this.useLocalEmailProgram,onClickSwitchMode:()=>{this.changeContent("invite")}})}createSeccessPage(){return new Fi}}class Ni{provide(){const e=new Hi;const t=new Map;if(this.canCurrentUserInvite){if(this.useLocalEmailProgram){t.set("invite-email",e.createLocalEmailPage.call(this))}t.set("invite",e.createEmailPage.call(this));t.set("mass-invite",e.createMassPage.call(this));t.set("invite-with-group-dp",e.createGroupPage.call(this));t.set("add",e.createRegisterPage.call(this));t.set("self",e.createLinkPage.call(this))}if(this.isExtranetInstalled){t.set("extranet",e.createExtranetPage.call(this))}if(this.isCloud&&this.canCurrentUserInvite){t.set("integrator",e.createIntegratorPage.call(this))}t.set("success",e.createSeccessPage.call(this));return t}}class fi{showForm(){BX.UI.Feedback.Form.open({id:"intranet-active-directory",forms:[{zones:["ru"],id:309,lang:"ru",sec:"fbc0n3"}]})}}var Oi=babelHelpers.classPrivateFieldLooseKey("initMenu");class Si extends v.EventEmitter{constructor(e){var t,s;super();Object.defineProperty(this,Oi,{value:Di});this.setEventNamespace("BX.Intranet.Invitation");const i=d.Type.isPlainObject(e)?e:{};this.menuContainer=i.menuContainerNode;this.subMenuContainer=i.subMenuContainerNode;this.contentContainer=i.contentContainerNode;this.pageContainer=this.contentContainer.querySelector(".popup-window-tabs-content-invite");this.userOptions=i.userOptions;this.isExtranetInstalled=i.isExtranetInstalled==="Y";this.isCloud=i.isCloud==="Y";this.isAdmin=i.isAdmin==="Y";this.canCurrentUserInvite=i.canCurrentUserInvite===true;this.isInvitationBySmsAvailable=i.isInvitationBySmsAvailable==="Y";this.isCreatorEmailConfirmed=i.isCreatorEmailConfirmed==="Y";this.firstInvitationBlock=i.firstInvitationBlock;this.isSelfRegisterEnabled=i.isSelfRegisterEnabled;this.analyticsLabel=i.analyticsLabel;this.projectLimitExceeded=d.Type.isBoolean(i.projectLimitExceeded)?i.projectLimitExceeded:true;this.projectLimitFeatureId=d.Type.isString(i.projectLimitFeatureId)?i.projectLimitFeatureId:"";this.wishlistValue=d.Type.isStringFilled(i.wishlistValue)?i.wishlistValue:"";this.isCollabEnabled=i.isCollabEnabled==="Y";this.registerNeedeConfirm=i.registerConfirm===true;this.useLocalEmailProgram=i.useLocalEmailProgram===true;this.transport=new re({componentName:i.componentName,signedParameters:i.signedParameters});if(d.Type.isDomNode(this.contentContainer)){this.messageBar=new C({errorContainer:this.contentContainer.querySelector("[data-role='error-message']"),successContainer:this.contentContainer.querySelector("[data-role='success-message']")});BX.UI.Hint.init(this.contentContainer)}if(d.Type.isDomNode(this.menuContainer)){babelHelpers.classPrivateFieldLooseBase(this,Oi)[Oi]()}this.submitButton=new G({node:document.querySelector("#intranet-invitation-btn"),events:{click:e=>{if(!this.isCreatorEmailConfirmed&&!(this.navigation.current()instanceof js)&&!(this.navigation.current()instanceof dt)){this.messageBar.showError(d.Loc.getMessage("INTRANET_INVITE_DIALOG_CONFIRM_CREATOR_EMAIL_ERROR"));return}if(!this.submitButton.isWaiting()&&this.submitButton.isEnabled()){this.submitButton.wait();v.EventEmitter.emit(this.navigation.current(),"BX.Intranet.Invitation:submit",{context:this});if(this.isCloud){BX.userOptions.del("intranet.invitation","open_invitation_form_ts")}}}}});this.analytics=new ee(this.analyticsLabel,this.isAdmin);this.analytics.sendOpenSliderData(this.analyticsLabel.source);this.arrowBox=document.querySelector(".invite-wrap-decal-arrow");if(d.Type.isDomNode(this.arrowBox)){this.arrowRect=this.arrowBox.getBoundingClientRect();this.arrowHeight=this.arrowRect.height;this.setSetupArrow()}v.EventEmitter.subscribe("BX.Intranet.Invitation:onChangeForm",(()=>{this.submitButton.enable()}));this.navigation=this.createNavigation();(t=this.navigation)==null?void 0:t.subscribe("onBeforeChangePage",(()=>{this.messageBar.hideAll()}));(s=this.navigation)==null?void 0:s.subscribe("onAfterChangePage",this.onAfterChangePage.bind(this));this.navigation.showFirst();this.subscribe("BX.Intranet.Invitation:onSendData",this.onSendRequest.bind(this));v.EventEmitter.subscribe("BX.Intranet.Invitation:onSubmitReady",(()=>{this.submitButton.ready()}));v.EventEmitter.subscribe("BX.Intranet.Invitation:onSubmitDisabled",(()=>{this.submitButton.disable()}));v.EventEmitter.subscribe("BX.Intranet.Invitation:onSubmitWait",(()=>{this.submitButton.wait()}))}onAfterChangePage(e){const t=this.getSubSection();const s=e.getData().current;let i=null;if(s){i=s.getAnalyticTab();if(s.getSubmitButtonText()){this.submitButton.setLabel(s.getSubmitButtonText())}if(s.getButtonState()===G.ENABLED_STATE){this.submitButton.enable()}else if(s.getButtonState()===G.DISABLED_STATE){this.submitButton.disable()}}if(this.analytics&&t&&i){this.analytics.sendTabData(t,i)}}getSubSection(){const e=/analyticsLabel\[source]=(\w*)&/gm;const t=e.exec(decodeURI(window.location));if((t==null?void 0:t.length)>1){return t[1]}return null}activeMenuItem(e){(this.menuItems||[]).forEach((t=>{d.Dom.removeClass(t.parentElement,"ui-sidepanel-menu-active");if(t.getAttribute("data-action")===e){d.Dom.addClass(t.parentElement,"ui-sidepanel-menu-active")}}))}changeContent(e){if(!d.Type.isStringFilled(e)){return}if(e==="active-directory"){if(!this.activeDirectory){this.activeDirectory=new fi(this)}this.activeDirectory.showForm();this.analytics.sendTabData(this.getSubSection(),ee.TAB_AD);return}this.navigation.show(e)}createNavigation(){return new Y({container:this.pageContainer,first:this.firstInvitationBlock,pages:(new Ni).provide.call(this)})}onSendRequest(e){this.submitButton.disable();const t=e.getData();this.messageBar.hideAll();if(d.Type.isArray(t.errors)&&t.errors.length>0){this.submitButton.enable();this.submitButton.ready();this.messageBar.showError(t.errors[0]);return}t.userOptions=this.userOptions;t.analyticsData=this.analyticsLabel;t.data.analyticsData=this.analyticsLabel;this.transport.send(t).then((e=>{this.submitButton.ready();if(e.data){if((t==null?void 0:t.action)==="self"){this.messageBar.showSuccess(e.data);this.isSelfRegisterEnabled=t.data.allow_register==="Y";v.EventEmitter.emit(v.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Invitation:selfChange",{selfEnabled:this.isSelfRegisterEnabled})}else if(this.useLocalEmailProgram&&(t==null?void 0:t.action)==="invite"&&(t==null?void 0:t.type)==="invite-email"){v.EventEmitter.emit(v.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Invitation:InviteSuccess")}else{this.changeContent("success");this.submitButton.sendSuccessEvent(e.data)}v.EventEmitter.emit(v.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Invitation:onInviteRequestSuccess",{response:e})}v.EventEmitter.subscribe(v.EventEmitter.GLOBAL_TARGET,"SidePanel.Slider:onClose",(()=>{BX.SidePanel.Instance.postMessageTop(window,"BX.Bitrix24.EmailConfirmation:showPopup")}))}),(e=>{this.submitButton.enable();this.submitButton.ready();if(e.data==="user_limit"){B24.licenseInfoPopup.show("featureID",d.Loc.getMessage("BX24_INVITE_DIALOG_USERS_LIMIT_TITLE"),d.Loc.getMessage("BX24_INVITE_DIALOG_USERS_LIMIT_TEXT"))}else{this.messageBar.showError(e.errors[0].message)}if((t==null?void 0:t.action)==="invite"&&this.useLocalEmailProgram&&(t==null?void 0:t.type)==="invite-email"){v.EventEmitter.emit(v.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Invitation:InviteFailed")}}))}createDepartmentControl(){var e,t;const s=d.Type.isArray((e=this.userOptions)==null?void 0:e.departmentList)?this.userOptions.departmentList:[];const i=(t=this.userOptions)==null?void 0:t.rootDepartment;return new c({departmentList:s,rootDepartment:d.Type.isObject(i)?i:null})}createInputRowFactory(e=false){const t=e?P.PHONE:this.isInvitationBySmsAvailable?P.ALL:P.EMAIL;return new A({inputRowType:t})}getSetupArrow(){var e;this.body=document.querySelector(".invite-body");this.panelConfirmBtn=document.getElementById("intranet-invitation-btn");this.sliderContent=document.querySelector(".ui-page-slider-workarea");this.sliderHeader=document.querySelector(".ui-side-panel-wrap-title-wrap");this.buttonPanel=document.querySelector(".ui-button-panel");this.sliderHeaderHeight=(e=this.sliderHeader)==null?void 0:e.getBoundingClientRect().height;this.buttonPanelRect=this.buttonPanel.getBoundingClientRect();this.panelRect=this.panelConfirmBtn.getBoundingClientRect();this.btnWidth=Math.ceil(this.panelRect.width);this.arrowWidth=Math.ceil(this.arrowRect.width);this.sliderContentRect=this.sliderContent.getBoundingClientRect();this.bodyHeight=this.body.getBoundingClientRect().height-this.buttonPanelRect.height+this.sliderHeaderHeight;this.contentHeight=this.arrowHeight+this.sliderContentRect.height+this.buttonPanelRect.height+this.sliderHeaderHeight-65}updateArrow(){this.bodyHeight=this.body.getBoundingClientRect().height-this.buttonPanelRect.height+this.sliderHeaderHeight;this.contentHeight=this.arrowHeight+this.sliderContentRect.height+this.buttonPanelRect.height+this.sliderHeaderHeight-65;this.contentHeight>this.bodyHeight?d.Dom.addClass(this.body,"js-intranet-invitation-arrow-hide"):d.Dom.removeClass(this.body,"js-intranet-invitation-arrow-hide")}setSetupArrow(){this.getSetupArrow();const e=40;d.Dom.style(this.arrowBox,"left",`${this.panelRect.left+this.btnWidth/2-this.arrowWidth/2-e}px`);this.contentHeight>this.bodyHeight?d.Dom.addClass(this.body,"js-intranet-invitation-arrow-hide"):d.Dom.removeClass(this.body,"js-intranet-invitation-arrow-hide");d.Event.bind(window,"resize",(()=>{if(window.innerWidth<=1100){d.Dom.style(this.arrowBox,"left",`${this.panelRect.left+this.btnWidth/2-this.arrowWidth/2-e}px`)}this.getSetupArrow();this.updateArrow()}))}}function Di(){this.menuItems=Array.prototype.slice.call(this.menuContainer.querySelectorAll("a"));if(d.Type.isDomNode(this.subMenuContainer)){const e=Array.prototype.slice.call(this.subMenuContainer.querySelectorAll("a"));this.menuItems=[...this.menuItems,...e]}(this.menuItems||[]).forEach((e=>{d.Event.bind(e,"click",(()=>{this.changeContent(e.getAttribute("data-action"));this.activeMenuItem(this.navigation.getCurrentCode())}));if(e.getAttribute("data-action")===this.firstInvitationBlock){d.Dom.addClass(e.parentElement,"ui-sidepanel-menu-active")}else{d.Dom.removeClass(e.parentElement,"ui-sidepanel-menu-active")}}))}e.Form=Si;e.MassInvitationField=zs})(this.BX.Intranet.Invitation=this.BX.Intranet.Invitation||{},BX.UI.Analytics,BX,BX,BX.UI,BX.Main,BX.UI,BX.Intranet,BX.UI.EntitySelector,BX.Intranet,BX,BX.Event);
//# sourceMappingURL=script.map.js