this.BX=this.BX||{};this.BX.Intranet=this.BX.Intranet||{};(function(e,t,s,i,a,l,r,o,n,c,d){"use strict";let v=e=>e,b,p,u,h;var L=babelHelpers.classPrivateFieldLooseKey("tagSelector");var I=babelHelpers.classPrivateFieldLooseKey("rootDepartment");var P=babelHelpers.classPrivateFieldLooseKey("isRootItem");class _{constructor(e){Object.defineProperty(this,P,{value:g});Object.defineProperty(this,L,{writable:true,value:void 0});Object.defineProperty(this,I,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,I)[I]=c.Type.isNil(e==null?void 0:e.rootDepartment)?null:e==null?void 0:e.rootDepartment;let t=[];if(!c.Type.isNil(e==null?void 0:e.rootDepartment)){t=e.departmentList.map((e=>{const t=parseInt(e.id,10)===parseInt(babelHelpers.classPrivateFieldLooseBase(this,I)[I].id,10);const s=t?"/bitrix/js/humanresources/entity-selector/src/images/company.svg":"/bitrix/js/humanresources/entity-selector/src/images/department.svg";return{id:parseInt(e.id,10),entityId:"structure-node",title:e.name,customData:{accessCode:e.accessCode},avatar:s,tagOptions:{avatar:s,bgColor:t?"#f1fbd0":"#ade7e4",textColor:t?"#7fa800":"#207976",fontWeight:"700"}}}))}babelHelpers.classPrivateFieldLooseBase(this,L)[L]=new n.TagSelector({items:t,events:{onBeforeTagRemove:e=>{const t=e.getTarget();const{tag:s}=e.getData();if(t.getTags().length===1&&babelHelpers.classPrivateFieldLooseBase(this,P)[P](s)){e.preventDefault()}}},dialogOptions:{context:"INVITATION_STRUCTURE",width:350,enableSearch:true,multiple:true,entities:[{id:"structure-node",options:{selectMode:"departmentsOnly",restricted:"inviteUser"}}],events:{"Item:onBeforeDeselect":e=>{const t=e.getTarget();const s=t.getSelectedItems();if(s.length===1&&babelHelpers.classPrivateFieldLooseBase(this,P)[P](s[0])){e.preventDefault()}},"Item:onDeselect":t=>{const s=t.getTarget();const i=s.getSelectedItems();if(i.length<=0){const t=s.getItem(["structure-node",e==null?void 0:e.rootDepartment.id]);t==null?void 0:t.select()}}}}})}renderTo(e){c.Dom.append(this.render(),e)}getValues(){const e=babelHelpers.classPrivateFieldLooseBase(this,L)[L].getDialog().getSelectedItems();const t=[];e.forEach((e=>{const s=parseInt(e.id,10);if(s>0){t.push(s)}}));return t}render(){const e=c.Tag.render(b||(b=v`<label class="intranet-invitation__dialog-title">${0}</label>`),c.Loc.getMessage("INTRANET_INVITE_DIALOG_DEPARTMENT_CONTROL_LABEL"));const t=c.Tag.render(p||(p=v`<div class="intranet-invitation__dialog-description">${0}</div>`),c.Loc.getMessage("INTRANET_INVITE_DIALOG_DEPARTMENT_CONTROL_DESCRIPTION"));const s=c.Tag.render(u||(u=v`<div></div>`));babelHelpers.classPrivateFieldLooseBase(this,L)[L].renderTo(s);return c.Tag.render(h||(h=v`<div>${0}${0}${0}</div>`),e,t,s)}}function g(e){var t,s;const i=c.Type.isNil(e==null?void 0:e.id)?null:parseInt(e==null?void 0:e.id,10);const a=c.Type.isNil((t=babelHelpers.classPrivateFieldLooseBase(this,I)[I])==null?void 0:t.id)?null:parseInt((s=babelHelpers.classPrivateFieldLooseBase(this,I)[I])==null?void 0:s.id,10);return!c.Type.isNil(i)&&!c.Type.isNil(a)&&i===a}let T=e=>e,E;class m{constructor(){this.count=0;this.index=0;this.maxCount=5;this.inputStack=[]}renderPhoneRow(e){if(this.count>=this.maxCount){return}if(!c.Type.isDomNode(e)){return}const t=e.getAttribute("data-num");if(e.parentNode.querySelector(`#phone_number_${t}`)){return}const s=c.Tag.render(E||(E=T`
			<span style="z-index: 3;" class="ui-ctl-before" data-role="phone-block">
				<input type="hidden" name="PHONE_COUNTRY[]" id="phone_country_${0}" value="">
				<input type="hidden" name="PHONE[]" id="phone_number_${0}" value="">
				<div class="invite-dialog-phone-flag-block" data-role="flag">
					<span data-role="phone_flag_${0}" style="pointer-events: none;"></span>
				</div>
				<input class="invite-dialog-phone-input" type="hidden" id="phone_input_${0}" value="">&nbsp;
			</span>
		`),t,t,t,t);e.style.paddingLeft="57px";c.Dom.append(s,e.parentNode);const i=e.parentNode.querySelector("[data-role='flag']");if(c.Type.isDomNode(i)){c.Event.bind(e.parentNode.querySelector("[data-role='flag']"),"click",(()=>{this.showCountrySelector(t)}))}const a=function(e,t){return function(s){if(c.Type.isDomNode(t.parentNode)){t.parentNode.querySelector(`#phone_number_${e}`).value=s.value;t.parentNode.querySelector(`#phone_country_${e}`).value=s.country}}};this.inputStack[t]=new BX.PhoneNumber.Input({node:e,flagNode:e.parentNode.querySelector(`[data-role='phone_flag_${t}']`),flagSize:16,onChange:a(t,e)});const l=setInterval((()=>{var s,i;if(!((s=e.parentNode)!=null&&s.querySelector(`#phone_number_${t}`).value)||!((i=e.parentNode)!=null&&i.querySelector(`#phone_country_${t}`).value)){a(t,e)({value:this.inputStack[t].getValue(),country:this.inputStack[t].formatter?this.inputStack[t].getCountry():null})}else{clearInterval(l)}}),1e3)}showCountrySelector(e){this.inputStack[e]._onFlagClick()}}let y=e=>e,A,B;const N=Object.freeze({PHONE:"phone",EMAIL:"email",ALL:"all"});var F=babelHelpers.classPrivateFieldLooseKey("inputRowType");var f=babelHelpers.classPrivateFieldLooseKey("isPhoneEnabled");var H=babelHelpers.classPrivateFieldLooseKey("isEmailEnabled");var O=babelHelpers.classPrivateFieldLooseKey("checkPhoneInput");var D=babelHelpers.classPrivateFieldLooseKey("bindPhoneChecker");var S=babelHelpers.classPrivateFieldLooseKey("renderDefaultRow");var w=babelHelpers.classPrivateFieldLooseKey("getDialogInputMessage");class R{constructor(e){var t;Object.defineProperty(this,w,{value:V});Object.defineProperty(this,S,{value:j});Object.defineProperty(this,D,{value:M});Object.defineProperty(this,O,{value:C});Object.defineProperty(this,F,{writable:true,value:void 0});Object.defineProperty(this,f,{writable:true,value:void 0});Object.defineProperty(this,H,{writable:true,value:void 0});this.inputNum=0;babelHelpers.classPrivateFieldLooseBase(this,F)[F]=(t=e.inputRowType)!=null?t:N.ALL;babelHelpers.classPrivateFieldLooseBase(this,f)[f]=[N.ALL,N.PHONE].includes(babelHelpers.classPrivateFieldLooseBase(this,F)[F]);babelHelpers.classPrivateFieldLooseBase(this,H)[H]=[N.ALL,N.EMAIL].includes(babelHelpers.classPrivateFieldLooseBase(this,F)[F]);if(babelHelpers.classPrivateFieldLooseBase(this,f)[f]){this.phoneObj=new m}}bindCloseIcons(e){const t=Array.prototype.slice.call(e.querySelectorAll("input"));(t||[]).forEach((e=>{const t=e.nextElementSibling;c.Event.bind(e,"input",(()=>{c.Dom.style(t,"display",e.value===""?"none":"block")}));c.Event.bind(t,"click",(s=>{s.preventDefault();if(c.Type.isDomNode(e.parentNode)){babelHelpers.classPrivateFieldLooseBase(this,S)[S](e)}c.Dom.style(t,"display","none")}))}))}renderInputRowTo(e,t=false){const s=this.renderEmailInputsRow(t);c.Dom.append(s,e)}renderInputRowsTo(e,t=3){for(let s=0;s<t;s++){this.renderInputRowTo(e,s===0)}}renderEmailInputsRow(e){let t="";let s="";let i="";if(e){t=`\n\t\t\t\t<div class="invite-content__field-lable">\n\t\t\t\t\t${babelHelpers.classPrivateFieldLooseBase(this,w)[w]()}\n\t\t\t\t</div>\n\t\t\t`;s=`\n\t\t\t\t<div class="invite-content__field-lable">\n\t\t\t\t\t${c.Loc.getMessage("BX24_INVITE_DIALOG_ADD_NAME_TITLE")}\n\t\t\t\t</div>\n\t\t\t`;i=`\n\t\t\t\t<div class="invite-content__field-lable">\n\t\t\t\t\t${c.Loc.getMessage("BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE")}\n\t\t\t\t</div>\n\t\t\t`}const a=c.Tag.render(A||(A=y`
			<div class="invite-form-row js-form-row">
				<div class="invite-form-col">
					${0}
					<div class="ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon">
						<input 
							name="EMAIL[]" 
							type="text" 
							maxlength="50"
							data-num="${0}" 
							class="ui-ctl-element js-email-phone-input" 
							placeholder="${0}"
						/>
						<button type="button" class="ui-ctl-after ui-ctl-icon-clear" style="display: none"></button>
					</div>
				</div>
				<div class="invite-form-col">
					${0}
					<div class="ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon">
						<input name="NAME[]" type="text" class="ui-ctl-element js-email-name-input" placeholder="${0}">
						<button type="button" class="ui-ctl-after ui-ctl-icon-clear" style="display: none"></button>
					</div>
				</div>
				<div class="invite-form-col">
					${0}
					<div class="ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon">
						<input name="LAST_NAME[]" type="text" class="ui-ctl-element js-email-last-name-input" placeholder="${0}">
						<button type="button" class="ui-ctl-after ui-ctl-icon-clear" style="display: none"></button>
					</div>
				</div>
			</div>
		`),e?t:"",this.inputNum++,babelHelpers.classPrivateFieldLooseBase(this,w)[w](),e?s:"",c.Loc.getMessage("BX24_INVITE_DIALOG_ADD_NAME_TITLE"),e?i:"",c.Loc.getMessage("BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE"));this.bindCloseIcons(a);babelHelpers.classPrivateFieldLooseBase(this,D)[D](a);return a}parseEmailAndPhone(e){if(!c.Type.isDomNode(e)){return}const t=[];const s=[];const i=/^[\d+][\d ()-]{4,22}\d$/;const a=Array.prototype.slice.call(e.querySelectorAll(".js-form-row"));(a||[]).forEach((e=>{const a=e.querySelector("input[name='EMAIL[]']");const l=e.querySelector("input[name='PHONE[]']");const r=e.querySelector("input[name='NAME[]']");const o=e.querySelector("input[name='LAST_NAME[]']");const n=a.value.trim();if(babelHelpers.classPrivateFieldLooseBase(this,f)[f]&&c.Type.isDomNode(l)){const a=l.value.trim();if(a){if(i.test(String(a).toLowerCase())){const t=e.querySelector("input[name='PHONE_COUNTRY[]']");s.push({PHONE:a,PHONE_COUNTRY:t.value.trim(),NAME:r.value,LAST_NAME:o.value})}else{t.push(a)}}}else if(babelHelpers.classPrivateFieldLooseBase(this,H)[H]&&n){if(c.Validation.isEmail(n)){s.push({EMAIL:n,NAME:r.value,LAST_NAME:o.value})}else{t.push(n)}}else if(babelHelpers.classPrivateFieldLooseBase(this,f)[f]&&!babelHelpers.classPrivateFieldLooseBase(this,H)[H]&&n){t.push(n)}}));return[s,t]}}function C(e){const t=/^[\d+][\d ()-]{2,14}\d$/;if(e.value&&t.test(String(e.value).toLowerCase())){this.phoneObj.renderPhoneRow(e)}else if(e.value.length===0){var s;(s=babelHelpers.classPrivateFieldLooseBase(this,S)[S](e))==null?void 0:s.focus()}}function M(e){if(babelHelpers.classPrivateFieldLooseBase(this,f)[f]&&c.Type.isDomNode(e)){const t=Array.prototype.slice.call(e.querySelectorAll(".js-email-phone-input"));if(t){t.forEach((e=>{c.Event.bind(e,"input",(()=>{babelHelpers.classPrivateFieldLooseBase(this,O)[O](e)}))}))}}}function j(e){const t=e.parentNode.querySelector('[data-role="phone-block"]');if(c.Type.isDomNode(t)){c.Dom.remove(t)}const s=e.parentNode.querySelector("input.ui-ctl-element");if(c.Type.isDomNode(s)){const t=c.Tag.render(B||(B=y`
				<input
					name="${0}"
					type="text"
					maxlength="50"
					data-num="${0}"
					class="ui-ctl-element js-email-phone-input"
					placeholder="${0}"
				/>
			`),s.name,e.getAttribute("data-num"),s.placeholder);c.Dom.replace(s,t);this.bindCloseIcons(t.parentNode);babelHelpers.classPrivateFieldLooseBase(this,D)[D](t.parentNode);c.Dom.remove(s);return t}return s}function V(){if(babelHelpers.classPrivateFieldLooseBase(this,f)[f]&&babelHelpers.classPrivateFieldLooseBase(this,H)[H]){return c.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_INPUT")}else if(babelHelpers.classPrivateFieldLooseBase(this,f)[f]){return c.Loc.getMessage("INTRANET_INVITE_DIALOG_PHONE_INPUT")}else{return c.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_INPUT")}}let G=e=>e,x;var k=babelHelpers.classPrivateFieldLooseKey("errorContainer");var K=babelHelpers.classPrivateFieldLooseKey("successContainer");var X=babelHelpers.classPrivateFieldLooseKey("wrapMessage");class ${constructor(e){Object.defineProperty(this,X,{value:U});Object.defineProperty(this,k,{writable:true,value:void 0});Object.defineProperty(this,K,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,k)[k]=c.Type.isDomNode(e.errorContainer)?e.errorContainer:null;babelHelpers.classPrivateFieldLooseBase(this,K)[K]=c.Type.isDomNode(e.successContainer)?e.successContainer:null;this.hideAll()}showError(e){if(!babelHelpers.classPrivateFieldLooseBase(this,k)[k]||!c.Type.isStringFilled(e)){return}c.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,k)[k]);c.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,k)[k],"display","block");c.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,X)[X](e),babelHelpers.classPrivateFieldLooseBase(this,k)[k])}showSuccess(e){if(!babelHelpers.classPrivateFieldLooseBase(this,K)[K]||!c.Type.isStringFilled(e)){return}c.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,K)[K]);c.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,K)[K],"display","block");c.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,X)[X](e),babelHelpers.classPrivateFieldLooseBase(this,K)[K])}hideAll(){if(babelHelpers.classPrivateFieldLooseBase(this,k)[k]){c.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,k)[k],"display","none");c.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,k)[k])}if(babelHelpers.classPrivateFieldLooseBase(this,K)[K]){c.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,K)[K],"display","none");c.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,K)[K])}}}function U(e){return c.Tag.render(x||(x=G`<span class="ui-alert-message">${0}</span>`),BX.util.htmlspecialchars(e))}var q=babelHelpers.classPrivateFieldLooseKey("container");var Y=babelHelpers.classPrivateFieldLooseKey("disableSubmitButton");class W extends d.EventEmitter{constructor(e){var t;super();Object.defineProperty(this,Y,{value:z});Object.defineProperty(this,q,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,q)[q]=e.node;this.setEventNamespace("BX.Intranet.Invitation.Submit");c.Event.unbindAll(babelHelpers.classPrivateFieldLooseBase(this,q)[q]);if(c.Type.isFunction((t=e.events)==null?void 0:t.click)){c.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,q)[q],"click",e.events.click)}}wait(){babelHelpers.classPrivateFieldLooseBase(this,Y)[Y](true)}isWaiting(){return c.Dom.hasClass(babelHelpers.classPrivateFieldLooseBase(this,q)[q],"ui-btn-wait")}ready(){babelHelpers.classPrivateFieldLooseBase(this,Y)[Y](false)}disable(){c.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,q)[q],"ui-btn-disabled")}enable(){c.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,q)[q],"ui-btn-disabled")}isEnabled(){return!c.Dom.hasClass(babelHelpers.classPrivateFieldLooseBase(this,q)[q],"ui-btn-disabled")}setLabel(e){babelHelpers.classPrivateFieldLooseBase(this,q)[q].innerText=e}sendSuccessEvent(e){BX.SidePanel.Instance.postMessageAll(window,"BX.Intranet.Invitation:onAdd",{users:e})}}function z(e){if(!c.Type.isDomNode(babelHelpers.classPrivateFieldLooseBase(this,q)[q])||!c.Type.isBoolean(e)){return}if(e){c.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,q)[q],["ui-btn-wait","invite-cursor-auto"])}else{c.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,q)[q],["ui-btn-wait","invite-cursor-auto"])}}W.ENABLED_STATE="enabled";W.DISABLED_STATE="disabled";class J{constructor(){d.EventEmitter.subscribe(this,"BX.Intranet.Invitation:submit",this.onSubmit.bind(this))}render(){return new HTMLElement}onSubmit(e){}getSubmitButtonText(){return null}getButtonState(){return W.ENABLED_STATE}}var Q=babelHelpers.classPrivateFieldLooseKey("pages");var Z=babelHelpers.classPrivateFieldLooseKey("container");var ee=babelHelpers.classPrivateFieldLooseKey("first");var te=babelHelpers.classPrivateFieldLooseKey("current");var se=babelHelpers.classPrivateFieldLooseKey("history");class ie extends d.EventEmitter{constructor(e){super();Object.defineProperty(this,Q,{writable:true,value:void 0});Object.defineProperty(this,Z,{writable:true,value:void 0});Object.defineProperty(this,ee,{writable:true,value:void 0});Object.defineProperty(this,te,{writable:true,value:void 0});Object.defineProperty(this,se,{writable:true,value:[]});this.setEventNamespace("BX.Intranet.Navigation");babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]=c.Type.isDomNode(e.container)?e.container:null;if(c.Type.isMap(e.pages)){babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]=new Map([...e.pages].filter((([e,t])=>t instanceof J)))}else{babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]=new Map}babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]=c.Type.isStringFilled(e.first)&&this.has(e.first)?e.first:babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].next().value}show(e){if(!babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]||!this.has(e)){return}const t=this.get(e);this.emit("onBeforeChangePage",{current:this.current(),new:t});c.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]);c.Dom.append(t.render(),babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]);if(babelHelpers.classPrivateFieldLooseBase(this,te)[te]){babelHelpers.classPrivateFieldLooseBase(this,se)[se].push(babelHelpers.classPrivateFieldLooseBase(this,te)[te])}babelHelpers.classPrivateFieldLooseBase(this,te)[te]=e;this.emit("onAfterChangePage",{current:this.current(),previous:this.prev()})}showFirst(){this.show(babelHelpers.classPrivateFieldLooseBase(this,ee)[ee])}get(e){return babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].get(e)}has(e){return babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].has(e)}current(){return this.get(babelHelpers.classPrivateFieldLooseBase(this,te)[te])}getCurrentCode(){return babelHelpers.classPrivateFieldLooseBase(this,te)[te]}prev(){if(babelHelpers.classPrivateFieldLooseBase(this,se)[se].length>0){const e=babelHelpers.classPrivateFieldLooseBase(this,se)[se][babelHelpers.classPrivateFieldLooseBase(this,se)[se].length-1];return this.get(e)}return null}add(e,t){if(t instanceof J){babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].set(e,t)}}delete(e){babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].delete(e)}}var ae=babelHelpers.classPrivateFieldLooseKey("cSection");var le=babelHelpers.classPrivateFieldLooseKey("isAdmin");var re=babelHelpers.classPrivateFieldLooseKey("getAdminAllowMode");var oe=babelHelpers.classPrivateFieldLooseKey("getIsAdmin");var ne=babelHelpers.classPrivateFieldLooseKey("getCSection");class ce{constructor(e,t){Object.defineProperty(this,ne,{value:be});Object.defineProperty(this,oe,{value:ve});Object.defineProperty(this,re,{value:de});Object.defineProperty(this,ae,{writable:true,value:void 0});Object.defineProperty(this,le,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]=e;babelHelpers.classPrivateFieldLooseBase(this,le)[le]=t}send(){t.sendData({tool:ce.TOOLS,category:ce.CATEGORY_INVITATION,event:ce.EVENT_COPY,c_section:babelHelpers.classPrivateFieldLooseBase(this,ne)[ne](),p1:babelHelpers.classPrivateFieldLooseBase(this,oe)[oe](),p2:babelHelpers.classPrivateFieldLooseBase(this,re)[re]()})}sendTabData(e,s){if(!e){return}t.sendData({tool:ce.TOOLS,category:ce.CATEGORY_INVITATION,event:ce.EVENT_TAB_VIEW,c_section:e,c_sub_section:s})}sendOpenSliderData(e){t.sendData({tool:ce.TOOLS,category:ce.CATEGORY_INVITATION,event:ce.EVENT_OPEN_SLIDER_INVITATION,c_section:e})}sendOpenLocalEmailPopup(){t.sendData({tool:ce.TOOLS,category:ce.CATEGORY_INVITATION,event:ce.EVENT_TAB_VIEW,c_sub_section:ce.TAB_EMAIL})}sendLocalEmailProgram(){t.sendData({tool:ce.TOOLS,category:ce.CATEGORY_INVITATION,event:ce.EVENT_LOCAL_MAIL})}}function de(){return document.querySelector("#allow_register_confirm").checked?ce.ADMIN_ALLOW_MODE_Y:ce.ADMIN_ALLOW_MODE_N}function ve(){return babelHelpers.classPrivateFieldLooseBase(this,le)[le]?ce.IS_ADMIN_Y:ce.IS_ADMIN_N}function be(){return babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].source}ce.TOOLS="Invitation";ce.TOOLS_HEADER="headerPopup";ce.EVENT_OPEN_SLIDER_INVITATION="drawer_open";ce.CATEGORY_INVITATION="invitation";ce.EVENT_COPY="copy_invitation_link";ce.ADMIN_ALLOW_MODE_Y="askAdminToAllow_Y";ce.ADMIN_ALLOW_MODE_N="askAdminToAllow_N";ce.IS_ADMIN_Y="isAdmin_Y";ce.IS_ADMIN_N="isAdmin_N";ce.EVENT_TAB_VIEW="tab_view";ce.EVENT_LOCAL_MAIL="invitation_local_mail";ce.TAB_EMAIL="tab_by_email";ce.TAB_MASS="tab_mass";ce.TAB_DEPARTMENT="tab_department";ce.TAB_INTEGRATOR="tab_integrator";ce.TAB_LINK="by_link";ce.TAB_REGISTRATION="registration";ce.TAB_EXTRANET="extranet";ce.TAB_AD="AD";ce.TAB_LOCAL_EMAIL="tab_by_local_email";ce.TAB_PHONE="tab_by_phone";var pe=babelHelpers.classPrivateFieldLooseKey("componentName");var ue=babelHelpers.classPrivateFieldLooseKey("signedParameters");class he{constructor(e){Object.defineProperty(this,pe,{writable:true,value:void 0});Object.defineProperty(this,ue,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]=e.componentName;babelHelpers.classPrivateFieldLooseBase(this,ue)[ue]=e.signedParameters}send(e){return BX.ajax.runComponentAction(babelHelpers.classPrivateFieldLooseBase(this,pe)[pe],e.action,{signedParameters:babelHelpers.classPrivateFieldLooseBase(this,ue)[ue],mode:c.Type.isStringFilled(e.mode)?e.mode:"ajax",method:c.Type.isStringFilled(e.method)?e.method:"post",data:e.data,analyticsLabel:e.analyticsLabel})}}let Le=e=>e,Ie;var Pe=babelHelpers.classPrivateFieldLooseKey("input");class _e{constructor(){Object.defineProperty(this,Pe,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe]=new o.InvitationInput({inputType:o.InvitationInputType.EMAIL});babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe].getTagSelector().setPlaceholder(c.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_EMAIL_PLACEHOLDER"));Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe].getTagSelector().getContainer(),"click",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe].getTagSelector().focusTextBox()}));d.EventEmitter.subscribe("BX.Intranet.Invitation:InviteSuccess",(()=>{this.clearTags()}))}onReadySaveInputHandler(e){babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe].unsubscribe("onReadySave",e);babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe].subscribe("onReadySave",e)}onUnreadySaveInputHandler(e){babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe].unsubscribe("onUnreadySave",e);babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe].subscribe("onUnreadySave",e)}getContent(e=null){this.clearTags();return c.Tag.render(Ie||(Ie=Le`
			<div class="email-popup-container">
				<div class="email-popup-container__title">
					${0}
				</div>
				<div class="email-popup-container__description">
					${0}
				</div>
				<div class="email-popup-container__input">
					${0}
				</div>
				${0}
			</div>
		`),c.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_EMAIL_TITLE"),c.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_EMAIL_DESCRIPTION"),babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe].render(),e!=null?e:"")}clearTags(){babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe].getTagSelector().removeTags()}getValues(){const e=babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe].getTagSelector();const t=e.getTags();const s=[];const i=[];t.forEach((e=>{if(e.getEntityType()==="email"){s.push({EMAIL:e.getTitle()})}else{i.push(e.getTitle())}}));return{emails:s,errorElements:i}}}let ge=e=>e,Te;var Ee=babelHelpers.classPrivateFieldLooseKey("sendButton");var me=babelHelpers.classPrivateFieldLooseKey("popup");var ye=babelHelpers.classPrivateFieldLooseKey("input");var Ae=babelHelpers.classPrivateFieldLooseKey("actionContent");var Be=babelHelpers.classPrivateFieldLooseKey("getActionContent");var Ne=babelHelpers.classPrivateFieldLooseKey("getSendButton");var Fe=babelHelpers.classPrivateFieldLooseKey("getCancelButton");class fe{constructor(e){Object.defineProperty(this,Fe,{value:De});Object.defineProperty(this,Ne,{value:Oe});Object.defineProperty(this,Be,{value:He});Object.defineProperty(this,Ee,{writable:true,value:void 0});Object.defineProperty(this,me,{writable:true,value:null});Object.defineProperty(this,ye,{writable:true,value:null});Object.defineProperty(this,Ae,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]=e;babelHelpers.classPrivateFieldLooseBase(this,ye)[ye].onReadySaveInputHandler(this.onReadySaveInputHandler.bind(this));babelHelpers.classPrivateFieldLooseBase(this,ye)[ye].onUnreadySaveInputHandler(this.onUnreadySaveInputHandler.bind(this));d.EventEmitter.subscribe("BX.Intranet.Invitation:InviteSuccess",(()=>{var e;(e=babelHelpers.classPrivateFieldLooseBase(this,me)[me])==null?void 0:e.close();this.onReadySaveInputHandler();d.EventEmitter.emit("BX.Intranet.Invitation:onSubmitReady");d.EventEmitter.emit("BX.Intranet.Invitation:onChangeForm")}));d.EventEmitter.subscribe("BX.Intranet.Invitation:InviteFailed",(()=>{this.onReadySaveInputHandler()}))}show(){if(!babelHelpers.classPrivateFieldLooseBase(this,me)[me]){babelHelpers.classPrivateFieldLooseBase(this,me)[me]=l.PopupManager.create({id:"email-invitation-email",className:"email-invitation-container",closeIcon:true,autoHide:false,closeByEsc:true,width:515,height:310})}babelHelpers.classPrivateFieldLooseBase(this,me)[me].setContent(babelHelpers.classPrivateFieldLooseBase(this,ye)[ye].getContent(babelHelpers.classPrivateFieldLooseBase(this,Be)[Be]()));babelHelpers.classPrivateFieldLooseBase(this,ye)[ye].clearTags();babelHelpers.classPrivateFieldLooseBase(this,me)[me].show()}onReadySaveInputHandler(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee])==null?void 0:e.setState(null)}onUnreadySaveInputHandler(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee])==null?void 0:e.setState(a.ButtonState.DISABLED)}submitData(){this.onUnreadySaveInputHandler();d.EventEmitter.emit("BX.Intranet.Invitation.EmailPopup:onSubmit")}}function He(){if(!babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae]){babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae]=c.Tag.render(Te||(Te=ge`
				<div class="email-popup-container__action">
					${0}
					${0}
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne](),babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe]())}return babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae]}function Oe(){babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee]=new a.Button({className:"email-popup-container__action-send",text:c.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_EMAIL_ACTION_SEND"),state:a.ButtonState.DISABLED,size:a.Button.Size.SMALL,color:a.Button.Color.PRIMARY,noCaps:true,onclick:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee].isDisabled()){return}this.submitData()}});return babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee].render()}function De(){return new a.CancelButton({text:c.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_EMAIL_ACTION_CANCEL"),size:a.Button.Size.SMALL,onclick:()=>babelHelpers.classPrivateFieldLooseBase(this,me)[me].close(),noCaps:true}).render()}let Se=e=>e,we;var Re=babelHelpers.classPrivateFieldLooseKey("departmentControl");var Ce=babelHelpers.classPrivateFieldLooseKey("linkRegisterEnabled");var Me=babelHelpers.classPrivateFieldLooseKey("transport");var je=babelHelpers.classPrivateFieldLooseKey("input");var Ve=babelHelpers.classPrivateFieldLooseKey("analytics");var Ge=babelHelpers.classPrivateFieldLooseKey("onSubmitWithLocalEmailProgram");var xe=babelHelpers.classPrivateFieldLooseKey("openLocalMailProgram");var ke=babelHelpers.classPrivateFieldLooseKey("onSubmitWithMailService");var Ke=babelHelpers.classPrivateFieldLooseKey("showNotification");var Xe=babelHelpers.classPrivateFieldLooseKey("getNotificationContent");var $e=babelHelpers.classPrivateFieldLooseKey("openInvitationPageWithFilter");class Ue{constructor(e,t){Object.defineProperty(this,$e,{value:Qe});Object.defineProperty(this,Xe,{value:Je});Object.defineProperty(this,Ke,{value:ze});Object.defineProperty(this,ke,{value:We});Object.defineProperty(this,xe,{value:Ye});Object.defineProperty(this,Ge,{value:qe});Object.defineProperty(this,Re,{writable:true,value:void 0});Object.defineProperty(this,Ce,{writable:true,value:void 0});Object.defineProperty(this,Me,{writable:true,value:null});Object.defineProperty(this,je,{writable:true,value:null});Object.defineProperty(this,Ve,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,Me)[Me]=e.transport;babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce]=e.linkRegisterEnabled;babelHelpers.classPrivateFieldLooseBase(this,Re)[Re]=e.departmentControl instanceof _?e.departmentControl:null;babelHelpers.classPrivateFieldLooseBase(this,je)[je]=t;babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve]=e.analytics;d.EventEmitter.subscribe("BX.Intranet.Invitation:selfChange",(e=>{babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce]=e.getData().selfEnabled}));d.EventEmitter.subscribe("BX.Intranet.Invitation:InviteSuccess",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Ke)[Ke](true)}));d.EventEmitter.subscribe("BX.Intranet.Invitation:InviteFailed",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Ke)[Ke](false)}));d.EventEmitter.subscribe("BX.Intranet.Invitation.EmailPopup:onSubmit",babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].bind(this))}onSubmit(){if(babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce]){babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge]()}else{babelHelpers.classPrivateFieldLooseBase(this,ke)[ke]()}}}function qe(){const e=babelHelpers.classPrivateFieldLooseBase(this,Re)[Re].getValues();babelHelpers.classPrivateFieldLooseBase(this,Me)[Me].send({action:"getInviteLink",data:{departmentsId:e}}).then((e=>{var t;d.EventEmitter.emit("BX.Intranet.Invitation:onSubmitReady");d.EventEmitter.emit("BX.Intranet.Invitation:onChangeForm");const s=(t=e.data)==null?void 0:t.invitationLink;if(c.Type.isStringFilled(s)){babelHelpers.classPrivateFieldLooseBase(this,xe)[xe](s)}}),(e=>{d.EventEmitter.emit("BX.Intranet.Invitation:onSubmitReady");d.EventEmitter.emit("BX.Intranet.Invitation:onChangeForm")}))}function Ye(e){babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve].sendLocalEmailProgram();const t=`subject=${encodeURIComponent(c.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_EMAIL_SUBJECT"))}`;const s=`body=${encodeURIComponent(c.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_EMAIL_BODY"))} ${e}`;window.location=`mailto:?${t}&${s}`}function We(){const{emails:e,errorElements:t}=babelHelpers.classPrivateFieldLooseBase(this,je)[je].getValues();const s=[];if(e.length<=0){s.push(c.Loc.getMessage("INTRANET_INVITE_DIALOG_EMPTY_ERROR_EMAIL"))}if(t.length>0){s.push(c.Loc.getMessage("INTRANET_INVITE_DIALOG_VALIDATE_ERROR_EMAIL"))}if(s.length>0){d.EventEmitter.emit(window.invitationForm,"BX.Intranet.Invitation:onSendData",{errors:s});return}const i={invitations:e,departmentIds:babelHelpers.classPrivateFieldLooseBase(this,Re)[Re].getValues(),tab:"email"};const a={INVITATION_TYPE:"invite",INVITATION_COUNT:e.length};d.EventEmitter.emit(window.invitationForm,"BX.Intranet.Invitation:onSendData",{action:"invite",type:"invite-email",data:i,analyticsLabel:a})}function ze(e){const t={id:"invite-notification-result",closeButton:true,autoHideDelay:4e3,autoHide:true,content:babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe](e)};const s=BX.UI.Notification.Center.notify(t);s.show();s.activateAutoHide()}function Je(e){const t=e?c.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_SUCCESS_TITLE"):c.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_FAILED_TITLE");const s=e?c.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_SUCCESS_DESCRIPTION",{"[LINK]":'<a class="intranet-invitation-dialog-link">',"[/LINK]":"</a>"}):c.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_POPUP_FAILED_DESCRIPTION");const i=c.Tag.render(we||(we=Se`
			<div class="invite-email-notification">
				<div class="invite-email-notification__title">
					${0}
				</div>
				<div class="invite-email-notification__description">
					${0}
				</div>
			</div>
		`),t,s);const a=i.querySelector(".intranet-invitation-dialog-link");if(c.Type.isDomNode(a)){c.Event.unbindAll(a);c.Event.bind(a,"click",babelHelpers.classPrivateFieldLooseBase(this,$e)[$e].bind(this))}return i}function Qe(){window.top.location="/company/?apply_filter=Y&INVITED=Y"}let Ze=e=>e,et,tt,st,it,at,lt;var rt=babelHelpers.classPrivateFieldLooseKey("container");var ot=babelHelpers.classPrivateFieldLooseKey("departmentControl");var nt=babelHelpers.classPrivateFieldLooseKey("inviteEmailPopup");var ct=babelHelpers.classPrivateFieldLooseKey("linkRegisterEnabled");var dt=babelHelpers.classPrivateFieldLooseKey("input");var vt=babelHelpers.classPrivateFieldLooseKey("process");var bt=babelHelpers.classPrivateFieldLooseKey("analytics");var pt=babelHelpers.classPrivateFieldLooseKey("titleRender");var ut=babelHelpers.classPrivateFieldLooseKey("renderForm");var ht=babelHelpers.classPrivateFieldLooseKey("getNotifyBlock");var Lt=babelHelpers.classPrivateFieldLooseKey("getDepartmentBlock");var It=babelHelpers.classPrivateFieldLooseKey("getMailServiceBlock");var Pt=babelHelpers.classPrivateFieldLooseKey("openEmailInputPopup");class _t extends J{constructor(e){super();Object.defineProperty(this,Pt,{value:At});Object.defineProperty(this,It,{value:yt});Object.defineProperty(this,Lt,{value:mt});Object.defineProperty(this,ht,{value:Et});Object.defineProperty(this,ut,{value:Tt});Object.defineProperty(this,pt,{value:gt});Object.defineProperty(this,rt,{writable:true,value:void 0});Object.defineProperty(this,ot,{writable:true,value:void 0});Object.defineProperty(this,nt,{writable:true,value:null});Object.defineProperty(this,ct,{writable:true,value:void 0});Object.defineProperty(this,dt,{writable:true,value:null});Object.defineProperty(this,vt,{writable:true,value:null});Object.defineProperty(this,bt,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,ct)[ct]=e.linkRegisterEnabled;babelHelpers.classPrivateFieldLooseBase(this,ot)[ot]=e.departmentControl instanceof _?e.departmentControl:null;babelHelpers.classPrivateFieldLooseBase(this,bt)[bt]=e.analytics;babelHelpers.classPrivateFieldLooseBase(this,dt)[dt]=new _e;babelHelpers.classPrivateFieldLooseBase(this,vt)[vt]=new Ue(e,babelHelpers.classPrivateFieldLooseBase(this,dt)[dt]);d.EventEmitter.subscribe("BX.Intranet.Invitation:selfChange",(e=>{babelHelpers.classPrivateFieldLooseBase(this,ct)[ct]=e.getData().selfEnabled}))}render(){if(babelHelpers.classPrivateFieldLooseBase(this,rt)[rt]){return babelHelpers.classPrivateFieldLooseBase(this,rt)[rt]}return c.Tag.render(et||(et=Ze`
			<div class="invite-wrap js-intranet-invitation-block" data-role="invite-block">
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,pt)[pt](),babelHelpers.classPrivateFieldLooseBase(this,ut)[ut]())}onReadySaveInputHandler(){d.EventEmitter.emit("BX.Intranet.Invitation:onSubmitReady");d.EventEmitter.emit("BX.Intranet.Invitation:onChangeForm")}onUnreadySaveInputHandler(){d.EventEmitter.emit("BX.Intranet.Invitation:onSubmitDisabled")}onSubmit(e){babelHelpers.classPrivateFieldLooseBase(this,vt)[vt].onSubmit()}getAnalyticTab(){return ce.TAB_LOCAL_EMAIL}getSubmitButtonText(){return c.Loc.getMessage("BX24_INVITE_DIALOG_ACTION_INVITE")}}function gt(){return c.Tag.render(tt||(tt=Ze`
			<div class="invite-title-container">
				<div class="invite-title-icon invite-title-icon-message">
					<div class="ui-icon-set --person-letter"></div>
				</div>
				<div class="invite-title-text">
					${0}
				</div>
			</div>
		`),c.Loc.getMessage("INTRANET_INVITE_DIALOG_TITLE_EMAIL_MSGVER_1"))}function Tt(){let e=null;if(babelHelpers.classPrivateFieldLooseBase(this,ct)[ct]){e=babelHelpers.classPrivateFieldLooseBase(this,ht)[ht]()}else{e=babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].getContent();babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].onReadySaveInputHandler(this.onReadySaveInputHandler);babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].onUnreadySaveInputHandler(this.onUnreadySaveInputHandler)}return c.Tag.render(st||(st=Ze`
			<div class="invite-content-container">
				${0}
				${0}
				${0}
			</div>
		`),e,babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt](),babelHelpers.classPrivateFieldLooseBase(this,ct)[ct]&&babelHelpers.classPrivateFieldLooseBase(this,It)[It]())}function Et(){return c.Tag.render(it||(it=Ze`
			<div class="invite-content-notify">
				<div class="invite-content-notify-wrapper">
					<div class="invite-content-notify__image"></div>
				</div>
				<div class="invite-content-notify-content">
					<div class="invite-content-notify-content__description"> 
						${0}
					</div>
					<div class="invite-content-notify-content__step">
						${0}
					</div>
				</div>
			</div>
		`),c.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_MAIL_CONTENT_DESCRIPTION"),c.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_MAIL_CONTENT_STEPS"))}function mt(){return c.Tag.render(at||(at=Ze`
			<div class="invite-content-department">
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,ot)[ot].render())}function yt(){const e=c.Loc.getMessage("INTRANET_INVITE_DIALOG_LOCAL_MAIL_SERVICE",{"[LINK]":'<a class="invite-content-mail-service__link">',"[/LINK]":"</a>"});const t=c.Tag.render(lt||(lt=Ze`
			<div class="invite-content-mail-service">
				${0}
			</div>
		`),e);const s=t.querySelector(".invite-content-mail-service__link");if(c.Type.isDomNode(s)){c.Event.unbindAll(s);c.Event.bind(s,"click",babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt].bind(this))}return t}function At(){if(!babelHelpers.classPrivateFieldLooseBase(this,nt)[nt]){babelHelpers.classPrivateFieldLooseBase(this,nt)[nt]=new fe(babelHelpers.classPrivateFieldLooseBase(this,dt)[dt])}babelHelpers.classPrivateFieldLooseBase(this,bt)[bt].sendOpenLocalEmailPopup();babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].show()}var Bt=babelHelpers.classPrivateFieldLooseKey("prepareOptions");class Nt{constructor(e){Object.defineProperty(this,Bt,{value:Ft});this.options=e.options;this.entities=[];babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt]()}renderTo(e){this.tagSelector=this.renderTagSelector();if(c.Type.isDomNode(e)){this.tagSelector.renderTo(e)}}renderTagSelector(){var e;const t=[];if(((e=this.options)==null?void 0:e.projectId)>0){t.push(["project",this.options.projectId])}return new n.TagSelector({dialogOptions:{preselectedItems:t,entities:this.entities,context:"INTRANET_INVITATION"}})}getItems(){let e=[];let t=[];const s=this.tagSelector.getDialog().getSelectedItems();s.forEach((s=>{const i=parseInt(s.getId());const a=s.getEntityId();if(a==="department"){e.push(i)}else if(a==="project"){t.push(i)}}));return{departments:e,projects:t}}}function Ft(){for(const t in this.options){if(!this.options.hasOwnProperty(t)){continue}if(t==="project"&&!!this.options[t]){var e;const s={fillRecentTab:true,"!type":["collab"],createProjectLink:(e=this.options.showCreateButton)!=null?e:true};if(Object.prototype.hasOwnProperty.call(this.options,"projectLimitExceeded")&&Object.prototype.hasOwnProperty.call(this.options,"projectLimitFeatureId")){s.lockProjectLink=this.options.projectLimitExceeded;s.lockProjectLinkFeatureId=this.options.projectLimitFeatureId}const i={id:"project",options:s};if(this.options[t]==="extranet"){i["options"]["extranet"]=true}this.entities.push(i)}}}let ft=e=>e,Ht,Ot,Dt;var St=babelHelpers.classPrivateFieldLooseKey("container");var wt=babelHelpers.classPrivateFieldLooseKey("inputsFactory");var Rt=babelHelpers.classPrivateFieldLooseKey("smsAvailable");var Ct=babelHelpers.classPrivateFieldLooseKey("useOnlyPhone");var Mt=babelHelpers.classPrivateFieldLooseKey("onClickSwitchMode");var jt=babelHelpers.classPrivateFieldLooseKey("onClickAddInputRow");var Vt=babelHelpers.classPrivateFieldLooseKey("departmentControl");var Gt=babelHelpers.classPrivateFieldLooseKey("titleRender");var xt=babelHelpers.classPrivateFieldLooseKey("renderForm");var kt=babelHelpers.classPrivateFieldLooseKey("getValidateError");var Kt=babelHelpers.classPrivateFieldLooseKey("getEmptyError");class Xt extends J{constructor(e){super();Object.defineProperty(this,Kt,{value:Yt});Object.defineProperty(this,kt,{value:qt});Object.defineProperty(this,xt,{value:Ut});Object.defineProperty(this,Gt,{value:$t});Object.defineProperty(this,St,{writable:true,value:void 0});Object.defineProperty(this,wt,{writable:true,value:void 0});Object.defineProperty(this,Rt,{writable:true,value:void 0});Object.defineProperty(this,Ct,{writable:true,value:void 0});Object.defineProperty(this,Mt,{writable:true,value:void 0});Object.defineProperty(this,jt,{writable:true,value:void 0});Object.defineProperty(this,Vt,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,wt)[wt]=e.inputsFactory instanceof R?e.inputsFactory:null;babelHelpers.classPrivateFieldLooseBase(this,Rt)[Rt]=e.smsAvailable===true;babelHelpers.classPrivateFieldLooseBase(this,Ct)[Ct]=e.useLocalEmailProgram===true;babelHelpers.classPrivateFieldLooseBase(this,Mt)[Mt]=c.Type.isFunction(e.onClickSwitchMode)?e.onClickSwitchMode:null;babelHelpers.classPrivateFieldLooseBase(this,jt)[jt]=c.Type.isFunction(e.onClickAddInputRow)?e.onClickAddInputRow:null;babelHelpers.classPrivateFieldLooseBase(this,Vt)[Vt]=e.departmentControl instanceof _?e.departmentControl:null}render(){if(babelHelpers.classPrivateFieldLooseBase(this,St)[St]){return babelHelpers.classPrivateFieldLooseBase(this,St)[St]}const e=babelHelpers.classPrivateFieldLooseBase(this,Gt)[Gt]();const t=babelHelpers.classPrivateFieldLooseBase(this,xt)[xt]();babelHelpers.classPrivateFieldLooseBase(this,wt)[wt].renderInputRowsTo(t.querySelector('div[data-role="rows-container"]'),5);babelHelpers.classPrivateFieldLooseBase(this,Vt)[Vt].renderTo(t.querySelector("form"));babelHelpers.classPrivateFieldLooseBase(this,St)[St]=c.Tag.render(Ht||(Ht=ft`
			<div class="invite-wrap js-intranet-invitation-block" data-role="invite-block">
				${0}
				${0}
			</div>
		`),e,t);return babelHelpers.classPrivateFieldLooseBase(this,St)[St]}getAnalyticTab(){return babelHelpers.classPrivateFieldLooseBase(this,Ct)[Ct]?ce.TAB_PHONE:ce.TAB_EMAIL}onSubmit(e){var t;const s=this.render().querySelector("form");const[i,a]=babelHelpers.classPrivateFieldLooseBase(this,wt)[wt].parseEmailAndPhone(s);const l=[];if(a.length>0){l.push(`${babelHelpers.classPrivateFieldLooseBase(this,kt)[kt]()}: ${a.join(", ")}`)}if(i.length<=0){l.push(babelHelpers.classPrivateFieldLooseBase(this,Kt)[Kt]())}const r=(t=e.getData())==null?void 0:t.context;if(l.length>0){d.EventEmitter.emit(r,"BX.Intranet.Invitation:onSendData",{errors:l});return}const o={invitations:i,departmentIds:babelHelpers.classPrivateFieldLooseBase(this,Vt)[Vt].getValues(),tab:"email"};const n={INVITATION_TYPE:"invite",INVITATION_COUNT:i.length};d.EventEmitter.emit(r,"BX.Intranet.Invitation:onSendData",{action:"invite",data:o,analyticsLabel:n})}getSubmitButtonText(){return c.Loc.getMessage("BX24_INVITE_DIALOG_ACTION_INVITE")}}function $t(){const e=babelHelpers.classPrivateFieldLooseBase(this,Ct)[Ct]?"PHONE_MSGVER_1":babelHelpers.classPrivateFieldLooseBase(this,Rt)[Rt]?"EMAIL_AND_PHONE":"EMAIL";return c.Tag.render(Ot||(Ot=ft`
			<div class="invite-title-container">
				<div class="invite-title-icon invite-title-icon-message">
					<div class="ui-icon-set --person-letter"></div>
				</div>
				<div class="invite-title-text">
					${0}
				</div>
			</div>
		`),c.Loc.getMessage(`INTRANET_INVITE_DIALOG_TITLE_${e}`))}function Ut(){const e=c.Tag.render(Dt||(Dt=ft`
			<div class="invite-content-container">
				<form method="POST" name="INVITE_DIALOG_FORM" class="invite-form-container">
					<div data-role="rows-container"></div>
					<div class="invite-form-buttons --border-bottom --pt-3">
							<span class="ui-btn ui-btn-sm ui-btn-light-border ui-btn-icon-add ui-btn-round"
								  data-role="invite-more"
							>
								${0}
							</span>
						<span style="padding: 0 10px;">${0}</span>
						<span
							class="invite-content__switch_button swith-email-invitation-persons-mode"
						>
								${0}
							</span>
					</div>
				</form>
			</div>
		`),c.Loc.getMessage("INTRANET_INVITE_DIALOG_ADD_MORE"),c.Loc.getMessage("INTRANET_INVITE_DIALOG_OR"),c.Loc.getMessage("INTRANET_INVITE_DIALOG_ADD_MASSIVE"));const t=e.querySelector("[data-role='invite-more']");if(c.Type.isDomNode(t)){c.Event.unbindAll(t);c.Event.bind(t,"click",(()=>{babelHelpers.classPrivateFieldLooseBase(this,wt)[wt].renderInputRowTo(e.querySelector('div[data-role="rows-container"]'));if(babelHelpers.classPrivateFieldLooseBase(this,jt)[jt]){babelHelpers.classPrivateFieldLooseBase(this,jt)[jt]()}}))}const s=e.querySelector(".swith-email-invitation-persons-mode");if(c.Type.isDomNode(s)){c.Event.unbindAll(s);c.Event.bind(s,"click",babelHelpers.classPrivateFieldLooseBase(this,Mt)[Mt])}return e}function qt(){if(babelHelpers.classPrivateFieldLooseBase(this,Ct)[Ct]){return c.Loc.getMessage("INTRANET_INVITE_DIALOG_PHONE_VALIDATE_ERROR")}else if(babelHelpers.classPrivateFieldLooseBase(this,Rt)[Rt]){return c.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR")}return c.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_VALIDATE_ERROR")}function Yt(){if(babelHelpers.classPrivateFieldLooseBase(this,Ct)[Ct]){return c.Loc.getMessage("INTRANET_INVITE_DIALOG_PHONE_EMPTY_ERROR")}else if(babelHelpers.classPrivateFieldLooseBase(this,Rt)[Rt]){return c.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR")}return c.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_EMPTY_ERROR")}let Wt=e=>e,zt;var Jt=babelHelpers.classPrivateFieldLooseKey("container");var Qt=babelHelpers.classPrivateFieldLooseKey("inputsFactory");var Zt=babelHelpers.classPrivateFieldLooseKey("tagSelectorGroup");var es=babelHelpers.classPrivateFieldLooseKey("onClickAddInputRow");class ts extends J{constructor(e){super();Object.defineProperty(this,Jt,{writable:true,value:void 0});Object.defineProperty(this,Qt,{writable:true,value:void 0});Object.defineProperty(this,Zt,{writable:true,value:void 0});Object.defineProperty(this,es,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Qt)[Qt]=e.inputsFactory instanceof R?e.inputsFactory:null;babelHelpers.classPrivateFieldLooseBase(this,Zt)[Zt]=e.tagSelectorGroup instanceof n.TagSelector?e.tagSelectorGroup:null;babelHelpers.classPrivateFieldLooseBase(this,es)[es]=c.Type.isFunction(e.onClickAddInputRow)?e.onClickAddInputRow:null}render(){var e;if(babelHelpers.classPrivateFieldLooseBase(this,Jt)[Jt]){return babelHelpers.classPrivateFieldLooseBase(this,Jt)[Jt]}babelHelpers.classPrivateFieldLooseBase(this,Jt)[Jt]=c.Tag.render(zt||(zt=Wt`
			<div class="invite-wrap js-intranet-invitation-block" data-role="extranet-block">
				<div class="invite-title-container">
					<div class="invite-title-icon invite-title-icon-message">
						<div class="ui-icon-set --earth"></div>
					</div>
					<div class="invite-title-text">${0}</div>
				</div>
				<div class="invite-content-container">
					<form method="POST" name="EXTRANET_DIALOG_FORM" class="invite-form-container">
						<div class="invite-form-row" style="margin-bottom: 15px;">
							<div class="invite-form-col">
								<div class="ui-ctl-label-text">${0}</div>
								<div data-role="entity-selector-container"></div>
							</div>
						</div>
						<div data-role="rows-container"></div>
						<div class="invite-form-buttons">
							<span class="ui-btn ui-btn-sm ui-btn-light-border ui-btn-icon-add ui-btn-round" data-role="invite-more">
								${0}
							</span>
						</div>
					</form>
				</div>
			</div>
		`),c.Loc.getMessage("INTRANET_INVITE_DIALOG_EXTRANET_TITLE"),c.Loc.getMessage("INTRANET_INVITE_DIALOG_EXTRANET_GROUP"),c.Loc.getMessage("INTRANET_INVITE_DIALOG_ADD_MORE"));(e=babelHelpers.classPrivateFieldLooseBase(this,Zt)[Zt])==null?void 0:e.renderTo(babelHelpers.classPrivateFieldLooseBase(this,Jt)[Jt].querySelector('[data-role="entity-selector-container"]'));babelHelpers.classPrivateFieldLooseBase(this,Qt)[Qt].renderInputRowsTo(babelHelpers.classPrivateFieldLooseBase(this,Jt)[Jt].querySelector('div[data-role="rows-container"]'),3);const t=babelHelpers.classPrivateFieldLooseBase(this,Jt)[Jt].querySelector("[data-role='invite-more']");if(c.Type.isDomNode(t)){c.Event.unbindAll(t);c.Event.bind(t,"click",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Qt)[Qt].renderInputRowTo(babelHelpers.classPrivateFieldLooseBase(this,Jt)[Jt].querySelector('div[data-role="rows-container"]'));if(babelHelpers.classPrivateFieldLooseBase(this,es)[es]){babelHelpers.classPrivateFieldLooseBase(this,es)[es]()}}))}return babelHelpers.classPrivateFieldLooseBase(this,Jt)[Jt]}getAnalyticTab(){return ce.TAB_EXTRANET}onSubmit(e){var t;const s=this.render().querySelector("form");const[i,a]=babelHelpers.classPrivateFieldLooseBase(this,Qt)[Qt].parseEmailAndPhone(s);const l=[];if(a.length>0){l.push(`${c.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR")}: ${a.join(", ")}`)}if(i.length<=0){l.push(c.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR"))}const r=(t=e.getData())==null?void 0:t.context;if(l.length>0){d.EventEmitter.emit(r,"BX.Intranet.Invitation:onSendData",{errors:l});return}const o=babelHelpers.classPrivateFieldLooseBase(this,Zt)[Zt].getDialog().getSelectedItems();const n=[];o.forEach((e=>{const t=parseInt(e.getId(),10);n.push(t)}));const v={invitations:i,workgroupIds:n,tab:"email"};const b={INVITATION_TYPE:"extranet",INVITATION_COUNT:i.length};d.EventEmitter.emit(r,"BX.Intranet.Invitation:onSendData",{action:"extranet",data:v,analyticsLabel:b})}getSubmitButtonText(){return c.Loc.getMessage("BX24_INVITE_DIALOG_ACTION_INVITE")}}let ss=e=>e,is;var as=babelHelpers.classPrivateFieldLooseKey("container");var ls=babelHelpers.classPrivateFieldLooseKey("inputsFactory");var rs=babelHelpers.classPrivateFieldLooseKey("tagSelectorGroup");var os=babelHelpers.classPrivateFieldLooseKey("onClickAddInputRow");var ns=babelHelpers.classPrivateFieldLooseKey("departmentControl");class cs extends J{constructor(e){super();Object.defineProperty(this,as,{writable:true,value:void 0});Object.defineProperty(this,ls,{writable:true,value:void 0});Object.defineProperty(this,rs,{writable:true,value:void 0});Object.defineProperty(this,os,{writable:true,value:void 0});Object.defineProperty(this,ns,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,ls)[ls]=e.inputsFactory instanceof R?e.inputsFactory:null;babelHelpers.classPrivateFieldLooseBase(this,rs)[rs]=e.tagSelectorGroup instanceof n.TagSelector?e.tagSelectorGroup:null;babelHelpers.classPrivateFieldLooseBase(this,os)[os]=c.Type.isFunction(e.onClickAddInputRow)?e.onClickAddInputRow:null;babelHelpers.classPrivateFieldLooseBase(this,ns)[ns]=e.departmentControl instanceof _?e.departmentControl:null}render(){if(babelHelpers.classPrivateFieldLooseBase(this,as)[as]){return babelHelpers.classPrivateFieldLooseBase(this,as)[as]}babelHelpers.classPrivateFieldLooseBase(this,as)[as]=c.Tag.render(is||(is=ss`
			<div class="invite-wrap js-intranet-invitation-block" data-role="invite-with-group-dp-block">
				<div class="invite-title-container">
					<div class="invite-title-icon invite-title-icon-message">
						<div class="ui-icon-set --group"></div>
					</div>
					<div class="invite-title-text">
						${0}
					</div>
				</div>
				<div class="invite-content-container">
					<form method="POST" name="INVITE_WITH_GROUP_DP_DIALOG_FORM" class="invite-form-container">
						<div data-role="rows-container"></div>
						<div class="invite-form-buttons --border-bottom --pt-3 --mb-17">
							<span class="ui-btn ui-btn-sm ui-btn-light-border ui-btn-icon-add ui-btn-round" data-role="invite-more">
								${0}
							</span>
						</div>
						<div class="invite-form-row">
							<div class="invite-form-col">
								<div class="invite-content__field-lable">${0}</div>
								<div data-role="entity-selector-container"></div>
							</div>
						</div>
						<div class="invite-form-row" id="intranet-invitation__department-control-palce">
						</div>
					</form>
				</div>
			</div>
		`),c.Loc.getMessage("INTRANET_INVITE_DIALOG_GROUP_TITLE"),c.Loc.getMessage("INTRANET_INVITE_DIALOG_ADD_MORE"),c.Loc.getMessage("INTRANET_INVITE_DIALOG_GROUP_INPUT"));babelHelpers.classPrivateFieldLooseBase(this,ls)[ls].renderInputRowsTo(babelHelpers.classPrivateFieldLooseBase(this,as)[as].querySelector('div[data-role="rows-container"]'),3);babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].renderTo(babelHelpers.classPrivateFieldLooseBase(this,as)[as].querySelector('[data-role="entity-selector-container"]'));babelHelpers.classPrivateFieldLooseBase(this,ns)[ns].renderTo(babelHelpers.classPrivateFieldLooseBase(this,as)[as].querySelector("#intranet-invitation__department-control-palce"));const e=babelHelpers.classPrivateFieldLooseBase(this,as)[as].querySelector("[data-role='invite-more']");if(c.Type.isDomNode(e)){c.Event.unbindAll(e);c.Event.bind(e,"click",(()=>{babelHelpers.classPrivateFieldLooseBase(this,ls)[ls].renderInputRowTo(babelHelpers.classPrivateFieldLooseBase(this,as)[as].querySelector('div[data-role="rows-container"]'));if(babelHelpers.classPrivateFieldLooseBase(this,os)[os]){babelHelpers.classPrivateFieldLooseBase(this,os)[os]()}}))}return babelHelpers.classPrivateFieldLooseBase(this,as)[as]}getAnalyticTab(){return ce.TAB_DEPARTMENT}onSubmit(e){var t;const s=this.render().querySelector("form");const[i,a]=babelHelpers.classPrivateFieldLooseBase(this,ls)[ls].parseEmailAndPhone(s);const l=[];if(a.length>0){l.push(`${c.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR")}: ${a.join(", ")}`)}if(i.length<=0){l.push(c.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR"))}const r=(t=e.getData())==null?void 0:t.context;if(l.length>0){d.EventEmitter.emit(r,"BX.Intranet.Invitation:onSendData",{errors:l});return}const o=babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].getDialog().getSelectedItems();const n=[];o.forEach((e=>{const t=parseInt(e.getId(),10);n.push(t)}));const v={invitations:i,departmentIds:babelHelpers.classPrivateFieldLooseBase(this,ns)[ns].getValues(),workgroupIds:n,tab:"group"};const b={INVITATION_TYPE:"withGroupOrDepartment",INVITATION_COUNT:i.length};d.EventEmitter.emit(r,"BX.Intranet.Invitation:onSendData",{action:"inviteWithGroupDp",data:v,analyticsLabel:b})}getSubmitButtonText(){return c.Loc.getMessage("BX24_INVITE_DIALOG_ACTION_INVITE")}}let ds=e=>e,vs,bs;var ps=babelHelpers.classPrivateFieldLooseKey("container");class us extends J{constructor(e){super();Object.defineProperty(this,ps,{writable:true,value:void 0})}render(){if(babelHelpers.classPrivateFieldLooseBase(this,ps)[ps]){return babelHelpers.classPrivateFieldLooseBase(this,ps)[ps]}babelHelpers.classPrivateFieldLooseBase(this,ps)[ps]=c.Tag.render(vs||(vs=ds`
			<div class="invite-wrap js-intranet-invitation-block" data-role="integrator-block">
				<form method="POST" name="INTEGRATOR_DIALOG_FORM">
					<div class="invite-title-container">
						<div class="invite-title-icon invite-title-icon-mass">
							<div class="ui-icon-set --persons-3"></div>
						</div>
					<div class="invite-title-text">${0}</div>
					<div class="invite-title-helper" onclick="top.BX.Helper.show('redirect=detail&code=7725333');"></div>
					</div>
					<div class="invite-content-container">
						<div class="invite-form-container">
							<div data-role="rows-container">
								<div class="invite-form-row">
									<div class="invite-form-col">
										<div class="invite-content__field-lable">${0}</div>
										<div class="ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon">
											<input 
												type="text" 
												class="ui-ctl-element" 
												value="" 
												maxlength="50"
												name="integrator_email" 
												id="integrator_email" 
												placeholder="${0}"
											/>
											<button type="button" class="ui-ctl-after ui-ctl-icon-clear" style="display: none"></button>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>
		`),c.Loc.getMessage("BX24_INVITE_DIALOG_TAB_INTEGRATOR_TITLE"),c.Loc.getMessage("INTRANET_INVITE_DIALOG_INTEGRATOR_EMAIL"),c.Loc.getMessage("INTRANET_INVITE_DIALOG_INTEGRATOR_EMAIL"));const e=babelHelpers.classPrivateFieldLooseBase(this,ps)[ps].querySelector("input");const t=e.nextElementSibling;c.Event.bind(e,"input",(()=>{c.Dom.style(t,"display",e.value===""?"none":"block")}));c.Event.bind(t,"click",(e=>{e.preventDefault();c.Dom.style(t,"display","none")}));return babelHelpers.classPrivateFieldLooseBase(this,ps)[ps]}getAnalyticTab(){return ce.TAB_INTEGRATOR}onSubmit(e){const t=this.render().querySelector("form");const s={integrator_email:t.integrator_email.value};const i={INVITATION_TYPE:"integrator"};const r=c.Tag.render(bs||(bs=ds`
			<div class="invite-integrator-confirm-message">
				${0}
			</div>
		`),c.Loc.getMessage("INTRANET_INVITE_DIALOG_CONFIRM_INTEGRATOR_DESCRIPTION"));const o=r.querySelector("span");c.Event.bind(o,"click",(()=>{top.BX.Helper.show("redirect=detail&code=20682986")}));const n={action:"inviteIntegrator",data:s,analyticsLabel:i};const v=new l.Popup({id:"integrator-confirm-invitation-popup",maxWidth:500,closeIcon:false,overlay:true,contentPadding:10,titleBar:c.Loc.getMessage("INTRANET_INVITE_DIALOG_CONFIRM_INTEGRATOR_TITLE"),content:r,offsetLeft:100,buttons:[new a.CreateButton({text:c.Loc.getMessage("INTRANET_INVITE_DIALOG_CONFIRM_INTEGRATOR_BUTTON_YES"),onclick:()=>{var t;const s=(t=e.getData())==null?void 0:t.context;d.EventEmitter.emit(s,"BX.Intranet.Invitation:onSendData",n);v.close()}}),new a.CancelButton({text:c.Loc.getMessage("INTRANET_INVITE_DIALOG_CONFIRM_INTEGRATOR_BUTTON_NO"),onclick:()=>{v.close()}})],events:{onClose:()=>{v.destroy()}}});v.show()}getSubmitButtonText(){return c.Loc.getMessage("BX24_INVITE_DIALOG_ACTION_INVITE")}}var hs=babelHelpers.classPrivateFieldLooseKey("container");var Ls=babelHelpers.classPrivateFieldLooseKey("isEnabled");var Is=babelHelpers.classPrivateFieldLooseKey("analytics");var Ps=babelHelpers.classPrivateFieldLooseKey("transport");var _s=babelHelpers.classPrivateFieldLooseKey("departmentControl");var gs=babelHelpers.classPrivateFieldLooseKey("page");class Ts{constructor(e){Object.defineProperty(this,hs,{writable:true,value:void 0});Object.defineProperty(this,Ls,{writable:true,value:void 0});Object.defineProperty(this,Is,{writable:true,value:void 0});Object.defineProperty(this,Ps,{writable:true,value:void 0});Object.defineProperty(this,_s,{writable:true,value:void 0});Object.defineProperty(this,gs,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]=e.container;babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls]=e.isSelfRegisterEnabled;babelHelpers.classPrivateFieldLooseBase(this,Is)[Is]=e.analytics;babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]=e.transport;babelHelpers.classPrivateFieldLooseBase(this,_s)[_s]=e.departmentControl;babelHelpers.classPrivateFieldLooseBase(this,gs)[gs]=e.page;if(c.Type.isDomNode(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs])){this.bindActions();const e=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].querySelector(".invite-dialog-fast-reg-control-switcher");this.switcher=new r.Switcher({inputName:"allow_register",id:"allow_register",checked:babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls],node:e,size:r.SwitcherSize.small,handlers:{toggled:this.toggleSettings.bind(this)}})}const t=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].querySelector("[data-role='selfRegenerateSecretButton']");this.generateLinkHint=null;c.Event.bind(t,"mouseover",(e=>{this.generateLinkHint=this.showHintPopup(c.Loc.getMessage("INTRANET_INVITE_DIALOG_LINK_UPDATE_WARNING"),t)}));c.Event.bind(t,"mouseout",(()=>{var e;(e=this.generateLinkHint)==null?void 0:e.destroy();this.generateLinkHint=null}));d.EventEmitter.subscribe("BX.Intranet.Invitation:confirmShutdown",(e=>{const t=e.getData();this.showNotificationPopup(t)}))}bindActions(){const e=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].querySelector("[data-role='selfRegenerateSecretButton']");if(c.Type.isDomNode(e)){c.Event.bind(e,"click",(()=>{this.regenerateSecret()}))}const t=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].querySelector("[data-role='copyRegisterUrlButton']");if(c.Type.isDomNode(t)){c.Event.bind(t,"click",(()=>{this.copyRegisterUrl()}))}const s=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].querySelector("[data-role='allowRegisterConfirm']");if(c.Type.isDomNode(s)){c.Event.bind(s,"change",(()=>{d.EventEmitter.emit("BX.Intranet.Invitation:onChangeForm");babelHelpers.classPrivateFieldLooseBase(this,gs)[gs].setButtonState(W.ENABLED_STATE);this.toggleWhiteList(s)}))}const i=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].querySelector("[data-role='selfWhiteList']");if(c.Type.isDomNode(i)){c.Event.bind(i,"input",(()=>{babelHelpers.classPrivateFieldLooseBase(this,gs)[gs].setButtonState(W.ENABLED_STATE);d.EventEmitter.emit("BX.Intranet.Invitation:onChangeForm")}))}}regenerateSecret(){babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps].send({action:"self",data:{allow_register_secret:c.Text.getRandom(8)}}).then((e=>{top.BX.UI.Notification.Center.notify({content:c.Loc.getMessage("INTRANET_INVITE_DIALOG_LINK_UPDATE_SUCCESS"),autoHideDelay:2500})}),(e=>{top.BX.UI.Notification.Center.notify({content:c.Loc.getMessage("INTRANET_INVITE_DIALOG_LINK_UPDATE_ERROR"),autoHideDelay:2500})}))}copyRegisterUrl(){const e=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].querySelector("[data-role='copyRegisterUrlButton']");if(c.Dom.hasClass(e,"ui-btn-wait")){return}c.Dom.addClass(e,"ui-btn-wait");babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps].send({action:"getInviteLink",data:{departmentsId:babelHelpers.classPrivateFieldLooseBase(this,_s)[_s].getValues()}}).then((t=>{var s;c.Dom.removeClass(e,"ui-btn-wait");const i=(s=t.data)==null?void 0:s.invitationLink;if(c.Type.isStringFilled(i)){this.copyToClipboard(i).then((e=>{top.BX.UI.Notification.Center.notify({content:c.Loc.getMessage("BX24_INVITE_DIALOG_COPY_URL"),autoHideDelay:2500})})).catch((e=>{console.log(e)}));babelHelpers.classPrivateFieldLooseBase(this,Is)[Is].send()}}),(t=>{c.Dom.removeClass(e,"ui-btn-wait")}))}async copyToClipboard(e){var t;if(!c.Type.isString(e)){return Promise.reject()}if(window.isSecureContext&&navigator.clipboard){return new Promise(((t,s)=>{setTimeout((()=>navigator.clipboard.writeText(e).then((()=>t())).catch((e=>s(e)))),0)}))}return(t=BX.clipboard)!=null&&t.copy(e)?Promise.resolve():Promise.reject()}showHintPopup(e,t){if(!c.Type.isDomNode(t)||!e){return}const s=new BX.PopupWindow("inviteHint"+c.Text.getRandom(8),t,{content:e,zIndex:15e3,angle:true,offsetTop:0,offsetLeft:50,closeIcon:false,autoHide:true,darkMode:true,overlay:false,maxWidth:400,events:{onAfterPopupShow(){setTimeout((()=>{this.close()}),4e3)}}});s.show();return s}showNotificationPopup(e){const t=new BX.PopupWindow({className:"confirm-self-register",titleBar:c.Loc.getMessage("INTRANET_INVITE_DIALOG_SELF_CONFIRM_POPUP_TITLE"),content:c.Loc.getMessage("INTRANET_INVITE_DIALOG_SELF_CONFIRM_POPUP_TEXT"),width:364,height:188,closeIcon:true,buttons:[new BX.UI.Button({text:c.Loc.getMessage("INTRANET_INVITE_DIALOG_SELF_CONFIRM_POPUP_OK"),color:BX.UI.Button.Color.PRIMARY,round:true,events:{click(){t.close();d.EventEmitter.emit(e.page,"BX.Intranet.Invitation:submit",{context:e.context,isConfirm:true})}}}),new BX.UI.ApplyButton({text:c.Loc.getMessage("INTRANET_INVITE_DIALOG_SELF_CONFIRM_POPUP_CANCEL"),round:true,events:{click(){t.close()}}})],events:{onClose:()=>{d.EventEmitter.emit("BX.Intranet.Invitation:onSubmitReady")}}});t.show()}toggleSettings(){d.EventEmitter.emit("BX.Intranet.Invitation:onChangeForm");babelHelpers.classPrivateFieldLooseBase(this,gs)[gs].setButtonState(W.ENABLED_STATE);const e=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].querySelector(".js-invite-dialog-fast-reg-control-container");if(c.Type.isDomNode(e)){c.Dom.toggleClass(e,"disallow-registration")}const t=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].querySelector("[data-role='selfSettingsBlock']");if(c.Type.isDomNode(t)){c.Dom.style(t,"display",this.switcher.checked?"block":"none")}}toggleWhiteList(e){const t=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].querySelector("[data-role='selfWhiteList']");if(c.Type.isDomNode(t)){c.Dom.style(t,"display",e.checked?"block":"none")}}}let Es=e=>e,ms,ys,As,Bs,Ns,Fs,fs;var Hs=babelHelpers.classPrivateFieldLooseKey("container");var Os=babelHelpers.classPrivateFieldLooseKey("isAdmin");var Ds=babelHelpers.classPrivateFieldLooseKey("isCloud");var Ss=babelHelpers.classPrivateFieldLooseKey("fastRegistrationAvailable");var ws=babelHelpers.classPrivateFieldLooseKey("needConfirmRegistration");var Rs=babelHelpers.classPrivateFieldLooseKey("wishlist");var Cs=babelHelpers.classPrivateFieldLooseKey("departmentControl");var Ms=babelHelpers.classPrivateFieldLooseKey("linkRegisterEnabled");var js=babelHelpers.classPrivateFieldLooseKey("analytics");var Vs=babelHelpers.classPrivateFieldLooseKey("transport");var Gs=babelHelpers.classPrivateFieldLooseKey("btnState");var xs=babelHelpers.classPrivateFieldLooseKey("renderCopyBtnDescription");var ks=babelHelpers.classPrivateFieldLooseKey("renderUpdateLinkBtn");var Ks=babelHelpers.classPrivateFieldLooseKey("renderFastRegistrationSwitcher");var Xs=babelHelpers.classPrivateFieldLooseKey("renderConfirmRegistrationCheckbox");var $s=babelHelpers.classPrivateFieldLooseKey("renderWhiteListField");var Us=babelHelpers.classPrivateFieldLooseKey("renderWarningContainer");class qs extends J{constructor(e){super();Object.defineProperty(this,Us,{value:Zs});Object.defineProperty(this,$s,{value:Qs});Object.defineProperty(this,Xs,{value:Js});Object.defineProperty(this,Ks,{value:zs});Object.defineProperty(this,ks,{value:Ws});Object.defineProperty(this,xs,{value:Ys});Object.defineProperty(this,Hs,{writable:true,value:void 0});Object.defineProperty(this,Os,{writable:true,value:void 0});Object.defineProperty(this,Ds,{writable:true,value:void 0});Object.defineProperty(this,Ss,{writable:true,value:void 0});Object.defineProperty(this,ws,{writable:true,value:void 0});Object.defineProperty(this,Rs,{writable:true,value:void 0});Object.defineProperty(this,Cs,{writable:true,value:void 0});Object.defineProperty(this,Ms,{writable:true,value:void 0});Object.defineProperty(this,js,{writable:true,value:void 0});Object.defineProperty(this,Vs,{writable:true,value:void 0});Object.defineProperty(this,Gs,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Os)[Os]=e.isAdmin===true;babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds]=e.isCloud===true;babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]=e.fastRegistrationAvailable===true;babelHelpers.classPrivateFieldLooseBase(this,ws)[ws]=e.needConfirmRegistration===true;babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs]=c.Type.isStringFilled(e.wishlist)?e.wishlist:"";babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs]=e.departmentControl instanceof _?e.departmentControl:null;babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms]=e.linkRegisterEnabled;babelHelpers.classPrivateFieldLooseBase(this,js)[js]=e.analytics;babelHelpers.classPrivateFieldLooseBase(this,Vs)[Vs]=e.transport;babelHelpers.classPrivateFieldLooseBase(this,Gs)[Gs]=W.DISABLED_STATE}render(){if(babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs]){return babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs]}babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs]=c.Tag.render(ms||(ms=Es`
			<div class="invite-wrap js-intranet-invitation-block" data-role="self-block">
				<div class="invite-title-container">
					<div class="invite-title-icon invite-title-icon-link">
						<div class="ui-icon-set --link-3"></div>
					</div>
					<div class="invite-title-text">${0}</div>
					<div class="invite-title-helper" onclick="top.BX.Helper.show('redirect=detail&code=6546149');"></div>
				</div>
				<form method="POST" name="SELF_DIALOG_FORM">
					${0}
					<div class="invite-content-container --department-bg">
						<div class="invite-form-container">
							<div 
								style="border-top: none; ${0}" 
								data-role="selfSettingsBlock" 
								id="intranet-dialog-tab-content-self-block" 
								class="invite-dialog-inv-link-block"
							>
								<div id="invitation-department-status" class="invitation-department__status"></div>
								<div>
									${0}
									<div class="intranet-invitation__link-department-control"></div>
									<div class="invite-form-container-reg-row">
										<span class="ui-btn ui-btn-primary ui-btn-themes ui-btn-icon-copy invite-form-btn-copy" data-role="copyRegisterUrlButton">
											${0}
										</span>
										${0}
									</div>
									${0}
									${0}
								</div>
							</div>
						</div>
					</div>
				</form>
				${0}
			</div>
		`),c.Loc.getMessage("INTRANET_INVITE_DIALOG_FAST_REG_TITLE"),babelHelpers.classPrivateFieldLooseBase(this,Os)[Os]?babelHelpers.classPrivateFieldLooseBase(this,Ks)[Ks]():"",babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]?"":"display: none;",babelHelpers.classPrivateFieldLooseBase(this,Os)[Os]?"":babelHelpers.classPrivateFieldLooseBase(this,xs)[xs](),c.Loc.getMessage("BX24_INVITE_DIALOG_COPY_LINK"),babelHelpers.classPrivateFieldLooseBase(this,Os)[Os]?babelHelpers.classPrivateFieldLooseBase(this,ks)[ks]():"",babelHelpers.classPrivateFieldLooseBase(this,Os)[Os]&&babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds]?babelHelpers.classPrivateFieldLooseBase(this,Xs)[Xs]():"",babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds]?babelHelpers.classPrivateFieldLooseBase(this,$s)[$s]():"",!babelHelpers.classPrivateFieldLooseBase(this,Os)[Os]&&!babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]?babelHelpers.classPrivateFieldLooseBase(this,Us)[Us]():"");c.Dom.prepend(babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].render(),babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs].querySelector(".intranet-invitation__link-department-control"));new Ts({container:babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs],isSelfRegisterEnabled:babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms],analytics:babelHelpers.classPrivateFieldLooseBase(this,js)[js],transport:babelHelpers.classPrivateFieldLooseBase(this,Vs)[Vs],departmentControl:babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs],page:this});return babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs]}getAnalyticTab(){return ce.TAB_LINK}onSubmit(e){var t,s,i,a,l;const r=this.render().querySelector("form");const o={allow_register:r.allow_register.value,allow_register_confirm:r!=null&&(t=r.allow_register_confirm)!=null&&t.checked?"Y":"N",allow_register_whitelist:(s=r==null?void 0:(i=r.allow_register_whitelist)==null?void 0:i.value)!=null?s:""};const n=(a=e.getData())==null?void 0:a.context;const c=(l=e.getData())==null?void 0:l.isConfirm;if(r.allow_register.value==="N"&&!c){d.EventEmitter.emit("BX.Intranet.Invitation:confirmShutdown",{page:this,context:n});return}d.EventEmitter.emit(n,"BX.Intranet.Invitation:onSendData",{action:"self",data:o})}getSubmitButtonText(){return c.Loc.getMessage("BX24_INVITE_DIALOG_ACTION_SAVE")}getButtonState(){return babelHelpers.classPrivateFieldLooseBase(this,Gs)[Gs]}setButtonState(e){babelHelpers.classPrivateFieldLooseBase(this,Gs)[Gs]=e}}function Ys(){return c.Tag.render(ys||(ys=Es`
			<div class="invite-form__copy-button-description">
				${0}
			</div>
		`),c.Loc.getMessage("INTRANET_INVITE_COPY_BUTTON_DESCRIPTION"))}function Ws(){return c.Tag.render(As||(As=Es`
			<span data-role="selfRegenerateSecretButton">
				<a
				href="javascript:void(0)"
				class="invite-dialog-update-link"
				>
					${0}
				</a>
			</span>
		`),c.Loc.getMessage("BX24_INVITE_DIALOG_REGISTER_NEW_LINK"))}function zs(){return c.Tag.render(Bs||(Bs=Es`
			<label class="invite-dialog-fast-reg-control-container js-invite-dialog-fast-reg-control-container ${0}" for="allow_register">
				<div class="invite-dialog-fast-reg-control-switcher" data-role="self-switcher"></div>
				<span class="invite-dialog-fast-reg-control-label">
					<div class="invite-dialog-fast-reg-control-label-title">${0}</div>
				</span>
			</label>
		`),babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]?"":"disallow-registration",c.Loc.getMessage("INTRANET_INVITE_ALLOW_INVITATION_LINK"))}function Js(){return c.Tag.render(Ns||(Ns=Es`
			<div style="padding-top: 12px;">
				<label class="ui-ctl ui-ctl-w100 ui-ctl-checkbox invite-form-check-box">
					<input
					type="checkbox"
					class="ui-ctl-element"
					name="allow_register_confirm"
					id="allow_register_confirm"
					data-role="allowRegisterConfirm"
					${0}
					${0}
					/>
					<div class="ui-ctl-label-text">${0}</div>
				</label>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,ws)[ws]?"checked":"",babelHelpers.classPrivateFieldLooseBase(this,Os)[Os]?"":"disabled",c.Loc.getMessage("INTRANET_INVITE_DIALOG_FAST_REG_TYPE"))}function Qs(){return c.Tag.render(Fs||(Fs=Es`
		<div id="intranet-dialog-tab-content-self-whitelist" data-role="selfWhiteList" ${0}>
			<span class="invite-form-ctl-title">
				${0}
			</span>
			<label class="ui-ctl ui-ctl-w75 ui-ctl-textbox">
				<input
				type="text"
				${0}
				class="ui-ctl-element"
				name="allow_register_whitelist"
				value="${0}"
				placeholder="${0}"
				/>
			</label>
		</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,ws)[ws]?"":'style="display: none"',c.Loc.getMessage("INTRANET_INVITE_DIALOG_FAST_REG_DOMAINS"),babelHelpers.classPrivateFieldLooseBase(this,Os)[Os]?"":"disabled",babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs],c.Loc.getMessage("BX24_INVITE_DIALOG_REGISTER_TYPE_DOMAINS_PLACEHOLDER"))}function Zs(){return c.Tag.render(fs||(fs=Es`
			<div class="intranet-invitation__error-box">
				<div class="intranet-invitation__error-icon"></div>
				<div class="intranet-invitation__error-title">${0}</div>
				<div class="intranet-invitation__error-desc">${0}</div>
			</div>
		`),c.Loc.getMessage("INTRANET_INVITE_ALERT_INVITATION_LINK_DISABLED"),c.Loc.getMessage("INTRANET_INVITE_ALERT_INVITATION_LINK_DISABLED_DESCRIPTION"))}var ei=babelHelpers.classPrivateFieldLooseKey("input");var ti=babelHelpers.classPrivateFieldLooseKey("invitationType");var si=babelHelpers.classPrivateFieldLooseKey("isPhoneEnabled");var ii=babelHelpers.classPrivateFieldLooseKey("isEmailEnabled");var ai=babelHelpers.classPrivateFieldLooseKey("getDialogInputMessage");class li{constructor(e){Object.defineProperty(this,ai,{value:ri});Object.defineProperty(this,ei,{writable:true,value:void 0});Object.defineProperty(this,ti,{writable:true,value:void 0});Object.defineProperty(this,si,{writable:true,value:void 0});Object.defineProperty(this,ii,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,ti)[ti]=e.useOnlyPhone?o.InvitationInputType.PHONE:e.smsAvailable?o.InvitationInputType.ALL:o.InvitationInputType.EMAIL;babelHelpers.classPrivateFieldLooseBase(this,si)[si]=[o.InvitationInputType.ALL,o.InvitationInputType.PHONE].includes(babelHelpers.classPrivateFieldLooseBase(this,ti)[ti]);babelHelpers.classPrivateFieldLooseBase(this,ii)[ii]=[o.InvitationInputType.ALL,o.InvitationInputType.EMAIL].includes(babelHelpers.classPrivateFieldLooseBase(this,ti)[ti]);babelHelpers.classPrivateFieldLooseBase(this,ei)[ei]=new o.InvitationInput({inputType:babelHelpers.classPrivateFieldLooseBase(this,ti)[ti]});babelHelpers.classPrivateFieldLooseBase(this,ei)[ei].getTagSelector().setPlaceholder(c.Type.isStringFilled(e.placeholder)?e.placeholder:babelHelpers.classPrivateFieldLooseBase(this,ai)[ai]());BX.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,ei)[ei].getTagSelector().getContainer(),"height","103px");BX.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,ei)[ei].getTagSelector().getContainer(),"cursor","text");c.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,ei)[ei].getTagSelector().getContainer(),"click",(()=>{babelHelpers.classPrivateFieldLooseBase(this,ei)[ei].getTagSelector().focusTextBox()}))}renderTo(e){babelHelpers.classPrivateFieldLooseBase(this,ei)[ei].renderTo(e)}getValue(){const e=babelHelpers.classPrivateFieldLooseBase(this,ei)[ei].getTagSelector();const t=e.getTags();const s=[];const i=[];t.forEach((e=>{if(babelHelpers.classPrivateFieldLooseBase(this,si)[si]&&e.getEntityType()==="phone"){s.push(e.getTitle())}else if(babelHelpers.classPrivateFieldLooseBase(this,ii)[ii]&&e.getEntityType()==="email"){s.push(e.getTitle())}else{i.push(e.getTitle())}}));return{values:s,errorElements:i}}}function ri(){if(babelHelpers.classPrivateFieldLooseBase(this,si)[si]&&babelHelpers.classPrivateFieldLooseBase(this,ii)[ii]){return c.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_INPUT")}else if(babelHelpers.classPrivateFieldLooseBase(this,si)[si]){return c.Loc.getMessage("INTRANET_INVITE_DIALOG_PHONE_INPUT")}else{return c.Loc.getMessage("INTRANET_INVITE_DIALOG_EMAIL_INPUT")}}let oi=e=>e,ni,ci;var di=babelHelpers.classPrivateFieldLooseKey("container");var vi=babelHelpers.classPrivateFieldLooseKey("smsAvailable");var bi=babelHelpers.classPrivateFieldLooseKey("useOnlyPhone");var pi=babelHelpers.classPrivateFieldLooseKey("onClickSwitchMode");var ui=babelHelpers.classPrivateFieldLooseKey("massInvitationField");var hi=babelHelpers.classPrivateFieldLooseKey("departmentControl");var Li=babelHelpers.classPrivateFieldLooseKey("getEmptyError");var Ii=babelHelpers.classPrivateFieldLooseKey("getValidateError");class Pi extends J{constructor(e){super();Object.defineProperty(this,Ii,{value:gi});Object.defineProperty(this,Li,{value:_i});Object.defineProperty(this,di,{writable:true,value:void 0});Object.defineProperty(this,vi,{writable:true,value:void 0});Object.defineProperty(this,bi,{writable:true,value:void 0});Object.defineProperty(this,pi,{writable:true,value:void 0});Object.defineProperty(this,ui,{writable:true,value:void 0});Object.defineProperty(this,hi,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,vi)[vi]=e.smsAvailable===true;babelHelpers.classPrivateFieldLooseBase(this,bi)[bi]=e.useOnlyPhone===true;babelHelpers.classPrivateFieldLooseBase(this,pi)[pi]=c.Type.isFunction(e.onClickSwitchMode)?e.onClickSwitchMode:null;babelHelpers.classPrivateFieldLooseBase(this,ui)[ui]=new li({placeholder:"",useOnlyPhone:babelHelpers.classPrivateFieldLooseBase(this,bi)[bi],smsAvailable:babelHelpers.classPrivateFieldLooseBase(this,vi)[vi]});babelHelpers.classPrivateFieldLooseBase(this,hi)[hi]=e.departmentControl instanceof _?e.departmentControl:null}render(){var e;if(babelHelpers.classPrivateFieldLooseBase(this,di)[di]){return babelHelpers.classPrivateFieldLooseBase(this,di)[di]}const t=c.Tag.render(ni||(ni=oi`
			<div class="invite-title-helper"
				 data-hint="${0}"
				 data-hint-no-icon
			>
			</div>
		`),c.Loc.getMessage("INTRANET_INVITE_DIALOG_MASS_INVITE_HINT"));const s=babelHelpers.classPrivateFieldLooseBase(this,bi)[bi]?"PHONE":babelHelpers.classPrivateFieldLooseBase(this,vi)[vi]?"EMAIL_AND_PHONE":"EMAIL";babelHelpers.classPrivateFieldLooseBase(this,di)[di]=c.Tag.render(ci||(ci=oi`
			<div class="invite-wrap js-intranet-invitation-block" data-role="mass-invite-block">
				<div class="invite-title-container">
					<div class="invite-title-icon invite-title-icon-mass">
						<div class="ui-icon-set --person-letter"></div>
					</div>
					<div class="invite-title-text">${0}</div>
					${0}
				</div>
				<div class="invite-content-container">
					<div class="invite-form-container">
						<form method="POST" name="MASS_INVITE_DIALOG_FORM" class="invite-form-container">
							<div class="invite-content__field-lable">
								${0}
							</div>
							<div id="invite-content__mass-field">
							</div>
							<div class="invite-form-ctl-description --border-bottom">
								<span href="javascript:void(0)"
								   class="invite-content__switch_button swith-email-invitation-mass-mode"
								>
									${0}
								</span>
							</div>
							<div class="invite-form-row" id="intranet-invitation__department-control-palce"></div>
						</form>
					</div>
				</div>
			</div>
		`),c.Loc.getMessage("INTRANET_INVITE_DIALOG_MASS_TITLE"),babelHelpers.classPrivateFieldLooseBase(this,vi)[vi]?t:"",c.Loc.getMessage(`INTRANET_INVITE_DIALOG_MASS_TITLE_${s}`),c.Loc.getMessage("INTRANET_INVITE_DIALOG_ADD_PERSONAL"));(e=babelHelpers.classPrivateFieldLooseBase(this,ui)[ui])==null?void 0:e.renderTo(babelHelpers.classPrivateFieldLooseBase(this,di)[di].querySelector("#invite-content__mass-field"));babelHelpers.classPrivateFieldLooseBase(this,hi)[hi].renderTo(babelHelpers.classPrivateFieldLooseBase(this,di)[di].querySelector("#intranet-invitation__department-control-palce"));c.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,di)[di].querySelector(".swith-email-invitation-mass-mode"),"click",babelHelpers.classPrivateFieldLooseBase(this,pi)[pi]);return babelHelpers.classPrivateFieldLooseBase(this,di)[di]}getAnalyticTab(){return ce.TAB_MASS}onSubmit(e){var t;const{values:s,errorElements:i}=babelHelpers.classPrivateFieldLooseBase(this,ui)[ui].getValue();const a=[];if(s.length<=0){a.push(babelHelpers.classPrivateFieldLooseBase(this,Li)[Li]())}if(i.length>0){a.push(babelHelpers.classPrivateFieldLooseBase(this,Ii)[Ii]())}if(a.length>0){d.EventEmitter.emit(window.invitationForm,"BX.Intranet.Invitation:onSendData",{errors:a});return}const l={invitationText:s.join(" "),departmentIds:babelHelpers.classPrivateFieldLooseBase(this,hi)[hi].getValues(),tab:"mass"};const r={INVITATION_TYPE:"mass"};const o=(t=e.getData())==null?void 0:t.context;d.EventEmitter.emit(o,"BX.Intranet.Invitation:onSendData",{action:"massInvite",data:l,analyticsLabel:r})}getSubmitButtonText(){return c.Loc.getMessage("BX24_INVITE_DIALOG_ACTION_INVITE")}}function _i(){if(babelHelpers.classPrivateFieldLooseBase(this,bi)[bi]){return c.Loc.getMessage("INTRANET_INVITE_DIALOG_EMPTY_ERROR_PHONE")}else if(babelHelpers.classPrivateFieldLooseBase(this,vi)[vi]){return c.Loc.getMessage("INTRANET_INVITE_DIALOG_EMPTY_ERROR_EMAIL_AND_PHONE")}return c.Loc.getMessage("INTRANET_INVITE_DIALOG_EMPTY_ERROR_EMAIL")}function gi(){if(babelHelpers.classPrivateFieldLooseBase(this,bi)[bi]){return c.Loc.getMessage("INTRANET_INVITE_DIALOG_VALIDATE_ERROR_PHONE")}else if(babelHelpers.classPrivateFieldLooseBase(this,vi)[vi]){return c.Loc.getMessage("INTRANET_INVITE_DIALOG_VALIDATE_ERROR_EMAIL_AND_PHONE")}return c.Loc.getMessage("INTRANET_INVITE_DIALOG_VALIDATE_ERROR_EMAIL")}let Ti=e=>e,Ei,mi;var yi=babelHelpers.classPrivateFieldLooseKey("container");var Ai=babelHelpers.classPrivateFieldLooseKey("inputsFactory");var Bi=babelHelpers.classPrivateFieldLooseKey("isCloud");var Ni=babelHelpers.classPrivateFieldLooseKey("withoutConfirm");var Fi=babelHelpers.classPrivateFieldLooseKey("tagSelectorGroup");var fi=babelHelpers.classPrivateFieldLooseKey("departmentControl");var Hi=babelHelpers.classPrivateFieldLooseKey("renderFields");class Oi extends J{constructor(e){super();Object.defineProperty(this,Hi,{value:Di});Object.defineProperty(this,yi,{writable:true,value:void 0});Object.defineProperty(this,Ai,{writable:true,value:void 0});Object.defineProperty(this,Bi,{writable:true,value:void 0});Object.defineProperty(this,Ni,{writable:true,value:void 0});Object.defineProperty(this,Fi,{writable:true,value:void 0});Object.defineProperty(this,fi,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Bi)[Bi]=e.isCloud===true;babelHelpers.classPrivateFieldLooseBase(this,Ni)[Ni]=e.withoutConfirm===true;babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai]=e.inputsFactory instanceof R?e.inputsFactory:null;babelHelpers.classPrivateFieldLooseBase(this,Fi)[Fi]=e.tagSelectorGroup instanceof n.TagSelector?e.tagSelectorGroup:null;babelHelpers.classPrivateFieldLooseBase(this,fi)[fi]=e.departmentControl instanceof _?e.departmentControl:null}render(){if(babelHelpers.classPrivateFieldLooseBase(this,yi)[yi]){return babelHelpers.classPrivateFieldLooseBase(this,yi)[yi]}babelHelpers.classPrivateFieldLooseBase(this,yi)[yi]=c.Tag.render(Ei||(Ei=Ti`
			<div class="invite-wrap js-intranet-invitation-block" data-role="add-block">
				<form method="POST" name="ADD_DIALOG_FORM">
					<div class="invite-title-container">
						<div class="invite-title-icon invite-title-icon-registration">
							<div class="ui-icon-set --person-plus"></div>
						</div>
						<div class="invite-title-text">${0}</div>
					</div>
					<div class="invite-content-container">
						<div class="invite-form-container">
							<div data-role="rows-container">
								${0}
							</div>
							<div class="invite-form-row">
								<div class="invite-form-col">
									<div class="invite-content__field-lable">${0}</div>
									<div data-role="entity-selector-container"></div>
								</div>
							</div>
							<div class="invite-form-row" id="intranet-invitation__department-control-palce"></div>
							<div class="invite-form-row">
								<div class="invite-form-col">
									<div class="invite-dialog-inv-form-checkbox-wrap">
										<input
										type="checkbox"
										name="ADD_SEND_PASSWORD"
										id="ADD_SEND_PASSWORD"
										value="Y"
										class="invite-dialog-inv-form-checkbox"
										${0}
										>
										<label class="invite-dialog-inv-form-checkbox-label" for="ADD_SEND_PASSWORD">
											${0}
											${0}
										</label>
									</div>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>
		`),c.Loc.getMessage("INTRANET_INVITE_DIALOG_ADD_TITLE"),babelHelpers.classPrivateFieldLooseBase(this,Hi)[Hi](),c.Loc.getMessage("INTRANET_INVITE_DIALOG_GROUP_INPUT"),babelHelpers.classPrivateFieldLooseBase(this,Ni)[Ni]?"checked":"",c.Loc.getMessage(babelHelpers.classPrivateFieldLooseBase(this,Bi)[Bi]?"BX24_INVITE_DIALOG_ADD_WO_CONFIRMATION_TITLE":"BX24_INVITE_DIALOG_ADD_SEND_PASSWORD_TITLE"),babelHelpers.classPrivateFieldLooseBase(this,Bi)[Bi]?"":'<span id="ADD_SEND_PASSWORD_EMAIL"></span>');babelHelpers.classPrivateFieldLooseBase(this,Fi)[Fi].renderTo(babelHelpers.classPrivateFieldLooseBase(this,yi)[yi].querySelector('[data-role="entity-selector-container"]'));babelHelpers.classPrivateFieldLooseBase(this,fi)[fi].renderTo(babelHelpers.classPrivateFieldLooseBase(this,yi)[yi].querySelector("#intranet-invitation__department-control-palce"));return babelHelpers.classPrivateFieldLooseBase(this,yi)[yi]}getAnalyticTab(){return ce.TAB_REGISTRATION}onSubmit(e){var t;const s=this.render().querySelector("form");const i=babelHelpers.classPrivateFieldLooseBase(this,Fi)[Fi].getDialog().getSelectedItems();const a=[];i.forEach((e=>{const t=parseInt(e.getId(),10);a.push(t)}));const l={ADD_EMAIL:s.ADD_EMAIL.value,ADD_NAME:s.ADD_NAME.value,ADD_LAST_NAME:s.ADD_LAST_NAME.value,ADD_POSITION:s.ADD_POSITION.value,ADD_SEND_PASSWORD:s.ADD_SEND_PASSWORD&&Boolean(s.ADD_SEND_PASSWORD.checked)?s.ADD_SEND_PASSWORD.value:"N",departmentIds:babelHelpers.classPrivateFieldLooseBase(this,fi)[fi].getValues(),SONET_GROUPS_CODE:a};const r={INVITATION_TYPE:"add"};const o=(t=e.getData())==null?void 0:t.context;d.EventEmitter.emit(o,"BX.Intranet.Invitation:onSendData",{action:"add",data:l,analyticsLabel:r})}getSubmitButtonText(){return c.Loc.getMessage("BX24_INVITE_DIALOG_ACTION_ADD")}}function Di(){const e=c.Tag.render(mi||(mi=Ti`
			<div>
				<div class="invite-form-row">
					<div class="invite-form-col">
						<div class="invite-content__field-lable">${0}</div>
						<div class="ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon">
							<input type="text" name="ADD_NAME" placeholder="${0}" id="ADD_NAME" class="ui-ctl-element">
							<button type="button" class="ui-ctl-after ui-ctl-icon-clear" style="display: none"></button>
						</div>
					</div>
				</div>
				<div class="invite-form-row">
					<div class="invite-form-col">
						<div class="invite-content__field-lable">${0}</div>
						<div class="ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon">
							<input type="text" name="ADD_LAST_NAME" placeholder="${0}" id="ADD_LAST_NAME" class="ui-ctl-element">
							<button type="button" class="ui-ctl-after ui-ctl-icon-clear" style="display: none"></button>
						</div>
					</div>
				</div>
				<div class="invite-form-row">
					<div class="invite-form-col">
						<div class="invite-content__field-lable">${0}</div>
						<div class="ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon">
							<input type="text" name="ADD_EMAIL" placeholder="${0}" id="ADD_EMAIL" class="ui-ctl-element" maxlength="50">
							<button type="button" class="ui-ctl-after ui-ctl-icon-clear" style="display: none"></button>
						</div>
					</div>
				</div>
				<div class="invite-form-row">
					<div class="invite-form-col">
						<div class="invite-content__field-lable">${0}</div>
						<div class="ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon">
							<input type="text" name="ADD_POSITION" placeholder="${0}" id="ADD_POSITION" class="ui-ctl-element">
							<button type="button" class="ui-ctl-after ui-ctl-icon-clear" style="display: none"></button>
						</div>			
					</div>
				</div>
			</div>
		`),c.Loc.getMessage("BX24_INVITE_DIALOG_ADD_NAME_TITLE"),c.Loc.getMessage("INTRANET_INVITE_DIALOG_PLACEHOLDER_NAME"),c.Loc.getMessage("BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE"),c.Loc.getMessage("INTRANET_INVITE_DIALOG_PLACEHOLDER_LAST_NAME"),c.Loc.getMessage("BX24_INVITE_DIALOG_ADD_EMAIL_TITLE"),c.Loc.getMessage("INTRANET_INVITE_DIALOG_PLACEHOLDER_EMAIL"),c.Loc.getMessage("BX24_INVITE_DIALOG_ADD_POSITION_TITLE"),c.Loc.getMessage("INTRANET_INVITE_DIALOG_PLACEHOLDER_POSITION"));babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai].bindCloseIcons(e);return e}let Si=e=>e,wi;var Ri=babelHelpers.classPrivateFieldLooseKey("container");class Ci extends J{constructor(...e){super(...e);Object.defineProperty(this,Ri,{writable:true,value:void 0})}render(){if(babelHelpers.classPrivateFieldLooseBase(this,Ri)[Ri]){return babelHelpers.classPrivateFieldLooseBase(this,Ri)[Ri]}babelHelpers.classPrivateFieldLooseBase(this,Ri)[Ri]=c.Tag.render(wi||(wi=Si`
			<div class="invite-wrap js-intranet-invitation-block" data-role="success-block" style="position: fixed; left: 0; right: 0; top: 0; bottom: 0; background: #fff; z-index: 90;">
				<div style="height: 78vh;" class="invite-send-success-wrap">
					<div class="invite-send-success-text">${0}</div>
					<div class="invite-send-success-decal-1"></div>
					<div class="invite-send-success-decal-2"></div>
					<div class="invite-send-success-decal-3"></div>
					<div class="invite-send-success-decal-4"></div>
					<div class="invite-send-success-decal-5"></div>
				</div>
			</div>
		`),c.Loc.getMessage("INTRANET_INVITE_DIALOG_SUCCESS_SEND"));return babelHelpers.classPrivateFieldLooseBase(this,Ri)[Ri]}getAnalyticTab(){return null}onSubmit(e){var t,s,i,a,l,r,o,n,c,d,v,b;(t=e.getData())==null?void 0:(s=t.context)==null?void 0:s.submitButton.enable();(i=e.getData())==null?void 0:(a=i.context)==null?void 0:a.submitButton.ready();(l=e.getData())==null?void 0:(r=l.context)==null?void 0:r.changeContent((o=e.getData())==null?void 0:(n=o.context)==null?void 0:n.firstInvitationBlock);(c=e.getData())==null?void 0:(d=c.context)==null?void 0:d.activeMenuItem((v=e.getData())==null?void 0:(b=v.context)==null?void 0:b.firstInvitationBlock)}getSubmitButtonText(){return c.Loc.getMessage("BX24_INVITE_DIALOG_ACTION_INVITE_MORE")}}class Mi{createLocalEmailPage(){return new _t({departmentControl:this.createDepartmentControl(),transport:this.transport,linkRegisterEnabled:this.isSelfRegisterEnabled,analytics:this.analytics})}createEmailPage(){return new Xt({departmentControl:this.createDepartmentControl(),inputsFactory:this.createInputRowFactory(this.useLocalEmailProgram),smsAvailable:this.isInvitationBySmsAvailable,useLocalEmailProgram:this.useLocalEmailProgram,onClickSwitchMode:()=>{this.changeContent("mass-invite")},onClickAddInputRow:()=>{this.getSetupArrow();this.updateArrow()}})}createGroupPage(){var e;const t=(e=this.userOptions)!=null&&e.groupId?parseInt(this.userOptions.groupId,10):0;const s=new Nt({options:{project:true,projectId:t,isAdmin:this.isAdmin,projectLimitExceeded:this.projectLimitExceeded,projectLimitFeatureId:this.projectLimitFeatureId}});return new cs({departmentControl:this.createDepartmentControl(),inputsFactory:this.createInputRowFactory(),tagSelectorGroup:s.renderTagSelector(),onClickAddInputRow:()=>{this.getSetupArrow();this.updateArrow()}})}createExtranetPage(){var e;const t=(e=this.userOptions)!=null&&e.groupId?parseInt(this.userOptions.groupId,10):0;const s={options:{project:"extranet",projectId:t,isAdmin:this.isAdmin,projectLimitExceeded:this.projectLimitExceeded,projectLimitFeatureId:this.projectLimitFeatureId,showCreateButton:!this.isCollabEnabled}};return new ts({inputsFactory:this.createInputRowFactory(),tagSelectorGroup:new Nt(s).renderTagSelector(),onClickAddInputRow:()=>{this.getSetupArrow();this.updateArrow()}})}createRegisterPage(){var e;const t=(e=this.userOptions)!=null&&e.groupId?parseInt(this.userOptions.groupId,10):0;const s=new Nt({options:{project:true,projectId:t,isAdmin:this.isAdmin,projectLimitExceeded:this.projectLimitExceeded,projectLimitFeatureId:this.projectLimitFeatureId}});return new Oi({departmentControl:this.createDepartmentControl(),isCloud:this.isCloud,inputsFactory:this.createInputRowFactory(),withoutConfirm:!this.registerNeedeConfirm,tagSelectorGroup:s.renderTagSelector()})}createIntegratorPage(){return new us}createLinkPage(){return new qs({departmentControl:this.createDepartmentControl(),isAdmin:this.isAdmin,fastRegistrationAvailable:this.isSelfRegisterEnabled,needConfirmRegistration:this.registerNeedeConfirm,wishlist:this.wishlistValue,isCloud:this.isCloud,linkRegisterEnabled:this.isSelfRegisterEnabled,analytics:this.analytics,transport:this.transport})}createMassPage(){return new Pi({departmentControl:this.createDepartmentControl(),smsAvailable:this.isInvitationBySmsAvailable,useOnlyPhone:this.useLocalEmailProgram,onClickSwitchMode:()=>{this.changeContent("invite")}})}createSeccessPage(){return new Ci}}class ji{provide(){const e=new Mi;const t=new Map;if(this.canCurrentUserInvite){if(this.useLocalEmailProgram){t.set("invite-email",e.createLocalEmailPage.call(this))}t.set("invite",e.createEmailPage.call(this));t.set("mass-invite",e.createMassPage.call(this));t.set("invite-with-group-dp",e.createGroupPage.call(this));t.set("add",e.createRegisterPage.call(this));t.set("self",e.createLinkPage.call(this))}if(this.isExtranetInstalled){t.set("extranet",e.createExtranetPage.call(this))}if(this.isCloud&&this.canCurrentUserInvite){t.set("integrator",e.createIntegratorPage.call(this))}t.set("success",e.createSeccessPage.call(this));return t}}class Vi{showForm(){BX.UI.Feedback.Form.open({id:"intranet-active-directory",defaultForm:{id:309,sec:"fbc0n3"}})}}var Gi=babelHelpers.classPrivateFieldLooseKey("initMenu");class xi extends d.EventEmitter{constructor(e){var t,s;super();Object.defineProperty(this,Gi,{value:ki});this.setEventNamespace("BX.Intranet.Invitation");const i=c.Type.isPlainObject(e)?e:{};this.menuContainer=i.menuContainerNode;this.subMenuContainer=i.subMenuContainerNode;this.contentContainer=i.contentContainerNode;this.pageContainer=this.contentContainer.querySelector(".popup-window-tabs-content-invite");this.userOptions=i.userOptions;this.isExtranetInstalled=i.isExtranetInstalled==="Y";this.isCloud=i.isCloud==="Y";this.isAdmin=i.isAdmin==="Y";this.canCurrentUserInvite=i.canCurrentUserInvite===true;this.isInvitationBySmsAvailable=i.isInvitationBySmsAvailable==="Y";this.isCreatorEmailConfirmed=i.isCreatorEmailConfirmed==="Y";this.firstInvitationBlock=i.firstInvitationBlock;this.isSelfRegisterEnabled=i.isSelfRegisterEnabled;this.analyticsLabel=i.analyticsLabel;this.projectLimitExceeded=c.Type.isBoolean(i.projectLimitExceeded)?i.projectLimitExceeded:true;this.projectLimitFeatureId=c.Type.isString(i.projectLimitFeatureId)?i.projectLimitFeatureId:"";this.wishlistValue=c.Type.isStringFilled(i.wishlistValue)?i.wishlistValue:"";this.isCollabEnabled=i.isCollabEnabled==="Y";this.registerNeedeConfirm=i.registerConfirm===true;this.useLocalEmailProgram=i.useLocalEmailProgram===true;this.transport=new he({componentName:i.componentName,signedParameters:i.signedParameters});if(c.Type.isDomNode(this.contentContainer)){this.messageBar=new $({errorContainer:this.contentContainer.querySelector("[data-role='error-message']"),successContainer:this.contentContainer.querySelector("[data-role='success-message']")});BX.UI.Hint.init(this.contentContainer)}if(c.Type.isDomNode(this.menuContainer)){babelHelpers.classPrivateFieldLooseBase(this,Gi)[Gi]()}this.submitButton=new W({node:document.querySelector("#intranet-invitation-btn"),events:{click:e=>{if(!this.isCreatorEmailConfirmed){this.messageBar.showError(c.Loc.getMessage("INTRANET_INVITE_DIALOG_CONFIRM_CREATOR_EMAIL_ERROR"));return}if(!this.submitButton.isWaiting()&&this.submitButton.isEnabled()){this.submitButton.wait();d.EventEmitter.emit(this.navigation.current(),"BX.Intranet.Invitation:submit",{context:this});if(this.isCloud){BX.userOptions.del("intranet.invitation","open_invitation_form_ts")}}}}});this.analytics=new ce(this.analyticsLabel,this.isAdmin);this.analytics.sendOpenSliderData(this.analyticsLabel.source);this.arrowBox=document.querySelector(".invite-wrap-decal-arrow");if(c.Type.isDomNode(this.arrowBox)){this.arrowRect=this.arrowBox.getBoundingClientRect();this.arrowHeight=this.arrowRect.height;this.setSetupArrow()}d.EventEmitter.subscribe("BX.Intranet.Invitation:onChangeForm",(()=>{this.submitButton.enable()}));this.navigation=this.createNavigation();(t=this.navigation)==null?void 0:t.subscribe("onBeforeChangePage",(()=>{this.messageBar.hideAll()}));(s=this.navigation)==null?void 0:s.subscribe("onAfterChangePage",this.onAfterChangePage.bind(this));this.navigation.showFirst();this.subscribe("BX.Intranet.Invitation:onSendData",this.onSendRequest.bind(this));d.EventEmitter.subscribe("BX.Intranet.Invitation:onSubmitReady",(()=>{this.submitButton.ready()}));d.EventEmitter.subscribe("BX.Intranet.Invitation:onSubmitDisabled",(()=>{this.submitButton.disable()}));d.EventEmitter.subscribe("BX.Intranet.Invitation:onSubmitWait",(()=>{this.submitButton.wait()}))}onAfterChangePage(e){const t=this.getSubSection();const s=e.getData().current;let i=null;if(s){i=s.getAnalyticTab();if(s.getSubmitButtonText()){this.submitButton.setLabel(s.getSubmitButtonText())}if(s.getButtonState()===W.ENABLED_STATE){this.submitButton.enable()}else if(s.getButtonState()===W.DISABLED_STATE){this.submitButton.disable()}}if(this.analytics&&t&&i){this.analytics.sendTabData(t,i)}}getSubSection(){const e=/analyticsLabel\[source]=(\w*)&/gm;const t=e.exec(decodeURI(window.location));if((t==null?void 0:t.length)>1){return t[1]}return null}activeMenuItem(e){(this.menuItems||[]).forEach((t=>{c.Dom.removeClass(t.parentElement,"ui-sidepanel-menu-active");if(t.getAttribute("data-action")===e){c.Dom.addClass(t.parentElement,"ui-sidepanel-menu-active")}}))}changeContent(e){if(!c.Type.isStringFilled(e)){return}if(e==="active-directory"){if(!this.activeDirectory){this.activeDirectory=new Vi(this)}this.activeDirectory.showForm();this.analytics.sendTabData(this.getSubSection(),ce.TAB_AD);return}this.navigation.show(e)}createNavigation(){return new ie({container:this.pageContainer,first:this.firstInvitationBlock,pages:(new ji).provide.call(this)})}onSendRequest(e){this.submitButton.disable();const t=e.getData();this.messageBar.hideAll();if(c.Type.isArray(t.errors)&&t.errors.length>0){this.submitButton.enable();this.submitButton.ready();this.messageBar.showError(t.errors[0]);return}t.userOptions=this.userOptions;t.analyticsData=this.analyticsLabel;this.transport.send(t).then((e=>{this.submitButton.ready();if(e.data){if((t==null?void 0:t.action)==="self"){this.messageBar.showSuccess(e.data);this.isSelfRegisterEnabled=t.data.allow_register==="Y";d.EventEmitter.emit(d.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Invitation:selfChange",{selfEnabled:this.isSelfRegisterEnabled})}else if(this.useLocalEmailProgram&&(t==null?void 0:t.action)==="invite"&&(t==null?void 0:t.type)==="invite-email"){d.EventEmitter.emit(d.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Invitation:InviteSuccess")}else{this.changeContent("success");this.submitButton.sendSuccessEvent(e.data)}}d.EventEmitter.subscribe(d.EventEmitter.GLOBAL_TARGET,"SidePanel.Slider:onClose",(()=>{BX.SidePanel.Instance.postMessageTop(window,"BX.Bitrix24.EmailConfirmation:showPopup")}))}),(e=>{this.submitButton.enable();this.submitButton.ready();if(e.data==="user_limit"){B24.licenseInfoPopup.show("featureID",c.Loc.getMessage("BX24_INVITE_DIALOG_USERS_LIMIT_TITLE"),c.Loc.getMessage("BX24_INVITE_DIALOG_USERS_LIMIT_TEXT"))}else{this.messageBar.showError(e.errors[0].message)}if((t==null?void 0:t.action)==="invite"&&this.useLocalEmailProgram&&(t==null?void 0:t.type)==="invite-email"){d.EventEmitter.emit(d.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Invitation:InviteFailed")}}))}createDepartmentControl(){var e,t;const s=c.Type.isArray((e=this.userOptions)==null?void 0:e.departmentList)?this.userOptions.departmentList:[];const i=(t=this.userOptions)==null?void 0:t.rootDepartment;return new _({departmentList:s,rootDepartment:c.Type.isObject(i)?i:null})}createInputRowFactory(e=false){const t=e?N.PHONE:this.isInvitationBySmsAvailable?N.ALL:N.EMAIL;return new R({inputRowType:t})}getSetupArrow(){this.body=document.querySelector(".invite-body");this.panelConfirmBtn=document.getElementById("intranet-invitation-btn");this.sliderContent=document.querySelector(".ui-page-slider-workarea");this.sliderHeader=document.querySelector(".ui-side-panel-wrap-title-wrap");this.buttonPanel=document.querySelector(".ui-button-panel");this.sliderHeaderHeight=this.sliderHeader.getBoundingClientRect().height;this.buttonPanelRect=this.buttonPanel.getBoundingClientRect();this.panelRect=this.panelConfirmBtn.getBoundingClientRect();this.btnWidth=Math.ceil(this.panelRect.width);this.arrowWidth=Math.ceil(this.arrowRect.width);this.sliderContentRect=this.sliderContent.getBoundingClientRect();this.bodyHeight=this.body.getBoundingClientRect().height-this.buttonPanelRect.height+this.sliderHeaderHeight;this.contentHeight=this.arrowHeight+this.sliderContentRect.height+this.buttonPanelRect.height+this.sliderHeaderHeight-65}updateArrow(){this.bodyHeight=this.body.getBoundingClientRect().height-this.buttonPanelRect.height+this.sliderHeaderHeight;this.contentHeight=this.arrowHeight+this.sliderContentRect.height+this.buttonPanelRect.height+this.sliderHeaderHeight-65;this.contentHeight>this.bodyHeight?c.Dom.addClass(this.body,"js-intranet-invitation-arrow-hide"):c.Dom.removeClass(this.body,"js-intranet-invitation-arrow-hide")}setSetupArrow(){this.getSetupArrow();const e=40;c.Dom.style(this.arrowBox,"left",`${this.panelRect.left+this.btnWidth/2-this.arrowWidth/2-e}px`);this.contentHeight>this.bodyHeight?c.Dom.addClass(this.body,"js-intranet-invitation-arrow-hide"):c.Dom.removeClass(this.body,"js-intranet-invitation-arrow-hide");c.Event.bind(window,"resize",(()=>{if(window.innerWidth<=1100){c.Dom.style(this.arrowBox,"left",`${this.panelRect.left+this.btnWidth/2-this.arrowWidth/2-e}px`)}this.getSetupArrow();this.updateArrow()}))}}function ki(){this.menuItems=Array.prototype.slice.call(this.menuContainer.querySelectorAll("a"));if(c.Type.isDomNode(this.subMenuContainer)){const e=Array.prototype.slice.call(this.subMenuContainer.querySelectorAll("a"));this.menuItems=[...this.menuItems,...e]}(this.menuItems||[]).forEach((e=>{c.Event.bind(e,"click",(()=>{this.changeContent(e.getAttribute("data-action"));this.activeMenuItem(this.navigation.getCurrentCode())}));if(e.getAttribute("data-action")===this.firstInvitationBlock){c.Dom.addClass(e.parentElement,"ui-sidepanel-menu-active")}else{c.Dom.removeClass(e.parentElement,"ui-sidepanel-menu-active")}}))}e.Form=xi;e.DepartmentControl=_;e.MassInvitationField=li})(this.BX.Intranet.Invitation=this.BX.Intranet.Invitation||{},BX.UI.Analytics,BX,BX,BX.UI,BX.Main,BX.UI,BX.Intranet,BX.UI.EntitySelector,BX,BX.Event);
//# sourceMappingURL=script.map.js