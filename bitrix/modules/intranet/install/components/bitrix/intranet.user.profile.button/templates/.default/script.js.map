{"version":3,"file":"script.js","sources":["src/options.js","src/stress-level.js","src/theme-picker.js","src/ustat.js","src/user-login-history.js","src/otp.js","src/widget.js"],"sourcesContent":["export default class Options {\n\tstatic eventNameSpace = 'BX.Intranet.Userprofile:';\n}","import {Type, Tag, Loc, ajax, Text} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport Options from \"./options\";\n\ntype StressLevelResponse = {\n\tid: number,\n\tdate: string,\n\tvalue: number,\n\ttype: string,\n\ttypeDescription: string,\n\tcomment: string,\n\thash: string,\n\turl: {\n\t\tcheck: string,\n\t\tresult: string\n\t}\n};\nexport class StressLevel {\n\tconstructor() {\n\t}\n\n\tstatic getOpenSliderFunction(url)\n\t{\n\t\tif (Type.isStringFilled(url))\n\t\t{\n\t\t\treturn () => {\n\t\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, Options.eventNameSpace + 'onNeedToHide');\n\t\t\t\tBX.SidePanel.Instance.open(url, {\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tdata: {},\n\t\t\t\t\twidth: 500\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn () => {};\n\t}\n\n\tstatic showData(data: StressLevelResponse): Element\n\t{\n\t\tdata.value = parseInt(data.value || 0);\n\n\t\tconst result = Tag.render`\n\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --vertical\" id=\"user-indicator-pulse\">\n\t\t\t\t<div class=\"system-auth-form__item-block --margin-bottom\">\n\t\t\t\t\t<div class=\"system-auth-form__stress-widget\">\n\t\t\t\t\t\t<div data-role=\"value-degree\" class=\"system-auth-form__stress-widget--arrow\" style=\"transform: rotate(90deg);\"></div>\n\t\t\t\t\t\t<div class=\"system-auth-form__stress-widget--content\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__stress-widget--content-title\">${Loc.getMessage('INTRANET_USER_PROFILE_STRESSLEVEL_NORESULT_INDICATOR_TEXT')}</div>\n\t\t\t\t\t\t\t<div data-role=\"value\" class=\"system-auth-form__stress-widget--content-progress ${data.value > 0 ? '' : '--empty'}\">0</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --stress-widget-sp\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-block --center --width-100\">\n\t\t\t\t\t\t\t<span class=\"system-auth-form__stress-widget--status  --flex --${Text.encode(data.type)}\">${Text.encode(data.typeDescription)}</span>\n\t\t\t\t\t\t\t<span class=\"system-auth-form__icon-help\" onclick=\"${this.getOpenSliderFunction(data.url.result)}\"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --link-dotted\" onclick=\"${this.getOpenSliderFunction(data.url.check)}\">${Loc.getMessage('INTRANET_USER_PROFILE_STRESSLEVEL_NORESULT_BUTTON')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"system-auth-form__item-block --flex --center\">\n\t\t\t\t\t<div class=\"system-auth-form__stress-widget--message\">${Text.encode(data.comment)}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\tsetTimeout(() => {\n\t\t\tconst intervalId = setInterval((value) => {\n\t\t\t\tvalue.current++;\n\t\t\t\tvalue.node.innerHTML = value.current;\n\t\t\t\tif (value.current >= value.end)\n\t\t\t\t{\n\t\t\t\t\tclearInterval(intervalId);\n\t\t\t\t}\n\t\t\t}, 600 / data.value, {\n\t\t\t\tcurrent: 0,\n\t\t\t\tend: data.value,\n\t\t\t\tnode: result.querySelector('[data-role=\"value\"]')\n\t\t\t});\n\t\t\tresult.querySelector('[data-role=\"value-degree\"]').style.transform = 'rotate(' + (1.8 * data.value) + 'deg)'\n\t\t}, 1000);\n\t\treturn result;\n\t}\n\n\tstatic showEmpty({url: {check}}): Element\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --vertical --empty-stress --clickable\" onclick=\"${this.getOpenSliderFunction(check)}\">\n\t\t\t\t<div class=\"system-auth-form__item-block --margin-bottom\">\n\t\t\t\t\t<div class=\"system-auth-form__stress-widget\">\n\t\t\t\t\t\t<div data-role=\"value-degree\" class=\"system-auth-form__stress-widget--arrow\" style=\"transform: rotate(90deg);\"></div>\n\t\t\t\t\t\t<div class=\"system-auth-form__stress-widget--content\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__stress-widget--content-title\">${Loc.getMessage('INTRANET_USER_PROFILE_STRESSLEVEL_NORESULT_INDICATOR_TEXT')}</div>\n\t\t\t\t\t\t\t<div data-role=\"value\" class=\"system-auth-form__stress-widget--content-progress --empty\">?</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --stress-widget-sp\">\n\t\t\t\t\t\t<div class=\"system-auth-form__stress-widget--message\">${Loc.getMessage('INTRANET_USER_PROFILE_STRESSLEVEL_NORESULT_TITLE')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"system-auth-form__item-block --flex --center\">\n\t\t\t\t\t<div class=\"system-auth-form__item-title --link-dotted\">${Loc.getMessage('INTRANET_USER_PROFILE_STRESSLEVEL_NORESULT_BUTTON')}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"system-auth-form__item-new\">\n\t\t\t\t\t<div class=\"system-auth-form__item-new--title\">${Loc.getMessage('INTRANET_USER_PROFILE_STRESSLEVEL_RESULT_COME_ON')}</div>\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t}\n\n\tstatic getPromise({signedParameters, componentName, userId, data}): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst promise = data ? Promise.resolve({data}) :\n\t\t\t\tajax.runAction('socialnetwork.api.user.stresslevel.get', {\n\t\t\t\t\tsignedParameters: signedParameters,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tc: componentName,\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tuserId: userId\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tpromise.then(({data}) => {\n\t\t\t\t\tif (data && data.id !== undefined && data.value !== undefined)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn resolve(this.showData(data));\n\t\t\t\t\t}\n\n\t\t\t\t\tconst node = Loc.getMessage('USER_ID') === userId ?\n\t\t\t\t\t\tthis.showEmpty(data) : document.createElement('DIV');\n\n\t\t\t\t\treturn resolve(node);\n\t\t\t\t})\n\t\t\t\t.catch((error: Error) => {\n\t\t\t\t\tresolve(this.showData({\n\t\t\t\t\t\tid: undefined,\n\t\t\t\t\t\tvalue: undefined,\n\t\t\t\t\t\turls: {\n\t\t\t\t\t\t\tcheck: undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t})\n\t\t\t})\n\t\t;\n\t}\n}","import {Tag, Loc, Type, Dom, ajax} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport Options from './options';\n\ntype ThemePickerData = {\n\tid: string,\n\tlightning: ?string,\n\ttitle: string,\n\tpreviewImage: string,\n\tpreviewColor: string\n};\n\nexport default class ThemePicker extends EventEmitter {\n\t#params: ThemePickerData;\n\n\t#container;\n\n\tconstructor(data: ThemePickerData)\n\t{\n\t\tsuper();\n\t\tthis.#params = Object.assign({}, data);\n\t\tthis.#params.lightning = String(data.id).indexOf('light:') === 0 ? 'light' : (\n\t\t\tString(data.id).indexOf('dark:') === 0 ? 'dark' : null\n\t\t);\n\t\tthis.applyTheme = this.applyTheme.bind(this);\n\t\tthis.setEventNamespace(Options.eventNameSpace);\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Intranet.Bitrix24:ThemePicker:onThemeApply',\n\t\t\t({data: {id, theme}}) =>\n\t\t\t{\n\t\t\t\tthis.#params.id =  id;\n\t\t\t\tthis.#params.lightning = String(id).indexOf('light:') === 0 ? 'light' : (\n\t\t\t\t\tString(id).indexOf('dark:') === 0 ? 'dark' : null\n\t\t\t\t);\n\t\t\t\tthis.#params.title = theme.title;\n\t\t\t\tthis.#params.previewImage = theme.previewImage;\n\t\t\t\tthis.#params.previewColor = theme.previewColor;\n\t\t\t\tthis.applyTheme();\n\t\t\t}\n\t\t)\n\t}\n\n\tapplyTheme()\n\t{\n\t\tconst container = this.getContainer();\n\n\t\tif (Type.isStringFilled(this.#params.previewImage) && this.#params.lightning)\n\t\t{\n\t\t\tcontainer.style.removeProperty('backgroundImage');\n\t\t\tcontainer.style.removeProperty('backgroundSize');\n\t\t\tcontainer.style.backgroundImage = 'url(\"' + this.#params.previewImage + '\")';\n\t\t\tcontainer.style.backgroundSize = 'cover';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcontainer.style.background = 'none';\n\t\t}\n\n\t\tif (Type.isStringFilled(this.#params.previewColor))\n\t\t{\n\t\t\tthis.getContainer().style.backgroundColor = this.#params.previewColor;\n\t\t}\n\n\t\tif (!this.#params.lightning)\n\t\t{\n\t\t\tcontainer.style.backgroundColor = 'rgba(255,255,255,1)';\n\t\t}\n\n\t\tDom.removeClass(container, '--light --dark');\n\t\tDom.addClass(container, '--' + this.#params.lightning);\n\t}\n\n\tgetContainer()\n\t{\n\t\tif (this.#container)\n\t\t{\n\t\t\treturn this.#container;\n\t\t}\n\n\t\tconst onclick = () => {\n\t\t\tBX.Intranet.Bitrix24.ThemePicker.Singleton.showDialog(false);\n\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, Options.eventNameSpace + ':onOpen');\n\t\t};\n\t\tthis.#container = Tag.render`\n\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --border ${this.#params.lightning ? '--' + this.#params.lightning : ''} --padding-sm\">\n\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t<div data-role=\"preview-color\" class=\"system-auth-form__item-logo--image --theme\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"system-auth-form__item-container --flex --column\">\n\t\t\t\t\t<div class=\"system-auth-form__item-title --white-space --block\">\n\t\t\t\t\t\t<span data-role=\"title\">${Loc.getMessage('AUTH_THEME_DIALOG')}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-content --margin-top-auto --center --center-force\">\n\t\t\t\t\t\t<div class=\"ui-qr-popupcomponentmaker__btn\" onclick=\"${onclick}\">${Loc.getMessage('INTRANET_USER_PROFILE_CHANGE')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t\tsetTimeout(this.applyTheme, 0);\n\t\treturn this.#container;\n\t}\n\n\tstatic getPromise()\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runComponentAction('bitrix:intranet.user.profile.button', 'getThemePickerData', {\n\t\t\t\tmode: 'class'\n\t\t\t}).then((response) => {\n\t\t\t\tconst themePicker = new this(response.data);\n\t\t\t\tresolve(themePicker.getContainer())\n\t\t\t}).catch((reject));\n\t\t});\n\t}\n}","import {Text, Type, Tag, Loc, ajax} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport Options from \"./options\";\ntype userPulseUserData = {\n\tFULL_NAME: string,\n\tAVATAR_SRC: string,\n\tID: string\n};\ntype userPulseData = {\n\tUSERS_RATING: {\n\t\tposition: number,\n\t\trange: number,\n\t\ttop: [\n\t\t\t{\n\t\t\t\tUSER_ID: string,\n\t\t\t\tACTIVITY: number\n\t\t\t}\n\t\t]\n\t},\n\tUSERS_INFO: userPulseUserData[]\n};\n\nexport default class Ustat {\n\tdata: userPulseData;\n\tconstructor(data) {\n\t\tthis.data = data;\n\t\tthis.onclickHandle = this.onclickHandle.bind(this);\n\t}\n\n\t#renderUsers()\n\t{\n\t\tconst userList = document.createDocumentFragment();\n\t\tlet myPosition = parseInt(this.data['USERS_RATING']['position']);\n\n\t\tlet myActivity = 0;\n\t\tconst usersData = Type.isPlainObject(this.data['USERS_RATING']['top'])\n\t\t\t? Object.values(this.data['USERS_RATING']['top']) : (\n\t\t\t\tType.isArray(this.data['USERS_RATING']['top']) && this.data['USERS_RATING']['top'].length > 0\n\t\t\t\t\t? [...this.data['USERS_RATING']['top']] : [{'USER_ID': Loc.getMessage('USER_ID'), ACTIVITY: 0}]);\n\t\tconst dataResult = myPosition > 5 ?\n\t\t\t[...usersData.slice(0, 3), ...usersData.slice(-1), null]\n\t\t\t: usersData\n\t\t;\n\t\tdataResult\n\t\t\t.forEach((userRating, index) => {\n\t\t\t\tif (userRating === null)\n\t\t\t\t{\n\t\t\t\t\tuserList.appendChild(Tag.render`<div class=\"system-auth-form__userlist-item --list\"></div>`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet fullName = userRating['ACTIVITY'];\n\t\t\t\tlet avatarSrc = '';\n\t\t\t\tif (this.data['USERS_INFO'][userRating['USER_ID']])\n\t\t\t\t{\n\t\t\t\t\tfullName = [this.data['USERS_INFO'][userRating['USER_ID']]['FULL_NAME'], ': ', userRating['ACTIVITY']].join('');\n\t\t\t\t\tavatarSrc = String(this.data['USERS_INFO'][userRating['USER_ID']]['AVATAR_SRC']).length > 0\n\t\t\t\t\t\t? this.data['USERS_INFO'][userRating['USER_ID']]['AVATAR_SRC'] : null;\n\t\t\t\t}\n\t\t\t\tconst isCurrentUser = String(userRating['USER_ID']) === String(Loc.getMessage('USER_ID'));\n\t\t\t\tif (isCurrentUser)\n\t\t\t\t{\n\t\t\t\t\tmyActivity = userRating['ACTIVITY'];\n\t\t\t\t}\n\t\t\t\tuserList.appendChild(\n\t\t\t\t\tTag.render`\n\t\t\t\t\t\t<div title=\"${Text.encode(fullName)}\" class=\"system-auth-form__userlist-item ui-icon ui-icon ui-icon-common-user\">\n\t\t\t\t\t\t\t<i ${avatarSrc ? `style=\"background-image: url('${encodeURI(avatarSrc)}');background-size: cover;\"` : ''}></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`\n\t\t\t\t);\n\t\t\t})\n\t\t;\n\t\treturn {\n\t\t\tuserList,\n\t\t\tmyPosition,\n\t\t\trange: parseInt(this.data['USERS_RATING']['range']),\n\t\t\tmyActivity\n\t\t};\n\t}\n\n\tshowData(): Element\n\t{\n\t\tconst {myPosition, userList, range} = this.#renderUsers();\n\t\tlet div;\n\t\tif (!this.data['ENABLED'])\n\t\t{\n\t\t\tdiv = Tag.render`\n\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --without-stat\">\n\t\t\t\t<div class=\"system-auth-form__item-container --flex --column\">\n\t\t\t\t\t<div class=\"system-auth-form__item-title\">${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_TITLE')}</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --center\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --lighter\" data-role=\"empty-info\">${Loc.getMessage('INTRANET_USER_PROFILE_DISABLED')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\t} else if (range > 0 && myPosition > 0)\n\t\t{\n\t\t\tdiv = Tag.render`\n\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --clickable\" onclick=\"${this.onclickHandle}\">\n\t\t\t\t<div class=\"system-auth-form__item-container\">\n\t\t\t\t\t<div class=\"system-auth-form__item-title --without-margin\">${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_TITLE')}</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-title --link-light --margin-s\">\n\t\t\t\t\t\t<span>${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_MY_RATING')}</span>\n\t\t\t\t\t\t<span class=\"system-auth-form__icon-help\" data-hint=\"${Loc.getMessage('INTRANET_USTAT_COMPANY_HELP_RATING')}\" data-hint-no-icon></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-title --link-light\" data-role=\"empty-info\">${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_MY_IS_EMPTY')}</div>\n\n\t\t\t\t\t<div class=\"system-auth-form__item-title --white-space --margin-xl\">\n\t\t\t\t\t\t<span>${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_MY_POSITION',\n\t\t\t\t{'#POSITION#': myPosition, '#AMONG#': range})}</span>\n\t\t\t\t\t\t<span class=\"system-auth-form__ustat-icon --up\"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__userlist\">\n\t\t\t\t\t\t${userList}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst onclick = range > 0 ? this.onclickHandle : () => {};\n\t\t\tdiv = Tag.render`\n\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --without-stat ${range > 0 ? '--clickable' : ''}\" onclick=\"${onclick}\">\n\t\t\t\t<div class=\"system-auth-form__item-container --flex --column\">\n\t\t\t\t\t<div class=\"system-auth-form__item-title\">${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_TITLE')}</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --center\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --lighter\" data-role=\"empty-info\">${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_MY_IS_EMPTY_BRIEF')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\t}\n\n\t\tBX.UI.Hint.init(div);\n\t\treturn div;\n\t}\n\n\tonclickHandle(event)\n\t{\n\t\tEventEmitter.emit(Options.eventNameSpace + 'onNeedToHide');\n\t\tif (window['openIntranetUStat'])\n\t\t{\n\t\t\topenIntranetUStat(event);\n\t\t}\n\t}\n\n\tshowWideData()\n\t{\n\t\tconst {myPosition, userList, range} = this.#renderUsers();\n\t\tconst div =  Tag.render`\n\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --center --padding-ustat ${range > 0 ? '--clickable' : '--without-stat'}\">\n\t\t\t\t<div class=\"system-auth-form__item-image\">\n\t\t\t\t\t<div class=\"system-auth-form__item-image--src --ustat\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"system-auth-form__item-container --overflow\">\n\t\t\t\t\t<div class=\"system-auth-form__item-title --xl --without-margin\">${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_TITLE')}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"system-auth-form__item-container --block\">\n\t\t\t\t\t<div class=\"system-auth-form__item-title --link-light\" data-role=\"empty-info\">${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_MY_IS_EMPTY')}</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container--inline\" data-role=\"my-position\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --link-light --without-margin --margin-right\">\n\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_MY_RATING')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --white-space --margin-xl\">\n\t\t\t\t\t\t\t<span>${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_MY_POSITION',\n\t\t\t{'#POSITION#': myPosition, '#AMONG#': range})}</span>\n\t\t\t\t\t\t\t<span class=\"system-auth-form__ustat-icon --up\"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__userlist\" data-role=\"user-list\">\n\t\t\t\t\t\t${userList}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"system-auth-form__icon-help --absolute-right-bottom\" data-hint=\"${Loc.getMessage('INTRANET_USTAT_COMPANY_HELP_RATING')}\" data-hint-no-icon></div>\n\t\t\t</div>\n\t\t`;\n\t\tif (range > 0)\n\t\t{\n\t\t\tdiv.addEventListener('click', this.onclickHandle);\n\t\t}\n\t\treturn div;\n\t}\n\n\tstatic getPromise({userId, isNarrow, data}): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t(data ?\n\t\t\t\tPromise.resolve({data}) :\n\t\t\t\tajax.runComponentAction(\n\t\t\t\t\t'bitrix:intranet.ustat.department',\n\t\t\t\t\t'getJson',\n\t\t\t\t\t{mode: 'class', data: {}}\n\t\t\t\t))\n\t\t\t\t.then(({data}) => {\n\t\t\t\t\tconst ustat = new this(data);\n\t\t\t\t\tresolve(isNarrow ? ustat.showData() : ustat.showWideData());\n\t\t\t\t})\n\t\t\t\t.catch((errors) => {\n\t\t\t\t\terrors = Type.isArray(errors) ? errors : [errors];\n\t\t\t\t\tconst node = document.createElement('ul');\n\t\t\t\t\terrors.forEach(({message}) => {\n\t\t\t\t\t\tconst errorNode = document.createElement('li');\n\t\t\t\t\t\terrorNode.innerHTML = message;\n\t\t\t\t\t\terrorNode.className = 'ui-alert-message';\n\t\t\t\t\t\tnode.appendChild(errorNode);\n\t\t\t\t\t});\n\t\t\t\t\tresolve(Tag.render`\n\t\t\t\t\t\t<div class=\"ui-alert ui-alert-danger\">\n\t\t\t\t\t\t\t${node}\n\t\t\t\t\t\t</div>`)\n\t\t\t\t});\n\n\t\t});\n\t}\n}\n","import { ajax, Dom, Loc, Tag } from 'main.core';\nimport { Loader } from 'main.loader';\nimport Widget from './widget';\n\nexport default class UserLoginHistory\n{\n\t#config: Object;\n\t#widget: Widget;\n\n\tconstructor(config: Object, widget: Widget)\n\t{\n\t\tthis.#config = config;\n\t\tthis.#widget = widget;\n\t}\n\n\t#isActive(): boolean\n\t{\n\t\treturn this.#config.isAvailableUserLoginHistory && this.#config.isConfiguredUserLoginHistory;\n\t}\n\n\t#isAvailable(): boolean\n\t{\n\t\treturn this.#config.isAvailableUserLoginHistory;\n\t}\n\n\t#isConfigured(): boolean\n\t{\n\t\treturn this.#config.isConfiguredUserLoginHistory;\n\t}\n\n\thandlerLogoutButton()\n\t{\n\t\tif (this.#isActive())\n\t\t{\n\t\t\tthis.#showLogoutPopup();\n\t\t}\n\t}\n\n\t#getMainButton(): ?HTMLElement\n\t{\n\t\tconst handlerLogoutButton = () => {\n\t\t\tthis.#showLogoutPopup();\n\t\t};\n\n\t\tconst showConfigureSlider = () => {\n\t\t\tthis.#widget.getPopup().close();\n\t\t\tBX.Helper.show('redirect=detail&code=16615982');\n\t\t};\n\n\t\tif (this.#isActive())\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-qr-popupcomponentmaker__btn\" onclick=\\\"${handlerLogoutButton}\\\">${Loc.getMessage('INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_ALL_DEVICE')}</div>\n\t\t\t`;\n\t\t}\n\t\telse if(!this.#isConfigured())\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class='system-auth-form__settings' onclick=\"${showConfigureSlider}\">${Loc.getMessage('INTRANET_USER_PROFILE_CONFIGURE')}</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t#getBottomButton(handler: function): ?HTMLElement\n\t{\n\t\tif (this.#isActive())\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item-container\">\n\t\t\t\t\t<div class=\"system-auth-form__show-history\" onclick=\"${handler}\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_USER_PROFILE_HISTORY_BUTTON_SHOW_FULL_LIST')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t#getLockIcon(): ?HTMLElement\n\t{\n\t\tconst showInfoSlider = () => {\n\t\t\tthis.#widget.getPopup().close();\n\t\t\tBX.UI.InfoHelper.show(\"limit_office_login_history\");\n\t\t};\n\n\t\tif (!this.#isAvailable())\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item-title-logo --lock\" onclick=\"${showInfoSlider}\">\n\t\t\t\t\t<i></i>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetContainer(): Element\n\t{\n\t\tconst showSliderLoginHistory = () => {\n\t\t\tif (this.#isActive())\n\t\t\t{\n\t\t\t\tthis.#widget.getPopup().close();\n\t\t\t\tBX.SidePanel.Instance.open(this.#config.url, {\n\t\t\t\t\tallowChangeHistory: false,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (!this.#isAvailable())\n\t\t\t{\n\t\t\t\tthis.#widget.getPopup().close();\n\t\t\t\tBX.UI.InfoHelper.show(\"limit_office_login_history\");\n\t\t\t}\n\t\t};\n\n\t\tlet loginHistoryWidget = Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --vertical\">\n\t\t\t\t\t<div class=\"system-auth-form__item-container --center ${this.#isActive() ? '--border' : ''}\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image ${this.#isActive() ? '--history' : '--history-gray'}\" onclick=\"${showSliderLoginHistory}\">\n\t\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__item-container --center\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-title --sm ${this.#isActive() ? '--link' : ''}\" onclick=\"${showSliderLoginHistory}\">${Loc.getMessage('INTRANET_USER_PROFILE_HISTORY_TITLE')}</div>\n\t\t\t\t\t\t\t${this.#getLockIcon()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__item-content\">\n\t\t\t\t\t\t\t${this.#getMainButton()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__visited\">\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.#getBottomButton(showSliderLoginHistory)}\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\tconst container = loginHistoryWidget.querySelector('.system-auth-form__visited');\n\n\t\tif (this.#isActive())\n\t\t{\n\t\t\tconst loader = UserLoginHistory.#getLoader();\n\t\t\tloader.show(container);\n\n\t\t\tajax.runComponentAction('bitrix:intranet.user.login.history', 'getListLastLogin', {\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\tlimit: 1,\n\t\t\t\t},\n\t\t\t}).then((response) => {\n\t\t\t\tloader.hide();\n\t\t\t\tconst devices = response.data;\n\t\t\t\tconst keys = Object.keys(devices);\n\t\t\t\tkeys.forEach((key) => {\n\t\t\t\t\tconst description = UserLoginHistory.#prepareDescriptionLoginHistory(devices[key]['DEVICE_PLATFORM'],\n\t\t\t\t\t\tdevices[key]['GEOLOCATION'], devices[key]['BROWSER']);\n\t\t\t\t\tconst time = UserLoginHistory.#prepareDateTimeForLoginHistory(devices[key]['LOGIN_DATE']);\n\t\t\t\t\tconst device = Tag.render`\n\t\t\t\t\t\t<div class=\"system-auth-form__visited-item\">\n\t\t\t\t\t\t\t<div data-hint='${Loc.getMessage('INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_THIS_DEVICE_DESCRIPTION')}' class=\"system-auth-form__visited-icon --${devices[key]['DEVICE_TYPE']}\" onclick=\"${showSliderLoginHistory}\" data-hint-no-icon></div>\n\t\t\t\t\t\t\t<script>\n\t\t\t\t\t\t\t\tBX.ready(() => {\n\t\t\t\t\t\t\t\t\tBX.UI.Hint.init(document.querySelector(\".system-auth-form__visited-icon --${devices[key]['DEVICE_TYPE']}\"));\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t</script>\n\t\t\t\t\t\t\t<div class=\"system-auth-form__visited-text\" onclick=\"${showSliderLoginHistory}\">${description}</div>\n\t\t\t\t\t\t\t<div class=\"system-auth-form__visited-time\" onclick=\"${showSliderLoginHistory}\">${time}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`;\n\t\t\t\t\tDom.append(device, container);\n\t\t\t\t});\n\t\t\t}).catch(() => {\n\t\t\t\tloader.hide();\n\t\t\t});\n\t\t}\n\n\t\treturn loginHistoryWidget;\n\t}\n\n\t#showLogoutPopup(): void\n\t{\n\t\tBX.UI.Dialogs.MessageBox.show({\n\t\t\tmessage: Loc.getMessage('INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_ALL_DEVICE_WITHOUT_THIS_MESSAGE'),\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_ALL_DEVICE_TITLE'),\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.YES_CANCEL,\n\t\t\tminWidth: 400,\n\t\t\tpopupOptions: {\n\t\t\t\tcontentBackground: 'transparent',\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tpadding: 0,\n\t\t\t\tbackground: '',\n\t\t\t\tevents: {\n\t\t\t\t\tonShow: () => {\n\t\t\t\t\t\tthis.#widget.getPopup().getPopup().setAutoHide(false);\n\t\t\t\t\t},\n\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\tthis.#widget.getPopup().getPopup().setAutoHide(true);\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t},\n\t\t\tonYes: (messageBox) => {\n\t\t\t\tajax.runComponentAction('bitrix:intranet.user.profile.password', 'logout', {\n\t\t\t\t\tmode: 'ajax',\n\t\t\t\t}).then(() => {\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_ALL_DEVICE_WITHOUT_THIS_RESULT'),\n\t\t\t\t\t\tautoHideDelay: 1800,\n\t\t\t\t\t});\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_ALL_DEVICE_ERROR'),\n\t\t\t\t\t\tautoHideDelay: 3600,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\tstatic #prepareDescriptionLoginHistory(deviceType: string, geolocation: string, browser: string): string\n\t{\n\t\tconst arrayDescription = [];\n\n\t\tif(browser)\n\t\t{\n\t\t\tarrayDescription.push(browser);\n\t\t}\n\n\t\tif(geolocation)\n\t\t{\n\t\t\tarrayDescription.push(geolocation);\n\t\t}\n\n\t\tif(deviceType)\n\t\t{\n\t\t\tarrayDescription.push(deviceType);\n\t\t}\n\n\t\treturn arrayDescription.join(', ');\n\t}\n\n\tstatic #getLoader(): Loader\n\t{\n\t\treturn new Loader({\n\t\t\tsize: 20,\n\t\t\tmode: 'inline',\n\t\t});\n\t}\n\n\tstatic #prepareDateTimeForLoginHistory(dateTime: string): string\n\t{\n\t\tconst format = [\n\t\t\t['-', 'd.m.Y H:i:s'],\n\t\t\t['s', 'sago'],\n\t\t\t['i', 'iago'],\n\t\t\t['H', 'Hago'],\n\t\t\t['d', 'dago'],\n\t\t\t['m', 'mago'],\n\t\t];\n\t\treturn ' - ' + BX.date.format(format, new Date(dateTime), new Date());\n\t}\n}","import {Loc, Tag, Text, Uri} from \"main.core\";\nimport {Menu} from \"main.popup\";\nimport {BaseEvent, EventEmitter} from \"main.core.events\";\nimport Options from \"./options\";\n\nexport class Otp\n{\n\tisSingle: boolean;\n\tconfig;\n\n\tconstructor(isSingle: boolean = false, config)\n\t{\n\t\tthis.isSingle = isSingle;\n\t\tthis.config = config;\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\tconst isInstalled = this.config.IS_ACTIVE === 'Y';\n\t\tconst onclick = () => {\n\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, Options.eventNameSpace + ':onOpen');\n\t\t\tif (String(this.config.URL).length > 0)\n\t\t\t{\n\t\t\t\tUri.addParam(this.config.URL, {page: 'otpConnected'});\n\t\t\t\tBX.SidePanel.Instance.open(Uri.addParam(this.config.URL, {page: 'otpConnected'}), {width: 1100});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconsole.error('Otp page is not defined. Check the component params');\n\t\t\t}\n\t\t};\n\t\tconst button = isInstalled ?\n\t\t\tTag.render`<div class=\"ui-qr-popupcomponentmaker__btn\" style=\"margin-top: auto\" onclick=\"${onclick}\">${Loc.getMessage('INTRANET_USER_PROFILE_TURNED_ON')}</div>`\n\t\t\t:\n\t\t\tTag.render`<div class=\"ui-qr-popupcomponentmaker__btn\" style=\"margin-top: auto\" onclick=\"${onclick}\">${Loc.getMessage('INTRANET_USER_PROFILE_TURN_ON')}</div>`;\n\t\tconst onclickHelp = () => {\n\t\t\ttop.BX.Helper.show('redirect=detail&code=17728602');\n\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, Options.eventNameSpace + ':onOpen');\n\t\t};\n\t\tif (this.isSingle !== true)\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --padding-bottom-10 ${isInstalled ? ' --active' : ''}\">\n\t\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image --authentication\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --flex --column --flex-start\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --without-margin --block\">\n\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_USER_PROFILE_OTP_MESSAGE')}\n\t\t\t\t\t\t\t<span class=\"system-auth-form__icon-help --inline\" onclick=\"${onclickHelp}\"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${isInstalled ?\n\t\t\t\t\t\t\tTag.render`\n\t\t\t\t\t\t\t\t<div class=\"system-auth-form__item-title --link-dotted\" onclick=\"${onclick}\">${Loc.getMessage('INTRANET_USER_PROFILE_CONFIGURE')}</div>\n\t\t\t\t\t\t\t` : ''\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<div class=\"system-auth-form__item-content --margin-top-auto --center --center-force\">\n\t\t\t\t\t\t\t${button}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${isInstalled ? '' : `\n\t\t\t\t\t\t<div class=\"system-auth-form__item-new\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-new--title\">${Loc.getMessage('INTRANET_USER_PROFILE_OTP_TITLE')}</div>\n\t\t\t\t\t\t</div>`\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\tlet menuPopup = null;\n\t\tconst popupClick = (event: MouseEvent) => {\n\t\t\tevent.stopPropagation();\n\t\t\tconst items = [\n\t\t\t\t{\n\t\t\t\t\ttext: Loc.getMessage('INTRANET_USER_PROFILE_CONFIGURE'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tmenuPopup.close();\n\t\t\t\t\t\tonclick();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t];\n\t\t\tmenuPopup = (menuPopup || (new Menu(`menu-otp-${Text.getRandom()}`, event.target, items, {\n\t\t\t\tclassName: 'system-auth-form__popup',\n\t\t\t\tangle: true,\n\t\t\t\toffsetLeft: 10,\n\t\t\t\tautoHide: true,\n\t\t\t\tevents: {\n\t\t\t\t\tonShow: (popup) => {\n\t\t\t\t\t\tEventEmitter.emit(\n\t\t\t\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t\t\tOptions.eventNameSpace + ':showOtpMenu',\n\t\t\t\t\t\t\tnew BaseEvent({\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tpopup: popup.target,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t})));\n\t\t\tmenuPopup.toggle();\n\t\t};\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --padding-sm-all ${isInstalled ? ' --active' : ''} --vertical --center\">\n\t\t\t\t\t<div class=\"system-auth-form__item-logo --margin-bottom --center system-auth-form__item-container --flex\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image --authentication\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --flex\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --light --center --s\">\n\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_USER_PROFILE_OTP_MESSAGE')}\n\t\t\t\t\t\t\t <span class=\"system-auth-form__icon-help\" onclick=\"${onclickHelp}\"></span> \n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${isInstalled ? Tag.render`<div class=\"system-auth-form__config --absolute\" onclick=\"${popupClick}\"></div>` : ''}\n\t\t\t\t\t<div class=\"system-auth-form__item-container --flex --column --space-around\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-content --flex --display-flex\">\n\t\t\t\t\t\t\t${button}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${isInstalled ? '' : `\n\t\t\t\t\t\t<div class=\"system-auth-form__item-new system-auth-form__item-new-icon --ssl\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-new--title\">${Loc.getMessage('INTRANET_USER_PROFILE_OTP_TITLE')}</div>\n\t\t\t\t\t\t</div>`\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t`;\n\t}\n}","import {Uri, Type, Tag, Cache, Loc, Browser, Text, Dom, ajax, Event} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {PopupComponentsMaker} from 'ui.popupcomponentsmaker';\nimport {StressLevel} from './stress-level';\nimport ThemePicker from './theme-picker';\nimport {Menu} from 'main.popup';\nimport 'main.qrcode';\nimport Options from \"./options\";\nimport Ustat from \"./ustat\";\nimport UserLoginHistory from './user-login-history';\nimport {QrAuthorization} from \"ui.qrauthorization\";\nimport {Otp} from \"./otp\";\nimport {DesktopApi} from 'im.v2.lib.desktop-api';\n\nconst widgetMarker = Symbol('user.widget');\nexport default class Widget extends EventEmitter\n{\n\t#container: Element;\n\t#popup: ?PopupComponentsMaker;\n\t#profile = null;\n\t#features = {};\n\t#cache = new Cache.MemoryCache();\n\n\n\tconstructor(container, {\n\t\tprofile: {ID, FULL_NAME, PHOTO, MASK, STATUS, URL, WORK_POSITION},\n\t\tcomponent: {componentName, signedParameters},\n\t\tfeatures\n\t})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace(Options.eventNameSpace);\n\t\tthis.#setEventHandlers();\n\t\tthis.#container = container;\n\t\tthis.#profile = {ID, FULL_NAME, PHOTO, MASK, STATUS, URL, WORK_POSITION};\n\t\tthis.#features = features;\n\t\tif (!Type.isStringFilled(this.#features.browser))\n\t\t{\n\t\t\tthis.#features.browser =\n\t\t\t\t(Browser.isLinux() ? 'Linux'\n\t\t\t\t: (Browser.isWin() ? 'Windows' : 'MacOs')\n\t\t\t\t)\n\t\t\t;\n\t\t}\n\n\t\tthis.#cache.set('componentParams', {componentName, signedParameters});\n\t\tthis.hide = this.hide.bind(this);\n\t}\n\n\ttoggle()\n\t{\n\t\tif (this.getPopup().isShown())\n\t\t{\n\t\t\tthis.hide();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.show();\n\t\t}\n\t}\n\n\thide()\n\t{\n\t\tthis.getPopup().close();\n\t}\n\n\tshow()\n\t{\n\t\tthis.getPopup().show();\n\t}\n\n\tgetPopup(): PopupComponentsMaker\n\t{\n\t\tif (this.#popup)\n\t\t{\n\t\t\treturn this.#popup;\n\t\t}\n\t\tthis.emit('init');\n\t\tlet content = [\n\t\t\tthis.#getProfileContainer(),\n\t\t\t(this.#getAdminPanelContainer() ? {\n\t\t\t\thtml: this.#getAdminPanelContainer(),\n\t\t\t\tbackgroundColor: '#fafafa'\n\t\t\t} : null),\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\thtml: this.#getThemeContainer(),\n\t\t\t\t\tmarginBottom: 24,\n\t\t\t\t\toverflow: true,\n\t\t\t\t\tminHeight: '63px',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: this.#getMaskContainer(),\n\t\t\t\t\tbackgroundColor: '#fafafa',\n\t\t\t\t}\n\t\t\t],\n\t\t\tthis.#getCompanyPulse(!!this.#getStressLevel()) ?\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\thtml: this.#getCompanyPulse(!!this.#getStressLevel()),\n\t\t\t\t\toverflow: true,\n\t\t\t\t\tmarginBottom: 24,\n\t\t\t\t\tflex: this.#getStressLevel() ? 0.5 : 1,\n\t\t\t\t\tminHeight: this.#getStressLevel() ? '115px' : '56px',\n\t\t\t\t},\n\t\t\t\tthis.#getStressLevel(),\n\t\t\t] : null,\n\t\t\tthis.#getOTPContainer(this.#getDeskTopContainer() === null) && this.#getDeskTopContainer() ?\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tflex: 0.5,\n\t\t\t\t\thtml: this.#getQrContainer(0.7),\n\t\t\t\t\tminHeight: '190px',\n\t\t\t\t},\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\thtml: this.#getDeskTopContainer(),\n\t\t\t\t\t\tdisplayBlock: true\n\t\t\t\t\t},\n\t\t\t\t\tthis.#getOTPContainer(false)\n\t\t\t\t]\n\t\t\t] : this.#getDeskTopContainer() || this.#getOTPContainer(true) ? [\n\t\t\t\t\t{\n\t\t\t\t\t\thtml: this.#getQrContainer(2),\n\t\t\t\t\t\tflex: 2\n\t\t\t\t\t},\n\t\t\t\t\tthis.#getDeskTopContainer() ?? this.#getOTPContainer(true)\n\t\t\t] : this.#getQrContainer(0),\n\t\t\tthis.#getLoginHistoryContainer(),\n\t\t\t{\n\t\t\t\thtml: this.#getBindings(),\n\t\t\t\tbackgroundColor: '#fafafa'\n\t\t\t},\n\t\t\t(this.#getb24NetPanelContainer() ? {\n\t\t\t\thtml: this.#getb24NetPanelContainer(),\n\t\t\t\tmarginBottom: 24,\n\t\t\t\tbackgroundColor: '#fafafa'\n\t\t\t} : null),\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\thtml: this.#getNotificationContainer() ?? null,\n\t\t\t\t\tbackgroundColor: '#fafafa'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: this.#getLogoutContainer(),\n\t\t\t\t\tbackgroundColor: '#fafafa'\n\t\t\t\t}\n\t\t\t]\n\t\t];\n\n\t\tconst filterFunc = (data): ?Array => {\n\t\t\tconst result = [];\n\t\t\tif (Type.isArray(data))\n\t\t\t{\n\t\t\t\tfor (let i = 0; i < data.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (Type.isArray(data[i]))\n\t\t\t\t\t{\n\t\t\t\t\t\tconst buff = filterFunc(data[i]);\n\t\t\t\t\t\tif (buff !== null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (Type.isArray(buff) && buff.length === 1)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tresult.push(buff[0]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tresult.push(buff);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (data[i] !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push(data[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result.length <= 0 ? null : (\n\t\t\t\tresult.length === 1 ? result[0] : result\n\t\t\t)\n\t\t};\n\t\tcontent = filterFunc(content);\n\n\t\tconst prepareFunc = (item, index, array) => {\n\t\t\tif (Type.isArray(item))\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\thtml:  item.map(prepareFunc)\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tflex: item['flex'] || 0,\n\t\t\t\thtml: item['html'] || item,\n\t\t\t\tbackgroundColor: item['backgroundColor'] || null,\n\t\t\t\tdisabled: item['disabled'] || null,\n\t\t\t\toverflow: item['overflow'] || null,\n\t\t\t\tmarginBottom: item['marginBottom'] || null,\n\t\t\t\tdisplayBlock: item['displayBlock'] || null,\n\t\t\t\tminHeight: item['minHeight'] || null,\n\t\t\t\tsecondary: item['secondary'] || false,\n\t\t\t};\n\t\t}\n\t\tthis.#popup = new PopupComponentsMaker({\n\t\t\ttarget: this.#container,\n\t\t\tcontent: content.map(prepareFunc),\n\t\t\twidth: 400,\n\t\t\toffsetTop: -14,\n\t\t});\n\t\tEventEmitter.subscribe('BX.Main.InterfaceButtons:onMenuShow', this.hide);\n\t\tEventEmitter.subscribe(Options.eventNameSpace + 'onNeedToHide', this.hide);\n\t\treturn this.#popup;\n\t}\n\n\t#getProfileContainer(): Element\n\t{\n\t\treturn this.#cache.remember('profile', () => {\n\t\t\tconst onclick = (event) => {\n\t\t\t\tthis.hide();\n\t\t\t\treturn BX.SidePanel.Instance.open(this.#profile.URL);\n\t\t\t};\n\t\t\tconst avatarNode = Tag.render`\n\t\t\t\t<span class=\"system-auth-form__profile-avatar--image\"\n\t\t\t\t\t${this.#profile.PHOTO ? `\n\t\t\t\t\t\tstyle=\"background-size: cover; background-image: url('${encodeURI(this.#profile.PHOTO)}')\"` : ''}>\n\t\t\t\t</span>\n\t\t\t\t`;\n\t\t\tconst nameNode = Tag.render`\n\t\t\t\t<div class=\"system-auth-form__profile-name\">${this.#profile.FULL_NAME}</div>\n\t\t\t`;\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t'BX.Intranet.UserProfile:Avatar:changed',\n\t\t\t\t({data: [{url, userId}]}) => {\n\t\t\t\t\tif (this.#profile.ID > 0 && userId && this.#profile.ID.toString() === userId.toString())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#profile.PHOTO = url;\n\t\t\t\t\t\tavatarNode.style = Type.isStringFilled(url)\n\t\t\t\t\t\t\t? `background-size: cover; background-image: url('${encodeURI(this.#profile.PHOTO)}')`\n\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t;\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t'BX.Intranet.UserProfile:Name:changed',\n\t\t\t\t({data: [{fullName}]}) => {\n\t\t\t\t\tthis.#profile.FULL_NAME = fullName;\n\t\t\t\t\tnameNode.innerHTML = fullName;\n\t\t\t\t\tthis.#container.querySelector('#user-name').innerHTML = fullName;\n\t\t\t\t})\n\t\t\t;\n\t\t\tlet workPosition = (Type.isStringFilled(this.#profile.WORK_POSITION) ? Text.encode(this.#profile.WORK_POSITION) : '');\n\t\t\tif (this.#profile.STATUS && Loc.hasMessage('INTRANET_USER_PROFILE_' + this.#profile.STATUS))\n\t\t\t{\n\t\t\t\tworkPosition = Loc.getMessage('INTRANET_USER_PROFILE_' + this.#profile.STATUS)\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --clickable\" onclick=\"${onclick}\">\n\t\t\t\t\t<div class=\"system-auth-form__profile\">\n\t\t\t\t\t\t<div class=\"system-auth-form__profile-avatar\">\n\t\t\t\t\t\t\t${avatarNode}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__profile-content --margin--right\">\n\t\t\t\t\t\t\t${nameNode}\n\t\t\t\t\t\t\t<div class=\"system-auth-form__profile-position\">${workPosition}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__profile-controls\">\n\t\t\t\t\t\t\t<span class=\"ui-qr-popupcomponentmaker__btn --large --border\" >\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_USER_PROFILE_PROFILE')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t \t\t<!-- <span class=\"ui-qr-popupcomponentmaker__btn --large --success\">any text</span> -->\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getPopupContainer(): HTMLElement\n\t{\n\t\treturn this.#cache.remember('popup-container', () => {\n\t\t\treturn this.getPopup().getPopup().getPopupContainer();\n\t\t});\n\t}\n\n\t#setEventHandlers()\n\t{\n\t\tconst autoHideHandler = (event) => {\n\t\t\tconsole.log(event)\n\t\t\tif (event.data.popup)\n\t\t\t{\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tEvent.bind(this.#getPopupContainer(), 'click', () => {\n\t\t\t\t\t\tevent.data.popup.close();\n\t\t\t\t\t});\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t}\n\n\t\tthis.subscribe('init', () => {\n\t\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, Options.eventNameSpace + ':onOpen', this.hide);\n\t\t\tthis.subscribe('bindings:open', autoHideHandler);\n\t\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, Options.eventNameSpace + ':showOtpMenu', autoHideHandler);\n\t\t});\n\n\t}\n\n\t#getb24NetPanelContainer()\n\t{\n\t\treturn this.#cache.remember('b24netPanel', () => {\n\t\t\tif (this.#features['b24netPanel'] !== 'Y')\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<a class=\"system-auth-form__item system-auth-form__scope --center --padding-sm --clickable\" href=\"https://www.bitrix24.net/\">\n\t\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image --network\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --center\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --light\">${Loc.getMessage('AUTH_PROFILE_B24NET_MSGVER_1')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --block\">\n\t\t\t\t\t\t<div class=\"ui-qr-popupcomponentmaker__btn\">${Loc.getMessage('INTRANET_USER_PROFILE_GOTO')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getAdminPanelContainer()\n\t{\n\t\treturn this.#cache.remember('adminPanel', () => {\n\t\t\tif (this.#features['adminPanel'] !== 'Y')\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<a class=\"system-auth-form__item system-auth-form__scope --center --padding-sm --clickable\" href=\"/bitrix/admin/\">\n\t\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image --admin-panel\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --center\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --light\">${Loc.getMessage('INTRANET_USER_PROFILE_ADMIN_PANEL')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --block\">\n\t\t\t\t\t\t<div class=\"ui-qr-popupcomponentmaker__btn\">${Loc.getMessage('INTRANET_USER_PROFILE_GOTO')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getThemeContainer(): Promise\n\t{\n\t\treturn this.#cache.remember('themePicker', () => {\n\t\t\treturn ThemePicker.getPromise();\n\t\t});\n\t}\n\n\t#getMaskContainer(): Element\n\t{\n\t\treturn this.#cache.remember('Mask', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --padding-sm\">\n\t\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image --mask\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title\">\n\t\t\t\t\t\t\t<span>${Loc.getMessage('INTRANET_USER_PROFILE_MASKS')}</span>\n\t\t\t\t\t\t\t<span style=\"cursor: default\" class=\"system-auth-form__icon-help\"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__item-content --center --center-force\">\n\t\t\t\t\t\t\t<div class=\"ui-qr-popupcomponentmaker__btn --disabled\">${Loc.getMessage('INTRANET_USER_PROFILE_INSTALL')}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-new --soon\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-new--title\">${Loc.getMessage('INTRANET_USER_PROFILE_SOON')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getCompanyPulse(isNarrow): Element\n\t{\n\t\treturn this.#cache.remember('getCompanyPulse', () => {\n\t\t\tif (this.#features.pulse === 'Y'\n\t\t\t\t&& this.#profile.ID > 0\n\t\t\t\t&& this.#profile.ID === Loc.getMessage('USER_ID')\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\tajax.runComponentAction('bitrix:intranet.user.profile.button', 'getUserStatComponent', {\n\t\t\t\t\t\tmode: 'class'\n\t\t\t\t\t}).then((response) => {\n\t\t\t\t\t\tBX.Runtime.html(null, response.data.html).then(() => {\n\t\t\t\t\t\t\tresolve(Ustat.getPromise({\n\t\t\t\t\t\t\t\tuserId: this.#profile.ID,\n\t\t\t\t\t\t\t\tisNarrow,\n\t\t\t\t\t\t\t\tdata: this.#features['pulseData'] ?? null\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\t}\n\n\t#savePhoto(dataObj)\n\t{\n\t\tajax.runComponentAction(\n\t\t\tthis.#cache.get('componentParams').componentName,\n\t\t\t'loadPhoto',\n\t\t\t{\n\t\t\t\tsignedParameters: this.#cache.get('componentParams').signedParameters,\n\t\t\t\tmode: 'ajax',\n\t\t\t\tdata: dataObj\n\t\t\t}\n\t\t).then(function (response) {\n\t\t\tif (response.data)\n\t\t\t{\n\t\t\t\t(top || window).BX.onCustomEvent('BX.Intranet.UserProfile:Avatar:changed', [{\n\t\t\t\t\turl: response.data,\n\t\t\t\t\tuserId: this.#profile.ID,\n\t\t\t\t}]);\n\t\t\t}\n\t\t}.bind(this), function (response) {\n\t\t\tconsole.log('response: ', response);\n\t\t}.bind(this));\n\t}\n\n\t#getStressLevel(): Promise\n\t{\n\t\tif (this.#features['stressLevel'] !== 'Y')\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn this.#cache.remember('getStressLevel', () => {\n\t\t\treturn StressLevel.getPromise({\n\t\t\t\tsignedParameters: this.#cache.get('componentParams').signedParameters,\n\t\t\t\tcomponentName: this.#cache.get('componentParams').componentName,\n\t\t\t\tuserId: this.#profile.ID,\n\t\t\t\tdata: this.#features['stressLevelData'] ?? null\n\t\t\t});\n\t\t});\n\t}\n\n\t#getQrContainer(flex): Element\n\t{\n\t\treturn this.#cache.remember('getQrContainer', () => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tBX.loadExt(['ui.qrauthorization', 'qrcode']).then(() => {\n\t\t\t\t\tconst isInstalled = this.#features['appInstalled']['APP_ANDROID_INSTALLED'] === 'Y'\n\t\t\t\t\t\t|| this.#features['appInstalled']['APP_IOS_INSTALLED'] === 'Y';\n\t\t\t\t\tconst onclick = () => {\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t(new QrAuthorization({\n\t\t\t\t\t\t\ttitle: Loc.getMessage('INTRANET_USER_PROFILE_QRCODE_TITLE2'),\n\t\t\t\t\t\t\tcontent: Loc.getMessage('INTRANET_USER_PROFILE_QRCODE_BODY2'),\n\t\t\t\t\t\t\thelpLink: '',\n\t\t\t\t\t\t})).show();\n\t\t\t\t\t}\n\t\t\t\t\tconst onclickHelp = (event: MouseEvent) => {\n\t\t\t\t\t\ttop.BX.Helper.show('redirect=detail&code=14999860');\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t};\n\t\t\t\t\tlet node;\n\t\t\t\t\tif (flex !== 2 && flex !== 0)\n\t\t\t\t\t{\n\t\t\t\t\t\t// for a small size\n\t\t\t\t\t\tnode = Tag.render`\n\t\t\t\t\t<div class=\"system-auth-form__item system-auth-form__scope ${isInstalled ? '--active' : ''}  --clickable\" onclick=\"${onclick}\" style=\"padding: 10px 14px\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-container --center --column --center\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-title --center --margin-xl\">${Loc.getMessage('INTRANET_USER_PROFILE_MOBILE_TITLE2_SMALL')}</div>\n\t\t\t\t\t\t\t<div class=\"system-auth-form__qr\" style=\"margin-bottom: 12px\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-qr-popupcomponentmaker__btn --border\" style=\"margin-top: auto\" onclick=\"${onclick}\">${Loc.getMessage('INTRANET_USER_PROFILE_MOBILE_SHOW_QR_SMALL')}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__icon-help --absolute\" onclick=\"${onclickHelp}\" title=\"${Loc.getMessage('INTRANET_USER_PROFILE_MOBILE_HOW_DOES_IT_WORK')}\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t\t\t}\n\t\t\t\t\telse if (flex === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\t//full size\n\t\t\t\t\t\tnode = Tag.render`\n\t\t\t\t\t<div class=\"system-auth-form__item system-auth-form__scope ${isInstalled ? '--active' : ''} --padding-qr-xl\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-container --column --flex --flex-start\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-title --l\">${Loc.getMessage('INTRANET_USER_PROFILE_MOBILE_TITLE2')}</div>\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-title --link-dotted\" onclick=\"${onclickHelp}\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_USER_PROFILE_MOBILE_HOW_DOES_IT_WORK')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-qr-popupcomponentmaker__btn --large --border\" style=\"margin-top: auto\" onclick=\"${onclick}\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_USER_PROFILE_MOBILE_SHOW_QR')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__item-container --qr\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__qr --full-size\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t// for flex 2. It is kind of middle\n\t\t\t\t\t\tnode = Tag.render`\n\t\t\t\t\t<div class=\"system-auth-form__item system-auth-form__scope ${isInstalled ? '--active' : ''} --padding-mid-qr  --clickable\" onclick=\"${onclick}\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-container --column --flex --flex-start\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-title --block\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_USER_PROFILE_MOBILE_TITLE2_SMALL')}\n\t\t\t\t\t\t\t\t<span class=\"system-auth-form__icon-help --inline\" onclick=\"${onclickHelp}\" title=\"${Loc.getMessage('INTRANET_USER_PROFILE_MOBILE_HOW_DOES_IT_WORK')}\"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-qr-popupcomponentmaker__btn --border\" style=\"margin-top: auto\" onclick=\"${onclick}\">${Loc.getMessage('INTRANET_USER_PROFILE_MOBILE_SHOW_QR')}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__item-container --qr\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__qr --size-2\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn resolve(node);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t});\n\t}\n\n\t#getDeskTopContainer(): ?Element\n\t{\n\t\treturn this.#cache.remember('getDeskTopContainer', () => {\n\t\t\tlet isInstalled = this.#features['appInstalled']['APP_MAC_INSTALLED'] === 'Y';\n\t\t\tlet cssPostfix = '--apple';\n\t\t\tlet title = Loc.getMessage('INTRANET_USER_PROFILE_DESKTOP_APPLE');\n\t\t\tlet linkToDistributive = 'https://dl.bitrix24.com/b24/bitrix24_desktop.dmg';\n\t\t\tconst typesInstallersForLinux = {\n\t\t\t\t'DEB': {\n\t\t\t\t\ttext: Loc.getMessage('INTRANET_USER_PROFILE_DOWNLOAD_LINUX_DEB'),\n\t\t\t\t\thref: 'https://dl.bitrix24.com/b24/bitrix24_desktop.deb',\n\t\t\t\t},\n\t\t\t\t'RPM': {\n\t\t\t\t\ttext: Loc.getMessage('INTRANET_USER_PROFILE_DOWNLOAD_LINUX_RPM'),\n\t\t\t\t\thref: 'https://dl.bitrix24.com/b24/bitrix24_desktop.rpm',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tif (this.#features.browser === 'Windows')\n\t\t\t{\n\t\t\t\tisInstalled = this.#features['appInstalled']['APP_WINDOWS_INSTALLED'] === 'Y';\n\t\t\t\tcssPostfix = '--windows';\n\t\t\t\ttitle = Loc.getMessage('INTRANET_USER_PROFILE_DESKTOP_WINDOWS');\n\t\t\t\tlinkToDistributive = 'https://dl.bitrix24.com/b24/bitrix24_desktop.exe'\n\t\t\t}\n\n\t\t\tlet onclick = isInstalled ? (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\treturn false;\n\t\t\t} : () => {\n\t\t\t\tthis.hide();\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\tlet menuLinux = null;\n\t\t\tconst showMenuLinux = (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tmenuLinux = (menuLinux || new Menu({\n\t\t\t\t\tclassName: 'system-auth-form__popup',\n\t\t\t\t\tbindElement: event.target,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: typesInstallersForLinux.DEB.text,\n\t\t\t\t\t\t\thref: typesInstallersForLinux.DEB.href,\n\t\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\t\tmenuLinux.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: typesInstallersForLinux.RPM.text,\n\t\t\t\t\t\t\thref: typesInstallersForLinux.RPM.href,\n\t\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\t\tmenuLinux.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\n\t\t\t\t\t],\n\t\t\t\t\tangle: true,\n\t\t\t\t\toffsetLeft: 10,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonShow: () => {\n\t\t\t\t\t\t\tthis.getPopup().getPopup().setAutoHide(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\tthis.getPopup().getPopup().setAutoHide(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t\tmenuLinux.toggle();\n\t\t\t}\n\n\t\t\tif (this.#features.browser === 'Linux')\n\t\t\t{\n\t\t\t\tisInstalled = this.#features['appInstalled']['APP_LINUX_INSTALLED'] === 'Y';\n\t\t\t\tcssPostfix = '--linux';\n\t\t\t\ttitle = Loc.getMessage('INTRANET_USER_PROFILE_DESKTOP_LINUX');\n\t\t\t\tlinkToDistributive = '';\n\n\t\t\t\tonclick = isInstalled ? (event) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\treturn false;\n\t\t\t\t} : showMenuLinux;\n\t\t\t}\n\n\t\t\tif (this.#features['otp'].IS_ENABLED !== 'Y')\n\t\t\t{\n\t\t\t\tlet menuPopup = null;\n\t\t\t\tlet menuItems = [{\n\t\t\t\t\ttext: Loc.getMessage('INTRANET_USER_PROFILE_DOWNLOAD'),\n\t\t\t\t\thref: linkToDistributive,\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tmenuPopup.close();\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t}\n\t\t\t\t}];\n\n\t\t\t\tif (this.#features.browser === 'Linux')\n\t\t\t\t{\n\t\t\t\t\tmenuItems = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: typesInstallersForLinux.DEB.text,\n\t\t\t\t\t\t\thref: typesInstallersForLinux.DEB.href,\n\t\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\t\tmenuPopup.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: typesInstallersForLinux.RPM.text,\n\t\t\t\t\t\t\thref: typesInstallersForLinux.RPM.href,\n\t\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\t\tmenuPopup.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\tconst popupClick = (event: MouseEvent) => {\n\t\t\t\t\tmenuPopup = (menuPopup || (new Menu({\n\t\t\t\t\t\tclassName: 'system-auth-form__popup',\n\t\t\t\t\t\tbindElement: event.target,\n\t\t\t\t\t\titems: menuItems,\n\t\t\t\t\t\tangle: true,\n\t\t\t\t\t\toffsetLeft: 10,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonShow: () => {\n\t\t\t\t\t\t\t\tthis.getPopup().getPopup().setAutoHide(false);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\t\tthis.getPopup().getPopup().setAutoHide(true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})));\n\t\t\t\t\tmenuPopup.toggle();\n\t\t\t\t};\n\t\t\t\treturn Tag.render`\n\t\t\t\t\t<div data-role=\"desktop-item\" class=\"system-auth-form__item system-auth-form__scope --padding-sm-all ${isInstalled ? ' --active' : ''} --vertical --center\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo --margin-bottom --center system-auth-form__item-container --flex\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image ${cssPostfix}\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${isInstalled ? Tag.render`<div class=\"system-auth-form__config --absolute\" onclick=\"${popupClick}\"></div>` : ''}\n\t\t\t\t\t\t<div class=\"system-auth-form__item-container --flex --center --display-flex\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-title --light --center --s\">${title}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__item-content --flex --center --display-flex\">\n\t\t\t\t\t\t\t<a class=\"ui-qr-popupcomponentmaker__btn\" style=\"margin-top: auto\" href=\"${linkToDistributive}\" target=\"_blank\" onclick=\"${onclick}\">\n\t\t\t\t\t\t\t\t${isInstalled ? Loc.getMessage('INTRANET_USER_PROFILE_INSTALLED') : Loc.getMessage('INTRANET_USER_PROFILE_INSTALL')}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t}\n\n\t\t\tconst getLinkForHiddenState = () => {\n\t\t\t\tconst link = Tag.render`\n\t\t\t\t\t<a href=\"${linkToDistributive}\" class=\"system-auth-form__item-title --link-dotted\">${Loc.getMessage('INTRANET_USER_PROFILE_DOWNLOAD')}</a>\n\t\t\t\t`;\n\n\t\t\t\tif (this.#features.browser === 'Linux')\n\t\t\t\t{\n\t\t\t\t\tlink.addEventListener('click', showMenuLinux);\n\t\t\t\t}\n\n\t\t\t\treturn link;\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --padding-bottom-10 ${isInstalled ? ' --active' : ''}\">\n\t\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image ${cssPostfix}\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title ${isInstalled ? ' --without-margin' : '--min-height'}\">${title}</div>\n\t\t\t\t\t\t${isInstalled ? getLinkForHiddenState() : ''}\n\t\t\t\t\t\t<div class=\"system-auth-form__item-content --center --center-force\">\n\t\t\t\t\t\t\t<a class=\"ui-qr-popupcomponentmaker__btn\" href=\"${linkToDistributive}\" target=\"_blank\" onclick=\"${onclick}\">\n\t\t\t\t\t\t\t\t${isInstalled ? Loc.getMessage('INTRANET_USER_PROFILE_INSTALLED') : Loc.getMessage('INTRANET_USER_PROFILE_INSTALL')}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getOTPContainer(single): ?Promise\n\t{\n\t\tif (this.#features.otp.IS_ENABLED !== 'Y')\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.#cache.remember('getOTPContainer', () => {\n\t\t\treturn (new Otp(single, this.#features.otp)).getContainer();\n\t\t});\n\t}\n\n\t#getLoginHistoryContainer(): ?Element\n\t{\n\t\tif (this.#features.loginHistory.isHide)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.#cache.remember('getLoginHistoryContainer', () => {\n\t\t\tconst history = new UserLoginHistory(this.#features.loginHistory, this);\n\t\t\treturn {\n\t\t\t\thtml: history.getContainer(),\n\t\t\t\tbackgroundColor: '#fafafa',\n\t\t\t};\n\t\t});\n\t}\n\n\t#getBindings(): ?Element\n\t{\n\t\tif (!(Type.isPlainObject(this.#features['bindings'])\n\t\t\t&& Type.isStringFilled(this.#features['bindings']['text'])\n\t\t\t&& Type.isArray(this.#features['bindings']['items'])\n\t\t\t&& this.#features['bindings']['items'].length > 0\n\t\t))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.#cache.remember('getBindingsContainer', () => {\n\t\t\tconst div = Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item --hover system-auth-form__scope --center --padding-sm\">\n\t\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image --binding\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --center\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --light\">${Text.encode(this.#features['bindings']['text'])}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div data-role=\"arrow\" class=\"system-auth-form__item-icon --arrow-right\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tdiv.addEventListener('click', () => {\n\t\t\t\tthis.__bindingsMenu = (this.__bindingsMenu || (new Menu({\n\t\t\t\t\tclassName: 'system-auth-form__popup',\n\t\t\t\t\tbindElement: div.querySelector('[data-role=\"arrow\"]'),\n\t\t\t\t\titems: this.#features['bindings']['items'],\n\t\t\t\t\tangle: true,\n\t\t\t\t\tcachable: false,\n\t\t\t\t\toffsetLeft: 10,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonShow: () => {\n\t\t\t\t\t\t\tthis.emit('bindings:open');\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t})));\n\t\t\t\tthis.__bindingsMenu.toggle();\n\t\t\t});\n\t\t\treturn div;\n\t\t});\n\t}\n\n\t#getNotificationContainer(): Element\n\t{\n\t\tif (this.#features['im'] !== 'Y')\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn this.#cache.remember('getNotificationContainer', () => {\n\t\t\tconst div = Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item --hover system-auth-form__scope --padding-sm\">\n\t\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image --notification\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --center\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --light\">${Loc.getMessage('AUTH_NOTIFICATION')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tdiv.addEventListener('click', () => {\n\t\t\t\tthis.hide();\n\t\t\t\tBXIM.openSettings({'onlyPanel':'notify'});\n\t\t\t});\n\t\t\treturn div;\n\t\t});\n\t}\n\n\t#getLogoutContainer(): Element\n\t{\n\t\treturn this.#cache.remember('getLogoutContainer', () => {\n\t\t\tconst onclickLogout = () => {\n\t\t\t\tif (DesktopApi.isDesktop())\n\t\t\t\t{\n\t\t\t\t\tDesktopApi.logout();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst backUrl = new Uri(window.location.pathname);\n\t\t\t\t\tbackUrl.removeQueryParam(['logout', 'login', 'back_url_pub', 'user_lang']);\n\t\t\t\t\tconst newUrl = new Uri('/auth/?logout=yes');\n\t\t\t\t\tnewUrl.setQueryParam('sessid', BX.bitrix_sessid());\n\t\t\t\t\tnewUrl.setQueryParam('backurl', encodeURIComponent(backUrl.toString()));\n\t\t\t\t\tdocument.location.href = newUrl;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t//TODO\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --padding-sm\">\n\t\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image --logout\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --center\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --light\">${Loc.getMessage('AUTH_LOGOUT')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<a onclick=\"${onclickLogout}\" class=\"system-auth-form__item-link-all\"></a>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tstatic init(node, options)\n\t{\n\t\tif (node[widgetMarker])\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst onclick = () => {\n\t\t\tif (!node['popupSymbol'])\n\t\t\t{\n\t\t\t\tnode['popupSymbol'] = new this(node, options);\n\t\t\t}\n\t\t\tnode['popupSymbol'].toggle();\n\t\t\tthis.instance = node['popupSymbol'];\n\t\t};\n\t\tnode[widgetMarker] = true;\n\t\tnode.addEventListener('click', onclick);\n\t}\n\n\tstatic instance = null;\n\n\tstatic getInstance():? this\n\t{\n\t\treturn this.instance;\n\t}\n}"],"names":["Options","babelHelpers","classCallCheck","defineProperty","StressLevel","createClass","key","value","getOpenSliderFunction","url","Type","isStringFilled","EventEmitter","emit","GLOBAL_TARGET","eventNameSpace","BX","SidePanel","Instance","open","cacheable","data","width","showData","parseInt","result","Tag","render","_templateObject","taggedTemplateLiteral","Loc","getMessage","Text","encode","type","typeDescription","check","comment","setTimeout","intervalId","setInterval","current","node","innerHTML","end","clearInterval","querySelector","style","transform","showEmpty","_ref","_templateObject2","getPromise","_ref2","_this","signedParameters","componentName","userId","Promise","resolve","reject","promise","ajax","runAction","c","fields","then","_ref3","id","undefined","document","createElement","error","urls","_params","WeakMap","_container","ThemePicker","_EventEmitter","inherits","possibleConstructorReturn","getPrototypeOf","call","_classPrivateFieldInitSpec","assertThisInitialized","writable","classPrivateFieldSet","Object","assign","classPrivateFieldGet","lightning","String","indexOf","applyTheme","bind","setEventNamespace","subscribe","_ref$data","theme","title","previewImage","previewColor","container","getContainer","removeProperty","backgroundImage","backgroundSize","background","backgroundColor","Dom","removeClass","addClass","onclick","Intranet","Bitrix24","Singleton","showDialog","_this2","runComponentAction","mode","response","themePicker","_renderUsers","WeakSet","Ustat","_classPrivateMethodInitSpec","onclickHandle","_classPrivateMethodGe","_classPrivateMethodGet","_renderUsers2","myPosition","userList","range","div","_templateObject3","UI","Hint","init","event","window","openIntranetUStat","showWideData","_classPrivateMethodGe2","_templateObject4","addEventListener","isNarrow","ustat","errors","isArray","forEach","message","errorNode","className","appendChild","_templateObject5","createDocumentFragment","myActivity","usersData","isPlainObject","values","length","toConsumableArray","ACTIVITY","dataResult","concat","slice","userRating","index","_templateObject6","fullName","avatarSrc","join","isCurrentUser","_templateObject7","encodeURI","_config","_widget","_isActive","_isAvailable","_isConfigured","_getMainButton","_getBottomButton","_getLockIcon","_showLogoutPopup","UserLoginHistory","config","widget","handlerLogoutButton","_isActive2","_showLogoutPopup2","showSliderLoginHistory","getPopup","close","allowChangeHistory","_isAvailable2","InfoHelper","show","loginHistoryWidget","_getLockIcon2","_getMainButton2","_getBottomButton2","loader","_classStaticPrivateMethodGet","_getLoader","limit","hide","devices","keys","description","_prepareDescriptionLoginHistory","time","_prepareDateTimeForLoginHistory","device","append","isAvailableUserLoginHistory","isConfiguredUserLoginHistory","_isConfigured2","showConfigureSlider","Helper","handler","_this3","showInfoSlider","_this4","Dialogs","MessageBox","buttons","MessageBoxButtons","YES_CANCEL","minWidth","popupOptions","contentBackground","autoHide","closeByEsc","padding","events","onShow","setAutoHide","onPopupClose","onYes","messageBox","Notification","Center","notify","content","autoHideDelay","deviceType","geolocation","browser","arrayDescription","push","Loader","size","dateTime","format","date","Date","Otp","isSingle","arguments","isInstalled","IS_ACTIVE","URL","Uri","addParam","page","console","button","onclickHelp","top","menuPopup","popupClick","stopPropagation","items","text","Menu","getRandom","target","angle","offsetLeft","popup","BaseEvent","toggle","widgetMarker","Symbol","_popup","_profile","_features","_cache","_getProfileContainer","_getPopupContainer","_setEventHandlers","_getb24NetPanelContainer","_getAdminPanelContainer","_getThemeContainer","_getMaskContainer","_getCompanyPulse","_savePhoto","_getStressLevel","_getQrContainer","_getDeskTopContainer","_getOTPContainer","_getLoginHistoryContainer","_getBindings","_getNotificationContainer","_getLogoutContainer","Widget","_ref$profile","profile","ID","FULL_NAME","PHOTO","MASK","STATUS","WORK_POSITION","_ref$component","component","features","Cache","MemoryCache","_setEventHandlers2","Browser","isLinux","isWin","set","isShown","_getProfileContainer2","_getAdminPanelContainer2","html","_getThemeContainer2","marginBottom","overflow","minHeight","_getMaskContainer2","_getCompanyPulse2","_getStressLevel2","flex","_getOTPContainer2","_getDeskTopContainer2","_getQrContainer2","displayBlock","_getLoginHistoryContainer2","_getBindings2","_getb24NetPanelContainer2","_getNotificationContainer2","_getLogoutContainer2","filterFunc","i","buff","prepareFunc","item","array","map","disabled","secondary","PopupComponentsMaker","offsetTop","options","instance","getInstance","remember","avatarNode","nameNode","_ref2$data","slicedToArray","_ref2$data$","toString","_ref3$data","workPosition","hasMessage","_getPopupContainer2","getPopupContainer","_this5","autoHideHandler","log","Event","_this6","_this7","_this8","pulse","Runtime","_babelHelpers$classPr","_this9","_babelHelpers$classPr2","get","_this10","loadExt","QrAuthorization","helpLink","preventDefault","_templateObject8","_templateObject9","_this11","cssPostfix","linkToDistributive","typesInstallersForLinux","href","menuLinux","showMenuLinux","bindElement","DEB","RPM","onClose","IS_ENABLED","menuItems","_templateObject10","_templateObject11","getLinkForHiddenState","link","_templateObject12","_templateObject13","single","_this12","otp","_this13","loginHistory","isHide","history","_this14","_templateObject14","__bindingsMenu","cachable","_this15","_templateObject15","BXIM","openSettings","onclickLogout","DesktopApi","isDesktop","logout","backUrl","location","pathname","removeQueryParam","newUrl","setQueryParam","bitrix_sessid","encodeURIComponent","_templateObject16"],"mappings":"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"}