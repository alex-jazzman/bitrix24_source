<? namespace Bitrix\Main;$GLOBALS['____1840043504']= array(base64_decode(''.'Z'.'mlsZV9l'.'e'.'Glzd'.'HM'.'='),base64_decode(''.'c3RydG9'.'1'.'cHBlcg'.'='.'='),base64_decode('b'.'WQ1'),base64_decode('bWQ1'),base64_decode('aW5fY'.'XJyYXk='),base64_decode('aW5fYXJyYXk='),base64_decode('ZGVmaW5lZ'.'A=='),base64_decode('ZGVmaW5'.'l'.'ZA=='),base64_decode('ZGV'.'maW5lZA=='),base64_decode('ZmlsZV'.'9leGlzdHM='),base64_decode('ZmlsZ'.'V'.'9leGlzdH'.'M='),base64_decode('Z'.'mlsZV9leGl'.'z'.'dHM='),base64_decode(''.'Zm'.'l'.'sZV9'.'leGlzdHM='),base64_decode('ZXhw'.'bG9kZQ'.'=='));if(!function_exists(__NAMESPACE__.'\\___792076311')){function ___792076311($_823361652){static $_1547535495= false; if($_1547535495 == false) $_1547535495=array(''.'L2JpdH'.'Jp'.'eC9s'.'aWNlbnNlX'.'2tleS5waHA'.'=','','','REVNTw'.'==',''.'REVNTw==',''.'Qkl'.'UU'.'klY','TE'.'lD'.'R'.'U5'.'D'.'RQ==','REVNTw='.'=','L2tl'.'eV91cGRhdG'.'U'.'ucGhw'.'P2x'.'pY2V'.'uc'.'2Vfa2V'.'5PQ==','J'.'nRvYmFza2V0PXkmbGFu'.'Zz'.'0=','a'.'HR0'.'cHM6Ly9'.'kZXY'.'uMWM'.'tYml0c'.'ml4L'.'nJ1L2x'.'l'.'YXJuaW'.'5n'.'L'.'2'.'N'.'vdXJz'.'ZS9pbmRleC5wa'.'HA/Q09V'.'UlN'.'FX0lEPTE'.'zN'.'S'.'Z'.'MRVNTT05'.'fSUQ9MjU3'.'Mj'.'A=','a'.'HR0cHM6L'.'y90cmFpbml'.'uZy5iaXRyaX'.'gyNC5jb2'.'0'.'vc3V'.'wcG9ydC'.'90cmFp'.'b'.'m'.'luZy'.'9jb'.'3'.'Vy'.'c2'.'UvaW5k'.'ZX'.'g'.'uc'.'GhwP0NPVVJTR'.'V9JR'.'D'.'0x'.'N'.'zgmT'.'EVTU'.'09'.'OX'.'0lEPTI1O'.'TM'.'yJkxFU1NPTl'.'9QQVRIP'.'T'.'E3'.'NTIwLjE3NTYyLjI1'.'O'.'TM'.'wLjI'.'1OTMy','cnU=','Ynk'.'=','a3'.'o=','ZGU=','ZXU'.'=','Zn'.'I=','cGw'.'=','aXQ=','dWs=','ZXU=','Y'.'29t','ZW4=','REVNTw==','WQ==','VElNRUxJ'.'TUl'.'UX'.'0VES'.'VRJT'.'04=','WQ==','RU'.'5D'.'T0RF','W'.'Q='.'=','U2l0Z'.'U'.'V4cGlyZ'.'URhdG'.'U=','b'.'WFpbg==','fnN1cHBvcnRf'.'Zml'.'uaXNoX2R'.'hdGU'.'=','W'.'S'.'1t'.'LWQ'.'=','WS1tLWQ=','Y'.'ml0c'.'m'.'l4MjQ=','bWFpbg='.'=','flBBUk'.'FN'.'X0NMS'.'UVOVF9MQU5'.'H','','aW50cmFuZX'.'Q=',''.'Z'.'W4'.'=','cnU'.'=',''.'bWFpbg'.'==','dmVuZG9y','Yml0c'.'ml'.'4X3B'.'vc'.'nRhbA==','Y'.'m'.'l0'.'cml4','ZW4=','MWN'.'fY'.'ml0c'.'ml4X'.'3BvcnR'.'hbA'.'==',''.'MWNfYml0c'.'m'.'l4',''.'cnU=',''.'L2JpdHJpeC'.'9t'.'b'.'2R'.'1'.'bGV'.'zL'.'2'.'1'.'haW'.'4vbG'.'FuZ'.'y9'.'1YQ='.'=','dW'.'E=','L2'.'JpdHJ'.'peC9tb2R1bGVzL'.'21haW4v'.'bGFu'.'Zy9ieQ'.'==','Ynk=','L2Jpd'.'H'.'J'.'peC9tb'.'2R1b'.'GVzL21haW4'.'vb'.'GFuZ'.'y9reg'.'==','a3o'.'=','L2J'.'pdHJ'.'peC9t'.'b'.'2R1bGVzL21'.'h'.'aW4vbG'.'FuZ'.'y9ydQ==','cnU=','bWFpb'.'g='.'=',''.'fl'.'BBU'.'kF'.'N'.'X1BBUlRORVJ'.'fS'.'UQ=','b'.'WF'.'pbg==',''.'UEF'.'SQU'.'1fTUFYX1V'.'TRVJT',''.'bW'.'Fpbg==','f'.'k'.'N'.'PVU5UX0V'.'YV'.'FJB','Tg==','WQ'.'==','ZXh'.'0'.'cmFu'.'ZXQ=','QU5EI'.'FU'.'u'.'TEFTVF9M'.'T0d'.'J'.'T'.'iA+I'.'A==','QU5EIFUuTE'.'F'.'TVF9MT0dJTiB'.'J'.'U'.'yBO'.'T1Q'.'gTlVM'.'T'.'A='.'=','aW50cmFuZXQ=',''.'ZX'.'h'.'0cmFuZXQ=','ZXh0cmFu'.'Z'.'XRfZ3J'.'vdXA=',''.'bW'.'Fpbg==','fmxpY2Vuc2VfbmFt'.'ZQ==','b'.'WFpb'.'g'.'==','fmxpY2'.'Vu'.'c2Vf'.'Y29kZ'.'XM=','','LA='.'=');return base64_decode($_1547535495[$_823361652]);}}; use Bitrix\Main\Config\Option; use Bitrix\Main\Type\Date; final class License{ private?string $_2848270= null; private?string $_123020587= null; private const DOMAINS_STORE_LICENSE=[ 'ru' => 'https://util.1c-bitrix.ru', 'en' => 'https://util.bitrixsoft.com', 'kz' => 'https://util.1c-bitrix.kz', 'by' => 'https://util.1c-bitrix.by',]; public const URL_BUS_EULA=[ 'ru' => 'https://www.1c-bitrix.ru/download/law/eula_bus.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_bus.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_bus.pdf',]; public const URL_CP_EULA=[ 'ru' => 'https://www.1c-bitrix.ru/download/law/eula_cp.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_cp.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_cp.pdf', 'en' => 'https://www.bitrix24.com/eula/', 'br' => 'https://www.bitrix24.com.br/eula/', 'fr' => 'https://www.bitrix24.fr/eula/', 'pl' => 'https://www.bitrix24.pl/eula/', 'it' => 'https://www.bitrix24.it/eula/', 'la' => 'https://www.bitrix24.es/eula/',]; public const URL_RENEWAL_LICENSE=[ 'com' => 'https://store.bitrix24.com/profile/license-keys.php', 'eu' => 'https://store.bitrix24.eu/profile/license-keys.php', 'de' => 'https://store.bitrix24.de/profile/license-keys.php', 'ru' => 'https://www.1c-bitrix.ru/buy/products/b24.php#tab-section-2', 'by' => 'https://www.1c-bitrix.by/buy/products/b24.php#tab-section-2', 'kz' => 'https://www.1c-bitrix.kz/buy/products/b24.php#tab-section-2',]; private const CIS=['ru' => 1, 'by' => 1, 'kz' => 1, 'uz' => 1, 'kg' => 1, 'am' => 1, 'az' => 1, 'ge' => 1]; public function getKey(): string{ if($this->_2848270 === null){ $_1633604978= Loader::getDocumentRoot(). ___792076311(0); $LICENSE_KEY= ___792076311(1); if($GLOBALS['____1840043504'][0]($_1633604978)){ include($_1633604978);} $this->_2848270=($LICENSE_KEY == ___792076311(2) || $GLOBALS['____1840043504'][1]($LICENSE_KEY) == ___792076311(3)? ___792076311(4): $LICENSE_KEY);} return $this->_2848270;} public function getHashLicenseKey(): string{ return $GLOBALS['____1840043504'][2]($this->getKey());} public function getPublicHashKey(): string{ return $GLOBALS['____1840043504'][3](___792076311(5). $this->getKey(). ___792076311(6));} public function isDemoKey(): bool{ return $this->getKey() == ___792076311(7);} public function getBuyLink(): string{ return $this->getDomainStoreLicense(). ___792076311(8). $this->getHashLicenseKey(). ___792076311(9). LANGUAGE_ID;} public function getDocumentationLink(): string{ if($this->isCis()){ return ___792076311(10);} return ___792076311(11);} public function getRenewalLink(): string{ $_123020587= $this->getRegion(); if($GLOBALS['____1840043504'][4]($_123020587,[___792076311(12), ___792076311(13), ___792076311(14), ___792076311(15)])){ return self::URL_RENEWAL_LICENSE[$_123020587];} if($GLOBALS['____1840043504'][5]($_123020587,[___792076311(16), ___792076311(17), ___792076311(18), ___792076311(19), ___792076311(20)])){ return self::URL_RENEWAL_LICENSE[___792076311(21)];} return self::URL_RENEWAL_LICENSE[___792076311(22)];} public function getDomainStoreLicense(): string{ return self::DOMAINS_STORE_LICENSE[$this->getRegion()] ?? self::DOMAINS_STORE_LICENSE[___792076311(23)];} public function isDemo(): bool{ return $GLOBALS['____1840043504'][6](___792076311(24)) && DEMO === ___792076311(25);} public function isTimeBound(): bool{ return $GLOBALS['____1840043504'][7](___792076311(26)) && TIMELIMIT_EDITION === ___792076311(27);} public function isEncoded(): bool{ return $GLOBALS['____1840043504'][8](___792076311(28)) && ENCODE === ___792076311(29);} public function getExpireDate():?Date{ $_1505040613= (int)($GLOBALS[___792076311(30)] ??(193*2-386)); if($_1505040613>(1036/2-518)){ return Date::createFromTimestamp($_1505040613);} return null;} public function getSupportExpireDate():?Date{ $_1505040613= Option::get(___792076311(31), ___792076311(32)); if(Date::isCorrect($_1505040613, ___792076311(33))){ return new Date($_1505040613, ___792076311(34));} return null;} public function isCis(): bool{ return isset(self::CIS[$this->getRegion()]);} public function getRegion():?string{ if($this->_123020587 === null){ if(Loader::includeModule(___792076311(35))){ $this->_123020587= \CBitrix24::getPortalZone();} else{ $_123020587= Option::get(___792076311(36), ___792076311(37)); if(empty($_123020587)){ $_123020587= $this->__1960283858(); if(empty($_123020587)){ $_123020587= $this->__1823334094();}} $this->_123020587= $_123020587 ?? ___792076311(38);}} return $this->_123020587?: null;} public function getEulaLink(): string{ if(ModuleManager::isModuleInstalled(___792076311(39))){ return self::URL_CP_EULA[$this->getRegion()] ?? self::URL_CP_EULA[___792076311(40)];} return self::URL_BUS_EULA[$this->getRegion()] ?? self::URL_BUS_EULA[___792076311(41)];} private function __1960283858():?string{ $_1018496794= Option::get(___792076311(42), ___792076311(43)); if($_1018496794 === ___792076311(44) || $_1018496794 === ___792076311(45)){ return ___792076311(46);} if($_1018496794 === ___792076311(47) || $_1018496794 === ___792076311(48)){ return ___792076311(49);} return null;} private function __1823334094():?string{ $_2039798772= Application::getDocumentRoot(); if($GLOBALS['____1840043504'][9]($_2039798772. ___792076311(50))){ return ___792076311(51);} if($GLOBALS['____1840043504'][10]($_2039798772. ___792076311(52))){ return ___792076311(53);} if($GLOBALS['____1840043504'][11]($_2039798772. ___792076311(54))){ return ___792076311(55);} if($GLOBALS['____1840043504'][12]($_2039798772. ___792076311(56))){ return ___792076311(57);} return null;} public function getPartnerId(): int{ return (int)Option::get(___792076311(58), ___792076311(59),(209*2-418));} public function getMaxUsers(): int{ return (int)Option::get(___792076311(60), ___792076311(61),(169*2-338));} public function isExtraCountable(): bool{ return Option::get(___792076311(62), ___792076311(63), ___792076311(64)) === ___792076311(65) && ModuleManager::isModuleInstalled(___792076311(66));} public function getActiveUsersCount(Date $_575390177= null): int{ $_1090524069= Application::getConnection(); $_2134085327=(1436/2-718); if($_575390177 !== null){  $_1241450489= ___792076311(67).$_1090524069->getSqlHelper()->convertToDbDate($_575390177);} else{  $_1241450489= ___792076311(68);} if(ModuleManager::isModuleInstalled(___792076311(69))){ $_555801750="
				SELECT COUNT(DISTINCT U.ID)
				FROM
					b_user U
					INNER JOIN b_user_field F ON F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
					INNER JOIN b_utm_user UF ON
						UF.FIELD_ID = F.ID
						AND UF.VALUE_ID = U.ID
						AND UF.VALUE_INT > 0
				WHERE U.ACTIVE = 'Y'
					{$_1241450489}
			"; $_2134085327= (int)$_1090524069->queryScalar($_555801750); $_1505885756= (int)Option::get(___792076311(70), ___792076311(71)); if($_1505885756>(1280/2-640) && $this->isExtraCountable()){ $_555801750="
						SELECT COUNT(1)
						FROM
							b_user U
							INNER JOIN b_extranet_user EU ON EU.USER_ID = U.ID AND EU.CHARGEABLE = 'Y'
							INNER JOIN b_user_group UG ON UG.USER_ID = U.ID AND UG.GROUP_ID = {$_1505885756}
							LEFT JOIN (
								SELECT UF.VALUE_ID 
								FROM 
									b_user_field F
									INNER JOIN b_utm_user UF ON UF.FIELD_ID = F.ID AND UF.VALUE_INT > 0
								WHERE F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
							) D ON D.VALUE_ID = U.ID
						WHERE U.ACTIVE = 'Y'
							{$_1241450489}
							AND D.VALUE_ID IS NULL
					"; $_2134085327 += (int)$_1090524069->queryScalar($_555801750);}} return $_2134085327;}  public function getName(): string{ return Option::get(___792076311(72), ___792076311(73));}  public function getCodes(): array{ $_1455324755= Option::get(___792076311(74), ___792076311(75)); if($_1455324755 != ___792076311(76)){ return $GLOBALS['____1840043504'][13](___792076311(77), $_1455324755);} return[];}}?>