<? namespace Bitrix\Main;$GLOBALS['____1045398884']= array(base64_decode('Z'.'ml'.'sZV9leG'.'lz'.'dH'.'M='),base64_decode('c3Ry'.'d'.'G91'.'cHBlc'.'g=='),base64_decode('b'.'WQ1'),base64_decode('bWQ1'),base64_decode(''.'aW5fYX'.'JyYXk='),base64_decode('a'.'W5fYXJyYXk='),base64_decode('ZGVmaW5'.'lZA='.'='),base64_decode('ZGVma'.'W5lZA'.'=='),base64_decode('ZG'.'VmaW5lZA'.'=='),base64_decode('Z'.'m'.'l'.'sZV'.'9'.'le'.'GlzdHM='),base64_decode('Z'.'ml'.'s'.'ZV9le'.'GlzdHM='),base64_decode('Zmls'.'ZV9le'.'GlzdHM='),base64_decode('ZmlsZV9leGlzdHM='),base64_decode('Z'.'XhwbG9kZQ'.'=='));if(!function_exists(__NAMESPACE__.'\\___1649271002')){function ___1649271002($_1722848942){static $_2126853832= false; if($_2126853832 == false) $_2126853832=array('L2JpdHJpeC9sa'.'WNlbnN'.'lX2'.'tleS5waHA=','','','REVNT'.'w==','REVNTw==',''.'Q'.'klUUk'.'l'.'Y',''.'TElDRU5DRQ'.'='.'=',''.'R'.'E'.'VNT'.'w='.'=',''.'L2tleV91cG'.'Rh'.'dGUu'.'c'.'Ghw'.'P2xpY'.'2Vuc'.'2Vf'.'a2V'.'5PQ==','JnRv'.'YmFza2V0PXkm'.'bGFuZ'.'z0=','aH'.'R0cH'.'M6L'.'y9k'.'ZXYuMWMtYm'.'l0'.'cml'.'4Ln'.'J1'.'L2x'.'lYX'.'Ju'.'aW5nL2'.'Nv'.'dXJz'.'ZS9'.'pbmRle'.'C'.'5waHA/'.'Q09VUlNFX'.'0lEPTE'.'zNSZMR'.'VNTT05'.'fSU'.'Q9MjU3'.'MjA'.'=','aH'.'R0cHM'.'6Ly90cmFpbml'.'uZy5iaXRyaXgyNC5'.'jb20v'.'c3VwcG9ydC90c'.'mFpbm'.'l'.'u'.'Z'.'y9jb3'.'Vyc2UvaW'.'5k'.'ZXg'.'ucG'.'hwP0NPVVJTRV'.'9JRD0xNzg'.'m'.'TE'.'VTU09OX0l'.'EPTI1OTMyJkxFU1NPTl9QQVRIP'.'T'.'E3'.'NTI'.'w'.'Lj'.'E3NT'.'YyL'.'j'.'I1O'.'TMwLjI'.'1OTMy','cn'.'U=',''.'Ynk=','a3o=','ZGU=','ZXU=','Zn'.'I=','cGw=','aXQ=','dWs'.'=','Z'.'XU'.'=','Y29t','ZW'.'4=','REV'.'N'.'Tw==',''.'WQ==','VElNRU'.'xJ'.'TU'.'lU'.'X0VE'.'SVR'.'JT04=','WQ==','RU5DT0RF','WQ==','U2'.'l0'.'Z'.'UV4c'.'Gl'.'yZURhdGU=','bWF'.'p'.'bg='.'=','f'.'n'.'N1cHB'.'vcnRfZm'.'luaXNoX2RhdG'.'U=','WS1'.'tLWQ=','WS'.'1tLWQ=',''.'Yml0'.'c'.'m'.'l'.'4Mj'.'Q'.'=',''.'bW'.'Fpbg'.'==','flBBUkFNX0'.'N'.'MS'.'UV'.'OVF9'.'MQU5H','','aW50'.'cmF'.'uZXQ=','Z'.'W4=','cnU'.'=','bWFpbg='.'=','dmVuZG9y','Yml0'.'cml4X3B'.'vc'.'nRh'.'b'.'A==','Ym'.'l'.'0cml4',''.'ZW4=','MWNfY'.'ml0cml4X3Bvc'.'nRhbA==',''.'MWNfY'.'m'.'l0cml4','cnU=','L2JpdHJpeC9t'.'b'.'2R1bGVz'.'L21haW4v'.'bGFu'.'Zy91Y'.'Q==',''.'dWE=','L2JpdH'.'Jp'.'eC9'.'t'.'b2R1b'.'GV'.'zL21'.'h'.'a'.'W4vbGFuZy9i'.'eQ==','Ynk=','L2J'.'pdHJp'.'eC9t'.'b2R1bG'.'VzL'.'21haW4vb'.'G'.'FuZy9r'.'eg==',''.'a3o=',''.'L2Jp'.'dHJp'.'eC9tb2R1bGVzL21haW4vbGFu'.'Zy9y'.'dQ==','cnU=','bW'.'Fpbg==',''.'flB'.'BUkFNX1'.'BBUlRO'.'RVJfSU'.'Q=','bWFpb'.'g='.'=',''.'UE'.'F'.'SQU1fTUFY'.'X1VTR'.'VJT','b'.'WFpbg==',''.'f'.'kNPVU5UX0VYVFJB',''.'Tg==','WQ==','ZXh0'.'cmFuZXQ'.'=','QU5'.'E'.'IFUuTE'.'FTVF9MT0dJ'.'TiA'.'+IA'.'==',''.'QU5EI'.'FUuTEFTVF9MT0'.'dJTi'.'BJ'.'UyB'.'OT1Qg'.'TlV'.'MTA==','aW50cmF'.'uZXQ=','ZX'.'h0cmF'.'uZX'.'Q'.'=','ZXh0cmF'.'uZXR'.'fZ3JvdXA=','b'.'WFp'.'b'.'g==','fmx'.'pY2V'.'u'.'c2Vfb'.'mFtZQ==','bW'.'Fp'.'bg==','fm'.'xpY'.'2'.'V'.'uc2'.'V'.'fY29k'.'ZXM=','',''.'LA='.'=');return base64_decode($_2126853832[$_1722848942]);}}; use Bitrix\Main\Config\Option; use Bitrix\Main\Type\Date; final class License{ private?string $_1232429534= null; private?string $_1096718180= null; private const DOMAINS_STORE_LICENSE=[ 'ru' => 'https://util.1c-bitrix.ru', 'en' => 'https://util.bitrixsoft.com', 'kz' => 'https://util.1c-bitrix.kz', 'by' => 'https://util.1c-bitrix.by',]; public const URL_BUS_EULA=[ 'ru' => 'https://www.1c-bitrix.ru/download/law/eula_bus.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_bus.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_bus.pdf',]; public const URL_CP_EULA=[ 'ru' => 'https://www.1c-bitrix.ru/download/law/eula_cp.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_cp.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_cp.pdf', 'en' => 'https://www.bitrix24.com/eula/', 'br' => 'https://www.bitrix24.com.br/eula/', 'fr' => 'https://www.bitrix24.fr/eula/', 'pl' => 'https://www.bitrix24.pl/eula/', 'it' => 'https://www.bitrix24.it/eula/', 'la' => 'https://www.bitrix24.es/eula/',]; public const URL_RENEWAL_LICENSE=[ 'com' => 'https://store.bitrix24.com/profile/license-keys.php', 'eu' => 'https://store.bitrix24.eu/profile/license-keys.php', 'de' => 'https://store.bitrix24.de/profile/license-keys.php', 'ru' => 'https://www.1c-bitrix.ru/buy/products/b24.php#tab-section-2', 'by' => 'https://www.1c-bitrix.by/buy/products/b24.php#tab-section-2', 'kz' => 'https://www.1c-bitrix.kz/buy/products/b24.php#tab-section-2',]; private const CIS=['ru' => 1, 'by' => 1, 'kz' => 1, 'uz' => 1, 'kg' => 1, 'am' => 1, 'az' => 1, 'ge' => 1]; public function getKey(): string{ if($this->_1232429534 === null){ $_1071658114= Loader::getDocumentRoot(). ___1649271002(0); $LICENSE_KEY= ___1649271002(1); if($GLOBALS['____1045398884'][0]($_1071658114)){ include($_1071658114);} $this->_1232429534=($LICENSE_KEY == ___1649271002(2) || $GLOBALS['____1045398884'][1]($LICENSE_KEY) == ___1649271002(3)? ___1649271002(4): $LICENSE_KEY);} return $this->_1232429534;} public function getHashLicenseKey(): string{ return $GLOBALS['____1045398884'][2]($this->getKey());} public function getPublicHashKey(): string{ return $GLOBALS['____1045398884'][3](___1649271002(5). $this->getKey(). ___1649271002(6));} public function isDemoKey(): bool{ return $this->getKey() == ___1649271002(7);} public function getBuyLink(): string{ return $this->getDomainStoreLicense(). ___1649271002(8). $this->getHashLicenseKey(). ___1649271002(9). LANGUAGE_ID;} public function getDocumentationLink(): string{ if($this->isCis()){ return ___1649271002(10);} return ___1649271002(11);} public function getRenewalLink(): string{ $_1096718180= $this->getRegion(); if($GLOBALS['____1045398884'][4]($_1096718180,[___1649271002(12), ___1649271002(13), ___1649271002(14), ___1649271002(15)])){ return self::URL_RENEWAL_LICENSE[$_1096718180];} if($GLOBALS['____1045398884'][5]($_1096718180,[___1649271002(16), ___1649271002(17), ___1649271002(18), ___1649271002(19), ___1649271002(20)])){ return self::URL_RENEWAL_LICENSE[___1649271002(21)];} return self::URL_RENEWAL_LICENSE[___1649271002(22)];} public function getDomainStoreLicense(): string{ return self::DOMAINS_STORE_LICENSE[$this->getRegion()] ?? self::DOMAINS_STORE_LICENSE[___1649271002(23)];} public function isDemo(): bool{ return $GLOBALS['____1045398884'][6](___1649271002(24)) && DEMO === ___1649271002(25);} public function isTimeBound(): bool{ return $GLOBALS['____1045398884'][7](___1649271002(26)) && TIMELIMIT_EDITION === ___1649271002(27);} public function isEncoded(): bool{ return $GLOBALS['____1045398884'][8](___1649271002(28)) && ENCODE === ___1649271002(29);} public function getExpireDate():?Date{ $_1615851343= (int)($GLOBALS[___1649271002(30)] ?? min(186,0,62)); if($_1615851343>(1404/2-702)){ return Date::createFromTimestamp($_1615851343);} return null;} public function getSupportExpireDate():?Date{ $_1615851343= Option::get(___1649271002(31), ___1649271002(32)); if(Date::isCorrect($_1615851343, ___1649271002(33))){ return new Date($_1615851343, ___1649271002(34));} return null;} public function isCis(): bool{ return isset(self::CIS[$this->getRegion()]);} public function getRegion():?string{ if($this->_1096718180 === null){ if(Loader::includeModule(___1649271002(35))){ $this->_1096718180= \CBitrix24::getPortalZone();} else{ $_1096718180= Option::get(___1649271002(36), ___1649271002(37)); if(empty($_1096718180)){ $_1096718180= $this->__448902538(); if(empty($_1096718180)){ $_1096718180= $this->__1057871445();}} $this->_1096718180= $_1096718180 ?? ___1649271002(38);}} return $this->_1096718180?: null;} public function getEulaLink(): string{ if(ModuleManager::isModuleInstalled(___1649271002(39))){ return self::URL_CP_EULA[$this->getRegion()] ?? self::URL_CP_EULA[___1649271002(40)];} return self::URL_BUS_EULA[$this->getRegion()] ?? self::URL_BUS_EULA[___1649271002(41)];} private function __448902538():?string{ $_837235561= Option::get(___1649271002(42), ___1649271002(43)); if($_837235561 === ___1649271002(44) || $_837235561 === ___1649271002(45)){ return ___1649271002(46);} if($_837235561 === ___1649271002(47) || $_837235561 === ___1649271002(48)){ return ___1649271002(49);} return null;} private function __1057871445():?string{ $_197291727= Application::getDocumentRoot(); if($GLOBALS['____1045398884'][9]($_197291727. ___1649271002(50))){ return ___1649271002(51);} if($GLOBALS['____1045398884'][10]($_197291727. ___1649271002(52))){ return ___1649271002(53);} if($GLOBALS['____1045398884'][11]($_197291727. ___1649271002(54))){ return ___1649271002(55);} if($GLOBALS['____1045398884'][12]($_197291727. ___1649271002(56))){ return ___1649271002(57);} return null;} public function getPartnerId(): int{ return (int)Option::get(___1649271002(58), ___1649271002(59),(788-2*394));} public function getMaxUsers(): int{ return (int)Option::get(___1649271002(60), ___1649271002(61),(968-2*484));} public function isExtraCountable(): bool{ return Option::get(___1649271002(62), ___1649271002(63), ___1649271002(64)) === ___1649271002(65) && ModuleManager::isModuleInstalled(___1649271002(66));} public function getActiveUsersCount(Date $_328796269= null): int{ $_254119630= Application::getConnection(); $_1813661992=(894-2*447); if($_328796269 !== null){  $_1282545381= ___1649271002(67).$_254119630->getSqlHelper()->convertToDbDate($_328796269);} else{  $_1282545381= ___1649271002(68);} if(ModuleManager::isModuleInstalled(___1649271002(69))){ $_1530829485="
				SELECT COUNT(DISTINCT U.ID)
				FROM
					b_user U
					INNER JOIN b_user_field F ON F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
					INNER JOIN b_utm_user UF ON
						UF.FIELD_ID = F.ID
						AND UF.VALUE_ID = U.ID
						AND UF.VALUE_INT > 0
				WHERE U.ACTIVE = 'Y'
					{$_1282545381}
			"; $_1813661992= (int)$_254119630->queryScalar($_1530829485); $_130564267= (int)Option::get(___1649271002(70), ___1649271002(71)); if($_130564267>(1172/2-586) && $this->isExtraCountable()){ $_1530829485="
						SELECT COUNT(1)
						FROM
							b_user U
							INNER JOIN b_extranet_user EU ON EU.USER_ID = U.ID AND EU.CHARGEABLE = 'Y'
							INNER JOIN b_user_group UG ON UG.USER_ID = U.ID AND UG.GROUP_ID = {$_130564267}
							LEFT JOIN (
								SELECT UF.VALUE_ID 
								FROM 
									b_user_field F
									INNER JOIN b_utm_user UF ON UF.FIELD_ID = F.ID AND UF.VALUE_INT > 0
								WHERE F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
							) D ON D.VALUE_ID = U.ID
						WHERE U.ACTIVE = 'Y'
							{$_1282545381}
							AND D.VALUE_ID IS NULL
					"; $_1813661992 += (int)$_254119630->queryScalar($_1530829485);}} return $_1813661992;}  public function getName(): string{ return Option::get(___1649271002(72), ___1649271002(73));}  public function getCodes(): array{ $_1906098396= Option::get(___1649271002(74), ___1649271002(75)); if($_1906098396 != ___1649271002(76)){ return $GLOBALS['____1045398884'][13](___1649271002(77), $_1906098396);} return[];}}?>