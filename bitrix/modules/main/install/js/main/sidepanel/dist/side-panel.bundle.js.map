{"version":3,"file":"side-panel.bundle.js","sources":["../src/dictionary.js","../src/label.js","../src/slider-event.js","../src/message-event.js","../src/slider.js","../src/get-instance.js","../src/toolbar-item.js","../src/toolbar.js","../src/slider-manager.js","../src/index.js"],"sourcesContent":["import { Type, type JsonObject, type JsonValue } from 'main.core';\n\nexport class Dictionary\n{\n\t#data: JsonObject = null;\n\n\tconstructor(data: JsonObject)\n\t{\n\t\tif (!Type.isPlainObject(data))\n\t\t{\n\t\t\tthrow new TypeError('The argument must be a plain object.');\n\t\t}\n\n\t\tthis.#data = data;\n\t}\n\n\tset(key: string, value: JsonValue): void\n\t{\n\t\tif (!Type.isStringFilled(key))\n\t\t{\n\t\t\tthrow new Error('The \\'key\\' must be a string.');\n\t\t}\n\n\t\tthis.#data[key] = value;\n\t}\n\n\tget(key: string): JsonValue | undefined\n\t{\n\t\treturn this.#data[key];\n\t}\n\n\tdelete(key: string): void\n\t{\n\t\tdelete this.#data[key];\n\t}\n\n\thas(key: string): boolean\n\t{\n\t\treturn key in this.#data;\n\t}\n\n\tclear(): void\n\t{\n\t\tthis.#data = {};\n\t}\n\n\tentries(): JsonObject\n\t{\n\t\treturn this.#data;\n\t}\n}\n","import { Type, Cache, Dom } from 'main.core';\n\nimport { type Slider } from './slider';\nimport { type LabelOptions } from './types/label-options';\n\nexport class Label\n{\n\tstatic MIN_LEFT_OFFSET = 25;\n\tstatic MIN_TOP_OFFSET = 17;\n\tstatic INTERVAL_TOP_OFFSET = 50;\n\n\tslider: Slider = null;\n\tcolor = null;\n\tbgColor = null;\n\tclassName = '';\n\ticonClass = '';\n\ticonTitle = '';\n\tonclick = null;\n\ttext = null;\n\thidden: boolean = false;\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(slider: Slider, labelOptions: LabelOptions)\n\t{\n\t\tthis.slider = slider;\n\t\tconst options = Type.isPlainObject(labelOptions) ? labelOptions : {};\n\n\t\tthis.hidden = Type.isBoolean(options.hidden) ? options.hidden : this.hidden;\n\n\t\tthis.setColor(options.color);\n\t\tthis.setBgColor(options.bgColor);\n\t\tthis.setText(options.text);\n\t\tthis.setClassName(options.className);\n\t\tthis.setIconClass(options.iconClass);\n\t\tthis.setIconTitle(options.iconTitle);\n\t\tthis.setOnclick(options.onclick);\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn this.cache.remember('container', () => {\n\t\t\tconst classes = ['side-panel-label'];\n\t\t\tif (this.getClassName())\n\t\t\t{\n\t\t\t\tclasses.push(this.getClassName());\n\t\t\t}\n\n\t\t\tif (this.isHidden())\n\t\t\t{\n\t\t\t\tclasses.push('--hidden');\n\t\t\t}\n\n\t\t\treturn Dom.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: classes.join(' '),\n\t\t\t\t},\n\t\t\t\tchildren: [\n\t\t\t\t\tthis.getIconBox(),\n\t\t\t\t\tthis.getTextContainer(),\n\t\t\t\t],\n\t\t\t\tevents: {\n\t\t\t\t\tclick: this.#handleClick.bind(this),\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tadjustLayout(): void\n\t{\n\t\tconst overlayRect = this.getSlider().getOverlay().getBoundingClientRect();\n\t\tconst containerRect = this.getSlider().getContainer().getBoundingClientRect();\n\t\tconst maxWidth = containerRect.left - overlayRect.left;\n\n\t\tif (maxWidth <= this.getSlider().getMinLeftBoundary())\n\t\t{\n\t\t\tthis.hideText();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showText();\n\t\t}\n\n\t\tDom.style(this.getContainer(), 'max-width', `${maxWidth - this.constructor.MIN_LEFT_OFFSET}px`);\n\t}\n\n\tgetIconBox(): HTMLElement\n\t{\n\t\treturn this.cache.remember('icon-box', () => {\n\t\t\treturn Dom.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'side-panel-label-icon-box',\n\t\t\t\t},\n\t\t\t\tchildren: [\n\t\t\t\t\tthis.getIconContainer(),\n\t\t\t\t],\n\t\t\t});\n\t\t});\n\t}\n\n\tgetIconContainer(): HTMLElement\n\t{\n\t\treturn this.cache.remember('icon-container', () => {\n\t\t\treturn Dom.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: `side-panel-label-icon ${this.getIconClass()}`,\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\t#handleClick(event: MouseEvent): void\n\t{\n\t\tevent.stopPropagation();\n\n\t\tconst fn = this.getOnclick();\n\t\tif (fn)\n\t\t{\n\t\t\tfn(this, this.getSlider());\n\t\t}\n\t}\n\n\tshowIcon(): void\n\t{\n\t\tDom.removeClass(this.getContainer(), 'side-panel-label-icon--hide');\n\t}\n\n\thideIcon(): void\n\t{\n\t\tDom.addClass(this.getContainer(), 'side-panel-label-icon--hide');\n\t}\n\n\tdarkenIcon(): void\n\t{\n\t\tDom.addClass(this.getContainer(), 'side-panel-label-icon--darken');\n\t}\n\n\tlightenIcon(): void\n\t{\n\t\tDom.removeClass(this.getContainer(), 'side-panel-label-icon--darken');\n\t}\n\n\thideText(): void\n\t{\n\t\tDom.addClass(this.getTextContainer(), 'side-panel-label-text-hidden');\n\t}\n\n\tshowText(): void\n\t{\n\t\tDom.removeClass(this.getTextContainer(), 'side-panel-label-text-hidden');\n\t}\n\n\tisTextHidden(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getTextContainer(), 'side-panel-label-text-hidden');\n\t}\n\n\tgetTextContainer(): HTMLElement\n\t{\n\t\treturn this.cache.remember('text-container', () => {\n\t\t\treturn Dom.create('span', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'side-panel-label-text',\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tsetColor(color: string): void\n\t{\n\t\tif (Type.isStringFilled(color))\n\t\t{\n\t\t\tthis.color = color;\n\n\t\t\tDom.style(this.getTextContainer(), 'color', color);\n\t\t\tDom.style(this.getIconContainer(), '--ui-icon-set__icon-color', color);\n\t\t}\n\t}\n\n\tgetColor(): string | null\n\t{\n\t\treturn this.color;\n\t}\n\n\tsetBgColor(color: string | [string, number], opacity: number): void\n\t{\n\t\tlet bgColor: string = Type.isArray(color) ? color[0] : color;\n\t\tlet alfa: number = Type.isArray(color) ? color[1] : opacity;\n\n\t\tif (Type.isStringFilled(bgColor))\n\t\t{\n\t\t\tconst matches = bgColor.match(/^#([\\dA-Fa-f]{6}|[\\dA-Fa-f]{3})$/);\n\t\t\tif (matches)\n\t\t\t{\n\t\t\t\tlet hex = matches[1];\n\t\t\t\tif (hex.length === 3)\n\t\t\t\t{\n\t\t\t\t\thex = hex.replaceAll(/([\\da-f])/gi, '$1$1');\n\t\t\t\t}\n\n\t\t\t\talfa = Type.isNumber(alfa) && alfa >= 0 && alfa <= 100 ? alfa : 95;\n\t\t\t\tconst alfaHex = `0${Math.round(255 * (alfa / 100)).toString(16)}`.slice(-2).toUpperCase();\n\n\t\t\t\tbgColor = `#${hex}${alfaHex}`;\n\t\t\t}\n\n\t\t\tthis.bgColor = bgColor;\n\t\t\tDom.style(this.getContainer(), '--ui-color', bgColor);\n\n\t\t\tif (this.getColor() === null)\n\t\t\t{\n\t\t\t\tDom.style(this.getIconContainer(), '--ui-icon-set__icon-color', '#fff');\n\t\t\t}\n\t\t}\n\t\telse if (bgColor === null)\n\t\t{\n\t\t\tthis.bgColor = null;\n\t\t\tDom.style(this.getContainer(), '--ui-color', null);\n\t\t\tDom.style(this.getIconContainer(), '--ui-icon-set__icon-color', null);\n\t\t}\n\t}\n\n\tgetBgColor(): string | null\n\t{\n\t\treturn this.bgColor;\n\t}\n\n\tsetText(text: string | null): void\n\t{\n\t\tif (Type.isStringFilled(text))\n\t\t{\n\t\t\tthis.text = text;\n\t\t\tthis.getTextContainer().textContent = text;\n\t\t}\n\t\telse if (text === null)\n\t\t{\n\t\t\tthis.text = text;\n\t\t\tthis.getTextContainer().textContent = '';\n\t\t}\n\t}\n\n\tgetText(): string | null\n\t{\n\t\treturn this.text;\n\t}\n\n\tsetClassName(className: string | null): void\n\t{\n\t\tif (Type.isStringFilled(className))\n\t\t{\n\t\t\tDom.removeClass(this.getContainer(), this.className);\n\t\t\tthis.className = className;\n\t\t\tDom.addClass(this.getContainer(), this.className);\n\t\t}\n\t\telse if (className === null)\n\t\t{\n\t\t\tDom.removeClass(this.getContainer(), this.className);\n\t\t\tthis.className = className;\n\t\t}\n\t}\n\n\tgetClassName(): string\n\t{\n\t\treturn this.className;\n\t}\n\n\tsetIconClass(iconClass: string | null): void\n\t{\n\t\tif (Type.isStringFilled(iconClass))\n\t\t{\n\t\t\tDom.removeClass(this.getIconContainer(), this.iconClass);\n\t\t\tthis.iconClass = iconClass;\n\t\t\tDom.addClass(this.getIconContainer(), this.iconClass);\n\t\t}\n\t\telse if (iconClass === null)\n\t\t{\n\t\t\tDom.removeClass(this.getIconContainer(), this.iconClass);\n\t\t\tthis.iconClass = iconClass;\n\t\t}\n\t}\n\n\tgetIconClass(): string\n\t{\n\t\treturn this.iconClass;\n\t}\n\n\tsetIconTitle(iconTitle: string | null): void\n\t{\n\t\tif (Type.isStringFilled(iconTitle) || iconTitle === null)\n\t\t{\n\t\t\tDom.attr(this.getIconBox(), 'title', iconTitle);\n\t\t\tthis.iconTitle = iconTitle;\n\t\t}\n\t}\n\n\tgetIconTitle(): void\n\t{\n\t\treturn this.iconTitle;\n\t}\n\n\tisHidden(): boolean\n\t{\n\t\treturn this.hidden;\n\t}\n\n\thide(): void\n\t{\n\t\tthis.hidden = true;\n\t\tDom.addClass(this.getContainer(), '--hidden');\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.hidden = false;\n\t\tDom.removeClass(this.getContainer(), '--hidden');\n\t}\n\n\tsetOnclick(fn: Function): void\n\t{\n\t\tif (Type.isFunction(fn) || fn === null)\n\t\t{\n\t\t\tthis.onclick = fn;\n\t\t}\n\t}\n\n\tgetOnclick(): string | null\n\t{\n\t\treturn this.onclick;\n\t}\n\n\tgetSlider(): Slider\n\t{\n\t\treturn this.slider;\n\t}\n\n\tmoveAt(position: number): void\n\t{\n\t\tif (Type.isNumber(position) && position >= 0)\n\t\t{\n\t\t\tDom.style(\n\t\t\t\tthis.getSlider().getLabelsContainer(),\n\t\t\t\t'top',\n\t\t\t\t`${this.constructor.MIN_TOP_OFFSET + (position * this.constructor.INTERVAL_TOP_OFFSET)}px`,\n\t\t\t);\n\t\t}\n\t}\n}\n","import { Type } from 'main.core';\nimport { Slider } from './slider';\n\nexport class SliderEvent\n{\n\tconstructor()\n\t{\n\t\tthis.slider = null;\n\t\tthis.action = true;\n\t\tthis.name = null;\n\t}\n\n\tallowAction(): void\n\t{\n\t\tthis.action = true;\n\t}\n\n\tdenyAction(): void\n\t{\n\t\tthis.action = false;\n\t}\n\n\tisActionAllowed(): boolean\n\t{\n\t\treturn this.action;\n\t}\n\n\t/**\n\t * @deprecated use getSlider method\n\t */\n\tgetSliderPage(): Slider\n\t{\n\t\treturn this.slider;\n\t}\n\n\tgetSlider(): Slider\n\t{\n\t\treturn this.slider;\n\t}\n\n\tsetSlider(slider: Slider): void\n\t{\n\t\tif (slider instanceof Slider)\n\t\t{\n\t\t\tthis.slider = slider;\n\t\t}\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn this.name;\n\t}\n\n\tsetName(name: string): void\n\t{\n\t\tif (Type.isStringFilled(name))\n\t\t{\n\t\t\tthis.name = name;\n\t\t}\n\t}\n\n\tgetFullName(): string\n\t{\n\t\treturn Slider.getEventFullName(this.getName());\n\t}\n}\n","import { Type, type JsonObject } from 'main.core';\n\nimport { Slider } from './slider';\nimport { SliderEvent } from './slider-event';\n\nexport class MessageEvent extends SliderEvent\n{\n\tconstructor(eventOptions)\n\t{\n\t\tsuper();\n\n\t\tconst options = Type.isPlainObject(eventOptions) ? eventOptions : {};\n\n\t\tif (!(options.sender instanceof Slider))\n\t\t{\n\t\t\tthrow new TypeError('\\'sender\\' is not an instance of BX.SidePanel.Slider');\n\t\t}\n\n\t\tthis.setName('onMessage');\n\t\tthis.setSlider(options.slider);\n\n\t\tthis.sender = options.sender;\n\t\tthis.data = 'data' in options ? options.data : null;\n\t\tthis.eventId = Type.isStringFilled(options.eventId) ? options.eventId : null;\n\t}\n\n\tgetSlider(): Slider | null\n\t{\n\t\treturn this.slider;\n\t}\n\n\tgetSender(): Slider\n\t{\n\t\treturn this.sender;\n\t}\n\n\tgetData(): JsonObject\n\t{\n\t\treturn this.data;\n\t}\n\n\tgetEventId(): string | null\n\t{\n\t\treturn this.eventId;\n\t}\n}\n","import { Type, Loc, Dom, Event, Runtime, Text, Browser, Uri, Tag, type JsonObject } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { MemoryCache, type BaseCache } from 'main.core.cache';\nimport { ZIndexManager, type ZIndexComponent } from 'main.core.z-index-manager';\n\nimport { Dictionary } from './dictionary';\nimport { Label } from './label';\nimport { MessageEvent } from './message-event';\nimport { SliderEvent } from './slider-event';\n\nimport { type SliderOptions } from './types/slider-options';\nimport { type MinimizeOptions } from './types/minimize-options';\nimport { type OuterBoundary } from './types/outer-boundary';\n\nexport class Slider\n{\n\t#refs: BaseCache<HTMLElement> = new MemoryCache();\n\n\t#startPosition: 'right' | 'bottom' | 'top' = 'right';\n\t#startAnimationState: JsonObject = null;\n\t#endAnimationState: JsonObject = null;\n\t#currentAnimationState: JsonObject = null;\n\t#outerBoundary: OuterBoundary = {};\n\t#hideToolbarOnOpen: boolean = false;\n\t#designSystemContext: string = '--ui-context-content-light';\n\t#zIndexComponent: ZIndexComponent = null;\n\t#autoOffset: boolean = true;\n\n\tconstructor(url: string, sliderOptions: SliderOptions)\n\t{\n\t\tconst options: SliderOptions = Type.isPlainObject(sliderOptions) ? sliderOptions : {};\n\n\t\tthis.contentCallback = Type.isFunction(options.contentCallback) ? options.contentCallback : null;\n\t\tthis.contentCallbackInvoved = false;\n\t\tthis.contentClassName = Type.isStringFilled(options.contentClassName) ? options.contentClassName : null;\n\t\tthis.containerClassName = Type.isStringFilled(options.containerClassName) ? options.containerClassName : null;\n\t\tthis.overlayClassName = Type.isStringFilled(options.overlayClassName) ? options.overlayClassName : null;\n\n\t\tthis.url = this.contentCallback ? url : this.refineUrl(url);\n\n\t\tthis.offset = null;\n\t\tthis.hideControls = options.hideControls === true;\n\t\tthis.width = Type.isNumber(options.width) ? options.width : null;\n\t\tthis.cacheable = options.cacheable !== false;\n\t\tthis.autoFocus = options.autoFocus !== false;\n\t\tthis.printable = options.printable === true;\n\t\tthis.allowChangeHistory = options.allowChangeHistory !== false;\n\t\tthis.allowChangeTitle = Type.isBoolean(options.allowChangeTitle) ? options.allowChangeTitle : null;\n\t\tthis.allowCrossOrigin = options.allowCrossOrigin === true;\n\t\tthis.data = new Dictionary(Type.isPlainObject(options.data) ? options.data : {});\n\n\t\tthis.customLeftBoundary = null;\n\t\tthis.customRightBoundary = null;\n\t\tthis.setCustomLeftBoundary(options.customLeftBoundary);\n\t\tthis.setCustomRightBoundary(options.customRightBoundary);\n\n\t\tthis.title = null;\n\t\tthis.setTitle(options.title);\n\t\t/**\n\t\t *\n\t\t * @type {HTMLIFrameElement}\n\t\t */\n\t\tthis.iframe = null;\n\t\tthis.iframeSrc = null;\n\t\tthis.iframeId = null;\n\t\tthis.requestMethod = (\n\t\t\tType.isStringFilled(options.requestMethod) && options.requestMethod.toLowerCase() === 'post'\n\t\t\t\t? 'post'\n\t\t\t\t: 'get'\n\t\t);\n\t\tthis.requestParams = Type.isPlainObject(options.requestParams) ? options.requestParams : {};\n\n\t\tthis.opened = false;\n\t\tthis.hidden = false;\n\t\tthis.destroyed = false;\n\t\tthis.loaded = false;\n\t\tthis.loadedCnt = 0;\n\n\t\tthis.minimizing = false;\n\t\tthis.maximizing = false;\n\n\t\tthis.handleFrameKeyDown = this.handleFrameKeyDown.bind(this);\n\t\tthis.handleFrameFocus = this.handleFrameFocus.bind(this);\n\t\tthis.handleFrameUnload = this.handleFrameUnload.bind(this);\n\t\tthis.handlePopupInit = this.handlePopupInit.bind(this);\n\t\tthis.handleCrossOriginWindowMessage = this.handleCrossOriginWindowMessage.bind(this);\n\n\t\tthis.layout = {\n\t\t\toverlay: null,\n\t\t\tcontainer: null,\n\t\t\tloader: null,\n\t\t\tcontent: null,\n\t\t};\n\n\t\tthis.loader = (\n\t\t\tType.isStringFilled(options.loader) || Type.isElementNode(options.loader)\n\t\t\t\t? options.loader\n\t\t\t\t: (Type.isStringFilled(options.typeLoader) ? options.typeLoader : 'default-loader')\n\t\t);\n\n\t\tthis.animation = null;\n\t\tthis.animationDuration = Type.isNumber(options.animationDuration) ? options.animationDuration : 200;\n\t\tthis.overlayBgColor = (\n\t\t\tType.isStringFilled(options.overlayBgColor) && /^#[\\dA-Za-f]{6}$/.test(options.overlayBgColor)\n\t\t\t\t? options.overlayBgColor\n\t\t\t\t: '#000000'\n\t\t);\n\t\tthis.overlayOpacity = (\n\t\t\tType.isNumber(options.overlayOpacity)\n\t\t\t\t? Math.min(Math.max(options.overlayOpacity, 0), 100)\n\t\t\t\t: 40\n\t\t);\n\n\t\tthis.overlayBgCallback = Type.isFunction(options.overlayBgCallback) ? options.overlayBgCallback : null;\n\n\t\tthis.#startPosition = (\n\t\t\t['right', 'bottom', 'top'].includes(options.startPosition)\n\t\t\t\t? options.startPosition\n\t\t\t\t: this.#startPosition\n\t\t);\n\t\tthis.#outerBoundary = Type.isPlainObject(options.outerBoundary) ? options.outerBoundary : {};\n\t\tthis.#startAnimationState = this.#getAnimationState('start');\n\t\tthis.#endAnimationState = this.#getAnimationState('end');\n\t\tthis.#currentAnimationState = null;\n\n\t\tthis.overlayAnimation = false;\n\t\tthis.animationName = 'sliding';\n\t\tthis.animationOptions = {};\n\n\t\tthis.minimizeOptions = null;\n\t\tconst minimizeOptions = options.minimizeOptions;\n\t\tif (\n\t\t\tType.isPlainObject(minimizeOptions)\n\t\t\t&& Type.isStringFilled(minimizeOptions.entityType)\n\t\t\t&& (Type.isStringFilled(minimizeOptions.entityId) || Type.isNumber(minimizeOptions.entityId))\n\t\t\t&& (Type.isStringFilled(minimizeOptions.url))\n\t\t)\n\t\t{\n\t\t\tthis.minimizeOptions = minimizeOptions;\n\t\t}\n\n\t\tthis.setToolbarOnOpen(options.hideToolbarOnOpen);\n\t\tthis.setDesignSystemContext(options.designSystemContext);\n\t\tthis.setAutoOffset(options.autoOffset);\n\n\t\tthis.label = new Label(this, {\n\t\t\tclassName: '--close-label --ui-hoverable',\n\t\t\ticonClass: 'side-panel-label-icon-close ui-icon-set --cross-l',\n\t\t\ticonTitle: Loc.getMessage('MAIN_SIDEPANEL_CLOSE'),\n\t\t\tbgColor: '#0075FF',\n\t\t\tonclick(label, slider)\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t},\n\t\t});\n\n\t\tconst labelOptions = Type.isPlainObject(options.label) ? options.label : {};\n\t\tthis.label.setText(labelOptions.text);\n\t\tthis.label.setColor(labelOptions.color);\n\t\tthis.label.setBgColor(labelOptions.bgColor, labelOptions.opacity);\n\n\t\tthis.minimizeLabel = null;\n\t\tthis.newWindowLabel = null;\n\t\tthis.copyLinkLabel = null;\n\t\tthis.printLabel = null;\n\n\t\tif (!this.isSelfContained() && this.minimizeOptions !== null)\n\t\t{\n\t\t\tthis.minimizeLabel = new Label(this, {\n\t\t\t\tclassName: '--ui-hoverable',\n\t\t\t\ticonClass: 'side-panel-label-icon-minimize ui-icon-set --o-minimize',\n\t\t\t\ticonTitle: Loc.getMessage('MAIN_SIDEPANEL_MINIMIZE'),\n\t\t\t\tonclick: (label, slider) => {\n\t\t\t\t\tif (this.isLoaded())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.minimize();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (options.newWindowLabel === true && (this.canChangeHistory() || Type.isStringFilled(options.newWindowUrl)))\n\t\t{\n\t\t\tthis.newWindowLabel = new Label(this, {\n\t\t\t\tclassName: '--ui-hoverable',\n\t\t\t\ticonClass: 'side-panel-label-icon-new-window ui-icon-set --go-to-l',\n\t\t\t\ticonTitle: Loc.getMessage('MAIN_SIDEPANEL_NEW_WINDOW'),\n\t\t\t\tonclick(label, slider)\n\t\t\t\t{\n\t\t\t\t\tconst newWindowUrl = Type.isStringFilled(options.newWindowUrl) ? options.newWindowUrl : slider.getUrl();\n\t\t\t\t\tObject.assign(document.createElement('a'), {\n\t\t\t\t\t\ttarget: '_blank',\n\t\t\t\t\t\thref: newWindowUrl,\n\t\t\t\t\t}).click();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (options.copyLinkLabel === true && (this.canChangeHistory() || Type.isStringFilled(options.newWindowUrl)))\n\t\t{\n\t\t\tthis.copyLinkLabel = new Label(this, {\n\t\t\t\tclassName: '--ui-hoverable',\n\t\t\t\ticonClass: 'side-panel-label-icon-copy-link ui-icon-set --o-link',\n\t\t\t\ticonTitle: Loc.getMessage('MAIN_SIDEPANEL_COPY_LINK'),\n\t\t\t});\n\n\t\t\tBX.clipboard.bindCopyClick(\n\t\t\t\tthis.copyLinkLabel.getIconBox(),\n\t\t\t\t{\n\t\t\t\t\ttext: () => {\n\t\t\t\t\t\tconst link = document.createElement('a');\n\t\t\t\t\t\tlink.href = Type.isStringFilled(options.newWindowUrl) ? options.newWindowUrl : this.getUrl();\n\n\t\t\t\t\t\treturn link.href;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\tthis.printLabel = new Label(this, {\n\t\t\thidden: !this.isPrintable(),\n\t\t\tclassName: '--side-panel-label-print --ui-hoverable',\n\t\t\ticonClass: 'side-panel-label-icon-print ui-icon-set --o-printer',\n\t\t\ticonTitle: Loc.getMessage('MAIN_SIDEPANEL_PRINT'),\n\t\t\tonclick: this.handlePrintBtnClick.bind(this),\n\t\t});\n\n\t\t// Compatibility\n\t\tif (\n\t\t\tthis.url.includes('crm.activity.planner/slider.php')\n\t\t\t&& options.events\n\t\t\t&& Type.isFunction(options.events.onOpen)\n\t\t\t&& options.events.compatibleEvents !== false\n\t\t)\n\t\t{\n\t\t\tconst onOpen = options.events.onOpen;\n\t\t\tdelete options.events.onOpen;\n\t\t\toptions.events.onLoad = function(event) {\n\t\t\t\tonOpen(event.getSlider());\n\t\t\t};\n\t\t}\n\n\t\tif (Type.isPlainObject(options.events))\n\t\t{\n\t\t\tfor (const [eventName, fn] of Object.entries(options.events))\n\t\t\t{\n\t\t\t\tif (Type.isFunction(fn))\n\t\t\t\t{\n\t\t\t\t\tEventEmitter.subscribe(this, Slider.getEventFullName(eventName), fn, { compatMode: true });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic getEventFullName(eventName: string): string\n\t{\n\t\treturn `SidePanel.Slider:${eventName}`;\n\t}\n\n\topen(): boolean\n\t{\n\t\tif (this.isOpen())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.canOpen())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.isDestroyed())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.maximizing)\n\t\t{\n\t\t\tthis.fireEvent('onMaximizeStart');\n\t\t}\n\n\t\tthis.createLayout();\n\n\t\tDom.removeClass(this.getOverlay(), '--closing');\n\t\tDom.addClass(this.getOverlay(), '--opening');\n\n\t\tthis.adjustLayout();\n\n\t\tZIndexManager.bringToFront(this.getOverlay());\n\n\t\tthis.opened = true;\n\n\t\tthis.fireEvent('onOpenStart');\n\n\t\tthis.animateOpening();\n\n\t\treturn true;\n\t}\n\n\tclose(immediately: boolean, callback: Function): boolean\n\t{\n\t\tif (!this.isOpen())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.canClose())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.minimizing)\n\t\t{\n\t\t\tthis.fireEvent('onMinimizeStart');\n\t\t}\n\n\t\tthis.fireEvent('onCloseStart');\n\n\t\tthis.opened = false;\n\n\t\tif (this.isDestroyed())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.animation)\n\t\t{\n\t\t\tthis.animation.stop();\n\t\t}\n\n\t\tDom.removeClass(this.getOverlay(), '--opening');\n\t\tDom.addClass(this.getOverlay(), '--closing');\n\n\t\tthis.fireEvent('onClosing');\n\n\t\tif (immediately === true || Browser.isMobile())\n\t\t{\n\t\t\tthis.#currentAnimationState = this.#startAnimationState;\n\t\t\tthis.completeAnimation(callback);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.animation = new BX.easing({\n\t\t\t\tduration: this.animationDuration,\n\t\t\t\tstart: this.#currentAnimationState,\n\t\t\t\tfinish: this.#startAnimationState,\n\t\t\t\tstep: (state) => {\n\t\t\t\t\tthis.#currentAnimationState = state;\n\t\t\t\t\tthis.animateStep(state);\n\t\t\t\t},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\tthis.completeAnimation(callback);\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t// Chrome rendering bug\n\t\t\tDom.style(this.getContainer(), 'opacity', 0.96);\n\n\t\t\tif (this.animationName === 'scale' && Type.isStringFilled(this.animationOptions.origin))\n\t\t\t{\n\t\t\t\tDom.style(this.getContainer(), 'transform-origin', this.animationOptions.origin);\n\t\t\t}\n\n\t\t\tthis.animation.animate();\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tminimize(immediately, callback): boolean\n\t{\n\t\tthis.minimizing = true;\n\n\t\tconst success = this.close(immediately, callback);\n\t\tif (!success)\n\t\t{\n\t\t\tthis.minimizing = false;\n\t\t}\n\n\t\treturn success;\n\t}\n\n\tisMinimizing(): boolean\n\t{\n\t\treturn this.minimizing;\n\t}\n\n\tmaximize(): boolean\n\t{\n\t\tthis.maximizing = true;\n\t\tconst success = this.open();\n\t\tif (!success)\n\t\t{\n\t\t\tthis.maximizing = false;\n\t\t}\n\n\t\treturn success;\n\t}\n\n\tisMaximizing(): boolean\n\t{\n\t\treturn this.maximizing;\n\t}\n\n\tsetAnimation(type, options): void\n\t{\n\t\tthis.animationName = type === 'scale' ? type : 'sliding';\n\t\tthis.animationOptions = Type.isPlainObject(options) ? options : {};\n\t}\n\n\tgetMinimizeOptions(): MinimizeOptions\n\t{\n\t\treturn this.minimizeOptions;\n\t}\n\n\tsetToolbarOnOpen(flag: boolean): void\n\t{\n\t\tif (Type.isBoolean(flag))\n\t\t{\n\t\t\tthis.#hideToolbarOnOpen = flag;\n\t\t}\n\t}\n\n\tshouldHideToolbarOnOpen(): boolean\n\t{\n\t\treturn this.#hideToolbarOnOpen;\n\t}\n\n\t#getAnimationState(mode: 'start' | 'end'): JsonObject\n\t{\n\t\tconst states = {\n\t\t\tright: {\n\t\t\t\tstart: {\n\t\t\t\t\ttranslateX: 100,\n\t\t\t\t\ttranslateY: 0,\n\t\t\t\t\topacity: 0,\n\t\t\t\t\tscale: 0,\n\t\t\t\t\tprogress: 0,\n\t\t\t\t\tintensity: 0,\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\ttranslateX: 0,\n\t\t\t\t\ttranslateY: 0,\n\t\t\t\t\topacity: this.overlayOpacity,\n\t\t\t\t\tscale: 100,\n\t\t\t\t\tprogress: 100,\n\t\t\t\t\tintensity: 255,\n\t\t\t\t},\n\t\t\t},\n\t\t\tbottom: {\n\t\t\t\tstart: {\n\t\t\t\t\ttranslateX: 0,\n\t\t\t\t\ttranslateY: 100,\n\t\t\t\t\topacity: 0,\n\t\t\t\t\tscale: 0,\n\t\t\t\t\tprogress: 0,\n\t\t\t\t\tintensity: 0,\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\ttranslateX: 0,\n\t\t\t\t\ttranslateY: 0,\n\t\t\t\t\topacity: this.overlayOpacity,\n\t\t\t\t\tscale: 100,\n\t\t\t\t\tprogress: 100,\n\t\t\t\t\tintensity: 255,\n\t\t\t\t},\n\t\t\t},\n\t\t\ttop: {\n\t\t\t\tstart: {\n\t\t\t\t\ttranslateX: 0,\n\t\t\t\t\ttranslateY: -100,\n\t\t\t\t\topacity: 0,\n\t\t\t\t\tscale: 0,\n\t\t\t\t\tprogress: 0,\n\t\t\t\t\tintensity: 0,\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\ttranslateX: 0,\n\t\t\t\t\ttranslateY: 0,\n\t\t\t\t\topacity: this.overlayOpacity,\n\t\t\t\t\tscale: 100,\n\t\t\t\t\tprogress: 100,\n\t\t\t\t\tintensity: 255,\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\treturn states[this.#startPosition][mode];\n\t}\n\n\tgetDesignSystemContext(): string\n\t{\n\t\treturn this.#designSystemContext;\n\t}\n\n\tsetDesignSystemContext(context: string): void\n\t{\n\t\tif (Type.isString(context))\n\t\t{\n\t\t\tif (this.layout.container !== null)\n\t\t\t{\n\t\t\t\tDom.removeClass(this.layout.container, this.#designSystemContext);\n\t\t\t\tDom.addClass(this.layout.container, context);\n\t\t\t}\n\n\t\t\tthis.#designSystemContext = context;\n\t\t}\n\t}\n\n\tgetUrl(): string\n\t{\n\t\treturn this.url;\n\t}\n\n\tsetUrl(url: string): void\n\t{\n\t\tif (Type.isStringFilled(url))\n\t\t{\n\t\t\tthis.url = url;\n\t\t}\n\t}\n\n\tfocus(): void\n\t{\n\t\tthis.getWindow().focus();\n\n\t\t// if (this.isSelfContained())\n\t\t// {\n\t\t// \tthis.getContentContainer().setAttribute(\"tabindex\", \"0\");\n\t\t// \tthis.getContentContainer().focus();\n\t\t// }\n\t}\n\n\tisOpen(): boolean\n\t{\n\t\treturn this.opened;\n\t}\n\n\tgetStartPosition(): 'right' | 'bottom' | 'top'\n\t{\n\t\treturn this.#startPosition;\n\t}\n\n\t/**\n\t * @deprecated\n\t */\n\tsetZindex(zIndex: number): void\n\t{}\n\n\t/**\n\t * @public\n\t * @returns {number}\n\t */\n\tgetZindex(): number\n\t{\n\t\treturn this.getZIndexComponent().getZIndex();\n\t}\n\n\tgetZIndexComponent(): ZIndexComponent | null\n\t{\n\t\treturn this.#zIndexComponent;\n\t}\n\n\tsetOffset(offset: number | null): void\n\t{\n\t\tif (Type.isNumber(offset) || offset === null)\n\t\t{\n\t\t\tthis.offset = offset;\n\t\t}\n\t}\n\n\tgetOffset(): number | null\n\t{\n\t\treturn this.offset;\n\t}\n\n\tsetAutoOffset(autoOffset: boolean): void\n\t{\n\t\tif (Type.isBoolean(autoOffset))\n\t\t{\n\t\t\tthis.#autoOffset = autoOffset;\n\t\t}\n\t}\n\n\tshouldUseAutoOffset(): boolean\n\t{\n\t\treturn this.#autoOffset;\n\t}\n\n\tsetWidth(width: number): void\n\t{\n\t\tif (Type.isNumber(width))\n\t\t{\n\t\t\tthis.width = width;\n\t\t}\n\t}\n\n\tgetWidth(): number\n\t{\n\t\treturn this.width;\n\t}\n\n\tsetTitle(title: string): void\n\t{\n\t\tif (Type.isStringFilled(title))\n\t\t{\n\t\t\tthis.title = title;\n\t\t}\n\t}\n\n\tgetTitle(): string | null\n\t{\n\t\treturn this.title;\n\t}\n\n\tgetData(): Dictionary\n\t{\n\t\treturn this.data;\n\t}\n\n\tisSelfContained(): boolean\n\t{\n\t\treturn this.contentCallback !== null;\n\t}\n\n\tisPostMethod(): boolean\n\t{\n\t\treturn this.requestMethod === 'post';\n\t}\n\n\tgetRequestParams(): JsonObject\n\t{\n\t\treturn this.requestParams;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {string}\n\t */\n\tgetFrameId(): string\n\t{\n\t\tif (this.iframeId === null)\n\t\t{\n\t\t\tthis.iframeId = `iframe_${Text.getRandom(10).toLowerCase()}`;\n\t\t}\n\n\t\treturn this.iframeId;\n\t}\n\n\tgetWindow(): Window\n\t{\n\t\treturn this.iframe ? this.iframe.contentWindow : window;\n\t}\n\n\tgetFrameWindow(): Window | null\n\t{\n\t\treturn this.iframe ? this.iframe.contentWindow : null;\n\t}\n\n\tisHidden(): boolean\n\t{\n\t\treturn this.hidden;\n\t}\n\n\tisCacheable(): boolean\n\t{\n\t\treturn this.cacheable;\n\t}\n\n\tisFocusable(): boolean\n\t{\n\t\treturn this.autoFocus;\n\t}\n\n\tisPrintable(): boolean\n\t{\n\t\treturn this.printable;\n\t}\n\n\tisDestroyed(): boolean\n\t{\n\t\treturn this.destroyed;\n\t}\n\n\tisLoaded(): boolean\n\t{\n\t\treturn this.loaded;\n\t}\n\n\tcanChangeHistory(): boolean\n\t{\n\t\treturn (\n\t\t\tthis.allowChangeHistory\n\t\t\t&& !this.allowCrossOrigin\n\t\t\t&& !this.isSelfContained()\n\t\t\t&& !/^\\/bitrix\\/(components|tools)\\//i.test(this.getUrl())\n\t\t);\n\t}\n\n\tcanChangeTitle(): boolean\n\t{\n\t\tif (this.allowChangeTitle === null)\n\t\t{\n\t\t\tif (this.getTitle() !== null)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn this.canChangeHistory();\n\t\t}\n\n\t\treturn this.allowChangeTitle;\n\t}\n\n\tsetCacheable(cacheable: boolean = true): void\n\t{\n\t\tthis.cacheable = cacheable !== false;\n\t}\n\n\tsetAutoFocus(autoFocus: boolean = true): void\n\t{\n\t\tthis.autoFocus = autoFocus !== false;\n\t}\n\n\t/**\n\t * @public\n\t * @param {boolean} printable\n\t */\n\tsetPrintable(printable: boolean = true): void\n\t{\n\t\tthis.printable = printable !== false;\n\t\tif (this.printable)\n\t\t{\n\t\t\tthis.showPrintBtn();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.hidePrintBtn();\n\t\t}\n\t}\n\n\tgetLoader(): string\n\t{\n\t\treturn this.loader;\n\t}\n\n\tshowLoader(): void\n\t{\n\t\tconst loader = this.getLoader();\n\t\tif (!this.layout.loader)\n\t\t{\n\t\t\tthis.createLoader(loader);\n\t\t}\n\n\t\tDom.style(this.layout.loader, { opacity: 1, display: 'block' });\n\t}\n\n\tcloseLoader(): void\n\t{\n\t\tif (this.layout.loader)\n\t\t{\n\t\t\tDom.style(this.layout.loader, { opacity: 0, display: 'none' });\n\t\t}\n\t}\n\n\tshowCloseBtn(): void\n\t{\n\t\tthis.getLabel().show();\n\t}\n\n\thideCloseBtn(): void\n\t{\n\t\tthis.getLabel().hide();\n\t}\n\n\tshowOrLightenCloseBtn(): void\n\t{\n\t\tif (Type.isStringFilled(this.getLabel().getText()))\n\t\t{\n\t\t\tthis.getLabel().showIcon();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getLabel().lightenIcon();\n\t\t}\n\t}\n\n\thideOrDarkenCloseBtn(): void\n\t{\n\t\tif (Type.isStringFilled(this.getLabel().getText()))\n\t\t{\n\t\t\tthis.getLabel().hideIcon();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getLabel().darkenIcon();\n\t\t}\n\t}\n\n\tshowPrintBtn(): void\n\t{\n\t\tif (this.printLabel !== null)\n\t\t{\n\t\t\tthis.printLabel.show();\n\t\t}\n\t}\n\n\thidePrintBtn(): void\n\t{\n\t\tif (this.printLabel !== null)\n\t\t{\n\t\t\tthis.printLabel.hide();\n\t\t}\n\t}\n\n\tshowExtraLabels(): void\n\t{\n\t\tDom.removeClass(this.getExtraLabelsContainer(), '--hidden');\n\t}\n\n\thideExtraLabels(): void\n\t{\n\t\tDom.addClass(this.getExtraLabelsContainer(), '--hidden');\n\t}\n\n\tsetContentClass(className: string): void\n\t{\n\t\tif (Type.isStringFilled(className))\n\t\t{\n\t\t\tthis.removeContentClass();\n\t\t\tthis.contentClassName = className;\n\t\t\tDom.addClass(this.getContentContainer(), className);\n\t\t}\n\t}\n\n\tremoveContentClass(): void\n\t{\n\t\tif (this.contentClassName !== null)\n\t\t{\n\t\t\tDom.removeClass(this.getContentContainer(), this.contentClassName);\n\t\t\tthis.contentClassName = null;\n\t\t}\n\t}\n\n\tsetContainerClass(className: string): void\n\t{\n\t\tif (Type.isStringFilled(className))\n\t\t{\n\t\t\tthis.removeContainerClass();\n\t\t\tthis.containerClassName = className;\n\t\t\tDom.addClass(this.getContainer(), className);\n\t\t}\n\t}\n\n\tremoveContainerClass(): void\n\t{\n\t\tif (this.containerClassName !== null)\n\t\t{\n\t\t\tDom.removeClass(this.getContainer(), this.containerClassName);\n\t\t\tthis.containerClassName = null;\n\t\t}\n\t}\n\n\tsetOverlayClass(className: string): void\n\t{\n\t\tif (Type.isStringFilled(className))\n\t\t{\n\t\t\tthis.removeOverlayClass();\n\t\t\tthis.overlayClassName = className;\n\t\t\tDom.addClass(this.getOverlay(), className);\n\t\t}\n\t}\n\n\tremoveOverlayClass(): void\n\t{\n\t\tif (this.overlayClassName !== null)\n\t\t{\n\t\t\tDom.removeClass(this.getOverlay(), this.overlayClassName);\n\t\t\tthis.overlayClassName = null;\n\t\t}\n\t}\n\n\tapplyHacks(): void\n\t{\n\t\t// You can override this method in a derived class\n\t}\n\n\tapplyPostHacks(): void\n\t{\n\t\t// You can override this method in a derived class\n\t}\n\n\tresetHacks(): void\n\t{\n\t\t// You can override this method in a derived class\n\t}\n\n\tresetPostHacks(): void\n\t{\n\t\t// You can override this method in a derived class\n\t}\n\n\tgetTopBoundary(): number\n\t{\n\t\treturn 0;\n\t}\n\n\t/**\n\t * @protected\n\t */\n\tcalculateLeftBoundary(): number\n\t{\n\t\tconst customLeftBoundary = this.getCustomLeftBoundary();\n\t\tif (customLeftBoundary !== null)\n\t\t{\n\t\t\treturn customLeftBoundary;\n\t\t}\n\n\t\treturn this.getLeftBoundary();\n\t}\n\n\tgetLeftBoundary(): number\n\t{\n\t\tconst windowWidth = Browser.isMobile() ? window.innerWidth : document.documentElement.clientWidth;\n\n\t\treturn windowWidth < 1160 ? this.getMinLeftBoundary() : 300;\n\t}\n\n\tgetMinLeftBoundary(): number\n\t{\n\t\treturn this.hideControls && this.getCustomLeftBoundary() !== null ? 0 : 65;\n\t}\n\n\t/**\n\t * @internal\n\t */\n\tgetLeftBoundaryOffset(): number\n\t{\n\t\tconst offset = this.getOffset() === null ? 0 : this.getOffset();\n\n\t\treturn Math.max(this.calculateLeftBoundary(), this.getMinLeftBoundary()) + offset;\n\t}\n\n\tsetCustomLeftBoundary(boundary: number | null): void\n\t{\n\t\tif (Type.isNumber(boundary) || boundary === null)\n\t\t{\n\t\t\tthis.customLeftBoundary = boundary;\n\t\t}\n\t}\n\n\tgetCustomLeftBoundary(): number\n\t{\n\t\treturn this.customLeftBoundary;\n\t}\n\n\tsetCustomRightBoundary(boundary: number | null): void\n\t{\n\t\tif (Type.isNumber(boundary) || boundary === null)\n\t\t{\n\t\t\tthis.customRightBoundary = boundary;\n\t\t}\n\t}\n\n\tgetCustomRightBoundary(): number\n\t{\n\t\treturn this.customRightBoundary;\n\t}\n\n\t/**\n\t * @protected\n\t */\n\tcalculateRightBoundary(): number\n\t{\n\t\tconst customRightBoundary = this.getCustomRightBoundary();\n\t\tif (customRightBoundary !== null)\n\t\t{\n\t\t\treturn -window.pageXOffset + customRightBoundary;\n\t\t}\n\n\t\treturn this.getRightBoundary();\n\t}\n\n\tgetRightBoundary(): number\n\t{\n\t\treturn -window.pageXOffset;\n\t}\n\n\tgetOuterBoundary(): OuterBoundary\n\t{\n\t\treturn this.#outerBoundary;\n\t}\n\n\tcalculateOuterBoundary(): OuterBoundary\n\t{\n\t\t// You can override this method in a derived class\n\t}\n\n\t#calculateOuterBoundary(): OuterBoundary\n\t{\n\t\tconst outerBoundary = this.calculateOuterBoundary();\n\n\t\treturn Runtime.merge(Type.isPlainObject(outerBoundary) ? outerBoundary : {}, this.getOuterBoundary());\n\t}\n\n\tdestroy(): boolean\n\t{\n\t\tif (this.isDestroyed())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.firePageEvent('onDestroy');\n\t\tthis.fireFrameEvent('onDestroy');\n\n\t\tconst frameWindow = this.getFrameWindow();\n\t\tif (frameWindow && !this.allowCrossOrigin)\n\t\t{\n\t\t\tEvent.unbind(frameWindow, 'keydown', this.handleFrameKeyDown);\n\t\t\tEvent.unbind(frameWindow, 'focus', this.handleFrameFocus);\n\t\t\tEvent.unbind(frameWindow, 'unload', this.handleFrameUnload);\n\t\t}\n\t\telse if (this.allowCrossOrigin)\n\t\t{\n\t\t\tEvent.unbind(window, 'message', this.handleCrossOriginWindowMessage);\n\t\t}\n\n\t\tEventEmitter.unsubscribe('BX.Main.Popup:onInit', this.handlePopupInit);\n\t\tZIndexManager.unregister(this.layout.overlay);\n\t\tthis.#zIndexComponent = null;\n\n\t\tDom.remove(this.layout.overlay);\n\n\t\tthis.layout.container = null;\n\t\tthis.layout.overlay = null;\n\t\tthis.layout.content = null;\n\t\tthis.layout.closeBtn = null;\n\t\tthis.layout.loader = null;\n\n\t\tthis.#refs = null;\n\n\t\tthis.iframe = null;\n\t\tthis.destroyed = true;\n\n\t\tEventEmitter.unsubscribeAll(this);\n\n\t\tthis.firePageEvent('onDestroyComplete');\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * @internal\n\t */\n\thide(): void\n\t{\n\t\tthis.hidden = true;\n\n\t\tDom.style(this.getContainer(), 'display', 'none');\n\t\tDom.style(this.getOverlay(), 'display', 'none');\n\t}\n\n\t/**\n\t * @internal\n\t */\n\tunhide(): void\n\t{\n\t\tthis.hidden = false;\n\n\t\tDom.style(this.getContainer(), 'display', null);\n\t\tDom.style(this.getOverlay(), 'display', null);\n\t}\n\n\t/**\n\t * @public\n\t */\n\treload(): void\n\t{\n\t\tthis.loaded = false;\n\t\tif (this.isSelfContained())\n\t\t{\n\t\t\tthis.contentCallbackInvoved = false;\n\t\t\tthis.showLoader();\n\t\t\tthis.setContent();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showLoader();\n\t\t\tthis.getFrameWindow().location.reload();\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t */\n\tadjustLayout(): void\n\t{\n\t\tconst scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n\t\tconst windowHeight = Browser.isMobile() ? window.innerHeight : document.documentElement.clientHeight;\n\n\t\tlet topBoundary = this.getTopBoundary();\n\t\tconst isTopBoundaryVisible = topBoundary - scrollTop > 0;\n\t\ttopBoundary = isTopBoundaryVisible ? topBoundary : scrollTop;\n\n\t\tconst height = isTopBoundaryVisible > 0 ? windowHeight - topBoundary + scrollTop : windowHeight;\n\t\tconst leftBoundary = this.getLeftBoundaryOffset();\n\t\tconst rightBoundary = this.calculateRightBoundary();\n\n\t\tDom.style(\n\t\t\tthis.getOverlay(),\n\t\t\t{\n\t\t\t\tleft: `${window.pageXOffset}px`,\n\t\t\t\ttop: `${topBoundary}px`,\n\t\t\t\tright: `${rightBoundary}px`,\n\t\t\t\theight: `${height}px`,\n\t\t\t},\n\t\t);\n\n\t\tconst { right = null, top = null, bottom = null } = this.#calculateOuterBoundary();\n\n\t\tDom.style(\n\t\t\tthis.getContainer(),\n\t\t\t{\n\t\t\t\twidth: `calc(100% - ${leftBoundary + (right === null ? 0 : right)}px)`,\n\t\t\t\tmaxWidth: this.getWidth() === null ? null : `${this.getWidth()}px`,\n\t\t\t\tright: right === null ? null : `${right}px`,\n\t\t\t\ttop: top === null ? null : `${top}px`,\n\t\t\t\tbottom: bottom === null ? null : `${bottom}px`,\n\t\t\t\t// height: `${height}px`, // height: '100%',\n\t\t\t},\n\t\t);\n\n\t\tthis.getLabel().adjustLayout();\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcreateLayout()\n\t{\n\t\tif (this.layout.overlay !== null && this.layout.overlay.parentNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isSelfContained())\n\t\t{\n\t\t\tDom.addClass(this.getOverlay(), '--self-contained');\n\t\t\tDom.append(this.getOverlay(), document.body);\n\n\t\t\tthis.setContent();\n\n\t\t\tEventEmitter.subscribe('BX.Main.Popup:onInit', this.handlePopupInit);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.append(this.getFrame(), this.getContentContainer());\n\t\t\tDom.append(this.getOverlay(), document.body);\n\t\t\tthis.setFrameSrc(); // setFrameSrc must be below than appendChild, otherwise POST method fails.\n\t\t}\n\n\t\tthis.#zIndexComponent = ZIndexManager.register(this.getOverlay());\n\t}\n\n\tgetFrame(): HTMLIFrameElement\n\t{\n\t\tif (this.iframe !== null)\n\t\t{\n\t\t\treturn this.iframe;\n\t\t}\n\n\t\tthis.iframe = Dom.create('iframe', {\n\t\t\tattrs: {\n\t\t\t\treferrerpolicy: this.allowCrossOrigin ? 'strict-origin' : false,\n\t\t\t\tsrc: 'about:blank',\n\t\t\t\tframeborder: '0',\n\t\t\t},\n\t\t\tprops: {\n\t\t\t\tclassName: 'side-panel-iframe',\n\t\t\t\tname: this.getFrameId(),\n\t\t\t\tid: this.getFrameId(),\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tload: this.handleFrameLoad.bind(this),\n\t\t\t},\n\t\t});\n\n\t\treturn this.iframe;\n\t}\n\n\tgetOverlay(): HTMLElement\n\t{\n\t\tif (this.layout.overlay !== null)\n\t\t{\n\t\t\treturn this.layout.overlay;\n\t\t}\n\n\t\tconst overlayClass = this.overlayClassName === null ? '' : ` ${this.overlayClassName}`;\n\n\t\tthis.layout.overlay = Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: `side-panel side-panel-overlay${overlayClass}`,\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tmousedown: this.handleOverlayClick.bind(this),\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tthis.getContainer(),\n\t\t\t],\n\t\t});\n\n\t\treturn this.layout.overlay;\n\t}\n\n\tunhideOverlay(): void\n\t{\n\t\tDom.removeClass(this.getOverlay(), '--hidden');\n\t}\n\n\thideOverlay(): void\n\t{\n\t\tDom.addClass(this.getOverlay(), '--hidden');\n\t}\n\n\thideShadow(): void\n\t{\n\t\tDom.removeClass(this.getContainer(), 'side-panel-show-shadow');\n\t}\n\n\tshowShadow(): void\n\t{\n\t\tDom.addClass(this.getContainer(), 'side-panel-show-shadow');\n\t}\n\n\tsetOverlayBackground(): void\n\t{\n\t\tif (this.overlayBgCallback === null)\n\t\t{\n\t\t\tconst opacity = parseInt(this.overlayOpacity / 100 * 255, 10).toString(16).padStart(2, 0);\n\t\t\tDom.style(this.getOverlay(), 'background-color', `${this.overlayBgColor}${opacity}`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst state = this.#getAnimationState('end');\n\t\t\tDom.style(this.getOverlay(), 'background', this.overlayBgCallback(state, this));\n\t\t}\n\t}\n\n\tsetOverlayAnimation(animate: boolean): void\n\t{\n\t\tif (Type.isBoolean(animate))\n\t\t{\n\t\t\tthis.overlayAnimation = animate;\n\t\t}\n\t}\n\n\tgetOverlayAnimation(): boolean\n\t{\n\t\treturn this.overlayAnimation;\n\t}\n\n\tgetOverlayBgColor(): string\n\t{\n\t\treturn this.overlayBgColor;\n\t}\n\n\tgetOverlayOpacity(): number\n\t{\n\t\treturn this.overlayOpacity;\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\tif (this.layout.container !== null)\n\t\t{\n\t\t\treturn this.layout.container;\n\t\t}\n\n\t\tconst content = Tag.render`\n\t\t\t<div class=\"side-panel-content-wrapper\">${this.getContentContainer()}</div>\n\t\t`;\n\n\t\tthis.layout.container = Tag.render`\n\t\t\t<div class=\"side-panel side-panel-container\">\n\t\t\t\t${\n\t\t\t\t\tthis.hideControls\n\t\t\t\t\t\t? content\n\t\t\t\t\t\t: [content, this.getLabelsContainer()]\n\t\t\t\t}\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.addClass(this.layout.container, this.getDesignSystemContext());\n\t\tDom.addClass(this.layout.container, this.containerClassName);\n\n\t\treturn this.layout.container;\n\t}\n\n\tgetContentContainer(): HTMLElement\n\t{\n\t\tif (this.layout.content !== null)\n\t\t{\n\t\t\treturn this.layout.content;\n\t\t}\n\n\t\tconst contentClass = this.contentClassName === null ? '' : ` ${this.contentClassName}`;\n\n\t\tthis.layout.content = Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: `side-panel-content-container${contentClass}`,\n\t\t\t},\n\t\t});\n\n\t\treturn this.layout.content;\n\t}\n\n\tgetLabelsContainer(): HTMLElement\n\t{\n\t\treturn this.#refs.remember('labels-container', () => {\n\t\t\treturn Dom.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'side-panel-labels',\n\t\t\t\t},\n\t\t\t\tchildren: [\n\t\t\t\t\tthis.getLabel().getContainer(),\n\t\t\t\t\tthis.getExtraLabelsContainer(),\n\t\t\t\t],\n\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\tgetExtraLabelsContainer(): HTMLElement\n\t{\n\t\treturn this.#refs.remember('icon-labels', () => {\n\t\t\treturn Dom.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'side-panel-extra-labels',\n\t\t\t\t},\n\t\t\t\tchildren: [\n\t\t\t\t\tthis.minimizeLabel ? this.minimizeLabel.getContainer() : null,\n\t\t\t\t\tthis.newWindowLabel ? this.newWindowLabel.getContainer() : null,\n\t\t\t\t\tthis.copyLinkLabel ? this.copyLinkLabel.getContainer() : null,\n\t\t\t\t\tthis.printLabel ? this.printLabel.getContainer() : null,\n\t\t\t\t],\n\t\t\t});\n\t\t});\n\t}\n\n\tgetCloseBtn(): HTMLElement\n\t{\n\t\treturn this.getLabel().getIconBox();\n\t}\n\n\tgetLabel(): Label\n\t{\n\t\treturn this.label;\n\t}\n\n\tgetNewWindowLabel(): Label | null\n\t{\n\t\treturn this.newWindowLabel;\n\t}\n\n\tgetCopyLinkLabel(): Label | null\n\t{\n\t\treturn this.copyLinkLabel;\n\t}\n\n\tgetMinimizeLabel(): Label | null\n\t{\n\t\treturn this.minimizeLabel;\n\t}\n\n\tgetPrintLabel(): Label | null\n\t{\n\t\treturn this.printLabel;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsetContent(): void\n\t{\n\t\tif (this.contentCallbackInvoved)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.contentCallbackInvoved = true;\n\n\t\tDom.clean(this.getContentContainer());\n\n\t\tlet promise = this.contentCallback(this);\n\t\tconst isPromiseReturned = (\n\t\t\tpromise\n\t\t\t&& (\n\t\t\t\tObject.prototype.toString.call(promise) === '[object Promise]'\n\t\t\t\t|| promise.toString() === '[object BX.Promise]'\n\t\t\t)\n\t\t);\n\n\t\tif (!isPromiseReturned)\n\t\t{\n\t\t\tpromise = Promise.resolve(promise);\n\t\t}\n\n\t\tpromise\n\t\t\t.then((result) => {\n\t\t\t\tif (this.isDestroyed())\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (Type.isPlainObject(result) && Type.isStringFilled(result.html))\n\t\t\t\t{\n\t\t\t\t\tRuntime.html(this.getContentContainer(), result.html)\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tthis.removeLoader();\n\t\t\t\t\t\t\tthis.loaded = true;\n\t\t\t\t\t\t\tthis.firePageEvent('onLoad');\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((reason) => {\n\t\t\t\t\t\t\tthis.removeLoader();\n\t\t\t\t\t\t\tthis.getContentContainer().innerHTML = reason;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (Type.isDomNode(result))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.append(result, this.getContentContainer());\n\t\t\t\t\t}\n\t\t\t\t\telse if (Type.isStringFilled(result))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getContentContainer().innerHTML = result;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.removeLoader();\n\t\t\t\t\tthis.loaded = true;\n\t\t\t\t\tthis.firePageEvent('onLoad');\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((reason) => {\n\t\t\t\tthis.removeLoader();\n\t\t\t\tthis.getContentContainer().innerHTML = reason;\n\t\t\t})\n\t\t;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsetFrameSrc(): void\n\t{\n\t\tif (this.iframeSrc === this.getUrl())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst url = Uri.addParam(this.getUrl(), { IFRAME: 'Y', IFRAME_TYPE: 'SIDE_SLIDER' });\n\t\tif (this.isPostMethod())\n\t\t{\n\t\t\tconst form = document.createElement('form');\n\t\t\tform.method = 'POST';\n\t\t\tform.action = url;\n\t\t\tform.target = this.getFrameId();\n\t\t\tDom.style(form, 'display', 'none');\n\n\t\t\tBX.util.addObjectToForm(this.getRequestParams(), form);\n\n\t\t\tDom.append(form, document.body);\n\n\t\t\tform.submit();\n\n\t\t\tDom.remove(form);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.iframeSrc = this.getUrl();\n\t\t\tthis.iframe.src = url;\n\t\t}\n\n\t\tthis.loaded = false;\n\t\tthis.listenIframeLoading();\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcreateLoader(sliderLoader: string | HTMLElement): void\n\t{\n\t\tDom.remove(this.layout.loader);\n\n\t\tconst loader = (\n\t\t\tType.isStringFilled(sliderLoader) || Type.isElementNode(sliderLoader)\n\t\t\t\t? sliderLoader\n\t\t\t\t: 'default-loader'\n\t\t);\n\n\t\tconst oldLoaders = [\n\t\t\t'task-new-loader',\n\t\t\t'task-edit-loader',\n\t\t\t'task-view-loader',\n\t\t\t'crm-entity-details-loader',\n\t\t\t'crm-button-view-loader',\n\t\t\t'crm-webform-view-loader',\n\t\t\t'create-mail-loader',\n\t\t\t'view-mail-loader',\n\t\t];\n\n\t\tif (Type.isElementNode(loader))\n\t\t{\n\t\t\tthis.layout.loader = this.createHTMLLoader(loader);\n\t\t}\n\t\telse if (oldLoaders.includes(loader) && this.loaderExists(loader))\n\t\t{\n\t\t\tthis.layout.loader = this.createOldLoader(loader);\n\t\t}\n\t\telse if (loader.charAt(0) === '/')\n\t\t{\n\t\t\tthis.layout.loader = this.createSvgLoader(loader);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst matches = loader.match(/^([\\w.-]+):([\\w.-]+)$/i);\n\t\t\tif (matches)\n\t\t\t{\n\t\t\t\tconst moduleId = matches[1];\n\t\t\t\tconst svgName = matches[2];\n\t\t\t\tconst svg = `/bitrix/images/${moduleId}/slider/${svgName}.svg`;\n\t\t\t\tthis.layout.loader = this.createSvgLoader(svg);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.layout.loader = this.createDefaultLoader();\n\t\t\t}\n\t\t}\n\n\t\tDom.append(this.layout.loader, this.getContainer());\n\t}\n\n\tcreateSvgLoader(svg): HTMLElement\n\t{\n\t\treturn Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: 'side-panel-loader',\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tDom.create('div', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'side-panel-loader-container',\n\t\t\t\t\t},\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tbackgroundImage: `url(\"${svg}\")`,\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t}\n\n\tcreateDefaultLoader(): HTMLElement\n\t{\n\t\treturn Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: 'side-panel-loader',\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tDom.create('div', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'side-panel-default-loader-container',\n\t\t\t\t\t},\n\t\t\t\t\thtml:\n\t\t\t\t\t\t'<svg class=\"side-panel-default-loader-circular\" viewBox=\"25 25 50 50\">'\n\t\t\t\t\t\t+ '<circle '\n\t\t\t\t\t\t\t+ 'class=\"side-panel-default-loader-path\" '\n\t\t\t\t\t\t\t+ 'cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-miterlimit=\"10\"'\n\t\t\t\t\t\t+ '/>'\n\t\t\t\t\t\t+ '</svg>',\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcreateOldLoader(loader: string): HTMLElement\n\t{\n\t\tif (loader === 'crm-entity-details-loader')\n\t\t{\n\t\t\treturn Dom.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: `side-panel-loader ${loader}`,\n\t\t\t\t},\n\t\t\t\tchildren: [\n\t\t\t\t\tDom.create('img', {\n\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\tsrc:\n\t\t\t\t\t\t\t\t'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAA1BMVEX'\n\t\t\t\t\t\t\t\t+ '///+nxBvIAAAAAXRSTlMAQObYZgAAAAtJREFUeAFjGMQAAACcAAG25ruvAAAAAElFTkSuQmCC',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tclassName: 'side-panel-loader-mask top',\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t\tDom.create('div', {\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tclassName: 'side-panel-loader-bg left',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\tDom.create('img', {\n\t\t\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\t\t\tsrc:\n\t\t\t\t\t\t\t\t\t\t'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAA1B'\n\t\t\t\t\t\t\t\t\t\t+ 'MVEX///+nxBvIAAAAAXRSTlMAQObYZgAAAAtJREFUeAFjGMQAAACcAAG25ruvAAAAAElFTkSuQmCC',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\tclassName: 'side-panel-loader-mask left',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t],\n\t\t\t\t\t}),\n\t\t\t\t\tDom.create('div', {\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tclassName: 'side-panel-loader-bg right',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\tDom.create('img', {\n\t\t\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\t\t\tsrc:\n\t\t\t\t\t\t\t\t\t\t'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAA1BM'\n\t\t\t\t\t\t\t\t\t\t+ 'VEX///+nxBvIAAAAAXRSTlMAQObYZgAAAAtJREFUeAFjGMQAAACcAAG25ruvAAAAAElFTkSuQmCC',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\tclassName: 'side-panel-loader-mask right',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t],\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\n\t\treturn Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: `side-panel-loader ${loader}`,\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tDom.create('img', {\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tsrc:\n\t\t\t\t\t\t\t'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAA1BMVEX'\n\t\t\t\t\t\t\t+ '///+nxBvIAAAAAXRSTlMAQObYZgAAAAtJREFUeAFjGMQAAACcAAG25ruvAAAAAElFTkSuQmCC',\n\t\t\t\t\t},\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'side-panel-loader-mask left',\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tDom.create('img', {\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tsrc:\n\t\t\t\t\t\t\t'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAA'\n\t\t\t\t\t\t\t+ '1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAAAtJREFUeAFjGMQAAACcAAG25ruvAAAAAElFTkSuQmCC',\n\t\t\t\t\t},\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'side-panel-loader-mask right',\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcreateHTMLLoader(loader: HTMLElement): HTMLElement\n\t{\n\t\treturn Dom.create('div', {\n\t\t\tchildren: [\n\t\t\t\tloader,\n\t\t\t],\n\t\t});\n\t}\n\n\tloaderExists(loader): boolean\n\t{\n\t\tif (!Type.isStringFilled(loader))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (let i = 0; i < document.styleSheets.length; i++)\n\t\t{\n\t\t\tconst style = document.styleSheets[i];\n\t\t\tif (!Type.isStringFilled(style.href) || !style.href.includes('sidepanel'))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet rules = null;\n\t\t\ttry\n\t\t\t{\n\t\t\t\trules = style.rules || style.cssRules;\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\trules = style.cssRules;\n\t\t\t\t}\n\t\t\t\tcatch\n\t\t\t\t{\n\t\t\t\t\trules = [];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const rule of rules)\n\t\t\t{\n\t\t\t\tif (Type.isStringFilled(rule.selectorText) && rule.selectorText.includes(loader))\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tremoveLoader()\n\t{\n\t\tDom.remove(this.layout.loader);\n\t\tthis.layout.loader = null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tanimateOpening()\n\t{\n\t\tif (this.animation)\n\t\t{\n\t\t\tthis.animation.stop();\n\t\t}\n\n\t\tthis.fireEvent('onOpening');\n\n\t\tif (Browser.isMobile())\n\t\t{\n\t\t\tthis.#currentAnimationState = this.#endAnimationState;\n\t\t\tthis.animateStep(this.#currentAnimationState);\n\t\t\tthis.completeAnimation();\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#currentAnimationState = (\n\t\t\tthis.#currentAnimationState === null\n\t\t\t\t? this.#startAnimationState\n\t\t\t\t: this.#currentAnimationState\n\t\t);\n\n\t\tthis.animation = new BX.easing({\n\t\t\tduration: this.animationDuration,\n\t\t\tstart: this.#currentAnimationState,\n\t\t\tfinish: this.#endAnimationState,\n\t\t\tstep: (state) => {\n\t\t\t\tthis.#currentAnimationState = state;\n\t\t\t\tthis.animateStep(state);\n\t\t\t},\n\t\t\tcomplete: () => {\n\t\t\t\tthis.completeAnimation();\n\t\t\t},\n\t\t});\n\n\t\tif (this.animationName === 'scale' && Type.isStringFilled(this.animationOptions.origin))\n\t\t{\n\t\t\tDom.style(this.getContainer(), 'transform-origin', this.animationOptions.origin);\n\t\t}\n\n\t\tthis.animation.animate();\n\t}\n\n\t/**\n\t * @private\n\t * @param {object} state\n\t */\n\tanimateStep(state)\n\t{\n\t\tif (this.animationName === 'scale')\n\t\t{\n\t\t\tDom.style(this.getContainer(), 'transform', `scale(${state.scale / 100})`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.style(this.getContainer(), 'transform', `translate(${state.translateX}%, ${state.translateY}%)`);\n\t\t}\n\n\t\tif (this.getOverlayAnimation())\n\t\t{\n\t\t\tif (this.overlayBgCallback === null)\n\t\t\t{\n\t\t\t\tconst opacity = parseInt(state.opacity / 100 * 255, 10).toString(16).padStart(2, 0);\n\t\t\t\tDom.style(this.getOverlay(), 'background-color', `${this.overlayBgColor}${opacity}`);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.style(this.getOverlay(), 'background', this.overlayBgCallback(state, this));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param callback\n\t */\n\tcompleteAnimation(callback)\n\t{\n\t\tthis.animation = null;\n\t\tif (this.isOpen())\n\t\t{\n\t\t\tthis.#currentAnimationState = this.#endAnimationState;\n\t\t\tthis.maximizing = false;\n\n\t\t\tDom.removeClass(this.getOverlay(), '--opening');\n\t\t\tDom.addClass(this.getOverlay(), '--open');\n\t\t\tif (this.animationName === 'scale')\n\t\t\t{\n\t\t\t\tconst state = this.#getAnimationState('end');\n\t\t\t\tDom.style(\n\t\t\t\t\tthis.getContainer(),\n\t\t\t\t\t{\n\t\t\t\t\t\t'transform-origin': null,\n\t\t\t\t\t\ttransform: `translate(${state.translateX}%, ${state.translateY}%)`,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.firePageEvent('onBeforeOpenComplete');\n\t\t\tthis.fireFrameEvent('onBeforeOpenComplete');\n\n\t\t\tthis.firePageEvent('onOpenComplete');\n\t\t\tthis.fireFrameEvent('onOpenComplete');\n\n\t\t\tif (!this.isLoaded())\n\t\t\t{\n\t\t\t\tthis.showLoader();\n\t\t\t}\n\n\t\t\tif (this.isFocusable())\n\t\t\t{\n\t\t\t\tthis.focus();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#currentAnimationState = this.#startAnimationState;\n\t\t\tthis.minimizing = false;\n\n\t\t\tDom.removeClass(this.getOverlay(), '--open --opening --closing');\n\t\t\tif (this.animationName === 'scale')\n\t\t\t{\n\t\t\t\tconst state = this.#getAnimationState('start');\n\t\t\t\tDom.style(\n\t\t\t\t\tthis.getContainer(),\n\t\t\t\t\t{\n\t\t\t\t\t\t'transform-origin': null,\n\t\t\t\t\t\ttransform: `translate(${state.translateX}%, ${state.translateY}%)`,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tDom.style(\n\t\t\t\tthis.getContainer(),\n\t\t\t\t{\n\t\t\t\t\twidth: null,\n\t\t\t\t\tright: null,\n\t\t\t\t\topacity: null,\n\t\t\t\t\t'max-width': null,\n\t\t\t\t\t'min-width': null,\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tDom.style(this.getCloseBtn(), 'opacity', null);\n\n\t\t\tthis.firePageEvent('onBeforeCloseComplete');\n\t\t\tthis.fireFrameEvent('onBeforeCloseComplete');\n\n\t\t\tthis.firePageEvent('onCloseComplete');\n\t\t\tthis.fireFrameEvent('onCloseComplete');\n\n\t\t\tif (Type.isFunction(callback))\n\t\t\t{\n\t\t\t\tcallback(this);\n\t\t\t}\n\n\t\t\tif (!this.isCacheable())\n\t\t\t{\n\t\t\t\tthis.destroy();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @internal\n\t */\n\tfirePageEvent(eventName: string): SliderEvent\n\t{\n\t\tconst sliderEvent = this.getEvent(eventName);\n\t\tif (sliderEvent === null)\n\t\t{\n\t\t\tthrow new Error('\\'eventName\\' is invalid.');\n\t\t}\n\n\t\tEventEmitter.emit(\n\t\t\tthis,\n\t\t\tsliderEvent.getFullName().toLowerCase(),\n\t\t\tnew BaseEvent({ data: [sliderEvent], compatData: [sliderEvent] }),\n\t\t);\n\n\t\t// Events for compatibility\n\t\tif (['onClose', 'onOpen'].includes(eventName))\n\t\t{\n\t\t\tEventEmitter.emit(`BX.Bitrix24.PageSlider:${eventName}`, new BaseEvent({ data: [this], compatData: [this] }));\n\t\t\tEventEmitter.emit(`Bitrix24.Slider:${eventName}`, new BaseEvent({ data: [this], compatData: [this] }));\n\t\t}\n\n\t\treturn sliderEvent;\n\t}\n\n\t/**\n\t * @internal\n\t */\n\tfireFrameEvent(eventName): SliderEvent\n\t{\n\t\tconst sliderEvent = this.getEvent(eventName);\n\t\tif (sliderEvent === null)\n\t\t{\n\t\t\tthrow new Error('\\'eventName\\' is invalid.');\n\t\t}\n\n\t\tif (this.allowCrossOrigin)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst frameWindow = this.getFrameWindow();\n\t\tif (frameWindow && frameWindow.BX && frameWindow.BX.onCustomEvent)\n\t\t{\n\t\t\tframeWindow.BX.onCustomEvent(this, sliderEvent.getFullName(), [sliderEvent]);\n\n\t\t\t// Events for compatibility\n\t\t\tif (['onClose', 'onOpen'].includes(eventName))\n\t\t\t{\n\t\t\t\tframeWindow.BX.onCustomEvent(`BX.Bitrix24.PageSlider:${eventName}`, [this]);\n\t\t\t\tframeWindow.BX.onCustomEvent(`Bitrix24.Slider:${eventName}`, [this]); // Compatibility\n\t\t\t}\n\t\t}\n\n\t\treturn sliderEvent;\n\t}\n\n\tfireEvent(eventName)\n\t{\n\t\tthis.firePageEvent(eventName);\n\t\tthis.fireFrameEvent(eventName);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetEvent(eventName: string | SliderEvent): SliderEvent | null\n\t{\n\t\tlet event = null;\n\t\tif (Type.isStringFilled(eventName))\n\t\t{\n\t\t\tevent = new SliderEvent();\n\t\t\tevent.setSlider(this);\n\t\t\tevent.setName(eventName);\n\t\t}\n\t\telse if (eventName instanceof SliderEvent)\n\t\t{\n\t\t\tevent = eventName;\n\t\t}\n\n\t\treturn event;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcanOpen(): boolean\n\t{\n\t\treturn this.canAction('open');\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcanClose(): boolean\n\t{\n\t\treturn this.canAction('close');\n\t}\n\n\t/**\n\t * @package\n\t * @returns {boolean}\n\t */\n\tcanCloseByEsc(): boolean\n\t{\n\t\treturn this.canAction('closeByEsc');\n\t}\n\n\t/**\n\t * @private\n\t * @param {string} action\n\t * @returns {boolean}\n\t */\n\tcanAction(action: string): boolean\n\t{\n\t\tif (!Type.isStringFilled(action))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst eventName = `on${action.charAt(0).toUpperCase()}${action.slice(1)}`;\n\n\t\tconst pageEvent = this.firePageEvent(eventName);\n\t\tconst frameEvent = this.fireFrameEvent(eventName);\n\n\t\treturn pageEvent.isActionAllowed() && (!frameEvent || frameEvent.isActionAllowed());\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleCrossOriginWindowMessage(event: MessageEvent)\n\t{\n\t\tconst frameUrl = new URL(this.url);\n\t\tconst eventUrl = new URL(event.origin);\n\t\tif (eventUrl.origin !== frameUrl.origin)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst message = { type: '', data: undefined };\n\t\tif (Type.isString(event.data))\n\t\t{\n\t\t\tmessage.type = event.data;\n\t\t}\n\t\telse if (Type.isPlainObject(event.data))\n\t\t{\n\t\t\tmessage.type = event.data.type;\n\t\t\tmessage.data = event.data.data;\n\t\t}\n\n\t\tswitch (message.type)\n\t\t{\n\t\t\tcase 'BX:SidePanel:close':\n\t\t\t{\n\t\t\t\tthis.close();\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'BX:SidePanel:load:force':\n\t\t\t{\n\t\t\t\tif (!this.isLoaded() && !this.isDestroyed())\n\t\t\t\t{\n\t\t\t\t\tthis.handleFrameLoad();\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'BX:SidePanel:data:send':\n\t\t\t{\n\t\t\t\tconst pageEvent = new MessageEvent({ sender: this, data: message.data });\n\t\t\t\tpageEvent.setName('onXDomainMessage');\n\t\t\t\tthis.firePageEvent(pageEvent);\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t\t// No default\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param {Event} event\n\t */\n\thandleFrameLoad(event)\n\t{\n\t\tif (this.loaded)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst frameWindow = this.iframe.contentWindow;\n\t\tconst iframeLocation = frameWindow.location;\n\n\t\tif (this.allowCrossOrigin)\n\t\t{\n\t\t\tEvent.bind(window, 'message', this.handleCrossOriginWindowMessage);\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\tif (iframeLocation.toString() === 'about:blank')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tif (this.allowCrossOrigin)\n\t\t\t{\n\t\t\t\tthis.loaded = true;\n\t\t\t\tthis.closeLoader();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn('SidePanel: Try to use \"allowCrossOrigin: true\" option.');\n\n\t\t\tthrow e;\n\t\t}\n\n\t\tEvent.bind(frameWindow, 'keydown', this.handleFrameKeyDown);\n\t\tEvent.bind(frameWindow, 'focus', this.handleFrameFocus);\n\t\tEvent.bind(frameWindow, 'unload', this.handleFrameUnload);\n\n\t\tif (Browser.isMobile())\n\t\t{\n\t\t\tframeWindow.document.body.style.paddingBottom = `${window.innerHeight * 2 / 3}px`;\n\t\t}\n\n\t\tconst iframeUrl = iframeLocation.pathname + iframeLocation.search + iframeLocation.hash;\n\t\tthis.iframeSrc = this.refineUrl(iframeUrl);\n\t\tthis.url = this.iframeSrc;\n\n\t\tif (this.isPrintable())\n\t\t{\n\t\t\tthis.injectPrintStyles();\n\t\t}\n\n\t\tthis.loaded = true;\n\t\tthis.loadedCnt++;\n\n\t\tif (this.loadedCnt > 1)\n\t\t{\n\t\t\tthis.firePageEvent('onLoad');\n\t\t\tthis.fireFrameEvent('onLoad');\n\n\t\t\tthis.firePageEvent('onReload');\n\t\t\tthis.fireFrameEvent('onReload');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.firePageEvent('onLoad');\n\t\t\tthis.fireFrameEvent('onLoad');\n\t\t}\n\n\t\tif (this.isFocusable())\n\t\t{\n\t\t\tthis.focus();\n\t\t}\n\n\t\tthis.closeLoader();\n\t}\n\n\t/**\n\t * @private\n\t */\n\tlistenIframeLoading()\n\t{\n\t\tif (this.allowCrossOrigin)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst isLoaded = setInterval(() => {\n\t\t\tif (this.isLoaded() || this.isDestroyed())\n\t\t\t{\n\t\t\t\tclearInterval(isLoaded);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.iframe.contentWindow.location.toString() === 'about:blank')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tthis.iframe.contentWindow.document.readyState === 'complete'\n\t\t\t\t|| this.iframe.contentWindow.document.readyState === 'interactive'\n\t\t\t)\n\t\t\t{\n\t\t\t\tclearInterval(isLoaded);\n\t\t\t\tthis.handleFrameLoad();\n\t\t\t}\n\t\t}, 200);\n\t}\n\n\t/**\n\t * @private\n\t * @param {Event} event\n\t */\n\thandleFrameUnload(event)\n\t{\n\t\tthis.loaded = false;\n\t\tthis.listenIframeLoading();\n\t}\n\n\t/**\n\t * @private\n\t * @param {Event} event\n\t */\n\thandleFrameKeyDown(event)\n\t{\n\t\tif (event.keyCode !== 27)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst framePopupManager = this.getWindow().BX?.Main?.PopupManager;\n\t\tif (framePopupManager)\n\t\t{\n\t\t\tconst popups = framePopupManager.getPopups();\n\t\t\tfor (const popup of popups)\n\t\t\t{\n\t\t\t\tif (popup.isShown())\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst centerX = this.getWindow().document.documentElement.clientWidth / 2;\n\t\tconst centerY = this.getWindow().document.documentElement.clientHeight / 2;\n\t\tconst element = this.getWindow().document.elementFromPoint(centerX, centerY);\n\n\t\tif (Dom.hasClass(element, 'bx-core-dialog-overlay') || Dom.hasClass(element, 'bx-core-window'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (element.closest('.bx-core-window'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.firePageEvent('onEscapePress');\n\t\tthis.fireFrameEvent('onEscapePress');\n\t}\n\n\t/**\n\t * @private\n\t * @param {BaseEvent} event\n\t */\n\thandlePopupInit(event)\n\t{\n\t\tconst data = event.getCompatData();\n\t\tconst bindElement = data[1];\n\t\tconst params = data[2];\n\n\t\tif (\n\t\t\t!Type.isElementNode(params.targetContainer)\n\t\t\t&& Type.isElementNode(bindElement)\n\t\t\t&& this.getContentContainer().contains(bindElement)\n\t\t)\n\t\t{\n\t\t\tparams.targetContainer = this.getContentContainer();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param {Event} event\n\t */\n\thandleFrameFocus(event)\n\t{\n\t\tthis.firePageEvent('onFrameFocus');\n\t}\n\n\t/**\n\t * @private\n\t * @param {MouseEvent} event\n\t */\n\thandleOverlayClick(event)\n\t{\n\t\tif (event.target === this.getOverlay())\n\t\t{\n\t\t\tif (this.animation === null)\n\t\t\t{\n\t\t\t\tthis.close();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param {MouseEvent} event\n\t */\n\thandlePrintBtnClick(event)\n\t{\n\t\tif (this.isSelfContained())\n\t\t{\n\t\t\tconst frame = document.createElement('iframe');\n\t\t\tframe.src = 'about:blank';\n\t\t\tframe.name = 'sidepanel-print-frame';\n\n\t\t\tDom.style(frame, 'display', 'none');\n\t\t\tDom.append(frame, document.body);\n\n\t\t\tconst frameWindow = frame.contentWindow;\n\t\t\tconst frameDoc = frameWindow.document;\n\t\t\tframeDoc.open();\n\t\t\tframeDoc.write('<html><head>');\n\n\t\t\tlet headTags = '';\n\t\t\tconst links = document.head.querySelectorAll('link, style');\n\t\t\tfor (const link of links)\n\t\t\t{\n\t\t\t\theadTags += link.outerHTML;\n\t\t\t}\n\n\t\t\theadTags += '<style>html, body { background: #fff !important; height: 100%; }</style>';\n\n\t\t\tframeDoc.write(headTags);\n\n\t\t\tframeDoc.write('</head><body>');\n\t\t\tframeDoc.write(this.getContentContainer().innerHTML);\n\t\t\tframeDoc.write('</body></html>');\n\t\t\tframeDoc.close();\n\n\t\t\tframeWindow.focus();\n\t\t\tframeWindow.print();\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tDom.remove(frame);\n\t\t\t\twindow.focus();\n\t\t\t}, 1000);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.focus();\n\t\t\tthis.getFrameWindow().print();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tinjectPrintStyles()\n\t{\n\t\tconst frameDocument = this.getFrameWindow().document;\n\n\t\tlet bodyClass = '';\n\n\t\tconst classList = frameDocument.body.classList;\n\t\tfor (const className of classList)\n\t\t{\n\t\t\tbodyClass += `.${className}`;\n\t\t}\n\n\t\tconst bodyStyle = `@media print { body${bodyClass} { `\n\t\t\t+ 'background: #fff !important; '\n\t\t\t+ '-webkit-print-color-adjust: exact;'\n\t\t\t+ 'color-adjust: exact; '\n\t\t\t+ '} }';\n\n\t\tconst style = frameDocument.createElement('style');\n\t\tstyle.type = 'text/css';\n\t\tif (style.styleSheet)\n\t\t{\n\t\t\tstyle.styleSheet.cssText = bodyStyle;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstyle.appendChild(frameDocument.createTextNode(bodyStyle));\n\t\t}\n\n\t\tframeDocument.head.appendChild(style);\n\t}\n\n\trefineUrl(url: string): string\n\t{\n\t\tif (Type.isStringFilled(url) && /IFRAME/.test(url))\n\t\t{\n\t\t\treturn Uri.removeParam(url, ['IFRAME', 'IFRAME_TYPE']);\n\t\t}\n\n\t\treturn url;\n\t}\n}\n","import { SliderManager } from './slider-manager';\nimport { PageObject } from 'main.pageobject';\n\nlet instance = null;\n\nexport function getInstance(): SliderManager\n{\n\tconst topWindow = PageObject.getRootWindow();\n\tif (topWindow !== window)\n\t{\n\t\treturn topWindow.BX.SidePanel.Instance;\n\t}\n\n\tif (instance === null)\n\t{\n\t\tinstance = new SliderManager();\n\t}\n\n\treturn instance;\n}\n","import { Type, Cache, Text, Tag, Dom, type JsonObject } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { PopupManager, Popup } from 'main.popup';\n\nimport { getInstance } from './get-instance';\nimport { type ToolbarItemOptions } from './types/toolbar-item-options';\n\nexport class ToolbarItem extends EventEmitter\n{\n\tconstructor(itemOptions: ToolbarItemOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Main.SidePanel.ToolbarItem');\n\n\t\tconst options = Type.isPlainObject(itemOptions) ? itemOptions : {};\n\n\t\tthis.id = Type.isStringFilled(options.id) ? options.id : `toolbar-item-${Text.getRandom().toLowerCase()}`;\n\t\tthis.title = '';\n\t\tthis.url = '';\n\t\tthis.entityType = '';\n\t\tthis.entityId = 0;\n\t\tthis.entityName = '';\n\n\t\tthis.refs = new Cache.MemoryCache();\n\t\tthis.rendered = false;\n\n\t\tthis.setTitle(options.title);\n\t\tthis.setUrl(options.url);\n\t\tthis.setEntityType(options.entityType);\n\t\tthis.setEntityId(options.entityId);\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.id;\n\t}\n\n\tgetUrl(): string\n\t{\n\t\treturn this.url;\n\t}\n\n\tsetUrl(url): void\n\t{\n\t\tif (Type.isStringFilled(url))\n\t\t{\n\t\t\tthis.url = url;\n\t\t\tif (this.rendered)\n\t\t\t{\n\t\t\t\tthis.getContainer().href = url;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetTitle(): string\n\t{\n\t\treturn this.title;\n\t}\n\n\tsetTitle(title): void\n\t{\n\t\tif (Type.isStringFilled(title))\n\t\t{\n\t\t\tthis.title = title;\n\t\t\tif (this.rendered)\n\t\t\t{\n\t\t\t\tthis.getTitleContainer().textContent = title;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetEntityType(): string\n\t{\n\t\treturn this.entityType;\n\t}\n\n\tsetEntityType(entityType): void\n\t{\n\t\tif (Type.isStringFilled(entityType))\n\t\t{\n\t\t\tthis.entityType = entityType;\n\t\t}\n\t}\n\n\tgetEntityId(): string | number\n\t{\n\t\treturn this.entityId;\n\t}\n\n\tsetEntityId(entityId: string | number): void\n\t{\n\t\tif (Type.isNumber(entityId) || Type.isStringFilled(entityId))\n\t\t{\n\t\t\tthis.entityId = entityId;\n\t\t}\n\t}\n\n\tgetEntityName(): string\n\t{\n\t\treturn this.entityName;\n\t}\n\n\tsetEntityName(entityName): void\n\t{\n\t\tif (Type.isStringFilled(entityName))\n\t\t{\n\t\t\tthis.entityName = entityName;\n\t\t}\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn this.refs.remember('container', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"side-panel-toolbar-item\" \n\t\t\t\t\tonclick=\"${this.handleClick.bind(this)}\"\n\t\t\t\t\tonmouseenter=\"${this.handleMouseEnter.bind(this)}\"\n\t\t\t\t\tonmouseleave=\"${this.handleMouseLeave.bind(this)}\"\n\t\t\t\t>\n\t\t\t\t\t${this.getTitleContainer()}\n\t\t\t\t\t<div class=\"side-panel-toolbar-item-remove-btn\" onclick=\"${this.handleRemoveBtnClick.bind(this)}\">\n\t\t\t\t\t\t<div class=\"ui-icon-set --cross-20\" style=\"--ui-icon-set__icon-size: 100%;\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tisRendered(): boolean\n\t{\n\t\treturn this.rendered;\n\t}\n\n\tgetTitleContainer(): HTMLElement\n\t{\n\t\treturn this.refs.remember('title', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<a \n\t\t\t\t\tclass=\"side-panel-toolbar-item-title\"\n\t\t\t\t\thref=\"${encodeURI(this.getUrl())}\"\n\t\t\t\t\tdata-slider-ignore-autobinding=\"true\"\n\t\t\t\t>${Text.encode(this.getTitle())}</a>\n\t\t\t`;\n\t\t});\n\t}\n\n\tprependTo(node)\n\t{\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\tDom.prepend(this.getContainer(), node);\n\t\t\tthis.rendered = true;\n\t\t}\n\t}\n\n\tappendTo(node): void\n\t{\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\tDom.append(this.getContainer(), node);\n\t\t\tthis.rendered = true;\n\t\t}\n\t}\n\n\tinsertBefore(node): void\n\t{\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\tDom.insertBefore(this.getContainer(), node);\n\t\t\tthis.rendered = true;\n\t\t}\n\t}\n\n\tinsertAfter(node): void\n\t{\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\tDom.insertAfter(this.getContainer(), node);\n\t\t\tthis.rendered = true;\n\t\t}\n\t}\n\n\tremove(): void\n\t{\n\t\tDom.remove(this.getContainer());\n\t\tthis.rendered = false;\n\t}\n\n\tshowTooltip(): void\n\t{\n\t\tconst targetNode = this.getContainer();\n\t\tconst rect = targetNode.getBoundingClientRect();\n\t\tconst targetNodeWidth = rect.width;\n\t\tconst popupWidth = Math.min(Math.max(100, this.getTitleContainer().scrollWidth + 20), 300);\n\n\t\tconst hint = PopupManager.create({\n\t\t\tid: 'sidepanel-toolbar-item-hint',\n\t\t\tcacheable: false,\n\t\t\tbindElement: rect,\n\t\t\tbindOptions: {\n\t\t\t\tforceBindPosition: true,\n\t\t\t\tforceTop: true,\n\t\t\t\tposition: 'top',\n\t\t\t},\n\t\t\twidth: popupWidth,\n\t\t\tcontent: Tag.render`\n\t\t\t\t<div class=\"sidepanel-toolbar-item-hint\">\n\t\t\t\t\t<div class=\"sidepanel-toolbar-item-hint-title\">${Text.encode(this.getEntityName())}</div>\n\t\t\t\t\t<div class=\"sidepanel-toolbar-item-hint-content\">${Text.encode(this.getTitle())}</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t\tdarkMode: true,\n\t\t\tfixed: true,\n\t\t\toffsetTop: 0,\n\t\t\tevents: {\n\t\t\t\tonShow: (event) => {\n\t\t\t\t\tconst popup = event.getTarget();\n\t\t\t\t\tconst offsetLeft = (targetNodeWidth / 2) - (popupWidth / 2);\n\t\t\t\t\tconst angleShift = Popup.getOption('angleLeftOffset') - Popup.getOption('angleMinTop');\n\n\t\t\t\t\tpopup.setAngle({ offset: popupWidth / 2 - angleShift });\n\t\t\t\t\tpopup.setOffset({ offsetLeft: offsetLeft + Popup.getOption('angleLeftOffset') });\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\thint.show();\n\t\thint.adjustPosition();\n\t}\n\n\thideTooltip()\n\t{\n\t\tconst hint: Popup = PopupManager.getPopupById('sidepanel-toolbar-item-hint');\n\t\tif (hint)\n\t\t{\n\t\t\thint.close();\n\t\t}\n\t}\n\n\thandleClick(event): void\n\t{\n\t\tif (event.ctrlKey || event.metaKey)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault();\n\t\tgetInstance().maximize(this.getUrl());\n\t}\n\n\thandleMouseEnter(): void\n\t{\n\t\tthis.showTooltip();\n\t}\n\n\thandleMouseLeave(): void\n\t{\n\t\tthis.hideTooltip();\n\t}\n\n\thandleRemoveBtnClick(event): void\n\t{\n\t\tevent.stopPropagation();\n\t\tthis.emit('onRemove');\n\t}\n\n\ttoJSON(): JsonObject\n\t{\n\t\treturn {\n\t\t\ttitle: this.getTitle(),\n\t\t\turl: this.getUrl(),\n\t\t\tentityType: this.getEntityType(),\n\t\t\tentityId: this.getEntityId(),\n\t\t};\n\t}\n}\n","import {\n\tType,\n\tTag,\n\tText,\n\tCache,\n\tLoc,\n\tDom,\n\tRuntime,\n\tZIndexManager,\n\tEvent,\n\tReflection,\n\tajax as Ajax,\n\ttype JsonObject,\n} from 'main.core';\n\nimport { EventEmitter } from 'main.core.events';\nimport { MenuManager, PopupManager, Popup, type Menu } from 'main.popup';\n\nimport { ToolbarItem } from './toolbar-item';\nimport { getInstance } from './get-instance';\n\nimport { type ToolbarItemOptions } from './types/toolbar-item-options';\nimport { type ToolbarOptions } from './types/toolbar-options';\n\nexport class Toolbar extends EventEmitter\n{\n\tconstructor(toolbarOptions: ToolbarOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Main.SidePanel.Toolbar');\n\n\t\tconst options = Type.isPlainObject(toolbarOptions) ? toolbarOptions : {};\n\t\tif (!Type.isStringFilled(options.context))\n\t\t{\n\t\t\tthrow new Error('BX.Main.SidePanel.Toolbar: \"context\" parameter is required.');\n\t\t}\n\n\t\tthis.context = options.context;\n\t\tthis.items = [];\n\t\tthis.rendered = false;\n\t\tthis.refs = new Cache.MemoryCache();\n\t\tthis.container = null;\n\t\tthis.lsKey = 'bx.sidepanel.toolbar.item';\n\n\t\tthis.initialPosition = { right: '5px', bottom: '20px' };\n\t\tthis.shiftedPosition = { right: '5px', bottom: '20px' };\n\t\tif (Type.isPlainObject(options.position))\n\t\t{\n\t\t\tthis.initialPosition = options.position;\n\t\t}\n\n\t\tif (Type.isPlainObject(options.shiftedPosition))\n\t\t{\n\t\t\tthis.shiftedPosition = options.shiftedPosition;\n\t\t}\n\n\t\tthis.collapsed = options.collapsed !== false;\n\t\tthis.muted = false;\n\t\tthis.shifted = false;\n\n\t\tthis.maxVisibleItems = Type.isNumber(options.maxVisibleItems) ? Math.max(options.maxVisibleItems, 1) : 5;\n\n\t\tthis.addItems(options.items);\n\n\t\tconst item = this.restoreItemFromLocalStorage();\n\t\tif (item !== null)\n\t\t{\n\t\t\tconst { entityType, entityId } = item;\n\t\t\tif (this.getItem(entityType, entityId))\n\t\t\t{\n\t\t\t\tthis.clearLocalStorage();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.minimizeItem(item);\n\t\t\t}\n\t\t}\n\t}\n\n\tshow(): void\n\t{\n\t\tDom.addClass(this.getContainer(), '--show');\n\t}\n\n\tisShown(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getContainer(), '--show');\n\t}\n\n\thide(): void\n\t{\n\t\tDom.removeClass(this.getContainer(), '--show');\n\t}\n\n\tmute(): boolean\n\t{\n\t\tif (this.muted)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.muted = true;\n\t\tDom.addClass(this.getContainer(), '--muted');\n\n\t\treturn true;\n\t}\n\n\tunmute(): boolean\n\t{\n\t\tif (!this.muted)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.muted = false;\n\t\tDom.removeClass(this.getContainer(), '--muted');\n\n\t\treturn true;\n\t}\n\n\tisMuted(): boolean\n\t{\n\t\treturn this.muted;\n\t}\n\n\ttoggleMuteness(): boolean\n\t{\n\t\tif (this.canShowOnTop())\n\t\t{\n\t\t\treturn this.unmute();\n\t\t}\n\n\t\treturn this.mute();\n\t}\n\n\tshift(): boolean\n\t{\n\t\tif (this.shifted)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.shifted = true;\n\t\tDom.addClass(this.getContainer(), '--shifted');\n\t\tDom.style(document.body, '--side-panel-toolbar-shifted', 1);\n\t\tthis.setPosition(this.getContainer(), this.shiftedPosition);\n\n\t\treturn true;\n\t}\n\n\tunshift(): boolean\n\t{\n\t\tif (!this.shifted)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.shifted = false;\n\t\tDom.removeClass(this.getContainer(), '--shifted');\n\t\tDom.style(document.body, '--side-panel-toolbar-shifted', null);\n\t\tthis.setPosition(this.getContainer(), this.initialPosition);\n\n\t\treturn true;\n\t}\n\n\tisShifted(): boolean\n\t{\n\t\treturn this.shifted;\n\t}\n\n\ttoggleShift(): boolean\n\t{\n\t\tconst sliders = getInstance().getOpenSliders();\n\t\tif (sliders.length === 0 || (sliders.length === 1 && !sliders[0].isOpen()))\n\t\t{\n\t\t\treturn this.unshift();\n\t\t}\n\n\t\treturn this.shift();\n\t}\n\n\tsetPosition(container: HTMLElement, position): boolean\n\t{\n\t\tfor (const prop of ['top', 'right', 'bottom', 'left'])\n\t\t{\n\t\t\tDom.style(container, prop, null);\n\t\t\tif (Type.isStringFilled(position[prop]))\n\t\t\t{\n\t\t\t\tDom.style(container, prop, position[prop]);\n\t\t\t}\n\t\t}\n\t}\n\n\tcollapse(immediately: boolean = false): void\n\t{\n\t\tif (this.collapsed)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (immediately === true)\n\t\t{\n\t\t\tDom.addClass(this.getContainer(), '--collapsed');\n\t\t\tDom.style(this.getContentContainer(), 'width', null);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst width = this.getContentContainer().scrollWidth;\n\t\t\tDom.style(this.getContentContainer(), 'width', `${width}px`);\n\n\t\t\tEvent.unbindAll(this.getContentContainer(), 'transitionend');\n\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\tDom.style(this.getContentContainer(), 'width', 0);\n\t\t\t\t\tEvent.bindOnce(this.getContentContainer(), 'transitionend', () => {\n\t\t\t\t\t\tDom.addClass(this.getContainer(), '--collapsed');\n\t\t\t\t\t\tDom.style(this.getContentContainer(), 'width', null);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tthis.collapsed = true;\n\t}\n\n\texpand(immediately: boolean = false): void\n\t{\n\t\tif (!this.collapsed)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (immediately === true)\n\t\t{\n\t\t\tDom.removeClass(this.getContainer(), '--collapsed');\n\t\t\tDom.style(this.getContentContainer(), 'width', null);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.getContainer(), '--collapsed');\n\t\t\tconst width = this.getContentContainer().scrollWidth;\n\t\t\tDom.style(this.getContentContainer(), 'width', 0);\n\n\t\t\tEvent.unbindAll(this.getContentContainer(), 'transitionend');\n\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\tDom.style(this.getContentContainer(), 'width', `${width}px`);\n\t\t\t\t\tEvent.bindOnce(this.getContentContainer(), 'transitionend', () => {\n\t\t\t\t\t\tDom.style(this.getContentContainer(), 'width', null);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tthis.collapsed = false;\n\t}\n\n\ttoggle(): void\n\t{\n\t\tif (this.collapsed)\n\t\t{\n\t\t\tthis.request('expand');\n\t\t\tthis.expand();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.request('collapse');\n\t\t\tthis.collapse();\n\t\t}\n\t}\n\n\tisCollapsed(): boolean\n\t{\n\t\treturn this.collapsed;\n\t}\n\n\tgetItems()\n\t{\n\t\treturn this.items;\n\t}\n\n\tgetItemsCount(): number\n\t{\n\t\treturn this.items.length;\n\t}\n\n\taddItems(itemsOptions)\n\t{\n\t\tif (Type.isArrayFilled(itemsOptions))\n\t\t{\n\t\t\titemsOptions.forEach((itemOptions) => {\n\t\t\t\tthis.addItem(itemOptions);\n\t\t\t});\n\t\t}\n\t}\n\n\taddItem(itemOptions: ToolbarItemOptions): ToolbarItem | null\n\t{\n\t\tconst item = this.createItem(itemOptions);\n\t\tif (item === null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.items.push(item);\n\n\t\tif (this.rendered)\n\t\t{\n\t\t\tthis.redraw();\n\t\t}\n\n\t\treturn item;\n\t}\n\n\t/**\n\t *\n\t * @param itemOptions\n\t * @returns {ToolbarItem|null}\n\t */\n\tprependItem(itemOptions): ToolbarItem | null\n\t{\n\t\tconst item = this.createItem(itemOptions);\n\t\tif (item === null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.items.unshift(item);\n\n\t\tif (this.rendered)\n\t\t{\n\t\t\tthis.redraw();\n\t\t}\n\n\t\treturn item;\n\t}\n\n\tcreateItem(itemOptions: ToolbarItemOptions): ToolbarItem | null\n\t{\n\t\tconst options = Type.isPlainObject(itemOptions) ? itemOptions : {};\n\n\t\tif (\n\t\t\t!Type.isStringFilled(options.entityType)\n\t\t\t|| !(Type.isStringFilled(options.entityId) || Type.isNumber(options.entityId))\n\t\t\t|| !Type.isStringFilled(options.title)\n\t\t\t|| !Type.isStringFilled(options.url)\n\t\t)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst item = new ToolbarItem(options);\n\t\tif (!Type.isStringFilled(item.getEntityName()))\n\t\t{\n\t\t\tconst minimizeOptions = getInstance().getMinimizeOptions(item.getUrl());\n\t\t\tif (Type.isPlainObject(minimizeOptions) && Type.isStringFilled(minimizeOptions.entityName))\n\t\t\t{\n\t\t\t\titem.setEntityName(minimizeOptions.entityName);\n\t\t\t}\n\t\t}\n\n\t\titem.subscribe('onRemove', this.handleItemRemove.bind(this));\n\n\t\treturn item;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tminimizeItem(itemOptions: ToolbarItemOptions): ToolbarItem | null\n\t{\n\t\tconst { entityType, entityId } = itemOptions;\n\t\tlet item = this.getItem(entityType, entityId);\n\t\tconst itemExists = item !== null;\n\t\tif (!itemExists)\n\t\t{\n\t\t\titem = this.prependItem(itemOptions);\n\t\t}\n\n\t\tif (item !== null)\n\t\t{\n\t\t\tif (!itemExists)\n\t\t\t{\n\t\t\t\tthis.saveItemToLocalStorage(item);\n\t\t\t}\n\n\t\t\tthis.request('minimize', item)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif (response.status === 'success')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.clearLocalStorage();\n\t\t\t\t\t}\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.clearLocalStorage();\n\t\t\t\t\tthis.removeItem(item);\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\n\t\treturn item;\n\t}\n\n\tsaveItemToLocalStorage(item): void\n\t{\n\t\tconst cache = { item, ttl: Date.now() };\n\t\tlocalStorage.setItem(this.lsKey, JSON.stringify(cache));\n\t}\n\n\trestoreItemFromLocalStorage(): JsonObject | null\n\t{\n\t\tconst data = localStorage.getItem(this.lsKey);\n\t\tif (Type.isStringFilled(data))\n\t\t{\n\t\t\tconst { item, ttl } = JSON.parse(data);\n\t\t\tif ((Date.now() - ttl) > 10000)\n\t\t\t{\n\t\t\t\tthis.clearLocalStorage();\n\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (Type.isPlainObject(item))\n\t\t\t{\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tclearLocalStorage(): void\n\t{\n\t\tlocalStorage.removeItem(this.lsKey);\n\t}\n\n\tgetContext(): string\n\t{\n\t\treturn this.context;\n\t}\n\n\trequest(action, item, data): Promise\n\t{\n\t\tconst additional = Type.isPlainObject(data) ? data : {};\n\n\t\treturn Ajax.runAction(`main.api.sidepanel.toolbar.${action}`, {\n\t\t\tjson: {\n\t\t\t\ttoolbar: {\n\t\t\t\t\tcontext: this.getContext(),\n\t\t\t\t},\n\t\t\t\titem: item ? item.toJSON() : null,\n\t\t\t\t...additional,\n\t\t\t},\n\t\t});\n\t}\n\n\thandleItemRemove(event): void\n\t{\n\t\tconst item = event.getTarget();\n\t\titem.hideTooltip();\n\t\tthis.removeItem(item);\n\t}\n\n\thandleMenuItemRemove(event): void\n\t{\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconst itemId = event.currentTarget.dataset.menuItemId;\n\t\tconst itemToRemove = this.getItemById(itemId);\n\t\tif (itemToRemove)\n\t\t{\n\t\t\tthis.removeItem(itemToRemove);\n\t\t}\n\n\t\tconst menu = this.getMenu();\n\t\tif (menu)\n\t\t{\n\t\t\tmenu.removeMenuItem(itemId);\n\n\t\t\tconst invisibleItemsCount = this.getItems().reduce((count, item) => {\n\t\t\t\treturn item.isRendered() ? count : count + 1;\n\t\t\t}, 0);\n\n\t\t\tif (invisibleItemsCount > 0)\n\t\t\t{\n\t\t\t\tmenu.getPopupWindow().adjustPosition();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmenu.close();\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveItem(itemToRemove): void\n\t{\n\t\titemToRemove.remove();\n\t\tthis.items = this.items.filter((item) => {\n\t\t\treturn item !== itemToRemove;\n\t\t});\n\n\t\tconst restored = this.restoreItemFromLocalStorage();\n\t\tif (restored !== null)\n\t\t{\n\t\t\tconst { entityType, entityId } = restored;\n\t\t\tif (itemToRemove.getEntityType() === entityType && itemToRemove.getEntityId() === entityId)\n\t\t\t{\n\t\t\t\tthis.clearLocalStorage();\n\t\t\t}\n\t\t}\n\n\t\tif (this.rendered)\n\t\t{\n\t\t\tthis.redraw();\n\t\t\tthis.request('remove', itemToRemove);\n\n\t\t\tif (this.getItemsCount() === 0)\n\t\t\t{\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\tredraw(): void\n\t{\n\t\tlet visibleItemsCount = 0;\n\t\tfor (let i = 0; i < this.getItems().length; i++)\n\t\t{\n\t\t\tconst item = this.getItems()[i];\n\t\t\tif (visibleItemsCount >= this.maxVisibleItems)\n\t\t\t{\n\t\t\t\tif (item.isRendered())\n\t\t\t\t{\n\t\t\t\t\titem.remove();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!item.isRendered())\n\t\t\t\t{\n\t\t\t\t\tconst previousItem = this.getItems()[i - 1] || null;\n\t\t\t\t\tconst nextItem = this.getItems()[i + 1] || null;\n\t\t\t\t\tif (previousItem)\n\t\t\t\t\t{\n\t\t\t\t\t\titem.insertAfter(previousItem.getContainer());\n\t\t\t\t\t}\n\t\t\t\t\telse if (nextItem)\n\t\t\t\t\t{\n\t\t\t\t\t\t// eslint-disable-next-line @bitrix24/bitrix24-rules/no-native-dom-methods\n\t\t\t\t\t\titem.insertBefore(nextItem.getContainer());\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\titem.appendTo(this.getItemsContainer());\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvisibleItemsCount++;\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveAll(): void\n\t{\n\t\tthis.getItemsContainer().innerHTML = '';\n\t\tthis.items = [];\n\t\tthis.clearLocalStorage();\n\t}\n\n\tgetItem(entityType: string, entityId: string | number): ToolbarItem | null\n\t{\n\t\treturn this.items.find((item) => item.getEntityType() === entityType && item.getEntityId() === entityId) || null;\n\t}\n\n\tgetItemByUrl(url: string): ToolbarItem | null\n\t{\n\t\treturn this.items.find((item) => item.getUrl() === url) || null;\n\t}\n\n\tgetItemById(id: string): ToolbarItem | null\n\t{\n\t\treturn this.items.find((item) => item.getId() === id) || null;\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn this.refs.remember('container', () => {\n\t\t\tconst classes = [];\n\t\t\tif (this.collapsed)\n\t\t\t{\n\t\t\t\tclasses.push('--collapsed');\n\t\t\t}\n\n\t\t\tconst container = Tag.render`\n\t\t\t\t<div class=\"side-panel-toolbar ${classes.join(' ')}\">\n\t\t\t\t\t${this.getContentContainer()}\n\t\t\t\t\t<div class=\"side-panel-toolbar-toggle\" onclick=\"${this.handleToggleClick.bind(this)}\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tthis.setPosition(container, this.initialPosition);\n\t\t\tDom.append(container, document.body);\n\t\t\tZIndexManager.register(container, { alwaysOnTop: true });\n\t\t\tthis.rendered = true;\n\n\t\t\tconst toggleMuteness = Runtime.debounce(this.toggleMuteness, 50, this);\n\t\t\tEventEmitter.subscribe('BX.Main.Popup:onShow', toggleMuteness);\n\t\t\tEventEmitter.subscribe('BX.Main.Popup:onClose', toggleMuteness);\n\t\t\tEventEmitter.subscribe('BX.Main.Popup:onDestroy', toggleMuteness);\n\t\t\tEventEmitter.subscribe('onWindowClose', toggleMuteness);\n\t\t\tEventEmitter.subscribe('onWindowRegister', toggleMuteness);\n\n\t\t\tlet forceCollapsed = false;\n\t\t\tconst onSliderClose = () => {\n\t\t\t\tthis.toggleMuteness();\n\t\t\t\tif (this.isMuted())\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.toggleShift();\n\t\t\t\tif (!this.isShifted() && forceCollapsed)\n\t\t\t\t{\n\t\t\t\t\tforceCollapsed = false;\n\t\t\t\t\tthis.expand();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tEventEmitter.subscribe('SidePanel.Slider:onClosing', onSliderClose);\n\t\t\tEventEmitter.subscribe('SidePanel.Slider:onCloseComplete', onSliderClose);\n\t\t\tEventEmitter.subscribe('SidePanel.Slider:onDestroyComplete', onSliderClose);\n\t\t\tEventEmitter.subscribe('SidePanel.Slider:onOpening', () => {\n\t\t\t\tthis.toggleMuteness();\n\t\t\t\tif (this.isMuted())\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!this.isCollapsed())\n\t\t\t\t{\n\t\t\t\t\tforceCollapsed = true;\n\t\t\t\t\tthis.collapse();\n\t\t\t\t}\n\n\t\t\t\tthis.toggleShift();\n\t\t\t});\n\n\t\t\tEventEmitter.subscribe('BX.UI.Viewer.Controller:onBeforeShow', toggleMuteness);\n\t\t\tEventEmitter.subscribe(\n\t\t\t\t'BX.UI.Viewer.Controller:onClose',\n\t\t\t\tRuntime.debounce(this.toggleMuteness, 500, this),\n\t\t\t);\n\n\t\t\tEvent.bind(window, 'resize', Runtime.throttle(() => {\n\t\t\t\tconst menu = this.getMenu();\n\t\t\t\tif (menu !== null)\n\t\t\t\t{\n\t\t\t\t\tmenu.close();\n\t\t\t\t}\n\t\t\t}, 300));\n\n\t\t\treturn container;\n\t\t});\n\t}\n\n\tgetContentContainer(): HTMLElement\n\t{\n\t\treturn this.refs.remember('content-container', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"side-panel-toolbar-content\">\n\t\t\t\t\t<div class=\"side-panel-toolbar-collapse-btn\" onclick=\"${this.handleToggleClick.bind(this)}\">\n\t\t\t\t\t\t<div class=\"ui-icon-set --chevron-right\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.getItemsContainer()}\n\t\t\t\t\t${this.getMoreButton()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetItemsContainer(): HTMLElement\n\t{\n\t\treturn this.refs.remember('items-container', () => {\n\t\t\tconst container = Tag.render`<div class=\"side-panel-toolbar-items\"></div>`;\n\t\t\t[...this.items].slice(0, this.maxVisibleItems).forEach((item) => {\n\t\t\t\titem.appendTo(container);\n\t\t\t});\n\n\t\t\treturn container;\n\t\t});\n\t}\n\n\tgetMoreButton(): HTMLElement\n\t{\n\t\treturn this.refs.remember('more-button', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"side-panel-toolbar-more-btn\" onclick=\"${this.handleMoreBtnClick.bind(this)}\">\n\t\t\t\t\t<div class=\"ui-icon-set --more\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\thandleMoreBtnClick(event): void\n\t{\n\t\tconst targetNode = this.getMoreButton();\n\t\tconst rect = targetNode.getBoundingClientRect();\n\t\tconst targetNodeWidth = rect.width;\n\n\t\tconst items = [...this.items].filter((item) => !item.isRendered()).map((item) => {\n\t\t\tconst title = (\n\t\t\t\tType.isStringFilled(item.getEntityName())\n\t\t\t\t\t? `${item.getEntityName()}\\n${item.getTitle()}`\n\t\t\t\t\t: item.getTitle()\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\tid: item.getId(),\n\t\t\t\thtml: this.createMenuItemText(item),\n\t\t\t\ttitle,\n\t\t\t\thref: item.getUrl(),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tmenu.close();\n\t\t\t\t},\n\t\t\t};\n\t\t});\n\n\t\tif (items.length > 0)\n\t\t{\n\t\t\titems.push({\n\t\t\t\tdelimiter: true,\n\t\t\t});\n\t\t}\n\n\t\titems.push({\n\t\t\ttext: Loc.getMessage('MAIN_SIDEPANEL_REMOVE_ALL'),\n\t\t\tonclick: () => {\n\t\t\t\tthis.removeAll();\n\t\t\t\tthis.hide();\n\t\t\t\tmenu.close();\n\n\t\t\t\tthis.request('removeAll');\n\t\t\t},\n\t\t});\n\n\t\tconst menu = MenuManager.create({\n\t\t\tid: 'sidepanel-toolbar-more-btn',\n\t\t\tcacheable: false,\n\t\t\tbindElement: rect,\n\t\t\tbindOptions: {\n\t\t\t\tforceBindPosition: true,\n\t\t\t\tforceTop: true,\n\t\t\t\tposition: 'top',\n\t\t\t},\n\t\t\tmaxWidth: 260,\n\t\t\tfixed: true,\n\t\t\toffsetTop: 0,\n\t\t\tmaxHeight: 305,\n\t\t\titems,\n\t\t\tevents: {\n\t\t\t\tonShow: (event) => {\n\t\t\t\t\tconst popup = event.getTarget();\n\t\t\t\t\tconst popupWidth = popup.getPopupContainer().offsetWidth;\n\t\t\t\t\tconst offsetLeft = (targetNodeWidth / 2) - (popupWidth / 2);\n\t\t\t\t\tconst angleShift = Popup.getOption('angleLeftOffset') - Popup.getOption('angleMinTop');\n\n\t\t\t\t\tpopup.setAngle({ offset: popupWidth / 2 - angleShift });\n\t\t\t\t\tpopup.setOffset({ offsetLeft: offsetLeft + Popup.getOption('angleLeftOffset') });\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tmenu.show();\n\t}\n\n\tcanShowOnTop(): boolean\n\t{\n\t\tconst popups = PopupManager.getPopups();\n\t\tfor (const popup of popups)\n\t\t{\n\t\t\tif (!popup.isShown())\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tpopup.getId().startsWith('timeman_weekly_report_popup_')\n\t\t\t\t|| popup.getId().startsWith('timeman_daily_report_popup_')\n\t\t\t\t|| Dom.hasClass(popup.getPopupContainer(), 'b24-whatsnew__popup')\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tif (Reflection.getClass('BX.UI.Viewer.Instance') && BX.UI.Viewer.Instance.isOpen())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst sliders = getInstance().getOpenSliders();\n\t\tfor (const slider of sliders)\n\t\t{\n\t\t\tconst sliderId = slider.getUrl().toString();\n\t\t\tif (\n\t\t\t\tslider.shouldHideToolbarOnOpen()\n\t\t\t\t|| sliderId.startsWith('im:slider')\n\t\t\t\t|| sliderId.startsWith('release-slider')\n\t\t\t\t|| sliderId.startsWith('main:helper')\n\t\t\t\t|| sliderId.startsWith('ui:info_helper')\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tconst stack = ZIndexManager.getStack(document.body);\n\t\tconst components = stack === null ? [] : stack.getComponents();\n\t\tfor (const component of components)\n\t\t{\n\t\t\tif (component.getOverlay() !== null && component.getOverlay().offsetWidth > 0)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tgetMenu(): Menu | null\n\t{\n\t\treturn MenuManager.getMenuById('sidepanel-toolbar-more-btn');\n\t}\n\n\tcreateMenuItemText(item): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<span class=\"side-panel-toolbar-menu-item\">${[\n\t\t\t\tTag.render`\n\t\t\t\t\t<span class=\"side-panel-toolbar-menu-item-title\">${Text.encode(item.getTitle())}</span>\n\t\t\t\t`,\n\t\t\t\tTag.render`\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"side-panel-toolbar-menu-item-remove\"\n\t\t\t\t\t\tdata-slider-ignore-autobinding=\"true\"\n\t\t\t\t\t\tdata-menu-item-id=\"${item.getId()}\"\n\t\t\t\t\t\tonclick=\"${this.handleMenuItemRemove.bind(this)}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"ui-icon-set --cross-20\" data-slider-ignore-autobinding=\"true\"></span>\n\t\t\t\t\t</span>\n\t\t\t\t`,\n\t\t\t]}</span>\n\t\t`;\n\t}\n\n\thandleToggleClick(): void\n\t{\n\t\tthis.toggle();\n\t}\n}\n","import type { JsonObject } from 'main.core';\nimport { Type, Dom, Event, Runtime, Reflection, Browser, ajax as Ajax, Uri } from 'main.core';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\n\nimport { Slider } from './slider';\nimport type { SliderEvent } from './slider-event';\nimport { Toolbar } from './toolbar';\nimport { MessageEvent } from './message-event';\nimport type { ToolbarItem } from './toolbar-item';\nimport type { LinkOptions } from './types/link-options';\nimport type { MinimizeOptions } from './types/minimize-options';\nimport type { RuleOptions } from './types/rule-options';\n\nimport { type SliderOptions } from './types/slider-options';\n\nlet sliderClassName = null;\nlet sliderDefaultOptions: SliderOptions = null;\nlet sliderPriorityOptions: SliderOptions = null;\n\n/**\n * @namespace BX.SidePanel\n * @alias Manager\n */\nexport class SliderManager\n{\n\tconstructor()\n\t{\n\t\tthis.anchorRules = [];\n\t\tthis.anchorBinding = true;\n\n\t\tthis.openSliders = [];\n\t\tthis.lastOpenSlider = null;\n\n\t\tthis.opened = false;\n\t\tthis.hidden = false;\n\t\tthis.hacksApplied = false;\n\n\t\tthis.pageUrl = this.getCurrentUrl();\n\t\tthis.pageTitle = this.getCurrentTitle();\n\t\tthis.titleChanged = false;\n\n\t\tthis.toolbar = null;\n\n\t\tthis.fullScreenSlider = null;\n\n\t\tthis.handleAnchorClick = this.handleAnchorClick.bind(this);\n\t\tthis.handleDocumentKeyDown = this.handleDocumentKeyDown.bind(this);\n\t\tthis.handleWindowResize = Runtime.throttle(this.handleWindowResize, 300, this);\n\t\tthis.handleWindowScroll = this.handleWindowScroll.bind(this);\n\t\tthis.handleTouchMove = this.handleTouchMove.bind(this);\n\n\t\tthis.handleSliderOpenStart = this.handleSliderOpenStart.bind(this);\n\t\tthis.handleSliderOpenComplete = this.handleSliderOpenComplete.bind(this);\n\t\tthis.handleSliderMaximizeStart = this.handleSliderMaximizeStart.bind(this);\n\t\tthis.handleSliderCloseStart = this.handleSliderCloseStart.bind(this);\n\t\tthis.handleSliderCloseComplete = this.handleSliderCloseComplete.bind(this);\n\t\tthis.handleSliderMinimizeStart = this.handleSliderMinimizeStart.bind(this);\n\t\tthis.handleSliderLoad = this.handleSliderLoad.bind(this);\n\t\tthis.handleSliderDestroy = this.handleSliderDestroy.bind(this);\n\t\tthis.handleEscapePress = this.handleEscapePress.bind(this);\n\t\tthis.handleFullScreenChange = this.handleFullScreenChange.bind(this);\n\n\t\tEventEmitter.subscribe('SidePanel:open', this.open.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('SidePanel:close', this.close.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('SidePanel:closeAll', this.closeAll.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('SidePanel:destroy', this.destroy.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('SidePanel:hide', this.hide.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('SidePanel:unhide', this.unhide.bind(this), { compatMode: true });\n\n\t\tEventEmitter.subscribe('SidePanel:postMessage', this.postMessage.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('SidePanel:postMessageAll', this.postMessageAll.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('SidePanel:postMessageTop', this.postMessageTop.bind(this), { compatMode: true });\n\n\t\t// Compatibility\n\t\tEventEmitter.subscribe('BX.Bitrix24.PageSlider:close', this.close.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('Bitrix24.Slider:postMessage', this.handlePostMessageCompatible.bind(this), { compatMode: true });\n\t}\n\n\tstatic registerSliderClass(\n\t\tclassName: string,\n\t\tdefaultOptions: SliderOptions = null,\n\t\tpriorityOptions: SliderOptions = null,\n\t): void\n\t{\n\t\tif (Type.isStringFilled(className))\n\t\t{\n\t\t\tsliderClassName = className;\n\t\t}\n\n\t\tif (Type.isPlainObject(defaultOptions))\n\t\t{\n\t\t\tsliderDefaultOptions = defaultOptions;\n\t\t}\n\n\t\tif (Type.isPlainObject(priorityOptions))\n\t\t{\n\t\t\tsliderPriorityOptions = priorityOptions;\n\t\t}\n\t}\n\n\tstatic getSliderClass(): Slider\n\t{\n\t\tconst sliderClass = sliderClassName === null ? null : Reflection.getClass(sliderClassName);\n\n\t\treturn sliderClass === null ? Slider : sliderClass;\n\t}\n\n\tstatic getSliderDefaultOptions(): SliderOptions\n\t{\n\t\treturn sliderDefaultOptions === null ? {} : sliderDefaultOptions;\n\t}\n\n\tstatic getSliderPriorityOptions(): SliderOptions\n\t{\n\t\treturn sliderPriorityOptions === null ? {} : sliderPriorityOptions;\n\t}\n\n\topen(url: string, options: SliderOptions): boolean\n\t{\n\t\tconst slider = this.#createSlider(url, options);\n\t\tif (slider === null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.tryApplyHacks(\n\t\t\tslider,\n\t\t\t() => slider.open(),\n\t\t);\n\t}\n\n\t#createSlider(sliderUrl: string, sliderOptions: SliderOptions): Slider | null\n\t{\n\t\tif (!Type.isStringFilled(sliderUrl))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst url = this.refineUrl(sliderUrl);\n\n\t\tif (this.isHidden())\n\t\t{\n\t\t\tthis.unhide();\n\t\t}\n\n\t\tconst topSlider = this.getTopSlider();\n\t\tif (topSlider && topSlider.isOpen() && topSlider.getUrl() === url)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this.getLastOpenSlider() && this.getLastOpenSlider().getUrl() === url)\n\t\t{\n\t\t\treturn this.getLastOpenSlider();\n\t\t}\n\n\t\tconst rule = this.getUrlRule(url);\n\t\tconst ruleOptions = rule !== null && Type.isPlainObject(rule.options) ? rule.options : {};\n\t\tconst options = Type.isPlainObject(sliderOptions) ? sliderOptions : ruleOptions;\n\n\t\tif (\n\t\t\tType.isPlainObject(ruleOptions.minimizeOptions)\n\t\t\t&& Type.isPlainObject(sliderOptions)\n\t\t\t&& !Type.isPlainObject(sliderOptions.minimizeOptions)\n\t\t)\n\t\t{\n\t\t\toptions.minimizeOptions = ruleOptions.minimizeOptions;\n\t\t}\n\n\t\tif (this.getToolbar() === null && options.minimizeOptions)\n\t\t{\n\t\t\toptions.minimizeOptions = null;\n\t\t}\n\n\t\tconst defaultOptions = SliderManager.getSliderDefaultOptions();\n\t\tconst priorityOptions = SliderManager.getSliderPriorityOptions();\n\n\t\tconst SliderClass = SliderManager.getSliderClass();\n\t\tconst slider: Slider = new SliderClass(url, Runtime.merge(defaultOptions, options, priorityOptions));\n\n\t\tlet offset = null;\n\t\tif (slider.shouldUseAutoOffset() && slider.getWidth() === null && slider.getCustomLeftBoundary() === null)\n\t\t{\n\t\t\toffset = 0;\n\t\t\tconst lastOffset = this.#getLastOffset();\n\t\t\tif (topSlider && lastOffset !== null)\n\t\t\t{\n\t\t\t\toffset = Math.min(lastOffset + this.#getMinOffset(), this.#getMaxOffset());\n\t\t\t}\n\t\t}\n\n\t\tslider.setOffset(offset);\n\n\t\tif (topSlider && topSlider.getCustomRightBoundary() !== null)\n\t\t{\n\t\t\tconst rightBoundary = slider.calculateRightBoundary();\n\t\t\tif (rightBoundary > topSlider.getCustomRightBoundary())\n\t\t\t{\n\t\t\t\tslider.setCustomRightBoundary(topSlider.getCustomRightBoundary());\n\t\t\t}\n\t\t}\n\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onOpenStart', this.handleSliderOpenStart, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onBeforeOpenComplete', this.handleSliderOpenComplete, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onMaximizeStart', this.handleSliderMaximizeStart, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onCloseStart', this.handleSliderCloseStart, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onBeforeCloseComplete', this.handleSliderCloseComplete, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onMinimizeStart', this.handleSliderMinimizeStart, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onLoad', this.handleSliderLoad, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onDestroy', this.handleSliderDestroy, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onEscapePress', this.handleEscapePress, { compatMode: true });\n\n\t\treturn slider;\n\t}\n\n\tgetMinimizeOptions(url: string): MinimizeOptions | null\n\t{\n\t\tconst rule = this.getUrlRule(url);\n\t\tconst ruleOptions = rule !== null && Type.isPlainObject(rule.options) ? rule.options : {};\n\n\t\treturn Type.isPlainObject(ruleOptions.minimizeOptions) ? ruleOptions.minimizeOptions : null;\n\t}\n\n\tmaximize(url, options: SliderOptions): boolean\n\t{\n\t\tconst slider = this.#createSlider(url, options);\n\t\tif (slider === null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.tryApplyHacks(\n\t\t\tslider,\n\t\t\t() => slider.maximize(),\n\t\t);\n\t}\n\n\ttryApplyHacks(slider, cb: Function): boolean\n\t{\n\t\tif (!this.isOpen())\n\t\t{\n\t\t\tthis.applyHacks(slider);\n\t\t}\n\n\t\tconst success = cb();\n\t\tif (!success)\n\t\t{\n\t\t\tthis.resetHacks(slider);\n\t\t}\n\n\t\treturn success;\n\t}\n\n\tisOpen(): boolean\n\t{\n\t\treturn this.opened;\n\t}\n\n\tclose(immediately: boolean, callback: Function): void\n\t{\n\t\tconst topSlider = this.getTopSlider();\n\t\tif (topSlider)\n\t\t{\n\t\t\ttopSlider.close(immediately, callback);\n\t\t}\n\t}\n\n\tcloseAll(immediately: boolean): void\n\t{\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tconst success = slider.close(immediately);\n\t\t\tif (!success)\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tminimize(immediately: boolean, callback: Function): void\n\t{\n\t\tconst topSlider = this.getTopSlider();\n\t\tif (topSlider)\n\t\t{\n\t\t\ttopSlider.minimize(immediately, callback);\n\t\t}\n\t}\n\n\thide(): boolean\n\t{\n\t\tif (this.hidden)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst topSlider = this.getTopSlider();\n\n\t\tthis.getOpenSliders().forEach((slider: Slider) => {\n\t\t\tslider.hide();\n\t\t});\n\n\t\tthis.hidden = true;\n\n\t\tthis.resetHacks(topSlider);\n\n\t\treturn true;\n\t}\n\n\tunhide(): boolean\n\t{\n\t\tif (!this.hidden)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.getOpenSliders().forEach((slider) => {\n\t\t\tslider.unhide();\n\t\t});\n\n\t\tthis.hidden = false;\n\n\t\tsetTimeout(() => {\n\t\t\tthis.applyHacks(this.getTopSlider());\n\t\t}, 0);\n\n\t\treturn true;\n\t}\n\n\tisHidden(): boolean\n\t{\n\t\treturn this.hidden;\n\t}\n\n\tdestroy(sliderUrl: string)\n\t{\n\t\tif (!Type.isStringFilled(sliderUrl))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst url = this.refineUrl(sliderUrl);\n\t\tconst sliderToDestroy = this.getSlider(url);\n\n\t\tif (this.getLastOpenSlider() && (sliderToDestroy || this.getLastOpenSlider().getUrl() === url))\n\t\t{\n\t\t\tthis.getLastOpenSlider().destroy();\n\t\t}\n\n\t\tif (sliderToDestroy !== null)\n\t\t{\n\t\t\tconst openSliders = this.getOpenSliders();\n\t\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t\t{\n\t\t\t\tconst slider = openSliders[i];\n\t\t\t\tslider.destroy();\n\n\t\t\t\tif (slider === sliderToDestroy)\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treload(): void\n\t{\n\t\tconst topSlider = this.getTopSlider();\n\t\tif (topSlider)\n\t\t{\n\t\t\ttopSlider.reload();\n\t\t}\n\t}\n\n\tgetTopSlider(): Slider | null\n\t{\n\t\tconst count = this.openSliders.length;\n\n\t\treturn this.openSliders[count - 1] || null;\n\t}\n\n\tgetPreviousSlider(currentSlider?: Slider): Slider | null\n\t{\n\t\tlet previousSlider = null;\n\t\tconst openSliders = this.getOpenSliders();\n\t\tcurrentSlider = currentSlider || this.getTopSlider();\n\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tif (slider === currentSlider)\n\t\t\t{\n\t\t\t\tpreviousSlider = openSliders[i - 1] || null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn previousSlider;\n\t}\n\n\tgetSlider(sliderUrl: string): Slider | null\n\t{\n\t\tconst url = this.refineUrl(sliderUrl);\n\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (const slider of openSliders)\n\t\t{\n\t\t\tif (slider.getUrl() === url)\n\t\t\t{\n\t\t\t\treturn slider;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetSliderByWindow(window: Window): Slider | null\n\t{\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (const slider of openSliders)\n\t\t{\n\t\t\tif (slider.getFrameWindow() === window)\n\t\t\t{\n\t\t\t\treturn slider;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetOpenSliders(): Slider[]\n\t{\n\t\treturn this.openSliders;\n\t}\n\n\tgetOpenSlidersCount(): number\n\t{\n\t\treturn this.openSliders.length;\n\t}\n\n\t/**\n\t * @private\n\t */\n\t#addOpenSlider(slider: Slider): void\n\t{\n\t\tif (!(slider instanceof Slider))\n\t\t{\n\t\t\tthrow new TypeError('Slider is not an instance of BX.SidePanel.Slider');\n\t\t}\n\n\t\tthis.openSliders.push(slider);\n\t}\n\n\t/**\n\t * @private\n\t */\n\t#removeOpenSlider(slider): boolean\n\t{\n\t\tconst openSliders = [...this.getOpenSliders()];\n\t\tfor (const [i, openSlider] of openSliders.entries())\n\t\t{\n\t\t\tif (openSlider === slider)\n\t\t\t{\n\t\t\t\tthis.openSliders.splice(i, 1);\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgetLastOpenSlider(): Slider | null\n\t{\n\t\treturn this.lastOpenSlider;\n\t}\n\n\t#setLastOpenSlider(slider: Slider): void\n\t{\n\t\tif (this.lastOpenSlider !== slider)\n\t\t{\n\t\t\tif (this.lastOpenSlider)\n\t\t\t{\n\t\t\t\tthis.lastOpenSlider.destroy();\n\t\t\t}\n\n\t\t\tthis.lastOpenSlider = slider;\n\t\t}\n\t}\n\n\t#resetLastOpenSlider(): void\n\t{\n\t\tif (this.lastOpenSlider && this.getTopSlider() !== this.lastOpenSlider)\n\t\t{\n\t\t\tthis.lastOpenSlider.destroy();\n\t\t}\n\n\t\tthis.lastOpenSlider = null;\n\t}\n\n\tadjustLayout(): void\n\t{\n\t\tthis.getOpenSliders().forEach((slider: Slider) => {\n\t\t\tslider.adjustLayout();\n\t\t});\n\t}\n\n\tcreateToolbar(options): Toolbar\n\t{\n\t\tif (this.toolbar === null)\n\t\t{\n\t\t\tthis.toolbar = new Toolbar(options);\n\t\t}\n\n\t\treturn this.toolbar;\n\t}\n\n\tgetToolbar(): Toolbar\n\t{\n\t\treturn this.toolbar;\n\t}\n\n\t#getLastOffset(): number | null\n\t{\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tif (slider.getOffset() !== null)\n\t\t\t{\n\t\t\t\treturn slider.getOffset();\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\trefineUrl(url: string): string\n\t{\n\t\tif (Type.isStringFilled(url) && /IFRAME/.test(url))\n\t\t{\n\t\t\treturn Uri.removeParam(url, ['IFRAME', 'IFRAME_TYPE']);\n\t\t}\n\n\t\treturn url;\n\t}\n\n\tgetPageUrl(): string\n\t{\n\t\treturn this.pageUrl;\n\t}\n\n\tgetCurrentUrl(): string\n\t{\n\t\treturn window.location.pathname + window.location.search + window.location.hash;\n\t}\n\n\tgetPageTitle(): string\n\t{\n\t\treturn this.pageTitle;\n\t}\n\n\tgetCurrentTitle(): string\n\t{\n\t\tlet title = document.title;\n\t\tif (!Type.isUndefined(window.BXIM))\n\t\t{\n\t\t\ttitle = title.replace(/^\\(\\d+\\) /, ''); // replace a messenger counter.\n\t\t}\n\n\t\treturn title;\n\t}\n\n\tenterFullScreen()\n\t{\n\t\tif (!this.getTopSlider() || this.getFullScreenSlider())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst container = document.body;\n\t\tif (container.requestFullscreen)\n\t\t{\n\t\t\tEvent.bind(document, 'fullscreenchange', this.handleFullScreenChange);\n\t\t\tcontainer.requestFullscreen();\n\t\t}\n\t\telse if (container.webkitRequestFullScreen)\n\t\t{\n\t\t\tEvent.bind(document, 'webkitfullscreenchange', this.handleFullScreenChange);\n\t\t\tcontainer.webkitRequestFullScreen();\n\t\t}\n\t\telse if (container.msRequestFullscreen)\n\t\t{\n\t\t\tEvent.bind(document, 'MSFullscreenChange', this.handleFullScreenChange);\n\t\t\tcontainer.msRequestFullscreen();\n\t\t}\n\t\telse if (container.mozRequestFullScreen)\n\t\t{\n\t\t\tEvent.bind(document, 'mozfullscreenchange', this.handleFullScreenChange);\n\t\t\tcontainer.mozRequestFullScreen();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconsole.log('Slider: Full Screen mode is not supported.');\n\t\t}\n\t}\n\n\texitFullScreen()\n\t{\n\t\tif (!this.getFullScreenSlider())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (document.exitFullscreen)\n\t\t{\n\t\t\tdocument.exitFullscreen();\n\t\t}\n\t\telse if (document.webkitExitFullscreen)\n\t\t{\n\t\t\tdocument.webkitExitFullscreen();\n\t\t}\n\t\telse if (document.msExitFullscreen)\n\t\t{\n\t\t\tdocument.msExitFullscreen();\n\t\t}\n\t\telse if (document.mozCancelFullScreen)\n\t\t{\n\t\t\tdocument.mozCancelFullScreen();\n\t\t}\n\t}\n\n\tgetFullScreenElement(): HTMLElement\n\t{\n\t\treturn (\n\t\t\tdocument.fullscreenElement\n\t\t\t|| document.webkitFullscreenElement\n\t\t\t|| document.mozFullScreenElement\n\t\t\t|| document.msFullscreenElement\n\t\t\t|| null\n\t\t);\n\t}\n\n\tgetFullScreenSlider(): Slider | null\n\t{\n\t\treturn this.fullScreenSlider;\n\t}\n\n\thandleFullScreenChange(event): void\n\t{\n\t\tif (this.getFullScreenElement())\n\t\t{\n\t\t\tthis.fullScreenSlider = this.getTopSlider();\n\t\t\tDom.addClass(this.fullScreenSlider.getOverlay(), 'side-panel-fullscreen');\n\n\t\t\tthis.fullScreenSlider.fireEvent('onFullScreenEnter');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.getFullScreenSlider())\n\t\t\t{\n\t\t\t\tDom.removeClass(this.getFullScreenSlider().getOverlay(), 'side-panel-fullscreen');\n\t\t\t\tthis.fullScreenSlider.fireEvent('onFullScreenExit');\n\t\t\t\tthis.fullScreenSlider = null;\n\t\t\t}\n\n\t\t\tEvent.unbind(document, event.type, this.handleFullScreenChange);\n\t\t\twindow.scrollTo(0, this.pageScrollTop);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.adjustLayout();\n\t\t\t\tconst resizeEvent = document.createEvent('Event');\n\t\t\t\tresizeEvent.initEvent('resize', true, true);\n\t\t\t\twindow.dispatchEvent(resizeEvent);\n\t\t\t}, 1000);\n\t\t}\n\t}\n\n\tpostMessage(source: string | Window | Slider, eventId: string, data: JsonObject): void\n\t{\n\t\tconst sender = this.getSliderFromSource(source);\n\t\tif (!sender)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet previousSlider: Slider = null;\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tif (slider === sender)\n\t\t\t{\n\t\t\t\tpreviousSlider = openSliders[i - 1] || null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tconst sliderWindow = previousSlider ? previousSlider.getWindow() : window;\n\t\tsliderWindow.BX.onCustomEvent('Bitrix24.Slider:onMessage', [sender, data]); // Compatibility\n\n\t\tconst event = new MessageEvent({\n\t\t\tsender,\n\t\t\tslider: previousSlider || null,\n\t\t\tdata,\n\t\t\teventId,\n\t\t});\n\n\t\tif (previousSlider)\n\t\t{\n\t\t\tpreviousSlider.firePageEvent(event);\n\t\t\tpreviousSlider.fireFrameEvent(event);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tEventEmitter.emit(event.getFullName().toLowerCase(), new BaseEvent({ data: [event], compatData: [event] }));\n\t\t}\n\t}\n\n\tpostMessageAll(source: string | Window | Slider, eventId: string, data: JsonObject): void\n\t{\n\t\tconst sender = this.getSliderFromSource(source);\n\t\tif (!sender)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet event = null;\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tif (slider === sender)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tevent = new MessageEvent({ sender, slider, data, eventId });\n\t\t\tslider.firePageEvent(event);\n\t\t\tslider.fireFrameEvent(event);\n\t\t}\n\n\t\tevent = new MessageEvent({ sender, slider: null, data, eventId });\n\n\t\tEventEmitter.emit(event.getFullName().toLowerCase(), new BaseEvent({ data: [event], compatData: [event] }));\n\t}\n\n\tpostMessageTop(source: string | Window | Slider, eventId: string, data: JsonObject): void\n\t{\n\t\tconst sender = this.getSliderFromSource(source);\n\t\tif (!sender)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst event = new MessageEvent({ sender, slider: null, data, eventId });\n\n\t\tEventEmitter.emit(event.getFullName().toLowerCase(), new BaseEvent({ data: [event], compatData: [event] }));\n\t}\n\n\t#getMinOffset(): number\n\t{\n\t\treturn 63;\n\t}\n\n\t#getMaxOffset(): number\n\t{\n\t\treturn this.#getMinOffset() * 3;\n\t}\n\n\tbindAnchors(parameters: { rules: RuleOptions[] })\n\t{\n\t\tif (!Type.isPlainObject(parameters) || !Type.isArray(parameters.rules) || parameters.rules.length === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.anchorRules.length === 0)\n\t\t{\n\t\t\tthis.registerAnchorListener(window.document);\n\t\t}\n\n\t\tif (!(parameters.rules instanceof Object))\n\t\t{\n\t\t\tconsole.error(\n\t\t\t\t'BX.SitePanel: anchor rules were created in a different context. ' +\n\t\t\t\t'This might be a reason for a memory leak.',\n\t\t\t);\n\n\t\t\tconsole.trace();\n\t\t}\n\n\t\tparameters.rules.forEach((rule) => {\n\t\t\tif (Type.isArray(rule.condition))\n\t\t\t{\n\t\t\t\tfor (let m = 0; m < rule.condition.length; m++)\n\t\t\t\t{\n\t\t\t\t\tif (Type.isString(rule.condition[m]))\n\t\t\t\t\t{\n\t\t\t\t\t\trule.condition[m] = new RegExp(rule.condition[m], 'i');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trule.options = Type.isPlainObject(rule.options) ? rule.options : {};\n\t\t\tif (Type.isStringFilled(rule.loader) && !Type.isStringFilled(rule.options.loader))\n\t\t\t{\n\t\t\t\trule.options.loader = rule.loader;\n\t\t\t\tdelete rule.loader;\n\t\t\t}\n\n\t\t\tthis.anchorRules.push(rule);\n\t\t});\n\t}\n\n\tisAnchorBinding(): boolean\n\t{\n\t\treturn this.anchorBinding;\n\t}\n\n\tenableAnchorBinding(): void\n\t{\n\t\tthis.anchorBinding = true;\n\t}\n\n\tdisableAnchorBinding(): void\n\t{\n\t\tthis.anchorBinding = false;\n\t}\n\n\tregisterAnchorListener(targetDocument)\n\t{\n\t\tEvent.bind(targetDocument, 'click', this.handleAnchorClick, true);\n\t}\n\n\tunregisterAnchorListener(targetDocument)\n\t{\n\t\tEvent.unbind(targetDocument, 'click', this.handleAnchorClick, true);\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleSliderOpenStart(event: SliderEvent)\n\t{\n\t\tif (!event.isActionAllowed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst slider = event.getSlider();\n\t\tif (slider.isDestroyed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.getTopSlider())\n\t\t{\n\t\t\tthis.exitFullScreen();\n\n\t\t\tthis.getTopSlider().hideOverlay();\n\t\t\tslider.setOverlayBackground();\n\n\t\t\tconst sameWidth = (\n\t\t\t\tthis.getTopSlider().getOffset() === slider.getOffset()\n\t\t\t\t&& this.getTopSlider().getWidth() === slider.getWidth()\n\t\t\t\t&& this.getTopSlider().getCustomLeftBoundary() === slider.getCustomLeftBoundary()\n\t\t\t);\n\n\t\t\tif (!sameWidth)\n\t\t\t{\n\t\t\t\tthis.getTopSlider().showShadow();\n\t\t\t}\n\n\t\t\tthis.getTopSlider().hideCloseBtn();\n\t\t\tthis.getTopSlider().hideExtraLabels();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tslider.setOverlayAnimation(true);\n\t\t}\n\n\t\tthis.#addOpenSlider(slider);\n\n\t\t// this.getOpenSliders().forEach((currentSlider: Slider, index: number, openSliders: Slider[]) => {\n\t\t// \tcurrentSlider.getLabel().moveAt(openSliders.length - index - 1); // move down\n\t\t// });\n\n\t\tthis.losePageFocus();\n\n\t\tif (!this.opened)\n\t\t{\n\t\t\tthis.pageUrl = this.getCurrentUrl();\n\t\t\tthis.pageTitle = this.getCurrentTitle();\n\t\t}\n\n\t\tthis.opened = true;\n\n\t\tthis.#resetLastOpenSlider();\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleSliderOpenComplete(event: SliderEvent)\n\t{\n\t\tthis.setBrowserHistory(event.getSlider());\n\t\tthis.updateBrowserTitle();\n\t\tevent.getSlider().setAnimation('sliding');\n\n\t\tconst openSliders = this.getOpenSliders();\n\t\tconst topSlider = event.getSlider();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tif (topSlider === slider)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (topSlider.getContainer().offsetLeft <= slider.getContainer().offsetLeft)\n\t\t\t{\n\t\t\t\tDom.addClass(slider.getOverlay(), '--invisible');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleSliderCloseStart(event: SliderEvent)\n\t{\n\t\tif (!event.isActionAllowed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.getSlider() && event.getSlider().isDestroyed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst previousSlider = this.getPreviousSlider();\n\t\tconst topSlider = this.getTopSlider();\n\n\t\tthis.exitFullScreen();\n\n\t\t// this.getOpenSliders().forEach((slider, index, openSliders) => {\n\t\t// \tslider.getLabel().moveAt(openSliders.length - index - 2); // move up\n\t\t// });\n\n\t\tlet visibleSlider = null;\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tif (event.getSlider() === slider)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (visibleSlider === null || slider.getContainer().offsetLeft < visibleSlider.getContainer().offsetLeft)\n\t\t\t{\n\t\t\t\tDom.removeClass(slider.getOverlay(), '--invisible');\n\t\t\t\tvisibleSlider = slider;\n\t\t\t}\n\t\t}\n\n\t\tif (previousSlider)\n\t\t{\n\t\t\tpreviousSlider.unhideOverlay();\n\t\t\tpreviousSlider.hideShadow();\n\t\t\tpreviousSlider.showCloseBtn();\n\t\t\tpreviousSlider.showExtraLabels();\n\n\t\t\tif (topSlider)\n\t\t\t{\n\t\t\t\ttopSlider.hideOverlay();\n\t\t\t\ttopSlider.hideShadow();\n\t\t\t}\n\t\t}\n\t}\n\n\thandleSliderMaximizeStart(event)\n\t{\n\t\tif (!event.isActionAllowed() || this.getToolbar() === null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst slider = event.getSlider();\n\t\tif (slider && slider.isDestroyed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst { entityType, entityId } = slider.getMinimizeOptions() || {};\n\t\tconst item = this.getToolbar().getItem(entityType, entityId);\n\n\t\tthis.getToolbar().request('maximize', item);\n\n\t\tconst origin = this.#getItemOrigin(slider, item);\n\t\tslider.setAnimation('scale', { origin });\n\t}\n\n\thandleSliderMinimizeStart(event)\n\t{\n\t\tif (!event.isActionAllowed() || this.getToolbar() === null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst slider = event.getSlider();\n\t\tif (slider && slider.isDestroyed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.getToolbar().isShown())\n\t\t{\n\t\t\tthis.getToolbar().show();\n\t\t}\n\n\t\tlet title = slider.getTitle();\n\t\tif (!title)\n\t\t{\n\t\t\ttitle = slider.getFrameWindow() ? slider.getFrameWindow().document.title : null;\n\t\t}\n\n\t\tthis.getToolbar().expand(true);\n\n\t\tconst minimizeOptions = this.getMinimizeOptions(slider.getUrl());\n\t\tconst { entityType, entityId, url } = minimizeOptions || slider.getMinimizeOptions() || {};\n\n\t\tconst item = this.getToolbar().minimizeItem({\n\t\t\ttitle,\n\t\t\turl: Type.isStringFilled(url) ? url : slider.getUrl(),\n\t\t\tentityType,\n\t\t\tentityId,\n\t\t});\n\n\t\tconst origin = this.#getItemOrigin(slider, item);\n\t\tslider.setAnimation('scale', { origin });\n\t}\n\n\t#getItemOrigin(slider: Slider, item: ToolbarItem): void\n\t{\n\t\tif (item && item.getContainer().offsetWidth > 0)\n\t\t{\n\t\t\tconst rect = item.getContainer().getBoundingClientRect();\n\t\t\tconst offset = slider.getContainer().getBoundingClientRect().left;\n\t\t\tconst left = rect.left - offset + rect.width / 2;\n\n\t\t\treturn `${left}px ${rect.top}px`;\n\t\t}\n\n\t\treturn '50% 100%';\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleSliderCloseComplete(event: SliderEvent)\n\t{\n\t\tconst slider = event.getSlider();\n\t\tif (slider === this.getTopSlider())\n\t\t{\n\t\t\tthis.#setLastOpenSlider(slider);\n\t\t}\n\n\t\tevent.getSlider().setAnimation('sliding');\n\n\t\tthis.cleanUpClosedSlider(slider);\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleSliderDestroy(event: SliderEvent)\n\t{\n\t\tconst slider = event.getSlider();\n\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onOpenStart', this.handleSliderOpenStart);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onBeforeOpenComplete', this.handleSliderOpenComplete);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onMaximizeStart', this.handleSliderMaximizeStart);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onCloseStart', this.handleSliderCloseStart);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onBeforeCloseComplete', this.handleSliderCloseComplete);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onMinimizeStart', this.handleSliderMinimizeStart);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onLoad', this.handleSliderLoad);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onDestroy', this.handleSliderDestroy);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onEscapePress', this.handleEscapePress);\n\n\t\tconst frameWindow = event.getSlider().getFrameWindow();\n\t\tif (frameWindow && !event.getSlider().allowCrossOrigin)\n\t\t{\n\t\t\tthis.unregisterAnchorListener(frameWindow.document);\n\t\t}\n\n\t\tif (slider === this.getLastOpenSlider())\n\t\t{\n\t\t\tthis.lastOpenSlider = null;\n\t\t}\n\n\t\tthis.cleanUpClosedSlider(slider);\n\t}\n\n\thandleEscapePress(event)\n\t{\n\t\tif (this.isOnTop() && this.getTopSlider() && this.getTopSlider().canCloseByEsc())\n\t\t{\n\t\t\tthis.getTopSlider().close();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcleanUpClosedSlider(slider: Slider)\n\t{\n\t\tthis.#removeOpenSlider(slider);\n\n\t\tslider.unhideOverlay();\n\t\tslider.hideShadow();\n\n\t\t// this.getOpenSliders().forEach((slider, index, openSliders) => {\n\t\t// \tslider.getLabel().moveAt(openSliders.length - index - 1); //update position\n\t\t// });\n\n\t\tif (this.getTopSlider())\n\t\t{\n\t\t\tthis.getTopSlider().unhideOverlay();\n\t\t\tthis.getTopSlider().hideShadow();\n\t\t\tthis.getTopSlider().showCloseBtn();\n\t\t\tthis.getTopSlider().showExtraLabels();\n\t\t\tthis.getTopSlider().focus();\n\t\t}\n\t\telse\n\t\t{\n\t\t\twindow.focus();\n\t\t}\n\n\t\tif (!this.getOpenSlidersCount())\n\t\t{\n\t\t\tthis.resetHacks(slider);\n\t\t\tthis.opened = false;\n\t\t}\n\n\t\tthis.resetBrowserHistory();\n\t\tthis.updateBrowserTitle();\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleSliderLoad(event: SliderEvent)\n\t{\n\t\tconst frameWindow = event.getSlider().getFrameWindow();\n\t\tif (frameWindow)\n\t\t{\n\t\t\tthis.registerAnchorListener(frameWindow.document);\n\t\t}\n\n\t\tthis.setBrowserHistory(event.getSlider());\n\t\tthis.updateBrowserTitle();\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandlePostMessageCompatible(source: string | Window | Slider, data: JsonObject)\n\t{\n\t\tthis.postMessage(source, '', data);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetSliderFromSource(source: string | Window | Slider)\n\t{\n\t\tif (source instanceof Slider)\n\t\t{\n\t\t\treturn source;\n\t\t}\n\n\t\tif (Type.isStringFilled(source))\n\t\t{\n\t\t\treturn this.getSlider(source);\n\t\t}\n\n\t\tif (source !== null && source === source.window && window !== source)\n\t\t{\n\t\t\treturn this.getSliderByWindow(source);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tapplyHacks(slider: Slider): boolean\n\t{\n\t\tif (this.hacksApplied)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (slider)\n\t\t{\n\t\t\tslider.applyHacks();\n\t\t}\n\n\t\tthis.disablePageScrollbar();\n\t\tthis.bindEvents();\n\n\t\tif (slider)\n\t\t{\n\t\t\tslider.applyPostHacks();\n\t\t}\n\n\t\tthis.hacksApplied = true;\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tresetHacks(slider: Slider): boolean\n\t{\n\t\tif (!this.hacksApplied)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (slider)\n\t\t{\n\t\t\tslider.resetPostHacks();\n\t\t}\n\n\t\tthis.enablePageScrollbar();\n\t\tthis.unbindEvents();\n\n\t\tif (slider)\n\t\t{\n\t\t\tslider.resetHacks();\n\t\t}\n\n\t\tthis.hacksApplied = false;\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tbindEvents(): boolean\n\t{\n\t\tEvent.bind(document, 'keydown', this.handleDocumentKeyDown);\n\t\tEvent.bind(window, 'resize', this.handleWindowResize);\n\t\tEvent.bind(window, 'scroll', this.handleWindowScroll); // Live Comments can change scrollTop\n\n\t\tif (Browser.isMobile())\n\t\t{\n\t\t\tEvent.bind(document.body, 'touchmove', this.handleTouchMove);\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tunbindEvents()\n\t{\n\t\tEvent.unbind(document, 'keydown', this.handleDocumentKeyDown);\n\t\tEvent.unbind(window, 'resize', this.handleWindowResize);\n\t\tEvent.unbind(window, 'scroll', this.handleWindowScroll);\n\n\t\tif (Browser.isMobile())\n\t\t{\n\t\t\tEvent.unbind(document.body, 'touchmove', this.handleTouchMove);\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tdisablePageScrollbar(): void\n\t{\n\t\tconst scrollWidth = window.innerWidth - document.documentElement.clientWidth;\n\t\tdocument.body.style.paddingRight = scrollWidth + 'px';\n\t\tDom.style(document.body, '--scroll-shift-width', `${scrollWidth}px`);\n\t\tDom.addClass(document.body, 'side-panel-disable-scrollbar');\n\t\tthis.pageScrollTop = window.pageYOffset || document.documentElement.scrollTop;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tenablePageScrollbar()\n\t{\n\t\tdocument.body.style.removeProperty('padding-right');\n\t\tDom.style(document.body, '--scroll-shift-width', null);\n\t\tDom.removeClass(document.body, 'side-panel-disable-scrollbar');\n\t}\n\n\t/**\n\t * @private\n\t */\n\tlosePageFocus()\n\t{\n\t\tif (Type.isDomNode(document.activeElement))\n\t\t{\n\t\t\tdocument.activeElement.blur();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param {Event} event\n\t */\n\thandleDocumentKeyDown(event: KeyboardEvent)\n\t{\n\t\tif (event.keyCode !== 27)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault(); // otherwise an iframe loading can be cancelled by a browser\n\n\t\tif (this.isOnTop() && this.getTopSlider() && this.getTopSlider().canCloseByEsc())\n\t\t{\n\t\t\tthis.getTopSlider().close();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleWindowResize()\n\t{\n\t\tthis.adjustLayout();\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleWindowScroll()\n\t{\n\t\twindow.scrollTo(0, this.pageScrollTop);\n\t\tthis.adjustLayout();\n\t}\n\n\t/**\n\t * @private\n\t * @param {Event} event\n\t */\n\thandleTouchMove(event)\n\t{\n\t\tevent.preventDefault();\n\t}\n\n\t/**\n\t * @private\n\t */\n\tisOnTop(): boolean\n\t{\n\t\t// Photo Slider or something else can cover Side Panel.\n\t\tconst centerX = document.documentElement.clientWidth / 2;\n\t\tconst centerY = document.documentElement.clientHeight / 2;\n\t\tconst element = document.elementFromPoint(centerX, centerY);\n\n\t\treturn Dom.hasClass(element, 'side-panel') || element.closest('.side-panel') !== null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\textractLinkFromEvent(event: MouseEvent): LinkOptions | null\n\t{\n\t\tconst target: HTMLElement = event.target;\n\n\t\tif (event.which !== 1 || !Type.isDomNode(target) || event.ctrlKey || event.metaKey)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tlet a = target;\n\t\tif (target.nodeName !== 'A' && Type.isElementNode(target))\n\t\t{\n\t\t\ta = target.closest('a');\n\t\t}\n\n\t\tif (!Type.isDomNode(a))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\t// do not use a.href here, the code will fail on links like <a href=\"#SG13\"></a>\n\t\tconst href = a.getAttribute('href');\n\t\tif (href)\n\t\t{\n\t\t\treturn {\n\t\t\t\turl: href,\n\t\t\t\tanchor: a,\n\t\t\t\ttarget: a.getAttribute('target'),\n\t\t\t};\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * @private\n\t * @param {MouseEvent} event\n\t */\n\thandleAnchorClick(event)\n\t{\n\t\tif (!this.isAnchorBinding())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst link = this.extractLinkFromEvent(event);\n\n\t\tif (!link || Dom.attr(link.anchor, 'data-slider-ignore-autobinding') !== null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Dom.attr(event.target, 'data-slider-ignore-autobinding') !== null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst rule = this.getUrlRule(link.url, link);\n\n\t\tif (!this.isValidLink(rule, link))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Type.isFunction(rule.handler))\n\t\t{\n\t\t\trule.handler(event, link);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tthis.open(link.url, rule.options);\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t * @param {string} url\n\t */\n\temulateAnchorClick(url)\n\t{\n\t\tconst link = {\n\t\t\turl,\n\t\t\tanchor: null,\n\t\t\ttarget: null,\n\t\t};\n\n\t\tconst rule = this.getUrlRule(url, link);\n\n\t\tif (!this.isValidLink(rule, link))\n\t\t{\n\t\t\tBX.reload(url);\n\t\t}\n\t\telse if (Type.isFunction(rule.handler))\n\t\t{\n\t\t\trule.handler(\n\t\t\t\tnew Event(\n\t\t\t\t\t'slider',\n\t\t\t\t\t{\n\t\t\t\t\t\tbubbles: false,\n\t\t\t\t\t\tcancelable: true,\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t\tlink,\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.open(link.url, rule.options);\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetUrlRule(href: string, link: LinkOptions): RuleOptions | null\n\t{\n\t\tif (!Type.isStringFilled(href))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!Type.isPlainObject(link))\n\t\t{\n\t\t\tconst a = document.createElement('a');\n\t\t\ta.href = href;\n\n\t\t\tlink = { url: href, anchor: a, target: '' };\n\t\t}\n\n\t\tfor (let k = 0; k < this.anchorRules.length; k++)\n\t\t{\n\t\t\tconst rule = this.anchorRules[k];\n\n\t\t\tif (!Type.isArray(rule.condition))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor (let m = 0; m < rule.condition.length; m++)\n\t\t\t{\n\t\t\t\tconst matches = href.match(rule.condition[m]);\n\t\t\t\tif (matches && !this.hasStopParams(href, rule.stopParameters))\n\t\t\t\t{\n\t\t\t\t\tlink.matches = matches;\n\t\t\t\t\tconst minimizeOptions = Type.isFunction(rule.minimizeOptions) ? rule.minimizeOptions(link) : null;\n\t\t\t\t\tif (Type.isPlainObject(minimizeOptions))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (Type.isPlainObject(rule.options))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trule.options.minimizeOptions = minimizeOptions;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trule.options = { minimizeOptions };\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn rule;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tisValidLink(rule: RuleOptions, link: LinkOptions): boolean\n\t{\n\t\tif (!rule)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (rule.allowCrossDomain !== true && Ajax.isCrossDomain(link.url))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (rule.mobileFriendly !== true && Browser.isMobile())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !Type.isFunction(rule.validate) || rule.validate(link);\n\t}\n\n\t/**\n\t * @private\n\t * @param {BX.SidePanel.Slider} slider\n\t */\n\tsetBrowserHistory(slider)\n\t{\n\t\tif (!(slider instanceof Slider))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (slider.canChangeHistory() && slider.isOpen() && slider.isLoaded())\n\t\t{\n\t\t\twindow.history.replaceState({}, '', slider.getUrl());\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tresetBrowserHistory()\n\t{\n\t\tlet topSlider = null;\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tif (slider.canChangeHistory() && slider.isOpen() && slider.isLoaded())\n\t\t\t{\n\t\t\t\ttopSlider = slider;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tconst url = topSlider ? topSlider.getUrl() : this.getPageUrl();\n\t\tif (url)\n\t\t{\n\t\t\twindow.history.replaceState({}, '', url);\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t */\n\tupdateBrowserTitle()\n\t{\n\t\tlet title = null;\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\ttitle = this.getBrowserTitle(openSliders[i]);\n\t\t\tif (Type.isStringFilled(title))\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isStringFilled(title))\n\t\t{\n\t\t\tdocument.title = title;\n\t\t\tthis.titleChanged = true;\n\t\t}\n\t\telse if (this.titleChanged)\n\t\t{\n\t\t\tdocument.title = this.getPageTitle();\n\t\t\tthis.titleChanged = false;\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetBrowserTitle(slider: Slider): string | null\n\t{\n\t\tif (!slider || !slider.canChangeTitle() || !slider.isOpen() || !slider.isLoaded())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tlet title = slider.getTitle();\n\t\tif (!title && !slider.isSelfContained())\n\t\t{\n\t\t\ttitle = slider.getFrameWindow() ? slider.getFrameWindow().document.title : null;\n\t\t}\n\n\t\treturn Type.isStringFilled(title) ? title : null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\thasStopParams(url: string, params: string[]): boolean\n\t{\n\t\tif (!params || !Type.isArray(params) || !Type.isStringFilled(url))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst questionPos = url.indexOf('?');\n\t\tif (questionPos === -1)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst query = url.slice(Math.max(0, questionPos));\n\t\tfor (const param of params)\n\t\t{\n\t\t\tif (new RegExp(`[?&]${param}=`, 'i').test(query))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * @deprecated use getLastOpenSlider method\n\t */\n\tgetLastOpenPage(): Slider | null\n\t{\n\t\treturn this.getLastOpenSlider();\n\t}\n\n\t/**\n\t * @deprecated use getTopSlider method\n\t */\n\tgetCurrentPage(): Slider | null\n\t{\n\t\treturn this.getTopSlider();\n\t}\n}\n","import { Reflection } from 'main.core';\n\nimport { Slider } from './slider';\nimport { SliderManager } from './slider-manager';\nimport { MessageEvent } from './message-event';\nimport { Toolbar } from './toolbar';\nimport { ToolbarItem } from './toolbar-item';\nimport { Label } from './label';\nimport { Dictionary } from './dictionary';\nimport { SliderEvent } from './slider-event';\nimport { getInstance } from './get-instance';\n\nimport { type LabelOptions} from './types/label-options';\nimport { type LinkOptions } from './types/link-options';\nimport { type RuleOptions } from './types/rule-options';\nimport { type MinimizeOptions } from './types/minimize-options';\nimport { type SliderOptions } from './types/slider-options';\nimport { type ToolbarOptions } from './types/toolbar-options';\nimport { type ToolbarItemOptions } from './types/toolbar-item-options';\nimport { type OuterBoundary } from './types/outer-boundary';\n\nimport './css/sidepanel.css';\n\nconst SidePanel = {};\nObject.defineProperty(SidePanel, 'Instance', {\n\tenumerable: false,\n\tget: getInstance,\n});\n\nconst namespace = Reflection.namespace('BX.SidePanel');\n\nObject.defineProperty(namespace, 'Instance', {\n\tenumerable: false,\n\tget: getInstance,\n});\n\nexport {\n\tSidePanel,\n\tSlider,\n\tSliderManager,\n\tSliderManager as Manager,\n\tSliderEvent,\n\tSliderEvent as Event,\n\tMessageEvent,\n\tToolbar,\n\tToolbarItem,\n\tLabel,\n\tDictionary,\n};\n\nexport type {\n\tLabelOptions,\n\tLinkOptions,\n\tRuleOptions,\n\tMinimizeOptions,\n\tSliderOptions,\n\tToolbarOptions,\n\tToolbarItemOptions,\n\tOuterBoundary,\n};\n"],"names":["Dictionary","data","Type","isPlainObject","TypeError","key","value","isStringFilled","Error","Label","slider","labelOptions","Cache","MemoryCache","options","hidden","isBoolean","setColor","color","setBgColor","bgColor","setText","text","setClassName","className","setIconClass","iconClass","setIconTitle","iconTitle","setOnclick","onclick","cache","remember","classes","getClassName","push","isHidden","Dom","create","props","join","children","getIconBox","getTextContainer","events","click","bind","overlayRect","getSlider","getOverlay","getBoundingClientRect","containerRect","getContainer","maxWidth","left","getMinLeftBoundary","hideText","showText","style","constructor","MIN_LEFT_OFFSET","getIconContainer","getIconClass","removeClass","addClass","hasClass","opacity","isArray","alfa","matches","match","hex","length","replaceAll","isNumber","alfaHex","Math","round","toString","slice","toUpperCase","getColor","textContent","attr","fn","isFunction","position","getLabelsContainer","MIN_TOP_OFFSET","INTERVAL_TOP_OFFSET","event","stopPropagation","getOnclick","SliderEvent","action","name","Slider","getEventFullName","getName","MessageEvent","eventOptions","sender","setName","setSlider","eventId","url","sliderOptions","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","contentCallback","contentCallbackInvoved","contentClassName","containerClassName","overlayClassName","refineUrl","offset","hideControls","width","cacheable","autoFocus","printable","allowChangeHistory","allowChangeTitle","allowCrossOrigin","customLeftBoundary","customRightBoundary","setCustomLeftBoundary","setCustomRightBoundary","title","setTitle","iframe","iframeSrc","iframeId","requestMethod","toLowerCase","requestParams","opened","destroyed","loaded","loadedCnt","minimizing","maximizing","handleFrameKeyDown","handleFrameFocus","handleFrameUnload","handlePopupInit","handleCrossOriginWindowMessage","layout","overlay","container","loader","content","isElementNode","typeLoader","animation","animationDuration","overlayBgColor","test","overlayOpacity","min","max","overlayBgCallback","includes","startPosition","outerBoundary","overlayAnimation","animationName","animationOptions","minimizeOptions","entityType","entityId","setToolbarOnOpen","hideToolbarOnOpen","setDesignSystemContext","designSystemContext","setAutoOffset","autoOffset","label","Loc","getMessage","close","minimizeLabel","newWindowLabel","copyLinkLabel","printLabel","isSelfContained","isLoaded","minimize","canChangeHistory","newWindowUrl","getUrl","Object","assign","document","createElement","target","href","BX","clipboard","bindCopyClick","link","isPrintable","handlePrintBtnClick","onOpen","compatibleEvents","onLoad","eventName","entries","EventEmitter","subscribe","compatMode","isOpen","canOpen","isDestroyed","fireEvent","createLayout","adjustLayout","ZIndexManager","bringToFront","animateOpening","immediately","callback","canClose","stop","Browser","isMobile","completeAnimation","easing","duration","start","finish","step","state","animateStep","complete","origin","animate","success","open","type","flag","context","isString","getWindow","focus","zIndex","getZIndexComponent","getZIndex","Text","getRandom","contentWindow","window","getTitle","showPrintBtn","hidePrintBtn","getLoader","createLoader","display","getLabel","show","hide","getText","showIcon","lightenIcon","hideIcon","darkenIcon","getExtraLabelsContainer","removeContentClass","getContentContainer","removeContainerClass","removeOverlayClass","getCustomLeftBoundary","getLeftBoundary","windowWidth","innerWidth","documentElement","clientWidth","getOffset","calculateLeftBoundary","boundary","getCustomRightBoundary","pageXOffset","getRightBoundary","firePageEvent","fireFrameEvent","frameWindow","getFrameWindow","Event","unbind","unsubscribe","unregister","remove","closeBtn","unsubscribeAll","showLoader","setContent","location","reload","scrollTop","pageYOffset","windowHeight","innerHeight","clientHeight","topBoundary","getTopBoundary","isTopBoundaryVisible","height","leftBoundary","getLeftBoundaryOffset","rightBoundary","calculateRightBoundary","top","right","bottom","getWidth","parentNode","append","body","getFrame","setFrameSrc","register","attrs","referrerpolicy","src","frameborder","getFrameId","id","load","handleFrameLoad","overlayClass","mousedown","handleOverlayClick","parseInt","padStart","Tag","render","getDesignSystemContext","contentClass","clean","promise","isPromiseReturned","prototype","call","Promise","resolve","then","result","html","Runtime","removeLoader","catch","reason","innerHTML","isDomNode","Uri","addParam","IFRAME","IFRAME_TYPE","isPostMethod","form","method","util","addObjectToForm","getRequestParams","submit","listenIframeLoading","sliderLoader","oldLoaders","createHTMLLoader","loaderExists","createOldLoader","charAt","createSvgLoader","moduleId","svgName","svg","createDefaultLoader","backgroundImage","i","styleSheets","rules","cssRules","rule","selectorText","scale","translateX","translateY","getOverlayAnimation","transform","isFocusable","getCloseBtn","isCacheable","destroy","sliderEvent","getEvent","emit","getFullName","BaseEvent","compatData","onCustomEvent","canAction","pageEvent","frameEvent","isActionAllowed","frameUrl","URL","eventUrl","message","undefined","iframeLocation","e","closeLoader","console","warn","paddingBottom","iframeUrl","pathname","search","hash","injectPrintStyles","setInterval","clearInterval","readyState","keyCode","framePopupManager","Main","PopupManager","popups","getPopups","popup","isShown","centerX","centerY","element","elementFromPoint","closest","getCompatData","bindElement","params","targetContainer","contains","preventDefault","frame","frameDoc","write","headTags","links","head","querySelectorAll","outerHTML","print","setTimeout","frameDocument","bodyClass","classList","bodyStyle","styleSheet","cssText","appendChild","createTextNode","removeParam","mode","states","progress","intensity","end","calculateOuterBoundary","merge","getOuterBoundary","instance","getInstance","topWindow","PageObject","getRootWindow","SidePanel","Instance","SliderManager","ToolbarItem","itemOptions","setEventNamespace","entityName","refs","rendered","setUrl","setEntityType","setEntityId","getTitleContainer","handleClick","handleMouseEnter","handleMouseLeave","handleRemoveBtnClick","encodeURI","encode","node","prepend","insertBefore","insertAfter","targetNode","rect","targetNodeWidth","popupWidth","scrollWidth","hint","bindOptions","forceBindPosition","forceTop","getEntityName","darkMode","fixed","offsetTop","onShow","getTarget","offsetLeft","angleShift","Popup","getOption","setAngle","setOffset","adjustPosition","getPopupById","ctrlKey","metaKey","maximize","showTooltip","hideTooltip","getEntityType","getEntityId","Toolbar","toolbarOptions","items","lsKey","initialPosition","shiftedPosition","collapsed","muted","shifted","maxVisibleItems","addItems","item","restoreItemFromLocalStorage","getItem","clearLocalStorage","minimizeItem","canShowOnTop","unmute","mute","setPosition","sliders","getOpenSliders","unshift","shift","prop","unbindAll","requestAnimationFrame","bindOnce","request","expand","collapse","itemsOptions","isArrayFilled","forEach","addItem","createItem","redraw","getMinimizeOptions","setEntityName","handleItemRemove","itemExists","prependItem","saveItemToLocalStorage","response","status","removeItem","ttl","Date","now","localStorage","setItem","JSON","stringify","parse","additional","Ajax","runAction","json","toolbar","getContext","toJSON","itemId","currentTarget","dataset","menuItemId","itemToRemove","getItemById","menu","getMenu","removeMenuItem","invisibleItemsCount","getItems","reduce","count","isRendered","getPopupWindow","filter","restored","getItemsCount","visibleItemsCount","previousItem","nextItem","appendTo","getItemsContainer","find","getId","handleToggleClick","alwaysOnTop","toggleMuteness","debounce","forceCollapsed","onSliderClose","isMuted","toggleShift","isShifted","isCollapsed","throttle","getMoreButton","handleMoreBtnClick","map","createMenuItemText","delimiter","removeAll","MenuManager","maxHeight","getPopupContainer","offsetWidth","startsWith","Reflection","getClass","UI","Viewer","sliderId","shouldHideToolbarOnOpen","stack","getStack","components","getComponents","component","getMenuById","handleMenuItemRemove","toggle","sliderClassName","sliderDefaultOptions","sliderPriorityOptions","anchorRules","anchorBinding","openSliders","lastOpenSlider","hacksApplied","pageUrl","getCurrentUrl","pageTitle","getCurrentTitle","titleChanged","fullScreenSlider","handleAnchorClick","handleDocumentKeyDown","handleWindowResize","handleWindowScroll","handleTouchMove","handleSliderOpenStart","handleSliderOpenComplete","handleSliderMaximizeStart","handleSliderCloseStart","handleSliderCloseComplete","handleSliderMinimizeStart","handleSliderLoad","handleSliderDestroy","handleEscapePress","handleFullScreenChange","closeAll","unhide","postMessage","postMessageAll","postMessageTop","handlePostMessageCompatible","tryApplyHacks","getUrlRule","ruleOptions","cb","applyHacks","resetHacks","topSlider","getTopSlider","sliderUrl","sliderToDestroy","getLastOpenSlider","currentSlider","previousSlider","isUndefined","BXIM","replace","getFullScreenSlider","requestFullscreen","webkitRequestFullScreen","msRequestFullscreen","mozRequestFullScreen","log","exitFullscreen","webkitExitFullscreen","msExitFullscreen","mozCancelFullScreen","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","getFullScreenElement","scrollTo","pageScrollTop","resizeEvent","createEvent","initEvent","dispatchEvent","source","getSliderFromSource","sliderWindow","parameters","registerAnchorListener","error","trace","condition","m","RegExp","targetDocument","exitFullScreen","hideOverlay","setOverlayBackground","sameWidth","showShadow","hideCloseBtn","hideExtraLabels","setOverlayAnimation","_classPrivateMethodGet","losePageFocus","setBrowserHistory","updateBrowserTitle","setAnimation","getPreviousSlider","visibleSlider","unhideOverlay","hideShadow","showCloseBtn","showExtraLabels","getToolbar","cleanUpClosedSlider","unregisterAnchorListener","isOnTop","canCloseByEsc","getOpenSlidersCount","resetBrowserHistory","getSliderByWindow","disablePageScrollbar","bindEvents","applyPostHacks","resetPostHacks","enablePageScrollbar","unbindEvents","paddingRight","removeProperty","activeElement","blur","which","a","nodeName","getAttribute","anchor","isAnchorBinding","extractLinkFromEvent","isValidLink","handler","bubbles","cancelable","k","hasStopParams","stopParameters","allowCrossDomain","isCrossDomain","mobileFriendly","validate","history","replaceState","getPageUrl","getBrowserTitle","getPageTitle","canChangeTitle","questionPos","indexOf","query","param","defaultOptions","priorityOptions","sliderClass","getSliderDefaultOptions","getSliderPriorityOptions","SliderClass","getSliderClass","shouldUseAutoOffset","lastOffset","openSlider","splice","defineProperty","enumerable","get","namespace"],"mappings":"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"}