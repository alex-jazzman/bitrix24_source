{"version":3,"file":"side-panel.bundle.js","sources":["../src/dictionary.js","../src/label.js","../src/slider-event.js","../src/message-event.js","../src/slider.js","../src/get-instance.js","../src/toolbar-item.js","../src/toolbar.js","../src/slider-manager.js","../src/index.js"],"sourcesContent":["import { Type, type JsonObject, type JsonValue } from 'main.core';\n\nexport class Dictionary\n{\n\t#data: JsonObject = null;\n\n\tconstructor(data: JsonObject)\n\t{\n\t\tif (!Type.isPlainObject(data))\n\t\t{\n\t\t\tthrow new TypeError('The argument must be a plain object.');\n\t\t}\n\n\t\tthis.#data = data;\n\t}\n\n\tset(key: string, value: JsonValue): void\n\t{\n\t\tif (!Type.isStringFilled(key))\n\t\t{\n\t\t\tthrow new Error('The \\'key\\' must be a string.');\n\t\t}\n\n\t\tthis.#data[key] = value;\n\t}\n\n\tget(key: string): JsonValue | undefined\n\t{\n\t\treturn this.#data[key];\n\t}\n\n\tdelete(key: string): void\n\t{\n\t\tdelete this.#data[key];\n\t}\n\n\thas(key: string): boolean\n\t{\n\t\treturn key in this.#data;\n\t}\n\n\tclear(): void\n\t{\n\t\tthis.#data = {};\n\t}\n\n\tentries(): JsonObject\n\t{\n\t\treturn this.#data;\n\t}\n}\n","import { Type, Cache, Dom } from 'main.core';\n\nimport { type Slider } from './slider';\nimport { type LabelOptions } from './types/label-options';\n\nexport class Label\n{\n\tstatic MIN_LEFT_OFFSET = 25;\n\tstatic MIN_TOP_OFFSET = 17;\n\tstatic INTERVAL_TOP_OFFSET = 50;\n\n\tslider: Slider = null;\n\tcolor = null;\n\tbgColor = null;\n\ticonClass = '';\n\ticonTitle = '';\n\tonclick = null;\n\ttext = null;\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(slider: Slider, labelOptions: LabelOptions)\n\t{\n\t\tthis.slider = slider;\n\t\tconst options = Type.isPlainObject(labelOptions) ? labelOptions : {};\n\t\tthis.setBgColor(options.bgColor);\n\t\tthis.setColor(options.color);\n\t\tthis.setText(options.text);\n\t\tthis.setIconClass(options.iconClass);\n\t\tthis.setIconTitle(options.iconTitle);\n\t\tthis.setOnclick(options.onclick);\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn this.cache.remember('container', () => {\n\t\t\treturn Dom.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'side-panel-label',\n\t\t\t\t},\n\t\t\t\tchildren: [\n\t\t\t\t\tthis.getIconBox(),\n\t\t\t\t\tthis.getTextContainer(),\n\t\t\t\t],\n\t\t\t\tevents: {\n\t\t\t\t\tclick: this.#handleClick.bind(this),\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tadjustLayout(): void\n\t{\n\t\tconst overlayRect = this.getSlider().getOverlay().getBoundingClientRect();\n\t\tconst containerRect = this.getSlider().getContainer().getBoundingClientRect();\n\t\tconst maxWidth = containerRect.left - overlayRect.left;\n\n\t\tif (maxWidth <= this.getSlider().getMinLeftBoundary())\n\t\t{\n\t\t\tthis.hideText();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showText();\n\t\t}\n\n\t\tDom.style(this.getContainer(), 'max-width', `${maxWidth - this.constructor.MIN_LEFT_OFFSET}px`);\n\t}\n\n\tgetIconBox(): HTMLElement\n\t{\n\t\treturn this.cache.remember('icon-box', () => {\n\t\t\treturn Dom.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'side-panel-label-icon-box',\n\t\t\t\t},\n\t\t\t\tchildren: [\n\t\t\t\t\tthis.getIconContainer(),\n\t\t\t\t],\n\t\t\t});\n\t\t});\n\t}\n\n\tgetIconContainer(): HTMLElement\n\t{\n\t\treturn this.cache.remember('icon-container', () => {\n\t\t\treturn Dom.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: `side-panel-label-icon ${this.getIconClass()}`,\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\t#handleClick(event: MouseEvent): void\n\t{\n\t\tevent.stopPropagation();\n\n\t\tconst fn = this.getOnclick();\n\t\tif (fn)\n\t\t{\n\t\t\tfn(this, this.getSlider());\n\t\t}\n\t}\n\n\tshowIcon(): void\n\t{\n\t\tDom.removeClass(this.getContainer(), 'side-panel-label-icon--hide');\n\t}\n\n\thideIcon(): void\n\t{\n\t\tDom.addClass(this.getContainer(), 'side-panel-label-icon--hide');\n\t}\n\n\tdarkenIcon(): void\n\t{\n\t\tDom.addClass(this.getContainer(), 'side-panel-label-icon--darken');\n\t}\n\n\tlightenIcon(): void\n\t{\n\t\tDom.removeClass(this.getContainer(), 'side-panel-label-icon--darken');\n\t}\n\n\thideText(): void\n\t{\n\t\tDom.addClass(this.getTextContainer(), 'side-panel-label-text-hidden');\n\t}\n\n\tshowText(): void\n\t{\n\t\tDom.removeClass(this.getTextContainer(), 'side-panel-label-text-hidden');\n\t}\n\n\tisTextHidden(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getTextContainer(), 'side-panel-label-text-hidden');\n\t}\n\n\tgetTextContainer(): HTMLElement\n\t{\n\t\treturn this.cache.remember('text-container', () => {\n\t\t\treturn Dom.create('span', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'side-panel-label-text',\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tsetColor(color: string): void\n\t{\n\t\tif (Type.isStringFilled(color))\n\t\t{\n\t\t\tthis.color = color;\n\n\t\t\tDom.style(this.getTextContainer(), 'color', color);\n\t\t}\n\t}\n\n\tgetColor(): string | null\n\t{\n\t\treturn this.color;\n\t}\n\n\tsetBgColor(color: string | [string, number], opacity: number): void\n\t{\n\t\tlet bgColor: string = Type.isArray(color) ? color[0] : color;\n\t\tlet alfa: number = Type.isArray(color) ? color[1] : opacity;\n\n\t\tif (Type.isStringFilled(bgColor))\n\t\t{\n\t\t\tconst matches = bgColor.match(/^#([\\dA-Fa-f]{6}|[\\dA-Fa-f]{3})$/);\n\t\t\tif (matches)\n\t\t\t{\n\t\t\t\tlet hex = matches[1];\n\t\t\t\tif (hex.length === 3)\n\t\t\t\t{\n\t\t\t\t\thex = hex.replaceAll(/([\\da-f])/gi, '$1$1');\n\t\t\t\t}\n\n\t\t\t\talfa = Type.isNumber(alfa) && alfa >= 0 && alfa <= 100 ? alfa : 95;\n\t\t\t\tconst alfaHex = `0${Math.round(255 * (alfa / 100)).toString(16)}`.slice(-2).toUpperCase();\n\n\t\t\t\tbgColor = `#${hex}${alfaHex}`;\n\t\t\t}\n\n\t\t\tthis.bgColor = bgColor;\n\t\t\tDom.style(this.getContainer(), 'background-color', bgColor);\n\t\t}\n\t\telse if (bgColor === null)\n\t\t{\n\t\t\tthis.bgColor = null;\n\t\t\tDom.style(this.getContainer(), 'background-color', null);\n\t\t}\n\t}\n\n\tgetBgColor(): string | null\n\t{\n\t\treturn this.bgColor;\n\t}\n\n\tsetText(text: string | null): void\n\t{\n\t\tif (Type.isStringFilled(text))\n\t\t{\n\t\t\tthis.text = text;\n\t\t\tthis.getTextContainer().textContent = text;\n\t\t}\n\t\telse if (text === null)\n\t\t{\n\t\t\tthis.text = text;\n\t\t\tthis.getTextContainer().textContent = '';\n\t\t}\n\t}\n\n\tgetText(): string | null\n\t{\n\t\treturn this.text;\n\t}\n\n\tsetIconClass(iconClass: string | null): void\n\t{\n\t\tif (Type.isStringFilled(iconClass))\n\t\t{\n\t\t\tDom.removeClass(this.getIconContainer(), this.iconClass);\n\t\t\tthis.iconClass = iconClass;\n\t\t\tDom.addClass(this.getIconContainer(), this.iconClass);\n\t\t}\n\t\telse if (iconClass === null)\n\t\t{\n\t\t\tDom.removeClass(this.getIconContainer(), this.iconClass);\n\t\t\tthis.iconClass = iconClass;\n\t\t}\n\t}\n\n\tgetIconClass(): string\n\t{\n\t\treturn this.iconClass;\n\t}\n\n\tsetIconTitle(iconTitle: string | null): void\n\t{\n\t\tif (Type.isStringFilled(iconTitle) || iconTitle === null)\n\t\t{\n\t\t\tDom.attr(this.getIconBox(), 'title', iconTitle);\n\t\t\tthis.iconTitle = iconTitle;\n\t\t}\n\t}\n\n\tgetIconTitle(): void\n\t{\n\t\treturn this.iconTitle;\n\t}\n\n\tsetOnclick(fn: Function): void\n\t{\n\t\tif (Type.isFunction(fn) || fn === null)\n\t\t{\n\t\t\tthis.onclick = fn;\n\t\t}\n\t}\n\n\tgetOnclick(): string | null\n\t{\n\t\treturn this.onclick;\n\t}\n\n\tgetSlider(): Slider\n\t{\n\t\treturn this.slider;\n\t}\n\n\tmoveAt(position: number): void\n\t{\n\t\tif (Type.isNumber(position) && position >= 0)\n\t\t{\n\t\t\tDom.style(\n\t\t\t\tthis.getSlider().getLabelsContainer(),\n\t\t\t\t'top',\n\t\t\t\t`${this.constructor.MIN_TOP_OFFSET + (position * this.constructor.INTERVAL_TOP_OFFSET)}px`,\n\t\t\t);\n\t\t}\n\t}\n}\n","import { Type } from 'main.core';\nimport { Slider } from './slider';\n\nexport class SliderEvent\n{\n\tconstructor()\n\t{\n\t\tthis.slider = null;\n\t\tthis.action = true;\n\t\tthis.name = null;\n\t}\n\n\tallowAction(): void\n\t{\n\t\tthis.action = true;\n\t}\n\n\tdenyAction(): void\n\t{\n\t\tthis.action = false;\n\t}\n\n\tisActionAllowed(): boolean\n\t{\n\t\treturn this.action;\n\t}\n\n\t/**\n\t * @deprecated use getSlider method\n\t */\n\tgetSliderPage(): Slider\n\t{\n\t\treturn this.slider;\n\t}\n\n\tgetSlider(): Slider\n\t{\n\t\treturn this.slider;\n\t}\n\n\tsetSlider(slider: Slider): void\n\t{\n\t\tif (slider instanceof Slider)\n\t\t{\n\t\t\tthis.slider = slider;\n\t\t}\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn this.name;\n\t}\n\n\tsetName(name: string): void\n\t{\n\t\tif (Type.isStringFilled(name))\n\t\t{\n\t\t\tthis.name = name;\n\t\t}\n\t}\n\n\tgetFullName(): string\n\t{\n\t\treturn Slider.getEventFullName(this.getName());\n\t}\n}\n","import { Type, type JsonObject } from 'main.core';\n\nimport { Slider } from './slider';\nimport { SliderEvent } from './slider-event';\n\nexport class MessageEvent extends SliderEvent\n{\n\tconstructor(eventOptions)\n\t{\n\t\tsuper();\n\n\t\tconst options = Type.isPlainObject(eventOptions) ? eventOptions : {};\n\n\t\tif (!(options.sender instanceof Slider))\n\t\t{\n\t\t\tthrow new TypeError('\\'sender\\' is not an instance of BX.SidePanel.Slider');\n\t\t}\n\n\t\tthis.setName('onMessage');\n\t\tthis.setSlider(options.slider);\n\n\t\tthis.sender = options.sender;\n\t\tthis.data = 'data' in options ? options.data : null;\n\t\tthis.eventId = Type.isStringFilled(options.eventId) ? options.eventId : null;\n\t}\n\n\tgetSlider(): Slider | null\n\t{\n\t\treturn this.slider;\n\t}\n\n\tgetSender(): Slider\n\t{\n\t\treturn this.sender;\n\t}\n\n\tgetData(): JsonObject\n\t{\n\t\treturn this.data;\n\t}\n\n\tgetEventId(): string | null\n\t{\n\t\treturn this.eventId;\n\t}\n}\n","import { Type, Loc, Dom, Event, Runtime, Text, Browser, Uri, Tag, type JsonObject } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { MemoryCache, type BaseCache } from 'main.core.cache';\nimport { ZIndexManager, type ZIndexComponent } from 'main.core.z-index-manager';\n\nimport { Dictionary } from './dictionary';\nimport { Label } from './label';\nimport { MessageEvent } from './message-event';\nimport { SliderEvent } from './slider-event';\n\nimport { type SliderOptions } from './types/slider-options';\nimport { type MinimizeOptions } from './types/minimize-options';\nimport { type OuterBoundary } from './types/outer-boundary';\n\nexport class Slider\n{\n\t#refs: BaseCache<HTMLElement> = new MemoryCache();\n\n\t#startPosition: 'right' | 'bottom' | 'top' = 'right';\n\t#startAnimationState: JsonObject = null;\n\t#endAnimationState: JsonObject = null;\n\t#currentAnimationState: JsonObject = null;\n\t#outerBoundary: OuterBoundary = {};\n\t#hideToolbarOnOpen: boolean = false;\n\t#designSystemContext: string = '--ui-context-content-light';\n\t#zIndexComponent: ZIndexComponent = null;\n\t#autoOffset: boolean = true;\n\n\tconstructor(url: string, sliderOptions: SliderOptions)\n\t{\n\t\tconst options: SliderOptions = Type.isPlainObject(sliderOptions) ? sliderOptions : {};\n\n\t\tthis.contentCallback = Type.isFunction(options.contentCallback) ? options.contentCallback : null;\n\t\tthis.contentCallbackInvoved = false;\n\t\tthis.contentClassName = Type.isStringFilled(options.contentClassName) ? options.contentClassName : null;\n\t\tthis.containerClassName = Type.isStringFilled(options.containerClassName) ? options.containerClassName : null;\n\t\tthis.overlayClassName = Type.isStringFilled(options.overlayClassName) ? options.overlayClassName : null;\n\n\t\tthis.url = this.contentCallback ? url : this.refineUrl(url);\n\n\t\tthis.offset = null;\n\t\tthis.hideControls = options.hideControls === true;\n\t\tthis.width = Type.isNumber(options.width) ? options.width : null;\n\t\tthis.cacheable = options.cacheable !== false;\n\t\tthis.autoFocus = options.autoFocus !== false;\n\t\tthis.printable = options.printable === true;\n\t\tthis.allowChangeHistory = options.allowChangeHistory !== false;\n\t\tthis.allowChangeTitle = Type.isBoolean(options.allowChangeTitle) ? options.allowChangeTitle : null;\n\t\tthis.allowCrossOrigin = options.allowCrossOrigin === true;\n\t\tthis.data = new Dictionary(Type.isPlainObject(options.data) ? options.data : {});\n\n\t\tthis.customLeftBoundary = null;\n\t\tthis.customRightBoundary = null;\n\t\tthis.setCustomLeftBoundary(options.customLeftBoundary);\n\t\tthis.setCustomRightBoundary(options.customRightBoundary);\n\n\t\tthis.title = null;\n\t\tthis.setTitle(options.title);\n\t\t/**\n\t\t *\n\t\t * @type {HTMLIFrameElement}\n\t\t */\n\t\tthis.iframe = null;\n\t\tthis.iframeSrc = null;\n\t\tthis.iframeId = null;\n\t\tthis.requestMethod = (\n\t\t\tType.isStringFilled(options.requestMethod) && options.requestMethod.toLowerCase() === 'post'\n\t\t\t\t? 'post'\n\t\t\t\t: 'get'\n\t\t);\n\t\tthis.requestParams = Type.isPlainObject(options.requestParams) ? options.requestParams : {};\n\n\t\tthis.opened = false;\n\t\tthis.hidden = false;\n\t\tthis.destroyed = false;\n\t\tthis.loaded = false;\n\t\tthis.loadedCnt = 0;\n\n\t\tthis.minimizing = false;\n\t\tthis.maximizing = false;\n\n\t\tthis.handleFrameKeyDown = this.handleFrameKeyDown.bind(this);\n\t\tthis.handleFrameFocus = this.handleFrameFocus.bind(this);\n\t\tthis.handleFrameUnload = this.handleFrameUnload.bind(this);\n\t\tthis.handlePopupInit = this.handlePopupInit.bind(this);\n\t\tthis.handleCrossOriginWindowMessage = this.handleCrossOriginWindowMessage.bind(this);\n\n\t\tthis.layout = {\n\t\t\toverlay: null,\n\t\t\tcontainer: null,\n\t\t\tloader: null,\n\t\t\tcontent: null,\n\t\t};\n\n\t\tthis.loader = (\n\t\t\tType.isStringFilled(options.loader) || Type.isElementNode(options.loader)\n\t\t\t\t? options.loader\n\t\t\t\t: (Type.isStringFilled(options.typeLoader) ? options.typeLoader : 'default-loader')\n\t\t);\n\n\t\tthis.animation = null;\n\t\tthis.animationDuration = Type.isNumber(options.animationDuration) ? options.animationDuration : 200;\n\t\tthis.overlayBgColor = (\n\t\t\tType.isStringFilled(options.overlayBgColor) && /^#[\\dA-Za-f]{6}$/.test(options.overlayBgColor)\n\t\t\t\t? options.overlayBgColor\n\t\t\t\t: '#000000'\n\t\t);\n\t\tthis.overlayOpacity = (\n\t\t\tType.isNumber(options.overlayOpacity)\n\t\t\t\t? Math.min(Math.max(options.overlayOpacity, 0), 100)\n\t\t\t\t: 40\n\t\t);\n\n\t\tthis.overlayBgCallback = Type.isFunction(options.overlayBgCallback) ? options.overlayBgCallback : null;\n\n\t\tthis.#startPosition = (\n\t\t\t['right', 'bottom', 'top'].includes(options.startPosition)\n\t\t\t\t? options.startPosition\n\t\t\t\t: this.#startPosition\n\t\t);\n\t\tthis.#outerBoundary = Type.isPlainObject(options.outerBoundary) ? options.outerBoundary : {};\n\t\tthis.#startAnimationState = this.#getAnimationState('start');\n\t\tthis.#endAnimationState = this.#getAnimationState('end');\n\t\tthis.#currentAnimationState = null;\n\n\t\tthis.overlayAnimation = false;\n\t\tthis.animationName = 'sliding';\n\t\tthis.animationOptions = {};\n\n\t\tthis.minimizeOptions = null;\n\t\tconst minimizeOptions = options.minimizeOptions;\n\t\tif (\n\t\t\tType.isPlainObject(minimizeOptions)\n\t\t\t&& Type.isStringFilled(minimizeOptions.entityType)\n\t\t\t&& (Type.isStringFilled(minimizeOptions.entityId) || Type.isNumber(minimizeOptions.entityId))\n\t\t\t&& (Type.isStringFilled(minimizeOptions.url))\n\t\t)\n\t\t{\n\t\t\tthis.minimizeOptions = minimizeOptions;\n\t\t}\n\n\t\tthis.setToolbarOnOpen(options.hideToolbarOnOpen);\n\t\tthis.setDesignSystemContext(options.designSystemContext);\n\t\tthis.setAutoOffset(options.autoOffset);\n\n\t\tthis.label = new Label(this, {\n\t\t\ticonClass: 'side-panel-label-icon-close',\n\t\t\ticonTitle: Loc.getMessage('MAIN_SIDEPANEL_CLOSE'),\n\t\t\tonclick(label, slider)\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t},\n\t\t});\n\n\t\tconst labelOptions = Type.isPlainObject(options.label) ? options.label : {};\n\t\tthis.label.setText(labelOptions.text);\n\t\tthis.label.setColor(labelOptions.color);\n\t\tthis.label.setBgColor(labelOptions.bgColor, labelOptions.opacity);\n\n\t\tthis.minimizeLabel = null;\n\t\tthis.newWindowLabel = null;\n\t\tthis.copyLinkLabel = null;\n\n\t\tif (!this.isSelfContained() && this.minimizeOptions !== null)\n\t\t{\n\t\t\tthis.minimizeLabel = new Label(this, {\n\t\t\t\ticonClass: 'side-panel-label-icon-minimize ui-icon-set --arrow-line',\n\t\t\t\ticonTitle: Loc.getMessage('MAIN_SIDEPANEL_MINIMIZE'),\n\t\t\t\tbgColor: ['#d9dcdf', 100],\n\t\t\t\tonclick: (label, slider) => {\n\t\t\t\t\tif (this.isLoaded())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.minimize();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (options.newWindowLabel === true && (!this.isSelfContained() || Type.isStringFilled(options.newWindowUrl)))\n\t\t{\n\t\t\tthis.newWindowLabel = new Label(this, {\n\t\t\t\ticonClass: 'side-panel-label-icon-new-window',\n\t\t\t\ticonTitle: Loc.getMessage('MAIN_SIDEPANEL_NEW_WINDOW'),\n\t\t\t\tbgColor: ['#d9dcdf', 100],\n\t\t\t\tonclick(label, slider)\n\t\t\t\t{\n\t\t\t\t\tconst newWindowUrl = Type.isStringFilled(options.newWindowUrl) ? options.newWindowUrl : slider.getUrl();\n\t\t\t\t\tObject.assign(document.createElement('a'), {\n\t\t\t\t\t\ttarget: '_blank',\n\t\t\t\t\t\thref: newWindowUrl,\n\t\t\t\t\t}).click();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (options.copyLinkLabel === true && (!this.isSelfContained() || Type.isStringFilled(options.newWindowUrl)))\n\t\t{\n\t\t\tthis.copyLinkLabel = new Label(this, {\n\t\t\t\ticonClass: 'side-panel-label-icon-copy-link',\n\t\t\t\ticonTitle: Loc.getMessage('MAIN_SIDEPANEL_COPY_LINK'),\n\t\t\t\tbgColor: ['#d9dcdf', 100],\n\t\t\t});\n\n\t\t\tBX.clipboard.bindCopyClick(\n\t\t\t\tthis.copyLinkLabel.getIconBox(),\n\t\t\t\t{\n\t\t\t\t\ttext: () => {\n\t\t\t\t\t\tconst link = document.createElement('a');\n\t\t\t\t\t\tlink.href = Type.isStringFilled(options.newWindowUrl) ? options.newWindowUrl : this.getUrl();\n\n\t\t\t\t\t\treturn link.href;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\t// Compatibility\n\t\tif (\n\t\t\tthis.url.includes('crm.activity.planner/slider.php')\n\t\t\t&& options.events\n\t\t\t&& Type.isFunction(options.events.onOpen)\n\t\t\t&& options.events.compatibleEvents !== false\n\t\t)\n\t\t{\n\t\t\tconst onOpen = options.events.onOpen;\n\t\t\tdelete options.events.onOpen;\n\t\t\toptions.events.onLoad = function(event) {\n\t\t\t\tonOpen(event.getSlider());\n\t\t\t};\n\t\t}\n\n\t\tif (Type.isPlainObject(options.events))\n\t\t{\n\t\t\tfor (const [eventName, fn] of Object.entries(options.events))\n\t\t\t{\n\t\t\t\tif (Type.isFunction(fn))\n\t\t\t\t{\n\t\t\t\t\tEventEmitter.subscribe(this, Slider.getEventFullName(eventName), fn, { compatMode: true });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic getEventFullName(eventName: string): string\n\t{\n\t\treturn `SidePanel.Slider:${eventName}`;\n\t}\n\n\topen(): boolean\n\t{\n\t\tif (this.isOpen())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.canOpen())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.isDestroyed())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.maximizing)\n\t\t{\n\t\t\tthis.fireEvent('onMaximizeStart');\n\t\t}\n\n\t\tthis.createLayout();\n\n\t\tDom.removeClass(this.getOverlay(), '--closing');\n\t\tDom.addClass(this.getOverlay(), '--opening');\n\n\t\tthis.adjustLayout();\n\n\t\tZIndexManager.bringToFront(this.getOverlay());\n\n\t\tthis.opened = true;\n\n\t\tthis.fireEvent('onOpenStart');\n\n\t\tthis.animateOpening();\n\n\t\treturn true;\n\t}\n\n\tclose(immediately: boolean, callback: Function): boolean\n\t{\n\t\tif (!this.isOpen())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.canClose())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.minimizing)\n\t\t{\n\t\t\tthis.fireEvent('onMinimizeStart');\n\t\t}\n\n\t\tthis.fireEvent('onCloseStart');\n\n\t\tthis.opened = false;\n\n\t\tif (this.isDestroyed())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.animation)\n\t\t{\n\t\t\tthis.animation.stop();\n\t\t}\n\n\t\tDom.removeClass(this.getOverlay(), '--opening');\n\t\tDom.addClass(this.getOverlay(), '--closing');\n\n\t\tthis.fireEvent('onClosing');\n\n\t\tif (immediately === true || Browser.isMobile())\n\t\t{\n\t\t\tthis.#currentAnimationState = this.#startAnimationState;\n\t\t\tthis.completeAnimation(callback);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.animation = new BX.easing({\n\t\t\t\tduration: this.animationDuration,\n\t\t\t\tstart: this.#currentAnimationState,\n\t\t\t\tfinish: this.#startAnimationState,\n\t\t\t\tstep: (state) => {\n\t\t\t\t\tthis.#currentAnimationState = state;\n\t\t\t\t\tthis.animateStep(state);\n\t\t\t\t},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\tthis.completeAnimation(callback);\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t// Chrome rendering bug\n\t\t\tDom.style(this.getContainer(), 'opacity', 0.96);\n\n\t\t\tif (this.animationName === 'scale' && Type.isStringFilled(this.animationOptions.origin))\n\t\t\t{\n\t\t\t\tDom.style(this.getContainer(), 'transform-origin', this.animationOptions.origin);\n\t\t\t}\n\n\t\t\tthis.animation.animate();\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tminimize(immediately, callback): boolean\n\t{\n\t\tthis.minimizing = true;\n\n\t\tconst success = this.close(immediately, callback);\n\t\tif (!success)\n\t\t{\n\t\t\tthis.minimizing = false;\n\t\t}\n\n\t\treturn success;\n\t}\n\n\tisMinimizing(): boolean\n\t{\n\t\treturn this.minimizing;\n\t}\n\n\tmaximize(): boolean\n\t{\n\t\tthis.maximizing = true;\n\t\tconst success = this.open();\n\t\tif (!success)\n\t\t{\n\t\t\tthis.maximizing = false;\n\t\t}\n\n\t\treturn success;\n\t}\n\n\tisMaximizing(): boolean\n\t{\n\t\treturn this.maximizing;\n\t}\n\n\tsetAnimation(type, options): void\n\t{\n\t\tthis.animationName = type === 'scale' ? type : 'sliding';\n\t\tthis.animationOptions = Type.isPlainObject(options) ? options : {};\n\t}\n\n\tgetMinimizeOptions(): MinimizeOptions\n\t{\n\t\treturn this.minimizeOptions;\n\t}\n\n\tsetToolbarOnOpen(flag: boolean): void\n\t{\n\t\tif (Type.isBoolean(flag))\n\t\t{\n\t\t\tthis.#hideToolbarOnOpen = flag;\n\t\t}\n\t}\n\n\tshouldHideToolbarOnOpen(): boolean\n\t{\n\t\treturn this.#hideToolbarOnOpen;\n\t}\n\n\t#getAnimationState(mode: 'start' | 'end'): JsonObject\n\t{\n\t\tconst states = {\n\t\t\tright: {\n\t\t\t\tstart: {\n\t\t\t\t\ttranslateX: 100,\n\t\t\t\t\ttranslateY: 0,\n\t\t\t\t\topacity: 0,\n\t\t\t\t\tscale: 0,\n\t\t\t\t\tprogress: 0,\n\t\t\t\t\tintensity: 0,\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\ttranslateX: 0,\n\t\t\t\t\ttranslateY: 0,\n\t\t\t\t\topacity: this.overlayOpacity,\n\t\t\t\t\tscale: 100,\n\t\t\t\t\tprogress: 100,\n\t\t\t\t\tintensity: 255,\n\t\t\t\t},\n\t\t\t},\n\t\t\tbottom: {\n\t\t\t\tstart: {\n\t\t\t\t\ttranslateX: 0,\n\t\t\t\t\ttranslateY: 100,\n\t\t\t\t\topacity: 0,\n\t\t\t\t\tscale: 0,\n\t\t\t\t\tprogress: 0,\n\t\t\t\t\tintensity: 0,\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\ttranslateX: 0,\n\t\t\t\t\ttranslateY: 0,\n\t\t\t\t\topacity: this.overlayOpacity,\n\t\t\t\t\tscale: 100,\n\t\t\t\t\tprogress: 100,\n\t\t\t\t\tintensity: 255,\n\t\t\t\t},\n\t\t\t},\n\t\t\ttop: {\n\t\t\t\tstart: {\n\t\t\t\t\ttranslateX: 0,\n\t\t\t\t\ttranslateY: -100,\n\t\t\t\t\topacity: 0,\n\t\t\t\t\tscale: 0,\n\t\t\t\t\tprogress: 0,\n\t\t\t\t\tintensity: 0,\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\ttranslateX: 0,\n\t\t\t\t\ttranslateY: 0,\n\t\t\t\t\topacity: this.overlayOpacity,\n\t\t\t\t\tscale: 100,\n\t\t\t\t\tprogress: 100,\n\t\t\t\t\tintensity: 255,\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\treturn states[this.#startPosition][mode];\n\t}\n\n\tgetDesignSystemContext(): string\n\t{\n\t\treturn this.#designSystemContext;\n\t}\n\n\tsetDesignSystemContext(context: string): void\n\t{\n\t\tif (Type.isString(context))\n\t\t{\n\t\t\tif (this.layout.container !== null)\n\t\t\t{\n\t\t\t\tDom.removeClass(this.layout.container, this.#designSystemContext);\n\t\t\t\tDom.addClass(this.layout.container, context);\n\t\t\t}\n\n\t\t\tthis.#designSystemContext = context;\n\t\t}\n\t}\n\n\tgetUrl(): string\n\t{\n\t\treturn this.url;\n\t}\n\n\tsetUrl(url: string): void\n\t{\n\t\tif (Type.isStringFilled(url))\n\t\t{\n\t\t\tthis.url = url;\n\t\t}\n\t}\n\n\tfocus(): void\n\t{\n\t\tthis.getWindow().focus();\n\n\t\t// if (this.isSelfContained())\n\t\t// {\n\t\t// \tthis.getContentContainer().setAttribute(\"tabindex\", \"0\");\n\t\t// \tthis.getContentContainer().focus();\n\t\t// }\n\t}\n\n\tisOpen(): boolean\n\t{\n\t\treturn this.opened;\n\t}\n\n\tgetStartPosition(): 'right' | 'bottom' | 'top'\n\t{\n\t\treturn this.#startPosition;\n\t}\n\n\t/**\n\t * @deprecated\n\t */\n\tsetZindex(zIndex: number): void\n\t{}\n\n\t/**\n\t * @public\n\t * @returns {number}\n\t */\n\tgetZindex(): number\n\t{\n\t\treturn this.getZIndexComponent().getZIndex();\n\t}\n\n\tgetZIndexComponent(): ZIndexComponent | null\n\t{\n\t\treturn this.#zIndexComponent;\n\t}\n\n\tsetOffset(offset: number | null): void\n\t{\n\t\tif (Type.isNumber(offset) || offset === null)\n\t\t{\n\t\t\tthis.offset = offset;\n\t\t}\n\t}\n\n\tgetOffset(): number | null\n\t{\n\t\treturn this.offset;\n\t}\n\n\tsetAutoOffset(autoOffset: boolean): void\n\t{\n\t\tif (Type.isBoolean(autoOffset))\n\t\t{\n\t\t\tthis.#autoOffset = autoOffset;\n\t\t}\n\t}\n\n\tshouldUseAutoOffset(): boolean\n\t{\n\t\treturn this.#autoOffset;\n\t}\n\n\tsetWidth(width: number): void\n\t{\n\t\tif (Type.isNumber(width))\n\t\t{\n\t\t\tthis.width = width;\n\t\t}\n\t}\n\n\tgetWidth(): number\n\t{\n\t\treturn this.width;\n\t}\n\n\tsetTitle(title: string): void\n\t{\n\t\tif (Type.isStringFilled(title))\n\t\t{\n\t\t\tthis.title = title;\n\t\t}\n\t}\n\n\tgetTitle(): string | null\n\t{\n\t\treturn this.title;\n\t}\n\n\tgetData(): Dictionary\n\t{\n\t\treturn this.data;\n\t}\n\n\tisSelfContained(): boolean\n\t{\n\t\treturn this.contentCallback !== null;\n\t}\n\n\tisPostMethod(): boolean\n\t{\n\t\treturn this.requestMethod === 'post';\n\t}\n\n\tgetRequestParams(): JsonObject\n\t{\n\t\treturn this.requestParams;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {string}\n\t */\n\tgetFrameId(): string\n\t{\n\t\tif (this.iframeId === null)\n\t\t{\n\t\t\tthis.iframeId = `iframe_${Text.getRandom(10).toLowerCase()}`;\n\t\t}\n\n\t\treturn this.iframeId;\n\t}\n\n\tgetWindow(): Window\n\t{\n\t\treturn this.iframe ? this.iframe.contentWindow : window;\n\t}\n\n\tgetFrameWindow(): Window | null\n\t{\n\t\treturn this.iframe ? this.iframe.contentWindow : null;\n\t}\n\n\tisHidden(): boolean\n\t{\n\t\treturn this.hidden;\n\t}\n\n\tisCacheable(): boolean\n\t{\n\t\treturn this.cacheable;\n\t}\n\n\tisFocusable(): boolean\n\t{\n\t\treturn this.autoFocus;\n\t}\n\n\tisPrintable(): boolean\n\t{\n\t\treturn this.printable;\n\t}\n\n\tisDestroyed(): boolean\n\t{\n\t\treturn this.destroyed;\n\t}\n\n\tisLoaded(): boolean\n\t{\n\t\treturn this.loaded;\n\t}\n\n\tcanChangeHistory(): boolean\n\t{\n\t\treturn (\n\t\t\tthis.allowChangeHistory\n\t\t\t&& !this.allowCrossOrigin\n\t\t\t&& !this.isSelfContained()\n\t\t\t&& !/^\\/bitrix\\/(components|tools)\\//i.test(this.getUrl())\n\t\t);\n\t}\n\n\tcanChangeTitle(): boolean\n\t{\n\t\tif (this.allowChangeTitle === null)\n\t\t{\n\t\t\tif (this.getTitle() !== null)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn this.canChangeHistory();\n\t\t}\n\n\t\treturn this.allowChangeTitle;\n\t}\n\n\tsetCacheable(cacheable: boolean = true): void\n\t{\n\t\tthis.cacheable = cacheable !== false;\n\t}\n\n\tsetAutoFocus(autoFocus: boolean = true): void\n\t{\n\t\tthis.autoFocus = autoFocus !== false;\n\t}\n\n\t/**\n\t * @public\n\t * @param {boolean} printable\n\t */\n\tsetPrintable(printable: boolean = true): void\n\t{\n\t\tthis.printable = printable !== false;\n\t\tif (this.printable)\n\t\t{\n\t\t\tthis.showPrintBtn();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.hidePrintBtn();\n\t\t}\n\t}\n\n\tgetLoader(): string\n\t{\n\t\treturn this.loader;\n\t}\n\n\tshowLoader(): void\n\t{\n\t\tconst loader = this.getLoader();\n\t\tif (!this.layout.loader)\n\t\t{\n\t\t\tthis.createLoader(loader);\n\t\t}\n\n\t\tDom.style(this.layout.loader, { opacity: 1, display: 'block' });\n\t}\n\n\tcloseLoader(): void\n\t{\n\t\tif (this.layout.loader)\n\t\t{\n\t\t\tDom.style(this.layout.loader, { opacity: 0, display: 'none' });\n\t\t}\n\t}\n\n\tshowCloseBtn(): void\n\t{\n\t\tthis.getLabel().showIcon();\n\t}\n\n\thideCloseBtn(): void\n\t{\n\t\tthis.getLabel().hideIcon();\n\t}\n\n\tshowOrLightenCloseBtn(): void\n\t{\n\t\tif (Type.isStringFilled(this.getLabel().getText()))\n\t\t{\n\t\t\tthis.getLabel().showIcon();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getLabel().lightenIcon();\n\t\t}\n\t}\n\n\thideOrDarkenCloseBtn(): void\n\t{\n\t\tif (Type.isStringFilled(this.getLabel().getText()))\n\t\t{\n\t\t\tthis.getLabel().hideIcon();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getLabel().darkenIcon();\n\t\t}\n\t}\n\n\tshowPrintBtn(): void\n\t{\n\t\tDom.addClass(this.getPrintBtn(), 'side-panel-print-visible');\n\t}\n\n\thidePrintBtn(): void\n\t{\n\t\tDom.removeClass(this.getPrintBtn(), 'side-panel-print-visible');\n\t}\n\n\tshowExtraLabels(): void\n\t{\n\t\tDom.style(this.getExtraLabelsContainer(), 'display', null);\n\t}\n\n\thideExtraLabels(): void\n\t{\n\t\tDom.style(this.getExtraLabelsContainer(), 'display', 'none');\n\t}\n\n\tsetContentClass(className: string): void\n\t{\n\t\tif (Type.isStringFilled(className))\n\t\t{\n\t\t\tthis.removeContentClass();\n\t\t\tthis.contentClassName = className;\n\t\t\tDom.addClass(this.getContentContainer(), className);\n\t\t}\n\t}\n\n\tremoveContentClass(): void\n\t{\n\t\tif (this.contentClassName !== null)\n\t\t{\n\t\t\tDom.removeClass(this.getContentContainer(), this.contentClassName);\n\t\t\tthis.contentClassName = null;\n\t\t}\n\t}\n\n\tsetContainerClass(className: string): void\n\t{\n\t\tif (Type.isStringFilled(className))\n\t\t{\n\t\t\tthis.removeContainerClass();\n\t\t\tthis.containerClassName = className;\n\t\t\tDom.addClass(this.getContainer(), className);\n\t\t}\n\t}\n\n\tremoveContainerClass(): void\n\t{\n\t\tif (this.containerClassName !== null)\n\t\t{\n\t\t\tDom.removeClass(this.getContainer(), this.containerClassName);\n\t\t\tthis.containerClassName = null;\n\t\t}\n\t}\n\n\tsetOverlayClass(className: string): void\n\t{\n\t\tif (Type.isStringFilled(className))\n\t\t{\n\t\t\tthis.removeOverlayClass();\n\t\t\tthis.overlayClassName = className;\n\t\t\tDom.addClass(this.getOverlay(), className);\n\t\t}\n\t}\n\n\tremoveOverlayClass(): void\n\t{\n\t\tif (this.overlayClassName !== null)\n\t\t{\n\t\t\tDom.removeClass(this.getOverlay(), this.overlayClassName);\n\t\t\tthis.overlayClassName = null;\n\t\t}\n\t}\n\n\tapplyHacks(): void\n\t{\n\t\t// You can override this method in a derived class\n\t}\n\n\tapplyPostHacks(): void\n\t{\n\t\t// You can override this method in a derived class\n\t}\n\n\tresetHacks(): void\n\t{\n\t\t// You can override this method in a derived class\n\t}\n\n\tresetPostHacks(): void\n\t{\n\t\t// You can override this method in a derived class\n\t}\n\n\tgetTopBoundary(): number\n\t{\n\t\treturn 0;\n\t}\n\n\t/**\n\t * @protected\n\t */\n\tcalculateLeftBoundary(): number\n\t{\n\t\tconst customLeftBoundary = this.getCustomLeftBoundary();\n\t\tif (customLeftBoundary !== null)\n\t\t{\n\t\t\treturn customLeftBoundary;\n\t\t}\n\n\t\treturn this.getLeftBoundary();\n\t}\n\n\tgetLeftBoundary(): number\n\t{\n\t\tconst windowWidth = Browser.isMobile() ? window.innerWidth : document.documentElement.clientWidth;\n\n\t\treturn windowWidth < 1160 ? this.getMinLeftBoundary() : 300;\n\t}\n\n\tgetMinLeftBoundary(): number\n\t{\n\t\treturn this.hideControls && this.getCustomLeftBoundary() !== null ? 0 : 65;\n\t}\n\n\t/**\n\t * @internal\n\t */\n\tgetLeftBoundaryOffset(): number\n\t{\n\t\tconst offset = this.getOffset() === null ? 0 : this.getOffset();\n\n\t\treturn Math.max(this.calculateLeftBoundary(), this.getMinLeftBoundary()) + offset;\n\t}\n\n\tsetCustomLeftBoundary(boundary: number | null): void\n\t{\n\t\tif (Type.isNumber(boundary) || boundary === null)\n\t\t{\n\t\t\tthis.customLeftBoundary = boundary;\n\t\t}\n\t}\n\n\tgetCustomLeftBoundary(): number\n\t{\n\t\treturn this.customLeftBoundary;\n\t}\n\n\tsetCustomRightBoundary(boundary: number | null): void\n\t{\n\t\tif (Type.isNumber(boundary) || boundary === null)\n\t\t{\n\t\t\tthis.customRightBoundary = boundary;\n\t\t}\n\t}\n\n\tgetCustomRightBoundary(): number\n\t{\n\t\treturn this.customRightBoundary;\n\t}\n\n\t/**\n\t * @protected\n\t */\n\tcalculateRightBoundary(): number\n\t{\n\t\tconst customRightBoundary = this.getCustomRightBoundary();\n\t\tif (customRightBoundary !== null)\n\t\t{\n\t\t\treturn -window.pageXOffset + customRightBoundary;\n\t\t}\n\n\t\treturn this.getRightBoundary();\n\t}\n\n\tgetRightBoundary(): number\n\t{\n\t\treturn -window.pageXOffset;\n\t}\n\n\tgetOuterBoundary(): OuterBoundary\n\t{\n\t\treturn this.#outerBoundary;\n\t}\n\n\tcalculateOuterBoundary(): OuterBoundary\n\t{\n\t\t// You can override this method in a derived class\n\t}\n\n\t#calculateOuterBoundary(): OuterBoundary\n\t{\n\t\tconst outerBoundary = this.calculateOuterBoundary();\n\n\t\treturn Runtime.merge(Type.isPlainObject(outerBoundary) ? outerBoundary : {}, this.getOuterBoundary());\n\t}\n\n\tdestroy(): boolean\n\t{\n\t\tif (this.isDestroyed())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.firePageEvent('onDestroy');\n\t\tthis.fireFrameEvent('onDestroy');\n\n\t\tconst frameWindow = this.getFrameWindow();\n\t\tif (frameWindow && !this.allowCrossOrigin)\n\t\t{\n\t\t\tEvent.unbind(frameWindow, 'keydown', this.handleFrameKeyDown);\n\t\t\tEvent.unbind(frameWindow, 'focus', this.handleFrameFocus);\n\t\t\tEvent.unbind(frameWindow, 'unload', this.handleFrameUnload);\n\t\t}\n\t\telse if (this.allowCrossOrigin)\n\t\t{\n\t\t\tEvent.unbind(window, 'message', this.handleCrossOriginWindowMessage);\n\t\t}\n\n\t\tEventEmitter.unsubscribe('BX.Main.Popup:onInit', this.handlePopupInit);\n\t\tZIndexManager.unregister(this.layout.overlay);\n\t\tthis.#zIndexComponent = null;\n\n\t\tDom.remove(this.layout.overlay);\n\n\t\tthis.layout.container = null;\n\t\tthis.layout.overlay = null;\n\t\tthis.layout.content = null;\n\t\tthis.layout.closeBtn = null;\n\t\tthis.layout.loader = null;\n\n\t\tthis.#refs = null;\n\n\t\tthis.iframe = null;\n\t\tthis.destroyed = true;\n\n\t\tEventEmitter.unsubscribeAll(this);\n\n\t\tthis.firePageEvent('onDestroyComplete');\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * @internal\n\t */\n\thide(): void\n\t{\n\t\tthis.hidden = true;\n\n\t\tDom.style(this.getContainer(), 'display', 'none');\n\t\tDom.style(this.getOverlay(), 'display', 'none');\n\t}\n\n\t/**\n\t * @internal\n\t */\n\tunhide(): void\n\t{\n\t\tthis.hidden = false;\n\n\t\tDom.style(this.getContainer(), 'display', null);\n\t\tDom.style(this.getOverlay(), 'display', null);\n\t}\n\n\t/**\n\t * @public\n\t */\n\treload(): void\n\t{\n\t\tthis.loaded = false;\n\t\tif (this.isSelfContained())\n\t\t{\n\t\t\tthis.contentCallbackInvoved = false;\n\t\t\tthis.showLoader();\n\t\t\tthis.setContent();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showLoader();\n\t\t\tthis.getFrameWindow().location.reload();\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t */\n\tadjustLayout(): void\n\t{\n\t\tconst scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n\t\tconst windowHeight = Browser.isMobile() ? window.innerHeight : document.documentElement.clientHeight;\n\n\t\tlet topBoundary = this.getTopBoundary();\n\t\tconst isTopBoundaryVisible = topBoundary - scrollTop > 0;\n\t\ttopBoundary = isTopBoundaryVisible ? topBoundary : scrollTop;\n\n\t\tconst height = isTopBoundaryVisible > 0 ? windowHeight - topBoundary + scrollTop : windowHeight;\n\t\tconst leftBoundary = this.getLeftBoundaryOffset();\n\t\tconst rightBoundary = this.calculateRightBoundary();\n\n\t\tDom.style(\n\t\t\tthis.getOverlay(),\n\t\t\t{\n\t\t\t\tleft: `${window.pageXOffset}px`,\n\t\t\t\ttop: `${topBoundary}px`,\n\t\t\t\tright: `${rightBoundary}px`,\n\t\t\t\theight: `${height}px`,\n\t\t\t},\n\t\t);\n\n\t\tconst { right = null, top = null, bottom = null } = this.#calculateOuterBoundary();\n\n\t\tDom.style(\n\t\t\tthis.getContainer(),\n\t\t\t{\n\t\t\t\twidth: `calc(100% - ${leftBoundary + (right === null ? 0 : right)}px)`,\n\t\t\t\tmaxWidth: this.getWidth() === null ? null : `${this.getWidth()}px`,\n\t\t\t\tright: right === null ? null : `${right}px`,\n\t\t\t\ttop: top === null ? null : `${top}px`,\n\t\t\t\tbottom: bottom === null ? null : `${bottom}px`,\n\t\t\t\t// height: `${height}px`, // height: '100%',\n\t\t\t},\n\t\t);\n\n\t\tthis.getLabel().adjustLayout();\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcreateLayout()\n\t{\n\t\tif (this.layout.overlay !== null && this.layout.overlay.parentNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isSelfContained())\n\t\t{\n\t\t\tDom.addClass(this.getOverlay(), '--self-contained');\n\t\t\tDom.append(this.getOverlay(), document.body);\n\n\t\t\tthis.setContent();\n\n\t\t\tEventEmitter.subscribe('BX.Main.Popup:onInit', this.handlePopupInit);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.append(this.getFrame(), this.getContentContainer());\n\t\t\tDom.append(this.getOverlay(), document.body);\n\t\t\tthis.setFrameSrc(); // setFrameSrc must be below than appendChild, otherwise POST method fails.\n\t\t}\n\n\t\tthis.#zIndexComponent = ZIndexManager.register(this.getOverlay());\n\t}\n\n\tgetFrame(): HTMLIFrameElement\n\t{\n\t\tif (this.iframe !== null)\n\t\t{\n\t\t\treturn this.iframe;\n\t\t}\n\n\t\tthis.iframe = Dom.create('iframe', {\n\t\t\tattrs: {\n\t\t\t\treferrerpolicy: this.allowCrossOrigin ? 'strict-origin' : false,\n\t\t\t\tsrc: 'about:blank',\n\t\t\t\tframeborder: '0',\n\t\t\t},\n\t\t\tprops: {\n\t\t\t\tclassName: 'side-panel-iframe',\n\t\t\t\tname: this.getFrameId(),\n\t\t\t\tid: this.getFrameId(),\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tload: this.handleFrameLoad.bind(this),\n\t\t\t},\n\t\t});\n\n\t\treturn this.iframe;\n\t}\n\n\tgetOverlay(): HTMLElement\n\t{\n\t\tif (this.layout.overlay !== null)\n\t\t{\n\t\t\treturn this.layout.overlay;\n\t\t}\n\n\t\tconst overlayClass = this.overlayClassName === null ? '' : ` ${this.overlayClassName}`;\n\n\t\tthis.layout.overlay = Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: `side-panel side-panel-overlay${overlayClass}`,\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tmousedown: this.handleOverlayClick.bind(this),\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tthis.getContainer(),\n\t\t\t],\n\t\t});\n\n\t\treturn this.layout.overlay;\n\t}\n\n\tunhideOverlay(): void\n\t{\n\t\tDom.removeClass(this.getOverlay(), '--hidden');\n\t}\n\n\thideOverlay(): void\n\t{\n\t\tDom.addClass(this.getOverlay(), '--hidden');\n\t}\n\n\thideShadow(): void\n\t{\n\t\tDom.removeClass(this.getContainer(), 'side-panel-show-shadow');\n\t}\n\n\tshowShadow(): void\n\t{\n\t\tDom.addClass(this.getContainer(), 'side-panel-show-shadow');\n\t}\n\n\tsetOverlayBackground(): void\n\t{\n\t\tif (this.overlayBgCallback === null)\n\t\t{\n\t\t\tconst opacity = parseInt(this.overlayOpacity / 100 * 255, 10).toString(16).padStart(2, 0);\n\t\t\tDom.style(this.getOverlay(), 'background-color', `${this.overlayBgColor}${opacity}`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst state = this.#getAnimationState('end');\n\t\t\tDom.style(this.getOverlay(), 'background', this.overlayBgCallback(state, this));\n\t\t}\n\t}\n\n\tsetOverlayAnimation(animate: boolean): void\n\t{\n\t\tif (Type.isBoolean(animate))\n\t\t{\n\t\t\tthis.overlayAnimation = animate;\n\t\t}\n\t}\n\n\tgetOverlayAnimation(): boolean\n\t{\n\t\treturn this.overlayAnimation;\n\t}\n\n\tgetOverlayBgColor(): string\n\t{\n\t\treturn this.overlayBgColor;\n\t}\n\n\tgetOverlayOpacity(): number\n\t{\n\t\treturn this.overlayOpacity;\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\tif (this.layout.container !== null)\n\t\t{\n\t\t\treturn this.layout.container;\n\t\t}\n\n\t\tconst content = Tag.render`\n\t\t\t<div class=\"side-panel-content-wrapper\">${this.getContentContainer()}</div>\n\t\t`;\n\n\t\tthis.layout.container = Tag.render`\n\t\t\t<div class=\"side-panel side-panel-container\">\n\t\t\t\t${\n\t\t\t\t\tthis.hideControls\n\t\t\t\t\t\t? content\n\t\t\t\t\t\t: [content, this.getLabelsContainer(), this.getPrintBtn()]\n\t\t\t\t}\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.addClass(this.layout.container, this.getDesignSystemContext());\n\t\tDom.addClass(this.layout.container, this.containerClassName);\n\n\t\treturn this.layout.container;\n\t}\n\n\tgetContentContainer(): HTMLElement\n\t{\n\t\tif (this.layout.content !== null)\n\t\t{\n\t\t\treturn this.layout.content;\n\t\t}\n\n\t\tconst contentClass = this.contentClassName === null ? '' : ` ${this.contentClassName}`;\n\n\t\tthis.layout.content = Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: `side-panel-content-container${contentClass}`,\n\t\t\t},\n\t\t});\n\n\t\treturn this.layout.content;\n\t}\n\n\tgetLabelsContainer(): HTMLElement\n\t{\n\t\treturn this.#refs.remember('labels-container', () => {\n\t\t\treturn Dom.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'side-panel-labels',\n\t\t\t\t},\n\t\t\t\tchildren: [\n\t\t\t\t\tthis.getLabel().getContainer(),\n\t\t\t\t\tthis.getExtraLabelsContainer(),\n\t\t\t\t],\n\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\tgetExtraLabelsContainer(): HTMLElement\n\t{\n\t\treturn this.#refs.remember('icon-labels', () => {\n\t\t\treturn Dom.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'side-panel-extra-labels',\n\t\t\t\t},\n\t\t\t\tchildren: [\n\t\t\t\t\tthis.minimizeLabel ? this.minimizeLabel.getContainer() : null,\n\t\t\t\t\tthis.newWindowLabel ? this.newWindowLabel.getContainer() : null,\n\t\t\t\t\tthis.copyLinkLabel ? this.copyLinkLabel.getContainer() : null,\n\t\t\t\t],\n\t\t\t});\n\t\t});\n\t}\n\n\tgetCloseBtn(): HTMLElement\n\t{\n\t\treturn this.getLabel().getIconBox();\n\t}\n\n\tgetLabel(): Label\n\t{\n\t\treturn this.label;\n\t}\n\n\tgetNewWindowLabel(): Label | null\n\t{\n\t\treturn this.newWindowLabel;\n\t}\n\n\tgetCopyLinkLabel(): Label | null\n\t{\n\t\treturn this.copyLinkLabel;\n\t}\n\n\tgetMinimizeLabel(): Label | null\n\t{\n\t\treturn this.minimizeLabel;\n\t}\n\n\tgetPrintBtn(): HTMLElement\n\t{\n\t\treturn this.#refs.remember('print-btn', () => {\n\t\t\treturn Dom.create('span', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'side-panel-print',\n\t\t\t\t\ttitle: Loc.getMessage('MAIN_SIDEPANEL_PRINT'),\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tclick: this.handlePrintBtnClick.bind(this),\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsetContent(): void\n\t{\n\t\tif (this.contentCallbackInvoved)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.contentCallbackInvoved = true;\n\n\t\tDom.clean(this.getContentContainer());\n\n\t\tlet promise = this.contentCallback(this);\n\t\tconst isPromiseReturned = (\n\t\t\tpromise\n\t\t\t&& (\n\t\t\t\tObject.prototype.toString.call(promise) === '[object Promise]'\n\t\t\t\t|| promise.toString() === '[object BX.Promise]'\n\t\t\t)\n\t\t);\n\n\t\tif (!isPromiseReturned)\n\t\t{\n\t\t\tpromise = Promise.resolve(promise);\n\t\t}\n\n\t\tpromise\n\t\t\t.then((result) => {\n\t\t\t\tif (this.isDestroyed())\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (Type.isPlainObject(result) && Type.isStringFilled(result.html))\n\t\t\t\t{\n\t\t\t\t\tRuntime.html(this.getContentContainer(), result.html)\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tthis.removeLoader();\n\t\t\t\t\t\t\tthis.loaded = true;\n\t\t\t\t\t\t\tthis.firePageEvent('onLoad');\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((reason) => {\n\t\t\t\t\t\t\tthis.removeLoader();\n\t\t\t\t\t\t\tthis.getContentContainer().innerHTML = reason;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (Type.isDomNode(result))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.append(result, this.getContentContainer());\n\t\t\t\t\t}\n\t\t\t\t\telse if (Type.isStringFilled(result))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getContentContainer().innerHTML = result;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.removeLoader();\n\t\t\t\t\tthis.loaded = true;\n\t\t\t\t\tthis.firePageEvent('onLoad');\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((reason) => {\n\t\t\t\tthis.removeLoader();\n\t\t\t\tthis.getContentContainer().innerHTML = reason;\n\t\t\t})\n\t\t;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsetFrameSrc(): void\n\t{\n\t\tif (this.iframeSrc === this.getUrl())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst url = Uri.addParam(this.getUrl(), { IFRAME: 'Y', IFRAME_TYPE: 'SIDE_SLIDER' });\n\t\tif (this.isPostMethod())\n\t\t{\n\t\t\tconst form = document.createElement('form');\n\t\t\tform.method = 'POST';\n\t\t\tform.action = url;\n\t\t\tform.target = this.getFrameId();\n\t\t\tDom.style(form, 'display', 'none');\n\n\t\t\tBX.util.addObjectToForm(this.getRequestParams(), form);\n\n\t\t\tDom.append(form, document.body);\n\n\t\t\tform.submit();\n\n\t\t\tDom.remove(form);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.iframeSrc = this.getUrl();\n\t\t\tthis.iframe.src = url;\n\t\t}\n\n\t\tthis.loaded = false;\n\t\tthis.listenIframeLoading();\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcreateLoader(sliderLoader: string | HTMLElement): void\n\t{\n\t\tDom.remove(this.layout.loader);\n\n\t\tconst loader = (\n\t\t\tType.isStringFilled(sliderLoader) || Type.isElementNode(sliderLoader)\n\t\t\t\t? sliderLoader\n\t\t\t\t: 'default-loader'\n\t\t);\n\n\t\tconst oldLoaders = [\n\t\t\t'task-new-loader',\n\t\t\t'task-edit-loader',\n\t\t\t'task-view-loader',\n\t\t\t'crm-entity-details-loader',\n\t\t\t'crm-button-view-loader',\n\t\t\t'crm-webform-view-loader',\n\t\t\t'create-mail-loader',\n\t\t\t'view-mail-loader',\n\t\t];\n\n\t\tif (Type.isElementNode(loader))\n\t\t{\n\t\t\tthis.layout.loader = this.createHTMLLoader(loader);\n\t\t}\n\t\telse if (oldLoaders.includes(loader) && this.loaderExists(loader))\n\t\t{\n\t\t\tthis.layout.loader = this.createOldLoader(loader);\n\t\t}\n\t\telse if (loader.charAt(0) === '/')\n\t\t{\n\t\t\tthis.layout.loader = this.createSvgLoader(loader);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst matches = loader.match(/^([\\w.-]+):([\\w.-]+)$/i);\n\t\t\tif (matches)\n\t\t\t{\n\t\t\t\tconst moduleId = matches[1];\n\t\t\t\tconst svgName = matches[2];\n\t\t\t\tconst svg = `/bitrix/images/${moduleId}/slider/${svgName}.svg`;\n\t\t\t\tthis.layout.loader = this.createSvgLoader(svg);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.layout.loader = this.createDefaultLoader();\n\t\t\t}\n\t\t}\n\n\t\tDom.append(this.layout.loader, this.getContainer());\n\t}\n\n\tcreateSvgLoader(svg): HTMLElement\n\t{\n\t\treturn Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: 'side-panel-loader',\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tDom.create('div', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'side-panel-loader-container',\n\t\t\t\t\t},\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tbackgroundImage: `url(\"${svg}\")`,\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t}\n\n\tcreateDefaultLoader(): HTMLElement\n\t{\n\t\treturn Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: 'side-panel-loader',\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tDom.create('div', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'side-panel-default-loader-container',\n\t\t\t\t\t},\n\t\t\t\t\thtml:\n\t\t\t\t\t\t'<svg class=\"side-panel-default-loader-circular\" viewBox=\"25 25 50 50\">'\n\t\t\t\t\t\t+ '<circle '\n\t\t\t\t\t\t\t+ 'class=\"side-panel-default-loader-path\" '\n\t\t\t\t\t\t\t+ 'cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-miterlimit=\"10\"'\n\t\t\t\t\t\t+ '/>'\n\t\t\t\t\t\t+ '</svg>',\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcreateOldLoader(loader: string): HTMLElement\n\t{\n\t\tif (loader === 'crm-entity-details-loader')\n\t\t{\n\t\t\treturn Dom.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: `side-panel-loader ${loader}`,\n\t\t\t\t},\n\t\t\t\tchildren: [\n\t\t\t\t\tDom.create('img', {\n\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\tsrc:\n\t\t\t\t\t\t\t\t'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAA1BMVEX'\n\t\t\t\t\t\t\t\t+ '///+nxBvIAAAAAXRSTlMAQObYZgAAAAtJREFUeAFjGMQAAACcAAG25ruvAAAAAElFTkSuQmCC',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tclassName: 'side-panel-loader-mask top',\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t\tDom.create('div', {\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tclassName: 'side-panel-loader-bg left',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\tDom.create('img', {\n\t\t\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\t\t\tsrc:\n\t\t\t\t\t\t\t\t\t\t'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAA1B'\n\t\t\t\t\t\t\t\t\t\t+ 'MVEX///+nxBvIAAAAAXRSTlMAQObYZgAAAAtJREFUeAFjGMQAAACcAAG25ruvAAAAAElFTkSuQmCC',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\tclassName: 'side-panel-loader-mask left',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t],\n\t\t\t\t\t}),\n\t\t\t\t\tDom.create('div', {\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tclassName: 'side-panel-loader-bg right',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\tDom.create('img', {\n\t\t\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\t\t\tsrc:\n\t\t\t\t\t\t\t\t\t\t'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAA1BM'\n\t\t\t\t\t\t\t\t\t\t+ 'VEX///+nxBvIAAAAAXRSTlMAQObYZgAAAAtJREFUeAFjGMQAAACcAAG25ruvAAAAAElFTkSuQmCC',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\tclassName: 'side-panel-loader-mask right',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t],\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\n\t\treturn Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: `side-panel-loader ${loader}`,\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tDom.create('img', {\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tsrc:\n\t\t\t\t\t\t\t'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAA1BMVEX'\n\t\t\t\t\t\t\t+ '///+nxBvIAAAAAXRSTlMAQObYZgAAAAtJREFUeAFjGMQAAACcAAG25ruvAAAAAElFTkSuQmCC',\n\t\t\t\t\t},\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'side-panel-loader-mask left',\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tDom.create('img', {\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tsrc:\n\t\t\t\t\t\t\t'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAA'\n\t\t\t\t\t\t\t+ '1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAAAtJREFUeAFjGMQAAACcAAG25ruvAAAAAElFTkSuQmCC',\n\t\t\t\t\t},\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'side-panel-loader-mask right',\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcreateHTMLLoader(loader: HTMLElement): HTMLElement\n\t{\n\t\treturn Dom.create('div', {\n\t\t\tchildren: [\n\t\t\t\tloader,\n\t\t\t],\n\t\t});\n\t}\n\n\tloaderExists(loader): boolean\n\t{\n\t\tif (!Type.isStringFilled(loader))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (let i = 0; i < document.styleSheets.length; i++)\n\t\t{\n\t\t\tconst style = document.styleSheets[i];\n\t\t\tif (!Type.isStringFilled(style.href) || !style.href.includes('sidepanel'))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet rules = null;\n\t\t\ttry\n\t\t\t{\n\t\t\t\trules = style.rules || style.cssRules;\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\trules = style.cssRules;\n\t\t\t\t}\n\t\t\t\tcatch\n\t\t\t\t{\n\t\t\t\t\trules = [];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const rule of rules)\n\t\t\t{\n\t\t\t\tif (Type.isStringFilled(rule.selectorText) && rule.selectorText.includes(loader))\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tremoveLoader()\n\t{\n\t\tDom.remove(this.layout.loader);\n\t\tthis.layout.loader = null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tanimateOpening()\n\t{\n\t\tif (this.isPrintable())\n\t\t{\n\t\t\tthis.showPrintBtn();\n\t\t}\n\n\t\tif (this.animation)\n\t\t{\n\t\t\tthis.animation.stop();\n\t\t}\n\n\t\tthis.fireEvent('onOpening');\n\n\t\tif (Browser.isMobile())\n\t\t{\n\t\t\tthis.#currentAnimationState = this.#endAnimationState;\n\t\t\tthis.animateStep(this.#currentAnimationState);\n\t\t\tthis.completeAnimation();\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#currentAnimationState = (\n\t\t\tthis.#currentAnimationState === null\n\t\t\t\t? this.#startAnimationState\n\t\t\t\t: this.#currentAnimationState\n\t\t);\n\n\t\tthis.animation = new BX.easing({\n\t\t\tduration: this.animationDuration,\n\t\t\tstart: this.#currentAnimationState,\n\t\t\tfinish: this.#endAnimationState,\n\t\t\tstep: (state) => {\n\t\t\t\tthis.#currentAnimationState = state;\n\t\t\t\tthis.animateStep(state);\n\t\t\t},\n\t\t\tcomplete: () => {\n\t\t\t\tthis.completeAnimation();\n\t\t\t},\n\t\t});\n\n\t\tif (this.animationName === 'scale' && Type.isStringFilled(this.animationOptions.origin))\n\t\t{\n\t\t\tDom.style(this.getContainer(), 'transform-origin', this.animationOptions.origin);\n\t\t}\n\n\t\tthis.animation.animate();\n\t}\n\n\t/**\n\t * @private\n\t * @param {object} state\n\t */\n\tanimateStep(state)\n\t{\n\t\tif (this.animationName === 'scale')\n\t\t{\n\t\t\tDom.style(this.getContainer(), 'transform', `scale(${state.scale / 100})`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.style(this.getContainer(), 'transform', `translate(${state.translateX}%, ${state.translateY}%)`);\n\t\t}\n\n\t\tif (this.getOverlayAnimation())\n\t\t{\n\t\t\tif (this.overlayBgCallback === null)\n\t\t\t{\n\t\t\t\tconst opacity = parseInt(state.opacity / 100 * 255, 10).toString(16).padStart(2, 0);\n\t\t\t\tDom.style(this.getOverlay(), 'background-color', `${this.overlayBgColor}${opacity}`);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.style(this.getOverlay(), 'background', this.overlayBgCallback(state, this));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param callback\n\t */\n\tcompleteAnimation(callback)\n\t{\n\t\tthis.animation = null;\n\t\tif (this.isOpen())\n\t\t{\n\t\t\tthis.#currentAnimationState = this.#endAnimationState;\n\t\t\tthis.maximizing = false;\n\n\t\t\tDom.removeClass(this.getOverlay(), '--opening');\n\t\t\tDom.addClass(this.getOverlay(), '--open');\n\t\t\tif (this.animationName === 'scale')\n\t\t\t{\n\t\t\t\tconst state = this.#getAnimationState('end');\n\t\t\t\tDom.style(\n\t\t\t\t\tthis.getContainer(),\n\t\t\t\t\t{\n\t\t\t\t\t\t'transform-origin': null,\n\t\t\t\t\t\ttransform: `translate(${state.translateX}%, ${state.translateY}%)`,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.firePageEvent('onBeforeOpenComplete');\n\t\t\tthis.fireFrameEvent('onBeforeOpenComplete');\n\n\t\t\tthis.firePageEvent('onOpenComplete');\n\t\t\tthis.fireFrameEvent('onOpenComplete');\n\n\t\t\tif (!this.isLoaded())\n\t\t\t{\n\t\t\t\tthis.showLoader();\n\t\t\t}\n\n\t\t\tif (this.isFocusable())\n\t\t\t{\n\t\t\t\tthis.focus();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#currentAnimationState = this.#startAnimationState;\n\t\t\tthis.minimizing = false;\n\n\t\t\tDom.removeClass(this.getOverlay(), '--open --opening --closing');\n\t\t\tif (this.animationName === 'scale')\n\t\t\t{\n\t\t\t\tconst state = this.#getAnimationState('start');\n\t\t\t\tDom.style(\n\t\t\t\t\tthis.getContainer(),\n\t\t\t\t\t{\n\t\t\t\t\t\t'transform-origin': null,\n\t\t\t\t\t\ttransform: `translate(${state.translateX}%, ${state.translateY}%)`,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tDom.style(\n\t\t\t\tthis.getContainer(),\n\t\t\t\t{\n\t\t\t\t\twidth: null,\n\t\t\t\t\tright: null,\n\t\t\t\t\topacity: null,\n\t\t\t\t\t'max-width': null,\n\t\t\t\t\t'min-width': null,\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tDom.style(this.getCloseBtn(), 'opacity', null);\n\n\t\t\tthis.firePageEvent('onBeforeCloseComplete');\n\t\t\tthis.fireFrameEvent('onBeforeCloseComplete');\n\n\t\t\tthis.firePageEvent('onCloseComplete');\n\t\t\tthis.fireFrameEvent('onCloseComplete');\n\n\t\t\tif (Type.isFunction(callback))\n\t\t\t{\n\t\t\t\tcallback(this);\n\t\t\t}\n\n\t\t\tif (!this.isCacheable())\n\t\t\t{\n\t\t\t\tthis.destroy();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @internal\n\t */\n\tfirePageEvent(eventName: string): SliderEvent\n\t{\n\t\tconst sliderEvent = this.getEvent(eventName);\n\t\tif (sliderEvent === null)\n\t\t{\n\t\t\tthrow new Error('\\'eventName\\' is invalid.');\n\t\t}\n\n\t\tEventEmitter.emit(\n\t\t\tthis,\n\t\t\tsliderEvent.getFullName().toLowerCase(),\n\t\t\tnew BaseEvent({ data: [sliderEvent], compatData: [sliderEvent] }),\n\t\t);\n\n\t\t// Events for compatibility\n\t\tif (['onClose', 'onOpen'].includes(eventName))\n\t\t{\n\t\t\tEventEmitter.emit(`BX.Bitrix24.PageSlider:${eventName}`, new BaseEvent({ data: [this], compatData: [this] }));\n\t\t\tEventEmitter.emit(`Bitrix24.Slider:${eventName}`, new BaseEvent({ data: [this], compatData: [this] }));\n\t\t}\n\n\t\treturn sliderEvent;\n\t}\n\n\t/**\n\t * @internal\n\t */\n\tfireFrameEvent(eventName): SliderEvent\n\t{\n\t\tconst sliderEvent = this.getEvent(eventName);\n\t\tif (sliderEvent === null)\n\t\t{\n\t\t\tthrow new Error('\\'eventName\\' is invalid.');\n\t\t}\n\n\t\tif (this.allowCrossOrigin)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst frameWindow = this.getFrameWindow();\n\t\tif (frameWindow && frameWindow.BX && frameWindow.BX.onCustomEvent)\n\t\t{\n\t\t\tframeWindow.BX.onCustomEvent(this, sliderEvent.getFullName(), [sliderEvent]);\n\n\t\t\t// Events for compatibility\n\t\t\tif (['onClose', 'onOpen'].includes(eventName))\n\t\t\t{\n\t\t\t\tframeWindow.BX.onCustomEvent(`BX.Bitrix24.PageSlider:${eventName}`, [this]);\n\t\t\t\tframeWindow.BX.onCustomEvent(`Bitrix24.Slider:${eventName}`, [this]); // Compatibility\n\t\t\t}\n\t\t}\n\n\t\treturn sliderEvent;\n\t}\n\n\tfireEvent(eventName)\n\t{\n\t\tthis.firePageEvent(eventName);\n\t\tthis.fireFrameEvent(eventName);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetEvent(eventName: string | SliderEvent): SliderEvent | null\n\t{\n\t\tlet event = null;\n\t\tif (Type.isStringFilled(eventName))\n\t\t{\n\t\t\tevent = new SliderEvent();\n\t\t\tevent.setSlider(this);\n\t\t\tevent.setName(eventName);\n\t\t}\n\t\telse if (eventName instanceof SliderEvent)\n\t\t{\n\t\t\tevent = eventName;\n\t\t}\n\n\t\treturn event;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcanOpen(): boolean\n\t{\n\t\treturn this.canAction('open');\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcanClose(): boolean\n\t{\n\t\treturn this.canAction('close');\n\t}\n\n\t/**\n\t * @package\n\t * @returns {boolean}\n\t */\n\tcanCloseByEsc(): boolean\n\t{\n\t\treturn this.canAction('closeByEsc');\n\t}\n\n\t/**\n\t * @private\n\t * @param {string} action\n\t * @returns {boolean}\n\t */\n\tcanAction(action: string): boolean\n\t{\n\t\tif (!Type.isStringFilled(action))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst eventName = `on${action.charAt(0).toUpperCase()}${action.slice(1)}`;\n\n\t\tconst pageEvent = this.firePageEvent(eventName);\n\t\tconst frameEvent = this.fireFrameEvent(eventName);\n\n\t\treturn pageEvent.isActionAllowed() && (!frameEvent || frameEvent.isActionAllowed());\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleCrossOriginWindowMessage(event: MessageEvent)\n\t{\n\t\tconst frameUrl = new URL(this.url);\n\t\tconst eventUrl = new URL(event.origin);\n\t\tif (eventUrl.origin !== frameUrl.origin)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst message = { type: '', data: undefined };\n\t\tif (Type.isString(event.data))\n\t\t{\n\t\t\tmessage.type = event.data;\n\t\t}\n\t\telse if (Type.isPlainObject(event.data))\n\t\t{\n\t\t\tmessage.type = event.data.type;\n\t\t\tmessage.data = event.data.data;\n\t\t}\n\n\t\tswitch (message.type)\n\t\t{\n\t\t\tcase 'BX:SidePanel:close':\n\t\t\t{\n\t\t\t\tthis.close();\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'BX:SidePanel:load:force':\n\t\t\t{\n\t\t\t\tif (!this.isLoaded() && !this.isDestroyed())\n\t\t\t\t{\n\t\t\t\t\tthis.handleFrameLoad();\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'BX:SidePanel:data:send':\n\t\t\t{\n\t\t\t\tconst pageEvent = new MessageEvent({ sender: this, data: message.data });\n\t\t\t\tpageEvent.setName('onXDomainMessage');\n\t\t\t\tthis.firePageEvent(pageEvent);\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t\t// No default\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param {Event} event\n\t */\n\thandleFrameLoad(event)\n\t{\n\t\tif (this.loaded)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst frameWindow = this.iframe.contentWindow;\n\t\tconst iframeLocation = frameWindow.location;\n\n\t\tif (this.allowCrossOrigin)\n\t\t{\n\t\t\tEvent.bind(window, 'message', this.handleCrossOriginWindowMessage);\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\tif (iframeLocation.toString() === 'about:blank')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tif (this.allowCrossOrigin)\n\t\t\t{\n\t\t\t\tthis.loaded = true;\n\t\t\t\tthis.closeLoader();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn('SidePanel: Try to use \"allowCrossOrigin: true\" option.');\n\n\t\t\tthrow e;\n\t\t}\n\n\t\tEvent.bind(frameWindow, 'keydown', this.handleFrameKeyDown);\n\t\tEvent.bind(frameWindow, 'focus', this.handleFrameFocus);\n\t\tEvent.bind(frameWindow, 'unload', this.handleFrameUnload);\n\n\t\tif (Browser.isMobile())\n\t\t{\n\t\t\tframeWindow.document.body.style.paddingBottom = `${window.innerHeight * 2 / 3}px`;\n\t\t}\n\n\t\tconst iframeUrl = iframeLocation.pathname + iframeLocation.search + iframeLocation.hash;\n\t\tthis.iframeSrc = this.refineUrl(iframeUrl);\n\t\tthis.url = this.iframeSrc;\n\n\t\tif (this.isPrintable())\n\t\t{\n\t\t\tthis.injectPrintStyles();\n\t\t}\n\n\t\tthis.loaded = true;\n\t\tthis.loadedCnt++;\n\n\t\tif (this.loadedCnt > 1)\n\t\t{\n\t\t\tthis.firePageEvent('onLoad');\n\t\t\tthis.fireFrameEvent('onLoad');\n\n\t\t\tthis.firePageEvent('onReload');\n\t\t\tthis.fireFrameEvent('onReload');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.firePageEvent('onLoad');\n\t\t\tthis.fireFrameEvent('onLoad');\n\t\t}\n\n\t\tif (this.isFocusable())\n\t\t{\n\t\t\tthis.focus();\n\t\t}\n\n\t\tthis.closeLoader();\n\t}\n\n\t/**\n\t * @private\n\t */\n\tlistenIframeLoading()\n\t{\n\t\tif (this.allowCrossOrigin)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst isLoaded = setInterval(() => {\n\t\t\tif (this.isLoaded() || this.isDestroyed())\n\t\t\t{\n\t\t\t\tclearInterval(isLoaded);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.iframe.contentWindow.location.toString() === 'about:blank')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tthis.iframe.contentWindow.document.readyState === 'complete'\n\t\t\t\t|| this.iframe.contentWindow.document.readyState === 'interactive'\n\t\t\t)\n\t\t\t{\n\t\t\t\tclearInterval(isLoaded);\n\t\t\t\tthis.handleFrameLoad();\n\t\t\t}\n\t\t}, 200);\n\t}\n\n\t/**\n\t * @private\n\t * @param {Event} event\n\t */\n\thandleFrameUnload(event)\n\t{\n\t\tthis.loaded = false;\n\t\tthis.listenIframeLoading();\n\t}\n\n\t/**\n\t * @private\n\t * @param {Event} event\n\t */\n\thandleFrameKeyDown(event)\n\t{\n\t\tif (event.keyCode !== 27)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst framePopupManager = this.getWindow().BX?.Main?.PopupManager;\n\t\tif (framePopupManager)\n\t\t{\n\t\t\tconst popups = framePopupManager.getPopups();\n\t\t\tfor (const popup of popups)\n\t\t\t{\n\t\t\t\tif (popup.isShown())\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst centerX = this.getWindow().document.documentElement.clientWidth / 2;\n\t\tconst centerY = this.getWindow().document.documentElement.clientHeight / 2;\n\t\tconst element = this.getWindow().document.elementFromPoint(centerX, centerY);\n\n\t\tif (Dom.hasClass(element, 'bx-core-dialog-overlay') || Dom.hasClass(element, 'bx-core-window'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (element.closest('.bx-core-window'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.firePageEvent('onEscapePress');\n\t\tthis.fireFrameEvent('onEscapePress');\n\t}\n\n\t/**\n\t * @private\n\t * @param {BaseEvent} event\n\t */\n\thandlePopupInit(event)\n\t{\n\t\tconst data = event.getCompatData();\n\t\tconst bindElement = data[1];\n\t\tconst params = data[2];\n\n\t\tif (\n\t\t\t!Type.isElementNode(params.targetContainer)\n\t\t\t&& Type.isElementNode(bindElement)\n\t\t\t&& this.getContentContainer().contains(bindElement)\n\t\t)\n\t\t{\n\t\t\tparams.targetContainer = this.getContentContainer();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param {Event} event\n\t */\n\thandleFrameFocus(event)\n\t{\n\t\tthis.firePageEvent('onFrameFocus');\n\t}\n\n\t/**\n\t * @private\n\t * @param {MouseEvent} event\n\t */\n\thandleOverlayClick(event)\n\t{\n\t\tif (event.target === this.getOverlay())\n\t\t{\n\t\t\tif (this.animation === null)\n\t\t\t{\n\t\t\t\tthis.close();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param {MouseEvent} event\n\t */\n\thandlePrintBtnClick(event)\n\t{\n\t\tif (this.isSelfContained())\n\t\t{\n\t\t\tconst frame = document.createElement('iframe');\n\t\t\tframe.src = 'about:blank';\n\t\t\tframe.name = 'sidepanel-print-frame';\n\n\t\t\tDom.style(frame, 'display', 'none');\n\t\t\tDom.append(frame, document.body);\n\n\t\t\tconst frameWindow = frame.contentWindow;\n\t\t\tconst frameDoc = frameWindow.document;\n\t\t\tframeDoc.open();\n\t\t\tframeDoc.write('<html><head>');\n\n\t\t\tlet headTags = '';\n\t\t\tconst links = document.head.querySelectorAll('link, style');\n\t\t\tfor (const link of links)\n\t\t\t{\n\t\t\t\theadTags += link.outerHTML;\n\t\t\t}\n\n\t\t\theadTags += '<style>html, body { background: #fff !important; height: 100%; }</style>';\n\n\t\t\tframeDoc.write(headTags);\n\n\t\t\tframeDoc.write('</head><body>');\n\t\t\tframeDoc.write(this.getContentContainer().innerHTML);\n\t\t\tframeDoc.write('</body></html>');\n\t\t\tframeDoc.close();\n\n\t\t\tframeWindow.focus();\n\t\t\tframeWindow.print();\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tDom.remove(frame);\n\t\t\t\twindow.focus();\n\t\t\t}, 1000);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.focus();\n\t\t\tthis.getFrameWindow().print();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tinjectPrintStyles()\n\t{\n\t\tconst frameDocument = this.getFrameWindow().document;\n\n\t\tlet bodyClass = '';\n\n\t\tconst classList = frameDocument.body.classList;\n\t\tfor (const className of classList)\n\t\t{\n\t\t\tbodyClass += `.${className}`;\n\t\t}\n\n\t\tconst bodyStyle = `@media print { body${bodyClass} { `\n\t\t\t+ 'background: #fff !important; '\n\t\t\t+ '-webkit-print-color-adjust: exact;'\n\t\t\t+ 'color-adjust: exact; '\n\t\t\t+ '} }';\n\n\t\tconst style = frameDocument.createElement('style');\n\t\tstyle.type = 'text/css';\n\t\tif (style.styleSheet)\n\t\t{\n\t\t\tstyle.styleSheet.cssText = bodyStyle;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstyle.appendChild(frameDocument.createTextNode(bodyStyle));\n\t\t}\n\n\t\tframeDocument.head.appendChild(style);\n\t}\n\n\trefineUrl(url: string): string\n\t{\n\t\tif (Type.isStringFilled(url) && /IFRAME/.test(url))\n\t\t{\n\t\t\treturn Uri.removeParam(url, ['IFRAME', 'IFRAME_TYPE']);\n\t\t}\n\n\t\treturn url;\n\t}\n}\n","import { SliderManager } from './slider-manager';\nimport { PageObject } from 'main.pageobject';\n\nlet instance = null;\n\nexport function getInstance(): SliderManager\n{\n\tconst topWindow = PageObject.getRootWindow();\n\tif (topWindow !== window)\n\t{\n\t\treturn topWindow.BX.SidePanel.Instance;\n\t}\n\n\tif (instance === null)\n\t{\n\t\tinstance = new SliderManager();\n\t}\n\n\treturn instance;\n}\n","import { Type, Cache, Text, Tag, Dom, type JsonObject } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { PopupManager, Popup } from 'main.popup';\n\nimport { getInstance } from './get-instance';\nimport { type ToolbarItemOptions } from './types/toolbar-item-options';\n\nexport class ToolbarItem extends EventEmitter\n{\n\tconstructor(itemOptions: ToolbarItemOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Main.SidePanel.ToolbarItem');\n\n\t\tconst options = Type.isPlainObject(itemOptions) ? itemOptions : {};\n\n\t\tthis.id = Type.isStringFilled(options.id) ? options.id : `toolbar-item-${Text.getRandom().toLowerCase()}`;\n\t\tthis.title = '';\n\t\tthis.url = '';\n\t\tthis.entityType = '';\n\t\tthis.entityId = 0;\n\t\tthis.entityName = '';\n\n\t\tthis.refs = new Cache.MemoryCache();\n\t\tthis.rendered = false;\n\n\t\tthis.setTitle(options.title);\n\t\tthis.setUrl(options.url);\n\t\tthis.setEntityType(options.entityType);\n\t\tthis.setEntityId(options.entityId);\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.id;\n\t}\n\n\tgetUrl(): string\n\t{\n\t\treturn this.url;\n\t}\n\n\tsetUrl(url): void\n\t{\n\t\tif (Type.isStringFilled(url))\n\t\t{\n\t\t\tthis.url = url;\n\t\t\tif (this.rendered)\n\t\t\t{\n\t\t\t\tthis.getContainer().href = url;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetTitle(): string\n\t{\n\t\treturn this.title;\n\t}\n\n\tsetTitle(title): void\n\t{\n\t\tif (Type.isStringFilled(title))\n\t\t{\n\t\t\tthis.title = title;\n\t\t\tif (this.rendered)\n\t\t\t{\n\t\t\t\tthis.getTitleContainer().textContent = title;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetEntityType(): string\n\t{\n\t\treturn this.entityType;\n\t}\n\n\tsetEntityType(entityType): void\n\t{\n\t\tif (Type.isStringFilled(entityType))\n\t\t{\n\t\t\tthis.entityType = entityType;\n\t\t}\n\t}\n\n\tgetEntityId(): string | number\n\t{\n\t\treturn this.entityId;\n\t}\n\n\tsetEntityId(entityId: string | number): void\n\t{\n\t\tif (Type.isNumber(entityId) || Type.isStringFilled(entityId))\n\t\t{\n\t\t\tthis.entityId = entityId;\n\t\t}\n\t}\n\n\tgetEntityName(): string\n\t{\n\t\treturn this.entityName;\n\t}\n\n\tsetEntityName(entityName): void\n\t{\n\t\tif (Type.isStringFilled(entityName))\n\t\t{\n\t\t\tthis.entityName = entityName;\n\t\t}\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn this.refs.remember('container', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"side-panel-toolbar-item\" \n\t\t\t\t\tonclick=\"${this.handleClick.bind(this)}\"\n\t\t\t\t\tonmouseenter=\"${this.handleMouseEnter.bind(this)}\"\n\t\t\t\t\tonmouseleave=\"${this.handleMouseLeave.bind(this)}\"\n\t\t\t\t>\n\t\t\t\t\t${this.getTitleContainer()}\n\t\t\t\t\t<div class=\"side-panel-toolbar-item-remove-btn\" onclick=\"${this.handleRemoveBtnClick.bind(this)}\">\n\t\t\t\t\t\t<div class=\"ui-icon-set --cross-20\" style=\"--ui-icon-set__icon-size: 100%;\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tisRendered(): boolean\n\t{\n\t\treturn this.rendered;\n\t}\n\n\tgetTitleContainer(): HTMLElement\n\t{\n\t\treturn this.refs.remember('title', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<a \n\t\t\t\t\tclass=\"side-panel-toolbar-item-title\"\n\t\t\t\t\thref=\"${encodeURI(this.getUrl())}\"\n\t\t\t\t\tdata-slider-ignore-autobinding=\"true\"\n\t\t\t\t>${Text.encode(this.getTitle())}</a>\n\t\t\t`;\n\t\t});\n\t}\n\n\tprependTo(node)\n\t{\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\tDom.prepend(this.getContainer(), node);\n\t\t\tthis.rendered = true;\n\t\t}\n\t}\n\n\tappendTo(node): void\n\t{\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\tDom.append(this.getContainer(), node);\n\t\t\tthis.rendered = true;\n\t\t}\n\t}\n\n\tinsertBefore(node): void\n\t{\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\tDom.insertBefore(this.getContainer(), node);\n\t\t\tthis.rendered = true;\n\t\t}\n\t}\n\n\tinsertAfter(node): void\n\t{\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\tDom.insertAfter(this.getContainer(), node);\n\t\t\tthis.rendered = true;\n\t\t}\n\t}\n\n\tremove(): void\n\t{\n\t\tDom.remove(this.getContainer());\n\t\tthis.rendered = false;\n\t}\n\n\tshowTooltip(): void\n\t{\n\t\tconst targetNode = this.getContainer();\n\t\tconst rect = targetNode.getBoundingClientRect();\n\t\tconst targetNodeWidth = rect.width;\n\t\tconst popupWidth = Math.min(Math.max(100, this.getTitleContainer().scrollWidth + 20), 300);\n\n\t\tconst hint = PopupManager.create({\n\t\t\tid: 'sidepanel-toolbar-item-hint',\n\t\t\tcacheable: false,\n\t\t\tbindElement: rect,\n\t\t\tbindOptions: {\n\t\t\t\tforceBindPosition: true,\n\t\t\t\tforceTop: true,\n\t\t\t\tposition: 'top',\n\t\t\t},\n\t\t\twidth: popupWidth,\n\t\t\tcontent: Tag.render`\n\t\t\t\t<div class=\"sidepanel-toolbar-item-hint\">\n\t\t\t\t\t<div class=\"sidepanel-toolbar-item-hint-title\">${Text.encode(this.getEntityName())}</div>\n\t\t\t\t\t<div class=\"sidepanel-toolbar-item-hint-content\">${Text.encode(this.getTitle())}</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t\tdarkMode: true,\n\t\t\tfixed: true,\n\t\t\toffsetTop: 0,\n\t\t\tevents: {\n\t\t\t\tonShow: (event) => {\n\t\t\t\t\tconst popup = event.getTarget();\n\t\t\t\t\tconst offsetLeft = (targetNodeWidth / 2) - (popupWidth / 2);\n\t\t\t\t\tconst angleShift = Popup.getOption('angleLeftOffset') - Popup.getOption('angleMinTop');\n\n\t\t\t\t\tpopup.setAngle({ offset: popupWidth / 2 - angleShift });\n\t\t\t\t\tpopup.setOffset({ offsetLeft: offsetLeft + Popup.getOption('angleLeftOffset') });\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\thint.show();\n\t\thint.adjustPosition();\n\t}\n\n\thideTooltip()\n\t{\n\t\tconst hint: Popup = PopupManager.getPopupById('sidepanel-toolbar-item-hint');\n\t\tif (hint)\n\t\t{\n\t\t\thint.close();\n\t\t}\n\t}\n\n\thandleClick(event): void\n\t{\n\t\tif (event.ctrlKey || event.metaKey)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault();\n\t\tgetInstance().maximize(this.getUrl());\n\t}\n\n\thandleMouseEnter(): void\n\t{\n\t\tthis.showTooltip();\n\t}\n\n\thandleMouseLeave(): void\n\t{\n\t\tthis.hideTooltip();\n\t}\n\n\thandleRemoveBtnClick(event): void\n\t{\n\t\tevent.stopPropagation();\n\t\tthis.emit('onRemove');\n\t}\n\n\ttoJSON(): JsonObject\n\t{\n\t\treturn {\n\t\t\ttitle: this.getTitle(),\n\t\t\turl: this.getUrl(),\n\t\t\tentityType: this.getEntityType(),\n\t\t\tentityId: this.getEntityId(),\n\t\t};\n\t}\n}\n","import {\n\tType,\n\tTag,\n\tText,\n\tCache,\n\tLoc,\n\tDom,\n\tRuntime,\n\tZIndexManager,\n\tEvent,\n\tReflection,\n\tajax as Ajax,\n\ttype JsonObject,\n} from 'main.core';\n\nimport { EventEmitter } from 'main.core.events';\nimport { MenuManager, PopupManager, Popup, type Menu } from 'main.popup';\n\nimport { ToolbarItem } from './toolbar-item';\nimport { getInstance } from './get-instance';\n\nimport { type ToolbarItemOptions } from './types/toolbar-item-options';\nimport { type ToolbarOptions } from './types/toolbar-options';\n\nexport class Toolbar extends EventEmitter\n{\n\tconstructor(toolbarOptions: ToolbarOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Main.SidePanel.Toolbar');\n\n\t\tconst options = Type.isPlainObject(toolbarOptions) ? toolbarOptions : {};\n\t\tif (!Type.isStringFilled(options.context))\n\t\t{\n\t\t\tthrow new Error('BX.Main.SidePanel.Toolbar: \"context\" parameter is required.');\n\t\t}\n\n\t\tthis.context = options.context;\n\t\tthis.items = [];\n\t\tthis.rendered = false;\n\t\tthis.refs = new Cache.MemoryCache();\n\t\tthis.container = null;\n\t\tthis.lsKey = 'bx.sidepanel.toolbar.item';\n\n\t\tthis.initialPosition = { right: '5px', bottom: '20px' };\n\t\tthis.shiftedPosition = { right: '5px', bottom: '20px' };\n\t\tif (Type.isPlainObject(options.position))\n\t\t{\n\t\t\tthis.initialPosition = options.position;\n\t\t}\n\n\t\tif (Type.isPlainObject(options.shiftedPosition))\n\t\t{\n\t\t\tthis.shiftedPosition = options.shiftedPosition;\n\t\t}\n\n\t\tthis.collapsed = options.collapsed !== false;\n\t\tthis.muted = false;\n\t\tthis.shifted = false;\n\n\t\tthis.maxVisibleItems = Type.isNumber(options.maxVisibleItems) ? Math.max(options.maxVisibleItems, 1) : 5;\n\n\t\tthis.addItems(options.items);\n\n\t\tconst item = this.restoreItemFromLocalStorage();\n\t\tif (item !== null)\n\t\t{\n\t\t\tconst { entityType, entityId } = item;\n\t\t\tif (this.getItem(entityType, entityId))\n\t\t\t{\n\t\t\t\tthis.clearLocalStorage();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.minimizeItem(item);\n\t\t\t}\n\t\t}\n\t}\n\n\tshow(): void\n\t{\n\t\tDom.addClass(this.getContainer(), '--show');\n\t}\n\n\tisShown(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getContainer(), '--show');\n\t}\n\n\thide(): void\n\t{\n\t\tDom.removeClass(this.getContainer(), '--show');\n\t}\n\n\tmute(): boolean\n\t{\n\t\tif (this.muted)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.muted = true;\n\t\tDom.addClass(this.getContainer(), '--muted');\n\n\t\treturn true;\n\t}\n\n\tunmute(): boolean\n\t{\n\t\tif (!this.muted)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.muted = false;\n\t\tDom.removeClass(this.getContainer(), '--muted');\n\n\t\treturn true;\n\t}\n\n\tisMuted(): boolean\n\t{\n\t\treturn this.muted;\n\t}\n\n\ttoggleMuteness(): boolean\n\t{\n\t\tif (this.canShowOnTop())\n\t\t{\n\t\t\treturn this.unmute();\n\t\t}\n\n\t\treturn this.mute();\n\t}\n\n\tshift(): boolean\n\t{\n\t\tif (this.shifted)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.shifted = true;\n\t\tDom.addClass(this.getContainer(), '--shifted');\n\t\tDom.style(document.body, '--side-panel-toolbar-shifted', 1);\n\t\tthis.setPosition(this.getContainer(), this.shiftedPosition);\n\n\t\treturn true;\n\t}\n\n\tunshift(): boolean\n\t{\n\t\tif (!this.shifted)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.shifted = false;\n\t\tDom.removeClass(this.getContainer(), '--shifted');\n\t\tDom.style(document.body, '--side-panel-toolbar-shifted', null);\n\t\tthis.setPosition(this.getContainer(), this.initialPosition);\n\n\t\treturn true;\n\t}\n\n\tisShifted(): boolean\n\t{\n\t\treturn this.shifted;\n\t}\n\n\ttoggleShift(): boolean\n\t{\n\t\tconst sliders = getInstance().getOpenSliders();\n\t\tif (sliders.length === 0 || (sliders.length === 1 && !sliders[0].isOpen()))\n\t\t{\n\t\t\treturn this.unshift();\n\t\t}\n\n\t\treturn this.shift();\n\t}\n\n\tsetPosition(container: HTMLElement, position): boolean\n\t{\n\t\tfor (const prop of ['top', 'right', 'bottom', 'left'])\n\t\t{\n\t\t\tDom.style(container, prop, null);\n\t\t\tif (Type.isStringFilled(position[prop]))\n\t\t\t{\n\t\t\t\tDom.style(container, prop, position[prop]);\n\t\t\t}\n\t\t}\n\t}\n\n\tcollapse(immediately: boolean = false): void\n\t{\n\t\tif (this.collapsed)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (immediately === true)\n\t\t{\n\t\t\tDom.addClass(this.getContainer(), '--collapsed');\n\t\t\tDom.style(this.getContentContainer(), 'width', null);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst width = this.getContentContainer().scrollWidth;\n\t\t\tDom.style(this.getContentContainer(), 'width', `${width}px`);\n\n\t\t\tEvent.unbindAll(this.getContentContainer(), 'transitionend');\n\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\tDom.style(this.getContentContainer(), 'width', 0);\n\t\t\t\t\tEvent.bindOnce(this.getContentContainer(), 'transitionend', () => {\n\t\t\t\t\t\tDom.addClass(this.getContainer(), '--collapsed');\n\t\t\t\t\t\tDom.style(this.getContentContainer(), 'width', null);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tthis.collapsed = true;\n\t}\n\n\texpand(immediately: boolean = false): void\n\t{\n\t\tif (!this.collapsed)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (immediately === true)\n\t\t{\n\t\t\tDom.removeClass(this.getContainer(), '--collapsed');\n\t\t\tDom.style(this.getContentContainer(), 'width', null);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.getContainer(), '--collapsed');\n\t\t\tconst width = this.getContentContainer().scrollWidth;\n\t\t\tDom.style(this.getContentContainer(), 'width', 0);\n\n\t\t\tEvent.unbindAll(this.getContentContainer(), 'transitionend');\n\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\tDom.style(this.getContentContainer(), 'width', `${width}px`);\n\t\t\t\t\tEvent.bindOnce(this.getContentContainer(), 'transitionend', () => {\n\t\t\t\t\t\tDom.style(this.getContentContainer(), 'width', null);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tthis.collapsed = false;\n\t}\n\n\ttoggle(): void\n\t{\n\t\tif (this.collapsed)\n\t\t{\n\t\t\tthis.request('expand');\n\t\t\tthis.expand();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.request('collapse');\n\t\t\tthis.collapse();\n\t\t}\n\t}\n\n\tisCollapsed(): boolean\n\t{\n\t\treturn this.collapsed;\n\t}\n\n\tgetItems()\n\t{\n\t\treturn this.items;\n\t}\n\n\tgetItemsCount(): number\n\t{\n\t\treturn this.items.length;\n\t}\n\n\taddItems(itemsOptions)\n\t{\n\t\tif (Type.isArrayFilled(itemsOptions))\n\t\t{\n\t\t\titemsOptions.forEach((itemOptions) => {\n\t\t\t\tthis.addItem(itemOptions);\n\t\t\t});\n\t\t}\n\t}\n\n\taddItem(itemOptions: ToolbarItemOptions): ToolbarItem | null\n\t{\n\t\tconst item = this.createItem(itemOptions);\n\t\tif (item === null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.items.push(item);\n\n\t\tif (this.rendered)\n\t\t{\n\t\t\tthis.redraw();\n\t\t}\n\n\t\treturn item;\n\t}\n\n\t/**\n\t *\n\t * @param itemOptions\n\t * @returns {ToolbarItem|null}\n\t */\n\tprependItem(itemOptions): ToolbarItem | null\n\t{\n\t\tconst item = this.createItem(itemOptions);\n\t\tif (item === null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.items.unshift(item);\n\n\t\tif (this.rendered)\n\t\t{\n\t\t\tthis.redraw();\n\t\t}\n\n\t\treturn item;\n\t}\n\n\tcreateItem(itemOptions: ToolbarItemOptions): ToolbarItem | null\n\t{\n\t\tconst options = Type.isPlainObject(itemOptions) ? itemOptions : {};\n\n\t\tif (\n\t\t\t!Type.isStringFilled(options.entityType)\n\t\t\t|| !(Type.isStringFilled(options.entityId) || Type.isNumber(options.entityId))\n\t\t\t|| !Type.isStringFilled(options.title)\n\t\t\t|| !Type.isStringFilled(options.url)\n\t\t)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst item = new ToolbarItem(options);\n\t\tif (!Type.isStringFilled(item.getEntityName()))\n\t\t{\n\t\t\tconst minimizeOptions = getInstance().getMinimizeOptions(item.getUrl());\n\t\t\tif (Type.isPlainObject(minimizeOptions) && Type.isStringFilled(minimizeOptions.entityName))\n\t\t\t{\n\t\t\t\titem.setEntityName(minimizeOptions.entityName);\n\t\t\t}\n\t\t}\n\n\t\titem.subscribe('onRemove', this.handleItemRemove.bind(this));\n\n\t\treturn item;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tminimizeItem(itemOptions: ToolbarItemOptions): ToolbarItem | null\n\t{\n\t\tconst { entityType, entityId } = itemOptions;\n\t\tlet item = this.getItem(entityType, entityId);\n\t\tconst itemExists = item !== null;\n\t\tif (!itemExists)\n\t\t{\n\t\t\titem = this.prependItem(itemOptions);\n\t\t}\n\n\t\tif (item !== null)\n\t\t{\n\t\t\tif (!itemExists)\n\t\t\t{\n\t\t\t\tthis.saveItemToLocalStorage(item);\n\t\t\t}\n\n\t\t\tthis.request('minimize', item)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif (response.status === 'success')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.clearLocalStorage();\n\t\t\t\t\t}\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.clearLocalStorage();\n\t\t\t\t\tthis.removeItem(item);\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\n\t\treturn item;\n\t}\n\n\tsaveItemToLocalStorage(item): void\n\t{\n\t\tconst cache = { item, ttl: Date.now() };\n\t\tlocalStorage.setItem(this.lsKey, JSON.stringify(cache));\n\t}\n\n\trestoreItemFromLocalStorage(): JsonObject | null\n\t{\n\t\tconst data = localStorage.getItem(this.lsKey);\n\t\tif (Type.isStringFilled(data))\n\t\t{\n\t\t\tconst { item, ttl } = JSON.parse(data);\n\t\t\tif ((Date.now() - ttl) > 10000)\n\t\t\t{\n\t\t\t\tthis.clearLocalStorage();\n\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (Type.isPlainObject(item))\n\t\t\t{\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tclearLocalStorage(): void\n\t{\n\t\tlocalStorage.removeItem(this.lsKey);\n\t}\n\n\tgetContext(): string\n\t{\n\t\treturn this.context;\n\t}\n\n\trequest(action, item, data): Promise\n\t{\n\t\tconst additional = Type.isPlainObject(data) ? data : {};\n\n\t\treturn Ajax.runAction(`main.api.sidepanel.toolbar.${action}`, {\n\t\t\tjson: {\n\t\t\t\ttoolbar: {\n\t\t\t\t\tcontext: this.getContext(),\n\t\t\t\t},\n\t\t\t\titem: item ? item.toJSON() : null,\n\t\t\t\t...additional,\n\t\t\t},\n\t\t});\n\t}\n\n\thandleItemRemove(event): void\n\t{\n\t\tconst item = event.getTarget();\n\t\titem.hideTooltip();\n\t\tthis.removeItem(item);\n\t}\n\n\thandleMenuItemRemove(event): void\n\t{\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconst itemId = event.currentTarget.dataset.menuItemId;\n\t\tconst itemToRemove = this.getItemById(itemId);\n\t\tif (itemToRemove)\n\t\t{\n\t\t\tthis.removeItem(itemToRemove);\n\t\t}\n\n\t\tconst menu = this.getMenu();\n\t\tif (menu)\n\t\t{\n\t\t\tmenu.removeMenuItem(itemId);\n\n\t\t\tconst invisibleItemsCount = this.getItems().reduce((count, item) => {\n\t\t\t\treturn item.isRendered() ? count : count + 1;\n\t\t\t}, 0);\n\n\t\t\tif (invisibleItemsCount > 0)\n\t\t\t{\n\t\t\t\tmenu.getPopupWindow().adjustPosition();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmenu.close();\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveItem(itemToRemove): void\n\t{\n\t\titemToRemove.remove();\n\t\tthis.items = this.items.filter((item) => {\n\t\t\treturn item !== itemToRemove;\n\t\t});\n\n\t\tconst restored = this.restoreItemFromLocalStorage();\n\t\tif (restored !== null)\n\t\t{\n\t\t\tconst { entityType, entityId } = restored;\n\t\t\tif (itemToRemove.getEntityType() === entityType && itemToRemove.getEntityId() === entityId)\n\t\t\t{\n\t\t\t\tthis.clearLocalStorage();\n\t\t\t}\n\t\t}\n\n\t\tif (this.rendered)\n\t\t{\n\t\t\tthis.redraw();\n\t\t\tthis.request('remove', itemToRemove);\n\n\t\t\tif (this.getItemsCount() === 0)\n\t\t\t{\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\tredraw(): void\n\t{\n\t\tlet visibleItemsCount = 0;\n\t\tfor (let i = 0; i < this.getItems().length; i++)\n\t\t{\n\t\t\tconst item = this.getItems()[i];\n\t\t\tif (visibleItemsCount >= this.maxVisibleItems)\n\t\t\t{\n\t\t\t\tif (item.isRendered())\n\t\t\t\t{\n\t\t\t\t\titem.remove();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!item.isRendered())\n\t\t\t\t{\n\t\t\t\t\tconst previousItem = this.getItems()[i - 1] || null;\n\t\t\t\t\tconst nextItem = this.getItems()[i + 1] || null;\n\t\t\t\t\tif (previousItem)\n\t\t\t\t\t{\n\t\t\t\t\t\titem.insertAfter(previousItem.getContainer());\n\t\t\t\t\t}\n\t\t\t\t\telse if (nextItem)\n\t\t\t\t\t{\n\t\t\t\t\t\t// eslint-disable-next-line @bitrix24/bitrix24-rules/no-native-dom-methods\n\t\t\t\t\t\titem.insertBefore(nextItem.getContainer());\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\titem.appendTo(this.getItemsContainer());\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvisibleItemsCount++;\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveAll(): void\n\t{\n\t\tthis.getItemsContainer().innerHTML = '';\n\t\tthis.items = [];\n\t\tthis.clearLocalStorage();\n\t}\n\n\tgetItem(entityType: string, entityId: string | number): ToolbarItem | null\n\t{\n\t\treturn this.items.find((item) => item.getEntityType() === entityType && item.getEntityId() === entityId) || null;\n\t}\n\n\tgetItemByUrl(url: string): ToolbarItem | null\n\t{\n\t\treturn this.items.find((item) => item.getUrl() === url) || null;\n\t}\n\n\tgetItemById(id: string): ToolbarItem | null\n\t{\n\t\treturn this.items.find((item) => item.getId() === id) || null;\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn this.refs.remember('container', () => {\n\t\t\tconst classes = [];\n\t\t\tif (this.collapsed)\n\t\t\t{\n\t\t\t\tclasses.push('--collapsed');\n\t\t\t}\n\n\t\t\tconst container = Tag.render`\n\t\t\t\t<div class=\"side-panel-toolbar ${classes.join(' ')}\">\n\t\t\t\t\t${this.getContentContainer()}\n\t\t\t\t\t<div class=\"side-panel-toolbar-toggle\" onclick=\"${this.handleToggleClick.bind(this)}\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tthis.setPosition(container, this.initialPosition);\n\t\t\tDom.append(container, document.body);\n\t\t\tZIndexManager.register(container, { alwaysOnTop: true });\n\t\t\tthis.rendered = true;\n\n\t\t\tconst toggleMuteness = Runtime.debounce(this.toggleMuteness, 50, this);\n\t\t\tEventEmitter.subscribe('BX.Main.Popup:onShow', toggleMuteness);\n\t\t\tEventEmitter.subscribe('BX.Main.Popup:onClose', toggleMuteness);\n\t\t\tEventEmitter.subscribe('BX.Main.Popup:onDestroy', toggleMuteness);\n\t\t\tEventEmitter.subscribe('onWindowClose', toggleMuteness);\n\t\t\tEventEmitter.subscribe('onWindowRegister', toggleMuteness);\n\n\t\t\tlet forceCollapsed = false;\n\t\t\tconst onSliderClose = () => {\n\t\t\t\tthis.toggleMuteness();\n\t\t\t\tif (this.isMuted())\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.toggleShift();\n\t\t\t\tif (!this.isShifted() && forceCollapsed)\n\t\t\t\t{\n\t\t\t\t\tforceCollapsed = false;\n\t\t\t\t\tthis.expand();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tEventEmitter.subscribe('SidePanel.Slider:onClosing', onSliderClose);\n\t\t\tEventEmitter.subscribe('SidePanel.Slider:onCloseComplete', onSliderClose);\n\t\t\tEventEmitter.subscribe('SidePanel.Slider:onDestroyComplete', onSliderClose);\n\t\t\tEventEmitter.subscribe('SidePanel.Slider:onOpening', () => {\n\t\t\t\tthis.toggleMuteness();\n\t\t\t\tif (this.isMuted())\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!this.isCollapsed())\n\t\t\t\t{\n\t\t\t\t\tforceCollapsed = true;\n\t\t\t\t\tthis.collapse();\n\t\t\t\t}\n\n\t\t\t\tthis.toggleShift();\n\t\t\t});\n\n\t\t\tEventEmitter.subscribe('BX.UI.Viewer.Controller:onBeforeShow', toggleMuteness);\n\t\t\tEventEmitter.subscribe(\n\t\t\t\t'BX.UI.Viewer.Controller:onClose',\n\t\t\t\tRuntime.debounce(this.toggleMuteness, 500, this),\n\t\t\t);\n\n\t\t\tEvent.bind(window, 'resize', Runtime.throttle(() => {\n\t\t\t\tconst menu = this.getMenu();\n\t\t\t\tif (menu !== null)\n\t\t\t\t{\n\t\t\t\t\tmenu.close();\n\t\t\t\t}\n\t\t\t}, 300));\n\n\t\t\treturn container;\n\t\t});\n\t}\n\n\tgetContentContainer(): HTMLElement\n\t{\n\t\treturn this.refs.remember('content-container', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"side-panel-toolbar-content\">\n\t\t\t\t\t<div class=\"side-panel-toolbar-collapse-btn\" onclick=\"${this.handleToggleClick.bind(this)}\">\n\t\t\t\t\t\t<div class=\"ui-icon-set --chevron-right\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.getItemsContainer()}\n\t\t\t\t\t${this.getMoreButton()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetItemsContainer(): HTMLElement\n\t{\n\t\treturn this.refs.remember('items-container', () => {\n\t\t\tconst container = Tag.render`<div class=\"side-panel-toolbar-items\"></div>`;\n\t\t\t[...this.items].slice(0, this.maxVisibleItems).forEach((item) => {\n\t\t\t\titem.appendTo(container);\n\t\t\t});\n\n\t\t\treturn container;\n\t\t});\n\t}\n\n\tgetMoreButton(): HTMLElement\n\t{\n\t\treturn this.refs.remember('more-button', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"side-panel-toolbar-more-btn\" onclick=\"${this.handleMoreBtnClick.bind(this)}\">\n\t\t\t\t\t<div class=\"ui-icon-set --more\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\thandleMoreBtnClick(event): void\n\t{\n\t\tconst targetNode = this.getMoreButton();\n\t\tconst rect = targetNode.getBoundingClientRect();\n\t\tconst targetNodeWidth = rect.width;\n\n\t\tconst items = [...this.items].filter((item) => !item.isRendered()).map((item) => {\n\t\t\tconst title = (\n\t\t\t\tType.isStringFilled(item.getEntityName())\n\t\t\t\t\t? `${item.getEntityName()}\\n${item.getTitle()}`\n\t\t\t\t\t: item.getTitle()\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\tid: item.getId(),\n\t\t\t\thtml: this.createMenuItemText(item),\n\t\t\t\ttitle,\n\t\t\t\thref: item.getUrl(),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tmenu.close();\n\t\t\t\t},\n\t\t\t};\n\t\t});\n\n\t\tif (items.length > 0)\n\t\t{\n\t\t\titems.push({\n\t\t\t\tdelimiter: true,\n\t\t\t});\n\t\t}\n\n\t\titems.push({\n\t\t\ttext: Loc.getMessage('MAIN_SIDEPANEL_REMOVE_ALL'),\n\t\t\tonclick: () => {\n\t\t\t\tthis.removeAll();\n\t\t\t\tthis.hide();\n\t\t\t\tmenu.close();\n\n\t\t\t\tthis.request('removeAll');\n\t\t\t},\n\t\t});\n\n\t\tconst menu = MenuManager.create({\n\t\t\tid: 'sidepanel-toolbar-more-btn',\n\t\t\tcacheable: false,\n\t\t\tbindElement: rect,\n\t\t\tbindOptions: {\n\t\t\t\tforceBindPosition: true,\n\t\t\t\tforceTop: true,\n\t\t\t\tposition: 'top',\n\t\t\t},\n\t\t\tmaxWidth: 260,\n\t\t\tfixed: true,\n\t\t\toffsetTop: 0,\n\t\t\tmaxHeight: 305,\n\t\t\titems,\n\t\t\tevents: {\n\t\t\t\tonShow: (event) => {\n\t\t\t\t\tconst popup = event.getTarget();\n\t\t\t\t\tconst popupWidth = popup.getPopupContainer().offsetWidth;\n\t\t\t\t\tconst offsetLeft = (targetNodeWidth / 2) - (popupWidth / 2);\n\t\t\t\t\tconst angleShift = Popup.getOption('angleLeftOffset') - Popup.getOption('angleMinTop');\n\n\t\t\t\t\tpopup.setAngle({ offset: popupWidth / 2 - angleShift });\n\t\t\t\t\tpopup.setOffset({ offsetLeft: offsetLeft + Popup.getOption('angleLeftOffset') });\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tmenu.show();\n\t}\n\n\tcanShowOnTop(): boolean\n\t{\n\t\tconst popups = PopupManager.getPopups();\n\t\tfor (const popup of popups)\n\t\t{\n\t\t\tif (!popup.isShown())\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tpopup.getId().startsWith('timeman_weekly_report_popup_')\n\t\t\t\t|| popup.getId().startsWith('timeman_daily_report_popup_')\n\t\t\t\t|| Dom.hasClass(popup.getPopupContainer(), 'b24-whatsnew__popup')\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tif (Reflection.getClass('BX.UI.Viewer.Instance') && BX.UI.Viewer.Instance.isOpen())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst sliders = getInstance().getOpenSliders();\n\t\tfor (const slider of sliders)\n\t\t{\n\t\t\tconst sliderId = slider.getUrl().toString();\n\t\t\tif (\n\t\t\t\tslider.shouldHideToolbarOnOpen()\n\t\t\t\t|| sliderId.startsWith('im:slider')\n\t\t\t\t|| sliderId.startsWith('release-slider')\n\t\t\t\t|| sliderId.startsWith('main:helper')\n\t\t\t\t|| sliderId.startsWith('ui:info_helper')\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tconst stack = ZIndexManager.getStack(document.body);\n\t\tconst components = stack === null ? [] : stack.getComponents();\n\t\tfor (const component of components)\n\t\t{\n\t\t\tif (component.getOverlay() !== null && component.getOverlay().offsetWidth > 0)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tgetMenu(): Menu | null\n\t{\n\t\treturn MenuManager.getMenuById('sidepanel-toolbar-more-btn');\n\t}\n\n\tcreateMenuItemText(item): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<span class=\"side-panel-toolbar-menu-item\">${[\n\t\t\t\tTag.render`\n\t\t\t\t\t<span class=\"side-panel-toolbar-menu-item-title\">${Text.encode(item.getTitle())}</span>\n\t\t\t\t`,\n\t\t\t\tTag.render`\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"side-panel-toolbar-menu-item-remove\"\n\t\t\t\t\t\tdata-slider-ignore-autobinding=\"true\"\n\t\t\t\t\t\tdata-menu-item-id=\"${item.getId()}\"\n\t\t\t\t\t\tonclick=\"${this.handleMenuItemRemove.bind(this)}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"ui-icon-set --cross-20\" data-slider-ignore-autobinding=\"true\"></span>\n\t\t\t\t\t</span>\n\t\t\t\t`,\n\t\t\t]}</span>\n\t\t`;\n\t}\n\n\thandleToggleClick(): void\n\t{\n\t\tthis.toggle();\n\t}\n}\n","import type { JsonObject } from 'main.core';\nimport { Type, Dom, Event, Runtime, Reflection, Browser, ajax as Ajax, Uri } from 'main.core';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\n\nimport { Slider } from './slider';\nimport type { SliderEvent } from './slider-event';\nimport { Toolbar } from './toolbar';\nimport { MessageEvent } from './message-event';\nimport type { ToolbarItem } from './toolbar-item';\nimport type { LinkOptions } from './types/link-options';\nimport type { MinimizeOptions } from './types/minimize-options';\nimport type { RuleOptions } from './types/rule-options';\n\nimport { type SliderOptions } from './types/slider-options';\n\nlet sliderClassName = null;\nlet sliderDefaultOptions: SliderOptions = null;\nlet sliderPriorityOptions: SliderOptions = null;\n\n/**\n * @namespace BX.SidePanel\n * @alias Manager\n */\nexport class SliderManager\n{\n\tconstructor()\n\t{\n\t\tthis.anchorRules = [];\n\t\tthis.anchorBinding = true;\n\n\t\tthis.openSliders = [];\n\t\tthis.lastOpenSlider = null;\n\n\t\tthis.opened = false;\n\t\tthis.hidden = false;\n\t\tthis.hacksApplied = false;\n\n\t\tthis.pageUrl = this.getCurrentUrl();\n\t\tthis.pageTitle = this.getCurrentTitle();\n\t\tthis.titleChanged = false;\n\n\t\tthis.toolbar = null;\n\n\t\tthis.fullScreenSlider = null;\n\n\t\tthis.handleAnchorClick = this.handleAnchorClick.bind(this);\n\t\tthis.handleDocumentKeyDown = this.handleDocumentKeyDown.bind(this);\n\t\tthis.handleWindowResize = Runtime.throttle(this.handleWindowResize, 300, this);\n\t\tthis.handleWindowScroll = this.handleWindowScroll.bind(this);\n\t\tthis.handleTouchMove = this.handleTouchMove.bind(this);\n\n\t\tthis.handleSliderOpenStart = this.handleSliderOpenStart.bind(this);\n\t\tthis.handleSliderOpenComplete = this.handleSliderOpenComplete.bind(this);\n\t\tthis.handleSliderMaximizeStart = this.handleSliderMaximizeStart.bind(this);\n\t\tthis.handleSliderCloseStart = this.handleSliderCloseStart.bind(this);\n\t\tthis.handleSliderCloseComplete = this.handleSliderCloseComplete.bind(this);\n\t\tthis.handleSliderMinimizeStart = this.handleSliderMinimizeStart.bind(this);\n\t\tthis.handleSliderLoad = this.handleSliderLoad.bind(this);\n\t\tthis.handleSliderDestroy = this.handleSliderDestroy.bind(this);\n\t\tthis.handleEscapePress = this.handleEscapePress.bind(this);\n\t\tthis.handleFullScreenChange = this.handleFullScreenChange.bind(this);\n\n\t\tEventEmitter.subscribe('SidePanel:open', this.open.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('SidePanel:close', this.close.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('SidePanel:closeAll', this.closeAll.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('SidePanel:destroy', this.destroy.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('SidePanel:hide', this.hide.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('SidePanel:unhide', this.unhide.bind(this), { compatMode: true });\n\n\t\tEventEmitter.subscribe('SidePanel:postMessage', this.postMessage.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('SidePanel:postMessageAll', this.postMessageAll.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('SidePanel:postMessageTop', this.postMessageTop.bind(this), { compatMode: true });\n\n\t\t// Compatibility\n\t\tEventEmitter.subscribe('BX.Bitrix24.PageSlider:close', this.close.bind(this), { compatMode: true });\n\t\tEventEmitter.subscribe('Bitrix24.Slider:postMessage', this.handlePostMessageCompatible.bind(this), { compatMode: true });\n\t}\n\n\tstatic registerSliderClass(\n\t\tclassName: string,\n\t\tdefaultOptions: SliderOptions = null,\n\t\tpriorityOptions: SliderOptions = null,\n\t): void\n\t{\n\t\tif (Type.isStringFilled(className))\n\t\t{\n\t\t\tsliderClassName = className;\n\t\t}\n\n\t\tif (Type.isPlainObject(defaultOptions))\n\t\t{\n\t\t\tsliderDefaultOptions = defaultOptions;\n\t\t}\n\n\t\tif (Type.isPlainObject(priorityOptions))\n\t\t{\n\t\t\tsliderPriorityOptions = priorityOptions;\n\t\t}\n\t}\n\n\tstatic getSliderClass(): Slider\n\t{\n\t\tconst sliderClass = sliderClassName === null ? null : Reflection.getClass(sliderClassName);\n\n\t\treturn sliderClass === null ? Slider : sliderClass;\n\t}\n\n\tstatic getSliderDefaultOptions(): SliderOptions\n\t{\n\t\treturn sliderDefaultOptions === null ? {} : sliderDefaultOptions;\n\t}\n\n\tstatic getSliderPriorityOptions(): SliderOptions\n\t{\n\t\treturn sliderPriorityOptions === null ? {} : sliderPriorityOptions;\n\t}\n\n\topen(url: string, options: SliderOptions): boolean\n\t{\n\t\tconst slider = this.#createSlider(url, options);\n\t\tif (slider === null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.tryApplyHacks(\n\t\t\tslider,\n\t\t\t() => slider.open(),\n\t\t);\n\t}\n\n\t#createSlider(sliderUrl: string, sliderOptions: SliderOptions): Slider | null\n\t{\n\t\tif (!Type.isStringFilled(sliderUrl))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst url = this.refineUrl(sliderUrl);\n\n\t\tif (this.isHidden())\n\t\t{\n\t\t\tthis.unhide();\n\t\t}\n\n\t\tconst topSlider = this.getTopSlider();\n\t\tif (topSlider && topSlider.isOpen() && topSlider.getUrl() === url)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this.getLastOpenSlider() && this.getLastOpenSlider().getUrl() === url)\n\t\t{\n\t\t\treturn this.getLastOpenSlider();\n\t\t}\n\n\t\tconst rule = this.getUrlRule(url);\n\t\tconst ruleOptions = rule !== null && Type.isPlainObject(rule.options) ? rule.options : {};\n\t\tconst options = Type.isPlainObject(sliderOptions) ? sliderOptions : ruleOptions;\n\n\t\tif (\n\t\t\tType.isPlainObject(ruleOptions.minimizeOptions)\n\t\t\t&& Type.isPlainObject(sliderOptions)\n\t\t\t&& !Type.isPlainObject(sliderOptions.minimizeOptions)\n\t\t)\n\t\t{\n\t\t\toptions.minimizeOptions = ruleOptions.minimizeOptions;\n\t\t}\n\n\t\tif (this.getToolbar() === null && options.minimizeOptions)\n\t\t{\n\t\t\toptions.minimizeOptions = null;\n\t\t}\n\n\t\tconst defaultOptions = SliderManager.getSliderDefaultOptions();\n\t\tconst priorityOptions = SliderManager.getSliderPriorityOptions();\n\n\t\tconst SliderClass = SliderManager.getSliderClass();\n\t\tconst slider: Slider = new SliderClass(url, Runtime.merge(defaultOptions, options, priorityOptions));\n\n\t\tlet offset = null;\n\t\tif (slider.shouldUseAutoOffset() && slider.getWidth() === null && slider.getCustomLeftBoundary() === null)\n\t\t{\n\t\t\toffset = 0;\n\t\t\tconst lastOffset = this.#getLastOffset();\n\t\t\tif (topSlider && lastOffset !== null)\n\t\t\t{\n\t\t\t\toffset = Math.min(lastOffset + this.#getMinOffset(), this.#getMaxOffset());\n\t\t\t}\n\t\t}\n\n\t\tslider.setOffset(offset);\n\n\t\tif (topSlider && topSlider.getCustomRightBoundary() !== null)\n\t\t{\n\t\t\tconst rightBoundary = slider.calculateRightBoundary();\n\t\t\tif (rightBoundary > topSlider.getCustomRightBoundary())\n\t\t\t{\n\t\t\t\tslider.setCustomRightBoundary(topSlider.getCustomRightBoundary());\n\t\t\t}\n\t\t}\n\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onOpenStart', this.handleSliderOpenStart, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onBeforeOpenComplete', this.handleSliderOpenComplete, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onMaximizeStart', this.handleSliderMaximizeStart, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onCloseStart', this.handleSliderCloseStart, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onBeforeCloseComplete', this.handleSliderCloseComplete, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onMinimizeStart', this.handleSliderMinimizeStart, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onLoad', this.handleSliderLoad, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onDestroy', this.handleSliderDestroy, { compatMode: true });\n\t\tEventEmitter.subscribe(slider, 'SidePanel.Slider:onEscapePress', this.handleEscapePress, { compatMode: true });\n\n\t\treturn slider;\n\t}\n\n\tgetMinimizeOptions(url: string): MinimizeOptions | null\n\t{\n\t\tconst rule = this.getUrlRule(url);\n\t\tconst ruleOptions = rule !== null && Type.isPlainObject(rule.options) ? rule.options : {};\n\n\t\treturn Type.isPlainObject(ruleOptions.minimizeOptions) ? ruleOptions.minimizeOptions : null;\n\t}\n\n\tmaximize(url, options: SliderOptions): boolean\n\t{\n\t\tconst slider = this.#createSlider(url, options);\n\t\tif (slider === null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.tryApplyHacks(\n\t\t\tslider,\n\t\t\t() => slider.maximize(),\n\t\t);\n\t}\n\n\ttryApplyHacks(slider, cb: Function): boolean\n\t{\n\t\tif (!this.isOpen())\n\t\t{\n\t\t\tthis.applyHacks(slider);\n\t\t}\n\n\t\tconst success = cb();\n\t\tif (!success)\n\t\t{\n\t\t\tthis.resetHacks(slider);\n\t\t}\n\n\t\treturn success;\n\t}\n\n\tisOpen(): boolean\n\t{\n\t\treturn this.opened;\n\t}\n\n\tclose(immediately: boolean, callback: Function): void\n\t{\n\t\tconst topSlider = this.getTopSlider();\n\t\tif (topSlider)\n\t\t{\n\t\t\ttopSlider.close(immediately, callback);\n\t\t}\n\t}\n\n\tcloseAll(immediately: boolean): void\n\t{\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tconst success = slider.close(immediately);\n\t\t\tif (!success)\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tminimize(immediately: boolean, callback: Function): void\n\t{\n\t\tconst topSlider = this.getTopSlider();\n\t\tif (topSlider)\n\t\t{\n\t\t\ttopSlider.minimize(immediately, callback);\n\t\t}\n\t}\n\n\thide(): boolean\n\t{\n\t\tif (this.hidden)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst topSlider = this.getTopSlider();\n\n\t\tthis.getOpenSliders().forEach((slider: Slider) => {\n\t\t\tslider.hide();\n\t\t});\n\n\t\tthis.hidden = true;\n\n\t\tthis.resetHacks(topSlider);\n\n\t\treturn true;\n\t}\n\n\tunhide(): boolean\n\t{\n\t\tif (!this.hidden)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.getOpenSliders().forEach((slider) => {\n\t\t\tslider.unhide();\n\t\t});\n\n\t\tthis.hidden = false;\n\n\t\tsetTimeout(() => {\n\t\t\tthis.applyHacks(this.getTopSlider());\n\t\t}, 0);\n\n\t\treturn true;\n\t}\n\n\tisHidden(): boolean\n\t{\n\t\treturn this.hidden;\n\t}\n\n\tdestroy(sliderUrl: string)\n\t{\n\t\tif (!Type.isStringFilled(sliderUrl))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst url = this.refineUrl(sliderUrl);\n\t\tconst sliderToDestroy = this.getSlider(url);\n\n\t\tif (this.getLastOpenSlider() && (sliderToDestroy || this.getLastOpenSlider().getUrl() === url))\n\t\t{\n\t\t\tthis.getLastOpenSlider().destroy();\n\t\t}\n\n\t\tif (sliderToDestroy !== null)\n\t\t{\n\t\t\tconst openSliders = this.getOpenSliders();\n\t\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t\t{\n\t\t\t\tconst slider = openSliders[i];\n\t\t\t\tslider.destroy();\n\n\t\t\t\tif (slider === sliderToDestroy)\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treload(): void\n\t{\n\t\tconst topSlider = this.getTopSlider();\n\t\tif (topSlider)\n\t\t{\n\t\t\ttopSlider.reload();\n\t\t}\n\t}\n\n\tgetTopSlider(): Slider | null\n\t{\n\t\tconst count = this.openSliders.length;\n\n\t\treturn this.openSliders[count - 1] || null;\n\t}\n\n\tgetPreviousSlider(currentSlider?: Slider): Slider | null\n\t{\n\t\tlet previousSlider = null;\n\t\tconst openSliders = this.getOpenSliders();\n\t\tcurrentSlider = currentSlider || this.getTopSlider();\n\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tif (slider === currentSlider)\n\t\t\t{\n\t\t\t\tpreviousSlider = openSliders[i - 1] || null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn previousSlider;\n\t}\n\n\tgetSlider(sliderUrl: string): Slider | null\n\t{\n\t\tconst url = this.refineUrl(sliderUrl);\n\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (const slider of openSliders)\n\t\t{\n\t\t\tif (slider.getUrl() === url)\n\t\t\t{\n\t\t\t\treturn slider;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetSliderByWindow(window: Window): Slider | null\n\t{\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (const slider of openSliders)\n\t\t{\n\t\t\tif (slider.getFrameWindow() === window)\n\t\t\t{\n\t\t\t\treturn slider;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetOpenSliders(): Slider[]\n\t{\n\t\treturn this.openSliders;\n\t}\n\n\tgetOpenSlidersCount(): number\n\t{\n\t\treturn this.openSliders.length;\n\t}\n\n\t/**\n\t * @private\n\t */\n\t#addOpenSlider(slider: Slider): void\n\t{\n\t\tif (!(slider instanceof Slider))\n\t\t{\n\t\t\tthrow new TypeError('Slider is not an instance of BX.SidePanel.Slider');\n\t\t}\n\n\t\tthis.openSliders.push(slider);\n\t}\n\n\t/**\n\t * @private\n\t */\n\t#removeOpenSlider(slider): boolean\n\t{\n\t\tconst openSliders = [...this.getOpenSliders()];\n\t\tfor (const [i, openSlider] of openSliders.entries())\n\t\t{\n\t\t\tif (openSlider === slider)\n\t\t\t{\n\t\t\t\tthis.openSliders.splice(i, 1);\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgetLastOpenSlider(): Slider | null\n\t{\n\t\treturn this.lastOpenSlider;\n\t}\n\n\t#setLastOpenSlider(slider: Slider): void\n\t{\n\t\tif (this.lastOpenSlider !== slider)\n\t\t{\n\t\t\tif (this.lastOpenSlider)\n\t\t\t{\n\t\t\t\tthis.lastOpenSlider.destroy();\n\t\t\t}\n\n\t\t\tthis.lastOpenSlider = slider;\n\t\t}\n\t}\n\n\t#resetLastOpenSlider(): void\n\t{\n\t\tif (this.lastOpenSlider && this.getTopSlider() !== this.lastOpenSlider)\n\t\t{\n\t\t\tthis.lastOpenSlider.destroy();\n\t\t}\n\n\t\tthis.lastOpenSlider = null;\n\t}\n\n\tadjustLayout(): void\n\t{\n\t\tthis.getOpenSliders().forEach((slider: Slider) => {\n\t\t\tslider.adjustLayout();\n\t\t});\n\t}\n\n\tcreateToolbar(options): Toolbar\n\t{\n\t\tif (this.toolbar === null)\n\t\t{\n\t\t\tthis.toolbar = new Toolbar(options);\n\t\t}\n\n\t\treturn this.toolbar;\n\t}\n\n\tgetToolbar(): Toolbar\n\t{\n\t\treturn this.toolbar;\n\t}\n\n\t#getLastOffset(): number | null\n\t{\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tif (slider.getOffset() !== null)\n\t\t\t{\n\t\t\t\treturn slider.getOffset();\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\trefineUrl(url: string): string\n\t{\n\t\tif (Type.isStringFilled(url) && /IFRAME/.test(url))\n\t\t{\n\t\t\treturn Uri.removeParam(url, ['IFRAME', 'IFRAME_TYPE']);\n\t\t}\n\n\t\treturn url;\n\t}\n\n\tgetPageUrl(): string\n\t{\n\t\treturn this.pageUrl;\n\t}\n\n\tgetCurrentUrl(): string\n\t{\n\t\treturn window.location.pathname + window.location.search + window.location.hash;\n\t}\n\n\tgetPageTitle(): string\n\t{\n\t\treturn this.pageTitle;\n\t}\n\n\tgetCurrentTitle(): string\n\t{\n\t\tlet title = document.title;\n\t\tif (!Type.isUndefined(window.BXIM))\n\t\t{\n\t\t\ttitle = title.replace(/^\\(\\d+\\) /, ''); // replace a messenger counter.\n\t\t}\n\n\t\treturn title;\n\t}\n\n\tenterFullScreen()\n\t{\n\t\tif (!this.getTopSlider() || this.getFullScreenSlider())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst container = document.body;\n\t\tif (container.requestFullscreen)\n\t\t{\n\t\t\tEvent.bind(document, 'fullscreenchange', this.handleFullScreenChange);\n\t\t\tcontainer.requestFullscreen();\n\t\t}\n\t\telse if (container.webkitRequestFullScreen)\n\t\t{\n\t\t\tEvent.bind(document, 'webkitfullscreenchange', this.handleFullScreenChange);\n\t\t\tcontainer.webkitRequestFullScreen();\n\t\t}\n\t\telse if (container.msRequestFullscreen)\n\t\t{\n\t\t\tEvent.bind(document, 'MSFullscreenChange', this.handleFullScreenChange);\n\t\t\tcontainer.msRequestFullscreen();\n\t\t}\n\t\telse if (container.mozRequestFullScreen)\n\t\t{\n\t\t\tEvent.bind(document, 'mozfullscreenchange', this.handleFullScreenChange);\n\t\t\tcontainer.mozRequestFullScreen();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconsole.log('Slider: Full Screen mode is not supported.');\n\t\t}\n\t}\n\n\texitFullScreen()\n\t{\n\t\tif (!this.getFullScreenSlider())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (document.exitFullscreen)\n\t\t{\n\t\t\tdocument.exitFullscreen();\n\t\t}\n\t\telse if (document.webkitExitFullscreen)\n\t\t{\n\t\t\tdocument.webkitExitFullscreen();\n\t\t}\n\t\telse if (document.msExitFullscreen)\n\t\t{\n\t\t\tdocument.msExitFullscreen();\n\t\t}\n\t\telse if (document.mozCancelFullScreen)\n\t\t{\n\t\t\tdocument.mozCancelFullScreen();\n\t\t}\n\t}\n\n\tgetFullScreenElement(): HTMLElement\n\t{\n\t\treturn (\n\t\t\tdocument.fullscreenElement\n\t\t\t|| document.webkitFullscreenElement\n\t\t\t|| document.mozFullScreenElement\n\t\t\t|| document.msFullscreenElement\n\t\t\t|| null\n\t\t);\n\t}\n\n\tgetFullScreenSlider(): Slider | null\n\t{\n\t\treturn this.fullScreenSlider;\n\t}\n\n\thandleFullScreenChange(event): void\n\t{\n\t\tif (this.getFullScreenElement())\n\t\t{\n\t\t\tthis.fullScreenSlider = this.getTopSlider();\n\t\t\tDom.addClass(this.fullScreenSlider.getOverlay(), 'side-panel-fullscreen');\n\n\t\t\tthis.fullScreenSlider.fireEvent('onFullScreenEnter');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.getFullScreenSlider())\n\t\t\t{\n\t\t\t\tDom.removeClass(this.getFullScreenSlider().getOverlay(), 'side-panel-fullscreen');\n\t\t\t\tthis.fullScreenSlider.fireEvent('onFullScreenExit');\n\t\t\t\tthis.fullScreenSlider = null;\n\t\t\t}\n\n\t\t\tEvent.unbind(document, event.type, this.handleFullScreenChange);\n\t\t\twindow.scrollTo(0, this.pageScrollTop);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.adjustLayout();\n\t\t\t\tconst resizeEvent = document.createEvent('Event');\n\t\t\t\tresizeEvent.initEvent('resize', true, true);\n\t\t\t\twindow.dispatchEvent(resizeEvent);\n\t\t\t}, 1000);\n\t\t}\n\t}\n\n\tpostMessage(source: string | Window | Slider, eventId: string, data: JsonObject): void\n\t{\n\t\tconst sender = this.getSliderFromSource(source);\n\t\tif (!sender)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet previousSlider: Slider = null;\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tif (slider === sender)\n\t\t\t{\n\t\t\t\tpreviousSlider = openSliders[i - 1] || null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tconst sliderWindow = previousSlider ? previousSlider.getWindow() : window;\n\t\tsliderWindow.BX.onCustomEvent('Bitrix24.Slider:onMessage', [sender, data]); // Compatibility\n\n\t\tconst event = new MessageEvent({\n\t\t\tsender,\n\t\t\tslider: previousSlider || null,\n\t\t\tdata,\n\t\t\teventId,\n\t\t});\n\n\t\tif (previousSlider)\n\t\t{\n\t\t\tpreviousSlider.firePageEvent(event);\n\t\t\tpreviousSlider.fireFrameEvent(event);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tEventEmitter.emit(event.getFullName().toLowerCase(), new BaseEvent({ data: [event], compatData: [event] }));\n\t\t}\n\t}\n\n\tpostMessageAll(source: string | Window | Slider, eventId: string, data: JsonObject): void\n\t{\n\t\tconst sender = this.getSliderFromSource(source);\n\t\tif (!sender)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet event = null;\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tif (slider === sender)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tevent = new MessageEvent({ sender, slider, data, eventId });\n\t\t\tslider.firePageEvent(event);\n\t\t\tslider.fireFrameEvent(event);\n\t\t}\n\n\t\tevent = new MessageEvent({ sender, slider: null, data, eventId });\n\n\t\tEventEmitter.emit(event.getFullName().toLowerCase(), new BaseEvent({ data: [event], compatData: [event] }));\n\t}\n\n\tpostMessageTop(source: string | Window | Slider, eventId: string, data: JsonObject): void\n\t{\n\t\tconst sender = this.getSliderFromSource(source);\n\t\tif (!sender)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst event = new MessageEvent({ sender, slider: null, data, eventId });\n\n\t\tEventEmitter.emit(event.getFullName().toLowerCase(), new BaseEvent({ data: [event], compatData: [event] }));\n\t}\n\n\t#getMinOffset(): number\n\t{\n\t\treturn 63;\n\t}\n\n\t#getMaxOffset(): number\n\t{\n\t\treturn this.#getMinOffset() * 3;\n\t}\n\n\tbindAnchors(parameters: { rules: RuleOptions[] })\n\t{\n\t\tif (!Type.isPlainObject(parameters) || !Type.isArray(parameters.rules) || parameters.rules.length === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.anchorRules.length === 0)\n\t\t{\n\t\t\tthis.registerAnchorListener(window.document);\n\t\t}\n\n\t\tif (!(parameters.rules instanceof Object))\n\t\t{\n\t\t\tconsole.error(\n\t\t\t\t'BX.SitePanel: anchor rules were created in a different context. ' +\n\t\t\t\t'This might be a reason for a memory leak.',\n\t\t\t);\n\n\t\t\tconsole.trace();\n\t\t}\n\n\t\tparameters.rules.forEach((rule) => {\n\t\t\tif (Type.isArray(rule.condition))\n\t\t\t{\n\t\t\t\tfor (let m = 0; m < rule.condition.length; m++)\n\t\t\t\t{\n\t\t\t\t\tif (Type.isString(rule.condition[m]))\n\t\t\t\t\t{\n\t\t\t\t\t\trule.condition[m] = new RegExp(rule.condition[m], 'i');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trule.options = Type.isPlainObject(rule.options) ? rule.options : {};\n\t\t\tif (Type.isStringFilled(rule.loader) && !Type.isStringFilled(rule.options.loader))\n\t\t\t{\n\t\t\t\trule.options.loader = rule.loader;\n\t\t\t\tdelete rule.loader;\n\t\t\t}\n\n\t\t\tthis.anchorRules.push(rule);\n\t\t});\n\t}\n\n\tisAnchorBinding(): boolean\n\t{\n\t\treturn this.anchorBinding;\n\t}\n\n\tenableAnchorBinding(): void\n\t{\n\t\tthis.anchorBinding = true;\n\t}\n\n\tdisableAnchorBinding(): void\n\t{\n\t\tthis.anchorBinding = false;\n\t}\n\n\tregisterAnchorListener(targetDocument)\n\t{\n\t\tEvent.bind(targetDocument, 'click', this.handleAnchorClick, true);\n\t}\n\n\tunregisterAnchorListener(targetDocument)\n\t{\n\t\tEvent.unbind(targetDocument, 'click', this.handleAnchorClick, true);\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleSliderOpenStart(event: SliderEvent)\n\t{\n\t\tif (!event.isActionAllowed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst slider = event.getSlider();\n\t\tif (slider.isDestroyed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.getTopSlider())\n\t\t{\n\t\t\tthis.exitFullScreen();\n\n\t\t\tthis.getTopSlider().hideOverlay();\n\t\t\tslider.setOverlayBackground();\n\n\t\t\tconst sameWidth = (\n\t\t\t\tthis.getTopSlider().getOffset() === slider.getOffset()\n\t\t\t\t&& this.getTopSlider().getWidth() === slider.getWidth()\n\t\t\t\t&& this.getTopSlider().getCustomLeftBoundary() === slider.getCustomLeftBoundary()\n\t\t\t);\n\n\t\t\tif (!sameWidth)\n\t\t\t{\n\t\t\t\tthis.getTopSlider().showShadow();\n\t\t\t}\n\n\t\t\tthis.getTopSlider().hideOrDarkenCloseBtn();\n\t\t\tthis.getTopSlider().hidePrintBtn();\n\t\t\tthis.getTopSlider().hideExtraLabels();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tslider.setOverlayAnimation(true);\n\t\t}\n\n\t\tthis.#addOpenSlider(slider);\n\n\t\tthis.getOpenSliders().forEach((currentSlider: Slider, index: number, openSliders: Slider[]) => {\n\t\t\tcurrentSlider.getLabel().moveAt(openSliders.length - index - 1); // move down\n\t\t});\n\n\t\tthis.losePageFocus();\n\n\t\tif (!this.opened)\n\t\t{\n\t\t\tthis.pageUrl = this.getCurrentUrl();\n\t\t\tthis.pageTitle = this.getCurrentTitle();\n\t\t}\n\n\t\tthis.opened = true;\n\n\t\tthis.#resetLastOpenSlider();\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleSliderOpenComplete(event: SliderEvent)\n\t{\n\t\tthis.setBrowserHistory(event.getSlider());\n\t\tthis.updateBrowserTitle();\n\t\tevent.getSlider().setAnimation('sliding');\n\n\t\tconst openSliders = this.getOpenSliders();\n\t\tconst topSlider = event.getSlider();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tif (topSlider === slider)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (topSlider.getContainer().offsetLeft <= slider.getContainer().offsetLeft)\n\t\t\t{\n\t\t\t\tDom.addClass(slider.getOverlay(), '--invisible');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleSliderCloseStart(event: SliderEvent)\n\t{\n\t\tif (!event.isActionAllowed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.getSlider() && event.getSlider().isDestroyed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst previousSlider = this.getPreviousSlider();\n\t\tconst topSlider = this.getTopSlider();\n\n\t\tthis.exitFullScreen();\n\n\t\tthis.getOpenSliders().forEach((slider, index, openSliders) => {\n\t\t\tslider.getLabel().moveAt(openSliders.length - index - 2); // move up\n\t\t});\n\n\t\tlet visibleSlider = null;\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tif (event.getSlider() === slider)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (visibleSlider === null || slider.getContainer().offsetLeft < visibleSlider.getContainer().offsetLeft)\n\t\t\t{\n\t\t\t\tDom.removeClass(slider.getOverlay(), '--invisible');\n\t\t\t\tvisibleSlider = slider;\n\t\t\t}\n\t\t}\n\n\t\tif (previousSlider)\n\t\t{\n\t\t\tpreviousSlider.unhideOverlay();\n\t\t\tpreviousSlider.hideShadow();\n\t\t\tpreviousSlider.showOrLightenCloseBtn();\n\n\t\t\tif (topSlider)\n\t\t\t{\n\t\t\t\ttopSlider.hideOverlay();\n\t\t\t\ttopSlider.hideShadow();\n\t\t\t}\n\t\t}\n\t}\n\n\thandleSliderMaximizeStart(event)\n\t{\n\t\tif (!event.isActionAllowed() || this.getToolbar() === null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst slider = event.getSlider();\n\t\tif (slider && slider.isDestroyed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst { entityType, entityId } = slider.getMinimizeOptions() || {};\n\t\tconst item = this.getToolbar().getItem(entityType, entityId);\n\n\t\tthis.getToolbar().request('maximize', item);\n\n\t\tconst origin = this.#getItemOrigin(slider, item);\n\t\tslider.setAnimation('scale', { origin });\n\t}\n\n\thandleSliderMinimizeStart(event)\n\t{\n\t\tif (!event.isActionAllowed() || this.getToolbar() === null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst slider = event.getSlider();\n\t\tif (slider && slider.isDestroyed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.getToolbar().isShown())\n\t\t{\n\t\t\tthis.getToolbar().show();\n\t\t}\n\n\t\tlet title = slider.getTitle();\n\t\tif (!title)\n\t\t{\n\t\t\ttitle = slider.getFrameWindow() ? slider.getFrameWindow().document.title : null;\n\t\t}\n\n\t\tthis.getToolbar().expand(true);\n\n\t\tconst minimizeOptions = this.getMinimizeOptions(slider.getUrl());\n\t\tconst { entityType, entityId, url } = minimizeOptions || slider.getMinimizeOptions() || {};\n\n\t\tconst item = this.getToolbar().minimizeItem({\n\t\t\ttitle,\n\t\t\turl: Type.isStringFilled(url) ? url : slider.getUrl(),\n\t\t\tentityType,\n\t\t\tentityId,\n\t\t});\n\n\t\tconst origin = this.#getItemOrigin(slider, item);\n\t\tslider.setAnimation('scale', { origin });\n\t}\n\n\t#getItemOrigin(slider: Slider, item: ToolbarItem): void\n\t{\n\t\tif (item && item.getContainer().offsetWidth > 0)\n\t\t{\n\t\t\tconst rect = item.getContainer().getBoundingClientRect();\n\t\t\tconst offset = slider.getContainer().getBoundingClientRect().left;\n\t\t\tconst left = rect.left - offset + rect.width / 2;\n\n\t\t\treturn `${left}px ${rect.top}px`;\n\t\t}\n\n\t\treturn '50% 100%';\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleSliderCloseComplete(event: SliderEvent)\n\t{\n\t\tconst slider = event.getSlider();\n\t\tif (slider === this.getTopSlider())\n\t\t{\n\t\t\tthis.#setLastOpenSlider(slider);\n\t\t}\n\n\t\tevent.getSlider().setAnimation('sliding');\n\n\t\tthis.cleanUpClosedSlider(slider);\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleSliderDestroy(event: SliderEvent)\n\t{\n\t\tconst slider = event.getSlider();\n\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onOpenStart', this.handleSliderOpenStart);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onBeforeOpenComplete', this.handleSliderOpenComplete);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onMaximizeStart', this.handleSliderMaximizeStart);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onCloseStart', this.handleSliderCloseStart);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onBeforeCloseComplete', this.handleSliderCloseComplete);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onMinimizeStart', this.handleSliderMinimizeStart);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onLoad', this.handleSliderLoad);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onDestroy', this.handleSliderDestroy);\n\t\tEventEmitter.unsubscribe(slider, 'SidePanel.Slider:onEscapePress', this.handleEscapePress);\n\n\t\tconst frameWindow = event.getSlider().getFrameWindow();\n\t\tif (frameWindow && !event.getSlider().allowCrossOrigin)\n\t\t{\n\t\t\tthis.unregisterAnchorListener(frameWindow.document);\n\t\t}\n\n\t\tif (slider === this.getLastOpenSlider())\n\t\t{\n\t\t\tthis.lastOpenSlider = null;\n\t\t}\n\n\t\tthis.cleanUpClosedSlider(slider);\n\t}\n\n\thandleEscapePress(event)\n\t{\n\t\tif (this.isOnTop() && this.getTopSlider() && this.getTopSlider().canCloseByEsc())\n\t\t{\n\t\t\tthis.getTopSlider().close();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcleanUpClosedSlider(slider: Slider)\n\t{\n\t\tthis.#removeOpenSlider(slider);\n\n\t\tslider.unhideOverlay();\n\t\tslider.hideShadow();\n\n\t\tthis.getOpenSliders().forEach((slider, index, openSliders) => {\n\t\t\tslider.getLabel().moveAt(openSliders.length - index - 1); //update position\n\t\t});\n\n\t\tif (this.getTopSlider())\n\t\t{\n\t\t\tthis.getTopSlider().showOrLightenCloseBtn();\n\t\t\tthis.getTopSlider().unhideOverlay();\n\t\t\tthis.getTopSlider().hideShadow();\n\t\t\tthis.getTopSlider().showExtraLabels();\n\n\t\t\tif (this.getTopSlider().isPrintable())\n\t\t\t{\n\t\t\t\tthis.getTopSlider().showPrintBtn();\n\t\t\t}\n\t\t\tthis.getTopSlider().focus();\n\t\t}\n\t\telse\n\t\t{\n\t\t\twindow.focus();\n\t\t}\n\n\t\tif (!this.getOpenSlidersCount())\n\t\t{\n\t\t\tthis.resetHacks(slider);\n\t\t\tthis.opened = false;\n\t\t}\n\n\t\tthis.resetBrowserHistory();\n\t\tthis.updateBrowserTitle();\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleSliderLoad(event: SliderEvent)\n\t{\n\t\tconst frameWindow = event.getSlider().getFrameWindow();\n\t\tif (frameWindow)\n\t\t{\n\t\t\tthis.registerAnchorListener(frameWindow.document);\n\t\t}\n\n\t\tthis.setBrowserHistory(event.getSlider());\n\t\tthis.updateBrowserTitle();\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandlePostMessageCompatible(source: string | Window | Slider, data: JsonObject)\n\t{\n\t\tthis.postMessage(source, '', data);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetSliderFromSource(source: string | Window | Slider)\n\t{\n\t\tif (source instanceof Slider)\n\t\t{\n\t\t\treturn source;\n\t\t}\n\n\t\tif (Type.isStringFilled(source))\n\t\t{\n\t\t\treturn this.getSlider(source);\n\t\t}\n\n\t\tif (source !== null && source === source.window && window !== source)\n\t\t{\n\t\t\treturn this.getSliderByWindow(source);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tapplyHacks(slider: Slider): boolean\n\t{\n\t\tif (this.hacksApplied)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (slider)\n\t\t{\n\t\t\tslider.applyHacks();\n\t\t}\n\n\t\tthis.disablePageScrollbar();\n\t\tthis.bindEvents();\n\n\t\tif (slider)\n\t\t{\n\t\t\tslider.applyPostHacks();\n\t\t}\n\n\t\tthis.hacksApplied = true;\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tresetHacks(slider: Slider): boolean\n\t{\n\t\tif (!this.hacksApplied)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (slider)\n\t\t{\n\t\t\tslider.resetPostHacks();\n\t\t}\n\n\t\tthis.enablePageScrollbar();\n\t\tthis.unbindEvents();\n\n\t\tif (slider)\n\t\t{\n\t\t\tslider.resetHacks();\n\t\t}\n\n\t\tthis.hacksApplied = false;\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tbindEvents(): boolean\n\t{\n\t\tEvent.bind(document, 'keydown', this.handleDocumentKeyDown);\n\t\tEvent.bind(window, 'resize', this.handleWindowResize);\n\t\tEvent.bind(window, 'scroll', this.handleWindowScroll); // Live Comments can change scrollTop\n\n\t\tif (Browser.isMobile())\n\t\t{\n\t\t\tEvent.bind(document.body, 'touchmove', this.handleTouchMove);\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tunbindEvents()\n\t{\n\t\tEvent.unbind(document, 'keydown', this.handleDocumentKeyDown);\n\t\tEvent.unbind(window, 'resize', this.handleWindowResize);\n\t\tEvent.unbind(window, 'scroll', this.handleWindowScroll);\n\n\t\tif (Browser.isMobile())\n\t\t{\n\t\t\tEvent.unbind(document.body, 'touchmove', this.handleTouchMove);\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tdisablePageScrollbar(): void\n\t{\n\t\tconst scrollWidth = window.innerWidth - document.documentElement.clientWidth;\n\t\tdocument.body.style.paddingRight = scrollWidth + 'px';\n\t\tDom.style(document.body, '--scroll-shift-width', `${scrollWidth}px`);\n\t\tDom.addClass(document.body, 'side-panel-disable-scrollbar');\n\t\tthis.pageScrollTop = window.pageYOffset || document.documentElement.scrollTop;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tenablePageScrollbar()\n\t{\n\t\tdocument.body.style.removeProperty('padding-right');\n\t\tDom.style(document.body, '--scroll-shift-width', null);\n\t\tDom.removeClass(document.body, 'side-panel-disable-scrollbar');\n\t}\n\n\t/**\n\t * @private\n\t */\n\tlosePageFocus()\n\t{\n\t\tif (Type.isDomNode(document.activeElement))\n\t\t{\n\t\t\tdocument.activeElement.blur();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param {Event} event\n\t */\n\thandleDocumentKeyDown(event: KeyboardEvent)\n\t{\n\t\tif (event.keyCode !== 27)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault(); // otherwise an iframe loading can be cancelled by a browser\n\n\t\tif (this.isOnTop() && this.getTopSlider() && this.getTopSlider().canCloseByEsc())\n\t\t{\n\t\t\tthis.getTopSlider().close();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleWindowResize()\n\t{\n\t\tthis.adjustLayout();\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleWindowScroll()\n\t{\n\t\twindow.scrollTo(0, this.pageScrollTop);\n\t\tthis.adjustLayout();\n\t}\n\n\t/**\n\t * @private\n\t * @param {Event} event\n\t */\n\thandleTouchMove(event)\n\t{\n\t\tevent.preventDefault();\n\t}\n\n\t/**\n\t * @private\n\t */\n\tisOnTop(): boolean\n\t{\n\t\t// Photo Slider or something else can cover Side Panel.\n\t\tconst centerX = document.documentElement.clientWidth / 2;\n\t\tconst centerY = document.documentElement.clientHeight / 2;\n\t\tconst element = document.elementFromPoint(centerX, centerY);\n\n\t\treturn Dom.hasClass(element, 'side-panel') || element.closest('.side-panel') !== null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\textractLinkFromEvent(event: MouseEvent): LinkOptions | null\n\t{\n\t\tconst target: HTMLElement = event.target;\n\n\t\tif (event.which !== 1 || !Type.isDomNode(target) || event.ctrlKey || event.metaKey)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tlet a = target;\n\t\tif (target.nodeName !== 'A' && Type.isElementNode(target))\n\t\t{\n\t\t\ta = target.closest('a');\n\t\t}\n\n\t\tif (!Type.isDomNode(a))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\t// do not use a.href here, the code will fail on links like <a href=\"#SG13\"></a>\n\t\tconst href = a.getAttribute('href');\n\t\tif (href)\n\t\t{\n\t\t\treturn {\n\t\t\t\turl: href,\n\t\t\t\tanchor: a,\n\t\t\t\ttarget: a.getAttribute('target'),\n\t\t\t};\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * @private\n\t * @param {MouseEvent} event\n\t */\n\thandleAnchorClick(event)\n\t{\n\t\tif (!this.isAnchorBinding())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst link = this.extractLinkFromEvent(event);\n\n\t\tif (!link || Dom.attr(link.anchor, 'data-slider-ignore-autobinding') !== null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Dom.attr(event.target, 'data-slider-ignore-autobinding') !== null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst rule = this.getUrlRule(link.url, link);\n\n\t\tif (!this.isValidLink(rule, link))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Type.isFunction(rule.handler))\n\t\t{\n\t\t\trule.handler(event, link);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tthis.open(link.url, rule.options);\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t * @param {string} url\n\t */\n\temulateAnchorClick(url)\n\t{\n\t\tconst link = {\n\t\t\turl,\n\t\t\tanchor: null,\n\t\t\ttarget: null,\n\t\t};\n\n\t\tconst rule = this.getUrlRule(url, link);\n\n\t\tif (!this.isValidLink(rule, link))\n\t\t{\n\t\t\tBX.reload(url);\n\t\t}\n\t\telse if (Type.isFunction(rule.handler))\n\t\t{\n\t\t\trule.handler(\n\t\t\t\tnew Event(\n\t\t\t\t\t'slider',\n\t\t\t\t\t{\n\t\t\t\t\t\tbubbles: false,\n\t\t\t\t\t\tcancelable: true,\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t\tlink,\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.open(link.url, rule.options);\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetUrlRule(href: string, link: LinkOptions): RuleOptions | null\n\t{\n\t\tif (!Type.isStringFilled(href))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!Type.isPlainObject(link))\n\t\t{\n\t\t\tconst a = document.createElement('a');\n\t\t\ta.href = href;\n\n\t\t\tlink = { url: href, anchor: a, target: '' };\n\t\t}\n\n\t\tfor (let k = 0; k < this.anchorRules.length; k++)\n\t\t{\n\t\t\tconst rule = this.anchorRules[k];\n\n\t\t\tif (!Type.isArray(rule.condition))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor (let m = 0; m < rule.condition.length; m++)\n\t\t\t{\n\t\t\t\tconst matches = href.match(rule.condition[m]);\n\t\t\t\tif (matches && !this.hasStopParams(href, rule.stopParameters))\n\t\t\t\t{\n\t\t\t\t\tlink.matches = matches;\n\t\t\t\t\tconst minimizeOptions = Type.isFunction(rule.minimizeOptions) ? rule.minimizeOptions(link) : null;\n\t\t\t\t\tif (Type.isPlainObject(minimizeOptions))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (Type.isPlainObject(rule.options))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trule.options.minimizeOptions = minimizeOptions;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trule.options = { minimizeOptions };\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn rule;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tisValidLink(rule: RuleOptions, link: LinkOptions): boolean\n\t{\n\t\tif (!rule)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (rule.allowCrossDomain !== true && Ajax.isCrossDomain(link.url))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (rule.mobileFriendly !== true && Browser.isMobile())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !Type.isFunction(rule.validate) || rule.validate(link);\n\t}\n\n\t/**\n\t * @private\n\t * @param {BX.SidePanel.Slider} slider\n\t */\n\tsetBrowserHistory(slider)\n\t{\n\t\tif (!(slider instanceof Slider))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (slider.canChangeHistory() && slider.isOpen() && slider.isLoaded())\n\t\t{\n\t\t\twindow.history.replaceState({}, '', slider.getUrl());\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tresetBrowserHistory()\n\t{\n\t\tlet topSlider = null;\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst slider = openSliders[i];\n\t\t\tif (slider.canChangeHistory() && slider.isOpen() && slider.isLoaded())\n\t\t\t{\n\t\t\t\ttopSlider = slider;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tconst url = topSlider ? topSlider.getUrl() : this.getPageUrl();\n\t\tif (url)\n\t\t{\n\t\t\twindow.history.replaceState({}, '', url);\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t */\n\tupdateBrowserTitle()\n\t{\n\t\tlet title = null;\n\t\tconst openSliders = this.getOpenSliders();\n\t\tfor (let i = openSliders.length - 1; i >= 0; i--)\n\t\t{\n\t\t\ttitle = this.getBrowserTitle(openSliders[i]);\n\t\t\tif (Type.isStringFilled(title))\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isStringFilled(title))\n\t\t{\n\t\t\tdocument.title = title;\n\t\t\tthis.titleChanged = true;\n\t\t}\n\t\telse if (this.titleChanged)\n\t\t{\n\t\t\tdocument.title = this.getPageTitle();\n\t\t\tthis.titleChanged = false;\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetBrowserTitle(slider: Slider): string | null\n\t{\n\t\tif (!slider || !slider.canChangeTitle() || !slider.isOpen() || !slider.isLoaded())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tlet title = slider.getTitle();\n\t\tif (!title && !slider.isSelfContained())\n\t\t{\n\t\t\ttitle = slider.getFrameWindow() ? slider.getFrameWindow().document.title : null;\n\t\t}\n\n\t\treturn Type.isStringFilled(title) ? title : null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\thasStopParams(url: string, params: string[]): boolean\n\t{\n\t\tif (!params || !Type.isArray(params) || !Type.isStringFilled(url))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst questionPos = url.indexOf('?');\n\t\tif (questionPos === -1)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst query = url.slice(Math.max(0, questionPos));\n\t\tfor (const param of params)\n\t\t{\n\t\t\tif (new RegExp(`[?&]${param}=`, 'i').test(query))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * @deprecated use getLastOpenSlider method\n\t */\n\tgetLastOpenPage(): Slider | null\n\t{\n\t\treturn this.getLastOpenSlider();\n\t}\n\n\t/**\n\t * @deprecated use getTopSlider method\n\t */\n\tgetCurrentPage(): Slider | null\n\t{\n\t\treturn this.getTopSlider();\n\t}\n}\n","import { Reflection } from 'main.core';\n\nimport { Slider } from './slider';\nimport { SliderManager } from './slider-manager';\nimport { MessageEvent } from './message-event';\nimport { Toolbar } from './toolbar';\nimport { ToolbarItem } from './toolbar-item';\nimport { Label } from './label';\nimport { Dictionary } from './dictionary';\nimport { SliderEvent } from './slider-event';\nimport { getInstance } from './get-instance';\n\nimport { type LabelOptions} from './types/label-options';\nimport { type LinkOptions } from './types/link-options';\nimport { type RuleOptions } from './types/rule-options';\nimport { type MinimizeOptions } from './types/minimize-options';\nimport { type SliderOptions } from './types/slider-options';\nimport { type ToolbarOptions } from './types/toolbar-options';\nimport { type ToolbarItemOptions } from './types/toolbar-item-options';\nimport { type OuterBoundary } from './types/outer-boundary';\n\nimport './css/sidepanel.css';\n\nconst SidePanel = {};\nObject.defineProperty(SidePanel, 'Instance', {\n\tenumerable: false,\n\tget: getInstance,\n});\n\nconst namespace = Reflection.namespace('BX.SidePanel');\n\nObject.defineProperty(namespace, 'Instance', {\n\tenumerable: false,\n\tget: getInstance,\n});\n\nexport {\n\tSidePanel,\n\tSlider,\n\tSliderManager,\n\tSliderManager as Manager,\n\tSliderEvent,\n\tSliderEvent as Event,\n\tMessageEvent,\n\tToolbar,\n\tToolbarItem,\n\tLabel,\n\tDictionary,\n};\n\nexport type {\n\tLabelOptions,\n\tLinkOptions,\n\tRuleOptions,\n\tMinimizeOptions,\n\tSliderOptions,\n\tToolbarOptions,\n\tToolbarItemOptions,\n\tOuterBoundary,\n};\n"],"names":["Dictionary","data","Type","isPlainObject","TypeError","key","value","isStringFilled","Error","Label","slider","labelOptions","Cache","MemoryCache","options","setBgColor","bgColor","setColor","color","setText","text","setIconClass","iconClass","setIconTitle","iconTitle","setOnclick","onclick","cache","remember","Dom","create","props","className","children","getIconBox","getTextContainer","events","click","bind","overlayRect","getSlider","getOverlay","getBoundingClientRect","containerRect","getContainer","maxWidth","left","getMinLeftBoundary","hideText","showText","style","constructor","MIN_LEFT_OFFSET","getIconContainer","getIconClass","removeClass","addClass","hasClass","opacity","isArray","alfa","matches","match","hex","length","replaceAll","isNumber","alfaHex","Math","round","toString","slice","toUpperCase","textContent","attr","fn","isFunction","position","getLabelsContainer","MIN_TOP_OFFSET","INTERVAL_TOP_OFFSET","event","stopPropagation","getOnclick","SliderEvent","action","name","Slider","getEventFullName","getName","MessageEvent","eventOptions","sender","setName","setSlider","eventId","url","sliderOptions","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","contentCallback","contentCallbackInvoved","contentClassName","containerClassName","overlayClassName","refineUrl","offset","hideControls","width","cacheable","autoFocus","printable","allowChangeHistory","allowChangeTitle","isBoolean","allowCrossOrigin","customLeftBoundary","customRightBoundary","setCustomLeftBoundary","setCustomRightBoundary","title","setTitle","iframe","iframeSrc","iframeId","requestMethod","toLowerCase","requestParams","opened","hidden","destroyed","loaded","loadedCnt","minimizing","maximizing","handleFrameKeyDown","handleFrameFocus","handleFrameUnload","handlePopupInit","handleCrossOriginWindowMessage","layout","overlay","container","loader","content","isElementNode","typeLoader","animation","animationDuration","overlayBgColor","test","overlayOpacity","min","max","overlayBgCallback","includes","startPosition","outerBoundary","overlayAnimation","animationName","animationOptions","minimizeOptions","entityType","entityId","setToolbarOnOpen","hideToolbarOnOpen","setDesignSystemContext","designSystemContext","setAutoOffset","autoOffset","label","Loc","getMessage","close","minimizeLabel","newWindowLabel","copyLinkLabel","isSelfContained","isLoaded","minimize","newWindowUrl","getUrl","Object","assign","document","createElement","target","href","BX","clipboard","bindCopyClick","link","onOpen","compatibleEvents","onLoad","eventName","entries","EventEmitter","subscribe","compatMode","isOpen","canOpen","isDestroyed","fireEvent","createLayout","adjustLayout","ZIndexManager","bringToFront","animateOpening","immediately","callback","canClose","stop","Browser","isMobile","completeAnimation","easing","duration","start","finish","step","state","animateStep","complete","origin","animate","success","open","type","flag","context","isString","getWindow","focus","zIndex","getZIndexComponent","getZIndex","Text","getRandom","contentWindow","window","getTitle","canChangeHistory","showPrintBtn","hidePrintBtn","getLoader","createLoader","display","getLabel","showIcon","hideIcon","getText","lightenIcon","darkenIcon","getPrintBtn","getExtraLabelsContainer","removeContentClass","getContentContainer","removeContainerClass","removeOverlayClass","getCustomLeftBoundary","getLeftBoundary","windowWidth","innerWidth","documentElement","clientWidth","getOffset","calculateLeftBoundary","boundary","getCustomRightBoundary","pageXOffset","getRightBoundary","firePageEvent","fireFrameEvent","frameWindow","getFrameWindow","Event","unbind","unsubscribe","unregister","remove","closeBtn","unsubscribeAll","showLoader","setContent","location","reload","scrollTop","pageYOffset","windowHeight","innerHeight","clientHeight","topBoundary","getTopBoundary","isTopBoundaryVisible","height","leftBoundary","getLeftBoundaryOffset","rightBoundary","calculateRightBoundary","top","right","bottom","getWidth","parentNode","append","body","getFrame","setFrameSrc","register","attrs","referrerpolicy","src","frameborder","getFrameId","id","load","handleFrameLoad","overlayClass","mousedown","handleOverlayClick","parseInt","padStart","Tag","render","getDesignSystemContext","contentClass","handlePrintBtnClick","clean","promise","isPromiseReturned","prototype","call","Promise","resolve","then","result","html","Runtime","removeLoader","catch","reason","innerHTML","isDomNode","Uri","addParam","IFRAME","IFRAME_TYPE","isPostMethod","form","method","util","addObjectToForm","getRequestParams","submit","listenIframeLoading","sliderLoader","oldLoaders","createHTMLLoader","loaderExists","createOldLoader","charAt","createSvgLoader","moduleId","svgName","svg","createDefaultLoader","backgroundImage","i","styleSheets","rules","cssRules","rule","selectorText","isPrintable","scale","translateX","translateY","getOverlayAnimation","transform","isFocusable","getCloseBtn","isCacheable","destroy","sliderEvent","getEvent","emit","getFullName","BaseEvent","compatData","onCustomEvent","canAction","pageEvent","frameEvent","isActionAllowed","frameUrl","URL","eventUrl","message","undefined","iframeLocation","e","closeLoader","console","warn","paddingBottom","iframeUrl","pathname","search","hash","injectPrintStyles","setInterval","clearInterval","readyState","keyCode","framePopupManager","Main","PopupManager","popups","getPopups","popup","isShown","centerX","centerY","element","elementFromPoint","closest","getCompatData","bindElement","params","targetContainer","contains","preventDefault","frame","frameDoc","write","headTags","links","head","querySelectorAll","outerHTML","print","setTimeout","frameDocument","bodyClass","classList","bodyStyle","styleSheet","cssText","appendChild","createTextNode","removeParam","mode","states","progress","intensity","end","calculateOuterBoundary","merge","getOuterBoundary","instance","getInstance","topWindow","PageObject","getRootWindow","SidePanel","Instance","SliderManager","ToolbarItem","itemOptions","setEventNamespace","entityName","refs","rendered","setUrl","setEntityType","setEntityId","getTitleContainer","handleClick","handleMouseEnter","handleMouseLeave","handleRemoveBtnClick","encodeURI","encode","node","prepend","insertBefore","insertAfter","targetNode","rect","targetNodeWidth","popupWidth","scrollWidth","hint","bindOptions","forceBindPosition","forceTop","getEntityName","darkMode","fixed","offsetTop","onShow","getTarget","offsetLeft","angleShift","Popup","getOption","setAngle","setOffset","show","adjustPosition","getPopupById","ctrlKey","metaKey","maximize","showTooltip","hideTooltip","getEntityType","getEntityId","Toolbar","toolbarOptions","items","lsKey","initialPosition","shiftedPosition","collapsed","muted","shifted","maxVisibleItems","addItems","item","restoreItemFromLocalStorage","getItem","clearLocalStorage","minimizeItem","canShowOnTop","unmute","mute","setPosition","sliders","getOpenSliders","unshift","shift","prop","unbindAll","requestAnimationFrame","bindOnce","request","expand","collapse","itemsOptions","isArrayFilled","forEach","addItem","createItem","push","redraw","getMinimizeOptions","setEntityName","handleItemRemove","itemExists","prependItem","saveItemToLocalStorage","response","status","removeItem","ttl","Date","now","localStorage","setItem","JSON","stringify","parse","additional","Ajax","runAction","json","toolbar","getContext","toJSON","itemId","currentTarget","dataset","menuItemId","itemToRemove","getItemById","menu","getMenu","removeMenuItem","invisibleItemsCount","getItems","reduce","count","isRendered","getPopupWindow","filter","restored","getItemsCount","hide","visibleItemsCount","previousItem","nextItem","appendTo","getItemsContainer","find","getId","classes","join","handleToggleClick","alwaysOnTop","toggleMuteness","debounce","forceCollapsed","onSliderClose","isMuted","toggleShift","isShifted","isCollapsed","throttle","getMoreButton","handleMoreBtnClick","map","createMenuItemText","delimiter","removeAll","MenuManager","maxHeight","getPopupContainer","offsetWidth","startsWith","Reflection","getClass","UI","Viewer","sliderId","shouldHideToolbarOnOpen","stack","getStack","components","getComponents","component","getMenuById","handleMenuItemRemove","toggle","sliderClassName","sliderDefaultOptions","sliderPriorityOptions","anchorRules","anchorBinding","openSliders","lastOpenSlider","hacksApplied","pageUrl","getCurrentUrl","pageTitle","getCurrentTitle","titleChanged","fullScreenSlider","handleAnchorClick","handleDocumentKeyDown","handleWindowResize","handleWindowScroll","handleTouchMove","handleSliderOpenStart","handleSliderOpenComplete","handleSliderMaximizeStart","handleSliderCloseStart","handleSliderCloseComplete","handleSliderMinimizeStart","handleSliderLoad","handleSliderDestroy","handleEscapePress","handleFullScreenChange","closeAll","unhide","postMessage","postMessageAll","postMessageTop","handlePostMessageCompatible","tryApplyHacks","getUrlRule","ruleOptions","cb","applyHacks","resetHacks","topSlider","getTopSlider","sliderUrl","sliderToDestroy","getLastOpenSlider","currentSlider","previousSlider","isUndefined","BXIM","replace","getFullScreenSlider","requestFullscreen","webkitRequestFullScreen","msRequestFullscreen","mozRequestFullScreen","log","exitFullscreen","webkitExitFullscreen","msExitFullscreen","mozCancelFullScreen","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","getFullScreenElement","scrollTo","pageScrollTop","resizeEvent","createEvent","initEvent","dispatchEvent","source","getSliderFromSource","sliderWindow","parameters","registerAnchorListener","error","trace","condition","m","RegExp","targetDocument","exitFullScreen","hideOverlay","setOverlayBackground","sameWidth","showShadow","hideOrDarkenCloseBtn","hideExtraLabels","setOverlayAnimation","_classPrivateMethodGet","index","moveAt","losePageFocus","setBrowserHistory","updateBrowserTitle","setAnimation","getPreviousSlider","visibleSlider","unhideOverlay","hideShadow","showOrLightenCloseBtn","getToolbar","cleanUpClosedSlider","unregisterAnchorListener","isOnTop","canCloseByEsc","showExtraLabels","getOpenSlidersCount","resetBrowserHistory","getSliderByWindow","disablePageScrollbar","bindEvents","applyPostHacks","resetPostHacks","enablePageScrollbar","unbindEvents","paddingRight","removeProperty","activeElement","blur","which","a","nodeName","getAttribute","anchor","isAnchorBinding","extractLinkFromEvent","isValidLink","handler","bubbles","cancelable","k","hasStopParams","stopParameters","allowCrossDomain","isCrossDomain","mobileFriendly","validate","history","replaceState","getPageUrl","getBrowserTitle","getPageTitle","canChangeTitle","questionPos","indexOf","query","param","defaultOptions","priorityOptions","sliderClass","isHidden","getSliderDefaultOptions","getSliderPriorityOptions","SliderClass","getSliderClass","shouldUseAutoOffset","lastOffset","openSlider","splice","defineProperty","enumerable","get","namespace"],"mappings":"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"}