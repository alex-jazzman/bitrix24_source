{"version":3,"file":"main.popup.bundle.js","sources":["../src/compatibility/button.js","../src/popup/position-event.js","../src/popup/popup-close-icon-size.js","../src/popup/popup.js","../src/popup/popup-manager.js","../src/menu/menu-item.js","../src/menu/menu.js","../src/menu/menu-manager.js","../src/compatibility/popup-window.js","../src/compatibility/popup-window-button.js","../src/compatibility/buttonlink.js","../src/compatibility/popup-window-button-link.js","../src/compatibility/custombutton.js","../src/compatibility/popup-window-custom-button.js","../src/compatibility/popup-menu-window.js","../src/compatibility/popup-menu-item.js","../src/compatibility/input-popup.js","../src/index.js"],"sourcesContent":["import { Type, Dom } from 'main.core';\n\ndeclare type ButtonOptions = {\n\tid?: string,\n\ttext?: string,\n\tclassName?: string,\n\tevents?: { [event: string]: (event) => {} }\n};\n\n/**\n * @memberOf BX.Main.Popup\n * @deprecated use BX.UI.Button\n */\nexport default class Button\n{\n\tconstructor(params: ButtonOptions)\n\t{\n\t\tthis.popupWindow = null;\n\n\t\tthis.params = params || {};\n\n\t\tthis.text = this.params.text || '';\n\t\tthis.id = this.params.id || '';\n\t\tthis.className = this.params.className || '';\n\t\tthis.events = this.params.events || {};\n\n\t\tthis.contextEvents = {};\n\t\tfor (let eventName in this.events)\n\t\t{\n\t\t\tif (Type.isFunction(this.events[eventName]))\n\t\t\t{\n\t\t\t\tthis.contextEvents[eventName] = this.events[eventName].bind(this);\n\t\t\t}\n\t\t}\n\n\t\tthis.buttonNode = Dom.create(\n\t\t\t'span',\n\t\t\t{\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'popup-window-button' + (this.className.length > 0 ? ' ' + this.className : ''),\n\t\t\t\t\tid: this.id\n\t\t\t\t},\n\t\t\t\tevents: this.contextEvents,\n\t\t\t\ttext: this.text\n\t\t\t}\n\t\t);\n\t}\n\n\trender(): Element\n\t{\n\t\treturn this.buttonNode;\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.id;\n\t}\n\n\tgetContainer(): Element\n\t{\n\t\treturn this.buttonNode;\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn this.text;\n\t}\n\n\tsetName(name: string)\n\t{\n\t\tthis.text = name || '';\n\t\tif (this.buttonNode)\n\t\t{\n\t\t\tDom.clean(this.buttonNode);\n\t\t\tDom.adjust(this.buttonNode, { text: this.text });\n\t\t}\n\t}\n\n\tsetClassName(className: string)\n\t{\n\t\tif (this.buttonNode)\n\t\t{\n\t\t\tif (Type.isString(this.className) && (this.className !== ''))\n\t\t\t{\n\t\t\t\tDom.removeClass(this.buttonNode, this.className);\n\t\t\t}\n\n\t\t\tDom.addClass(this.buttonNode, className);\n\t\t}\n\n\t\tthis.className = className;\n\t}\n\n\taddClassName(className: string)\n\t{\n\t\tif (this.buttonNode)\n\t\t{\n\t\t\tDom.addClass(this.buttonNode, className);\n\t\t\tthis.className = this.buttonNode.className;\n\t\t}\n\t}\n\n\tremoveClassName(className: string)\n\t{\n\t\tif (this.buttonNode)\n\t\t{\n\t\t\tDom.removeClass(this.buttonNode, className);\n\t\t\tthis.className = this.buttonNode.className;\n\t\t}\n\t}\n}","import { Type } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\n\nexport default class PositionEvent extends BaseEvent\n{\n\t#left: number;\n\t#top: number;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tget left(): number\n\t{\n\t\treturn this.#left;\n\t}\n\n\tset left(value: number)\n\t{\n\t\tif (Type.isNumber(value))\n\t\t{\n\t\t\tthis.#left = value;\n\t\t}\n\t}\n\n\tget top(): number\n\t{\n\t\treturn this.#top;\n\t}\n\n\tset top(value: number): void\n\t{\n\t\tif (Type.isNumber(value))\n\t\t{\n\t\t\tthis.#top = value;\n\t\t}\n\t}\n}","/**\n * @namespace {BX.Main.Popup}\n */\nconst CloseIconSize = Object.freeze({\n\tLARGE: 'large',\n\tSMALL: 'small',\n})\n\nexport default CloseIconSize;","import Button from '../compatibility/button';\n\nimport { Type, Text, Tag, Event, Dom, Browser, Reflection } from 'main.core';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\nimport {\n\ttype PopupOptions,\n\ttype PopupTarget,\n\ttype PopupAnimationOptions,\n\ttype PopupOverlay,\n\ttype PopupDraggable,\n} from './popup-types';\nimport { ZIndexManager, ZIndexComponent } from 'main.core.z-index-manager';\nimport PositionEvent from './position-event';\nimport CloseIconSize from './popup-close-icon-size';\n\ndeclare type TargetPosition = {\n\tleft: number,\n\ttop: number,\n\tbottom: number,\n\twindowSize: number,\n\twindowScroll: number,\n\tpopupWidth: number,\n\tpopupHeight: number\n};\n\nconst aliases = {\n\tonPopupWindowInit: { namespace: 'BX.Main.Popup', eventName: 'onInit' },\n\tonPopupWindowIsInitialized: { namespace: 'BX.Main.Popup', eventName: 'onAfterInit' },\n\tonPopupFirstShow: { namespace: 'BX.Main.Popup', eventName: 'onFirstShow' },\n\tonPopupShow: { namespace: 'BX.Main.Popup', eventName: 'onShow' },\n\tonAfterPopupShow: { namespace: 'BX.Main.Popup', eventName: 'onAfterShow' },\n\tonPopupClose: { namespace: 'BX.Main.Popup', eventName: 'onClose' },\n\tonPopupAfterClose: { namespace: 'BX.Main.Popup', eventName: 'onAfterClose' },\n\tonPopupDestroy: { namespace: 'BX.Main.Popup', eventName: 'onDestroy' },\n\tonPopupFullscreenLeave: { namespace: 'BX.Main.Popup', eventName: 'onFullscreenLeave' },\n\tonPopupFullscreenEnter: { namespace: 'BX.Main.Popup', eventName: 'onFullscreenEnter' },\n\tonPopupDragStart: { namespace: 'BX.Main.Popup', eventName: 'onDragStart' },\n\tonPopupDrag: { namespace: 'BX.Main.Popup', eventName: 'onDrag' },\n\tonPopupDragEnd: { namespace: 'BX.Main.Popup', eventName: 'onDragEnd' },\n\tonPopupResizeStart: { namespace: 'BX.Main.Popup', eventName: 'onResizeStart' },\n\tonPopupResize: { namespace: 'BX.Main.Popup', eventName: 'onResize' },\n\tonPopupResizeEnd: { namespace: 'BX.Main.Popup', eventName: 'onResizeEnd' }\n};\n\nEventEmitter.registerAliases(aliases);\n\nconst disabledScrolls: WeakMap<HTMLElement, Set<Popup>> = new WeakMap();\n\n/**\n * @memberof BX.Main\n */\nexport default class Popup extends EventEmitter\n{\n\t/**\n\t * @private\n\t */\n\tstatic options = {};\n\n\t/**\n\t * @private\n\t */\n\tstatic defaultOptions = {\n\n\t\t//left offset for popup about target\n\t\tangleLeftOffset: 40,\n\n\t\t//when popup position is 'top' offset distance between popup body and target node\n\t\tpositionTopXOffset: -11,\n\n\t\t//offset distance between popup body and target node if use angle, sum with positionTopXOffset\n\t\tangleTopOffset: 10,\n\n\t\tpopupZindex: 1000,\n\t\tpopupOverlayZindex: 1100,\n\n\t\tangleMinLeft: 10,\n\t\tangleMaxLeft: 30,\n\n\t\tangleMinRight: 10,\n\t\tangleMaxRight: 30,\n\n\t\tangleMinBottom: 23,\n\t\tangleMaxBottom: 25,\n\n\t\tangleMinTop: 23,\n\t\tangleMaxTop: 25,\n\n\t\toffsetLeft: 0,\n\t\toffsetTop: 0\n\t};\n\n\tstatic setOptions(options: { [name: string]: any })\n\t{\n\t\tif (!Type.isPlainObject(options))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfor (let option in options)\n\t\t{\n\t\t\tthis.options[option] = options[option];\n\t\t}\n\t}\n\n\tstatic getOption(option: string, defaultValue?: any)\n\t{\n\t\tif (!Type.isUndefined(this.options[option]))\n\t\t{\n\t\t\treturn this.options[option];\n\t\t}\n\t\telse if (!Type.isUndefined(defaultValue))\n\t\t{\n\t\t\treturn defaultValue;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.defaultOptions[option];\n\t\t}\n\t}\n\n\tconstructor(options?: PopupOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Main.Popup');\n\n\t\tlet [popupId: string, bindElement: PopupTarget, params: PopupOptions] = arguments; //compatible arguments\n\n\t\tthis.compatibleMode = params && Type.isBoolean(params.compatibleMode) ? params.compatibleMode : true;\n\t\tif (Type.isPlainObject(options) && !bindElement && !params)\n\t\t{\n\t\t\tparams = options;\n\t\t\tpopupId = options.id;\n\t\t\tbindElement = options.bindElement;\n\t\t\tthis.compatibleMode = false;\n\t\t}\n\n\t\tparams = params || {};\n\t\tthis.params = params;\n\n\t\tif (!Type.isStringFilled(popupId))\n\t\t{\n\t\t\tpopupId = 'popup-window-' + Text.getRandom().toLowerCase();\n\t\t}\n\n\t\tthis.emit('onInit', new BaseEvent({ compatData: [popupId, bindElement, params] }));\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tthis.uniquePopupId = popupId;\n\t\tthis.params.zIndex = Type.isNumber(params.zIndex) ? parseInt(params.zIndex) : 0;\n\t\tthis.params.zIndexAbsolute = Type.isNumber(params.zIndexAbsolute) ? parseInt(params.zIndexAbsolute) : 0;\n\t\tthis.buttons = params.buttons && Type.isArray(params.buttons) ? params.buttons : [];\n\t\tthis.offsetTop = Popup.getOption('offsetTop');\n\t\tthis.offsetLeft = Popup.getOption('offsetLeft');\n\t\tthis.firstShow = false;\n\t\tthis.bordersWidth = 20;\n\t\tthis.bindElementPos = null;\n\t\tthis.closeIcon = null;\n\t\tthis.resizeIcon = null;\n\t\tthis.angle = null;\n\t\tthis.angleArrowElement = null;\n\t\tthis.overlay = null;\n\t\tthis.titleBar = null;\n\t\tthis.bindOptions = typeof (params.bindOptions) === 'object' ? params.bindOptions : {};\n\t\tthis.autoHide = params.autoHide === true;\n\t\tthis.disableScroll = params.disableScroll === true || params.isScrollBlock === true;\n\t\tthis.autoHideHandler = Type.isFunction(params.autoHideHandler) ? params.autoHideHandler : null;\n\t\tthis.handleAutoHide = this.handleAutoHide.bind(this);\n\t\tthis.handleOverlayClick = this.handleOverlayClick.bind(this);\n\t\tthis.isAutoHideBinded = false;\n\t\tthis.closeByEsc = params.closeByEsc === true;\n\t\tthis.isCloseByEscBinded = false;\n\t\tthis.toFrontOnShow = true;\n\n\t\tthis.cacheable = true;\n\t\tthis.destroyed = false;\n\t\tthis.fixed = false;\n\n\t\tthis.width = null;\n\t\tthis.height = null;\n\t\tthis.minWidth = null;\n\t\tthis.minHeight = null;\n\t\tthis.maxWidth = null;\n\t\tthis.maxHeight = null;\n\n\t\tthis.padding = null;\n\t\tthis.contentPadding = null;\n\t\tthis.background = null;\n\t\tthis.contentBackground = null;\n\n\t\tthis.borderRadius = null;\n\t\tthis.contentBorderRadius = null;\n\n\t\tthis.setTargetContainer(params.targetContainer);\n\n\t\tthis.dragOptions = {\n\t\t\tcursor: '',\n\t\t\tcallback: function() {\n\t\t\t},\n\t\t\teventName: ''\n\t\t};\n\n\t\tthis.dragged = false;\n\t\tthis.dragPageX = 0;\n\t\tthis.dragPageY = 0;\n\n\t\tthis.animationShowClassName = null;\n\t\tthis.animationCloseClassName = null;\n\t\tthis.animationCloseEventType = null;\n\n\t\tthis.handleDocumentMouseMove = this.handleDocumentMouseMove.bind(this);\n\t\tthis.handleDocumentMouseUp = this.handleDocumentMouseUp.bind(this);\n\t\tthis.handleDocumentKeyUp = this.handleDocumentKeyUp.bind(this);\n\t\tthis.handleResizeWindow = this.handleResizeWindow.bind(this);\n\t\tthis.handleResize = this.handleResize.bind(this);\n\t\tthis.handleMove = this.handleMove.bind(this);\n\t\tthis.onTitleMouseDown = this.onTitleMouseDown.bind(this);\n\t\tthis.handleFullScreen = this.handleFullScreen.bind(this);\n\n\t\tthis.subscribeFromOptions(params.events);\n\n\t\tlet popupClassName = 'popup-window';\n\n\t\tif (params.titleBar)\n\t\t{\n\t\t\tpopupClassName += ' popup-window-with-titlebar';\n\t\t}\n\n\t\tif (params.className && Type.isStringFilled(params.className))\n\t\t{\n\t\t\tpopupClassName += ` ${params.className}`;\n\t\t}\n\n\t\tif (params.darkMode)\n\t\t{\n\t\t\tpopupClassName += ' popup-window-dark';\n\t\t}\n\n\t\tthis.designSystemContext = params.darkMode ? '--ui-context-content-dark' : '--ui-context-content-light';\n\t\tpopupClassName += ` ${this.designSystemContext}`;\n\n\t\tif (params.titleBar)\n\t\t{\n\t\t\tthis.titleBar = Tag.render`\n\t\t\t\t<div class=\"popup-window-titlebar\" id=\"popup-window-titlebar-${popupId}\"></div>\n\t\t\t`;\n\t\t}\n\n\t\tif (params.closeIcon)\n\t\t{\n\t\t\tlet className = 'popup-window-close-icon'\n\t\t\t\t+ (params.titleBar ? ' popup-window-titlebar-close-icon' : '');\n\t\t\tif (Object.values(CloseIconSize).includes(params.closeIconSize) && params.closeIconSize !== CloseIconSize.SMALL)\n\t\t\t{\n\t\t\t\tclassName += ` --${params.closeIconSize}`;\n\t\t\t}\n\n\t\t\tthis.closeIcon = Tag.render`\n\t\t\t\t<span class=\"${className}\" onclick=\"${this.handleCloseIconClick.bind(this)}\"></span>\n\t\t\t`;\n\n\t\t\tif (Type.isPlainObject(params.closeIcon))\n\t\t\t{\n\t\t\t\tDom.style(this.closeIcon, params.closeIcon);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tthis.contentContainer = Tag.render`\n\t\t\t<div id=\"popup-window-content-${popupId}\" class=\"popup-window-content\"></div>\n\t\t`;\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tthis.popupContainer = Tag.render`\n\t\t\t<div\n\t\t\t\tclass=\"${popupClassName}\"\n\t\t\t\tid=\"${popupId}\"\n\t\t\t\tstyle=\"display: none; position: absolute; left: 0; top: 0;\"\n\t\t\t>${[this.titleBar, this.contentContainer, this.closeIcon]}</div>\n\t\t`;\n\n\t\tthis.getTargetContainer().append(this.popupContainer);\n\n\t\tthis.zIndexComponent = ZIndexManager.register(this.popupContainer, params.zIndexOptions);\n\n\t\tthis.buttonsContainer = null;\n\n\t\tif (params.contentColor && Type.isStringFilled(params.contentColor))\n\t\t{\n\t\t\tif (\n\t\t\t\tparams.contentColor === 'white'\n\t\t\t\t|| params.contentColor === 'gray'\n\t\t\t)\n\t\t\t{\n\t\t\t\tpopupClassName += ' popup-window-content-' + params.contentColor;\n\t\t\t}\n\n\t\t\tthis.setContentColor(params.contentColor);\n\t\t}\n\n\t\tif (params.angle)\n\t\t{\n\t\t\tthis.setAngle(params.angle);\n\t\t}\n\n\t\tif (params.overlay)\n\t\t{\n\t\t\tthis.setOverlay(params.overlay);\n\t\t}\n\n\t\tthis.setOffset(params);\n\t\tthis.setBindElement(bindElement);\n\t\tthis.setTitleBar(params.titleBar);\n\t\tthis.setDraggable(params.draggable);\n\t\tthis.setContent(params.content);\n\t\tthis.setButtons(params.buttons);\n\t\tthis.setWidth(params.width);\n\t\tthis.setHeight(params.height);\n\t\tthis.setMinWidth(params.minWidth);\n\t\tthis.setMinHeight(params.minHeight);\n\t\tthis.setMaxWidth(params.maxWidth);\n\t\tthis.setMaxHeight(params.maxHeight);\n\t\tthis.setResizeMode(params.resizable);\n\t\tthis.setPadding(params.padding);\n\t\tthis.setContentPadding(params.contentPadding);\n\t\tthis.setBorderRadius(params.borderRadius);\n\t\tthis.setContentBorderRadius(params.contentBorderRadius);\n\t\tthis.setBackground(params.background);\n\t\tthis.setContentBackground(params.contentBackground);\n\t\tthis.setAnimation(params.animation);\n\t\tthis.setCacheable(params.cacheable);\n\t\tthis.setToFrontOnShow(params.toFrontOnShow);\n\t\tthis.setFixed(params.fixed);\n\t\tthis.setDesignSystemContext(params.designSystemContext);\n\n\t\t// Compatibility\n\t\tif (params.contentNoPaddings)\n\t\t{\n\t\t\tthis.setContentPadding(0);\n\t\t}\n\t\tif (params.noAllPaddings)\n\t\t{\n\t\t\tthis.setPadding(0);\n\t\t\tthis.setContentPadding(0);\n\t\t}\n\n\t\tif (params.bindOnResize !== false)\n\t\t{\n\t\t\tEvent.bind(window, 'resize', this.handleResizeWindow);\n\t\t}\n\n\t\tthis.emit('onAfterInit', new BaseEvent({ compatData: [popupId, this] }));\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsubscribeFromOptions(events): void\n\t{\n\t\tsuper.subscribeFromOptions(events, aliases);\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.uniquePopupId;\n\t}\n\n\tisCompatibleMode(): boolean\n\t{\n\t\treturn this.compatibleMode;\n\t}\n\n\tsetContent(content: string | Element | Node)\n\t{\n\t\tif (!this.contentContainer || !content)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Type.isElementNode(content))\n\t\t{\n\t\t\tDom.clean(this.contentContainer);\n\n\t\t\tconst hasParent = Type.isDomNode(content.parentNode);\n\t\t\tthis.contentContainer.appendChild(content);\n\t\t\tif (this.isCompatibleMode() || hasParent)\n\t\t\t{\n\t\t\t\tcontent.style.display = 'block';\n\t\t\t}\n\t\t}\n\t\telse if (Type.isString(content))\n\t\t{\n\t\t\tthis.contentContainer.innerHTML = content;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.contentContainer.innerHTML = '&nbsp;';\n\t\t}\n\t}\n\n\tsetButtons(buttons: [])\n\t{\n\t\tthis.buttons = buttons && Type.isArray(buttons) ? buttons : [];\n\n\t\tif (this.buttonsContainer)\n\t\t{\n\t\t\tDom.remove(this.buttonsContainer);\n\t\t}\n\n\t\tconst ButtonClass = Reflection.getClass('BX.UI.Button');\n\t\tif (this.buttons.length > 0 && this.contentContainer)\n\t\t{\n\t\t\tconst newButtons = [];\n\t\t\tfor (let i = 0; i < this.buttons.length; i++)\n\t\t\t{\n\t\t\t\tconst button = this.buttons[i];\n\t\t\t\tif (button instanceof Button)\n\t\t\t\t{\n\t\t\t\t\tbutton.popupWindow = this;\n\t\t\t\t\tnewButtons.push(button.render());\n\t\t\t\t}\n\t\t\t\telse if (ButtonClass && (button instanceof ButtonClass))\n\t\t\t\t{\n\t\t\t\t\tbutton.setContext(this);\n\t\t\t\t\tnewButtons.push(button.render());\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.buttonsContainer = this.contentContainer.parentNode.appendChild(\n\t\t\t\tTag.render`<div class=\"popup-window-buttons\">${newButtons}</div>`\n\t\t\t);\n\t\t}\n\t}\n\n\tgetButtons(): []\n\t{\n\t\treturn this.buttons;\n\t}\n\n\tgetButton(id: string)\n\t{\n\t\tfor (let i = 0; i < this.buttons.length; i++)\n\t\t{\n\t\t\tconst button = this.buttons[i];\n\t\t\tif (button.getId() === id)\n\t\t\t{\n\t\t\t\treturn button;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tsetBindElement(bindElement: Element | { left: number, top: number } | null | MouseEvent)\n\t{\n\t\tif (bindElement === null)\n\t\t{\n\t\t\tthis.bindElement = null;\n\t\t}\n\t\telse if (typeof (bindElement) === 'object')\n\t\t{\n\t\t\tif (Type.isDomNode(bindElement) || (Type.isNumber(bindElement.top) && Type.isNumber(bindElement.left)))\n\t\t\t{\n\t\t\t\tthis.bindElement = bindElement;\n\t\t\t}\n\t\t\telse if (Type.isNumber(bindElement.clientX) && Type.isNumber(bindElement.clientY))\n\t\t\t{\n\t\t\t\tthis.bindElement = { left: bindElement.pageX, top: bindElement.pageY, bottom: bindElement.pageY };\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetBindElementPos(bindElement: HTMLElement | any): TargetPosition | DOMRect\n\t{\n\t\tif (Type.isDomNode(bindElement))\n\t\t{\n\t\t\tif (this.isTargetDocumentBody())\n\t\t\t{\n\t\t\t\treturn this.isFixed() ? bindElement.getBoundingClientRect() : Dom.getPosition(bindElement);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn this.getPositionRelativeToTarget(bindElement);\n\t\t\t}\n\t\t}\n\t\telse if (bindElement && typeof (bindElement) === 'object')\n\t\t{\n\t\t\tif (!Type.isNumber(bindElement.bottom))\n\t\t\t{\n\t\t\t\tbindElement.bottom = bindElement.top;\n\t\t\t}\n\n\t\t\treturn bindElement;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst windowSize = this.getWindowSize();\n\t\t\tconst windowScroll = this.getWindowScroll();\n\n\t\t\tconst popupWidth = this.getPopupContainer().offsetWidth;\n\t\t\tconst popupHeight = this.getPopupContainer().offsetHeight;\n\n\t\t\tthis.bindOptions.forceTop = true;\n\n\t\t\treturn {\n\t\t\t\tleft: windowSize.innerWidth / 2 - popupWidth / 2 + windowScroll.scrollLeft,\n\t\t\t\ttop: windowSize.innerHeight / 2 - popupHeight / 2 + (this.isFixed() ? 0 : windowScroll.scrollTop),\n\t\t\t\tbottom: windowSize.innerHeight / 2 - popupHeight / 2 + (this.isFixed() ? 0 : windowScroll.scrollTop),\n\n\t\t\t\t//for optimisation purposes\n\t\t\t\twindowSize: windowSize,\n\t\t\t\twindowScroll: windowScroll,\n\t\t\t\tpopupWidth: popupWidth,\n\t\t\t\tpopupHeight: popupHeight\n\t\t\t};\n\t\t}\n\t}\n\n\t/**\n\t * @internal\n\t */\n\tgetPositionRelativeToTarget(element: HTMLElement): DOMRect\n\t{\n\t\tlet offsetLeft = element.offsetLeft;\n\t\tlet offsetTop = element.offsetTop;\n\t\tlet offsetElement = element.offsetParent;\n\n\t\twhile (offsetElement && offsetElement !== this.getTargetContainer())\n\t\t{\n\t\t\toffsetLeft += offsetElement.offsetLeft;\n\t\t\toffsetTop += offsetElement.offsetTop;\n\t\t\toffsetElement = offsetElement.offsetParent;\n\t\t}\n\n\t\tconst elementRect = element.getBoundingClientRect();\n\n\t\treturn new DOMRect(\n\t\t\toffsetLeft,\n\t\t\toffsetTop,\n\t\t\telementRect.width,\n\t\t\telementRect.height\n\t\t);\n\t}\n\n\t// private\n\tgetWindowSize(): { innerWidth: number, innerHeight: number }\n\t{\n\t\tif (this.isTargetDocumentBody())\n\t\t{\n\t\t\treturn {\n\t\t\t\tinnerWidth: window.innerWidth,\n\t\t\t\tinnerHeight: window.innerHeight\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn {\n\t\t\t\tinnerWidth: this.getTargetContainer().offsetWidth,\n\t\t\t\tinnerHeight: this.getTargetContainer().offsetHeight\n\t\t\t};\n\t\t}\n\t}\n\n\t// private\n\tgetWindowScroll()\n\t{\n\t\tif (this.isTargetDocumentBody())\n\t\t{\n\t\t\treturn {\n\t\t\t\tscrollLeft: window.pageXOffset,\n\t\t\t\tscrollTop: window.pageYOffset\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn {\n\t\t\t\tscrollLeft: this.getTargetContainer().scrollLeft,\n\t\t\t\tscrollTop: this.getTargetContainer().scrollTop\n\t\t\t};\n\t\t}\n\t}\n\n\tsetAngle(params: { offset: number, position?: 'top' | 'bottom' | 'left' | 'right' })\n\t{\n\t\tif (params === false)\n\t\t{\n\t\t\tif (this.angle !== null)\n\t\t\t{\n\t\t\t\tDom.remove(this.angle.element);\n\t\t\t}\n\n\t\t\tthis.angle = null;\n\t\t\tthis.angleArrowElement = null;\n\t\t\treturn;\n\t\t}\n\n\t\tconst className = 'popup-window-angly';\n\t\tif (this.angle === null)\n\t\t{\n\t\t\tconst position = this.bindOptions.position && this.bindOptions.position === 'top' ? 'bottom' : 'top';\n\t\t\tconst angleMinLeft = Popup.getOption(position === 'top' ? 'angleMinTop' : 'angleMinBottom');\n\t\t\tlet defaultOffset = Type.isNumber(params.offset) ? params.offset : 0;\n\n\t\t\tconst angleLeftOffset = Popup.getOption('angleLeftOffset', null);\n\t\t\tif (defaultOffset > 0 && Type.isNumber(angleLeftOffset))\n\t\t\t{\n\t\t\t\tdefaultOffset += angleLeftOffset - Popup.defaultOptions.angleLeftOffset;\n\t\t\t}\n\n\t\t\tthis.angleArrowElement = Tag.render`<div class=\"popup-window-angly--arrow\"></div>`;\n\t\t\tif (this.background)\n\t\t\t{\n\t\t\t\tthis.angleArrowElement.style.background = this.background;\n\t\t\t}\n\n\t\t\tthis.angle = {\n\t\t\t\telement: Tag.render`\n\t\t\t\t\t<div class=\"${className} ${className}-${position}\">\n\t\t\t\t\t\t${this.angleArrowElement}\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t\tposition: position,\n\t\t\t\toffset: 0,\n\t\t\t\tdefaultOffset: Math.max(defaultOffset, angleMinLeft)\n\t\t\t\t//Math.max(Type.isNumber(params.offset) ? params.offset : 0, angleMinLeft)\n\t\t\t};\n\n\t\t\tthis.getPopupContainer().appendChild(this.angle.element);\n\t\t}\n\n\t\tif (typeof (params) === 'object' && params.position && ['top', 'right', 'bottom', 'left', 'hide'].includes(params.position))\n\t\t{\n\t\t\tDom.removeClass(this.angle.element, className + '-' + this.angle.position);\n\t\t\tDom.addClass(this.angle.element, className + '-' + params.position);\n\n\t\t\tthis.angle.position = params.position;\n\t\t}\n\n\t\tif (typeof (params) === 'object' && Type.isNumber(params.offset))\n\t\t{\n\t\t\tconst offset = params.offset;\n\t\t\tlet minOffset, maxOffset;\n\t\t\tif (this.angle.position === 'top')\n\t\t\t{\n\t\t\t\tminOffset = Popup.getOption('angleMinTop');\n\t\t\t\tmaxOffset = this.getPopupContainer().offsetWidth - Popup.getOption('angleMaxTop');\n\t\t\t\tmaxOffset = maxOffset < minOffset ? Math.max(minOffset, offset) : maxOffset;\n\n\t\t\t\tthis.angle.offset = Math.min(Math.max(minOffset, offset), maxOffset);\n\t\t\t\tthis.angle.element.style.left = this.angle.offset + 'px';\n\t\t\t\tthis.angle.element.style.marginLeft = 0;\n\t\t\t\tthis.angle.element.style.removeProperty('top');\n\t\t\t}\n\t\t\telse if (this.angle.position === 'bottom')\n\t\t\t{\n\t\t\t\tminOffset = Popup.getOption('angleMinBottom');\n\t\t\t\tmaxOffset = this.getPopupContainer().offsetWidth - Popup.getOption('angleMaxBottom');\n\t\t\t\tmaxOffset = maxOffset < minOffset ? Math.max(minOffset, offset) : maxOffset;\n\n\t\t\t\tthis.angle.offset = Math.min(Math.max(minOffset, offset), maxOffset);\n\t\t\t\tthis.angle.element.style.marginLeft = this.angle.offset + 'px';\n\t\t\t\tthis.angle.element.style.left = 0;\n\t\t\t\tthis.angle.element.style.removeProperty('top');\n\t\t\t}\n\t\t\telse if (this.angle.position === 'right')\n\t\t\t{\n\t\t\t\tminOffset = Popup.getOption('angleMinRight');\n\t\t\t\tmaxOffset = this.getPopupContainer().offsetHeight - Popup.getOption('angleMaxRight');\n\t\t\t\tmaxOffset = maxOffset < minOffset ? Math.max(minOffset, offset) : maxOffset;\n\n\t\t\t\tthis.angle.offset = Math.min(Math.max(minOffset, offset), maxOffset);\n\t\t\t\tthis.angle.element.style.top = this.angle.offset + 'px';\n\t\t\t\tthis.angle.element.style.removeProperty('left');\n\t\t\t\tthis.angle.element.style.removeProperty('margin-left');\n\t\t\t}\n\t\t\telse if (this.angle.position === 'left')\n\t\t\t{\n\t\t\t\tminOffset = Popup.getOption('angleMinLeft');\n\t\t\t\tmaxOffset = this.getPopupContainer().offsetHeight - Popup.getOption('angleMaxLeft');\n\t\t\t\tmaxOffset = maxOffset < minOffset ? Math.max(minOffset, offset) : maxOffset;\n\n\t\t\t\tthis.angle.offset = Math.min(Math.max(minOffset, offset), maxOffset);\n\t\t\t\tthis.angle.element.style.top = this.angle.offset + 'px';\n\t\t\t\tthis.angle.element.style.removeProperty('left');\n\t\t\t\tthis.angle.element.style.removeProperty('margin-left');\n\t\t\t}\n\t\t}\n\t}\n\n\tgetWidth(): number\n\t{\n\t\treturn this.width;\n\t}\n\n\tsetWidth(width: number)\n\t{\n\t\tthis.setWidthProperty('width', width);\n\t}\n\n\tgetHeight(): number\n\t{\n\t\treturn this.height;\n\t}\n\n\tsetHeight(height: number)\n\t{\n\t\tthis.setHeightProperty('height', height);\n\t}\n\n\tgetMinWidth(): number\n\t{\n\t\treturn this.minWidth;\n\t}\n\n\tsetMinWidth(width: number)\n\t{\n\t\tthis.setWidthProperty('minWidth', width);\n\t}\n\n\tgetMinHeight(): number\n\t{\n\t\treturn this.minHeight;\n\t}\n\n\tsetMinHeight(height: number)\n\t{\n\t\tthis.setHeightProperty('minHeight', height);\n\t}\n\n\tgetMaxWidth(): number\n\t{\n\t\treturn this.maxWidth;\n\t}\n\n\tsetMaxWidth(width: number)\n\t{\n\t\tthis.setWidthProperty('maxWidth', width);\n\t}\n\n\tgetMaxHeight(): number\n\t{\n\t\treturn this.maxHeight;\n\t}\n\n\tsetMaxHeight(height: number)\n\t{\n\t\tthis.setHeightProperty('maxHeight', height);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsetWidthProperty(property: string, width: number)\n\t{\n\t\tconst props = ['width', 'minWidth', 'maxWidth'];\n\t\tif (props.indexOf(property) === -1)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Type.isNumber(width) && width >= 0)\n\t\t{\n\t\t\tthis[property] = width;\n\t\t\tthis.getResizableContainer().style[property] = width + 'px';\n\t\t\tthis.getContentContainer().style.overflowX = 'auto';\n\t\t\tthis.getPopupContainer().classList.add('popup-window-fixed-width');\n\n\t\t\tif (this.getTitleContainer() && Browser.isIE11())\n\t\t\t{\n\t\t\t\tthis.getTitleContainer().style[property] = width + 'px';\n\t\t\t}\n\t\t}\n\t\telse if (width === null || width === false)\n\t\t{\n\t\t\tthis[property] = null;\n\t\t\tthis.getResizableContainer().style.removeProperty(Text.toKebabCase(property));\n\n\t\t\tconst hasOtherProps = props.some(function(prop) {\n\t\t\t\treturn this.getResizableContainer().style.getPropertyValue(Text.toKebabCase(prop)) !== '';\n\t\t\t}, this);\n\n\t\t\tif (!hasOtherProps)\n\t\t\t{\n\t\t\t\tthis.getContentContainer().style.removeProperty('overflow-x');\n\t\t\t\tthis.getPopupContainer().classList.remove('popup-window-fixed-width');\n\t\t\t}\n\n\t\t\tif (this.getTitleContainer() && Browser.isIE11())\n\t\t\t{\n\t\t\t\tthis.getTitleContainer().style.removeProperty(Text.toKebabCase(property));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsetHeightProperty(property: string, height: number)\n\t{\n\t\tconst props = ['height', 'minHeight', 'maxHeight'];\n\t\tif (props.indexOf(property) === -1)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Type.isNumber(height) && height >= 0)\n\t\t{\n\t\t\tthis[property] = height;\n\t\t\tthis.getResizableContainer().style[property] = height + 'px';\n\t\t\tthis.getContentContainer().style.overflowY = 'auto';\n\t\t\tthis.getPopupContainer().classList.add('popup-window-fixed-height');\n\t\t}\n\t\telse if (height === null || height === false)\n\t\t{\n\t\t\tthis[property] = null;\n\t\t\tthis.getResizableContainer().style.removeProperty(Text.toKebabCase(property));\n\n\t\t\tconst hasOtherProps = props.some(function(prop) {\n\t\t\t\treturn this.getResizableContainer().style.getPropertyValue(Text.toKebabCase(prop)) !== '';\n\t\t\t}, this);\n\n\t\t\tif (!hasOtherProps)\n\t\t\t{\n\t\t\t\tthis.getContentContainer().style.removeProperty('overflow-y');\n\t\t\t\tthis.getPopupContainer().classList.remove('popup-window-fixed-height');\n\t\t\t}\n\t\t}\n\t}\n\n\tsetPadding(padding: number)\n\t{\n\t\tif (Type.isNumber(padding) && padding >= 0)\n\t\t{\n\t\t\tthis.padding = padding;\n\t\t\tthis.getPopupContainer().style.padding = padding + 'px';\n\t\t}\n\t\telse if (padding === null)\n\t\t{\n\t\t\tthis.padding = null;\n\t\t\tthis.getPopupContainer().style.removeProperty('padding');\n\t\t}\n\t}\n\n\tgetPadding(): number\n\t{\n\t\treturn this.padding;\n\t}\n\n\tsetContentPadding(padding: number)\n\t{\n\t\tif (Type.isNumber(padding) && padding >= 0)\n\t\t{\n\t\t\tthis.contentPadding = padding;\n\t\t\tthis.getContentContainer().style.padding = padding + 'px';\n\t\t}\n\t\telse if (padding === null)\n\t\t{\n\t\t\tthis.contentPadding = null;\n\t\t\tthis.getContentContainer().style.removeProperty('padding');\n\t\t}\n\t}\n\n\tgetContentPadding(): number\n\t{\n\t\treturn this.contentPadding;\n\t}\n\n\tsetBorderRadius(radius): void\n\t{\n\t\tif (Type.isStringFilled(radius))\n\t\t{\n\t\t\tthis.borderRadius = radius;\n\t\t\tthis.getPopupContainer().style.setProperty('--popup-window-border-radius', radius);\n\t\t}\n\t\telse if (radius === null)\n\t\t{\n\t\t\tthis.borderRadius = null;\n\t\t\tthis.getPopupContainer().style.removeProperty('--popup-window-border-radius');\n\t\t}\n\t}\n\n\tsetContentBorderRadius(radius): void\n\t{\n\t\tif (Type.isStringFilled(radius))\n\t\t{\n\t\t\tthis.contentBorderRadius = radius;\n\t\t\tthis.getContentContainer().style.setProperty('--popup-window-content-border-radius', radius);\n\t\t}\n\t\telse if (radius === null)\n\t\t{\n\t\t\tthis.contentBorderRadius = null;\n\t\t\tthis.getContentContainer().style.removeProperty('--popup-window-content-border-radius');\n\t\t}\n\t}\n\n\tsetContentColor(color: string | null)\n\t{\n\t\tif (Type.isString(color) && this.contentContainer)\n\t\t{\n\t\t\tthis.contentContainer.style.backgroundColor = color;\n\t\t}\n\t\telse if (color === null)\n\t\t{\n\t\t\tthis.contentContainer.style.style.removeProperty('background-color');\n\t\t}\n\t}\n\n\tsetBackground(background: string | null)\n\t{\n\t\tif (Type.isStringFilled(background))\n\t\t{\n\t\t\tthis.background = background;\n\t\t\tthis.getPopupContainer().style.background = background;\n\n\t\t\tif (this.angleArrowElement)\n\t\t\t{\n\t\t\t\tthis.angleArrowElement.style.background = background;\n\t\t\t}\n\t\t}\n\t\telse if (background === null)\n\t\t{\n\t\t\tthis.background = null;\n\t\t\tthis.getPopupContainer().style.removeProperty('background');\n\n\t\t\tif (this.angleArrowElement)\n\t\t\t{\n\t\t\t\tthis.angleArrowElement.style.removeProperty('background');\n\t\t\t}\n\t\t}\n\t}\n\n\tgetBackground(): string | null\n\t{\n\t\treturn this.background;\n\t}\n\n\tsetContentBackground(background: string | null)\n\t{\n\t\tif (Type.isStringFilled(background))\n\t\t{\n\t\t\tthis.contentBackground = background;\n\t\t\tthis.getContentContainer().style.background = background;\n\t\t}\n\t\telse if (background === null)\n\t\t{\n\t\t\tthis.contentBackground = null;\n\t\t\tthis.getContentContainer().style.removeProperty('background');\n\t\t}\n\t}\n\n\tgetContentBackground(): string | null\n\t{\n\t\treturn this.contentBackground;\n\t}\n\n\tisDestroyed(): boolean\n\t{\n\t\treturn this.destroyed;\n\t}\n\n\tsetCacheable(cacheable: boolean): void\n\t{\n\t\tthis.cacheable = cacheable !== false;\n\t}\n\n\tisCacheable(): boolean\n\t{\n\t\treturn this.cacheable;\n\t}\n\n\tsetToFrontOnShow(flag: boolean): void\n\t{\n\t\tthis.toFrontOnShow = flag !== false;\n\t}\n\n\tshouldFrontOnShow(): boolean\n\t{\n\t\treturn this.toFrontOnShow;\n\t}\n\n\tsetFixed(flag: boolean): void\n\t{\n\t\tif (Type.isBoolean(flag))\n\t\t{\n\t\t\tthis.fixed = flag;\n\t\t\tif (flag)\n\t\t\t{\n\t\t\t\tDom.addClass(this.getPopupContainer(), '--fixed');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(this.getPopupContainer(), '--fixed');\n\t\t\t}\n\t\t}\n\t}\n\n\tisFixed(): boolean\n\t{\n\t\treturn this.fixed;\n\t}\n\n\tsetResizeMode(mode: boolean): void\n\t{\n\t\tif (mode === true || Type.isPlainObject(mode))\n\t\t{\n\t\t\tif (!this.resizeIcon)\n\t\t\t{\n\t\t\t\tthis.resizeIcon = Tag.render`\n\t\t\t\t\t<div class=\"popup-window-resize\" onmousedown=\"${this.handleResizeMouseDown.bind(this)}\"></div>\n\t\t\t\t`;\n\n\t\t\t\tthis.getPopupContainer().appendChild(this.resizeIcon);\n\t\t\t}\n\n\t\t\t//Compatibility\n\t\t\tthis.setMinWidth(mode.minWidth);\n\t\t\tthis.setMinHeight(mode.minHeight);\n\t\t}\n\t\telse if (mode === false && this.resizeIcon)\n\t\t{\n\t\t\tDom.remove(this.resizeIcon);\n\t\t\tthis.resizeIcon = null;\n\t\t}\n\t}\n\n\tgetDesignSystemContext(): string\n\t{\n\t\treturn this.designSystemContext;\n\t}\n\n\tsetDesignSystemContext(context: string): void\n\t{\n\t\tif (Type.isString(context))\n\t\t{\n\t\t\tif (this.popupContainer !== null)\n\t\t\t{\n\t\t\t\tDom.removeClass(this.popupContainer, this.designSystemContext);\n\t\t\t\tDom.addClass(this.popupContainer, context);\n\t\t\t}\n\n\t\t\tthis.designSystemContext = context;\n\t\t}\n\t}\n\n\tsetTargetContainer(targetContainer: HTMLElement): void\n\t{\n\t\tconst newTargetContainer = Type.isElementNode(targetContainer) ? targetContainer : document.body;\n\t\tif (newTargetContainer === this.targetContainer)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.targetContainer = newTargetContainer;\n\t\tif (this.getPopupContainer())\n\t\t{\n\t\t\tthis.getTargetContainer().append(this.getPopupContainer());\n\t\t}\n\n\t\tif (this.overlay)\n\t\t{\n\t\t\tDom.append(this.overlay.element, this.getTargetContainer());\n\t\t}\n\t}\n\n\tgetTargetContainer(): HTMLElement\n\t{\n\t\treturn this.targetContainer;\n\t}\n\n\tisTargetDocumentBody(): boolean\n\t{\n\t\treturn this.getTargetContainer() === document.body;\n\t}\n\n\tgetPopupContainer(): Element\n\t{\n\t\treturn this.popupContainer;\n\t}\n\n\tgetContentContainer(): Element\n\t{\n\t\treturn this.contentContainer;\n\t}\n\n\tgetResizableContainer(): Element\n\t{\n\t\treturn Browser.isIE11() ? this.getContentContainer() : this.getPopupContainer();\n\t}\n\n\tgetTitleContainer(): Element\n\t{\n\t\treturn this.titleBar;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tonTitleMouseDown(event: MouseEvent): void\n\t{\n\t\tthis._startDrag(\n\t\t\tevent,\n\t\t\t{\n\t\t\t\tcursor: 'move',\n\t\t\t\tcallback: this.handleMove,\n\t\t\t\teventName: 'Drag'\n\t\t\t}\n\t\t);\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleResizeMouseDown(event): void\n\t{\n\t\tthis._startDrag(\n\t\t\tevent,\n\t\t\t{\n\t\t\t\tcursor: 'nwse-resize',\n\t\t\t\teventName: 'Resize',\n\t\t\t\tcallback: this.handleResize\n\t\t\t}\n\t\t);\n\n\t\tif (this.isTargetDocumentBody())\n\t\t{\n\t\t\tthis.resizeContentPos = Dom.getPosition(this.getResizableContainer());\n\t\t\tthis.resizeContentOffset =\n\t\t\t\tthis.resizeContentPos.left - Dom.getPosition(this.getPopupContainer()).left;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.resizeContentPos = this.getPositionRelativeToTarget(this.getResizableContainer());\n\t\t\tthis.resizeContentOffset =\n\t\t\t\tthis.resizeContentPos.left - this.getPositionRelativeToTarget(this.getPopupContainer()).left;\n\t\t}\n\n\t\tthis.resizeContentPos.offsetX = 0;\n\t\tthis.resizeContentPos.offsetY = 0;\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleResize(offsetX, offsetY, pageX, pageY): void\n\t{\n\t\tthis.resizeContentPos.offsetX += offsetX;\n\t\tthis.resizeContentPos.offsetY += offsetY;\n\n\t\tlet width = this.resizeContentPos.width + this.resizeContentPos.offsetX;\n\t\tlet height = this.resizeContentPos.height + this.resizeContentPos.offsetY;\n\n\t\tconst scrollWidth =\n\t\t\tthis.isTargetDocumentBody() ? document.documentElement.scrollWidth : this.getTargetContainer().scrollWidth\n\t\t;\n\n\t\tif (this.resizeContentPos.left + width + this.resizeContentOffset >= scrollWidth)\n\t\t{\n\t\t\twidth = scrollWidth - this.resizeContentPos.left - this.resizeContentOffset;\n\t\t}\n\n\t\twidth = Math.max(width, this.getMinWidth());\n\t\theight = Math.max(height, this.getMinHeight());\n\n\t\tif (this.getMaxWidth() !== null)\n\t\t{\n\t\t\twidth = Math.min(width, this.getMaxWidth());\n\t\t}\n\n\t\tif (this.getMaxHeight() !== null)\n\t\t{\n\t\t\theight = Math.min(height, this.getMaxHeight());\n\t\t}\n\n\t\tthis.setWidth(width);\n\t\tthis.setHeight(height);\n\t}\n\n\tisTopAngle(): boolean\n\t{\n\t\treturn this.angle !== null && this.angle.position === 'top';\n\t}\n\n\tisBottomAngle(): boolean\n\t{\n\t\treturn this.angle !== null && this.angle.position === 'bottom';\n\t}\n\n\tisTopOrBottomAngle(): boolean\n\t{\n\t\treturn this.angle !== null && (this.angle.position === 'top' || this.angle.position === 'bottom');\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetAngleHeight(): number\n\t{\n\t\treturn (this.isTopOrBottomAngle() ? Popup.getOption('angleTopOffset') : 0);\n\t}\n\n\tsetOffset(params: { offsetTop: number, offsetLeft: number }): void\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Type.isNumber(params.offsetLeft))\n\t\t{\n\t\t\tthis.offsetLeft = params.offsetLeft + Popup.getOption('offsetLeft');\n\t\t}\n\n\t\tif (Type.isNumber(params.offsetTop))\n\t\t{\n\t\t\tthis.offsetTop = params.offsetTop + Popup.getOption('offsetTop');\n\t\t}\n\t}\n\n\tsetTitleBar(params: string | { content: string }): void\n\t{\n\t\tif (!this.titleBar)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof (params) === 'object' && Type.isDomNode(params.content))\n\t\t{\n\t\t\tthis.titleBar.innerHTML = '';\n\t\t\tthis.titleBar.appendChild(params.content);\n\t\t}\n\t\telse if (typeof (params) === 'string')\n\t\t{\n\t\t\tthis.titleBar.innerHTML = '';\n\t\t\tthis.titleBar.appendChild(\n\t\t\t\tDom.create('span', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'popup-window-titlebar-text'\n\t\t\t\t\t},\n\t\t\t\t\ttext: params\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n\tsetDraggable(draggable: PopupDraggable): void\n\t{\n\t\tthis.params.draggable = draggable;\n\t\tconst element = draggable?.element ?? this.titleBar;\n\t\tif (!draggable || !element)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.style(element, 'cursor', 'move');\n\t\tEvent.bind(element, 'mousedown', this.onTitleMouseDown);\n\t}\n\n\tsetClosingByEsc(enable: boolean): void\n\t{\n\t\tenable = Type.isBoolean(enable) ? enable : true;\n\t\tif (enable)\n\t\t{\n\t\t\tthis.closeByEsc = true;\n\t\t\tthis.bindClosingByEsc();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.closeByEsc = false;\n\t\t\tthis.unbindClosingByEsc();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tbindClosingByEsc(): void\n\t{\n\t\tif (this.closeByEsc && !this.isCloseByEscBinded)\n\t\t{\n\t\t\tEvent.bind(document, 'keyup', this.handleDocumentKeyUp);\n\t\t\tthis.isCloseByEscBinded = true;\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tunbindClosingByEsc(): void\n\t{\n\t\tif (this.isCloseByEscBinded)\n\t\t{\n\t\t\tEvent.unbind(document, 'keyup', this.handleDocumentKeyUp);\n\t\t\tthis.isCloseByEscBinded = false;\n\t\t}\n\t}\n\n\tsetAutoHide(enable: boolean): void\n\t{\n\t\tenable = Type.isBoolean(enable) ? enable : true;\n\t\tif (enable)\n\t\t{\n\t\t\tthis.autoHide = true;\n\t\t\tthis.bindAutoHide();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.autoHide = false;\n\t\t\tthis.unbindAutoHide();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tbindAutoHide(): void\n\t{\n\t\tif (this.autoHide && !this.isAutoHideBinded && this.isShown())\n\t\t{\n\t\t\tthis.isAutoHideBinded = true;\n\n\t\t\tif (this.isCompatibleMode())\n\t\t\t{\n\t\t\t\tEvent.bind(this.getPopupContainer(), 'click', this.handleContainerClick);\n\t\t\t}\n\n\t\t\tif (this.overlay && this.overlay.element)\n\t\t\t{\n\t\t\t\tEvent.bind(this.overlay.element, 'click', this.handleOverlayClick);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.isCompatibleMode())\n\t\t\t\t{\n\t\t\t\t\tEvent.bind(document, 'click', this.handleAutoHide);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdocument.addEventListener('click', this.handleAutoHide, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tunbindAutoHide(): void\n\t{\n\t\tif (this.isAutoHideBinded)\n\t\t{\n\t\t\tthis.isAutoHideBinded = false;\n\n\t\t\tif (this.isCompatibleMode())\n\t\t\t{\n\t\t\t\tEvent.unbind(this.getPopupContainer(), 'click', this.handleContainerClick);\n\t\t\t}\n\n\t\t\tif (this.overlay && this.overlay.element)\n\t\t\t{\n\t\t\t\tEvent.unbind(this.overlay.element, 'click', this.handleOverlayClick);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.isCompatibleMode())\n\t\t\t\t{\n\t\t\t\t\tEvent.unbind(document, 'click', this.handleAutoHide);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdocument.removeEventListener('click', this.handleAutoHide, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleAutoHide(event): void\n\t{\n\t\tif (this.isDestroyed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.autoHideHandler !== null)\n\t\t{\n\t\t\tif (this.autoHideHandler(event))\n\t\t\t{\n\t\t\t\tthis._tryCloseByEvent(event);\n\t\t\t}\n\t\t}\n\t\telse if (event.target !== this.getPopupContainer() && !this.getPopupContainer().contains(event.target))\n\t\t{\n\t\t\tthis._tryCloseByEvent(event);\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\t_tryCloseByEvent(event): void\n\t{\n\t\tif (this.isCompatibleMode())\n\t\t{\n\t\t\tthis.tryCloseByEvent(event);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.tryCloseByEvent(event);\n\t\t\t}, 0);\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\ttryCloseByEvent(event): void\n\t{\n\t\tif (event.button === 0)\n\t\t{\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleOverlayClick(event): void\n\t{\n\t\tthis.tryCloseByEvent(event);\n\t\tevent.stopPropagation();\n\t}\n\n\tsetOverlay(params: PopupOverlay): void\n\t{\n\t\tif (this.overlay === null)\n\t\t{\n\t\t\tthis.overlay = {\n\t\t\t\telement: Tag.render`\n\t\t\t\t\t<div class=\"popup-window-overlay\" id=\"popup-window-overlay-${this.getId()}\"></div>\n\t\t\t\t`,\n\t\t\t};\n\n\t\t\tthis.resizeOverlay();\n\n\t\t\tDom.append(this.overlay.element, this.getTargetContainer());\n\t\t\tthis.getZIndexComponent().setOverlay(this.overlay.element);\n\t\t}\n\n\t\tif (Type.isNumber(params?.opacity) && params.opacity >= 0 && params.opacity <= 100)\n\t\t{\n\t\t\tDom.style(this.overlay.element, 'opacity', parseFloat(params.opacity / 100).toPrecision(3));\n\t\t}\n\n\t\tif (params?.backgroundColor)\n\t\t{\n\t\t\tDom.style(this.overlay.element, 'background-color', params.backgroundColor);\n\t\t}\n\n\t\tif (params?.blur)\n\t\t{\n\t\t\tDom.style(this.overlay.element, 'backdrop-filter', params.blur);\n\t\t}\n\t}\n\n\tremoveOverlay(): void\n\t{\n\t\tif (this.overlay !== null && this.overlay.element !== null)\n\t\t{\n\t\t\tDom.remove(this.overlay.element);\n\t\t\tthis.getZIndexComponent().setOverlay(null);\n\t\t}\n\n\t\tif (this.overlayTimeout)\n\t\t{\n\t\t\tclearInterval(this.overlayTimeout);\n\t\t\tthis.overlayTimeout = null;\n\t\t}\n\n\t\tthis.overlay = null;\n\t}\n\n\thideOverlay(): void\n\t{\n\t\tif (this.overlay !== null && this.overlay.element !== null)\n\t\t{\n\t\t\tif (this.overlayTimeout)\n\t\t\t{\n\t\t\t\tclearInterval(this.overlayTimeout);\n\t\t\t\tthis.overlayTimeout = null;\n\t\t\t}\n\n\t\t\tthis.overlay.element.style.display = 'none';\n\t\t}\n\t}\n\n\tshowOverlay(): void\n\t{\n\t\tif (this.overlay !== null && this.overlay.element !== null)\n\t\t{\n\t\t\tthis.overlay.element.style.display = 'block';\n\n\t\t\tlet popupHeight = this.getPopupContainer().offsetHeight;\n\t\t\tthis.overlayTimeout = setInterval(() => {\n\t\t\t\tif (popupHeight !== this.getPopupContainer().offsetHeight)\n\t\t\t\t{\n\t\t\t\t\tthis.resizeOverlay();\n\t\t\t\t\tpopupHeight = this.getPopupContainer().offsetHeight;\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t}\n\t}\n\n\tresizeOverlay(): void\n\t{\n\t\tif (this.overlay !== null && this.overlay.element !== null)\n\t\t{\n\t\t\tlet scrollWidth;\n\t\t\tlet scrollHeight;\n\t\t\tif (this.isTargetDocumentBody())\n\t\t\t{\n\t\t\t\tscrollWidth = document.documentElement.scrollWidth;\n\t\t\t\tscrollHeight = Math.max(\n\t\t\t\t\tdocument.body.scrollHeight, document.documentElement.scrollHeight,\n\t\t\t\t\tdocument.body.offsetHeight, document.documentElement.offsetHeight,\n\t\t\t\t\tdocument.body.clientHeight, document.documentElement.clientHeight\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tscrollWidth = this.getTargetContainer().scrollWidth;\n\t\t\t\tscrollHeight = this.getTargetContainer().scrollHeight;\n\t\t\t}\n\n\t\t\tthis.overlay.element.style.width = scrollWidth + 'px';\n\t\t\tthis.overlay.element.style.height = scrollHeight + 'px';\n\t\t}\n\t}\n\n\tgetZindex(): number\n\t{\n\t\treturn this.getZIndexComponent().getZIndex();\n\t}\n\n\tgetZIndexComponent(): ZIndexComponent\n\t{\n\t\treturn this.zIndexComponent;\n\t}\n\n\tsetDisableScroll(flag: boolean): void\n\t{\n\t\tconst disable = Type.isBoolean(flag) ? flag : true;\n\t\tif (disable)\n\t\t{\n\t\t\tthis.disableScroll = true;\n\t\t\tthis.#disableTargetScroll();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.disableScroll = false;\n\t\t\tthis.#enableTargetScroll();\n\t\t}\n\t}\n\n\t#disableTargetScroll(): void\n\t{\n\t\tconst target = this.getTargetContainer();\n\t\tlet popups: Set<Popup> = disabledScrolls.get(target);\n\t\tif (!popups)\n\t\t{\n\t\t\tpopups = new Set();\n\t\t\tdisabledScrolls.set(target, popups);\n\t\t}\n\n\t\tpopups.add(this);\n\n\t\tDom.addClass(target, 'popup-window-disable-scroll');\n\t}\n\n\t#enableTargetScroll(): void\n\t{\n\t\tconst target = this.getTargetContainer();\n\t\tconst popups: Set<Popup> = disabledScrolls.get(target) || null;\n\t\tif (popups)\n\t\t{\n\t\t\tpopups.delete(this);\n\t\t}\n\n\t\tif (popups === null || popups.size === 0)\n\t\t{\n\t\t\tDom.removeClass(target, 'popup-window-disable-scroll');\n\t\t}\n\t}\n\n\tshow(): void\n\t{\n\t\tif (this.isShown() || this.isDestroyed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.emit('onBeforeShow');\n\n\t\tthis.showOverlay();\n\t\tthis.getPopupContainer().style.display = 'block';\n\t\tDom.addClass(this.getPopupContainer(), '--open');\n\n\t\tif (this.shouldFrontOnShow())\n\t\t{\n\t\t\tthis.bringToFront();\n\t\t}\n\n\t\tif (!this.firstShow)\n\t\t{\n\t\t\tthis.emit('onFirstShow', new BaseEvent({ compatData: [this] }));\n\t\t\tthis.firstShow = true;\n\t\t}\n\n\t\tthis.emit('onShow', new BaseEvent({ compatData: [this] }));\n\n\t\tif (this.disableScroll)\n\t\t{\n\t\t\tthis.#disableTargetScroll();\n\t\t}\n\n\t\tthis.adjustPosition();\n\n\t\tthis.animateOpening(() => {\n\n\t\t\tif (this.isDestroyed())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tDom.removeClass(this.getPopupContainer(), this.animationShowClassName);\n\t\t\tthis.emit('onAfterShow', new BaseEvent({ compatData: [this] }));\n\t\t});\n\n\t\tthis.bindClosingByEsc();\n\n\t\tif (this.isCompatibleMode())\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.bindAutoHide();\n\t\t\t}, 100);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.bindAutoHide();\n\t\t}\n\t}\n\n\tclose(): void\n\t{\n\t\tif (this.isDestroyed() || !this.isShown())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.emit('onClose', new BaseEvent({ compatData: [this] }));\n\n\t\tif (this.isDestroyed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.disableScroll)\n\t\t{\n\t\t\tthis.#enableTargetScroll();\n\t\t}\n\n\t\tthis.animateClosing(() => {\n\n\t\t\tif (this.isDestroyed())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.hideOverlay();\n\n\t\t\tthis.getPopupContainer().style.display = 'none';\n\t\t\tDom.removeClass(this.getPopupContainer(), '--open');\n\n\t\t\tDom.removeClass(this.getPopupContainer(), this.animationCloseClassName);\n\n\t\t\tthis.unbindClosingByEsc();\n\n\t\t\tif (this.isCompatibleMode())\n\t\t\t{\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.unbindAutoHide();\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.unbindAutoHide();\n\t\t\t}\n\n\t\t\tthis.emit('onAfterClose', new BaseEvent({ compatData: [this] }));\n\n\t\t\tif (!this.isCacheable())\n\t\t\t{\n\t\t\t\tthis.destroy();\n\t\t\t}\n\n\t\t});\n\t}\n\n\tbringToFront(): void\n\t{\n\t\tif (this.isShown())\n\t\t{\n\t\t\tZIndexManager.bringToFront(this.getPopupContainer());\n\t\t}\n\t}\n\n\ttoggle(): void\n\t{\n\t\tthis.isShown() ? this.close() : this.show();\n\t}\n\n\t/**\n\t *\n\t * @private\n\t */\n\tanimateOpening(callback: Function): void\n\t{\n\t\tDom.removeClass(this.getPopupContainer(), this.animationCloseClassName);\n\n\t\tif (this.animationShowClassName !== null)\n\t\t{\n\t\t\tDom.addClass(this.getPopupContainer(), this.animationShowClassName);\n\n\t\t\tif (this.animationCloseEventType !== null)\n\t\t\t{\n\t\t\t\tconst eventName = this.animationCloseEventType + 'end';\n\t\t\t\tthis.getPopupContainer().addEventListener(eventName, function handleTransitionEnd() {\n\t\t\t\t\tthis.removeEventListener(eventName, handleTransitionEnd);\n\t\t\t\t\tcallback();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcallback();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tanimateClosing(callback: Function): void\n\t{\n\t\tDom.removeClass(this.getPopupContainer(), this.animationShowClassName);\n\n\t\tif (this.animationCloseClassName !== null)\n\t\t{\n\t\t\tDom.addClass(this.getPopupContainer(), this.animationCloseClassName);\n\n\t\t\tif (this.animationCloseEventType !== null)\n\t\t\t{\n\t\t\t\tconst eventName = this.animationCloseEventType + 'end';\n\t\t\t\tthis.getPopupContainer().addEventListener(eventName, function handleTransitionEnd() {\n\t\t\t\t\tthis.removeEventListener(eventName, handleTransitionEnd);\n\t\t\t\t\tcallback();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcallback();\n\t\t}\n\t}\n\n\tsetAnimation(options: PopupAnimationOptions): void\n\t{\n\t\tif (Type.isPlainObject(options))\n\t\t{\n\t\t\tthis.animationShowClassName = Type.isStringFilled(options.showClassName) ? options.showClassName : null;\n\t\t\tthis.animationCloseClassName = Type.isStringFilled(options.closeClassName) ? options.closeClassName : null;\n\t\t\tthis.animationCloseEventType =\n\t\t\t\toptions.closeAnimationType === 'animation' || options.closeAnimationType === 'transition'\n\t\t\t\t\t? options.closeAnimationType\n\t\t\t\t\t: null\n\t\t\t;\n\t\t}\n\t\telse if (Type.isStringFilled(options))\n\t\t{\n\t\t\tconst animationName = options;\n\t\t\tif (animationName === 'fading')\n\t\t\t{\n\t\t\t\tthis.animationShowClassName = 'popup-window-show-animation-opacity';\n\t\t\t\tthis.animationCloseClassName = 'popup-window-close-animation-opacity';\n\t\t\t\tthis.animationCloseEventType = 'animation';\n\t\t\t}\n\t\t\telse if (animationName === 'fading-slide')\n\t\t\t{\n\t\t\t\tthis.animationShowClassName = 'popup-window-show-animation-opacity-transform';\n\t\t\t\tthis.animationCloseClassName = 'popup-window-close-animation-opacity';\n\t\t\t\tthis.animationCloseEventType = 'animation';\n\t\t\t}\n\t\t\telse if (animationName === 'scale')\n\t\t\t{\n\t\t\t\tthis.animationShowClassName = 'popup-window-show-animation-scale';\n\t\t\t\tthis.animationCloseClassName = 'popup-window-close-animation-opacity';\n\t\t\t\tthis.animationCloseEventType = 'animation';\n\t\t\t}\n\t\t}\n\t\telse if (options === false || options === null)\n\t\t{\n\t\t\tthis.animationShowClassName = null;\n\t\t\tthis.animationCloseClassName = null;\n\t\t\tthis.animationCloseEventType = null;\n\t\t}\n\t}\n\n\tisShown(): boolean\n\t{\n\t\treturn !this.isDestroyed() && this.getPopupContainer().style.display === 'block';\n\t}\n\n\tdestroy(): void\n\t{\n\t\tif (this.destroyed)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.disableScroll)\n\t\t{\n\t\t\tthis.#enableTargetScroll();\n\t\t}\n\n\t\tthis.destroyed = true;\n\n\t\tthis.emit('onDestroy', new BaseEvent({ compatData: [this] }));\n\n\t\tthis.unbindClosingByEsc();\n\n\t\tif (this.isCompatibleMode())\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.unbindAutoHide();\n\t\t\t}, 0);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.unbindAutoHide();\n\t\t}\n\n\t\tEvent.unbindAll(this);\n\t\tEvent.unbind(document, 'mousemove', this.handleDocumentMouseMove);\n\t\tEvent.unbind(document, 'mouseup', this.handleDocumentMouseUp);\n\t\tEvent.unbind(window, 'resize', this.handleResizeWindow);\n\n\t\tthis.removeOverlay();\n\n\t\tZIndexManager.unregister(this.popupContainer);\n\t\tthis.zIndexComponent = null;\n\n\t\tDom.remove(this.popupContainer);\n\n\t\tthis.popupContainer = null;\n\t\tthis.contentContainer = null;\n\t\tthis.closeIcon = null;\n\t\tthis.titleBar = null;\n\t\tthis.buttonsContainer = null;\n\t\tthis.angle = null;\n\t\tthis.angleArrowElement = null;\n\t\tthis.resizeIcon = null;\n\t}\n\n\tadjustPosition(bindOptions: {\n\t\tforceBindPosition?: boolean,\n\t\tforceLeft?: boolean,\n\t\tforceTop?: boolean,\n\t\tposition?: 'top' | 'bootom'\n\t}): void\n\t{\n\t\tif (bindOptions && typeof (bindOptions) === 'object')\n\t\t{\n\t\t\tthis.bindOptions = bindOptions;\n\t\t}\n\n\t\tconst bindElementPos = this.getBindElementPos(this.bindElement);\n\n\t\tif (\n\t\t\t!this.bindOptions.forceBindPosition &&\n\t\t\tthis.bindElementPos !== null &&\n\t\t\tbindElementPos.top === this.bindElementPos.top &&\n\t\t\tbindElementPos.left === this.bindElementPos.left\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.bindElementPos = bindElementPos;\n\n\t\tconst windowSize = bindElementPos.windowSize ? bindElementPos.windowSize : this.getWindowSize();\n\t\tconst windowScroll = bindElementPos.windowScroll ? bindElementPos.windowScroll : this.getWindowScroll();\n\n\t\tconst popupWidth = bindElementPos.popupWidth ? bindElementPos.popupWidth : this.popupContainer.offsetWidth;\n\t\tconst popupHeight = bindElementPos.popupHeight ? bindElementPos.popupHeight : this.popupContainer.offsetHeight;\n\n\t\tconst angleTopOffset = Popup.getOption('angleTopOffset');\n\n\t\tlet left =\n\t\t\tthis.bindElementPos.left + this.offsetLeft -\n\t\t\t(this.isTopOrBottomAngle() ? Popup.getOption('angleLeftOffset') : 0)\n\t\t;\n\n\t\tif (\n\t\t\t!this.bindOptions.forceLeft &&\n\t\t\t(left + popupWidth + this.bordersWidth) >= (windowSize.innerWidth + windowScroll.scrollLeft) &&\n\t\t\t(windowSize.innerWidth + windowScroll.scrollLeft - popupWidth - this.bordersWidth) > 0)\n\t\t{\n\t\t\tconst bindLeft = left;\n\t\t\tleft = windowSize.innerWidth + windowScroll.scrollLeft - popupWidth - this.bordersWidth;\n\t\t\tif (this.isTopOrBottomAngle())\n\t\t\t{\n\t\t\t\tthis.setAngle({ offset: bindLeft - left + this.angle.defaultOffset });\n\t\t\t}\n\t\t}\n\t\telse if (this.isTopOrBottomAngle())\n\t\t{\n\t\t\tthis.setAngle({ offset: this.angle.defaultOffset + (left < 0 ? left : 0) });\n\t\t}\n\n\t\tif (left < 0)\n\t\t{\n\t\t\tleft = 0;\n\t\t}\n\n\t\tlet top = 0;\n\n\t\tif (this.bindOptions.position && this.bindOptions.position === 'top')\n\t\t{\n\n\t\t\ttop = this.bindElementPos.top - popupHeight - this.offsetTop - (this.isBottomAngle() ? angleTopOffset : 0);\n\t\t\tif (top < 0 || (!this.bindOptions.forceTop && top < windowScroll.scrollTop))\n\t\t\t{\n\t\t\t\ttop = this.bindElementPos.bottom + this.offsetTop;\n\t\t\t\tif (this.angle !== null)\n\t\t\t\t{\n\t\t\t\t\ttop += angleTopOffset;\n\t\t\t\t\tthis.setAngle({ position: 'top' });\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (this.isTopAngle())\n\t\t\t{\n\t\t\t\ttop = top - angleTopOffset + Popup.getOption('positionTopXOffset');\n\t\t\t\tthis.setAngle({ position: 'bottom' });\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttop += Popup.getOption('positionTopXOffset');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttop = this.bindElementPos.bottom + this.offsetTop + this.getAngleHeight();\n\n\t\t\tif (\n\t\t\t\t!this.bindOptions.forceTop &&\n\t\t\t\t(top + popupHeight) > (windowSize.innerHeight + windowScroll.scrollTop) &&\n\t\t\t\t(this.bindElementPos.top - popupHeight - this.getAngleHeight()) >= 0) //Can we place the PopupWindow above the bindElement?\n\t\t\t{\n\t\t\t\t//The PopupWindow doesn't place below the bindElement. We should place it above.\n\t\t\t\ttop = this.bindElementPos.top - popupHeight;\n\n\t\t\t\tif (this.isTopOrBottomAngle())\n\t\t\t\t{\n\t\t\t\t\ttop -= angleTopOffset;\n\t\t\t\t\tthis.setAngle({ position: 'bottom' });\n\t\t\t\t}\n\n\t\t\t\ttop += Popup.getOption('positionTopXOffset');\n\n\t\t\t}\n\t\t\telse if (this.isBottomAngle())\n\t\t\t{\n\t\t\t\ttop += angleTopOffset;\n\t\t\t\tthis.setAngle({ position: 'top' });\n\t\t\t}\n\t\t}\n\n\t\tif (top < 0)\n\t\t{\n\t\t\ttop = 0;\n\t\t}\n\n\t\tconst event = new PositionEvent();\n\t\tevent.left = left;\n\t\tevent.top = top;\n\n\t\tthis.emit('onBeforeAdjustPosition', event);\n\n\t\tDom.adjust(this.popupContainer, {\n\t\t\tstyle: {\n\t\t\t\ttop: event.top + 'px',\n\t\t\t\tleft: event.left + 'px'\n\t\t\t}\n\t\t});\n\t}\n\n\tenterFullScreen(): void\n\t{\n\t\tif (Popup.fullscreenStatus)\n\t\t{\n\t\t\tif (document.cancelFullScreen)\n\t\t\t{\n\t\t\t\tdocument.cancelFullScreen();\n\t\t\t}\n\t\t\telse if (document.mozCancelFullScreen)\n\t\t\t{\n\t\t\t\tdocument.mozCancelFullScreen();\n\t\t\t}\n\t\t\telse if (document.webkitCancelFullScreen)\n\t\t\t{\n\t\t\t\tdocument.webkitCancelFullScreen();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.contentContainer.requestFullScreen)\n\t\t\t{\n\t\t\t\tthis.contentContainer.requestFullScreen();\n\t\t\t\tEvent.bind(window, 'fullscreenchange', this.handleFullScreen);\n\t\t\t}\n\t\t\telse if (this.contentContainer.mozRequestFullScreen)\n\t\t\t{\n\t\t\t\tthis.contentContainer.mozRequestFullScreen();\n\t\t\t\tEvent.bind(window, 'mozfullscreenchange', this.handleFullScreen);\n\t\t\t}\n\t\t\telse if (this.contentContainer.webkitRequestFullScreen)\n\t\t\t{\n\t\t\t\tthis.contentContainer.webkitRequestFullScreen();\n\t\t\t\tEvent.bind(window, 'webkitfullscreenchange', this.handleFullScreen);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconsole.log('fullscreen mode is not supported');\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleFullScreen(event): void\n\t{\n\t\tif (Popup.fullscreenStatus)\n\t\t{\n\t\t\tEvent.unbind(window, 'fullscreenchange', this.handleFullScreen);\n\t\t\tEvent.unbind(window, 'webkitfullscreenchange', this.handleFullScreen);\n\t\t\tEvent.unbind(window, 'mozfullscreenchange', this.handleFullScreen);\n\n\t\t\tPopup.fullscreenStatus = false;\n\n\t\t\tif (!this.isDestroyed())\n\t\t\t{\n\t\t\t\tDom.removeClass(this.contentContainer, 'popup-window-fullscreen');\n\t\t\t\tthis.emit('onFullscreenLeave');\n\t\t\t\tthis.adjustPosition();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tPopup.fullscreenStatus = true;\n\n\t\t\tif (!this.isDestroyed())\n\t\t\t{\n\t\t\t\tDom.addClass(this.contentContainer, 'popup-window-fullscreen');\n\t\t\t\tthis.emit('onFullscreenEnter');\n\t\t\t\tthis.adjustPosition();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleCloseIconClick(event): void\n\t{\n\t\tthis.tryCloseByEvent(event);\n\t\tevent.stopPropagation();\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleContainerClick(event): void\n\t{\n\t\tevent.stopPropagation();\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleDocumentKeyUp(event): void\n\t{\n\t\tif (event.keyCode === 27)\n\t\t{\n\t\t\tcheckEscPressed(this.getZindex(), () => {\n\t\t\t\tthis.close();\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleResizeWindow(): void\n\t{\n\t\tif (this.isShown())\n\t\t{\n\t\t\tthis.adjustPosition();\n\t\t\tif (this.overlay !== null)\n\t\t\t{\n\t\t\t\tthis.resizeOverlay();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleMove(offsetX: number, offsetY: number, pageX: number, pageY: number): void\n\t{\n\t\tlet left = parseInt(this.popupContainer.style.left) + offsetX;\n\t\tlet top = parseInt(this.popupContainer.style.top) + offsetY;\n\n\t\tif (typeof (this.params.draggable) === 'object' && this.params.draggable.restrict)\n\t\t{\n\t\t\t//Left side\n\t\t\tif (left < 0)\n\t\t\t{\n\t\t\t\tleft = 0;\n\t\t\t}\n\n\t\t\tlet scrollWidth;\n\t\t\tlet scrollHeight;\n\t\t\tif (this.isTargetDocumentBody())\n\t\t\t{\n\t\t\t\tscrollWidth = document.documentElement.scrollWidth;\n\t\t\t\tscrollHeight = document.documentElement.scrollHeight;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tscrollWidth = this.getTargetContainer().scrollWidth;\n\t\t\t\tscrollHeight = this.getTargetContainer().scrollHeight;\n\t\t\t}\n\n\t\t\t//Right side\n\t\t\tconst floatWidth = this.popupContainer.offsetWidth;\n\t\t\tconst floatHeight = this.popupContainer.offsetHeight;\n\n\t\t\tif (left > (scrollWidth - floatWidth))\n\t\t\t{\n\t\t\t\tleft = scrollWidth - floatWidth;\n\t\t\t}\n\n\t\t\tif (top > (scrollHeight - floatHeight))\n\t\t\t{\n\t\t\t\ttop = scrollHeight - floatHeight;\n\t\t\t}\n\n\t\t\t//Top side\n\t\t\tif (top < 0)\n\t\t\t{\n\t\t\t\ttop = 0;\n\t\t\t}\n\t\t}\n\n\t\tthis.popupContainer.style.left = left + 'px';\n\t\tthis.popupContainer.style.top = top + 'px';\n\t}\n\n\t/**\n\t * @private\n\t */\n\t_startDrag(event: MouseEvent, options): void\n\t{\n\t\toptions = options || {};\n\t\tif (Type.isStringFilled(options.cursor))\n\t\t{\n\t\t\tthis.dragOptions.cursor = options.cursor;\n\t\t}\n\n\t\tif (Type.isStringFilled(options.eventName))\n\t\t{\n\t\t\tthis.dragOptions.eventName = options.eventName;\n\t\t}\n\n\t\tif (Type.isFunction(options.callback))\n\t\t{\n\t\t\tthis.dragOptions.callback = options.callback;\n\t\t}\n\n\t\tthis.dragPageX = event.pageX;\n\t\tthis.dragPageY = event.pageY;\n\t\tthis.dragged = false;\n\n\t\tEvent.bind(document, 'mousemove', this.handleDocumentMouseMove);\n\t\tEvent.bind(document, 'mouseup', this.handleDocumentMouseUp);\n\n\t\tif (document.body.setCapture)\n\t\t{\n\t\t\tdocument.body.setCapture();\n\t\t}\n\n\t\tdocument.body.ondrag = () => false;\n\t\tdocument.body.onselectstart = () => false;\n\t\tdocument.body.style.cursor = this.dragOptions.cursor;\n\t\tdocument.body.style.MozUserSelect = 'none';\n\t\tthis.popupContainer.style.MozUserSelect = 'none';\n\n\t\tif (this.shouldFrontOnShow())\n\t\t{\n\t\t\tthis.bringToFront();\n\t\t}\n\n\t\tevent.preventDefault();\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleDocumentMouseMove(event): void\n\t{\n\t\tif (this.dragPageX === event.pageX && this.dragPageY === event.pageY)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.dragOptions.callback(\n\t\t\tevent.pageX - this.dragPageX,\n\t\t\tevent.pageY - this.dragPageY,\n\t\t\tevent.pageX,\n\t\t\tevent.pageY\n\t\t);\n\n\t\tthis.dragPageX = event.pageX;\n\t\tthis.dragPageY = event.pageY;\n\n\t\tif (!this.dragged)\n\t\t{\n\t\t\tthis.emit(`on${this.dragOptions.eventName}Start`, new BaseEvent({ compatData: [this] }));\n\t\t\tthis.dragged = true;\n\t\t}\n\n\t\tthis.emit(`on${this.dragOptions.eventName}`, new BaseEvent({ compatData: [this] }));\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleDocumentMouseUp(event: MouseEvent): void\n\t{\n\t\tif (document.body.releaseCapture)\n\t\t{\n\t\t\tdocument.body.releaseCapture();\n\t\t}\n\n\t\tEvent.unbind(document, 'mousemove', this.handleDocumentMouseMove);\n\t\tEvent.unbind(document, 'mouseup', this.handleDocumentMouseUp);\n\n\t\tdocument.body.ondrag = null;\n\t\tdocument.body.onselectstart = null;\n\t\tdocument.body.style.cursor = '';\n\t\tdocument.body.style.MozUserSelect = '';\n\t\tthis.popupContainer.style.MozUserSelect = '';\n\n\t\tthis.emit(`on${this.dragOptions.eventName}End`, new BaseEvent({ compatData: [this] }));\n\t\tthis.dragged = false;\n\n\t\tevent.preventDefault();\n\t}\n}\n\nlet escCallbackIndex = -1;\nlet escCallback = null;\n\nfunction checkEscPressed(zIndex, callback)\n{\n\tif (zIndex === false)\n\t{\n\t\tif (escCallback && escCallback.length > 0)\n\t\t{\n\t\t\tfor (let i = 0; i < escCallback.length; i++)\n\t\t\t{\n\t\t\t\tescCallback[i]();\n\t\t\t}\n\n\t\t\tescCallback = null;\n\t\t\tescCallbackIndex = -1;\n\t\t}\n\t}\n\telse\n\t{\n\t\tif (escCallback === null)\n\t\t{\n\t\t\tescCallback = [];\n\t\t\tescCallbackIndex = -1;\n\t\t\tsetTimeout(() => {\n\t\t\t\tcheckEscPressed(false);\n\t\t\t}, 10);\n\t\t}\n\n\t\tif (zIndex > escCallbackIndex)\n\t\t{\n\t\t\tescCallbackIndex = zIndex;\n\t\t\tescCallback = [callback];\n\t\t}\n\t\telse if (zIndex === escCallbackIndex)\n\t\t{\n\t\t\tescCallback.push(callback);\n\t\t}\n\t}\n}\n","import Popup from './popup';\nimport { type PopupOptions } from './popup-types';\nimport { Type } from 'main.core';\nimport { EventEmitter, type BaseEvent } from 'main.core.events';\n\nexport default class PopupManager\n{\n\tstatic _popups: Popup[] = [];\n\tstatic _currentPopup: Popup = null;\n\n\tconstructor()\n\t{\n\t\tthrow new Error('You cannot make an instance of PopupManager.');\n\t}\n\n\tstatic create(options: PopupOptions): Popup\n\t{\n\t\tlet [popupId, bindElement, params] = arguments; //compatible arguments\n\n\t\tlet id = popupId;\n\t\tlet compatMode = true;\n\t\tif (Type.isPlainObject(popupId) && !bindElement && !params)\n\t\t{\n\t\t\tcompatMode = false;\n\t\t\tid = popupId.id;\n\t\t\tif (!Type.isStringFilled(id))\n\t\t\t{\n\t\t\t\tthrow new Error('BX.Main.Popup.Manager: \"id\" parameter is required.');\n\t\t\t}\n\t\t}\n\n\t\tlet popupWindow = this.getPopupById(id);\n\t\tif (popupWindow === null)\n\t\t{\n\t\t\tpopupWindow = compatMode ? new Popup(popupId, bindElement, params) : new Popup(options);\n\t\t\tpopupWindow.subscribe('onShow', this.handlePopupShow);\n\t\t\tpopupWindow.subscribe('onClose', this.handlePopupClose);\n\t\t}\n\n\t\treturn popupWindow;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tstatic handleOnAfterInit(event: BaseEvent)\n\t{\n\t\tevent.getTarget().subscribeOnce('onDestroy', this.handlePopupDestroy);\n\n\t\tthis._popups.forEach(popup => {\n\t\t\tif (popup.getId() === event.getTarget().getId())\n\t\t\t{\n\t\t\t\tconsole.error(`Duplicate id (${popup.getId()}) for the BX.Main.Popup instance.`);\n\t\t\t}\n\t\t});\n\n\t\tthis._popups.push(event.getTarget());\n\t}\n\n\t/**\n\t * @private\n\t */\n\tstatic handlePopupDestroy(event: BaseEvent)\n\t{\n\t\tthis._popups = this._popups.filter(popup => {\n\t\t\treturn popup !== event.getTarget();\n\t\t});\n\t}\n\n\t/**\n\t * @private\n\t */\n\tstatic handlePopupShow(event: BaseEvent)\n\t{\n\t\tif (this._currentPopup !== null)\n\t\t{\n\t\t\tthis._currentPopup.close();\n\t\t}\n\n\t\tthis._currentPopup = event.getTarget();\n\t}\n\n\t/**\n\t * @private\n\t */\n\tstatic handlePopupClose()\n\t{\n\t\tthis._currentPopup = null;\n\t}\n\n\tstatic getCurrentPopup(): Popup | null\n\t{\n\t\treturn this._currentPopup;\n\t}\n\n\tstatic isPopupExists(id): boolean\n\t{\n\t\treturn this.getPopupById(id) !== null;\n\t}\n\n\tstatic isAnyPopupShown(): boolean\n\t{\n\t\tfor (let i = 0, length = this._popups.length; i < length; i++)\n\t\t{\n\t\t\tif (this._popups[i].isShown())\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tstatic getPopupById(id): Popup | null\n\t{\n\t\tfor (let i = 0; i < this._popups.length; i++)\n\t\t{\n\t\t\tif (this._popups[i].getId() === id)\n\t\t\t{\n\t\t\t\treturn this._popups[i];\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tstatic getMaxZIndex(): number\n\t{\n\t\tlet zIndex = 0;\n\n\t\tthis.getPopups().forEach((popup: Popup) => {\n\t\t\tzIndex = Math.max(zIndex, popup.getZindex());\n\t\t});\n\n\t\treturn zIndex;\n\t}\n\n\tstatic getPopups(): Popup[]\n\t{\n\t\treturn this._popups;\n\t}\n}\n\nPopupManager.handlePopupDestroy = PopupManager.handlePopupDestroy.bind(PopupManager);\nPopupManager.handlePopupShow = PopupManager.handlePopupShow.bind(PopupManager);\nPopupManager.handlePopupClose = PopupManager.handlePopupClose.bind(PopupManager);\nPopupManager.handleOnAfterInit = PopupManager.handleOnAfterInit.bind(PopupManager);\n\nEventEmitter.subscribe('BX.Main.Popup:onAfterInit', PopupManager.handleOnAfterInit);","import Menu from './menu';\nimport { Type, Text, Dom, Event, Tag } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { MenuItemOptions } from './menu-types';\n\nconst aliases = {\n\tonSubMenuShow: { namespace: 'BX.Main.Menu.Item', eventName: 'SubMenu:onShow' },\n\tonSubMenuClose: { namespace: 'BX.Main.Menu.Item', eventName: 'SubMenu:onClose' }\n};\n\nconst reEscape = /[<>'\"]/g;\nconst escapeEntities = {\n\t'<': '&lt;',\n\t'>': '&gt;',\n\t\"'\": '&#39;',\n\t'\"': '&quot;',\n};\n\nfunction encodeSafe(value: string): string\n{\n\tif (Type.isString(value))\n\t{\n\t\treturn value.replace(reEscape, item => escapeEntities[item]);\n\t}\n\n\treturn value;\n}\n\nEventEmitter.registerAliases(aliases);\n\nexport default class MenuItem extends EventEmitter\n{\n\tconstructor(options: MenuItemOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Main.Menu.Item');\n\n\t\toptions = options || {};\n\t\tthis.options = options;\n\n\t\tthis.id = options.id || Text.getRandom();\n\n\t\tthis.text = '';\n\t\tthis.allowHtml = false;\n\t\tif (Type.isStringFilled(options.html) || Type.isElementNode(options.html))\n\t\t{\n\t\t\tthis.text = options.html;\n\t\t\tthis.allowHtml = true;\n\t\t}\n\t\telse if (Type.isStringFilled(options.text))\n\t\t{\n\t\t\tthis.text = options.text;\n\t\t\tif (this.text.match(/<[^>]+>/))\n\t\t\t{\n\t\t\t\tconsole.warn('BX.Main.MenuItem: use \"html\" option for the html item content.', this.getText());\n\t\t\t}\n\t\t}\n\n\t\tthis.title = Type.isStringFilled(options.title) ? options.title : '';\n\t\tthis.delimiter = options.delimiter === true;\n\t\tthis.href = Type.isStringFilled(options.href) ? options.href : null;\n\t\tthis.target = Type.isStringFilled(options.target) ? options.target : null;\n\t\tthis.dataset = Type.isPlainObject(options.dataset) ? options.dataset : null;\n\t\tthis.className = Type.isStringFilled(options.className) ? options.className : null;\n\t\tthis.menuShowDelay = Type.isNumber(options.menuShowDelay) ? options.menuShowDelay : 300;\n\t\tthis.subMenuOffsetX = Type.isNumber(options.subMenuOffsetX) ? options.subMenuOffsetX : 4;\n\t\tthis._items = Type.isArray(options.items) ? options.items : [];\n\t\tthis.disabled = options.disabled === true;\n\t\tthis.cacheable = options.cacheable === true;\n\n\t\t/**\n\t\t *\n\t\t * @type {function|string}\n\t\t */\n\t\tthis.onclick =\n\t\t\tType.isStringFilled(options.onclick) || Type.isFunction(options.onclick)\n\t\t\t\t? options.onclick\n\t\t\t\t: null\n\t\t;\n\n\t\tthis.subscribeFromOptions(options.events, aliases);\n\n\t\t/**\n\t\t *\n\t\t * @type {Menu}\n\t\t */\n\t\tthis.menuWindow = null;\n\n\t\t/**\n\t\t *\n\t\t * @type {Menu}\n\t\t */\n\t\tthis.subMenuWindow = null;\n\n\t\t/**\n\t\t *\n\t\t * @type {{item: HTMLElement, text: HTMLElement}}\n\t\t */\n\t\tthis.layout = {\n\t\t\titem: null,\n\t\t\ttext: null\n\t\t};\n\n\t\tthis.getLayout(); //compatibility\n\n\t\t//compatibility\n\t\t//now use this.options\n\t\tthis.events = {};\n\t\tthis.items = [];\n\t\tfor (let property in options)\n\t\t{\n\t\t\tif (options.hasOwnProperty(property) && typeof (this[property]) === 'undefined')\n\t\t\t{\n\t\t\t\tthis[property] = options[property];\n\t\t\t}\n\t\t}\n\t}\n\n\tgetLayout(): Element\n\t{\n\t\tif (this.layout.item)\n\t\t{\n\t\t\treturn this.layout;\n\t\t}\n\n\t\tif (this.delimiter)\n\t\t{\n\t\t\tif (Type.isStringFilled(this.getText()))\n\t\t\t{\n\t\t\t\tthis.layout.item = Dom.create('span', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: [\n\t\t\t\t\t\t\t'popup-window-delimiter-section',\n\t\t\t\t\t\t\tthis.className ? this.className : '',\n\t\t\t\t\t\t].join(' ')\n\t\t\t\t\t},\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\t(this.layout.text = Tag.render`\n\t\t\t\t\t\t\t<span class=\"popup-window-delimiter-text\">${\n\t\t\t\t\t\t\t\tthis.allowHtml ? this.getText() : encodeSafe(this.getText())\n\t\t\t\t\t\t\t}</span>\n\t\t\t\t\t\t`)\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.layout.item = Tag.render`<span class=\"popup-window-delimiter\">`;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.layout.item = Dom.create(this.href ? 'a' : 'span', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: [\n\t\t\t\t\t\t'menu-popup-item',\n\t\t\t\t\t\t(this.className ? this.className : 'menu-popup-no-icon'),\n\t\t\t\t\t\t(this.hasSubMenu() ? 'menu-popup-item-submenu' : '')\n\t\t\t\t\t].join(' ')\n\t\t\t\t},\n\n\t\t\t\tattrs: {\n\t\t\t\t\ttitle: this.title,\n\t\t\t\t\tonclick: Type.isString(this.onclick) ? this.onclick : '', // compatibility\n\t\t\t\t\ttarget: this.target ? this.target : ''\n\t\t\t\t},\n\n\t\t\t\tdataset: this.dataset,\n\n\t\t\t\tevents:\n\t\t\t\t\tType.isFunction(this.onclick)\n\t\t\t\t\t\t? { click: this.onItemClick.bind(this) }\n\t\t\t\t\t\t: null\n\t\t\t\t,\n\n\t\t\t\tchildren: [\n\t\t\t\t\tDom.create('span', { props: { className: 'menu-popup-item-icon' } }),\n\t\t\t\t\t(this.layout.text = Tag.render`\n\t\t\t\t\t\t<span class=\"menu-popup-item-text\">${\n\t\t\t\t\t\t\tthis.allowHtml ? this.getText() : encodeSafe(this.getText())\n\t\t\t\t\t\t}</span>\n\t\t\t\t\t`)\n\t\t\t\t]\n\t\t\t});\n\n\t\t\tif (this.href)\n\t\t\t{\n\t\t\t\tthis.layout.item.href = this.href;\n\t\t\t}\n\n\t\t\tif (this.isDisabled())\n\t\t\t{\n\t\t\t\tthis.disable();\n\t\t\t}\n\n\t\t\tEvent.bind(this.layout.item, 'mouseenter', this.onItemMouseEnter.bind(this));\n\t\t\tEvent.bind(this.layout.item, 'mouseleave', this.onItemMouseLeave.bind(this));\n\t\t}\n\n\t\treturn this.layout;\n\t}\n\n\tgetContainer(): Element\n\t{\n\t\treturn this.getLayout().item;\n\t}\n\n\tgetTextContainer(): Element\n\t{\n\t\treturn this.getLayout().text;\n\t}\n\n\tgetText(): string | HTMLElement\n\t{\n\t\treturn this.text;\n\t}\n\n\tsetText(text: string | HTMLElement, allowHtml = false)\n\t{\n\t\tif (Type.isString(text) || Type.isElementNode(text))\n\t\t{\n\t\t\tthis.allowHtml = allowHtml;\n\t\t\tthis.text = text;\n\n\t\t\tif (Type.isElementNode(text))\n\t\t\t{\n\t\t\t\tDom.clean(this.getTextContainer());\n\t\t\t\tif (this.allowHtml)\n\t\t\t\t{\n\t\t\t\t\tDom.append(text, this.getTextContainer());\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.getTextContainer().innerHTML = encodeSafe(text.outerHTML);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.getTextContainer().innerHTML = this.allowHtml ? text : encodeSafe(text);\n\t\t\t}\n\t\t}\n\t}\n\n\thasSubMenu(): boolean\n\t{\n\t\treturn this.subMenuWindow !== null || this._items.length;\n\t}\n\n\tshowSubMenu(): void\n\t{\n\t\tif (!this.getMenuWindow().getPopupWindow().isShown())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.addSubMenu(this._items);\n\n\t\tif (this.subMenuWindow)\n\t\t{\n\t\t\tDom.addClass(this.layout.item, 'menu-popup-item-open');\n\n\t\t\tthis.closeSiblings();\n\t\t\tthis.closeChildren();\n\n\t\t\tconst popupWindow = this.subMenuWindow.getPopupWindow();\n\t\t\tif (!popupWindow.isShown())\n\t\t\t{\n\t\t\t\tthis.emit('SubMenu:onShow');\n\t\t\t\tpopupWindow.show();\n\t\t\t}\n\n\t\t\tthis.adjustSubMenu();\n\t\t}\n\t}\n\n\taddSubMenu(items: []): Menu\n\t{\n\t\tif (this.subMenuWindow !== null || !Type.isArray(items) || !items.length)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst rootMenuWindow = this.getMenuWindow().getRootMenuWindow() || this.getMenuWindow();\n\t\tconst rootOptions = Object.assign({}, rootMenuWindow.params);\n\t\tdelete rootOptions.events;\n\n\t\tconst subMenuOptions =\n\t\t\tType.isPlainObject(rootMenuWindow.params.subMenuOptions) ? rootMenuWindow.params.subMenuOptions : {}\n\t\t;\n\n\t\tconst options = Object.assign({}, rootOptions, subMenuOptions);\n\n\t\t//Override root menu options\n\t\toptions.autoHide = false;\n\t\toptions.menuShowDelay = this.menuShowDelay;\n\t\toptions.cacheable = this.isCacheable();\n\t\toptions.targetContainer = this.getMenuWindow().getPopupWindow().getTargetContainer();\n\t\toptions.bindOptions = {\n\t\t\tforceTop: true,\n\t\t\tforceLeft: true,\n\t\t\tforceBindPosition: true\n\t\t};\n\n\t\tdelete options.angle;\n\t\tdelete options.overlay;\n\n\t\tthis.subMenuWindow = new Menu('popup-submenu-' + this.id, this.layout.item, items, options);\n\t\tthis.subMenuWindow.setParentMenuWindow(this.getMenuWindow());\n\t\tthis.subMenuWindow.setParentMenuItem(this);\n\n\t\tthis.subMenuWindow.getPopupWindow().subscribe('onDestroy', this.handleSubMenuDestroy.bind(this));\n\t\tDom.addClass(this.layout.item, 'menu-popup-item-submenu');\n\n\t\treturn this.subMenuWindow;\n\t}\n\n\tcloseSubMenu(): void\n\t{\n\t\tthis.clearSubMenuTimeout();\n\n\t\tif (this.subMenuWindow)\n\t\t{\n\t\t\tDom.removeClass(this.layout.item, 'menu-popup-item-open');\n\n\t\t\tthis.closeChildren();\n\n\t\t\tconst popup = this.subMenuWindow.getPopupWindow();\n\t\t\tif (popup.isShown())\n\t\t\t{\n\t\t\t\tthis.emit('SubMenu:onClose');\n\t\t\t}\n\n\t\t\tthis.subMenuWindow.close();\n\t\t}\n\t}\n\n\tcloseSiblings(): void\n\t{\n\t\tconst siblings = this.menuWindow.getMenuItems();\n\t\tfor (let i = 0; i < siblings.length; i++)\n\t\t{\n\t\t\tif (siblings[i] !== this)\n\t\t\t{\n\t\t\t\tsiblings[i].closeSubMenu();\n\t\t\t}\n\t\t}\n\t}\n\n\tcloseChildren(): void\n\t{\n\t\tif (this.subMenuWindow)\n\t\t{\n\t\t\tconst children = this.subMenuWindow.getMenuItems();\n\t\t\tfor (let i = 0; i < children.length; i++)\n\t\t\t{\n\t\t\t\tchildren[i].closeSubMenu();\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroySubMenu(): void\n\t{\n\t\tif (this.subMenuWindow)\n\t\t{\n\t\t\tDom.removeClass(this.layout.item, 'menu-popup-item-open menu-popup-item-submenu');\n\t\t\tthis.destroyChildren();\n\t\t\tthis.subMenuWindow.destroy();\n\n\t\t\tthis.subMenuWindow = null;\n\t\t\tthis._items = [];\n\t\t}\n\t}\n\n\tdestroyChildren(): void\n\t{\n\t\tif (this.subMenuWindow)\n\t\t{\n\t\t\tconst children = this.subMenuWindow.getMenuItems();\n\t\t\tfor (let i = 0; i < children.length; i++)\n\t\t\t{\n\t\t\t\tchildren[i].destroySubMenu();\n\t\t\t}\n\t\t}\n\t}\n\n\tadjustSubMenu(): void\n\t{\n\t\tif (!this.subMenuWindow || !this.layout.item)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst popupWindow = this.subMenuWindow.getPopupWindow();\n\t\tconst itemRect = this.getBoundingClientRect();\n\n\t\tlet offsetLeft = itemRect.width + this.subMenuOffsetX;\n\t\tlet offsetTop = itemRect.height + this.getPopupPadding();\n\t\tlet angleOffset = itemRect.height / 2 - this.getPopupPadding();\n\t\tlet anglePosition = 'left';\n\n\t\tconst popupWidth = popupWindow.getPopupContainer().offsetWidth;\n\t\tconst popupHeight = popupWindow.getPopupContainer().offsetHeight;\n\t\tconst popupBottom = itemRect.top + popupHeight;\n\n\t\tconst targetContainer = this.getMenuWindow().getPopupWindow().getTargetContainer();\n\t\tconst isGlobalContext = this.getMenuWindow().getPopupWindow().isTargetDocumentBody();\n\t\tconst clientWidth = isGlobalContext ? document.documentElement.clientWidth : targetContainer.offsetWidth;\n\t\tconst clientHeight = isGlobalContext ? document.documentElement.clientHeight : targetContainer.offsetHeight;\n\n\t\t// let's try to fit a submenu to the browser viewport\n\t\tconst exceeded = popupBottom - clientHeight;\n\t\tif (exceeded > 0)\n\t\t{\n\t\t\tlet roundOffset = Math.ceil(exceeded / itemRect.height) * itemRect.height;\n\t\t\tif (roundOffset > itemRect.top)\n\t\t\t{\n\t\t\t\t// it cannot be higher than the browser viewport.\n\t\t\t\troundOffset -= Math.ceil((roundOffset - itemRect.top) / itemRect.height) * itemRect.height;\n\t\t\t}\n\n\t\t\tif (itemRect.bottom > (popupBottom - roundOffset))\n\t\t\t{\n\t\t\t\t// let's sync bottom boundaries.\n\t\t\t\troundOffset -= itemRect.bottom - (popupBottom - roundOffset) + this.getPopupPadding();\n\t\t\t}\n\n\t\t\toffsetTop += roundOffset;\n\t\t\tangleOffset += roundOffset;\n\t\t}\n\n\t\tif ((itemRect.left + offsetLeft + popupWidth) > clientWidth)\n\t\t{\n\t\t\tconst left = itemRect.left - popupWidth - this.subMenuOffsetX;\n\t\t\tif (left > 0)\n\t\t\t{\n\t\t\t\toffsetLeft = -popupWidth - this.subMenuOffsetX;\n\t\t\t\tanglePosition = 'right';\n\t\t\t}\n\t\t}\n\n\t\tpopupWindow.setBindElement(this.layout.item);\n\t\tpopupWindow.setOffset({ offsetLeft: offsetLeft, offsetTop: -offsetTop });\n\t\tpopupWindow.setAngle({ position: anglePosition, offset: angleOffset });\n\t\tpopupWindow.adjustPosition();\n\t}\n\n\tgetBoundingClientRect(): DOMRect\n\t{\n\t\tconst popup = this.getMenuWindow().getPopupWindow();\n\t\tif (popup.isTargetDocumentBody())\n\t\t{\n\t\t\treturn this.layout.item.getBoundingClientRect();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst rect = popup.getPositionRelativeToTarget(this.layout.item);\n\t\t\tconst targetContainer = this.getMenuWindow().getPopupWindow().getTargetContainer();\n\n\t\t\treturn new DOMRect(\n\t\t\t\trect.left - targetContainer.scrollLeft,\n\t\t\t\trect.top - targetContainer.scrollTop,\n\t\t\t\trect.width,\n\t\t\t\trect.height\n\t\t\t);\n\t\t}\n\t}\n\n\tgetPopupPadding(): number\n\t{\n\t\tif (!Type.isNumber(this.popupPadding))\n\t\t{\n\t\t\tif (this.subMenuWindow)\n\t\t\t{\n\t\t\t\tconst menuContainer = this.subMenuWindow.layout.menuContainer;\n\t\t\t\tthis.popupPadding = parseInt(Dom.style(menuContainer, 'paddingTop'), 10);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.popupPadding = 0;\n\t\t\t}\n\t\t}\n\n\t\treturn this.popupPadding;\n\t}\n\n\tgetSubMenu(): Menu | null\n\t{\n\t\treturn this.subMenuWindow;\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.id;\n\t}\n\n\tsetMenuWindow(menu: Menu): string\n\t{\n\t\tthis.menuWindow = menu;\n\t}\n\n\tgetMenuWindow(): Menu | null\n\t{\n\t\treturn this.menuWindow;\n\t}\n\n\tgetMenuShowDelay(): number\n\t{\n\t\treturn this.menuShowDelay;\n\t}\n\n\tenable(): void\n\t{\n\t\tthis.disabled = false;\n\t\tthis.getContainer().classList.remove('menu-popup-item-disabled');\n\t}\n\n\tdisable(): void\n\t{\n\t\tthis.disabled = true;\n\t\tthis.closeSubMenu();\n\t\tthis.getContainer().classList.add('menu-popup-item-disabled');\n\t}\n\n\tisDisabled(): boolean\n\t{\n\t\treturn this.disabled;\n\t}\n\n\tsetCacheable(cacheable): void\n\t{\n\t\tthis.cacheable = cacheable !== false;\n\t}\n\n\tisCacheable(): boolean\n\t{\n\t\treturn this.cacheable;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tonItemClick(event): void\n\t{\n\t\tthis.onclick.call(this.menuWindow, event, this); //compatibility\n\t}\n\n\t/**\n\t * @private\n\t */\n\tonItemMouseEnter(mouseEvent: MouseEvent): void\n\t{\n\t\tif (this.isDisabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst event = new BaseEvent({ data: { mouseEvent } });\n\t\tEventEmitter.emit(this, 'onMouseEnter', event, { thisArg: this });\n\t\tif (event.isDefaultPrevented())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.clearSubMenuTimeout();\n\n\t\tif (this.hasSubMenu())\n\t\t{\n\t\t\tthis.subMenuTimeout = setTimeout(function() {\n\t\t\t\tthis.showSubMenu();\n\t\t\t}.bind(this), this.menuShowDelay);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.subMenuTimeout = setTimeout(function() {\n\t\t\t\tthis.closeSiblings();\n\t\t\t}.bind(this), this.menuShowDelay);\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tonItemMouseLeave(mouseEvent: MouseEvent): void\n\t{\n\t\tif (this.isDisabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst event = new BaseEvent({ data: { mouseEvent } });\n\t\tEventEmitter.emit(this, 'onMouseLeave', event, { thisArg: this });\n\t\tif (event.isDefaultPrevented())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.clearSubMenuTimeout();\n\t}\n\n\t/**\n\t * @private\n\t */\n\tclearSubMenuTimeout(): void\n\t{\n\t\tif (this.subMenuTimeout)\n\t\t{\n\t\t\tclearTimeout(this.subMenuTimeout);\n\t\t}\n\n\t\tthis.subMenuTimeout = null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleSubMenuDestroy(): void\n\t{\n\t\tthis.subMenuWindow = null;\n\t}\n}","import MenuItem from './menu-item';\nimport Popup from '../popup/popup';\nimport { Type, Text, Tag } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { type MenuOptions, type MenuItemOptions } from './menu-types';\nimport { type PopupTargetOptions } from '../popup/popup-types';\n\n/**\n * @memberof BX.Main\n */\nexport default class Menu extends EventEmitter\n{\n\tconstructor(options: MenuOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Main.Menu');\n\n\t\tlet [\n\t\t\tid: string,\n\t\t\tbindElement: PopupTargetOptions,\n\t\t\tmenuItems: MenuItemOptions[],\n\t\t\tparams: MenuOptions,\n\t\t] = arguments;\n\n\t\tif (Type.isPlainObject(options) && !bindElement && !menuItems && !params)\n\t\t{\n\t\t\tparams = options;\n\t\t\tparams.compatibleMode = false;\n\n\t\t\tid = options.id;\n\t\t\tbindElement = options.bindElement;\n\t\t\tmenuItems = options.items;\n\n\t\t\tif (!Type.isStringFilled(id))\n\t\t\t{\n\t\t\t\tid = `menu-popup-${Text.getRandom()}`;\n\t\t\t}\n\t\t}\n\n\t\tthis.emit('onInit', { id, bindElement, menuItems, params });\n\n\t\tthis.id = id;\n\t\tthis.bindElement = bindElement;\n\n\t\t/**\n\t\t *\n\t\t * @type {MenuItem[]}\n\t\t */\n\t\tthis.menuItems = [];\n\t\tthis.itemsContainer = null;\n\t\tthis.params = params && typeof (params) === 'object' ? params : {};\n\t\tthis.parentMenuWindow = null;\n\t\tthis.parentMenuItem = null;\n\n\t\tif (menuItems && Type.isArray(menuItems))\n\t\t{\n\t\t\tfor (let i = 0; i < menuItems.length; i++)\n\t\t\t{\n\t\t\t\tthis.addMenuItemInternal(menuItems[i], null);\n\t\t\t}\n\t\t}\n\n\t\tthis.layout = {\n\t\t\tmenuContainer: null,\n\t\t\titemsContainer: null\n\t\t};\n\n\t\tthis.popupWindow = this.__createPopup();\n\t}\n\n\t/**\n\t * @private\n\t */\n\t__createPopup(): Popup\n\t{\n\t\tconst domItems = [];\n\t\tfor (let i = 0; i < this.menuItems.length; i++)\n\t\t{\n\t\t\tconst item = this.menuItems[i];\n\t\t\tconst itemLayout = item.getLayout();\n\t\t\tdomItems.push(itemLayout.item);\n\t\t}\n\n\t\tconst defaults = {\n\t\t\tcloseByEsc: false,\n\t\t\tangle: false,\n\t\t\tautoHide: true,\n\t\t\toffsetTop: 1,\n\t\t\toffsetLeft: 0,\n\t\t\tanimation: 'fading'\n\t\t};\n\n\t\tconst options = Object.assign(defaults, this.params);\n\n\t\t//Override user params\n\t\toptions.noAllPaddings = true;\n\t\toptions.darkMode = false;\n\t\toptions.autoHideHandler = this.handleAutoHide.bind(this);\n\n\t\tthis.layout.itemsContainer = Tag.render`\n\t\t\t<div class=\"menu-popup-items\">${domItems}</div>\n\t\t`;\n\n\t\tthis.layout.menuContainer = Tag.render`\n\t\t\t<div class=\"menu-popup\">${this.layout.itemsContainer}</div>\n\t\t`;\n\n\t\tthis.itemsContainer = this.layout.itemsContainer;\n\t\toptions.content = this.layout.menuContainer;\n\n\t\t//Make internal event handlers first in the queue.\n\t\toptions.events = {\n\t\t\tonClose: this.handlePopupClose.bind(this),\n\t\t\tonDestroy: this.handlePopupDestroy.bind(this)\n\t\t};\n\n\t\tconst id = options.compatibleMode === false ? this.getId() : 'menu-popup-' + this.getId();\n\t\tconst popup = new Popup(id, this.bindElement, options);\n\t\tif (this.params && this.params.events)\n\t\t{\n\t\t\tpopup.subscribeFromOptions(this.params.events);\n\t\t}\n\n\t\treturn popup;\n\t}\n\n\tgetPopupWindow(): Popup\n\t{\n\t\treturn this.popupWindow;\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.getPopupWindow().show();\n\t}\n\n\tclose(): void\n\t{\n\t\tthis.getPopupWindow().close();\n\t}\n\n\tdestroy(): void\n\t{\n\t\tthis.getPopupWindow().destroy();\n\t}\n\n\ttoggle(): void\n\t{\n\t\tif (this.getPopupWindow().isShown())\n\t\t{\n\t\t\tthis.close();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.show();\n\t\t}\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.id;\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandlePopupClose(): void\n\t{\n\t\tfor (let i = 0; i < this.menuItems.length; i++)\n\t\t{\n\t\t\tconst item = this.menuItems[i];\n\t\t\titem.closeSubMenu();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandlePopupDestroy(): void\n\t{\n\t\tfor (let i = 0; i < this.menuItems.length; i++)\n\t\t{\n\t\t\tconst item = this.menuItems[i];\n\t\t\titem.destroySubMenu();\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleAutoHide(event): boolean\n\t{\n\t\treturn !this.containsTarget(event.target);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tcontainsTarget(target: Element): boolean\n\t{\n\t\tconst el = this.getPopupWindow().getPopupContainer();\n\t\tif (this.getPopupWindow().isShown() && (target === el || el.contains(target)))\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn this.getMenuItems().some(function(item: MenuItem) {\n\n\t\t\treturn item.getSubMenu() && item.getSubMenu().containsTarget(target);\n\n\t\t});\n\t}\n\n\tsetParentMenuWindow(parentMenu: Menu): void\n\t{\n\t\tif (parentMenu instanceof Menu)\n\t\t{\n\t\t\tthis.parentMenuWindow = parentMenu;\n\t\t}\n\t}\n\n\tgetParentMenuWindow(): Menu | null\n\t{\n\t\treturn this.parentMenuWindow;\n\t}\n\n\tgetRootMenuWindow(): Menu | null\n\t{\n\t\tlet root = null;\n\t\tlet parent = this.getParentMenuWindow();\n\t\twhile (parent !== null)\n\t\t{\n\t\t\troot = parent;\n\t\t\tparent = parent.getParentMenuWindow();\n\t\t}\n\n\t\treturn root;\n\t}\n\n\tsetParentMenuItem(parentItem: MenuItem): void\n\t{\n\t\tif (parentItem instanceof MenuItem)\n\t\t{\n\t\t\tthis.parentMenuItem = parentItem;\n\t\t}\n\t}\n\n\tgetParentMenuItem(): MenuItem | null\n\t{\n\t\treturn this.parentMenuItem;\n\t}\n\n\taddMenuItem(menuItemJson: any, targetItemId: string): MenuItem\n\t{\n\t\tconst menuItem = this.addMenuItemInternal(menuItemJson, targetItemId);\n\t\tif (!menuItem)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst itemLayout = menuItem.getLayout();\n\t\tconst targetItem = this.getMenuItem(targetItemId);\n\t\tif (targetItem !== null)\n\t\t{\n\t\t\tconst targetLayout = targetItem.getLayout();\n\t\t\tthis.itemsContainer.insertBefore(itemLayout.item, targetLayout.item);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.itemsContainer.appendChild(itemLayout.item);\n\t\t}\n\n\t\treturn menuItem;\n\t}\n\n\t/**\n\t * @private\n\t */\n\taddMenuItemInternal(menuItemJson: any, targetItemId: string): MenuItem\n\t{\n\t\tif (\n\t\t\t!menuItemJson ||\n\t\t\t(\n\t\t\t\t!menuItemJson.delimiter &&\n\t\t\t\t!Type.isStringFilled(menuItemJson.text) &&\n\t\t\t\t!Type.isStringFilled(menuItemJson.html) &&\n\t\t\t\t!Type.isElementNode(menuItemJson.html)\n\t\t\t) ||\n\t\t\t(menuItemJson.id && this.getMenuItem(menuItemJson.id) !== null)\n\t\t)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (Type.isNumber(this.params.menuShowDelay))\n\t\t{\n\t\t\tmenuItemJson.menuShowDelay = this.params.menuShowDelay;\n\t\t}\n\n\t\tconst menuItem = new MenuItem(menuItemJson);\n\t\tmenuItem.setMenuWindow(this);\n\n\t\tconst position = this.getMenuItemPosition(targetItemId);\n\t\tif (position >= 0)\n\t\t{\n\t\t\tthis.menuItems.splice(position, 0, menuItem);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.menuItems.push(menuItem);\n\t\t}\n\n\t\treturn menuItem;\n\t}\n\n\tremoveMenuItem(itemId: string, options = {\n\t\tdestroyEmptyPopup: true,\n\t}): void\n\t{\n\t\tconst item = this.getMenuItem(itemId);\n\t\tif (!item)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfor (let position = 0; position < this.menuItems.length; position++)\n\t\t{\n\t\t\tif (this.menuItems[position] === item)\n\t\t\t{\n\t\t\t\titem.destroySubMenu();\n\t\t\t\tthis.menuItems.splice(position, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (!this.menuItems.length)\n\t\t{\n\t\t\tconst menuWindow = item.getMenuWindow();\n\t\t\tif (menuWindow)\n\t\t\t{\n\t\t\t\tconst parentMenuItem = menuWindow.getParentMenuItem();\n\t\t\t\tif (parentMenuItem)\n\t\t\t\t{\n\t\t\t\t\tparentMenuItem.destroySubMenu();\n\t\t\t\t}\n\t\t\t\telse if (options.destroyEmptyPopup)\n\t\t\t\t{\n\t\t\t\t\tmenuWindow.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\titem.layout.item.parentNode.removeChild(item.layout.item);\n\t\titem.layout = {\n\t\t\titem: null,\n\t\t\ttext: null\n\t\t};\n\t}\n\n\tgetMenuItem(itemId: string): MenuItem | null\n\t{\n\t\tfor (let i = 0; i < this.menuItems.length; i++)\n\t\t{\n\t\t\tif (this.menuItems[i].id && this.menuItems[i].id === itemId)\n\t\t\t{\n\t\t\t\treturn this.menuItems[i];\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\treturn this.menuItems;\n\t}\n\n\tgetMenuItemPosition(itemId: string): number\n\t{\n\t\tif (itemId)\n\t\t{\n\t\t\tfor (let i = 0; i < this.menuItems.length; i++)\n\t\t\t{\n\t\t\t\tif (this.menuItems[i].id && this.menuItems[i].id === itemId)\n\t\t\t\t{\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t}\n\n\tgetMenuContainer()\n\t{\n\t\treturn this.getPopupWindow().getPopupContainer();\n\t}\n}\n","import Menu from './menu';\nimport { Type } from 'main.core';\nimport { MenuOptions } from './menu-types';\n\nexport default class MenuManager\n{\n\t/**\n\t * @private\n\t */\n\tstatic Data: { [id: string]: Menu } = {};\n\n\t/**\n\t * @private\n\t */\n\tstatic currentItem: ? Menu = null;\n\n\tconstructor()\n\t{\n\t\tthrow new Error('You cannot make an instance of MenuManager.');\n\t}\n\n\tstatic show(...args)\n\t{\n\t\tif (this.currentItem !== null)\n\t\t{\n\t\t\tthis.currentItem.popupWindow.close();\n\t\t}\n\n\t\tthis.currentItem = this.create.apply(this, args);\n\t\tthis.currentItem.popupWindow.show();\n\t}\n\n\tstatic create(options: MenuOptions)\n\t{\n\t\tlet menuId = null;\n\n\t\t//Compatibility\n\t\tconst bindElement = arguments[1];\n\t\tconst menuItems = arguments[2];\n\t\tconst params = arguments[3];\n\n\t\tif (Type.isPlainObject(options) && !bindElement && !menuItems && !params)\n\t\t{\n\t\t\tmenuId = options.id;\n\t\t\tif (!Type.isStringFilled(menuId))\n\t\t\t{\n\t\t\t\tthrow new Error('BX.Main.Menu.create: \"id\" parameter is required.');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmenuId = options;\n\t\t}\n\n\t\tif (!this.Data[menuId])\n\t\t{\n\t\t\tconst menu = new Menu(options, bindElement, menuItems, params);\n\t\t\tmenu.getPopupWindow().subscribe('onDestroy', () => {\n\t\t\t\tMenuManager.destroy(menuId);\n\t\t\t});\n\n\t\t\tthis.Data[menuId] = menu;\n\t\t}\n\n\t\treturn this.Data[menuId];\n\t}\n\n\tstatic getCurrentMenu(): Menu | null\n\t{\n\t\treturn this.currentItem;\n\t}\n\n\tstatic getMenuById(id): Menu | null\n\t{\n\t\treturn this.Data[id] ? this.Data[id] : null;\n\t}\n\n\t/**\n\t * compatibility\n\t * @private\n\t */\n\tstatic onPopupDestroy(popupMenuWindow: Menu)\n\t{\n\t\tthis.destroy(popupMenuWindow.id);\n\t}\n\n\tstatic destroy(id)\n\t{\n\t\tconst menu = this.getMenuById(id);\n\t\tif (menu)\n\t\t{\n\t\t\tif (this.currentItem === menu)\n\t\t\t{\n\t\t\t\tthis.currentItem = null;\n\t\t\t}\n\n\t\t\tdelete this.Data[id];\n\t\t\tmenu.getPopupWindow().destroy();\n\t\t}\n\t}\n}","import Popup from '../popup/popup';\n\n/**\n * @deprecated use Popup class instead: import { Popup } from 'main.popup'\n */\nexport default class PopupWindow extends Popup\n{\n\n}","import Button from './button';\n\n/**\n * @deprecated use BX.UI.Button\n */\nexport default class PopupWindowButton extends Button\n{\n\n}","import Button from './button';\nimport { Dom } from 'main.core';\n\n/**\n * @deprecated use BX.UI.Button\n */\nexport default class ButtonLink extends Button\n{\n\tconstructor(params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.buttonNode = Dom.create(\n\t\t\t'span',\n\t\t\t{\n\t\t\t\tprops: {\n\t\t\t\t\tclassName:\n\t\t\t\t\t\t'popup-window-button popup-window-button-link' +\n\t\t\t\t\t\t(this.className.length > 0 ? ' ' + this.className : '')\n\t\t\t\t\t,\n\t\t\t\t\tid: this.id\n\t\t\t\t},\n\t\t\t\ttext: this.text,\n\t\t\t\tevents: this.contextEvents\n\t\t\t}\n\t\t);\n\t}\n}","import ButtonLink from './buttonlink';\n\n/**\n * @deprecated use BX.UI.Button\n */\nexport default class PopupWindowButtonLink extends ButtonLink\n{\n\n}","import Button from './button';\nimport { Dom } from 'main.core';\n\n/**\n * @deprecated use BX.UI.Button\n */\nexport default class CustomButton extends Button\n{\n\tconstructor(params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.buttonNode = Dom.create(\n\t\t\t'span',\n\t\t\t{\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: (this.className.length > 0 ? this.className : ''),\n\t\t\t\t\tid: this.id\n\t\t\t\t},\n\t\t\t\tevents: this.contextEvents,\n\t\t\t\ttext: this.text\n\t\t\t}\n\t\t);\n\t}\n}","import CustomButton from './custombutton';\n\n/**\n * @deprecated use BX.UI.Button\n */\nexport default class PopupWindowCustomButton extends CustomButton\n{\n\n}","import Menu from '../menu/menu';\n\n/**\n * @deprecated use Menu class instead: import { Menu } from 'main.popup'\n */\nexport default class PopupMenuWindow extends Menu\n{\n\n}","import MenuItem from '../menu/menu-item';\n\n/**\n * @deprecated use Menu.Item class instead: import { MenuItem } from 'main.popup'\n */\nexport default class PopupMenuItem extends MenuItem\n{\n\n}","import { Dom } from 'main.core';\nimport Popup from '../popup/popup';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\n\n/**\n * @deprecated\n */\nexport default class InputPopup\n{\n\tconstructor(params)\n\t{\n\t\tthis.id = params.id || 'bx-inp-popup-' + Math.round(Math.random() * 1000000);\n\t\tthis.handler = params.handler || false;\n\t\tthis.values = params.values || false;\n\t\tthis.pInput = params.input;\n\t\tthis.bValues = !!this.values;\n\t\tthis.defaultValue = params.defaultValue || '';\n\t\tthis.openTitle = params.openTitle || '';\n\t\tthis.className = params.className || '';\n\t\tthis.noMRclassName = params.noMRclassName || 'ec-no-rm';\n\t\tthis.emptyClassName = params.noMRclassName || 'ec-label';\n\n\t\tconst _this = this;\n\t\tthis.curInd = false;\n\n\t\tif (this.bValues)\n\t\t{\n\t\t\tthis.pInput.onfocus = this.pInput.onclick = function(e) {\n\t\t\t\tif (this.value == _this.defaultValue)\n\t\t\t\t{\n\t\t\t\t\tthis.value = '';\n\t\t\t\t\tthis.className = _this.className;\n\t\t\t\t}\n\t\t\t\t_this.ShowPopup();\n\t\t\t\treturn e.preventDefault();\n\t\t\t};\n\n\t\t\tthis.pInput.onblur = function() {\n\t\t\t\tif (_this.bShowed)\n\t\t\t\t{\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t_this.ClosePopup(true);\n\t\t\t\t\t}, 200);\n\t\t\t\t}\n\t\t\t\t_this.OnChange();\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.pInput.className = this.noMRclassName;\n\t\t\tthis.pInput.onblur = this.OnChange.bind(this);\n\t\t}\n\t}\n\n\tShowPopup()\n\t{\n\t\tif (this.bShowed)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst _this = this;\n\t\tif (!this.oPopup)\n\t\t{\n\t\t\tconst pWnd = Dom.create('DIV', { props: { className: 'bxecpl-loc-popup ' + this.className } });\n\n\t\t\tfor (let i = 0, l = this.values.length; i < l; i++)\n\t\t\t{\n\t\t\t\tconst pRow = pWnd.appendChild(Dom.create('DIV', {\n\t\t\t\t\tprops: { id: 'bxecmr_' + i },\n\t\t\t\t\ttext: this.values[i].NAME,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tmouseover: function() {\n\t\t\t\t\t\t\tDom.addClass(this, 'bxecplloc-over');\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmouseout: function() {\n\t\t\t\t\t\t\tDom.removeClass(this, 'bxecplloc-over');\n\t\t\t\t\t\t},\n\t\t\t\t\t\tclick: function() {\n\t\t\t\t\t\t\tconst ind = this.id.substr('bxecmr_'.length);\n\t\t\t\t\t\t\t_this.pInput.value = _this.values[ind].NAME;\n\t\t\t\t\t\t\t_this.curInd = ind;\n\t\t\t\t\t\t\t_this.OnChange();\n\t\t\t\t\t\t\t_this.ClosePopup(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}));\n\n\t\t\t\tif (this.values[i].DESCRIPTION)\n\t\t\t\t{\n\t\t\t\t\tpRow.title = this.values[i].DESCRIPTION;\n\t\t\t\t}\n\t\t\t\tif (this.values[i].CLASS_NAME)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(pRow, this.values[i].CLASS_NAME);\n\t\t\t\t}\n\n\t\t\t\tif (this.values[i].URL)\n\t\t\t\t{\n\t\t\t\t\tpRow.appendChild(Dom.create('a', {\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\thref: this.values[i].URL,\n\t\t\t\t\t\t\tclassName: 'bxecplloc-view',\n\t\t\t\t\t\t\ttarget: '_blank',\n\t\t\t\t\t\t\ttitle: this.openTitle\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.oPopup = new Popup(this.id, this.pInput, {\n\t\t\t\tautoHide: true,\n\t\t\t\toffsetTop: 1,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\tlightShadow: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tcontent: pWnd,\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: this.ClosePopup.bind(this)\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.oPopup.show();\n\t\tthis.pInput.select();\n\t\tthis.bShowed = true;\n\n\t\tEventEmitter.emit(this, 'onInputPopupShow', new BaseEvent({ compatData: [this] }));\n\t}\n\n\tClosePopup(bClosePopup)\n\t{\n\t\tthis.bShowed = false;\n\n\t\tif (this.pInput.value === '')\n\t\t{\n\t\t\tthis.OnChange();\n\t\t}\n\n\t\tEventEmitter.emit(this, 'onInputPopupClose', new BaseEvent({ compatData: [this] }));\n\n\t\tif (bClosePopup === true)\n\t\t{\n\t\t\tthis.oPopup.close();\n\t\t}\n\t}\n\n\tOnChange()\n\t{\n\t\tlet val = this.pInput.value;\n\t\tif (this.bValues)\n\t\t{\n\t\t\tif (this.pInput.value == '' || this.pInput.value == this.defaultValue)\n\t\t\t{\n\t\t\t\tthis.pInput.value = this.defaultValue;\n\t\t\t\tthis.pInput.className = this.emptyClassName;\n\t\t\t\tval = '';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.pInput.className = '';\n\t\t\t}\n\t\t}\n\n\t\tif (isNaN(parseInt(this.curInd)) || this.curInd !== false && val != this.values[this.curInd].NAME)\n\t\t{\n\t\t\tthis.curInd = false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.curInd = parseInt(this.curInd);\n\t\t}\n\n\t\tEventEmitter.emit(\n\t\t\tthis,\n\t\t\t'onInputPopupChanged',\n\t\t\tnew BaseEvent({ compatData: [this, this.curInd, val] })\n\t\t);\n\n\t\tif (this.handler && typeof this.handler == 'function')\n\t\t{\n\t\t\tthis.handler({ ind: this.curInd, value: val });\n\t\t}\n\t}\n\n\tSet(ind, val, bOnChange)\n\t{\n\t\tthis.curInd = ind;\n\t\tif (this.curInd !== false)\n\t\t{\n\t\t\tthis.pInput.value = this.values[this.curInd].NAME;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.pInput.value = val;\n\t\t}\n\n\t\tif (bOnChange !== false)\n\t\t{\n\t\t\tthis.OnChange();\n\t\t}\n\t}\n\n\tGet(ind)\n\t{\n\t\tlet id = false;\n\t\tif (typeof ind == 'undefined')\n\t\t{\n\t\t\tind = this.curInd;\n\t\t}\n\n\t\tif (ind !== false && this.values[ind])\n\t\t{\n\t\t\tid = this.values[ind].ID;\n\t\t}\n\n\t\treturn id;\n\t}\n\n\tGetIndex(id)\n\t{\n\t\tfor (let i = 0, l = this.values.length; i < l; i++)\n\t\t{\n\t\t\tif (this.values[i].ID == id)\n\t\t\t{\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tDeactivate(bDeactivate)\n\t{\n\t\tif (this.pInput.value == '' || this.pInput.value == this.defaultValue)\n\t\t{\n\t\t\tif (bDeactivate)\n\t\t\t{\n\t\t\t\tthis.pInput.value = '';\n\t\t\t\tthis.pInput.className = this.noMRclassName;\n\t\t\t}\n\t\t\telse if (this.oEC.bUseMR)\n\t\t\t{\n\t\t\t\tthis.pInput.value = this.defaultValue;\n\t\t\t\tthis.pInput.className = this.emptyClassName;\n\t\t\t}\n\t\t}\n\n\t\tthis.pInput.disabled = bDeactivate;\n\t}\n}","/*\n\n//ES6\nimport { Popup, PopupManager, CloseIconSize } from 'main.popup';\nconst popup = new Popup();\nPopupManager.create();\n\n//ES5\nvar popup = new BX.Main.Popup();\nBX.Main.PopupManager.create();\nBX.Main.Popup.CloseIconSize;\n\n//ES6\nimport { Menu, MenuItem, MenuManager } from 'main.popup';\nconst menu = new Menu();\nconst item = new MenuItem();\nMenuManager.create();\n\n//ES5\nvar menu = new BX.Main.Menu();\nvar item = new BX.Main.MenuItem();\nBX.Main.MenuManager.create();\n\n */\n\nimport Popup from './popup/popup';\nimport PopupManager from './popup/popup-manager';\nimport CloseIconSize from './popup/popup-close-icon-size';\nimport Menu from './menu/menu';\nimport MenuManager from './menu/menu-manager';\nimport MenuItem from './menu/menu-item';\nimport type { PopupOptions, PopupTarget, PopupTargetOptions, PopupAnimationOptions } from './popup/popup-types';\nimport { type MenuOptions, type MenuItemOptions } from './menu/menu-types';\nimport type PositionEvent from './popup/position-event';\n\nimport PopupWindow from './compatibility/popup-window';\nimport PopupWindowButton from './compatibility/popup-window-button';\nimport PopupWindowButtonLink from './compatibility/popup-window-button-link';\nimport PopupWindowCustomButton from './compatibility/popup-window-custom-button';\nimport PopupMenuWindow from './compatibility/popup-menu-window';\nimport PopupMenuItem from './compatibility/popup-menu-item';\nimport InputPopup from './compatibility/input-popup';\nimport Button from './compatibility/button';\nimport ButtonLink from './compatibility/buttonlink';\nimport CustomButton from './compatibility/custombutton';\n\nimport { Reflection } from 'main.core';\n\nimport 'ui.design-tokens';\nimport 'ui.fonts.opensans';\nimport './css/popup.css';\n\nexport {\n\tPopup,\n\tMenu,\n\tMenuItem,\n\tPopupManager,\n\tMenuManager,\n\tCloseIconSize,\n};\n\nexport type {\n\tPopupOptions,\n\tPopupTarget,\n\tPopupTargetOptions,\n\tPopupAnimationOptions,\n\tMenuOptions,\n\tMenuItemOptions,\n\tPositionEvent,\n};\n\n//Compatibility\nexport {\n\tPopupWindow,\n\tPopupMenuWindow,\n\tPopupMenuItem,\n\tPopupManager as PopupWindowManager,\n\tMenuManager as PopupMenu,\n\tPopupWindowButton,\n\tPopupWindowButtonLink,\n\tPopupWindowCustomButton\n};\n\nconst BX = Reflection.namespace('BX');\n\n/** @deprecated use BX.Main.Popup or import { Popup } from 'main.popup' */\nBX.PopupWindow = Popup;\n\n/** @deprecated use BX.Main.PopupManager or import { PopupManager } from 'main.popup' */\nBX.PopupWindowManager = PopupManager;\n\n/** @deprecated use BX.Main.Menu or import { Menu } from 'main.popup' */\nBX.PopupMenuWindow = Menu;\n\n/** @deprecated use BX.Main.MenuManager or import { MenuManager } from 'main.popup' */\nBX.PopupMenu = MenuManager;\n\n/** @deprecated use BX.Main.MenuItem or import { MenuItem } from 'main.popup' */\nBX.PopupMenuItem = MenuItem;\n\n/** @deprecated use BX.UI.Button */\nBX.PopupWindowButton = Button;\n\n/** @deprecated use BX.UI.Button */\nBX.PopupWindowButtonLink = ButtonLink;\n\n/** @deprecated use BX.UI.Button */\nBX.PopupWindowCustomButton = CustomButton;\n\n/** @deprecated use another API */\nwindow.BXInputPopup = InputPopup;\n"],"names":["Button","params","popupWindow","text","id","className","events","contextEvents","eventName","Type","isFunction","bind","buttonNode","Dom","create","props","length","name","clean","adjust","isString","removeClass","addClass","PositionEvent","value","isNumber","BaseEvent","CloseIconSize","Object","freeze","LARGE","SMALL","aliases","onPopupWindowInit","namespace","onPopupWindowIsInitialized","onPopupFirstShow","onPopupShow","onAfterPopupShow","onPopupClose","onPopupAfterClose","onPopupDestroy","onPopupFullscreenLeave","onPopupFullscreenEnter","onPopupDragStart","onPopupDrag","onPopupDragEnd","onPopupResizeStart","onPopupResize","onPopupResizeEnd","EventEmitter","registerAliases","disabledScrolls","WeakMap","Popup","options","isPlainObject","option","defaultValue","isUndefined","defaultOptions","setEventNamespace","arguments","popupId","bindElement","compatibleMode","isBoolean","isStringFilled","Text","getRandom","toLowerCase","emit","compatData","uniquePopupId","zIndex","parseInt","zIndexAbsolute","buttons","isArray","offsetTop","getOption","offsetLeft","firstShow","bordersWidth","bindElementPos","closeIcon","resizeIcon","angle","angleArrowElement","overlay","titleBar","bindOptions","autoHide","disableScroll","isScrollBlock","autoHideHandler","handleAutoHide","handleOverlayClick","isAutoHideBinded","closeByEsc","isCloseByEscBinded","toFrontOnShow","cacheable","destroyed","fixed","width","height","minWidth","minHeight","maxWidth","maxHeight","padding","contentPadding","background","contentBackground","borderRadius","contentBorderRadius","setTargetContainer","targetContainer","dragOptions","cursor","callback","dragged","dragPageX","dragPageY","animationShowClassName","animationCloseClassName","animationCloseEventType","handleDocumentMouseMove","handleDocumentMouseUp","handleDocumentKeyUp","handleResizeWindow","handleResize","handleMove","onTitleMouseDown","handleFullScreen","subscribeFromOptions","popupClassName","darkMode","designSystemContext","Tag","render","values","includes","closeIconSize","handleCloseIconClick","style","contentContainer","popupContainer","getTargetContainer","append","zIndexComponent","ZIndexManager","register","zIndexOptions","buttonsContainer","contentColor","setContentColor","setAngle","setOverlay","setOffset","setBindElement","setTitleBar","setDraggable","draggable","setContent","content","setButtons","setWidth","setHeight","setMinWidth","setMinHeight","setMaxWidth","setMaxHeight","setResizeMode","resizable","setPadding","setContentPadding","setBorderRadius","setContentBorderRadius","setBackground","setContentBackground","setAnimation","animation","setCacheable","setToFrontOnShow","setFixed","setDesignSystemContext","contentNoPaddings","noAllPaddings","bindOnResize","Event","window","isElementNode","hasParent","isDomNode","parentNode","appendChild","isCompatibleMode","display","innerHTML","remove","ButtonClass","Reflection","getClass","newButtons","i","button","push","setContext","getId","top","left","clientX","clientY","pageX","pageY","bottom","isTargetDocumentBody","isFixed","getBoundingClientRect","getPosition","getPositionRelativeToTarget","windowSize","getWindowSize","windowScroll","getWindowScroll","popupWidth","getPopupContainer","offsetWidth","popupHeight","offsetHeight","forceTop","innerWidth","scrollLeft","innerHeight","scrollTop","element","offsetElement","offsetParent","elementRect","DOMRect","pageXOffset","pageYOffset","position","angleMinLeft","defaultOffset","offset","angleLeftOffset","Math","max","minOffset","maxOffset","min","marginLeft","removeProperty","setWidthProperty","setHeightProperty","property","indexOf","getResizableContainer","getContentContainer","overflowX","classList","add","getTitleContainer","Browser","isIE11","toKebabCase","hasOtherProps","some","prop","getPropertyValue","overflowY","radius","setProperty","color","backgroundColor","flag","mode","handleResizeMouseDown","context","newTargetContainer","document","body","event","_startDrag","resizeContentPos","resizeContentOffset","offsetX","offsetY","scrollWidth","documentElement","getMinWidth","getMinHeight","getMaxWidth","getMaxHeight","isTopOrBottomAngle","enable","bindClosingByEsc","unbindClosingByEsc","unbind","bindAutoHide","unbindAutoHide","isShown","handleContainerClick","addEventListener","removeEventListener","isDestroyed","_tryCloseByEvent","target","contains","tryCloseByEvent","setTimeout","close","stopPropagation","resizeOverlay","getZIndexComponent","opacity","parseFloat","toPrecision","blur","overlayTimeout","clearInterval","setInterval","scrollHeight","clientHeight","getZIndex","disable","showOverlay","shouldFrontOnShow","bringToFront","adjustPosition","animateOpening","animateClosing","hideOverlay","isCacheable","destroy","show","handleTransitionEnd","showClassName","closeClassName","closeAnimationType","animationName","unbindAll","removeOverlay","unregister","getBindElementPos","forceBindPosition","angleTopOffset","forceLeft","bindLeft","isBottomAngle","isTopAngle","getAngleHeight","fullscreenStatus","cancelFullScreen","mozCancelFullScreen","webkitCancelFullScreen","requestFullScreen","mozRequestFullScreen","webkitRequestFullScreen","console","log","keyCode","checkEscPressed","getZindex","restrict","floatWidth","floatHeight","setCapture","ondrag","onselectstart","MozUserSelect","preventDefault","releaseCapture","popups","get","Set","set","size","positionTopXOffset","popupZindex","popupOverlayZindex","angleMaxLeft","angleMinRight","angleMaxRight","angleMinBottom","angleMaxBottom","angleMinTop","angleMaxTop","escCallbackIndex","escCallback","PopupManager","Error","compatMode","getPopupById","subscribe","handlePopupShow","handlePopupClose","getTarget","subscribeOnce","handlePopupDestroy","_popups","forEach","popup","error","filter","_currentPopup","getPopups","handleOnAfterInit","onSubMenuShow","onSubMenuClose","reEscape","escapeEntities","encodeSafe","replace","item","MenuItem","allowHtml","html","match","warn","getText","title","delimiter","href","dataset","menuShowDelay","subMenuOffsetX","_items","items","disabled","onclick","menuWindow","subMenuWindow","layout","getLayout","hasOwnProperty","join","children","hasSubMenu","attrs","click","onItemClick","isDisabled","onItemMouseEnter","onItemMouseLeave","getTextContainer","outerHTML","getMenuWindow","getPopupWindow","addSubMenu","closeSiblings","closeChildren","adjustSubMenu","rootMenuWindow","getRootMenuWindow","rootOptions","assign","subMenuOptions","Menu","setParentMenuWindow","setParentMenuItem","handleSubMenuDestroy","clearSubMenuTimeout","siblings","getMenuItems","closeSubMenu","destroyChildren","destroySubMenu","itemRect","getPopupPadding","angleOffset","anglePosition","popupBottom","isGlobalContext","clientWidth","exceeded","roundOffset","ceil","rect","popupPadding","menuContainer","menu","getContainer","call","mouseEvent","data","thisArg","isDefaultPrevented","subMenuTimeout","showSubMenu","clearTimeout","menuItems","itemsContainer","parentMenuWindow","parentMenuItem","addMenuItemInternal","__createPopup","domItems","itemLayout","defaults","onClose","onDestroy","containsTarget","el","getSubMenu","parentMenu","root","parent","getParentMenuWindow","parentItem","menuItemJson","targetItemId","menuItem","targetItem","getMenuItem","targetLayout","insertBefore","setMenuWindow","getMenuItemPosition","splice","itemId","destroyEmptyPopup","getParentMenuItem","removeChild","MenuManager","currentItem","args","apply","menuId","Data","popupMenuWindow","getMenuById","PopupWindow","PopupWindowButton","ButtonLink","PopupWindowButtonLink","CustomButton","PopupWindowCustomButton","PopupMenuWindow","PopupMenuItem","InputPopup","round","random","handler","pInput","input","bValues","openTitle","noMRclassName","emptyClassName","_this","curInd","onfocus","e","ShowPopup","onblur","bShowed","ClosePopup","OnChange","oPopup","pWnd","l","pRow","NAME","mouseover","mouseout","ind","substr","DESCRIPTION","CLASS_NAME","URL","lightShadow","select","bClosePopup","val","isNaN","bOnChange","ID","bDeactivate","oEC","bUseMR","BX","PopupWindowManager","PopupMenu","BXInputPopup"],"mappings":"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"}