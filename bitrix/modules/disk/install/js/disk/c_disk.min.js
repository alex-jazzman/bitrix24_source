BX.namespace("BX.Disk");if(!BX.Disk.pathToUser){(function(){let e=null;const t={};let s={};const a={};const o=function(e){if(!e.RealAnchor||!BX.hasClass(e.RealAnchor,"js-disk-locked-document-tooltip")){return}const t=BX.findChildByClassName(e.ROOT_DIV,"bx-user-info-data-info",true);if(!t){return}if(BX.findChildByClassName(t,"js-disk-locked-status",true)){return}BX.prepend(BX.create("div",{html:`<span class="field-name">${BX.message("DISK_JS_USER_LOCKED_DOCUMENT")}</span>`,props:{className:"js-disk-locked-status"}}),t)};const i=function(e,t){t=t||{};if(e==="onlyoffice"&&t.documentSession){if(t.event==="saved"){BX.onCustomEvent("Disk.OnlyOffice:onSaved",[t.object,t.documentSession])}const e=BX.UI.Notification.Center.getBalloonById(`session-${t.documentSession.hash}`);if(e){BX.UI.Notification.Center.notify({content:BX.message("DISK_JS_DOCUMENT_ONLYOFFICE_SAVED").replace("#name#",e.getData().file.name)});e.close();return}}switch(t.action){case"commit":if(!t.objectId){break}if(parseInt(t.contentVersion,10)<2){break}var s=function(e){a.items.forEach((t=>{if(t.sourceNode.dataset.objectId===e){a.reloadItem(t,{})}}))};if(!BX.getClass("BX.UI.Viewer.Instance")){break}var a=BX.UI.Viewer.Instance;if(!a.isOpen()){return}var o=a.getCurrentItem();if(o.sourceNode.dataset.objectId!=t.objectId){s(t.objectId);break}var i=BX.message("DISK_JS_STATUS_ACTION_SUCCESS");if(BX.message.DISK_FOLDER_LIST_LABEL_LIVE_UPDATE_FILE){i=BX.message("DISK_FOLDER_LIST_LABEL_LIVE_UPDATE_FILE").replace("#NAME#",o.getTitle())}BX.Disk.showModalWithStatusAction({message:i});a.reloadCurrentItem();break}};BX.addCustomEvent("onPullEvent-disk",i);BX.addCustomEvent("onTooltipShow",o);BX.addCustomEvent("onTooltipInsertData",o);BX.addCustomEvent("BX.UI.Viewer.Controller:onBeforeShow",((e,t)=>{const s=e.getItemByIndex(t);if(!s){return}const a=s.getActions().filter((e=>{if(e.id!=="edit"){return true}if(!e.buttonIconClass){e.buttonIconClass=""}e.buttonIconClass+=` disk-viewer-panel-icon-${BX.Disk.getDocumentService()}`;if(!e.params||!e.params.dependsOnService){return true}return e.params.dependsOnService===BX.Disk.getDocumentService()}));s.setActions(a)}));BX.addCustomEvent("onTooltipHide",(e=>{if(!e.RealAnchor||!BX.hasClass(e.RealAnchor,"js-disk-locked-document-tooltip")){return}const t=BX.findChildByClassName(e.ROOT_DIV,"js-disk-locked-status",true);if(!t){return}BX.remove(t)}));function n(e){e.data=e.data||{};e.data.SITE_ID=BX.message("SITE_ID");e.data.sessid=BX.bitrix_sessid();return e}Object.assign(BX.Disk,{apiVersion:22,pathToUser:"/company/personal/user/#user_id#/",endEditSession(e){BX.ajax.runAction("disk.api.onlyoffice.endSession",{json:{sessionId:e.id,documentSessionHash:e.hash}}).then((t=>{if(!t||t.data.mode!=="edit"){return}if(t.data.activeSessions>1){return}if(!e.documentWasChanged){return}if(t.data.documentSessionInfo.isFinished){return}BX.UI.Notification.Center.notify({id:`session-${e.hash}`,autoHide:false,content:BX.message("DISK_JS_DOCUMENT_ONLYOFFICE_SAVE_PROCESS").replace("#name#",t.data.file.name),data:{file:t.data.file}})}))},hideLoader(){BX.removeClass(document.body,"disk-body-overlay");if(this.loaderWrapper){BX.ZIndexManager.unregister(this.loaderWrapper);this.loaderWrapper.parentNode.removeChild(this.loaderWrapper);this.loaderWrapper=null;this.loader=null}},showLoader(e){e=e||{};BX.addClass(document.body,"disk-body-overlay");const t=document.body.appendChild(this.getLoaderWrapper(e));BX.ZIndexManager.register(t);this.getLoader(this.loaderNode).show()},getLoaderWrapper(e){if(!this.loaderWrapper){this.loaderWrapper=BX.create("div",{props:{className:"disk-body-overlay-wrapper"},style:{zIndex:e.zIndex},children:[BX.create("div",{props:{className:"disk-body-overlay-container"},children:[this.loaderNode=BX.create("div",{props:{className:"disk-body-overlay-container-loader"}}),BX.create("div",{props:{className:"disk-body-overlay-container-text"},text:e.text||""})]})]})}return this.loaderWrapper},getLoader(e){if(!this.loader){this.loader=new BX.Loader({target:e,size:130})}return this.loader},ajax(e){return BX.ajax(n(e))},ajaxPromise(e){return BX.ajax.promise(n(e)).then((e=>{if(!e||e.status!="success"){BX.Disk.showModalWithStatusAction(e);const t=new BX.Promise;t.reject(e);return t}return e}))},isEmptyObject(e){if(e==null){return true}if(e.length>0&&e.length>0){return false}if(e.length===0){return true}for(const t in e){if(hasOwnProperty.call(e,t)){return false}}return true},_keyPress(t){const s=BX.SocNetLogDestination&&(BX.SocNetLogDestination.isOpenDialog()||BX.SocNetLogDestination.isOpenSearch());const a=(t||window.event).keyCode||(t||window.event).charCode;if(a==13&&e&&!s){BX.fireEvent(e.buttonNode,"click");return BX.PreventDefault(t)}},modalWindow(t){t=t||{};t.title=t.title||false;t.bindElement=t.bindElement||null;t.bindOptions=t.bindOptions||{};t.overlay=typeof t.overlay==="undefined"?true:t.overlay;t.autoHide=t.autoHide||false;t.closeIcon=typeof t.closeIcon==="undefined"?true:t.closeIcon;t.modalId=t.modalId||`disk_modal_window_${Math.random()*(2e5-100)+100}`;t.withoutContentWrap=typeof t.withoutContentWrap==="undefined"?false:t.withoutContentWrap;t.contentClassName=t.contentClassName||"";t.contentStyle=t.contentStyle||{};t.content=t.content||[];t.buttons=t.buttons||false;t.events=t.events||{};t.withoutWindowManager=Boolean(t.withoutWindowManager)||false;if(!BX.type.isArray(t.content)){t.content=[t.content]}let s=[];if(t.withoutContentWrap){s=s.concat(t.content)}else{s.push(BX.create("div",{props:{className:`bx-disk-popup-content${t.contentClassName}`},style:t.contentStyle,children:t.content}))}const o=t.buttons;if(t.htmlButtons){const e=[];for(const s in t.htmlButtons){if(!t.htmlButtons.hasOwnProperty(s)){continue}if(s>0){e.push(BX.create("SPAN",{html:"&nbsp;"}))}e.push(t.htmlButtons[s])}s.push(BX.create("div",{props:{className:"bx-disk-popup-buttons"},children:e}))}const i=BX.create("div",{props:{className:"bx-disk-popup-container"},children:s});const n=t.events.onAfterPopupShow;t.events.onAfterPopupShow=BX.delegate((function(){if(o.length>0){e=o[0];BX.bind(document,"keydown",BX.proxy(this._keyPress,this))}if(n){BX.delegate(n,BX.proxy_context)()}}),this);const r=t.events.onPopupClose;t.events.onPopupClose=BX.delegate((function(){e=null;try{BX.unbind(document,"keydown",BX.proxy(this._keypress,this))}catch{}if(r){BX.delegate(r,BX.proxy_context)()}if(t.withoutWindowManager){delete a[t.modalId]}BX.proxy_context.destroy()}),this);const d=t.events.onPopupDestroy;t.events.onPopupDestroy=BX.delegate((function(){try{BX.unbind(document,"keydown",BX.proxy(this._keypress,this))}catch{}if(d){BX.delegate(d,BX.proxy_context)()}}),this);let l;if(t.withoutWindowManager){if(a[t.modalId]){return a[t.modalId]}l=new BX.PopupWindow(t.modalId,t.bindElement,{titleBar:t.title,content:i,bindOptions:t.bindOptions,closeByEsc:true,height:t.height,closeIcon:t.closeIcon,autoHide:t.autoHide,overlay:t.overlay,events:t.events,buttons:t.buttons,zIndex:isNaN(t.zIndex)?0:t.zIndex});a[t.modalId]=l}else{l=BX.PopupWindowManager.create(t.modalId,t.bindElement,{titleBar:t.title,content:i,bindOptions:t.bindOptions,closeByEsc:true,height:t.height,closeIcon:t.closeIcon,autoHide:t.autoHide,overlay:t.overlay,events:t.events,buttons:t.buttons,zIndex:isNaN(t.zIndex)?0:t.zIndex})}l.show();return l},modalWindowLoader(e,t,s){s=s||null;t=t||{};const a=t.id;const o=t.responseType||"html";const i=t.afterSuccessLoad||null;const n=t.onPopupClose||null;const r=t.postData||{};const d=BX.PopupWindowManager.create(`bx-disk-${a}`,s,{closeIcon:true,offsetTop:5,autoHide:true,lightShadow:false,overlay:true,content:BX.create("div",{children:[BX.create("div",{style:{display:"table",width:"30px",height:"30px"},children:[BX.create("div",{style:{display:"table-cell",verticalAlign:"middle",textAlign:"center"},children:[BX.create("div",{props:{className:"bx-disk-wrap-loading-modal"}}),BX.create("span",{text:""})]})]})]}),closeByEsc:true,events:{onPopupClose(){if(n){BX.delegate(n,this)()}this.destroy()}}});d.show();r.sessid=BX.bitrix_sessid();r.SITE_ID=BX.message("SITE_ID");BX.ajax({url:e,method:"POST",dataType:o,data:r,onsuccess:BX.delegate((e=>{if(o=="html"){d.setContent(BX.create("DIV",{html:e}));d.adjustPosition()}else if(o=="json"){e=e||{}}i&&i(e,d)}),this),onfailure(e){}})},modalWindowActionLoader(e,t,s){s=s||null;t=t||{};const a=t.id;const o=t.afterSuccessLoad||null;const i=t.onPopupClose||null;const n=t.postData||{};const r=BX.PopupWindowManager.create(`bx-disk-${a}`,s,{closeIcon:true,offsetTop:5,autoHide:true,lightShadow:false,overlay:true,content:BX.create("div",{children:[BX.create("div",{style:{display:"table",width:"30px",height:"30px"},children:[BX.create("div",{style:{display:"table-cell",verticalAlign:"middle",textAlign:"center"},children:[BX.create("div",{props:{className:"bx-disk-wrap-loading-modal"}}),BX.create("span",{text:""})]})]})]}),closeByEsc:true,events:{onPopupClose(){if(i){BX.delegate(i,this)()}this.destroy()}}});r.show();BX.ajax.runAction(e,{data:n}).then((e=>{o&&o(e,r)}))},addToLinkParam(e,t,s){if(e.length===0){return`?${t}=${s}`}e=BX.util.remove_url_param(e,t);if(e.includes("?")){return`${e}&${t}=${s}`}return`${e}?${t}=${s}`},getUrlParameter(e){e=e.replace(/\[/,"\\[").replace(/]/,"\\]");const t=new RegExp(`[\\?&]${e}=([^&#]*)`);const s=t.exec(location.search);return s===null?"":decodeURIComponent(s[1].replaceAll("+"," "))},sendTelemetryEvent(e){},getFirstErrorFromResponse(e){e=e||{};if(!e.errors){return""}return e.errors.shift().message},showModalWithStatusAction(e,t){e=e||{status:"success"};if(!e.message){if(e.status=="success"){e.message=BX.message("DISK_JS_STATUS_ACTION_SUCCESS")}else{e.message=`${BX.message("DISK_JS_STATUS_ACTION_ERROR")}. ${this.getFirstErrorFromResponse(e)}`}}BX.UI.Notification.Center.notify({content:e.message})},showActionModal(e){const t=e.text;const s=e.html;const a=e.autoHide;let o;if(e.showLoaderIcon){o="/bitrix/js/main/core/images/yell-waiter.gif"}else if(e.showSuccessIcon){o="/bitrix/js/main/core/images/viewer-tick.png"}else if(e.icon){o=e.icon}const i=BX.create("div",{props:{className:"bx-disk-alert"},children:[BX.create("span",{props:{className:"bx-disk-alert-icon"},children:[o?BX.create("img",{props:{src:o}}):null]}),BX.create("span",{props:{className:"bx-disk-aligner"}}),BX.create("span",{props:{className:"bx-disk-alert-text"},text:t,html:s}),BX.create("div",{props:{className:"bx-disk-alert-footer"}})]});const n=BX.PopupWindowManager.getCurrentPopup();if(n){n.destroy()}let r=setTimeout((()=>{if(!a){return}const e=BX.PopupWindowManager.getCurrentPopup();if(!e||e.uniquePopupId!="bx-disk-status-action"){return}e.close();e.destroy()}),3e3);const d=BX.PopupWindowManager.create("bx-disk-status-action",null,{content:i,onPopupClose(){this.destroy();clearTimeout(r)},autoHide:a,zIndex:999999+1,className:"bx-disk-alert-popup"});d.show();BX("bx-disk-status-action").onmouseover=function(e){clearTimeout(r)};if(!a){return d}BX("bx-disk-status-action").onmouseout=function(e){r=setTimeout((()=>{const e=BX.PopupWindowManager.getCurrentPopup();if(!e||e.uniquePopupId!="bx-disk-status-action"){return}e.close();e.destroy()}),3e3)};return d},storePathToUser(e){if(e){this.pathToUser=e}},getUrlToShowObjectInGrid(e,t){t=t||{};t.objectId=e;t.SITE_ID=BX.message("SITE_ID");return BX.util.add_url_param("/bitrix/tools/disk/focus.php?ncc=1&action=showObjectInGrid",t)},getUrlToShowFileDetail(e,t){t=t||{};t.fileId=e;t.SITE_ID=BX.message("SITE_ID");return BX.util.add_url_param("/bitrix/tools/disk/focus.php?ncc=1&action=openFileDetail",t)},isAvailableOnlyOffice(){return BX.message("disk_onlyoffice_available")},getDocumentService(){return BX.message("disk_document_service")},openBlankDocumentPopup(){if(!BX.Disk.getDocumentService()||(BX.Disk.getDocumentService()==="l"||BX.Disk.getDocumentService()==="onlyoffice")){return null}return BX.util.popup("/bitrix/services/main/ajax.php?action=disk.documentService.love",1030,700)},saveDocumentService(e){const t=e!==BX.Disk.getDocumentService();if(BX.Disk.isAvailableOnlyOffice()){BX.userOptions.save("disk","doc_service","primary",e)}else{BX.userOptions.save("disk","doc_service","default",e)}BX.message({disk_document_service:e});if(t){BX.onCustomEvent("Disk:onChangeDocumentService",[BX.message("disk_document_service")])}BX.userOptions.send(null)},deactiveBanner(e){BX.userOptions.save("disk","~banner-offer",e,true);BX.userOptions.send(null)},getPathToUser(e){return this.pathToUser.replace("#USER_ID#",e).replace("#user_id#",e)},getNumericCase(e,t,s,a,o){if(e==1){return t}if(e<0){e=-e}e%=100;if(e>=5&&e<=20){return o}e%=10;if(e==1){return s}if(e>=2&&e<=4){return a}return o},getRightLabelByTaskName(e){switch(e.toLowerCase()){case"disk_access_read":return BX.message("DISK_JS_SHARING_LABEL_RIGHT_READ");case"disk_access_add":return BX.message("DISK_JS_SHARING_LABEL_RIGHT_ADD");case"disk_access_edit":return BX.message("DISK_JS_SHARING_LABEL_RIGHT_EDIT");case"disk_access_full":return BX.message("DISK_JS_SHARING_LABEL_RIGHT_FULL");default:return"error"}},appendNewShared(e){const s=e.readOnly;const a=e.maxTaskName||"disk_access_full";const o=e.destFormName;const i=e.item.id;const n=e.item.name;const r=e.item.avatar;const d=e.type;const l=e.right||"disk_access_read";t[i]={item:e.item,type:e.type,right:l};function c(e,t){let s;let a;switch(e){case"disk_access_read":s=2;break;case"disk_access_add":s=3;break;case"disk_access_edit":s=4;break;case"disk_access_full":s=5;break;default:return 0}switch(t){case"disk_access_read":a=2;break;case"disk_access_add":a=3;break;case"disk_access_edit":a=4;break;case"disk_access_full":a=5;break;default:return 0}if(s==a){return 0}return s>a?1:-1}BX("bx-disk-popup-shared-people-list").appendChild(BX.create("tr",{attrs:{"data-dest-id":i},children:[BX.create("td",{props:{className:"bx-disk-popup-shared-people-list-col1"},children:[BX.create("a",{props:{className:"bx-disk-filepage-used-people-link"},children:[BX.create("span",{props:{className:`bx-disk-filepage-used-people-avatar ${d=="users"?"":" group"}`},style:{backgroundImage:r?`url("${encodeURI(r)}")`:null}}),BX.util.htmlspecialchars(n)]})]}),BX.create("td",{props:{className:"bx-disk-popup-shared-people-list-col2"},children:[BX.create(s?"span":"a",{props:{className:s?"bx-disk-filepage-used-people-permission-read-only":"bx-disk-filepage-used-people-permission"},style:{cursor:s?"":"pointer"},text:this.getRightLabelByTaskName(l),events:{click:BX.delegate((function(e){if(s){return BX.PreventDefault(e)}const o=e.target||e.srcElement;BX.PopupMenu.show("disk_open_menu_with_rights",BX(o),[c(a,"disk_access_read")>=0?{text:BX.message("DISK_JS_SHARING_LABEL_RIGHT_READ"),href:"#",onclick:BX.delegate((function(e){BX.PopupMenu.destroy("disk_open_menu_with_rights");BX.adjust(o,{text:this.getRightLabelByTaskName("disk_access_read")});BX.onCustomEvent("onChangeRightOfSharing",[i,"disk_access_read"]);t[i].right="disk_access_read";return BX.PreventDefault(e)}),this)}:null,c(a,"disk_access_add")>=0?{text:BX.message("DISK_JS_SHARING_LABEL_RIGHT_ADD"),href:"#",onclick:BX.delegate((function(e){BX.PopupMenu.destroy("disk_open_menu_with_rights");BX.adjust(o,{text:this.getRightLabelByTaskName("disk_access_add")});BX.onCustomEvent("onChangeRightOfSharing",[i,"disk_access_add"]);t[i].right="disk_access_add";return BX.PreventDefault(e)}),this)}:null,c(a,"disk_access_edit")>=0?{text:BX.message("DISK_JS_SHARING_LABEL_RIGHT_EDIT"),href:"#",onclick:BX.delegate((function(e){BX.PopupMenu.destroy("disk_open_menu_with_rights");BX.adjust(o,{text:this.getRightLabelByTaskName("disk_access_edit")});BX.onCustomEvent("onChangeRightOfSharing",[i,"disk_access_edit"]);t[i].right="disk_access_edit";return BX.PreventDefault(e)}),this)}:null,c(a,"disk_access_full")>=0?{text:BX.message("DISK_JS_SHARING_LABEL_RIGHT_FULL"),href:"#",onclick:BX.delegate((function(e){BX.PopupMenu.destroy("disk_open_menu_with_rights");BX.adjust(o,{text:this.getRightLabelByTaskName("disk_access_full")});BX.onCustomEvent("onChangeRightOfSharing",[i,"disk_access_full"]);t[i].right="disk_access_full";return BX.PreventDefault(e)}),this)}:null],{angle:{position:"top",offset:45},autoHide:true,overlay:{opacity:.01},events:{onPopupClose(){BX.PopupMenu.destroy("disk_open_menu_with_rights")}}})}),this)}})]}),BX.create("td",{props:{className:"bx-disk-popup-shared-people-list-col3 tar"},children:[s?null:BX.create("span",{props:{className:"bx-disk-filepage-used-people-del"},events:{click:BX.delegate((e=>{BX.SocNetLogDestination.deleteItem(i,d,o);const t=e.target||e.srcElement;BX.remove(t.parentNode.parentNode)}),this)}})]})]}))},openPopupMenuWithRights(e,t){const a=[];let o;const i=e.target||e.srcElement;for(const e in s){if(!s.hasOwnProperty(e)){continue}o=BX.clone(s[e],true);a.push({task:o,text:o.TITLE,href:"#",onclick(e,s){BX.adjust(i,{text:s.task.TITLE});BX.onCustomEvent("onChangeRight",[t,s.task]);BX.onCustomEvent("onChangeSystemRight",[t,s.task]);BX.PopupMenu.destroy("disk_open_menu_with_rights");return BX.PreventDefault(e)}})}BX.PopupMenu.show("disk_open_menu_with_rights",BX(i),a,{angle:{position:"top",offset:45},autoHide:true,overlay:{opacity:.01},events:{onPopupClose(){BX.PopupMenu.destroy("disk_open_menu_with_rights")}}})},setModuleTasks(e){s=e},getFirstModuleTask(){if(this.isEmptyObject(s)){return{}}for(const e in s){if(s.hasOwnProperty(e)&&typeof e!=="function"){return s[e];break}}return{}},appendRight(e){const t=e.readOnly;const a=e.detachOnly||false;const o=e.destFormName;const i=e.item.id;const n=e.item.name;const r=e.item.avatar;const d=e.type;let l=e.right||{};if(!l.title&&l.id){l.title=s[l.id].TITLE}else if(!l.title){const e=this.getFirstModuleTask();l={id:e.ID,title:e.TITLE};BX.onCustomEvent("onChangeRight",[i,e])}const c=l.title;BX("bx-disk-popup-shared-people-list").appendChild(BX.create("tr",{attrs:{"data-dest-id":i},children:[BX.create("td",{props:{className:"bx-disk-popup-shared-people-list-col1"},children:[BX.create("a",{props:{className:"bx-disk-filepage-used-people-link"},children:[BX.create("span",{props:{className:`bx-disk-filepage-used-people-avatar ${d=="users"?"":" group"}`},style:{backgroundImage:r?`url("${encodeURI(r)}")`:null}}),BX.util.htmlspecialchars(n)]})]}),BX.create("td",{props:{className:"bx-disk-popup-shared-people-list-col2"},children:[BX.create("a",{props:{className:"bx-disk-filepage-used-people-permission"},style:{cursor:"pointer"},text:c,events:{click:BX.delegate((function(e){BX.PreventDefault(e);if(a){return}this.openPopupMenuWithRights(e,i)}),this)}})]}),BX.create("td",{props:{className:"bx-disk-popup-shared-people-list-col3 tar"},children:[!t||a?BX.create("span",{props:{className:"bx-disk-filepage-used-people-del"},events:{click:BX.delegate((e=>{BX.onCustomEvent("onDetachRight",[i]);if(!a){BX.SocNetLogDestination.deleteItem(i,d,o)}const t=e.target||e.srcElement;BX.remove(t.parentNode.parentNode)}),this)}}):null]})]}))},appendSystemRight(e){const t=e.destFormName;const a=e.isBitrix24||false;const o=e.item.id;const i=e.item.name;const n=e.item.avatar;const r=e.type;let d=e.right||{};const l=e.readOnly;if(a&&o&&o!="G2"&&o.search("G")==0){return}if(!d.title&&d.id){d.title=s[d.id].TITLE}else if(!d.title){const e=this.getFirstModuleTask();d={id:e.ID,title:e.TITLE};BX.onCustomEvent("onChangeSystemRight",[o,e])}const c=d.title;BX("bx-disk-popup-shared-people-list").appendChild(BX.create("tr",{attrs:{"data-dest-id":o},children:[BX.create("td",{props:{className:"bx-disk-popup-shared-people-list-col1"},children:[BX.create("a",{props:{className:"bx-disk-filepage-used-people-link"},children:[BX.create("span",{props:{className:`bx-disk-filepage-used-people-avatar ${r=="users"?"":" group"}`},style:{backgroundImage:n?`url("${encodeURI(n)}")`:null}}),BX.util.htmlspecialchars(i)]})]}),BX.create("td",{props:{className:"bx-disk-popup-shared-people-list-col2"},children:[l?BX.create("span",{props:{className:"bx-disk-filepage-used-people-permission-read-only"},text:c}):BX.create("a",{props:{className:"bx-disk-filepage-used-people-permission"},text:c,events:{click:BX.delegate((function(e){BX.PreventDefault(e);this.openPopupMenuWithRights(e,o)}),this)}})]}),BX.create("td",{props:{className:"bx-disk-popup-shared-people-list-col3 tar"},children:[l?null:BX.create("span",{props:{className:"bx-disk-filepage-used-people-del"},events:{click:BX.delegate((e=>{BX.onCustomEvent("onDetachSystemRight",[o]);const t=e.target||e.srcElement;BX.remove(t.parentNode.parentNode)}),this)}})]})]}))},showSharingDetailWithoutEdit(e){e=e||{};const t=e.object.id;const s=e.ajaxUrl;BX.Disk.modalWindowLoader(BX.Disk.addToLinkParam(s,"action","showSharingDetail"),{id:`folder_list_sharing_detail_object_${t}`,responseType:"json",postData:{objectId:t},afterSuccessLoad:BX.delegate((function(e){if(e.status!="success"){e.errors=e.errors||[{}];BX.Disk.showModalWithStatusAction({status:"error",message:e.errors.pop().message})}const t={name:e.owner.name,avatar:e.owner.avatar,link:e.owner.link};if(e.unifiedLink){const t=e.unifiedLink.availableAccessLevels.find((t=>t.value===e.unifiedLink.currentAccessLevel));const a=BX.create("span",{props:{className:"bx-disk-filepage-used-people-permission-read-only"},text:t.name});var s=BX.create("table",{props:{id:"bx-disk-popup-shared-universal-list",className:"bx-disk-popup-shared-people-list"},children:[BX.create("thead",{children:[BX.create("tr",{children:[BX.create("td",{props:{className:"bx-disk-popup-shared-people-list-head-col1"}}),BX.create("td",{props:{className:"bx-disk-popup-shared-people-list-head-col2"},text:BX.message("DISK_JS_SHARING_LABEL_NAME_RIGHTS")}),BX.create("td",{props:{className:"bx-disk-popup-shared-people-list-head-col3"}})]}),BX.create("tr",{children:[BX.create("td",{props:{className:"bx-disk-popup-shared-people-list-head-col1"},children:[BX.create("a",{props:{className:"bx-disk-filepage-used-people-link"},children:[BX.create("span",{props:{className:"bx-disk-filepage-used-people-avatar link",style:"--ui-icon-set__icon-size: 15px;"}}),BX.create("span",{text:BX.message("DISK_JS_SHARING_UNIFIED_RIGHT_USERS")})]})]}),BX.create("td",{props:{className:"bx-disk-popup-shared-people-list-head-col2"},children:[a]}),BX.create("td",{props:{className:"bx-disk-popup-shared-people-list-head-col3"}})]})]})]})}BX.Disk.modalWindow({modalId:"bx-disk-detail-sharing-folder",title:BX.message("DISK_JS_SHARING_LABEL_TITLE_MODAL_3"),contentClassName:"",contentStyle:{},events:{onAfterPopupShow:BX.delegate((function(){for(const t in e.members){if(!e.members.hasOwnProperty(t)){continue}BX.Disk.appendNewShared({destFormName:this.destFormName,readOnly:true,item:{id:e.members[t].entityId,name:e.members[t].name,avatar:e.members[t].avatar},type:e.members[t].type,right:e.members[t].right})}}),this),onPopupClose(){this.destroy()}},content:[BX.create("div",{props:{className:"bx-disk-popup-content"},children:[BX.create("table",{props:{className:"bx-disk-popup-shared-people-list"},children:[BX.create("thead",{html:"<tr>"+`<td class="bx-disk-popup-shared-people-list-head-col1">${BX.message("DISK_JS_SHARING_LABEL_OWNER")}</td>`+"</tr>"}),BX.create("tr",{html:"<tr>"+`<td class="bx-disk-popup-shared-people-list-col1" style="border-bottom: none;"><a class="bx-disk-filepage-used-people-link" href="${t.link}"><span class="bx-disk-filepage-used-people-avatar" style="background-image: url('${encodeURI(t.avatar)}');"></span>${BX.util.htmlspecialchars(t.name)}</a></td>`+"</tr>"})]}),s,BX.create("table",{props:{id:"bx-disk-popup-shared-people-list",className:"bx-disk-popup-shared-people-list"},children:[BX.create("thead",{html:"<tr>"+`<td class="bx-disk-popup-shared-people-list-head-col1">${BX.message("DISK_JS_SHARING_LABEL_NAME_RIGHTS_USER")}</td>`+`<td class="bx-disk-popup-shared-people-list-head-col2">${BX.message("DISK_JS_SHARING_LABEL_NAME_RIGHTS")}</td>`+'<td class="bx-disk-popup-shared-people-list-head-col3"></td>'+"</tr>"})]}),BX.create("div",{html:'<span class="feed-add-destination-input-box" id="feed-add-post-destination-input-box">'+'<input autocomplete="off" type="text" value="" class="feed-add-destination-inp" id="feed-add-post-destination-input"/>'+"</span>"})]})],buttons:[new BX.PopupWindowButton({text:BX.message("DISK_JS_BTN_CLOSE"),events:{click(){BX.PopupWindowManager.getCurrentPopup().close()}}})]})}),this)})}})})()}
//# sourceMappingURL=c_disk.map.js