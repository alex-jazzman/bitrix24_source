{"version":3,"file":"disk.sharing-legacy-popup.bundle.js","sources":["../src/legacy-popup.js","../src/sharing-control-type.js"],"sourcesContent":["import { Text, Tag, Loc, Event } from 'main.core';\nimport { SaveButton } from 'ui.buttons';\n\nexport default class LegacyPopup\n{\n\tuserBoxNode: HTMLElement = null;\n\tisChangedRights: boolean = false;\n\tstorageNewRights: Object = {};\n\toriginalRights: Object = {};\n\tdetachedRights: Object = {};\n\tmoduleTasks: Object = {};\n\n\tentityToNewShared: Object = {};\n\tloadedReadOnlyEntityToNewShared: Object = {};\n\tentityToNewSharedMaxTaskName: string = '';\n\tajaxUrl: string = '/bitrix/components/bitrix/disk.folder.list/ajax.php';\n\tdestFormName: string = 'folder-list-destFormName';\n\n\tconstructor()\n\t{}\n\n\tshowSharingDetailWithChangeRights(params)\n\t{\n\t\tthis.entityToNewShared = {};\n\t\tthis.loadedReadOnlyEntityToNewShared = {};\n\n\t\tparams = params || {};\n\t\tconst objectId = params.object.id;\n\n\t\tBX.Disk.modalWindowLoader(\n\t\t\tBX.Disk.addToLinkParam(this.ajaxUrl, 'action', 'showSharingDetailChangeRights'),\n\t\t\t{\n\t\t\t\tid: `folder_list_sharing_detail_object_${objectId}`,\n\t\t\t\tresponseType: 'json',\n\t\t\t\tpostData: {\n\t\t\t\t\tobjectId,\n\t\t\t\t},\n\t\t\t\tafterSuccessLoad: (response) => {\n\t\t\t\t\tif (response.status !== 'success')\n\t\t\t\t\t{\n\t\t\t\t\t\tresponse.errors = response.errors || [{}];\n\t\t\t\t\t\tBX.Disk.showModalWithStatusAction({\n\t\t\t\t\t\t\tstatus: 'error',\n\t\t\t\t\t\t\tmessage: response.errors.pop().message,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (response.unifiedLink)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst accessLevel = response.unifiedLink.availableAccessLevels.find((accessLevel) => {\n\t\t\t\t\t\t\treturn accessLevel.value === response.unifiedLink.currentAccessLevel;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst accessLevelNode = Tag.render`<span class=\"bx-disk-filepage-used-people-permission\">${accessLevel.name}</span>`;\n\n\t\t\t\t\t\tEvent.bind(accessLevelNode, 'click', (event) => {\n\t\t\t\t\t\t\tconst menuId = 'access-level-menu';\n\t\t\t\t\t\t\tconst menuItems = response.unifiedLink.availableAccessLevels.map((accessLevel) => {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tid: accessLevel.value,\n\t\t\t\t\t\t\t\t\ttext: accessLevel.name,\n\t\t\t\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\t\t\t\taccessLevelNode.textContent = accessLevel.name;\n\t\t\t\t\t\t\t\t\t\tif (this.entityToNewShared.unifiedLink.currentAccessLevel !== accessLevel.value)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tthis.entityToNewShared.unifiedLink.newAccessLevel = accessLevel.value;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tBX.PopupMenu.destroy(menuId);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tBX.PopupMenu.show(menuId, event.target, menuItems, {\n\t\t\t\t\t\t\t\tautoHide: true,\n\t\t\t\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\t\t\t\toffsetLeft: 0,\n\t\t\t\t\t\t\t\tangle: {\n\t\t\t\t\t\t\t\t\tposition: 'top',\n\t\t\t\t\t\t\t\t\toffset: 45,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\toverlay: {\n\t\t\t\t\t\t\t\t\topacity: 0.01,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\tonPopupClose() {\n\t\t\t\t\t\t\t\t\t\tBX.PopupMenu.destroy(menuId);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tvar unifiedLinkElement = Tag.render`\n\t\t\t\t\t\t\t<table class=\"bx-disk-popup-shared-people-list\" id=\"bx-disk-popup-shared-universal-list\">\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td class=\"bx-disk-popup-shared-people-list-head-col1\"></td>\n\t\t\t\t\t\t\t\t\t<td class=\"bx-disk-popup-shared-people-list-head-col2\">${Loc.getMessage('JS_DISK_SHARING_LEGACY_POPUP_SHARING_LABEL_NAME_RIGHTS')}</td>\n\t\t\t\t\t\t\t\t\t<td class=\"bx-disk-popup-shared-people-list-head-col3\"></td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td class=\"bx-disk-popup-shared-people-list-head-col1\">\n\t\t\t\t\t\t\t\t\t\t<span href=\"\" class=\"bx-disk-filepage-used-people-link\">\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"bx-disk-filepage-used-people-avatar link\" style=\"--ui-icon-set__icon-size: 15px;\"></span>\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('JS_DISK_SHARING_LEGACY_POPUP_UNIFIED_RIGHT_USERS')}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td class=\"bx-disk-popup-shared-people-list-head-col2\">\n\t\t\t\t\t\t\t\t\t\t${accessLevelNode}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td class=\"bx-disk-popup-shared-people-list-head-col3\"></td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t`;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst objectOwner = {\n\t\t\t\t\t\tname: response.owner.name,\n\t\t\t\t\t\tavatar: response.owner.avatar,\n\t\t\t\t\t\tlink: response.owner.link,\n\t\t\t\t\t};\n\n\t\t\t\t\tBX.Disk.modalWindow({\n\t\t\t\t\t\tmodalId: 'bx-disk-detail-sharing-folder-change-right',\n\t\t\t\t\t\ttitle: BX.message('JS_DISK_SHARING_LEGACY_POPUP_TITLE_MODAL_3'),\n\t\t\t\t\t\tcontentClassName: '',\n\t\t\t\t\t\tcontentStyle: {},\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonAfterPopupShow: () => {\n\t\t\t\t\t\t\t\tBX.addCustomEvent('onChangeRightOfSharing', this.onChangeRightOfSharing.bind(this));\n\n\t\t\t\t\t\t\t\tfor (const i in response.members)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (!response.members.hasOwnProperty(i))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tthis.entityToNewShared[response.members[i].entityId] = {\n\t\t\t\t\t\t\t\t\t\titem: {\n\t\t\t\t\t\t\t\t\t\t\tid: response.members[i].entityId,\n\t\t\t\t\t\t\t\t\t\t\tname: response.members[i].name,\n\t\t\t\t\t\t\t\t\t\t\tavatar: response.members[i].avatar,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\ttype: response.members[i].type,\n\t\t\t\t\t\t\t\t\t\tright: response.members[i].right,\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (response.unifiedLink)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.entityToNewShared.unifiedLink = response.unifiedLink;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tBX.SocNetLogDestination.init({\n\t\t\t\t\t\t\t\t\tname: this.destFormName,\n\t\t\t\t\t\t\t\t\tsearchInput: BX('feed-add-post-destination-input'),\n\t\t\t\t\t\t\t\t\tbindMainPopup: {\n\t\t\t\t\t\t\t\t\t\tnode: BX('feed-add-post-destination-container'),\n\t\t\t\t\t\t\t\t\t\toffsetTop: '5px',\n\t\t\t\t\t\t\t\t\t\toffsetLeft: '15px',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tbindSearchPopup: {\n\t\t\t\t\t\t\t\t\t\tnode: BX('feed-add-post-destination-container'),\n\t\t\t\t\t\t\t\t\t\toffsetTop: '5px',\n\t\t\t\t\t\t\t\t\t\toffsetLeft: '15px',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tcallback: {\n\t\t\t\t\t\t\t\t\t\tselect: this.onSelectDestination.bind(this),\n\t\t\t\t\t\t\t\t\t\tunSelect: this.onUnSelectDestination.bind(this),\n\t\t\t\t\t\t\t\t\t\topenDialog: this.onOpenDialogDestination.bind(this),\n\t\t\t\t\t\t\t\t\t\tcloseDialog: this.onCloseDialogDestination.bind(this),\n\t\t\t\t\t\t\t\t\t\topenSearch: this.onOpenSearchDestination.bind(this),\n\t\t\t\t\t\t\t\t\t\tcloseSearch: this.onCloseSearchDestination.bind(this),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\titems: response.destination.items,\n\t\t\t\t\t\t\t\t\titemsLast: response.destination.itemsLast,\n\t\t\t\t\t\t\t\t\titemsSelected: response.destination.itemsSelected,\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tconst BXSocNetLogDestinationFormName = this.destFormName;\n\t\t\t\t\t\t\t\tBX.bind(BX('feed-add-post-destination-container'), 'click', (e) => {\n\t\t\t\t\t\t\t\t\tBX.SocNetLogDestination.openDialog(BXSocNetLogDestinationFormName);\n\t\t\t\t\t\t\t\t\tBX.PreventDefault(e);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tBX.bind(BX('feed-add-post-destination-input'), 'keyup', this.onKeyUpDestination.bind(this));\n\t\t\t\t\t\t\t\tBX.bind(BX('feed-add-post-destination-input'), 'keydown', this.onKeyDownDestination.bind(this));\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\t\t\tif (BX.SocNetLogDestination && BX.SocNetLogDestination.isOpenDialog())\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tBX.SocNetLogDestination.closeDialog();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tBX.removeCustomEvent('onChangeRightOfSharing', this.onChangeRightOfSharing.bind(this));\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcontent: [\n\t\t\t\t\t\t\tBX.create('div', {\n\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\tclassName: 'bx-disk-popup-content',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\tBX.create('table', {\n\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'bx-disk-popup-shared-people-list',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t\t\tBX.create('thead', {\n\t\t\t\t\t\t\t\t\t\t\t\thtml: '<tr>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ `<td class=\"bx-disk-popup-shared-people-list-head-col1\">${BX.message('JS_DISK_SHARING_LEGACY_POPUP_LABEL_OWNER')}</td>`\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '</tr>',\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tBX.create('tr', {\n\t\t\t\t\t\t\t\t\t\t\t\thtml: '<tr>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ `<td class=\"bx-disk-popup-shared-people-list-col1\" style=\"border-bottom: none;\"><a class=\"bx-disk-filepage-used-people-link\" href=\"${objectOwner.link}\"><span class=\"bx-disk-filepage-used-people-avatar\" style=\"background-image: url('${encodeURI(objectOwner.avatar)}');\"></span>${Text.encode(objectOwner.name)}</a></td>`\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '</tr>',\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\tunifiedLinkElement,\n\t\t\t\t\t\t\t\t\tBX.create('table', {\n\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\tid: 'bx-disk-popup-shared-people-list',\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'bx-disk-popup-shared-people-list',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t\t\tBX.create('thead', {\n\t\t\t\t\t\t\t\t\t\t\t\thtml: '<tr>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ `<td class=\"bx-disk-popup-shared-people-list-head-col1\">${BX.message('JS_DISK_SHARING_LEGACY_POPUP_LABEL_NAME_RIGHTS_USER')}</td>`\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ `<td class=\"bx-disk-popup-shared-people-list-head-col2\">${BX.message('JS_DISK_SHARING_LEGACY_POPUP_LABEL_NAME_RIGHTS')}</td>`\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '<td class=\"bx-disk-popup-shared-people-list-head-col3\"></td>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '</tr>',\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\tBX.create('div', {\n\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\tid: 'feed-add-post-destination-container',\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'feed-add-post-destination-wrap',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t\t\tBX.create('span', {\n\t\t\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'feed-add-post-destination-item',\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tBX.create('span', {\n\t\t\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tid: 'feed-add-post-destination-input-box',\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'feed-add-destination-input-box',\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: 'transparent',\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t\t\t\t\tBX.create('input', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: 'feed-add-post-destination-input',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'feed-add-destination-inp',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tBX.create('a', {\n\t\t\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\t\t\thref: '#',\n\t\t\t\t\t\t\t\t\t\t\t\t\tid: 'bx-destination-tag',\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'feed-add-destination-link',\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: 'transparent',\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\ttext: BX.message('JS_DISK_SHARING_LEGACY_POPUP_LABEL_NAME_ADD_RIGHTS_USER'),\n\t\t\t\t\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tclick: () => {},\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t],\n\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\tnew SaveButton({\n\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\t\t\tBX.Disk.ajax({\n\t\t\t\t\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\t\t\t\t\turl: BX.Disk.addToLinkParam(this.ajaxUrl, 'action', 'changeSharingAndRights'),\n\t\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\t\tobjectId,\n\t\t\t\t\t\t\t\t\t\t\t\tentityToNewShared: this.entityToNewShared,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tonsuccess: (response) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (!response)\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tlet name = params.object.name.split('.');\n\t\t\t\t\t\t\t\t\t\t\t\tconst ext = name.pop().toLowerCase();\n\t\t\t\t\t\t\t\t\t\t\t\tname = name.join('.');\n\t\t\t\t\t\t\t\t\t\t\t\tif (name && ext === 'board')\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tresponse.message = BX.message('JS_DISK_SHARING_LEGACY_POPUP_OK_BOARD_SHARE_MODIFIED').replace('#FILE#', name);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tresponse.message = BX.message('JS_DISK_SHARING_LEGACY_POPUP_OK_FILE_SHARE_MODIFIED').replace('#FILE#', params.object.name);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tBX.Disk.showModalWithStatusAction(response);\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\tBX.PopupWindowManager.getCurrentPopup().close();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tnew BX.UI.CloseButton({\n\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\t\t\t\tBX.PopupWindowManager.getCurrentPopup().close();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t}\n\n\tshowSharingDetailWithSharing(params)\n\t{\n\t\tthis.entityToNewShared = {};\n\t\tthis.loadedReadOnlyEntityToNewShared = {};\n\n\t\tparams = params || {};\n\t\tconst objectId = params.object.id;\n\n\t\tBX.Disk.modalWindowLoader(\n\t\t\tBX.Disk.addToLinkParam(this.ajaxUrl, 'action', 'showSharingDetailAppendSharing'),\n\t\t\t{\n\t\t\t\tid: `folder_list_sharing_detail_object_${objectId}`,\n\t\t\t\tresponseType: 'json',\n\t\t\t\tpostData: {\n\t\t\t\t\tobjectId,\n\t\t\t\t},\n\t\t\t\tafterSuccessLoad: (response) => {\n\t\t\t\t\tif (response.status !== 'success')\n\t\t\t\t\t{\n\t\t\t\t\t\tresponse.errors = response.errors || [{}];\n\t\t\t\t\t\tBX.Disk.showModalWithStatusAction({\n\t\t\t\t\t\t\tstatus: 'error',\n\t\t\t\t\t\t\tmessage: response.errors.pop().message,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tconst objectOwner = {\n\t\t\t\t\t\tname: response.owner.name,\n\t\t\t\t\t\tavatar: response.owner.avatar,\n\t\t\t\t\t\tlink: response.owner.link,\n\t\t\t\t\t};\n\t\t\t\t\tthis.entityToNewSharedMaxTaskName = response.owner.maxTaskName;\n\n\t\t\t\t\tBX.Disk.modalWindow({\n\t\t\t\t\t\tmodalId: 'bx-disk-detail-sharing-folder-change-right',\n\t\t\t\t\t\ttitle: BX.message('JS_DISK_SHARING_LEGACY_POPUP_TITLE_MODAL_3'),\n\t\t\t\t\t\tcontentClassName: '',\n\t\t\t\t\t\tcontentStyle: {},\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonAfterPopupShow: () => {\n\t\t\t\t\t\t\t\tBX.addCustomEvent('onChangeRightOfSharing', this.onChangeRightOfSharing.bind(this));\n\n\t\t\t\t\t\t\t\tfor (const i in response.members)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (!response.members.hasOwnProperty(i))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tthis.entityToNewShared[response.members[i].entityId] = {\n\t\t\t\t\t\t\t\t\t\titem: {\n\t\t\t\t\t\t\t\t\t\t\tid: response.members[i].entityId,\n\t\t\t\t\t\t\t\t\t\t\tname: response.members[i].name,\n\t\t\t\t\t\t\t\t\t\t\tavatar: response.members[i].avatar,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\ttype: response.members[i].type,\n\t\t\t\t\t\t\t\t\t\tright: response.members[i].right,\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.loadedReadOnlyEntityToNewShared = BX.clone(this.entityToNewShared, true);\n\n\t\t\t\t\t\t\t\tBX.SocNetLogDestination.init({\n\t\t\t\t\t\t\t\t\tname: this.destFormName,\n\t\t\t\t\t\t\t\t\tsearchInput: BX('feed-add-post-destination-input'),\n\t\t\t\t\t\t\t\t\tbindMainPopup: { node: BX('feed-add-post-destination-container'), offsetTop: '5px', offsetLeft: '15px' },\n\t\t\t\t\t\t\t\t\tbindSearchPopup: { node: BX('feed-add-post-destination-container'), offsetTop: '5px', offsetLeft: '15px' },\n\t\t\t\t\t\t\t\t\tcallback: {\n\t\t\t\t\t\t\t\t\t\tselect: this.onSelectDestination.bind(this),\n\t\t\t\t\t\t\t\t\t\tunSelect: this.onUnSelectDestination.bind(this),\n\t\t\t\t\t\t\t\t\t\topenDialog: this.onOpenDialogDestination.bind(this),\n\t\t\t\t\t\t\t\t\t\tcloseDialog: this.onCloseDialogDestination.bind(this),\n\t\t\t\t\t\t\t\t\t\topenSearch: this.onOpenSearchDestination.bind(this),\n\t\t\t\t\t\t\t\t\t\tcloseSearch: this.onCloseSearchDestination.bind(this),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\titems: response.destination.items,\n\t\t\t\t\t\t\t\t\titemsLast: response.destination.itemsLast,\n\t\t\t\t\t\t\t\t\titemsSelected: response.destination.itemsSelected,\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tconst BXSocNetLogDestinationFormName = this.destFormName;\n\t\t\t\t\t\t\t\tBX.bind(BX('feed-add-post-destination-container'), 'click', (e) =>\n\t\t\t\t\t\t\t\t{ BX.SocNetLogDestination.openDialog(BXSocNetLogDestinationFormName); BX.PreventDefault(e);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tBX.bind(BX('feed-add-post-destination-input'), 'keyup', this.onKeyUpDestination.bind(this));\n\t\t\t\t\t\t\t\tBX.bind(BX('feed-add-post-destination-input'), 'keydown', this.onKeyDownDestination.bind(this));\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\t\t\tif (BX.SocNetLogDestination && BX.SocNetLogDestination.isOpenDialog())\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tBX.SocNetLogDestination.closeDialog();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tBX.removeCustomEvent('onChangeRightOfSharing', this.onChangeRightOfSharing.bind(this));\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcontent: [\n\t\t\t\t\t\t\tBX.create('div', {\n\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\tclassName: 'bx-disk-popup-content',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\tBX.create('table', {\n\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'bx-disk-popup-shared-people-list',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t\t\tBX.create('thead', {\n\t\t\t\t\t\t\t\t\t\t\t\thtml: '<tr>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ `<td class=\"bx-disk-popup-shared-people-list-head-col1\">${BX.message('JS_DISK_SHARING_LEGACY_POPUP_LABEL_OWNER')}</td>`\n\t\t\t\t\t\t\t\t\t\t\t\t+ '</tr>',\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tBX.create('tr', {\n\t\t\t\t\t\t\t\t\t\t\t\thtml: '<tr>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ `<td class=\"bx-disk-popup-shared-people-list-col1\" style=\"border-bottom: none;\"><a class=\"bx-disk-filepage-used-people-link\" href=\"${objectOwner.link}\"><span class=\"bx-disk-filepage-used-people-avatar\" style=\"background-image: url('${encodeURI(objectOwner.avatar)}');\"></span>${Text.encode(objectOwner.name)}</a></td>`\n\t\t\t\t\t\t\t\t\t\t\t\t+ '</tr>',\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\tBX.create('table', {\n\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\tid: 'bx-disk-popup-shared-people-list',\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'bx-disk-popup-shared-people-list',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t\t\tBX.create('thead', {\n\t\t\t\t\t\t\t\t\t\t\t\thtml: '<tr>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ `<td class=\"bx-disk-popup-shared-people-list-head-col1\">${BX.message('JS_DISK_SHARING_LEGACY_POPUP_LABEL_NAME_RIGHTS_USER')}</td>`\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ `<td class=\"bx-disk-popup-shared-people-list-head-col2\">${BX.message('JS_DISK_SHARING_LEGACY_POPUP_LABEL_NAME_RIGHTS')}</td>`\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '<td class=\"bx-disk-popup-shared-people-list-head-col3\"></td>'\n\t\t\t\t\t\t\t\t\t\t\t\t+ '</tr>',\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\tBX.create('div', {\n\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\tid: 'feed-add-post-destination-container',\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'feed-add-post-destination-wrap',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t\t\tBX.create('span', {\n\t\t\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'feed-add-post-destination-item',\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tBX.create('span', {\n\t\t\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tid: 'feed-add-post-destination-input-box',\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'feed-add-destination-input-box',\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: 'transparent',\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t\t\t\t\tBX.create('input', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: 'feed-add-post-destination-input',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'feed-add-destination-inp',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tBX.create('a', {\n\t\t\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\t\t\thref: '#',\n\t\t\t\t\t\t\t\t\t\t\t\t\tid: 'bx-destination-tag',\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'feed-add-destination-link',\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: 'transparent',\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\ttext: BX.message('JS_DISK_SHARING_LEGACY_POPUP_LABEL_NAME_ADD_RIGHTS_USER'),\n\t\t\t\t\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tclick: () => {},\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t],\n\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\tnew SaveButton({\n\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\t\t\tBX.Disk.ajax({\n\t\t\t\t\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\t\t\t\t\turl: BX.Disk.addToLinkParam(this.ajaxUrl, 'action', 'appendSharing'),\n\t\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\t\tobjectId,\n\t\t\t\t\t\t\t\t\t\t\t\tentityToNewShared: this.entityToNewShared,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tonsuccess: (response) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (!response)\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tBX.Disk.showModalWithStatusAction(response);\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\tBX.PopupWindowManager.getCurrentPopup().close();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tnew BX.UI.CloseButton({\n\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\t\t\t\tBX.PopupWindowManager.getCurrentPopup().close();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t}\n\n\tshowSharingDetailWithoutEdit(params)\n\t{\n\t\tparams = params || {};\n\n\t\tBX.Disk.showSharingDetailWithoutEdit({\n\t\t\tajaxUrl: '/bitrix/components/bitrix/disk.folder.list/ajax.php',\n\t\t\tobject: params.object,\n\t\t});\n\t}\n\n\tonSelectDestination(item, type, search)\n\t{\n\t\tthis.entityToNewShared[item.id] = this.entityToNewShared[item.id] || {};\n\t\tBX.Disk.appendNewShared({\n\t\t\tmaxTaskName: this.entityToNewSharedMaxTaskName,\n\t\t\treadOnly: Boolean(this.loadedReadOnlyEntityToNewShared[item.id]),\n\t\t\tdestFormName: this.destFormName,\n\t\t\titem,\n\t\t\ttype,\n\t\t\tright: this.entityToNewShared[item.id].right || 'disk_access_edit',\n\t\t});\n\n\t\tthis.entityToNewShared[item.id] = {\n\t\t\titem,\n\t\t\ttype,\n\t\t\tright: this.entityToNewShared[item.id].right || 'disk_access_edit',\n\t\t};\n\t}\n\n\tonUnSelectDestination(item, type, search)\n\t{\n\t\tconst entityId = item.id;\n\n\t\tif (this.loadedReadOnlyEntityToNewShared[entityId])\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tdelete this.entityToNewShared[entityId];\n\n\t\tconst child = BX.findChild(BX('bx-disk-popup-shared-people-list'), { attribute: { 'data-dest-id': `${String(entityId)}` } }, true);\n\t\tif (child)\n\t\t{\n\t\t\tBX.remove(child);\n\t\t}\n\t}\n\n\tonChangeRightOfSharing(entityId, taskName)\n\t{\n\t\tif (this.entityToNewShared[entityId])\n\t\t{\n\t\t\tthis.entityToNewShared[entityId].right = taskName;\n\t\t}\n\t}\n\n\tonOpenDialogDestination()\n\t{\n\t\tBX.style(BX('feed-add-post-destination-input-box'), 'display', 'inline-block');\n\t\tBX.style(BX('bx-destination-tag'), 'display', 'none');\n\t\tBX.focus(BX('feed-add-post-destination-input'));\n\t\tif (BX.SocNetLogDestination.popupWindow)\n\t\t{\n\t\t\tBX.SocNetLogDestination.popupWindow.adjustPosition({ forceTop: true });\n\t\t}\n\t}\n\n\tonCloseDialogDestination()\n\t{\n\t\tconst input = BX('feed-add-post-destination-input');\n\t\tif (!BX.SocNetLogDestination.isOpenSearch() && input && input.value.length <= 0)\n\t\t{\n\t\t\tBX.style(BX('feed-add-post-destination-input-box'), 'display', 'none');\n\t\t\tBX.style(BX('bx-destination-tag'), 'display', 'inline-block');\n\t\t}\n\t}\n\n\tonOpenSearchDestination()\n\t{\n\t\tif (BX.SocNetLogDestination.popupSearchWindow)\n\t\t{\n\t\t\tBX.SocNetLogDestination.popupSearchWindow.adjustPosition({ forceTop: true });\n\t\t}\n\t}\n\n\tonCloseSearchDestination()\n\t{\n\t\tconst input = BX('feed-add-post-destination-input');\n\t\tif (!BX.SocNetLogDestination.isOpenSearch() && input && input.value.length > 0)\n\t\t{\n\t\t\tBX.style(BX('feed-add-post-destination-input-box'), 'display', 'none');\n\t\t\tBX.style(BX('bx-destination-tag'), 'display', 'inline-block');\n\t\t\tBX('feed-add-post-destination-input').value = '';\n\t\t}\n\t}\n\n\tonKeyDownDestination(event)\n\t{\n\t\tconst BXSocNetLogDestinationFormName = this.destFormName;\n\t\tif (event.keyCode == 8 && BX('feed-add-post-destination-input').value.length <= 0)\n\t\t{\n\t\t\tBX.SocNetLogDestination.sendEvent = false;\n\t\t\tBX.SocNetLogDestination.deleteLastItem(BXSocNetLogDestinationFormName);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tonKeyUpDestination(event)\n\t{\n\t\tconst BXSocNetLogDestinationFormName = this.destFormName;\n\t\tif (event.keyCode == 16 || event.keyCode == 17 || event.keyCode == 18 || event.keyCode == 20 || event.keyCode == 244 || event.keyCode == 224 || event.keyCode == 91)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (event.keyCode == 13)\n\t\t{\n\t\t\tBX.SocNetLogDestination.selectFirstSearchItem(BXSocNetLogDestinationFormName);\n\n\t\t\treturn BX.PreventDefault(event);\n\t\t}\n\n\t\tif (event.keyCode == 27)\n\t\t{\n\t\t\tBX('feed-add-post-destination-input').value = '';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.SocNetLogDestination.search(BX('feed-add-post-destination-input').value, true, BXSocNetLogDestinationFormName);\n\t\t}\n\n\t\tif (BX.SocNetLogDestination.sendEvent && BX.SocNetLogDestination.isOpenDialog())\n\t\t{\n\t\t\tBX.SocNetLogDestination.closeDialog();\n\t\t}\n\n\t\tif (event.keyCode == 8)\n\t\t{\n\t\t\tBX.SocNetLogDestination.sendEvent = true;\n\t\t}\n\n\t\treturn BX.PreventDefault(event);\n\t}\n}\n","export default class SharingControlType\n{\n\tstatic WITHOUT_EDIT = 'without-edit';\n\tstatic WITH_CHANGE_RIGHTS = 'with-change-rights';\n\tstatic WITH_SHARING = 'with-sharing';\n\tstatic BLOCKED_BY_FEATURE = 'blocked-by-feature';\n}"],"names":["LegacyPopup","params","entityToNewShared","loadedReadOnlyEntityToNewShared","objectId","object","id","BX","Disk","modalWindowLoader","addToLinkParam","ajaxUrl","responseType","postData","afterSuccessLoad","response","status","errors","showModalWithStatusAction","message","pop","unifiedLink","accessLevel","availableAccessLevels","find","value","currentAccessLevel","accessLevelNode","Tag","render","name","Event","bind","event","menuId","menuItems","map","text","onclick","textContent","newAccessLevel","PopupMenu","destroy","show","target","autoHide","offsetTop","offsetLeft","angle","position","offset","overlay","opacity","events","onPopupClose","unifiedLinkElement","Loc","getMessage","objectOwner","owner","avatar","link","modalWindow","modalId","title","contentClassName","contentStyle","onAfterPopupShow","addCustomEvent","onChangeRightOfSharing","i","members","hasOwnProperty","entityId","item","type","right","SocNetLogDestination","init","destFormName","searchInput","bindMainPopup","node","bindSearchPopup","callback","select","onSelectDestination","unSelect","onUnSelectDestination","openDialog","onOpenDialogDestination","closeDialog","onCloseDialogDestination","openSearch","onOpenSearchDestination","closeSearch","onCloseSearchDestination","items","destination","itemsLast","itemsSelected","BXSocNetLogDestinationFormName","e","PreventDefault","onKeyUpDestination","onKeyDownDestination","isOpenDialog","removeCustomEvent","content","create","props","className","children","html","encodeURI","Text","encode","style","background","href","click","buttons","SaveButton","ajax","method","dataType","url","data","onsuccess","split","ext","toLowerCase","join","replace","PopupWindowManager","getCurrentPopup","close","UI","CloseButton","entityToNewSharedMaxTaskName","maxTaskName","clone","showSharingDetailWithoutEdit","search","appendNewShared","readOnly","Boolean","child","findChild","attribute","String","remove","taskName","focus","popupWindow","adjustPosition","forceTop","input","isOpenSearch","length","popupSearchWindow","keyCode","sendEvent","deleteLastItem","selectFirstSearchItem","SharingControlType"],"mappings":"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"}