this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,t,a,s,o,c,i){"use strict";const n="notes";const r=Object.freeze({private:"chatType_private",multiuser:"chatType_multiuser"});const l=Object.freeze({openChat:"open_chat",createNewChat:"create_new_chat",audioUse:"audio_use",openTab:"open_tab",popupOpen:"popup_open",openPrices:"open_prices",openSettings:"open_settings",clickCreateNew:"click_create_new",openExisting:"open_existing",typeMessage:"type_message",pinChat:"pin_chat",clickDelete:"click_delete",clickShare:"click_share",cancelDelete:"cancel_delete",delete:"delete",view:"view",click:"click",clickEdit:"click_edit",submitEdit:"submit_edit",clickCallButton:"click_call_button",clickStartConf:"click_start_conf",clickJoin:"click_join",clickAddUser:"click_add_user",openCalendar:"open_calendar",openTasks:"open_tasks",openFiles:"open_files",clickCreatePoll:"click_create_poll",clickCreateTask:"click_create_task",clickCreateEvent:"click_create_event",clickAttach:"click_attach",downloadFile:"download_file",saveToDisk:"save_to_disk",pinMessage:"pin_message",unpinMessage:"unpin_message",pinnedMessageLimitException:"pinned_message_limit_exception",startSearch:"start_search",selectRecipient:"select_recipient",selectUser:"select_user",openCreateMenu:"open_create_menu",clickUpdate:"click_update",clickMoreInformation:"click_more_information",goToWeb:"go_to_web",copyMessage:"copy_message",clickReply:"click_reply",copyFile:"copy_file",copyLink:"copy_link",addToFav:"add_to_fav",seeLater:"see_later",select:"select",addFeedback:"add_feedback"});const p=Object.freeze({ai:"ai",checkin:"checkin",im:"im",infoHelper:"InfoHelper",inform:"inform"});const d=Object.freeze({chatOperations:"chat_operations",shift:"shift",messenger:"messenger",chat:"chat",channel:"channel",videoconf:"videoconf",copilot:"copilot",limit:"limit",limitBanner:"limit_banner",toolOff:"tool_off",message:"message",chatPopup:"chat_popup",call:"call",collab:"collab",updateAppPopup:"update_app_popup"});const g=Object.freeze({ai:"ai",chat:"chat",channel:"channel",videoconf:"videoconf",copilot:"copilot",deletedMessage:"deleted_message",limitOfficeChatingHistory:"limit_office_chating_history",privateCall:"private",groupCall:"group",may25DesktopRelease:"may_25_desktop_release"});const h=Object.freeze({copilotTab:"copilot_tab",chat:"chat",chatStart:"chat_start",chatHistory:"chat_history",sidebar:"sidebar",popup:"popup",activeChat:"active_chat",comments:"comments",chatHeader:"chat_header",chatSidebar:"chat_sidebar",chatTextarea:"chat_textarea",editor:"editor",chatWindow:"chat_window",forward:"forward",userAdd:"user_add",chatCreateMenu:"chat_create_menu",chatEmptyState:"chat_empty_state"});const y=Object.freeze({contextMenu:"context_menu",sidebar:"sidebar",chatWindow:"chat_window",messageLink:"message_link",chatSidebar:"chat_sidebar",chatList:"chat_list",window:"window"});const b=Object.freeze({initialBanner:"initial_banner",videocall:"videocall",audiocall:"audiocall",startButton:"start_button",more:"more"});const u=Object.freeze({success:"success",errorTurnedOff:"error_turnedoff"});const v=Object.freeze({collabEmptyState:"collab_empty_state"});const _=Object.freeze({single:"single",multiple:"multiple",selected:"selected"});function m(e){const t=c.Core.getStore().getters["chats/collabs/getByChatId"](e);if(!t){return null}return`collabId_${t.collabId}`}const C=Object.freeze({userIntranet:"user_intranet",userExtranet:"user_extranet",userCollaber:"user_collaber"});function f(){const e=c.Core.getStore().getters["users/get"](c.Core.getUserId(),true);switch(e.type){case a.UserType.user:return C.userIntranet;case a.UserType.extranet:return C.userExtranet;case a.UserType.collaber:return C.userCollaber;default:return C.userIntranet}}function I(e){switch(e){case a.ChatType.channel:case a.ChatType.openChannel:case a.ChatType.comment:case a.ChatType.generalChannel:return d.channel;case a.ChatType.copilot:return d.copilot;case a.ChatType.videoconf:return d.videoconf;case a.ChatType.collab:return d.collab;default:return d.chat}}const S="custom";function P(e){var t;return(t=a.ChatType[e.type])!=null?t:S}function k(e){return c.Core.getUserId().toString()===e}const F={[a.CollabEntityType.tasks]:l.openTasks,[a.CollabEntityType.calendar]:l.openCalendar,[a.CollabEntityType.files]:l.openFiles};class T{onClick(e,t){const s=F[t];if(!s){return}const o=c.Core.getStore().getters["chats/get"](e,true);const n={tool:p.im,category:d.collab,event:s,c_section:h.chatHeader,p2:f(),p5:`chatId_${o.chatId}`};if(o.type===a.ChatType.collab){n.p4=m(o.chatId)}i.sendData(n)}}var B=babelHelpers.classPrivateFieldLooseKey("onClick");class L{constructor(){Object.defineProperty(this,B,{value:w})}onCreateTaskFromSidebarClick(e){babelHelpers.classPrivateFieldLooseBase(this,B)[B]({dialogId:e,event:l.clickCreateTask,section:h.chatSidebar})}onCreateTaskFromTextareaClick(e){babelHelpers.classPrivateFieldLooseBase(this,B)[B]({dialogId:e,event:l.clickCreateTask,section:h.chatTextarea})}onCreateEventFromSidebarClick(e){babelHelpers.classPrivateFieldLooseBase(this,B)[B]({dialogId:e,event:l.clickCreateEvent,section:h.chatSidebar})}onCreateEventFromTextareaClick(e){babelHelpers.classPrivateFieldLooseBase(this,B)[B]({dialogId:e,event:l.clickCreateEvent,section:h.chatTextarea})}onCreateVoteFromTextareaClick(e){babelHelpers.classPrivateFieldLooseBase(this,B)[B]({dialogId:e,event:l.clickCreatePoll,section:h.chatTextarea})}}function w({dialogId:e,event:t,section:s}){const o=c.Core.getStore().getters["chats/get"](e,true);const n={tool:p.im,category:I(o.type),event:t,c_section:s,p1:`chatType_${P(o)}`,p2:f(),p5:`chatId_${o.chatId}`};if(o.type===a.ChatType.collab){n.p4=m(o.chatId)}i.sendData(n)}class D{onClick(e){const t=c.Core.getStore().getters["chats/get"](e);i.sendData({tool:p.im,category:I(t.type),event:l.clickDelete,type:P(t),c_section:h.sidebar,c_sub_section:y.contextMenu,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onCancel(e){const t=c.Core.getStore().getters["chats/get"](e);i.sendData({tool:p.im,category:I(t.type),event:l.cancelDelete,type:P(t),c_section:h.popup,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onConfirm(e){const t=c.Core.getStore().getters["chats/get"](e);i.sendData({tool:p.im,category:I(t.type),event:l.delete,type:P(t),c_section:h.popup,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onChatDeletedNotification(e){const t=c.Core.getStore().getters["chats/get"](e);const a=I(t);i.sendData({tool:p.im,category:d.chatPopup,event:l.view,type:`deleted_${a}`,c_section:h.activeChat,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}}class H{onNotFoundNotification({dialogId:e}){const t=c.Core.getStore().getters["chats/get"](e);if(!t){return}i.sendData({tool:p.im,category:d.chatPopup,event:l.view,type:g.deletedMessage,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onDeletedPostNotification({messageId:e,dialogId:t}){const a=c.Core.getStore().getters["chats/get"](t);const s=c.Core.getStore().getters["messages/comments/getByMessageId"](e);i.sendData({tool:p.im,category:d.chatPopup,event:l.view,type:g.deletedMessage,c_section:h.comments,p1:`chatType_${a.type}`,p4:`parentChatId_${a.chatId}`,p5:`chatId_${s.chatId}`})}}var $=babelHelpers.classPrivateFieldLooseKey("onBannerClick");var O=babelHelpers.classPrivateFieldLooseKey("getSidebarPanelNameForAnalytics");class M{constructor(){Object.defineProperty(this,O,{value:j});Object.defineProperty(this,$,{value:x})}onDialogLimitExceeded({dialogId:e,noMessages:t}){const a=t?h.chatStart:h.chatHistory;const s=c.Core.getStore().getters["chats/get"](e);const o=P(s);const n={tool:p.im,category:d.limitBanner,event:l.view,type:g.limitOfficeChatingHistory,c_section:a,p1:`chatType_${o}`};i.sendData(n)}onSidebarLimitExceeded({dialogId:e,panel:t}){const a=c.Core.getStore().getters["chats/get"](e);const s=P(a);const o={tool:p.im,category:d.limitBanner,event:l.view,type:g.limitOfficeChatingHistory,c_section:h.sidebar,c_element:babelHelpers.classPrivateFieldLooseBase(this,O)[O](t),p1:`chatType_${s}`};i.sendData(o)}onDialogBannerClick({dialogId:e}){const t=h.chatWindow;babelHelpers.classPrivateFieldLooseBase(this,$)[$]({dialogId:e,section:t})}onSidebarBannerClick({dialogId:e,panel:t}){const a=h.sidebar;const s=babelHelpers.classPrivateFieldLooseBase(this,O)[O](t);babelHelpers.classPrivateFieldLooseBase(this,$)[$]({dialogId:e,section:a,element:s})}onGoToContextLimitExceeded({dialogId:e}){const t=h.messageLink;babelHelpers.classPrivateFieldLooseBase(this,$)[$]({dialogId:e,section:t})}}function x({dialogId:e,section:t,element:a}){const s=c.Core.getStore().getters["chats/get"](e);const o=P(s);const n={tool:p.im,category:d.limitBanner,event:l.click,type:g.limitOfficeChatingHistory,c_section:t,p1:`chatType_${o}`};if(a){n.c_element=a}i.sendData(n)}function j(e){switch(e){case a.SidebarDetailBlock.main:return"main";case a.SidebarDetailBlock.file:case a.SidebarDetailBlock.fileUnsorted:case a.SidebarDetailBlock.audio:case a.SidebarDetailBlock.brief:case a.SidebarDetailBlock.document:case a.SidebarDetailBlock.media:return"docs";case a.SidebarDetailBlock.messageSearch:return"message_search";case a.SidebarDetailBlock.favorite:return"favs";case a.SidebarDetailBlock.link:return"links";case a.SidebarDetailBlock.task:return"task";case a.SidebarDetailBlock.meeting:return"event";default:return"unknown"}}const E=Object.freeze({recent:"recent",searchResult:"search_result"});var U=babelHelpers.classPrivateFieldLooseKey("hasSearchedBefore");var R=babelHelpers.classPrivateFieldLooseKey("onSelectUser");var A=babelHelpers.classPrivateFieldLooseKey("onAddUserClick");class W{constructor(){Object.defineProperty(this,A,{value:N});Object.defineProperty(this,R,{value:K});Object.defineProperty(this,U,{writable:true,value:false})}onChatSidebarClick(e){babelHelpers.classPrivateFieldLooseBase(this,A)[A](e,h.chatSidebar)}onChatHeaderClick(e){babelHelpers.classPrivateFieldLooseBase(this,A)[A](e,h.chatHeader)}onStartSearch({dialogId:e}){if(babelHelpers.classPrivateFieldLooseBase(this,U)[U]){return}babelHelpers.classPrivateFieldLooseBase(this,U)[U]=true;const t=c.Core.getStore().getters["chats/get"](e);i.sendData({tool:p.im,category:I(t.type),event:l.startSearch,c_section:h.userAdd,p1:`chatType_${t.type}`,p2:f()})}onClosePopup(){babelHelpers.classPrivateFieldLooseBase(this,U)[U]=false}onSelectUserFromRecent({dialogId:e,position:t}){babelHelpers.classPrivateFieldLooseBase(this,R)[R]({dialogId:e,position:t,source:E.recent})}onSelectUserFromSearchResult({dialogId:e,position:t}){babelHelpers.classPrivateFieldLooseBase(this,R)[R]({dialogId:e,position:t,source:E.searchResult})}}function K({dialogId:e,position:t,source:a}){const s=c.Core.getStore().getters["chats/get"](e,true);i.sendData({tool:p.im,category:I(s.type),event:l.selectUser,type:a,c_section:h.userAdd,p1:`chatType_${s.type}`,p2:f(),p3:`position_${t}`})}function N(e,t){const s=c.Core.getStore().getters["chats/get"](e,true);const o={tool:p.im,category:I(s.type),event:l.clickAddUser,c_section:t,p2:f(),p5:`chatId_${s.chatId}`};if(s.type===a.ChatType.collab){o.p4=m(s.chatId)}i.sendData(o)}class z{onOpenForm(e){const t=c.Core.getStore().getters["chats/get"](e);const s={tool:p.im,category:I(t.type),event:l.clickEdit,c_section:h.sidebar,c_sub_section:y.contextMenu,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`};if(t.type===a.ChatType.collab){s.p4=m(t.chatId)}i.sendData(s)}onSubmitForm(e){const t=c.Core.getStore().getters["chats/get"](e);const s={tool:p.im,category:I(t.type),c_section:h.editor,event:l.submitEdit,p1:`chatType_${t.type}`,p2:f(),p5:`chatId_${t.chatId}`};if(t.type===a.ChatType.collab){s.p4=m(t.chatId)}i.sendData(s)}}class X{onStartClick(e){const t=c.Core.getStore().getters["application/getLayout"].name;i.sendData({tool:p.im,category:I(e),event:l.clickCreateNew,type:e,c_section:`${t}_tab`,p2:f()})}onCollabEmptyStateCreateClick(){i.sendData({tool:p.im,category:I(a.ChatType.collab),event:l.clickCreateNew,type:a.ChatType.collab,c_section:v.collabEmptyState,p2:f()})}onMenuCreateClick(){const e=c.Core.getStore().getters["application/getLayout"].name;i.sendData({tool:p.im,category:d.messenger,event:l.openCreateMenu,c_section:`${e}_tab`})}}class V{onOpenPriceTable(e){i.sendData({tool:p.infoHelper,category:d.limit,event:l.openPrices,type:e,c_section:h.chat})}onOpenToolsSettings(e){i.sendData({tool:p.infoHelper,category:d.toolOff,event:l.openSettings,type:e,c_section:h.chat})}}class G{onOpenCheckInPopup(){i.sendData({event:l.popupOpen,tool:p.checkin,category:d.shift,c_section:h.chat})}}const J=Object.freeze({create_menu:"create_menu",role_picker:"role_picker"});var Y=babelHelpers.classPrivateFieldLooseKey("sendDataForCopilotCreation");class q{constructor(){Object.defineProperty(this,Y,{value:Q})}onCreateChat(e){i.sendData({event:l.createNewChat,tool:p.ai,category:d.chatOperations,c_section:h.copilotTab,type:g.ai,p3:r.private,p5:`chatId_${e}`})}onCreateDefaultChatInRecent(){babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]({c_sub_section:J.create_menu})}onSelectRoleInRecent(){babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]({c_sub_section:J.role_picker})}onOpenChat(e){const t=c.Core.getStore().getters["chats/get"](e);const a=t.userCounter<=2?r.private:r.multiuser;i.sendData({event:l.openChat,tool:p.ai,category:d.chatOperations,c_section:h.copilotTab,type:g.ai,p3:a,p5:`chatId_${t.chatId}`})}onOpenTab({isAvailable:e=true}={}){const t={event:l.openTab,tool:p.ai,category:d.chatOperations,c_section:h.copilotTab,status:e?u.success:u.errorTurnedOff};i.sendData(t)}onUseAudioInput(){i.sendData({event:l.audioUse,tool:p.ai,category:d.chatOperations,c_section:h.copilotTab})}}function Q(e){const t=c.Core.getStore().getters["application/getLayout"].name;i.sendData({event:l.clickCreateNew,tool:p.im,category:d.copilot,c_section:`${t}_tab`,type:g.copilot,...e})}class Z{onOpenUploadMenu(e){const t=c.Core.getStore().getters["chats/get"](e);const s=P(t);const o={tool:p.im,category:I(t.type),event:l.clickAttach,c_section:h.chatTextarea,p1:`chatType_${s}`,p2:f(),p5:`chatId_${t.chatId}`};if(t.type===a.ChatType.collab){o.p4=m(t.chatId)}i.sendData(o)}}class ee{getSerializedParams(e){const t=this.getAnalyticsOptions(e);const a=Object.entries(t).map((([e,t])=>`st[${e}]=${encodeURIComponent(t)}`));return a.join("&")}getAnalyticsOptions(e){const t=c.Core.getStore().getters["chats/get"](e,true);const s=t.type;const o={tool:p.im,event:l.clickCreatePoll,category:I(s),p1:`chatType_${s}`,p2:f(),p5:`chatId_${t.chatId}`};if(s===a.ChatType.comment){const e=c.Core.getStore().getters["chats/getByChatId"](t.parentChatId);o.p1=`chatType_${e.type}`;o.p4=`parentChatId_${t.parentChatId}`}if(s===a.ChatType.collab){o.p4=m(t.chatId)}return o}}var te=babelHelpers.classPrivateFieldLooseKey("getEventSpecificParams");class ae{constructor(){Object.defineProperty(this,te,{value:se})}onUnpin({dialogId:e,eventParams:t={}}){this.onSendData({dialogId:e,eventParams:{event:l.unpinMessage,...t}})}onSendData({dialogId:e,eventParams:t}){const a=c.Core.getStore().getters["chats/get"](e,true);const s={tool:p.im,category:I(a.type),p1:`chatType_${P(a)}`,...babelHelpers.classPrivateFieldLooseBase(this,te)[te](t.event,a.chatId),...t};i.sendData(s)}}function se(e,t){const a=c.Core.getStore().getters["messages/pin/getPinned"](t).length;if(e===l.pinMessage){return{p3:`pinnedCount_${a}`,type:a>1?_.multiple:_.single}}if(e===l.unpinMessage){return{type:a>0?_.selected:_.single}}return{}}const oe=Object.freeze({recent:"recent",searchResult:"search_result",notes:"notes"});var ce=babelHelpers.classPrivateFieldLooseKey("hasSearchedBefore");var ie=babelHelpers.classPrivateFieldLooseKey("onSelectRecipient");class ne{constructor(){Object.defineProperty(this,ie,{value:re});Object.defineProperty(this,ce,{writable:true,value:false})}onClickForward(e){const t=c.Core.getStore().getters["chats/get"](e);i.sendData({tool:p.im,category:I(t.type),event:l.clickShare,c_section:h.chatWindow,c_sub_section:y.contextMenu,p1:`chatType_${t.type}`,p2:s.getUserType()})}onStartSearch({dialogId:e}){if(babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]){return}babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]=true;const t=c.Core.getStore().getters["chats/get"](e);i.sendData({tool:p.im,category:I(t.type),event:l.startSearch,c_section:h.forward,p1:`chatType_${t.type}`,p2:s.getUserType()})}onSelectRecipientFromRecent({dialogId:e,position:t}){babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]({dialogId:e,position:t,source:oe.recent})}onSelectRecipientFromSearchResult({dialogId:e,position:t}){babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]({dialogId:e,position:t,source:oe.searchResult})}onClosePopup(){babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]=false}}function re({dialogId:e,position:t,source:a}){const o=c.Core.getStore().getters["chats/get"](e);const n=k(e)?oe.notes:a;i.sendData({tool:p.im,category:I(o.type),event:l.selectRecipient,type:n,c_section:h.forward,p1:`chatType_${o.type}`,p2:s.getUserType(),p3:`position_${t}`})}var le=babelHelpers.classPrivateFieldLooseKey("buildAnalyticsData");class pe{constructor(){Object.defineProperty(this,le,{value:de})}onShow(){i.sendData(babelHelpers.classPrivateFieldLooseBase(this,le)[le](l.view))}onClickUpdate(){i.sendData(babelHelpers.classPrivateFieldLooseBase(this,le)[le](l.clickUpdate))}onClickMoreInformation(){i.sendData(babelHelpers.classPrivateFieldLooseBase(this,le)[le](l.clickMoreInformation))}onOpenWebVersion(){i.sendData(babelHelpers.classPrivateFieldLooseBase(this,le)[le](l.goToWeb))}}function de(e){return{tool:p.inform,category:d.updateAppPopup,event:e,type:g.may25DesktopRelease}}const ge={single:"files_single",many:"files_all"};const he={...a.FileType,media:"media",any:"any"};var ye=babelHelpers.classPrivateFieldLooseKey("onCopyTextCopilot");var be=babelHelpers.classPrivateFieldLooseKey("getFilesAmountParam");var ue=babelHelpers.classPrivateFieldLooseKey("getAnalyticsFileType");var ve=babelHelpers.classPrivateFieldLooseKey("getBaseParams");class _e{constructor(){Object.defineProperty(this,ve,{value:Ie});Object.defineProperty(this,ue,{value:fe});Object.defineProperty(this,be,{value:Ce});Object.defineProperty(this,ye,{value:me});this.messageForward=new ne;this.messagePins=new ae}onSendFeedback(e){var a;const s=c.Core.getStore().getters["application/getLayout"].name;const o=c.Core.getStore().getters["copilot/chats/getRole"](e);const n=c.Core.getStore().getters["copilot/chats/getAIModel"](e);const r=(a=n.name)!=null?a:n;i.sendData({category:d.copilot,event:l.addFeedback,c_section:`${s}_tab`,p2:`provider_${r}`,p4:`role_${t.Text.toCamelCase(o.code)}`,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onDelete({messageId:e,dialogId:t}){const a=c.Core.getStore().getters["messages/getById"](e);const s=new o.MessageComponentManager(a).getName();i.sendData({category:d.message,event:l.clickDelete,type:s,c_section:h.chatWindow,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](t)})}onCancelDelete({messageId:e,dialogId:t}){const a=c.Core.getStore().getters["messages/getById"](e);const s=new o.MessageComponentManager(a).getName();const n=c.Core.getStore().getters["chats/get"](t);i.sendData({category:d.message,event:l.cancelDelete,type:s,c_section:h.popup,p5:`chatId_${n.chatId}`,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](t)})}onFileDownload({messageId:e,dialogId:t}){const o=c.Core.getStore().getters["chats/get"](t);const n={category:I(o.type),event:l.downloadFile,type:babelHelpers.classPrivateFieldLooseBase(this,ue)[ue](e),c_section:h.chatWindow,p2:s.getUserType(),p3:babelHelpers.classPrivateFieldLooseBase(this,be)[be](e),p5:`chatId_${o.chatId}`,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](t)};if(o.type===a.ChatType.collab){n.p4=s.getCollabId(o.chatId)}i.sendData(n)}onSaveOnDisk({messageId:e,dialogId:t}){const o=c.Core.getStore().getters["chats/get"](t);const n={category:I(o.type),event:l.saveToDisk,type:babelHelpers.classPrivateFieldLooseBase(this,ue)[ue](e),c_section:h.chatWindow,c_element:b.more,p2:s.getUserType(),p3:babelHelpers.classPrivateFieldLooseBase(this,be)[be](e),p5:`chatId_${o.chatId}`,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](t)};if(o.type===a.ChatType.collab){n.p4=s.getCollabId(o.chatId)}i.sendData(n)}onCopyLink(e){const t=c.Core.getStore().getters["chats/get"](e,true);i.sendData({category:I(t.type),event:l.copyLink,c_section:h.chatWindow,c_element:b.more,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onCopyFile({dialogId:e,fileId:t}){const a=c.Core.getStore().getters["chats/get"](e,true);const s=c.Core.getStore().getters["files/get"](t);i.sendData({category:I(a.type),event:l.copyFile,type:s.type,c_section:h.chatWindow,c_element:b.more,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onEdit(e){const t=c.Core.getStore().getters["chats/get"](e,true);i.sendData({category:I(t.type),event:l.clickEdit,c_section:h.chatWindow,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onCreateTask(e){const t=c.Core.getStore().getters["chats/get"](e,true);i.sendData({category:I(t.type),event:l.clickCreateTask,c_section:h.chatWindow,c_element:b.more,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onSelect(e){const t=c.Core.getStore().getters["chats/get"](e,true);i.sendData({category:I(t.type),event:l.select,c_section:h.chatWindow,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onMark(e){const t=c.Core.getStore().getters["chats/get"](e,true);i.sendData({category:I(t.type),event:l.seeLater,c_section:h.chatWindow,c_element:b.more,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onReply(e){const t=c.Core.getStore().getters["chats/get"](e,true);i.sendData({category:I(t.type),event:l.clickReply,c_section:h.chatWindow,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onAddFavorite({dialogId:e,messageId:t}){const a=c.Core.getStore().getters["chats/get"](e,true);const s=c.Core.getStore().getters["messages/getById"](t);const n=new o.MessageComponentManager(s).getName();i.sendData({category:I(a.type),event:l.addToFav,type:n,c_section:h.chatWindow,c_element:b.more,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onCreateEvent(e){const t=c.Core.getStore().getters["chats/get"](e,true);i.sendData({category:I(t.type),event:l.clickCreateEvent,c_section:h.chatWindow,c_element:b.more,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onCopyText({dialogId:e,messageId:t}){const s=c.Core.getStore().getters["chats/get"](e,true);const n=c.Core.getStore().getters["messages/getById"](t);const r=new o.MessageComponentManager(n).getName();if(s.type===a.ChatType.copilot){babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]({dialogId:e,messageId:t});return}i.sendData({category:I(s.type),event:l.copyMessage,type:r,c_section:h.chatWindow,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}onPin(e){this.messagePins.onSendData({dialogId:e,eventParams:{event:l.pinMessage,c_section:h.chatWindow}})}onReachingPinsLimit(e){this.messagePins.onSendData({dialogId:e,eventParams:{event:l.pinnedMessageLimitException,c_section:h.chatWindow}})}onUnpin(e){this.messagePins.onUnpin({dialogId:e,eventParams:{c_section:h.chatWindow}})}onForward(e){this.messageForward.onClickForward(e)}}function me({dialogId:e,messageId:a}){var s;const n=c.Core.getStore().getters["copilot/chats/getAIModel"](e);const r=c.Core.getStore().getters["application/getLayout"].name;const p=c.Core.getStore().getters["chats/get"](e,true);const g=c.Core.getStore().getters["messages/getById"](a);const h=c.Core.getStore().getters["copilot/chats/getRole"](e);const y=new o.MessageComponentManager(g).getName();const b=(s=n.name)!=null?s:n;i.sendData({category:d.copilot,event:l.copyMessage,type:y,c_section:`${r}_tab`,p2:`provider_${b}`,p4:`role_${t.Text.toCamelCase(h.code)}`,p5:`chatId_${p.chatId}`,...babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e)})}function Ce(e){const t=c.Core.getStore().getters["messages/getById"](e);if(t.files.length===1){return ge.single}return ge.many}function fe(e){const t=c.Core.getStore().getters["messages/getById"](e);const s=t.files.map((e=>c.Core.getStore().getters["files/get"](e).type));const o=[...new Set(s)];if(o.length===1){return o[0]}if(o.length===2&&o.includes(a.FileType.image)&&o.includes(a.FileType.video)){return he.media}return he.any}function Ie(e){const t=c.Core.getStore().getters["chats/get"](e,true);return{tool:p.im,c_sub_section:y.contextMenu,p1:`chatType_${t.type}`}}class Se{getEmptyStateContext(){return h.chatEmptyState}getRecentCreateMenuContext(){return h.chatCreateMenu}}class Pe{onPin(e){if(!k(e)){return}const t=c.Core.getStore().getters["chats/get"](e);const a={tool:p.im,category:I(t.type),event:l.pinChat,p1:`chatType_${k(e)?n:t.type}`};i.sendData(a)}}var ke=babelHelpers.classPrivateFieldLooseKey("excludedChats");var Fe=babelHelpers.classPrivateFieldLooseKey("chatsWithTyping");var Te=babelHelpers.classPrivateFieldLooseKey("currentTab");var Be=babelHelpers.classPrivateFieldLooseKey("instance");class Le{constructor(){Object.defineProperty(this,ke,{writable:true,value:new Set});Object.defineProperty(this,Fe,{writable:true,value:new Set});Object.defineProperty(this,Te,{writable:true,value:a.Layout.chat});this.chatCreate=new X;this.chatEdit=new z;this.chatDelete=new D;this.messageDelete=new H;this.historyLimit=new M;this.userAdd=new W;this.collabEntities=new T;this.chatEntities=new L;this.supervisor=new V;this.checkIn=new G;this.copilot=new q;this.attachMenu=new Z;this.vote=new ee;this.messagePins=new ae;this.messageForward=new ne;this.desktopUpdateBanner=new pe;this.messageContextMenu=new _e;this.sliderInvite=new Se;this.chatPins=new Pe}static getInstance(){if(!babelHelpers.classPrivateFieldLooseBase(this,Be)[Be]){babelHelpers.classPrivateFieldLooseBase(this,Be)[Be]=new this}return babelHelpers.classPrivateFieldLooseBase(this,Be)[Be]}ignoreNextChatOpen(e){babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].add(e)}onOpenTab(e){const t=[a.Layout.aiAssistant,a.Layout.collab,a.Layout.channel,a.Layout.notification,a.Layout.settings,a.Layout.openlines];if(!t.includes(e)){return}if(babelHelpers.classPrivateFieldLooseBase(this,Te)[Te]===e){return}babelHelpers.classPrivateFieldLooseBase(this,Te)[Te]=e;i.sendData({event:l.openTab,tool:p.im,category:d.messenger,type:e,p2:f()})}onOpenChat(e){if(babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].has(e.dialogId)){babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].delete(e.dialogId);return}babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe].delete(e.dialogId);const s=P(e);if(s===a.ChatType.copilot){this.copilot.onOpenChat(e.dialogId)}const o=c.Core.getStore().getters["application/getLayout"].name;const r=e.role===a.UserRole.guest?"N":"Y";const d={tool:p.im,category:I(s),event:l.openExisting,type:k(e.dialogId)?n:s,c_section:`${o}_tab`,p2:f()};if(!k(e.dialogId)){d.p5=`chatId_${e.chatId}`}if(s===a.ChatType.comment){const t=c.Core.getStore().getters["chats/getByChatId"](e.parentChatId);d.p1=`chatType_${t.type}`;d.p4=`parentChatId_${e.parentChatId}`}if(s===a.ChatType.collab){d.p4=m(e.chatId)}if(s!==a.ChatType.copilot){d.p3=`isMember_${r}`}if(s===a.ChatType.copilot){const a=c.Core.getStore().getters["copilot/chats/getRole"](e.dialogId);d.p4=`role_${t.Text.toCamelCase(a.code)}`}i.sendData(d)}onTypeMessage(e){if(!k(e.dialogId)||babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe].has(e.dialogId)){return}babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe].add(e.dialogId);const t=P(e);const a={tool:p.im,category:I(t),event:l.typeMessage,p1:`chatType_${k(e.dialogId)?n:t}`};i.sendData(a)}}Object.defineProperty(Le,Be,{writable:true,value:void 0});e.Analytics=Le;e.CreateChatContext=v;e.getCollabId=m;e.getUserType=f})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX,BX.Messenger.v2.Const,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Application,BX.UI.Analytics);
//# sourceMappingURL=analytics.bundle.map.js