this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,t,s,o){"use strict";class r{constructor(){this.store=s.Core.getStore()}async handleRecentListResponse(e){if(!e){return Promise.resolve()}const{recommendedRoles:t,roles:s,chats:o,messages:r}=e;if(!s){return Promise.resolve()}return Promise.all([this.store.dispatch("copilot/chats/add",o),this.store.dispatch("copilot/roles/add",s),this.store.dispatch("copilot/setRecommendedRoles",t),this.store.dispatch("copilot/messages/add",r)])}async handleChatLoadResponse(e){if(!e){return Promise.resolve()}const{aiProvider:t,chats:s,roles:o,messages:r}=e;if(!o){return Promise.resolve()}return Promise.all([this.store.dispatch("copilot/setProvider",t),this.store.dispatch("copilot/roles/add",o),this.store.dispatch("copilot/chats/add",s),this.store.dispatch("copilot/messages/add",r)])}async handleRoleUpdate(e){const{chats:t,roles:s}=e;if(!s){return Promise.resolve()}return Promise.all([this.store.dispatch("copilot/roles/add",s),this.store.dispatch("copilot/chats/add",t)])}async handleMessageAdd(e){const{chats:t,roles:s,messages:o}=e;if(!s){return Promise.resolve()}return Promise.all([this.store.dispatch("copilot/roles/add",s),this.store.dispatch("copilot/chats/add",t),this.store.dispatch("copilot/messages/add",o)])}getRoleAvatarUrl({avatarDialogId:e,contextDialogId:t}){if(!this.isCopilotChatOrBot(e)){return""}return this.store.getters["copilot/chats/getRoleAvatar"](t)}isCopilotBot(e){return this.store.getters["users/bots/isCopilot"](e)}isCopilotChat(e){var s;return((s=this.store.getters["chats/get"](e))==null?void 0:s.type)===t.ChatType.copilot}isCopilotChatOrBot(e){return this.isCopilotChat(e)||this.isCopilotBot(e)}getMessageRoleAvatar(e){var t,s;return(t=this.store.getters["copilot/messages/getRole"](e))==null?void 0:(s=t.avatar)==null?void 0:s.medium}getNameWithRole({dialogId:e,messageId:t}){const s=this.store.getters["users/get"](e);const o=this.store.getters["copilot/messages/getRole"](t).name;return`${s.name} (${o})`}isCopilotMessage(e){const s=this.store.getters["messages/getById"](e);if(!s){return false}if(this.isCopilotBot(s.authorId)){return true}return s.componentId===t.MessageComponent.copilotCreation}static initAvailableAIModelsList(){const{copilot:e}=s.Core.getApplicationData();if(!e.availableEngines){return}void s.Core.getStore().dispatch("copilot/setAvailableAIModels",e.availableEngines)}static getAIModelName(e){const t=o.FeatureManager.isFeatureAvailable(o.Feature.isAIModelChangeAllowed);if(t){const t=s.Core.getStore().getters["copilot/chats/getAIModel"](e);return t.name}return s.Core.getStore().getters["copilot/getProvider"]}}e.CopilotManager=r})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.Messenger.v2.Const,BX.Messenger.v2.Application,BX.Messenger.v2.Lib);
//# sourceMappingURL=copilot.bundle.map.js