this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,a,s,i,l,t,r){"use strict";var o=babelHelpers.classPrivateFieldLooseKey("dialogId");var n=babelHelpers.classPrivateFieldLooseKey("chat");var b=babelHelpers.classPrivateFieldLooseKey("blocks");var c=babelHelpers.classPrivateFieldLooseKey("isFileMigrationFinished");var d=babelHelpers.classPrivateFieldLooseKey("hasMarketApps");var P=babelHelpers.classPrivateFieldLooseKey("hasHistoryLimit");class p{constructor(e,a){Object.defineProperty(this,P,{value:L});Object.defineProperty(this,d,{value:v});Object.defineProperty(this,c,{value:B});Object.defineProperty(this,o,{writable:true,value:void 0});Object.defineProperty(this,n,{writable:true,value:void 0});Object.defineProperty(this,b,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,o)[o]=e;babelHelpers.classPrivateFieldLooseBase(this,n)[n]=i.Core.getStore().getters["chats/get"](e,true);babelHelpers.classPrivateFieldLooseBase(this,b)[b]=a}run(){const e=new Set(babelHelpers.classPrivateFieldLooseBase(this,b)[b]);if(babelHelpers.classPrivateFieldLooseBase(this,c)[c]()){e.delete(r.SidebarMainPanelBlock.fileUnsortedList)}else{e.delete(r.SidebarMainPanelBlock.fileList)}if(!babelHelpers.classPrivateFieldLooseBase(this,d)[d]()){e.delete(r.SidebarMainPanelBlock.marketAppList)}if(!babelHelpers.classPrivateFieldLooseBase(this,P)[P]()){e.delete(r.SidebarMainPanelBlock.tariffLimit)}return[...e]}}function B(){return a.FeatureManager.isFeatureAvailable(a.Feature.sidebarFiles)}function v(){return s.MarketManager.getInstance().getAvailablePlacementsByType(r.PlacementType.sidebar,babelHelpers.classPrivateFieldLooseBase(this,o)[o]).length>0}function L(){const e=r.ChatType.comment===babelHelpers.classPrivateFieldLooseBase(this,n)[n].type;const s=t.ChannelManager.isChannel(babelHelpers.classPrivateFieldLooseBase(this,o)[o]);if(s||e||a.FeatureManager.chatHistory.isAvailable()){return false}return i.Core.getStore().getters["sidebar/hasHistoryLimit"](babelHelpers.classPrivateFieldLooseBase(this,n)[n].chatId)}const h=[r.SidebarMainPanelBlock.chat,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList,r.SidebarMainPanelBlock.marketAppList];var M=babelHelpers.classPrivateFieldLooseKey("configTemplate");var u=babelHelpers.classPrivateFieldLooseKey("getDefaultConfig");class k{constructor(e={}){Object.defineProperty(this,u,{value:S});Object.defineProperty(this,M,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,M)[M]={...babelHelpers.classPrivateFieldLooseBase(this,u)[u](),...e}}get(){return babelHelpers.classPrivateFieldLooseBase(this,M)[M]}}function S(){return{blocks:h,getHeaderTitle:()=>l.Loc.getMessage("IM_SIDEBAR_HEADER_TITLE"),isHeaderMenuEnabled:()=>true,areSharedChatsEnabled:()=>true,areChatMembersEnabled:()=>true,isAutoDeleteEnabled:()=>true,getCustomDescription:()=>""}}var g=babelHelpers.classPrivateFieldLooseKey("dialogId");var f=babelHelpers.classPrivateFieldLooseKey("blocks");var H=babelHelpers.classPrivateFieldLooseKey("getHeaderTitle");var F=babelHelpers.classPrivateFieldLooseKey("getCustomDescription");var y=babelHelpers.classPrivateFieldLooseKey("areChatMembersEnabled");var C=babelHelpers.classPrivateFieldLooseKey("isHeaderMenuEnabled");var m=babelHelpers.classPrivateFieldLooseKey("areSharedChatsEnabled");var E=babelHelpers.classPrivateFieldLooseKey("isAutoDeleteEnabled");class w{constructor(e,a){Object.defineProperty(this,g,{writable:true,value:void 0});Object.defineProperty(this,f,{writable:true,value:void 0});Object.defineProperty(this,H,{writable:true,value:void 0});Object.defineProperty(this,F,{writable:true,value:void 0});Object.defineProperty(this,y,{writable:true,value:void 0});Object.defineProperty(this,C,{writable:true,value:void 0});Object.defineProperty(this,m,{writable:true,value:void 0});Object.defineProperty(this,E,{writable:true,value:void 0});const s=a!=null?a:new k;const{blocks:i,getHeaderTitle:l,isHeaderMenuEnabled:t,getCustomDescription:r,areSharedChatsEnabled:o,areChatMembersEnabled:n,isAutoDeleteEnabled:b}=s.get();babelHelpers.classPrivateFieldLooseBase(this,g)[g]=e;babelHelpers.classPrivateFieldLooseBase(this,f)[f]=i;babelHelpers.classPrivateFieldLooseBase(this,H)[H]=l;babelHelpers.classPrivateFieldLooseBase(this,m)[m]=o;babelHelpers.classPrivateFieldLooseBase(this,y)[y]=n;babelHelpers.classPrivateFieldLooseBase(this,F)[F]=r;babelHelpers.classPrivateFieldLooseBase(this,C)[C]=t;babelHelpers.classPrivateFieldLooseBase(this,E)[E]=b}getBlocks(){return new p(babelHelpers.classPrivateFieldLooseBase(this,g)[g],babelHelpers.classPrivateFieldLooseBase(this,f)[f]).run()}getHeaderTitle(){return babelHelpers.classPrivateFieldLooseBase(this,H)[H]()}getCustomDescription(){return babelHelpers.classPrivateFieldLooseBase(this,F)[F](babelHelpers.classPrivateFieldLooseBase(this,g)[g])}isHeaderMenuEnabled(){return babelHelpers.classPrivateFieldLooseBase(this,C)[C]()}isAutoDeleteEnabled(){return babelHelpers.classPrivateFieldLooseBase(this,E)[E]()}areSharedChatsEnabled(){return babelHelpers.classPrivateFieldLooseBase(this,m)[m]()}areChatMembersEnabled(){return babelHelpers.classPrivateFieldLooseBase(this,y)[y](babelHelpers.classPrivateFieldLooseBase(this,g)[g])}}const A=e=>e.type===r.ChatType.chat;const T=new k({blocks:[r.SidebarMainPanelBlock.chat,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList,r.SidebarMainPanelBlock.marketAppList]});const I=e=>e.type===r.ChatType.user;const O=new k({blocks:[r.SidebarMainPanelBlock.user,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList,r.SidebarMainPanelBlock.marketAppList]});const j=e=>{const a=i.Core.getStore().getters["users/get"](e.dialogId);return(a==null?void 0:a.type)===r.UserType.bot};const D=new k({blocks:[r.SidebarMainPanelBlock.user,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList,r.SidebarMainPanelBlock.marketAppList]});const K=e=>e.type===r.ChatType.user&&Number(e.dialogId)===i.Core.getUserId();const _=new k({blocks:[r.SidebarMainPanelBlock.notes,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList]});const X=e=>e.type===r.ChatType.lines;const R=new k({blocks:[r.SidebarMainPanelBlock.chat,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList],isHeaderMenuEnabled:()=>false});const U=e=>e.type===r.ChatType.collab;const N=new k({blocks:[r.SidebarMainPanelBlock.chat,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList,r.SidebarMainPanelBlock.collabHelpdesk],getHeaderTitle:()=>l.Loc.getMessage("IM_SIDEBAR_COLLAB_HEADER_TITLE")});const q=e=>i.Core.getStore().getters["sidebar/multidialog/isSupport"](e.dialogId);const x=new k({blocks:[r.SidebarMainPanelBlock.support,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.multidialog,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList]});const z=e=>i.Core.getStore().getters["users/bots/isAiAssistant"](e.dialogId);const G=new k({blocks:[r.SidebarMainPanelBlock.user,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList],areSharedChatsEnabled:()=>false,getCustomDescription:()=>l.Loc.getMessage("IM_SIDEBAR_AI_ASSISTANT_DESCRIPTION")});const J=e=>e.type===r.ChatType.comment;const Q=new k({blocks:[r.SidebarMainPanelBlock.post,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList],getHeaderTitle:()=>l.Loc.getMessage("IM_SIDEBAR_COMMENTS_HEADER_TITLE"),isHeaderMenuEnabled:()=>false});const V=e=>t.ChannelManager.isChannel(e.dialogId);const W=new k({blocks:[r.SidebarMainPanelBlock.chat,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList],getHeaderTitle:()=>l.Loc.getMessage("IM_SIDEBAR_CHANNEL_HEADER_TITLE")});const Y=e=>e.type===r.ChatType.copilot;const Z=new k({blocks:[r.SidebarMainPanelBlock.copilot,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.copilotInfo,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList]});var $=babelHelpers.classPrivateFieldLooseKey("instance");var ee=babelHelpers.classPrivateFieldLooseKey("defaultConfigMap");var ae=babelHelpers.classPrivateFieldLooseKey("customConfigMap");var se=babelHelpers.classPrivateFieldLooseKey("checkMigrationStatus");var ie=babelHelpers.classPrivateFieldLooseKey("registerDefaultConfigs");class le{static getInstance(){if(!babelHelpers.classPrivateFieldLooseBase(this,$)[$]){babelHelpers.classPrivateFieldLooseBase(this,$)[$]=new le}return babelHelpers.classPrivateFieldLooseBase(this,$)[$]}constructor(){Object.defineProperty(this,ie,{value:re});Object.defineProperty(this,se,{value:te});Object.defineProperty(this,ee,{writable:true,value:new Map});Object.defineProperty(this,ae,{writable:true,value:new Map});babelHelpers.classPrivateFieldLooseBase(this,se)[se]();babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]()}registerConfig(e,a){babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].set(e,a)}getConfig(e){const a=i.Core.getStore().getters["chats/get"](e,true);const s=[...babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].entries(),...babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].entries()];for(const[i,l]of s){if(i(a)){return new w(e,l)}}return new w(e)}}function te(){const e=a.FeatureManager.isFeatureAvailable(a.Feature.sidebarFiles);const s=a.FeatureManager.isFeatureAvailable(a.Feature.sidebarLinks);void i.Core.getStore().dispatch("sidebar/setFilesMigrated",e);void i.Core.getStore().dispatch("sidebar/setLinksMigrated",s)}function re(){babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].set(Y,Z);babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].set(V,W);babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].set(J,Q);babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].set(q,x);babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].set(z,G);babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].set(j,D);babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].set(K,_);babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].set(X,R);babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].set(U,N);babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].set(I,O);babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].set(A,T)}Object.defineProperty(le,$,{writable:true,value:null});e.SidebarManager=le;e.SidebarConfig=w;e.SidebarPreset=k})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Application,BX,BX.Messenger.v2.Lib,BX.Messenger.v2.Const);
//# sourceMappingURL=sidebar.bundle.map.js