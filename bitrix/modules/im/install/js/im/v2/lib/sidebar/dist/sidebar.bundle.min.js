this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,a,s,i,l,t,r){"use strict";const o=[r.SidebarMainPanelBlock.chat,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList,r.SidebarMainPanelBlock.marketAppList];var n=babelHelpers.classPrivateFieldLooseKey("dialogId");var b=babelHelpers.classPrivateFieldLooseKey("chat");var c=babelHelpers.classPrivateFieldLooseKey("blocks");var d=babelHelpers.classPrivateFieldLooseKey("isFileMigrationFinished");var P=babelHelpers.classPrivateFieldLooseKey("hasMarketApps");var B=babelHelpers.classPrivateFieldLooseKey("hasHistoryLimit");class p{constructor(e,a){Object.defineProperty(this,B,{value:v});Object.defineProperty(this,P,{value:M});Object.defineProperty(this,d,{value:L});Object.defineProperty(this,n,{writable:true,value:void 0});Object.defineProperty(this,b,{writable:true,value:void 0});Object.defineProperty(this,c,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,n)[n]=e;babelHelpers.classPrivateFieldLooseBase(this,b)[b]=i.Core.getStore().getters["chats/get"](e,true);babelHelpers.classPrivateFieldLooseBase(this,c)[c]=a}run(){const e=new Set(babelHelpers.classPrivateFieldLooseBase(this,c)[c]);if(babelHelpers.classPrivateFieldLooseBase(this,d)[d]()){e.delete(r.SidebarMainPanelBlock.fileUnsortedList)}else{e.delete(r.SidebarMainPanelBlock.fileList)}if(!babelHelpers.classPrivateFieldLooseBase(this,P)[P]()){e.delete(r.SidebarMainPanelBlock.marketAppList)}if(!babelHelpers.classPrivateFieldLooseBase(this,B)[B]()){e.delete(r.SidebarMainPanelBlock.tariffLimit)}return[...e]}}function L(){return a.FeatureManager.isFeatureAvailable(a.Feature.sidebarFiles)}function M(){return s.MarketManager.getInstance().getAvailablePlacementsByType(r.PlacementType.sidebar,babelHelpers.classPrivateFieldLooseBase(this,n)[n]).length>0}function v(){const e=r.ChatType.comment===babelHelpers.classPrivateFieldLooseBase(this,b)[b].type;const s=t.ChannelManager.isChannel(babelHelpers.classPrivateFieldLooseBase(this,n)[n]);if(s||e||a.FeatureManager.chatHistory.isAvailable()){return false}return i.Core.getStore().getters["sidebar/hasHistoryLimit"](babelHelpers.classPrivateFieldLooseBase(this,b)[b].chatId)}var h=babelHelpers.classPrivateFieldLooseKey("blocks");var k=babelHelpers.classPrivateFieldLooseKey("headerTitle");var f=babelHelpers.classPrivateFieldLooseKey("headerMenuEnabled");var u=babelHelpers.classPrivateFieldLooseKey("getDefaultConfig");class S{constructor(e={}){Object.defineProperty(this,u,{value:g});Object.defineProperty(this,h,{writable:true,value:void 0});Object.defineProperty(this,k,{writable:true,value:void 0});Object.defineProperty(this,f,{writable:true,value:void 0});const a={...babelHelpers.classPrivateFieldLooseBase(this,u)[u](),...e};const{blocks:s,headerTitle:i,headerMenuEnabled:l}=a;babelHelpers.classPrivateFieldLooseBase(this,h)[h]=s;babelHelpers.classPrivateFieldLooseBase(this,k)[k]=i;babelHelpers.classPrivateFieldLooseBase(this,f)[f]=l}getBlocks(e){return new p(e,babelHelpers.classPrivateFieldLooseBase(this,h)[h]).run()}getHeaderTitle(){return babelHelpers.classPrivateFieldLooseBase(this,k)[k]}isMenuEnabled(){return babelHelpers.classPrivateFieldLooseBase(this,f)[f]}}function g(){return{blocks:o,headerTitle:l.Loc.getMessage("IM_SIDEBAR_HEADER_TITLE"),headerMenuEnabled:true}}const F=e=>e.type===r.ChatType.chat;const H=new S({blocks:[r.SidebarMainPanelBlock.chat,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList,r.SidebarMainPanelBlock.marketAppList]});const y=e=>e.type===r.ChatType.user;const C=new S({blocks:[r.SidebarMainPanelBlock.user,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList,r.SidebarMainPanelBlock.marketAppList]});const m=e=>{const a=i.Core.getStore().getters["users/get"](e.dialogId);return(a==null?void 0:a.type)===r.UserType.bot};const T=new S({blocks:[r.SidebarMainPanelBlock.user,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList,r.SidebarMainPanelBlock.marketAppList]});const w=e=>e.type===r.ChatType.user&&Number(e.dialogId)===i.Core.getUserId();const A=new S({blocks:[r.SidebarMainPanelBlock.notes,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList]});const E=e=>e.type===r.ChatType.lines;const I=new S({blocks:[r.SidebarMainPanelBlock.chat,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList],headerMenuEnabled:false});const O=e=>e.type===r.ChatType.collab;const j=new S({blocks:[r.SidebarMainPanelBlock.chat,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList,r.SidebarMainPanelBlock.collabHelpdesk],headerTitle:l.Loc.getMessage("IM_SIDEBAR_COLLAB_HEADER_TITLE")});const K=e=>i.Core.getStore().getters["sidebar/multidialog/isSupport"](e.dialogId);const _=new S({blocks:[r.SidebarMainPanelBlock.support,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.multidialog,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList]});const X=e=>i.Core.getStore().getters["users/bots/isAiAssistant"](e.dialogId);const D=new S({blocks:[r.SidebarMainPanelBlock.user,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.info]});const U=e=>e.type===r.ChatType.comment;const R=new S({blocks:[r.SidebarMainPanelBlock.post,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList],headerTitle:l.Loc.getMessage("IM_SIDEBAR_COMMENTS_HEADER_TITLE"),headerMenuEnabled:false});const N=e=>t.ChannelManager.isChannel(e.dialogId);const q=new S({blocks:[r.SidebarMainPanelBlock.chat,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList],headerTitle:l.Loc.getMessage("IM_SIDEBAR_CHANNEL_HEADER_TITLE")});const x=e=>e.type===r.ChatType.copilot;const z=new S({blocks:[r.SidebarMainPanelBlock.copilot,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.copilotInfo,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList]});var G=babelHelpers.classPrivateFieldLooseKey("instance");var J=babelHelpers.classPrivateFieldLooseKey("defaultConfigMap");var Q=babelHelpers.classPrivateFieldLooseKey("customConfigMap");var V=babelHelpers.classPrivateFieldLooseKey("checkMigrationStatus");var W=babelHelpers.classPrivateFieldLooseKey("registerDefaultConfigs");class Y{static getInstance(){if(!babelHelpers.classPrivateFieldLooseBase(this,G)[G]){babelHelpers.classPrivateFieldLooseBase(this,G)[G]=new Y}return babelHelpers.classPrivateFieldLooseBase(this,G)[G]}constructor(){Object.defineProperty(this,W,{value:$});Object.defineProperty(this,V,{value:Z});Object.defineProperty(this,J,{writable:true,value:new Map});Object.defineProperty(this,Q,{writable:true,value:new Map});babelHelpers.classPrivateFieldLooseBase(this,V)[V]();babelHelpers.classPrivateFieldLooseBase(this,W)[W]()}registerConfig(e,a){babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].set(e,a)}getConfig(e){const a=i.Core.getStore().getters["chats/get"](e,true);const s=[...babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].entries(),...babelHelpers.classPrivateFieldLooseBase(this,J)[J].entries()];for(const[e,i]of s){if(e(a)){return i}}return new S}}function Z(){const e=a.FeatureManager.isFeatureAvailable(a.Feature.sidebarFiles);const s=a.FeatureManager.isFeatureAvailable(a.Feature.sidebarLinks);void i.Core.getStore().dispatch("sidebar/setFilesMigrated",e);void i.Core.getStore().dispatch("sidebar/setLinksMigrated",s)}function $(){babelHelpers.classPrivateFieldLooseBase(this,J)[J].set(x,z);babelHelpers.classPrivateFieldLooseBase(this,J)[J].set(N,q);babelHelpers.classPrivateFieldLooseBase(this,J)[J].set(U,R);babelHelpers.classPrivateFieldLooseBase(this,J)[J].set(K,_);babelHelpers.classPrivateFieldLooseBase(this,J)[J].set(X,D);babelHelpers.classPrivateFieldLooseBase(this,J)[J].set(m,T);babelHelpers.classPrivateFieldLooseBase(this,J)[J].set(w,A);babelHelpers.classPrivateFieldLooseBase(this,J)[J].set(E,I);babelHelpers.classPrivateFieldLooseBase(this,J)[J].set(O,j);babelHelpers.classPrivateFieldLooseBase(this,J)[J].set(y,C);babelHelpers.classPrivateFieldLooseBase(this,J)[J].set(F,H)}Object.defineProperty(Y,G,{writable:true,value:null});e.SidebarManager=Y;e.SidebarConfig=S})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Application,BX,BX.Messenger.v2.Lib,BX.Messenger.v2.Const);
//# sourceMappingURL=sidebar.bundle.map.js