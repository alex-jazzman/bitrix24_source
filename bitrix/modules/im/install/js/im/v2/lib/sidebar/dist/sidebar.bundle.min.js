this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,a,s,i,t,l,r){"use strict";var o=babelHelpers.classPrivateFieldLooseKey("dialogId");var n=babelHelpers.classPrivateFieldLooseKey("chat");var b=babelHelpers.classPrivateFieldLooseKey("blocks");var c=babelHelpers.classPrivateFieldLooseKey("isFileMigrationFinished");var d=babelHelpers.classPrivateFieldLooseKey("hasMarketApps");var P=babelHelpers.classPrivateFieldLooseKey("hasHistoryLimit");class p{constructor(e,a){Object.defineProperty(this,P,{value:L});Object.defineProperty(this,d,{value:v});Object.defineProperty(this,c,{value:B});Object.defineProperty(this,o,{writable:true,value:void 0});Object.defineProperty(this,n,{writable:true,value:void 0});Object.defineProperty(this,b,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,o)[o]=e;babelHelpers.classPrivateFieldLooseBase(this,n)[n]=i.Core.getStore().getters["chats/get"](e,true);babelHelpers.classPrivateFieldLooseBase(this,b)[b]=a}run(){const e=new Set(babelHelpers.classPrivateFieldLooseBase(this,b)[b]);if(babelHelpers.classPrivateFieldLooseBase(this,c)[c]()){e.delete(r.SidebarMainPanelBlock.fileUnsortedList)}else{e.delete(r.SidebarMainPanelBlock.fileList)}if(!babelHelpers.classPrivateFieldLooseBase(this,d)[d]()){e.delete(r.SidebarMainPanelBlock.marketAppList)}if(!babelHelpers.classPrivateFieldLooseBase(this,P)[P]()){e.delete(r.SidebarMainPanelBlock.tariffLimit)}return[...e]}}function B(){return a.FeatureManager.isFeatureAvailable(a.Feature.sidebarFiles)}function v(){return s.MarketManager.getInstance().getAvailablePlacementsByType(r.PlacementType.sidebar,babelHelpers.classPrivateFieldLooseBase(this,o)[o]).length>0}function L(){const e=r.ChatType.comment===babelHelpers.classPrivateFieldLooseBase(this,n)[n].type;const s=l.ChannelManager.isChannel(babelHelpers.classPrivateFieldLooseBase(this,o)[o]);if(s||e||a.FeatureManager.chatHistory.isAvailable()){return false}return i.Core.getStore().getters["sidebar/hasHistoryLimit"](babelHelpers.classPrivateFieldLooseBase(this,n)[n].chatId)}const h=[r.SidebarMainPanelBlock.chat,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList,r.SidebarMainPanelBlock.marketAppList];var u=babelHelpers.classPrivateFieldLooseKey("configTemplate");var M=babelHelpers.classPrivateFieldLooseKey("getDefaultConfig");class S{constructor(e={}){Object.defineProperty(this,M,{value:k});Object.defineProperty(this,u,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,u)[u]={...babelHelpers.classPrivateFieldLooseBase(this,M)[M](),...e}}get(){return babelHelpers.classPrivateFieldLooseBase(this,u)[u]}}function k(){return{blocks:h,getHeaderTitle:()=>t.Loc.getMessage("IM_SIDEBAR_HEADER_TITLE"),isHeaderMenuEnabled:()=>true,areSharedChatsEnabled:()=>true,areChatMembersEnabled:()=>true,isAutoDeleteEnabled:()=>true,getCustomDescription:()=>""}}var g=babelHelpers.classPrivateFieldLooseKey("dialogId");var f=babelHelpers.classPrivateFieldLooseKey("blocks");var H=babelHelpers.classPrivateFieldLooseKey("getHeaderTitle");var F=babelHelpers.classPrivateFieldLooseKey("getCustomDescription");var y=babelHelpers.classPrivateFieldLooseKey("areChatMembersEnabled");var C=babelHelpers.classPrivateFieldLooseKey("isHeaderMenuEnabled");var E=babelHelpers.classPrivateFieldLooseKey("areSharedChatsEnabled");var m=babelHelpers.classPrivateFieldLooseKey("isAutoDeleteEnabled");class A{constructor(e,a){Object.defineProperty(this,g,{writable:true,value:void 0});Object.defineProperty(this,f,{writable:true,value:void 0});Object.defineProperty(this,H,{writable:true,value:void 0});Object.defineProperty(this,F,{writable:true,value:void 0});Object.defineProperty(this,y,{writable:true,value:void 0});Object.defineProperty(this,C,{writable:true,value:void 0});Object.defineProperty(this,E,{writable:true,value:void 0});Object.defineProperty(this,m,{writable:true,value:void 0});const s=a!=null?a:new S;const{blocks:i,getHeaderTitle:t,isHeaderMenuEnabled:l,getCustomDescription:r,areSharedChatsEnabled:o,areChatMembersEnabled:n,isAutoDeleteEnabled:b}=s.get();babelHelpers.classPrivateFieldLooseBase(this,g)[g]=e;babelHelpers.classPrivateFieldLooseBase(this,f)[f]=i;babelHelpers.classPrivateFieldLooseBase(this,H)[H]=t;babelHelpers.classPrivateFieldLooseBase(this,E)[E]=o;babelHelpers.classPrivateFieldLooseBase(this,y)[y]=n;babelHelpers.classPrivateFieldLooseBase(this,F)[F]=r;babelHelpers.classPrivateFieldLooseBase(this,C)[C]=l;babelHelpers.classPrivateFieldLooseBase(this,m)[m]=b}getBlocks(){return new p(babelHelpers.classPrivateFieldLooseBase(this,g)[g],babelHelpers.classPrivateFieldLooseBase(this,f)[f]).run()}getHeaderTitle(){return babelHelpers.classPrivateFieldLooseBase(this,H)[H]()}getCustomDescription(){return babelHelpers.classPrivateFieldLooseBase(this,F)[F](babelHelpers.classPrivateFieldLooseBase(this,g)[g])}isHeaderMenuEnabled(){return babelHelpers.classPrivateFieldLooseBase(this,C)[C]()}isAutoDeleteEnabled(){return babelHelpers.classPrivateFieldLooseBase(this,m)[m]()}areSharedChatsEnabled(){return babelHelpers.classPrivateFieldLooseBase(this,E)[E]()}areChatMembersEnabled(){return babelHelpers.classPrivateFieldLooseBase(this,y)[y](babelHelpers.classPrivateFieldLooseBase(this,g)[g])}}const T=e=>e.type===r.ChatType.chat;const I=new S({blocks:[r.SidebarMainPanelBlock.chat,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList,r.SidebarMainPanelBlock.marketAppList]});const w=e=>e.type===r.ChatType.user;const D=new S({blocks:[r.SidebarMainPanelBlock.user,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList,r.SidebarMainPanelBlock.marketAppList]});const O=e=>{const a=i.Core.getStore().getters["users/get"](e.dialogId);return(a==null?void 0:a.type)===r.UserType.bot};const _=new S({blocks:[r.SidebarMainPanelBlock.user,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList,r.SidebarMainPanelBlock.marketAppList]});const j=e=>e.type===r.ChatType.user&&Number(e.dialogId)===i.Core.getUserId();const K=new S({blocks:[r.SidebarMainPanelBlock.notes,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList]});const X=e=>e.type===r.ChatType.lines;const R=new S({blocks:[r.SidebarMainPanelBlock.chat,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList],isHeaderMenuEnabled:()=>false});const U=e=>e.type===r.ChatType.collab;const N=new S({blocks:[r.SidebarMainPanelBlock.chat,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.fileUnsortedList,r.SidebarMainPanelBlock.collabHelpdesk],getHeaderTitle:()=>t.Loc.getMessage("IM_SIDEBAR_COLLAB_HEADER_TITLE")});const q=e=>i.Core.getStore().getters["sidebar/multidialog/isSupport"](e.dialogId);const x=new S({blocks:[r.SidebarMainPanelBlock.support,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.multidialog,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList]});const z=e=>i.Core.getStore().getters["users/bots/isAiAssistant"](e.dialogId);const G=new S({blocks:[r.SidebarMainPanelBlock.user,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList],areSharedChatsEnabled:()=>false,getCustomDescription:()=>t.Loc.getMessage("IM_SIDEBAR_AI_ASSISTANT_DESCRIPTION")});const J=e=>[r.ChatType.aiAssistant,r.ChatType.aiAssistantEntity].includes(e.type);const Q=new S({blocks:[r.SidebarMainPanelBlock.chat,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList],getCustomDescription:e=>{if(V(e)){return""}return t.Loc.getMessage("IM_SIDEBAR_AI_ASSISTANT_DESCRIPTION")},areChatMembersEnabled:e=>V(e),areSharedChatsEnabled:()=>false,isAutoDeleteEnabled:()=>false});const V=e=>{const a=i.Core.getStore().getters["chats/get"](e,true);return a.type===r.ChatType.aiAssistant&&a.userCounter>2};const W=e=>e.type===r.ChatType.comment;const Y=new S({blocks:[r.SidebarMainPanelBlock.post,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList],getHeaderTitle:()=>t.Loc.getMessage("IM_SIDEBAR_COMMENTS_HEADER_TITLE"),isHeaderMenuEnabled:()=>false});const Z=e=>l.ChannelManager.isChannel(e.dialogId);const $=new S({blocks:[r.SidebarMainPanelBlock.chat,r.SidebarMainPanelBlock.info,r.SidebarMainPanelBlock.fileList],getHeaderTitle:()=>t.Loc.getMessage("IM_SIDEBAR_CHANNEL_HEADER_TITLE")});const ee=e=>e.type===r.ChatType.copilot;const ae=new S({blocks:[r.SidebarMainPanelBlock.copilot,r.SidebarMainPanelBlock.tariffLimit,r.SidebarMainPanelBlock.copilotInfo,r.SidebarMainPanelBlock.taskList,r.SidebarMainPanelBlock.meetingList]});var se=babelHelpers.classPrivateFieldLooseKey("instance");var ie=babelHelpers.classPrivateFieldLooseKey("defaultConfigMap");var te=babelHelpers.classPrivateFieldLooseKey("customConfigMap");var le=babelHelpers.classPrivateFieldLooseKey("checkMigrationStatus");var re=babelHelpers.classPrivateFieldLooseKey("registerDefaultConfigs");class oe{static getInstance(){if(!babelHelpers.classPrivateFieldLooseBase(this,se)[se]){babelHelpers.classPrivateFieldLooseBase(this,se)[se]=new oe}return babelHelpers.classPrivateFieldLooseBase(this,se)[se]}constructor(){Object.defineProperty(this,re,{value:be});Object.defineProperty(this,le,{value:ne});Object.defineProperty(this,ie,{writable:true,value:new Map});Object.defineProperty(this,te,{writable:true,value:new Map});babelHelpers.classPrivateFieldLooseBase(this,le)[le]();babelHelpers.classPrivateFieldLooseBase(this,re)[re]()}registerConfig(e,a){babelHelpers.classPrivateFieldLooseBase(this,te)[te].set(e,a)}getConfig(e){const a=i.Core.getStore().getters["chats/get"](e,true);const s=[...babelHelpers.classPrivateFieldLooseBase(this,te)[te].entries(),...babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].entries()];for(const[i,t]of s){if(i(a)){return new A(e,t)}}return new A(e)}}function ne(){const e=a.FeatureManager.isFeatureAvailable(a.Feature.sidebarFiles);const s=a.FeatureManager.isFeatureAvailable(a.Feature.sidebarLinks);void i.Core.getStore().dispatch("sidebar/setFilesMigrated",e);void i.Core.getStore().dispatch("sidebar/setLinksMigrated",s)}function be(){babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].set(ee,ae);babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].set(Z,$);babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].set(W,Y);babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].set(q,x);babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].set(z,G);babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].set(J,Q);babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].set(O,_);babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].set(j,K);babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].set(X,R);babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].set(U,N);babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].set(w,D);babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].set(T,I)}Object.defineProperty(oe,se,{writable:true,value:null});e.SidebarManager=oe;e.SidebarConfig=A;e.SidebarPreset=S})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Application,BX,BX.Messenger.v2.Lib,BX.Messenger.v2.Const);
//# sourceMappingURL=sidebar.bundle.map.js