this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(t,e,i,a,s,n,r,o,d){"use strict";const h="IM.AiAssistantWidget:minimize";const l={name:"AiAssistantWidgetChatHeader",components:{ChatHeader:o.ChatHeader,BIcon:n.BIcon},props:{dialogId:{type:String,default:""}},computed:{OutlineIcons:()=>n.Outline,Color:()=>d.Color},methods:{onMinimize(){r.EventEmitter.emit(h)}},template:`\n\t\t<ChatHeader\n\t\t\t:dialogId="dialogId"\n\t\t\t:withCallButton="false"\n\t\t\t:withSearchButton="false"\n\t\t\t:withAddToChatButton="false"\n\t\t>\n\t\t\t<template #before-actions>\n\t\t\t\t<BIcon\n\t\t\t\t\t:name="OutlineIcons.MINIMIZE"\n\t\t\t\t\t:hoverable="true"\n\t\t\t\t\t:color="Color.base4"\n\t\t\t\t\tclass="bx-im-ai-assistant-chat-header__icon"\n\t\t\t\t\t@click="onMinimize"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t</ChatHeader>\n\t`};const c={name:"AiAssistantWidgetChatContent",components:{BaseChatContent:o.BaseChatContent,AiAssistantWidgetChatHeader:l},props:{dialogId:{type:String,default:""},withSidebar:{type:Boolean,default:true}},template:`\n\t\t<BaseChatContent :dialogId="dialogId" :withSidebar="withSidebar">\n\t\t\t<template #header>\n\t\t\t\t<AiAssistantWidgetChatHeader :dialogId="dialogId"/>\n\t\t\t</template>\n\t\t</BaseChatContent>\n\t`};const g={name:"AiAssistantWidgetChatOpener",components:{AiAssistantWidgetChatContent:c},props:{dialogId:{type:String,required:true}},computed:{dialog(){return this.$store.getters["chats/get"](this.dialogId,true)},chatId(){return this.dialog.chatId}},created(){return this.onChatOpen()},methods:{async onChatOpen(){if(this.dialog.inited){a.Logger.warn(`AiAssistantChatOpener: chat ${this.chatId} is already loaded`);return}await this.loadChat()},async loadChat(){a.Logger.warn(`AiAssistantChatOpener: loading chat ${this.chatId}`);await this.getChatService().loadChatWithMessages(this.dialogId);a.Logger.warn(`AiAssistantChatOpener: chat ${this.chatId} is loaded`)},getChatService(){if(!this.chatService){this.chatSerivce=new s.ChatService}return this.chatSerivce}},template:`\n\t\t<div class="bx-im-messenger__scope bx-im-ai-assistant-chat-opener__container">\n\t\t\t<AiAssistantWidgetChatContent :dialogId="dialogId" :withSidebar="false"/>\n\t\t</div>\n\t`};const p="AiAssistantWidgetApplication";var C=babelHelpers.classPrivateFieldLooseKey("initPromise");var A=babelHelpers.classPrivateFieldLooseKey("init");class m{constructor(){Object.defineProperty(this,A,{value:u});Object.defineProperty(this,C,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,C)[C]=babelHelpers.classPrivateFieldLooseBase(this,A)[A]()}ready(){return babelHelpers.classPrivateFieldLooseBase(this,C)[C]}async mount(t){await this.ready();const{rootContainer:i,aiAssistantBotId:a,onError:s}=t;if(!i){return Promise.reject(new Error("Provide node or selector for root container"))}const n=a.toString();return e.Core.createVue(this,{name:p,el:i,onError:s,components:{AiAssistantWidgetChatOpener:g},template:`<AiAssistantWidgetChatOpener dialogId="${n}" />`})}}async function u(){await e.Core.ready();return this}t.AiAssistantWidgetApplication=m})(this.BX.Messenger.v2.Application=this.BX.Messenger.v2.Application||{},BX.Messenger.v2.Application,BX.Messenger.v2.Css,BX.Messenger.v2.Lib,BX.Messenger.v2.Service,BX.UI.IconSet,BX.Event,BX.Messenger.v2.Component.Content,BX.Messenger.v2.Const);
//# sourceMappingURL=ai-assistant-widget.bundle.map.js