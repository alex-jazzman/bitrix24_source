this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(t,e,i,s,n,a,o,r,d,l){"use strict";const h="IM.AiAssistantWidget:minimize";const c={name:"AiAssistantWidgetChatHeader",components:{ChatHeader:d.ChatHeader,BIcon:o.BIcon},props:{dialogId:{type:String,default:""}},computed:{OutlineIcons:()=>o.Outline,Color:()=>l.Color},methods:{onMinimize(){r.EventEmitter.emit(h)},loc(t){return this.$Bitrix.Loc.getMessage(t)}},template:`\n\t\t<ChatHeader\n\t\t\t:dialogId="dialogId"\n\t\t\t:withCallButton="false"\n\t\t\t:withSearchButton="false"\n\t\t\t:withAddToChatButton="false"\n\t\t>\n\t\t\t<template #before-actions>\n\t\t\t\t<BIcon\n\t\t\t\t\t:name="OutlineIcons.CROSS_L"\n\t\t\t\t\t:hoverable="true"\n\t\t\t\t\t:color="Color.base4"\n\t\t\t\t\t:title="loc('IM_AI_ASSISTANT_WIDGET_MINIMIZE')"\n\t\t\t\t\tclass="bx-im-ai-assistant-chat-header__icon"\n\t\t\t\t\t@click="onMinimize"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t</ChatHeader>\n\t`};const g={name:"AiAssistantWidgetChatContent",components:{AiAssistantWidgetChatHeader:c,AiAssistantBotContent:a.AiAssistantBotContent},props:{dialogId:{type:String,default:""},withSidebar:{type:Boolean,default:true}},template:`\n\t\t<AiAssistantBotContent :dialogId="dialogId" :withSidebar="withSidebar">\n\t\t\t<template #header>\n\t\t\t\t<AiAssistantWidgetChatHeader :dialogId="dialogId"/>\n\t\t\t</template>\n\t\t</AiAssistantBotContent>\n\t`};const p={name:"AiAssistantWidgetChatOpener",components:{AiAssistantWidgetChatContent:g},props:{dialogId:{type:String,required:true}},computed:{dialog(){return this.$store.getters["chats/get"](this.dialogId,true)},chatId(){return this.dialog.chatId}},created(){return this.onChatOpen()},methods:{async onChatOpen(){if(this.dialog.inited){s.Logger.warn(`AiAssistantChatOpener: chat ${this.chatId} is already loaded`);return}await this.loadChat()},async loadChat(){s.Logger.warn(`AiAssistantChatOpener: loading chat ${this.chatId}`);await this.getChatService().loadChatWithMessages(this.dialogId);s.Logger.warn(`AiAssistantChatOpener: chat ${this.chatId} is loaded`)},getChatService(){if(!this.chatService){this.chatSerivce=new n.ChatService}return this.chatSerivce}},template:`\n\t\t<div class="bx-im-messenger__scope bx-im-ai-assistant-chat-opener__container">\n\t\t\t<AiAssistantWidgetChatContent :dialogId="dialogId" :withSidebar="false"/>\n\t\t</div>\n\t`};const A="AiAssistantWidgetApplication";var C=babelHelpers.classPrivateFieldLooseKey("initPromise");var m=babelHelpers.classPrivateFieldLooseKey("init");class u{constructor(){Object.defineProperty(this,m,{value:I});Object.defineProperty(this,C,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,C)[C]=babelHelpers.classPrivateFieldLooseBase(this,m)[m]()}ready(){return babelHelpers.classPrivateFieldLooseBase(this,C)[C]}async mount(t){await this.ready();const{rootContainer:i,aiAssistantBotId:s,onError:n}=t;if(!i){return Promise.reject(new Error("Provide node or selector for root container"))}const a=s.toString();return e.Core.createVue(this,{name:A,el:i,onError:n,components:{AiAssistantWidgetChatOpener:p},template:`<AiAssistantWidgetChatOpener dialogId="${a}" />`})}}async function I(){await e.Core.ready();return this}t.AiAssistantWidgetApplication=u})(this.BX.Messenger.v2.Application=this.BX.Messenger.v2.Application||{},BX.Messenger.v2.Application,BX.Messenger.v2.Css,BX.Messenger.v2.Lib,BX.Messenger.v2.Service,BX.Messenger.v2.Component.Content,BX.UI.IconSet,BX.Event,BX.Messenger.v2.Component.Content,BX.Messenger.v2.Const);
//# sourceMappingURL=ai-assistant-widget.bundle.map.js