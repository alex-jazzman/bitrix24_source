{"version":3,"file":"ai-assistant-router.bundle.js","sources":["../src/components/ai-assistant-container.js","../src/ai-assistant-router.js"],"sourcesContent":["import { Messenger } from 'im.public';\nimport { AiAssistantList } from 'im.v2.component.list.items.ai-assistant';\nimport { ActionByUserType, Layout } from 'im.v2.const';\nimport { Logger } from 'im.v2.lib.logger';\nimport { AiAssistantService } from 'im.v2.provider.service.ai-assistant';\nimport { PermissionManager } from 'im.v2.lib.permission';\n\nimport './css/ai-assistant-container.css';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const AiAssistantListContainer = {\n\tname: 'AiAssistantListContainer',\n\tcomponents: { AiAssistantList },\n\temits: ['selectEntity'],\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisCreatingChat: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tcanCreate(): boolean\n\t\t{\n\t\t\treturn PermissionManager.getInstance().canPerformActionByUserType(ActionByUserType.createAiAssistant);\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tLogger.warn('List: AiAssistant container created');\n\t},\n\tmethods: {\n\t\tonChatClick(dialogId)\n\t\t{\n\t\t\tthis.$emit('selectEntity', { layoutName: Layout.aiAssistant, entityId: dialogId });\n\t\t},\n\t\tgetAiAssistantService(): AiAssistantService\n\t\t{\n\t\t\tif (!this.aiAssistantService)\n\t\t\t{\n\t\t\t\tthis.aiAssistantService = new AiAssistantService();\n\t\t\t}\n\n\t\t\treturn this.aiAssistantService;\n\t\t},\n\t\tasync onCreateChatClick()\n\t\t{\n\t\t\tthis.isCreatingChat = true;\n\n\t\t\tconst newDialogId = await this.getAiAssistantService().createChat()\n\t\t\t\t.catch(() => {\n\t\t\t\t\tthis.isCreatingChat = false;\n\t\t\t\t});\n\n\t\t\tthis.isCreatingChat = false;\n\t\t\tvoid Messenger.openCopilot(newDialogId);\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-list-container-ai-assistant__container\">\n\t\t\t<div class=\"bx-im-list-container-ai-assistant__header_container\">\n\t\t\t\t<div class=\"bx-im-list-container-ai-assistant__header_title\">Marta AI</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"canCreate\"\n\t\t\t\t\tclass=\"bx-im-list-container-ai-assistant__create-chat\"\n\t\t\t\t\t:class=\"{ '--loading': isCreatingChat }\"\n\t\t\t\t\t@click=\"onCreateChatClick\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"bx-im-list-container-ai-assistant__create-chat_icon\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-list-container-ai-assistant__elements_container\">\n\t\t\t\t<div class=\"bx-im-list-container-ai-assistant__elements\">\n\t\t\t\t\t<AiAssistantList @chatClick=\"onChatClick\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { CopilotListContainer } from 'im.v2.component.list.container.copilot';\nimport { FeatureManager, Feature } from 'im.v2.lib.feature';\n\nimport { AiAssistantListContainer } from './components/ai-assistant-container';\n\n// @vue/component\nexport const AiAssistantListRouter = {\n\tname: 'AiAssistantListRouter',\n\tcomponents: { CopilotListContainer, AiAssistantListContainer },\n\tcomputed: {\n\t\tisAvailable(): boolean\n\t\t{\n\t\t\treturn FeatureManager.isFeatureAvailable(Feature.aiAssistantChatAvailable);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<AiAssistantListContainer v-if=\"isAvailable\" />\n\t\t<CopilotListContainer v-else />\n\t`,\n};\n"],"names":["AiAssistantListContainer","name","components","AiAssistantList","emits","data","isCreatingChat","computed","canCreate","PermissionManager","getInstance","canPerformActionByUserType","ActionByUserType","createAiAssistant","created","Logger","warn","methods","onChatClick","dialogId","$emit","layoutName","Layout","aiAssistant","entityId","getAiAssistantService","aiAssistantService","AiAssistantService","onCreateChatClick","newDialogId","createChat","catch","Messenger","openCopilot","loc","phraseCode","$Bitrix","Loc","getMessage","template","AiAssistantListRouter","CopilotListContainer","isAvailable","FeatureManager","isFeatureAvailable","Feature","aiAssistantChatAvailable"],"mappings":";;;;;;;;CAWA;AACA,CAAO,MAAMA,wBAAwB,GAAG;GACvCC,IAAI,EAAE,0BAA0B;GAChCC,UAAU,EAAE;sBAAEC;IAAiB;GAC/BC,KAAK,EAAE,CAAC,cAAc,CAAC;GACvBC,IAAI,GACJ;KACC,OAAO;OACNC,cAAc,EAAE;MAChB;IACD;GACDC,QAAQ,EAAE;KACTC,SAAS,GACT;OACC,OAAOC,sCAAiB,CAACC,WAAW,EAAE,CAACC,0BAA0B,CAACC,4BAAgB,CAACC,iBAAiB,CAAC;;IAEtG;GACDC,OAAO,GACP;KACCC,uBAAM,CAACC,IAAI,CAAC,qCAAqC,CAAC;IAClD;GACDC,OAAO,EAAE;KACRC,WAAW,CAACC,QAAQ,EACpB;OACC,IAAI,CAACC,KAAK,CAAC,cAAc,EAAE;SAAEC,UAAU,EAAEC,kBAAM,CAACC,WAAW;SAAEC,QAAQ,EAAEL;QAAU,CAAC;MAClF;KACDM,qBAAqB,GACrB;OACC,IAAI,CAAC,IAAI,CAACC,kBAAkB,EAC5B;SACC,IAAI,CAACA,kBAAkB,GAAG,IAAIC,qDAAkB,EAAE;;OAGnD,OAAO,IAAI,CAACD,kBAAkB;MAC9B;KACD,MAAME,iBAAiB,GACvB;OACC,IAAI,CAACtB,cAAc,GAAG,IAAI;OAE1B,MAAMuB,WAAW,GAAG,MAAM,IAAI,CAACJ,qBAAqB,EAAE,CAACK,UAAU,EAAE,CACjEC,KAAK,CAAC,MAAM;SACZ,IAAI,CAACzB,cAAc,GAAG,KAAK;QAC3B,CAAC;OAEH,IAAI,CAACA,cAAc,GAAG,KAAK;OAC3B,KAAK0B,mBAAS,CAACC,WAAW,CAACJ,WAAW,CAAC;MACvC;KACDK,GAAG,CAACC,UAAkB,EACtB;OACC,OAAO,IAAI,CAACC,OAAO,CAACC,GAAG,CAACC,UAAU,CAACH,UAAU,CAAC;;IAE/C;GACDI,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;CAoBZ,CAAC;;CC9ED;AACA,OAAaC,qBAAqB,GAAG;GACpCvC,IAAI,EAAE,uBAAuB;GAC7BC,UAAU,EAAE;2BAAEuC,2DAAoB;KAAEzC;IAA0B;GAC9DO,QAAQ,EAAE;KACTmC,WAAW,GACX;OACC,OAAOC,gCAAc,CAACC,kBAAkB,CAACC,yBAAO,CAACC,wBAAwB,CAAC;;IAE3E;GACDP,QAAQ,EAAG;;;;CAIZ,CAAC;;;;;;;;"}