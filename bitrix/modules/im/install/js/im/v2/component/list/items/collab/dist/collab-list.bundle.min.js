this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};this.BX.Messenger.v2.Component=this.BX.Messenger.v2.Component||{};(function(t,e,n,i,s,a,o,r){"use strict";const c={name:"EmptyState",methods:{loc(t){return this.$Bitrix.Loc.getMessage(t)}},template:`\n\t\t<div class="bx-im-list-collab__empty">\n\t\t\t<div class="bx-im-list-collab__empty_icon"></div>\n\t\t\t<div class="bx-im-list-collab__empty_text">\n\t\t\t\t{{ loc('IM_LIST_COLLAB_EMPTY_V2') }}\n\t\t\t</div>\n\t\t</div>\n\t`};class l extends o.BaseRecentService{getRestMethodName(){return a.RestMethod.imV2RecentCollabTail}getRecentSaveActionName(){return"recent/setCollab"}}class g extends r.RecentMenu{getMenuItems(){return[this.getUnreadMessageItem(),this.getPinMessageItem(),this.getMuteItem()]}}const d={name:"CollabList",components:{EmptyState:c,LoadingState:i.ListLoadingState,RecentItem:s.RecentItem},emits:["chatClick"],data(){return{isLoading:false,isLoadingNextPage:false,firstPageLoaded:false}},computed:{collection(){return this.$store.getters["recent/getCollabCollection"]},preparedItems(){return[...this.collection].sort(((t,e)=>{const n=this.$store.getters["recent/getSortDate"](t.dialogId);const i=this.$store.getters["recent/getSortDate"](e.dialogId);return i-n}))},pinnedItems(){return this.preparedItems.filter((t=>t.pinned===true))},generalItems(){return this.preparedItems.filter((t=>t.pinned===false))},isEmptyCollection(){return this.collection.length===0}},created(){this.contextMenuManager=new g;void e.DraftManager.getInstance().initDraftHistory()},beforeUnmount(){this.contextMenuManager.destroy()},async activated(){this.isLoading=true;await this.getRecentService().loadFirstPage();this.firstPageLoaded=true;this.isLoading=false},methods:{async onScroll(t){this.contextMenuManager.close();if(!n.Utils.dom.isOneScreenRemaining(t.target)||!this.getRecentService().hasMoreItemsToLoad()){return}this.isLoadingNextPage=true;await this.getRecentService().loadNextPage();this.isLoadingNextPage=false},onClick(t){this.$emit("chatClick",t.dialogId)},onRightClick(t,e){e.preventDefault();const n={dialogId:t.dialogId,recentItem:t};this.contextMenuManager.openMenu(n,e.currentTarget)},getRecentService(){if(!this.service){this.service=new l}return this.service},loc(t){return this.$Bitrix.Loc.getMessage(t)}},template:`\n\t\t<div class="bx-im-list-collab__container">\n\t\t\t<LoadingState v-if="isLoading && !firstPageLoaded" />\n\t\t\t<div v-else @scroll="onScroll" class="bx-im-list-collab__scroll-container">\n\t\t\t\t<EmptyState v-if="isEmptyCollection" />\n\t\t\t\t<div v-if="pinnedItems.length > 0" class="bx-im-list-collab__pinned_container">\n\t\t\t\t\t<RecentItem\n\t\t\t\t\t\tv-for="item in pinnedItems"\n\t\t\t\t\t\t:key="item.dialogId"\n\t\t\t\t\t\t:item="item"\n\t\t\t\t\t\t@click="onClick(item)"\n\t\t\t\t\t\t@click.right="onRightClick(item, $event)"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class="bx-im-list-collab__general_container">\n\t\t\t\t\t<RecentItem\n\t\t\t\t\t\tv-for="item in generalItems"\n\t\t\t\t\t\t:key="item.dialogId"\n\t\t\t\t\t\t:item="item"\n\t\t\t\t\t\t@click="onClick(item)"\n\t\t\t\t\t\t@click.right="onRightClick(item, $event)"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<LoadingState v-if="isLoadingNextPage" />\n\t\t\t</div>\n\t\t</div>\n\t`};t.CollabList=d})(this.BX.Messenger.v2.Component.List=this.BX.Messenger.v2.Component.List||{},BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Component.Elements,BX.Messenger.v2.Component.List,BX.Messenger.v2.Const,BX.Messenger.v2.Service,BX.Messenger.v2.Lib);
//# sourceMappingURL=collab-list.bundle.map.js