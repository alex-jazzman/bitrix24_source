this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};this.BX.Messenger.v2.Component=this.BX.Messenger.v2.Component||{};(function(t,e,i,s,n,a,r,o){"use strict";class c extends r.BaseRecentService{getRestMethodName(){return a.RestMethod.imV2RecentAiAssistantTail}getRecentSaveActionName(){return"recent/setAiAssistant"}}class g extends o.RecentMenu{getMenuItems(){return[this.getUnreadMessageItem(),this.getPinMessageItem(),this.getMuteItem(),this.getHideItem(),this.getLeaveItem()]}}const l={name:"AiAssistantList",components:{RecentItem:n.RecentItem,LoadingState:s.ListLoadingState},emits:["chatClick"],data(){return{isLoading:false,isLoadingNextPage:false}},computed:{collection(){return this.$store.getters["recent/getAiAssistantCollection"]},sortedItems(){return[...this.collection].sort(((t,e)=>{const i=this.$store.getters["recent/getSortDate"](t.dialogId);const s=this.$store.getters["recent/getSortDate"](e.dialogId);return s-i}))},pinnedItems(){return this.sortedItems.filter((t=>t.pinned===true))},generalItems(){return this.sortedItems.filter((t=>t.pinned===false))},isEmptyCollection(){return this.collection.length===0}},async created(){this.contextMenuManager=new g;this.isLoading=true;await this.getRecentService().loadFirstPage();this.isLoading=false;void e.DraftManager.getInstance().initDraftHistory()},beforeUnmount(){this.contextMenuManager.destroy()},methods:{async onScroll(t){this.contextMenuManager.close();if(!i.Utils.dom.isOneScreenRemaining(t.target)||!this.getRecentService().hasMoreItemsToLoad()){return}this.isLoadingNextPage=true;await this.getRecentService().loadNextPage();this.isLoadingNextPage=false},onClick(t){this.$emit("chatClick",t.dialogId)},onRightClick(t,e){e.preventDefault();const i={dialogId:t.dialogId,recentItem:t};this.contextMenuManager.openMenu(i,e.currentTarget)},getRecentService(){if(!this.service){this.service=new c}return this.service},loc(t){return this.$Bitrix.Loc.getMessage(t)}},template:`\n\t\t<div class="bx-im-list-ai-assistant__container">\n\t\t\t<LoadingState v-if="isLoading && isEmptyCollection" />\n\t\t\t<div v-else @scroll="onScroll" class="bx-im-list-ai-assistant__scroll-container">\n\t\t\t\t<div v-if="isEmptyCollection" class="bx-im-list-ai-assistant__empty">\n\t\t\t\t\t<div class="bx-im-list-ai-assistant__empty_icon"></div>\n\t\t\t\t\t<div class="bx-im-list-ai-assistant__empty_text">\n\t\t\t\t\t\t{{ loc('IM_LIST_COPILOT_EMPTY') }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-if="pinnedItems.length > 0" class="bx-im-list-ai-assistant__pinned_container">\n\t\t\t\t\t<RecentItem\n\t\t\t\t\t\tv-for="item in pinnedItems"\n\t\t\t\t\t\t:key="item.dialogId"\n\t\t\t\t\t\t:item="item"\n\t\t\t\t\t\t@click="onClick(item, $event)"\n\t\t\t\t\t\t@click.right="onRightClick(item, $event)"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class="bx-im-list-ai-assistant__general_container">\n\t\t\t\t\t<RecentItem\n\t\t\t\t\t\tv-for="item in generalItems"\n\t\t\t\t\t\t:key="item.dialogId"\n\t\t\t\t\t\t:item="item"\n\t\t\t\t\t\t@click="onClick(item, $event)"\n\t\t\t\t\t\t@click.right="onRightClick(item, $event)"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<LoadingState v-if="isLoadingNextPage" />\n\t\t\t</div>\n\t\t</div>\n\t`};t.AiAssistantList=l})(this.BX.Messenger.v2.Component.List=this.BX.Messenger.v2.Component.List||{},BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Component.Elements,BX.Messenger.v2.Component.List,BX.Messenger.v2.Const,BX.Messenger.v2.Service,BX.Messenger.v2.Lib);
//# sourceMappingURL=ai-assistant-list.bundle.map.js