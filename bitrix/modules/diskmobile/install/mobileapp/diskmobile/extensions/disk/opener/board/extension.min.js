jn.define("disk/opener/board",((t,e,r)=>{const{isEmpty:o}=t("utils/object");const{AnalyticsEvent:n}=t("analytics");class a{#t={};#e=null;constructor(t){this.#t=t||{};BX.addCustomEvent("onBoardUpdate",this.#r)}get#o(){const{id:t,fileData:e}=this.#t;return t||e?.id}get#n(){const{title:t,fileData:e}=this.#t;return t||e?.name}async open(){try{if(!this.#o){return Promise.reject(new Error("boardId is required"))}const{canOpenInDefault:t}=this.#t;const e=t?this.#a:this.#s;this.#i();this.#e=await e();return this.#e}catch(t){console.error(t);return Promise.reject(t)}}#s=async()=>{const{parentWidget:t}=this.#t;const e=t||PageManager;return e.openWidget("web",this.#d()).catch(console.error)};#a=()=>PageManager.openComponent("JSStackComponent",{canOpenInDefault:true,rootWidget:{name:"web",settings:this.#d()}});#d(){return{modal:true,url:this.getBoardUrl(),titleParams:{text:this.#p(this.#n)}}}getBoardUrl(){const{attachedId:t,uniqueCode:e,versionId:r}=this.#t;const o=e?{versionId:r,uniqueCode:e,attachedId:t}:{boardId:this.#o,attached:this.#c()?"Y":"N"};const n={variant:"mobile",no_redirect:"Y"};return this.#l("/mobile/disk/board.php",{...o,...n})}#l(t,e){const r=Object.entries(e).map((([t,e])=>t&&e?`${t}=${e}`:null)).filter(Boolean).join("&");return`${t}?${r}`}#i(){const{analytics:t}=this.#t;if(o(t)){return}const e=(new n).setEvent("open").setCategory("boards").setTool("boards");if(t.moduleId){e.setElement(`docs_attache_${t.moduleId}`)}e.send()}#r=t=>{if(!this.#e){return}if(t.boardName){this.#e.setTitle?.({text:this.#p(t.boardName)})}};#p(t){if(typeof t!=="string"){return""}return t.replace(/\.board$/,"")}#c(){const{isAttached:t,attachedId:e}=this.#t;return t||e>0}}r.exports={boardOpener:t=>new a(t).open()}}));
//# sourceMappingURL=extension.map.js